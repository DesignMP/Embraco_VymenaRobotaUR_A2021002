!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function i(e,t,i){t=t||ne;var s,a=t.createElement("script");if(a.text=e,i)for(s in xe)i[s]&&(a[s]=i[s]);t.head.appendChild(a).parentNode.removeChild(a)}function s(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ue[pe.call(e)]||"object":typeof e}function a(e){var t=!!e&&"length"in e&&e.length,i=s(e);return!ve(e)&&!be(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function n(e,t,i){return ve(t)?ye.grep(e,function(e,s){return!!t.call(e,s,e)!==i}):t.nodeType?ye.grep(e,function(e){return e===t!==i}):"string"!=typeof t?ye.grep(e,function(e){return ce.call(t,e)>-1!==i}):ye.filter(t,e,i)}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function l(e){var t={};return ye.each(e.match(Le)||[],function(e,i){t[i]=!0}),t}function d(e){return e}function h(e){throw e}function c(e,t,i,s){var a;try{e&&ve(a=e.promise)?a.call(e).done(t).fail(i):e&&ve(a=e.then)?a.call(e,t,i):t.apply(void 0,[e].slice(s))}catch(e){i.apply(void 0,[e])}}function u(){ne.removeEventListener("DOMContentLoaded",u),e.removeEventListener("load",u),ye.ready()}function p(e,t){return t.toUpperCase()}function m(e){return e.replace(Me,"ms-").replace(Fe,p)}function g(){this.expando=ye.expando+g.uid++}function f(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Be.test(e)?JSON.parse(e):e)}function _(e,t,i){var s;if(void 0===i&&1===e.nodeType)if(s="data-"+t.replace(He,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(s))){try{i=f(i)}catch(e){}Ve.set(e,t,i)}else i=void 0;return i}function v(e,t,i,s){var a,r,n=20,o=s?function(){return s.cur()}:function(){return ye.css(e,t,"")},l=o(),d=i&&i[3]||(ye.cssNumber[t]?"":"px"),h=(ye.cssNumber[t]||"px"!==d&&+l)&&Ue.exec(ye.css(e,t));if(h&&h[3]!==d){for(l/=2,d=d||h[3],h=+l||1;n--;)ye.style(e,t,h+d),(1-r)*(1-(r=o()/l||.5))<=0&&(n=0),h/=r;h*=2,ye.style(e,t,h+d),i=i||[]}return i&&(h=+h||+l||0,a=i[1]?h+(i[1]+1)*i[2]:+i[2],s&&(s.unit=d,s.start=h,s.end=a)),a}function b(e){var t,i=e.ownerDocument,s=e.nodeName,a=$e[s];return a||(t=i.body.appendChild(i.createElement(s)),a=ye.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),$e[s]=a,a)}function x(e,t){for(var i,s,a=[],r=0,n=e.length;r<n;r++)s=e[r],s.style&&(i=s.style.display,t?("none"===i&&(a[r]=ze.get(s,"display")||null,a[r]||(s.style.display="")),""===s.style.display&&Xe(s)&&(a[r]=b(s))):"none"!==i&&(a[r]="none",ze.set(s,"display",i)));for(r=0;r<n;r++)null!=a[r]&&(e[r].style.display=a[r]);return e}function y(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&r(e,t)?ye.merge([e],i):i}function w(e,t){for(var i=0,s=e.length;i<s;i++)ze.set(e[i],"globalEval",!t||ze.get(t[i],"globalEval"))}function C(e,t,i,a,r){for(var n,o,l,d,h,c,u=t.createDocumentFragment(),p=[],m=0,g=e.length;m<g;m++)if((n=e[m])||0===n)if("object"===s(n))ye.merge(p,n.nodeType?[n]:n);else if(Je.test(n)){for(o=o||u.appendChild(t.createElement("div")),l=(Qe.exec(n)||["",""])[1].toLowerCase(),d=Ze[l]||Ze._default,o.innerHTML=d[1]+ye.htmlPrefilter(n)+d[2],c=d[0];c--;)o=o.lastChild;ye.merge(p,o.childNodes),o=u.firstChild,o.textContent=""}else p.push(t.createTextNode(n));for(u.textContent="",m=0;n=p[m++];)if(a&&ye.inArray(n,a)>-1)r&&r.push(n);else if(h=ye.contains(n.ownerDocument,n),o=y(u.appendChild(n),"script"),h&&w(o),i)for(c=0;n=o[c++];)Ke.test(n.type||"")&&i.push(n);return u}function S(){return!0}function T(){return!1}function R(){try{return ne.activeElement}catch(e){}}function k(e,t,i,s,a,r){var n,o;if("object"==typeof t){"string"!=typeof i&&(s=s||i,i=void 0);for(o in t)k(e,o,i,s,t[o],r);return e}if(null==s&&null==a?(a=i,s=i=void 0):null==a&&("string"==typeof i?(a=s,s=void 0):(a=s,s=i,i=void 0)),!1===a)a=T;else if(!a)return e;return 1===r&&(n=a,a=function(e){return ye().off(e),n.apply(this,arguments)},a.guid=n.guid||(n.guid=ye.guid++)),e.each(function(){ye.event.add(this,t,a,s,i)})}function O(e,t){return r(e,"table")&&r(11!==t.nodeType?t:t.firstChild,"tr")?ye(e).children("tbody")[0]||e:e}function D(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function I(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function j(e,t){var i,s,a,r,n,o,l,d;if(1===t.nodeType){if(ze.hasData(e)&&(r=ze.access(e),n=ze.set(t,r),d=r.events)){delete n.handle,n.events={};for(a in d)for(i=0,s=d[a].length;i<s;i++)ye.event.add(t,a,d[a][i])}Ve.hasData(e)&&(o=Ve.access(e),l=ye.extend({},o),Ve.set(t,l))}}function L(e,t){var i=t.nodeName.toLowerCase();"input"===i&&qe.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function A(e,t,s,a){t=de.apply([],t);var r,n,o,l,d,h,c=0,u=e.length,p=u-1,m=t[0],g=ve(m);if(g||u>1&&"string"==typeof m&&!_e.checkClone&&nt.test(m))return e.each(function(i){var r=e.eq(i);g&&(t[0]=m.call(this,i,r.html())),A(r,t,s,a)});if(u&&(r=C(t,e[0].ownerDocument,!1,e,a),n=r.firstChild,1===r.childNodes.length&&(r=n),n||a)){for(o=ye.map(y(r,"script"),D),l=o.length;c<u;c++)d=r,c!==p&&(d=ye.clone(d,!0,!0),l&&ye.merge(o,y(d,"script"))),s.call(e[c],d,c);if(l)for(h=o[o.length-1].ownerDocument,ye.map(o,I),c=0;c<l;c++)d=o[c],Ke.test(d.type||"")&&!ze.access(d,"globalEval")&&ye.contains(h,d)&&(d.src&&"module"!==(d.type||"").toLowerCase()?ye._evalUrl&&ye._evalUrl(d.src):i(d.textContent.replace(ot,""),h,d))}return e}function E(e,t,i){for(var s,a=t?ye.filter(t,e):e,r=0;null!=(s=a[r]);r++)i||1!==s.nodeType||ye.cleanData(y(s)),s.parentNode&&(i&&ye.contains(s.ownerDocument,s)&&w(y(s,"script")),s.parentNode.removeChild(s));return e}function P(e,t,i){var s,a,r,n,o=e.style;return i=i||dt(e),i&&(n=i.getPropertyValue(t)||i[t],""!==n||ye.contains(e.ownerDocument,e)||(n=ye.style(e,t)),!_e.pixelBoxStyles()&&lt.test(n)&&ht.test(t)&&(s=o.width,a=o.minWidth,r=o.maxWidth,o.minWidth=o.maxWidth=o.width=n,n=i.width,o.width=s,o.minWidth=a,o.maxWidth=r)),void 0!==n?n+"":n}function M(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function F(e){if(e in ft)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=gt.length;i--;)if((e=gt[i]+t)in ft)return e}function N(e){var t=ye.cssProps[e];return t||(t=ye.cssProps[e]=F(e)||e),t}function z(e,t,i){var s=Ue.exec(t);return s?Math.max(0,s[2]-(i||0))+(s[3]||"px"):t}function V(e,t,i,s,a,r){var n="width"===t?1:0,o=0,l=0;if(i===(s?"border":"content"))return 0;for(;n<4;n+=2)"margin"===i&&(l+=ye.css(e,i+We[n],!0,a)),s?("content"===i&&(l-=ye.css(e,"padding"+We[n],!0,a)),"margin"!==i&&(l-=ye.css(e,"border"+We[n]+"Width",!0,a))):(l+=ye.css(e,"padding"+We[n],!0,a),"padding"!==i?l+=ye.css(e,"border"+We[n]+"Width",!0,a):o+=ye.css(e,"border"+We[n]+"Width",!0,a));return!s&&r>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-l-o-.5))),l}function B(e,t,i){var s=dt(e),a=P(e,t,s),r="border-box"===ye.css(e,"boxSizing",!1,s),n=r;if(lt.test(a)){if(!i)return a;a="auto"}return n=n&&(_e.boxSizingReliable()||a===e.style[t]),("auto"===a||!parseFloat(a)&&"inline"===ye.css(e,"display",!1,s))&&(a=e["offset"+t[0].toUpperCase()+t.slice(1)],n=!0),(a=parseFloat(a)||0)+V(e,t,i||(r?"border":"content"),n,s,a)+"px"}function H(e,t,i,s,a){return new H.prototype.init(e,t,i,s,a)}function Y(){vt&&(!1===ne.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(Y):e.setTimeout(Y,ye.fx.interval),ye.fx.tick())}function U(){return e.setTimeout(function(){_t=void 0}),_t=Date.now()}function W(e,t){var i,s=0,a={height:e};for(t=t?1:0;s<4;s+=2-t)i=We[s],a["margin"+i]=a["padding"+i]=e;return t&&(a.opacity=a.width=e),a}function X(e,t,i){for(var s,a=(q.tweeners[t]||[]).concat(q.tweeners["*"]),r=0,n=a.length;r<n;r++)if(s=a[r].call(i,t,e))return s}function G(e,t,i){var s,a,r,n,o,l,d,h,c="width"in t||"height"in t,u=this,p={},m=e.style,g=e.nodeType&&Xe(e),f=ze.get(e,"fxshow");i.queue||(n=ye._queueHooks(e,"fx"),null==n.unqueued&&(n.unqueued=0,o=n.empty.fire,n.empty.fire=function(){n.unqueued||o()}),n.unqueued++,u.always(function(){u.always(function(){n.unqueued--,ye.queue(e,"fx").length||n.empty.fire()})}));for(s in t)if(a=t[s],bt.test(a)){if(delete t[s],r=r||"toggle"===a,a===(g?"hide":"show")){if("show"!==a||!f||void 0===f[s])continue;g=!0}p[s]=f&&f[s]||ye.style(e,s)}if((l=!ye.isEmptyObject(t))||!ye.isEmptyObject(p)){c&&1===e.nodeType&&(i.overflow=[m.overflow,m.overflowX,m.overflowY],d=f&&f.display,null==d&&(d=ze.get(e,"display")),h=ye.css(e,"display"),"none"===h&&(d?h=d:(x([e],!0),d=e.style.display||d,h=ye.css(e,"display"),x([e]))),("inline"===h||"inline-block"===h&&null!=d)&&"none"===ye.css(e,"float")&&(l||(u.done(function(){m.display=d}),null==d&&(h=m.display,d="none"===h?"":h)),m.display="inline-block")),i.overflow&&(m.overflow="hidden",u.always(function(){m.overflow=i.overflow[0],m.overflowX=i.overflow[1],m.overflowY=i.overflow[2]})),l=!1;for(s in p)l||(f?"hidden"in f&&(g=f.hidden):f=ze.access(e,"fxshow",{display:d}),r&&(f.hidden=!g),g&&x([e],!0),u.done(function(){g||x([e]),ze.remove(e,"fxshow");for(s in p)ye.style(e,s,p[s])})),l=X(g?f[s]:0,s,u),s in f||(f[s]=l.start,g&&(l.end=l.start,l.start=0))}}function $(e,t){var i,s,a,r,n;for(i in e)if(s=m(i),a=t[s],r=e[i],Array.isArray(r)&&(a=r[1],r=e[i]=r[0]),i!==s&&(e[s]=r,delete e[i]),(n=ye.cssHooks[s])&&"expand"in n){r=n.expand(r),delete e[s];for(i in r)i in e||(e[i]=r[i],t[i]=a)}else t[s]=a}function q(e,t,i){var s,a,r=0,n=q.prefilters.length,o=ye.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=_t||U(),i=Math.max(0,d.startTime+d.duration-t),s=i/d.duration||0,r=1-s,n=0,l=d.tweens.length;n<l;n++)d.tweens[n].run(r);return o.notifyWith(e,[d,r,i]),r<1&&l?i:(l||o.notifyWith(e,[d,1,0]),o.resolveWith(e,[d]),!1)},d=o.promise({elem:e,props:ye.extend({},t),opts:ye.extend(!0,{specialEasing:{},easing:ye.easing._default},i),originalProperties:t,originalOptions:i,startTime:_t||U(),duration:i.duration,tweens:[],createTween:function(t,i){var s=ye.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(s),s},stop:function(t){var i=0,s=t?d.tweens.length:0;if(a)return this;for(a=!0;i<s;i++)d.tweens[i].run(1);return t?(o.notifyWith(e,[d,1,0]),o.resolveWith(e,[d,t])):o.rejectWith(e,[d,t]),this}}),h=d.props;for($(h,d.opts.specialEasing);r<n;r++)if(s=q.prefilters[r].call(d,e,h,d.opts))return ve(s.stop)&&(ye._queueHooks(d.elem,d.opts.queue).stop=s.stop.bind(s)),s;return ye.map(h,X,d),ve(d.opts.start)&&d.opts.start.call(e,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),ye.fx.timer(ye.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d}function Q(e){return(e.match(Le)||[]).join(" ")}function K(e){return e.getAttribute&&e.getAttribute("class")||""}function Z(e){return Array.isArray(e)?e:"string"==typeof e?e.match(Le)||[]:[]}function J(e,t,i,a){var r;if(Array.isArray(t))ye.each(t,function(t,s){i||jt.test(e)?a(e,s):J(e+"["+("object"==typeof s&&null!=s?t:"")+"]",s,i,a)});else if(i||"object"!==s(t))a(e,t);else for(r in t)J(e+"["+r+"]",t[r],i,a)}function ee(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var s,a=0,r=t.toLowerCase().match(Le)||[];if(ve(i))for(;s=r[a++];)"+"===s[0]?(s=s.slice(1)||"*",(e[s]=e[s]||[]).unshift(i)):(e[s]=e[s]||[]).push(i)}}function te(e,t,i,s){function a(o){var l;return r[o]=!0,ye.each(e[o]||[],function(e,o){var d=o(t,i,s);return"string"!=typeof d||n||r[d]?n?!(l=d):void 0:(t.dataTypes.unshift(d),a(d),!1)}),l}var r={},n=e===Yt;return a(t.dataTypes[0])||!r["*"]&&a("*")}function ie(e,t){var i,s,a=ye.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((a[i]?e:s||(s={}))[i]=t[i]);return s&&ye.extend(!0,e,s),e}function se(e,t,i){for(var s,a,r,n,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===s&&(s=e.mimeType||t.getResponseHeader("Content-Type"));if(s)for(a in o)if(o[a]&&o[a].test(s)){l.unshift(a);break}if(l[0]in i)r=l[0];else{for(a in i){if(!l[0]||e.converters[a+" "+l[0]]){r=a;break}n||(n=a)}r=r||n}if(r)return r!==l[0]&&l.unshift(r),i[r]}function ae(e,t,i,s){var a,r,n,o,l,d={},h=e.dataTypes.slice();if(h[1])for(n in e.converters)d[n.toLowerCase()]=e.converters[n];for(r=h.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&s&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=h.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(n=d[l+" "+r]||d["* "+r]))for(a in d)if(o=a.split(" "),o[1]===r&&(n=d[l+" "+o[0]]||d["* "+o[0]])){!0===n?n=d[a]:!0!==d[a]&&(r=o[0],h.unshift(o[1]));break}if(!0!==n)if(n&&e.throws)t=n(t);else try{t=n(t)}catch(e){return{state:"parsererror",error:n?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}var re=[],ne=e.document,oe=Object.getPrototypeOf,le=re.slice,de=re.concat,he=re.push,ce=re.indexOf,ue={},pe=ue.toString,me=ue.hasOwnProperty,ge=me.toString,fe=ge.call(Object),_e={},ve=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},be=function(e){return null!=e&&e===e.window},xe={type:!0,src:!0,noModule:!0},ye=function(e,t){return new ye.fn.init(e,t)},we=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;ye.fn=ye.prototype={jquery:"3.3.1",constructor:ye,length:0,toArray:function(){return le.call(this)},get:function(e){return null==e?le.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ye.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ye.each(this,e)},map:function(e){return this.pushStack(ye.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(le.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:he,sort:re.sort,splice:re.splice},ye.extend=ye.fn.extend=function(){var e,t,i,s,a,r,n=arguments[0]||{},o=1,l=arguments.length,d=!1;for("boolean"==typeof n&&(d=n,n=arguments[o]||{},o++),"object"==typeof n||ve(n)||(n={}),o===l&&(n=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(t in e)i=n[t],s=e[t],n!==s&&(d&&s&&(ye.isPlainObject(s)||(a=Array.isArray(s)))?(a?(a=!1,r=i&&Array.isArray(i)?i:[]):r=i&&ye.isPlainObject(i)?i:{},n[t]=ye.extend(d,r,s)):void 0!==s&&(n[t]=s));return n},ye.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==pe.call(e))&&(!(t=oe(e))||"function"==typeof(i=me.call(t,"constructor")&&t.constructor)&&ge.call(i)===fe)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){i(e)},each:function(e,t){var i,s=0;if(a(e))for(i=e.length;s<i&&!1!==t.call(e[s],s,e[s]);s++);else for(s in e)if(!1===t.call(e[s],s,e[s]))break;return e},trim:function(e){return null==e?"":(e+"").replace(we,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(a(Object(e))?ye.merge(i,"string"==typeof e?[e]:e):he.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:ce.call(t,e,i)},merge:function(e,t){for(var i=+t.length,s=0,a=e.length;s<i;s++)e[a++]=t[s];return e.length=a,e},grep:function(e,t,i){for(var s=[],a=0,r=e.length,n=!i;a<r;a++)!t(e[a],a)!==n&&s.push(e[a]);return s},map:function(e,t,i){var s,r,n=0,o=[];if(a(e))for(s=e.length;n<s;n++)null!=(r=t(e[n],n,i))&&o.push(r);else for(n in e)null!=(r=t(e[n],n,i))&&o.push(r);return de.apply([],o)},guid:1,support:_e}),"function"==typeof Symbol&&(ye.fn[Symbol.iterator]=re[Symbol.iterator]),ye.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ue["[object "+t+"]"]=t.toLowerCase()});var Ce=function(e){function t(e,t,i,s){var a,r,n,o,l,h,u,p=t&&t.ownerDocument,m=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return i;if(!s&&((t?t.ownerDocument||t:z)!==j&&I(t),t=t||j,A)){if(11!==m&&(l=ge.exec(e)))if(a=l[1]){if(9===m){if(!(n=t.getElementById(a)))return i;if(n.id===a)return i.push(n),i}else if(p&&(n=p.getElementById(a))&&F(t,n)&&n.id===a)return i.push(n),i}else{if(l[2])return Q.apply(i,t.getElementsByTagName(e)),i;if((a=l[3])&&x.getElementsByClassName&&t.getElementsByClassName)return Q.apply(i,t.getElementsByClassName(a)),i}if(x.qsa&&!U[e+" "]&&(!E||!E.test(e))){if(1!==m)p=t,u=e;else if("object"!==t.nodeName.toLowerCase()){for((o=t.getAttribute("id"))?o=o.replace(be,xe):t.setAttribute("id",o=N),h=S(e),r=h.length;r--;)h[r]="#"+o+" "+c(h[r]);u=h.join(","),p=fe.test(e)&&d(t.parentNode)||t}if(u)try{return Q.apply(i,p.querySelectorAll(u)),i}catch(e){}finally{o===N&&t.removeAttribute("id")}}}return R(e.replace(re,"$1"),t,i,s)}function i(){function e(i,s){return t.push(i+" ")>y.cacheLength&&delete e[t.shift()],e[i+" "]=s}var t=[];return e}function s(e){return e[N]=!0,e}function a(e){var t=j.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var i=e.split("|"),s=i.length;s--;)y.attrHandle[i[s]]=t}function n(e,t){var i=t&&e,s=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(s)return s;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function o(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&we(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return s(function(t){return t=+t,s(function(i,s){for(var a,r=e([],i.length,t),n=r.length;n--;)i[a=r[n]]&&(i[a]=!(s[a]=i[a]))})})}function d(e){return e&&void 0!==e.getElementsByTagName&&e}function h(){}function c(e){for(var t=0,i=e.length,s="";t<i;t++)s+=e[t].value;return s}function u(e,t,i){var s=t.dir,a=t.next,r=a||s,n=i&&"parentNode"===r,o=B++;return t.first?function(t,i,a){for(;t=t[s];)if(1===t.nodeType||n)return e(t,i,a);return!1}:function(t,i,l){var d,h,c,u=[V,o];if(l){for(;t=t[s];)if((1===t.nodeType||n)&&e(t,i,l))return!0}else for(;t=t[s];)if(1===t.nodeType||n)if(c=t[N]||(t[N]={}),h=c[t.uniqueID]||(c[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[s]||t;else{if((d=h[r])&&d[0]===V&&d[1]===o)return u[2]=d[2];if(h[r]=u,u[2]=e(t,i,l))return!0}return!1}}function p(e){return e.length>1?function(t,i,s){for(var a=e.length;a--;)if(!e[a](t,i,s))return!1;return!0}:e[0]}function m(e,i,s){for(var a=0,r=i.length;a<r;a++)t(e,i[a],s);return s}function g(e,t,i,s,a){for(var r,n=[],o=0,l=e.length,d=null!=t;o<l;o++)(r=e[o])&&(i&&!i(r,s,a)||(n.push(r),d&&t.push(o)));return n}function f(e,t,i,a,r,n){return a&&!a[N]&&(a=f(a)),r&&!r[N]&&(r=f(r,n)),s(function(s,n,o,l){var d,h,c,u=[],p=[],f=n.length,_=s||m(t||"*",o.nodeType?[o]:o,[]),v=!e||!s&&t?_:g(_,u,e,o,l),b=i?r||(s?e:f||a)?[]:n:v;if(i&&i(v,b,o,l),a)for(d=g(b,p),a(d,[],o,l),h=d.length;h--;)(c=d[h])&&(b[p[h]]=!(v[p[h]]=c));if(s){if(r||e){if(r){for(d=[],h=b.length;h--;)(c=b[h])&&d.push(v[h]=c);r(null,b=[],d,l)}for(h=b.length;h--;)(c=b[h])&&(d=r?Z(s,c):u[h])>-1&&(s[d]=!(n[d]=c))}}else b=g(b===n?b.splice(f,b.length):b),r?r(null,n,b,l):Q.apply(n,b)})}function _(e){for(var t,i,s,a=e.length,r=y.relative[e[0].type],n=r||y.relative[" "],o=r?1:0,l=u(function(e){return e===t},n,!0),d=u(function(e){return Z(t,e)>-1},n,!0),h=[function(e,i,s){var a=!r&&(s||i!==k)||((t=i).nodeType?l(e,i,s):d(e,i,s));return t=null,a}];o<a;o++)if(i=y.relative[e[o].type])h=[u(p(h),i)];else{if(i=y.filter[e[o].type].apply(null,e[o].matches),i[N]){for(s=++o;s<a&&!y.relative[e[s].type];s++);return f(o>1&&p(h),o>1&&c(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(re,"$1"),i,o<s&&_(e.slice(o,s)),s<a&&_(e=e.slice(s)),s<a&&c(e))}h.push(i)}return p(h)}function v(e,i){var a=i.length>0,r=e.length>0,n=function(s,n,o,l,d){var h,c,u,p=0,m="0",f=s&&[],_=[],v=k,b=s||r&&y.find.TAG("*",d),x=V+=null==v?1:Math.random()||.1,w=b.length;for(d&&(k=n===j||n||d);m!==w&&null!=(h=b[m]);m++){if(r&&h){for(c=0,n||h.ownerDocument===j||(I(h),o=!A);u=e[c++];)if(u(h,n||j,o)){l.push(h);break}d&&(V=x)}a&&((h=!u&&h)&&p--,s&&f.push(h))}if(p+=m,a&&m!==p){for(c=0;u=i[c++];)u(f,_,n,o);if(s){if(p>0)for(;m--;)f[m]||_[m]||(_[m]=$.call(l));_=g(_)}Q.apply(l,_),d&&!s&&_.length>0&&p+i.length>1&&t.uniqueSort(l)}return d&&(V=x,k=v),f};return a?s(n):n}var b,x,y,w,C,S,T,R,k,O,D,I,j,L,A,E,P,M,F,N="sizzle"+1*new Date,z=e.document,V=0,B=0,H=i(),Y=i(),U=i(),W=function(e,t){return e===t&&(D=!0),0},X={}.hasOwnProperty,G=[],$=G.pop,q=G.push,Q=G.push,K=G.slice,Z=function(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ie="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",se=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ae=new RegExp(ee+"+","g"),re=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ne=new RegExp("^"+ee+"*,"+ee+"*"),oe=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),de=new RegExp(se),he=new RegExp("^"+te+"$"),ce={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},ue=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,fe=/[+~]/,_e=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ve=function(e,t,i){var s="0x"+t-65536;return s!==s||i?t:s<0?String.fromCharCode(s+65536):String.fromCharCode(s>>10|55296,1023&s|56320)},be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,xe=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ye=function(){I()},we=u(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Q.apply(G=K.call(z.childNodes),z.childNodes),G[z.childNodes.length].nodeType}catch(e){Q={apply:G.length?function(e,t){q.apply(e,K.call(t))}:function(e,t){for(var i=e.length,s=0;e[i++]=t[s++];);e.length=i-1}}}x=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},I=t.setDocument=function(e){var t,i,s=e?e.ownerDocument||e:z;return s!==j&&9===s.nodeType&&s.documentElement?(j=s,L=j.documentElement,A=!C(j),z!==j&&(i=j.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ye,!1):i.attachEvent&&i.attachEvent("onunload",ye)),x.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=a(function(e){return e.appendChild(j.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=me.test(j.getElementsByClassName),x.getById=a(function(e){return L.appendChild(e).id=N,!j.getElementsByName||!j.getElementsByName(N).length}),x.getById?(y.filter.ID=function(e){var t=e.replace(_e,ve);return function(e){return e.getAttribute("id")===t}},y.find.ID=function(e,t){if(void 0!==t.getElementById&&A){var i=t.getElementById(e);return i?[i]:[]}}):(y.filter.ID=function(e){var t=e.replace(_e,ve);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},y.find.ID=function(e,t){if(void 0!==t.getElementById&&A){var i,s,a,r=t.getElementById(e);if(r){if((i=r.getAttributeNode("id"))&&i.value===e)return[r];for(a=t.getElementsByName(e),s=0;r=a[s++];)if((i=r.getAttributeNode("id"))&&i.value===e)return[r]}return[]}}),y.find.TAG=x.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,s=[],a=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[a++];)1===i.nodeType&&s.push(i);return s}return r},y.find.CLASS=x.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&A)return t.getElementsByClassName(e)},P=[],E=[],(x.qsa=me.test(j.querySelectorAll))&&(a(function(e){L.appendChild(e).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&E.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||E.push("\\["+ee+"*(?:value|"+J+")"),e.querySelectorAll("[id~="+N+"-]").length||E.push("~="),e.querySelectorAll(":checked").length||E.push(":checked"),e.querySelectorAll("a#"+N+"+*").length||E.push(".#.+[+~]")}),a(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=j.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&E.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&E.push(":enabled",":disabled"),L.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&E.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),E.push(",.*:")})),(x.matchesSelector=me.test(M=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&a(function(e){x.disconnectedMatch=M.call(e,"*"),M.call(e,"[s!='']:x"),P.push("!=",se)}),E=E.length&&new RegExp(E.join("|")),P=P.length&&new RegExp(P.join("|")),t=me.test(L.compareDocumentPosition),F=t||me.test(L.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,s=t&&t.parentNode;return e===s||!(!s||1!==s.nodeType||!(i.contains?i.contains(s):e.compareDocumentPosition&&16&e.compareDocumentPosition(s)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return D=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!x.sortDetached&&t.compareDocumentPosition(e)===i?e===j||e.ownerDocument===z&&F(z,e)?-1:t===j||t.ownerDocument===z&&F(z,t)?1:O?Z(O,e)-Z(O,t):0:4&i?-1:1)}:function(e,t){if(e===t)return D=!0,0;var i,s=0,a=e.parentNode,r=t.parentNode,o=[e],l=[t];if(!a||!r)return e===j?-1:t===j?1:a?-1:r?1:O?Z(O,e)-Z(O,t):0;if(a===r)return n(e,t);for(i=e;i=i.parentNode;)o.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;o[s]===l[s];)s++;return s?n(o[s],l[s]):o[s]===z?-1:l[s]===z?1:0},j):j},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==j&&I(e),i=i.replace(le,"='$1']"),x.matchesSelector&&A&&!U[i+" "]&&(!P||!P.test(i))&&(!E||!E.test(i)))try{var s=M.call(e,i);if(s||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return s}catch(e){}return t(i,j,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==j&&I(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==j&&I(e);var i=y.attrHandle[t.toLowerCase()],s=i&&X.call(y.attrHandle,t.toLowerCase())?i(e,t,!A):void 0;return void 0!==s?s:x.attributes||!A?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},t.escape=function(e){return(e+"").replace(be,xe)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],s=0,a=0;if(D=!x.detectDuplicates,O=!x.sortStable&&e.slice(0),e.sort(W),D){for(;t=e[a++];)t===e[a]&&(s=i.push(a));for(;s--;)e.splice(i[s],1)}return O=null,e},w=t.getText=function(e){var t,i="",s=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=w(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[s++];)i+=w(t);return i},y=t.selectors={cacheLength:50,createPseudo:s,match:ce,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,ve),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,ve),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return ce.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&de.test(i)&&(t=S(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,ve).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,s){return function(a){var r=t.attr(a,e);return null==r?"!="===i:!i||(r+="","="===i?r===s:"!="===i?r!==s:"^="===i?s&&0===r.indexOf(s):"*="===i?s&&r.indexOf(s)>-1:"$="===i?s&&r.slice(-s.length)===s:"~="===i?(" "+r.replace(ae," ")+" ").indexOf(s)>-1:"|="===i&&(r===s||r.slice(0,s.length+1)===s+"-"))}},CHILD:function(e,t,i,s,a){var r="nth"!==e.slice(0,3),n="last"!==e.slice(-4),o="of-type"===t;return 1===s&&0===a?function(e){return!!e.parentNode}:function(t,i,l){var d,h,c,u,p,m,g=r!==n?"nextSibling":"previousSibling",f=t.parentNode,_=o&&t.nodeName.toLowerCase(),v=!l&&!o,b=!1;if(f){if(r){for(;g;){for(u=t;u=u[g];)if(o?u.nodeName.toLowerCase()===_:1===u.nodeType)return!1;m=g="only"===e&&!m&&"nextSibling"}return!0}if(m=[n?f.firstChild:f.lastChild],n&&v){for(u=f,c=u[N]||(u[N]={}),h=c[u.uniqueID]||(c[u.uniqueID]={}),d=h[e]||[],p=d[0]===V&&d[1],b=p&&d[2],u=p&&f.childNodes[p];u=++p&&u&&u[g]||(b=p=0)||m.pop();)if(1===u.nodeType&&++b&&u===t){h[e]=[V,p,b];break}}else if(v&&(u=t,c=u[N]||(u[N]={}),h=c[u.uniqueID]||(c[u.uniqueID]={}),d=h[e]||[],p=d[0]===V&&d[1],b=p),!1===b)for(;(u=++p&&u&&u[g]||(b=p=0)||m.pop())&&((o?u.nodeName.toLowerCase()!==_:1!==u.nodeType)||!++b||(v&&(c=u[N]||(u[N]={}),h=c[u.uniqueID]||(c[u.uniqueID]={}),h[e]=[V,b]),u!==t)););return(b-=a)===s||b%s==0&&b/s>=0}}},PSEUDO:function(e,i){var a,r=y.pseudos[e]||y.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[N]?r(i):r.length>1?(a=[e,e,"",i],y.setFilters.hasOwnProperty(e.toLowerCase())?s(function(e,t){for(var s,a=r(e,i),n=a.length;n--;)s=Z(e,a[n]),e[s]=!(t[s]=a[n])}):function(e){return r(e,0,a)}):r}},pseudos:{not:s(function(e){var t=[],i=[],a=T(e.replace(re,"$1"));return a[N]?s(function(e,t,i,s){for(var r,n=a(e,null,s,[]),o=e.length;o--;)(r=n[o])&&(e[o]=!(t[o]=r))}):function(e,s,r){return t[0]=e,a(t,null,r,i),t[0]=null,!i.pop()}}),has:s(function(e){return function(i){return t(e,i).length>0}}),contains:s(function(e){return e=e.replace(_e,ve),function(t){return(t.textContent||t.innerText||w(t)).indexOf(e)>-1}}),lang:s(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_e,ve).toLowerCase(),function(t){var i;do{if(i=A?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===L},focus:function(e){return e===j.activeElement&&(!j.hasFocus||j.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:o(!1),disabled:o(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},
empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!y.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return ue.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,i){return[i<0?i+t:i]}),even:l(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:l(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:l(function(e,t,i){for(var s=i<0?i+t:i;--s>=0;)e.push(s);return e}),gt:l(function(e,t,i){for(var s=i<0?i+t:i;++s<t;)e.push(s);return e})}},y.pseudos.nth=y.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[b]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(b);for(b in{submit:!0,reset:!0})y.pseudos[b]=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}(b);return h.prototype=y.filters=y.pseudos,y.setFilters=new h,S=t.tokenize=function(e,i){var s,a,r,n,o,l,d,h=Y[e+" "];if(h)return i?0:h.slice(0);for(o=e,l=[],d=y.preFilter;o;){s&&!(a=ne.exec(o))||(a&&(o=o.slice(a[0].length)||o),l.push(r=[])),s=!1,(a=oe.exec(o))&&(s=a.shift(),r.push({value:s,type:a[0].replace(re," ")}),o=o.slice(s.length));for(n in y.filter)!(a=ce[n].exec(o))||d[n]&&!(a=d[n](a))||(s=a.shift(),r.push({value:s,type:n,matches:a}),o=o.slice(s.length));if(!s)break}return i?o.length:o?t.error(e):Y(e,l).slice(0)},T=t.compile=function(e,t){var i,s=[],a=[],r=U[e+" "];if(!r){for(t||(t=S(e)),i=t.length;i--;)r=_(t[i]),r[N]?s.push(r):a.push(r);r=U(e,v(a,s)),r.selector=e}return r},R=t.select=function(e,t,i,s){var a,r,n,o,l,h="function"==typeof e&&e,u=!s&&S(e=h.selector||e);if(i=i||[],1===u.length){if(r=u[0]=u[0].slice(0),r.length>2&&"ID"===(n=r[0]).type&&9===t.nodeType&&A&&y.relative[r[1].type]){if(!(t=(y.find.ID(n.matches[0].replace(_e,ve),t)||[])[0]))return i;h&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(a=ce.needsContext.test(e)?0:r.length;a--&&(n=r[a],!y.relative[o=n.type]);)if((l=y.find[o])&&(s=l(n.matches[0].replace(_e,ve),fe.test(r[0].type)&&d(t.parentNode)||t))){if(r.splice(a,1),!(e=s.length&&c(r)))return Q.apply(i,s),i;break}}return(h||T(e,u))(s,t,!A,i,!t||fe.test(e)&&d(t.parentNode)||t),i},x.sortStable=N.split("").sort(W).join("")===N,x.detectDuplicates=!!D,I(),x.sortDetached=a(function(e){return 1&e.compareDocumentPosition(j.createElement("fieldset"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||r(J,function(e,t,i){var s;if(!i)return!0===e[t]?t.toLowerCase():(s=e.getAttributeNode(t))&&s.specified?s.value:null}),t}(e);ye.find=Ce,ye.expr=Ce.selectors,ye.expr[":"]=ye.expr.pseudos,ye.uniqueSort=ye.unique=Ce.uniqueSort,ye.text=Ce.getText,ye.isXMLDoc=Ce.isXML,ye.contains=Ce.contains,ye.escapeSelector=Ce.escape;var Se=function(e,t,i){for(var s=[],a=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&ye(e).is(i))break;s.push(e)}return s},Te=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},Re=ye.expr.match.needsContext,ke=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;ye.filter=function(e,t,i){var s=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===s.nodeType?ye.find.matchesSelector(s,e)?[s]:[]:ye.find.matches(e,ye.grep(t,function(e){return 1===e.nodeType}))},ye.fn.extend({find:function(e){var t,i,s=this.length,a=this;if("string"!=typeof e)return this.pushStack(ye(e).filter(function(){for(t=0;t<s;t++)if(ye.contains(a[t],this))return!0}));for(i=this.pushStack([]),t=0;t<s;t++)ye.find(e,a[t],i);return s>1?ye.uniqueSort(i):i},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&Re.test(e)?ye(e):e||[],!1).length}});var Oe,De=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ye.fn.init=function(e,t,i){var s,a;if(!e)return this;if(i=i||Oe,"string"==typeof e){if(!(s="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:De.exec(e))||!s[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(s[1]){if(t=t instanceof ye?t[0]:t,ye.merge(this,ye.parseHTML(s[1],t&&t.nodeType?t.ownerDocument||t:ne,!0)),ke.test(s[1])&&ye.isPlainObject(t))for(s in t)ve(this[s])?this[s](t[s]):this.attr(s,t[s]);return this}return a=ne.getElementById(s[2]),a&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):ve(e)?void 0!==i.ready?i.ready(e):e(ye):ye.makeArray(e,this)}).prototype=ye.fn,Oe=ye(ne);var Ie=/^(?:parents|prev(?:Until|All))/,je={children:!0,contents:!0,next:!0,prev:!0};ye.fn.extend({has:function(e){var t=ye(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(ye.contains(this,t[e]))return!0})},closest:function(e,t){var i,s=0,a=this.length,r=[],n="string"!=typeof e&&ye(e);if(!Re.test(e))for(;s<a;s++)for(i=this[s];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(n?n.index(i)>-1:1===i.nodeType&&ye.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?ye.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?ce.call(ye(e),this[0]):ce.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ye.uniqueSort(ye.merge(this.get(),ye(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ye.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Se(e,"parentNode")},parentsUntil:function(e,t,i){return Se(e,"parentNode",i)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return Se(e,"nextSibling")},prevAll:function(e){return Se(e,"previousSibling")},nextUntil:function(e,t,i){return Se(e,"nextSibling",i)},prevUntil:function(e,t,i){return Se(e,"previousSibling",i)},siblings:function(e){return Te((e.parentNode||{}).firstChild,e)},children:function(e){return Te(e.firstChild)},contents:function(e){return r(e,"iframe")?e.contentDocument:(r(e,"template")&&(e=e.content||e),ye.merge([],e.childNodes))}},function(e,t){ye.fn[e]=function(i,s){var a=ye.map(this,t,i);return"Until"!==e.slice(-5)&&(s=i),s&&"string"==typeof s&&(a=ye.filter(s,a)),this.length>1&&(je[e]||ye.uniqueSort(a),Ie.test(e)&&a.reverse()),this.pushStack(a)}});var Le=/[^\x20\t\r\n\f]+/g;ye.Callbacks=function(e){e="string"==typeof e?l(e):ye.extend({},e);var t,i,a,r,n=[],o=[],d=-1,h=function(){for(r=r||e.once,a=t=!0;o.length;d=-1)for(i=o.shift();++d<n.length;)!1===n[d].apply(i[0],i[1])&&e.stopOnFalse&&(d=n.length,i=!1);e.memory||(i=!1),t=!1,r&&(n=i?[]:"")},c={add:function(){return n&&(i&&!t&&(d=n.length-1,o.push(i)),function t(i){ye.each(i,function(i,a){ve(a)?e.unique&&c.has(a)||n.push(a):a&&a.length&&"string"!==s(a)&&t(a)})}(arguments),i&&!t&&h()),this},remove:function(){return ye.each(arguments,function(e,t){for(var i;(i=ye.inArray(t,n,i))>-1;)n.splice(i,1),i<=d&&d--}),this},has:function(e){return e?ye.inArray(e,n)>-1:n.length>0},empty:function(){return n&&(n=[]),this},disable:function(){return r=o=[],n=i="",this},disabled:function(){return!n},lock:function(){return r=o=[],i||t||(n=i=""),this},locked:function(){return!!r},fireWith:function(e,i){return r||(i=i||[],i=[e,i.slice?i.slice():i],o.push(i),t||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!a}};return c},ye.extend({Deferred:function(t){var i=[["notify","progress",ye.Callbacks("memory"),ye.Callbacks("memory"),2],["resolve","done",ye.Callbacks("once memory"),ye.Callbacks("once memory"),0,"resolved"],["reject","fail",ye.Callbacks("once memory"),ye.Callbacks("once memory"),1,"rejected"]],s="pending",a={state:function(){return s},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return ye.Deferred(function(t){ye.each(i,function(i,s){var a=ve(e[s[4]])&&e[s[4]];r[s[1]](function(){var e=a&&a.apply(this,arguments);e&&ve(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[s[0]+"With"](this,a?[e]:arguments)})}),e=null}).promise()},then:function(t,s,a){function r(t,i,s,a){return function(){var o=this,l=arguments,c=function(){var e,c;if(!(t<n)){if((e=s.apply(o,l))===i.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,ve(c)?a?c.call(e,r(n,i,d,a),r(n,i,h,a)):(n++,c.call(e,r(n,i,d,a),r(n,i,h,a),r(n,i,d,i.notifyWith))):(s!==d&&(o=void 0,l=[e]),(a||i.resolveWith)(o,l))}},u=a?c:function(){try{c()}catch(e){ye.Deferred.exceptionHook&&ye.Deferred.exceptionHook(e,u.stackTrace),t+1>=n&&(s!==h&&(o=void 0,l=[e]),i.rejectWith(o,l))}};t?u():(ye.Deferred.getStackHook&&(u.stackTrace=ye.Deferred.getStackHook()),e.setTimeout(u))}}var n=0;return ye.Deferred(function(e){i[0][3].add(r(0,e,ve(a)?a:d,e.notifyWith)),i[1][3].add(r(0,e,ve(t)?t:d)),i[2][3].add(r(0,e,ve(s)?s:h))}).promise()},promise:function(e){return null!=e?ye.extend(e,a):a}},r={};return ye.each(i,function(e,t){var n=t[2],o=t[5];a[t[1]]=n.add,o&&n.add(function(){s=o},i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),n.add(t[3].fire),r[t[0]]=function(){return r[t[0]+"With"](this===r?void 0:this,arguments),this},r[t[0]+"With"]=n.fireWith}),a.promise(r),t&&t.call(r,r),r},when:function(e){var t=arguments.length,i=t,s=Array(i),a=le.call(arguments),r=ye.Deferred(),n=function(e){return function(i){s[e]=this,a[e]=arguments.length>1?le.call(arguments):i,--t||r.resolveWith(s,a)}};if(t<=1&&(c(e,r.done(n(i)).resolve,r.reject,!t),"pending"===r.state()||ve(a[i]&&a[i].then)))return r.then();for(;i--;)c(a[i],n(i),r.reject);return r.promise()}});var Ae=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ye.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&Ae.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},ye.readyException=function(t){e.setTimeout(function(){throw t})};var Ee=ye.Deferred();ye.fn.ready=function(e){return Ee.then(e).catch(function(e){ye.readyException(e)}),this},ye.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ye.readyWait:ye.isReady)||(ye.isReady=!0,!0!==e&&--ye.readyWait>0||Ee.resolveWith(ne,[ye]))}}),ye.ready.then=Ee.then,"complete"===ne.readyState||"loading"!==ne.readyState&&!ne.documentElement.doScroll?e.setTimeout(ye.ready):(ne.addEventListener("DOMContentLoaded",u),e.addEventListener("load",u));var Pe=function(e,t,i,a,r,n,o){var l=0,d=e.length,h=null==i;if("object"===s(i)){r=!0;for(l in i)Pe(e,t,l,i[l],!0,n,o)}else if(void 0!==a&&(r=!0,ve(a)||(o=!0),h&&(o?(t.call(e,a),t=null):(h=t,t=function(e,t,i){return h.call(ye(e),i)})),t))for(;l<d;l++)t(e[l],i,o?a:a.call(e[l],l,t(e[l],i)));return r?e:h?t.call(e):d?t(e[0],i):n},Me=/^-ms-/,Fe=/-([a-z])/g,Ne=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};g.uid=1,g.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Ne(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var s,a=this.cache(e);if("string"==typeof t)a[m(t)]=i;else for(s in t)a[m(s)]=t[s];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][m(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,s=e[this.expando];if(void 0!==s){if(void 0!==t){Array.isArray(t)?t=t.map(m):(t=m(t),t=t in s?[t]:t.match(Le)||[]),i=t.length;for(;i--;)delete s[t[i]]}(void 0===t||ye.isEmptyObject(s))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ye.isEmptyObject(t)}};var ze=new g,Ve=new g,Be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,He=/[A-Z]/g;ye.extend({hasData:function(e){return Ve.hasData(e)||ze.hasData(e)},data:function(e,t,i){return Ve.access(e,t,i)},removeData:function(e,t){Ve.remove(e,t)},_data:function(e,t,i){return ze.access(e,t,i)},_removeData:function(e,t){ze.remove(e,t)}}),ye.fn.extend({data:function(e,t){var i,s,a,r=this[0],n=r&&r.attributes;if(void 0===e){if(this.length&&(a=Ve.get(r),1===r.nodeType&&!ze.get(r,"hasDataAttrs"))){for(i=n.length;i--;)n[i]&&(s=n[i].name,0===s.indexOf("data-")&&(s=m(s.slice(5)),_(r,s,a[s])));ze.set(r,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each(function(){Ve.set(this,e)}):Pe(this,function(t){var i;if(r&&void 0===t){if(void 0!==(i=Ve.get(r,e)))return i;if(void 0!==(i=_(r,e)))return i}else this.each(function(){Ve.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ve.remove(this,e)})}}),ye.extend({queue:function(e,t,i){var s;if(e)return t=(t||"fx")+"queue",s=ze.get(e,t),i&&(!s||Array.isArray(i)?s=ze.access(e,t,ye.makeArray(i)):s.push(i)),s||[]},dequeue:function(e,t){t=t||"fx";var i=ye.queue(e,t),s=i.length,a=i.shift(),r=ye._queueHooks(e,t),n=function(){ye.dequeue(e,t)};"inprogress"===a&&(a=i.shift(),s--),a&&("fx"===t&&i.unshift("inprogress"),delete r.stop,a.call(e,n,r)),!s&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ze.get(e,i)||ze.access(e,i,{empty:ye.Callbacks("once memory").add(function(){ze.remove(e,[t+"queue",i])})})}}),ye.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?ye.queue(this[0],e):void 0===t?this:this.each(function(){var i=ye.queue(this,e,t);ye._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&ye.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ye.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,s=1,a=ye.Deferred(),r=this,n=this.length,o=function(){--s||a.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";n--;)(i=ze.get(r[n],e+"queueHooks"))&&i.empty&&(s++,i.empty.add(o));return o(),a.promise(t)}});var Ye=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ue=new RegExp("^(?:([+-])=|)("+Ye+")([a-z%]*)$","i"),We=["Top","Right","Bottom","Left"],Xe=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&ye.contains(e.ownerDocument,e)&&"none"===ye.css(e,"display")},Ge=function(e,t,i,s){var a,r,n={};for(r in t)n[r]=e.style[r],e.style[r]=t[r];a=i.apply(e,s||[]);for(r in t)e.style[r]=n[r];return a},$e={};ye.fn.extend({show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Xe(this)?ye(this).show():ye(this).hide()})}});var qe=/^(?:checkbox|radio)$/i,Qe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ke=/^$|^module$|\/(?:java|ecma)script/i,Ze={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ze.optgroup=Ze.option,Ze.tbody=Ze.tfoot=Ze.colgroup=Ze.caption=Ze.thead,Ze.th=Ze.td;var Je=/<|&#?\w+;/;!function(){var e=ne.createDocumentFragment(),t=e.appendChild(ne.createElement("div")),i=ne.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),_e.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",_e.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var et=ne.documentElement,tt=/^key/,it=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,st=/^([^.]*)(?:\.(.+)|)/;ye.event={global:{},add:function(e,t,i,s,a){var r,n,o,l,d,h,c,u,p,m,g,f=ze.get(e);if(f)for(i.handler&&(r=i,i=r.handler,a=r.selector),a&&ye.find.matchesSelector(et,a),i.guid||(i.guid=ye.guid++),(l=f.events)||(l=f.events={}),(n=f.handle)||(n=f.handle=function(t){return void 0!==ye&&ye.event.triggered!==t.type?ye.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Le)||[""],d=t.length;d--;)o=st.exec(t[d])||[],p=g=o[1],m=(o[2]||"").split(".").sort(),p&&(c=ye.event.special[p]||{},p=(a?c.delegateType:c.bindType)||p,c=ye.event.special[p]||{},h=ye.extend({type:p,origType:g,data:s,handler:i,guid:i.guid,selector:a,needsContext:a&&ye.expr.match.needsContext.test(a),namespace:m.join(".")},r),(u=l[p])||(u=l[p]=[],u.delegateCount=0,c.setup&&!1!==c.setup.call(e,s,m,n)||e.addEventListener&&e.addEventListener(p,n)),c.add&&(c.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),a?u.splice(u.delegateCount++,0,h):u.push(h),ye.event.global[p]=!0)},remove:function(e,t,i,s,a){var r,n,o,l,d,h,c,u,p,m,g,f=ze.hasData(e)&&ze.get(e);if(f&&(l=f.events)){for(t=(t||"").match(Le)||[""],d=t.length;d--;)if(o=st.exec(t[d])||[],p=g=o[1],m=(o[2]||"").split(".").sort(),p){for(c=ye.event.special[p]||{},p=(s?c.delegateType:c.bindType)||p,u=l[p]||[],o=o[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),n=r=u.length;r--;)h=u[r],!a&&g!==h.origType||i&&i.guid!==h.guid||o&&!o.test(h.namespace)||s&&s!==h.selector&&("**"!==s||!h.selector)||(u.splice(r,1),h.selector&&u.delegateCount--,c.remove&&c.remove.call(e,h));n&&!u.length&&(c.teardown&&!1!==c.teardown.call(e,m,f.handle)||ye.removeEvent(e,p,f.handle),delete l[p])}else for(p in l)ye.event.remove(e,p+t[d],i,s,!0);ye.isEmptyObject(l)&&ze.remove(e,"handle events")}},dispatch:function(e){var t,i,s,a,r,n,o=ye.event.fix(e),l=new Array(arguments.length),d=(ze.get(this,"events")||{})[o.type]||[],h=ye.event.special[o.type]||{};for(l[0]=o,t=1;t<arguments.length;t++)l[t]=arguments[t];if(o.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,o)){for(n=ye.event.handlers.call(this,o,d),t=0;(a=n[t++])&&!o.isPropagationStopped();)for(o.currentTarget=a.elem,i=0;(r=a.handlers[i++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!o.rnamespace.test(r.namespace)||(o.handleObj=r,o.data=r.data,void 0!==(s=((ye.event.special[r.origType]||{}).handle||r.handler).apply(a.elem,l))&&!1===(o.result=s)&&(o.preventDefault(),o.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,o),o.result}},handlers:function(e,t){var i,s,a,r,n,o=[],l=t.delegateCount,d=e.target;if(l&&d.nodeType&&!("click"===e.type&&e.button>=1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(r=[],n={},i=0;i<l;i++)s=t[i],a=s.selector+" ",void 0===n[a]&&(n[a]=s.needsContext?ye(a,this).index(d)>-1:ye.find(a,this,null,[d]).length),n[a]&&r.push(s);r.length&&o.push({elem:d,handlers:r})}return d=this,l<t.length&&o.push({elem:d,handlers:t.slice(l)}),o},addProp:function(e,t){Object.defineProperty(ye.Event.prototype,e,{enumerable:!0,configurable:!0,get:ve(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[ye.expando]?e:new ye.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==R()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===R()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r(this,"input"))return this.click(),!1},_default:function(e){return r(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ye.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},ye.Event=function(e,t){if(!(this instanceof ye.Event))return new ye.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?S:T,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ye.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ye.expando]=!0},ye.Event.prototype={constructor:ye.Event,isDefaultPrevented:T,isPropagationStopped:T,isImmediatePropagationStopped:T,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=S,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=S,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=S,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ye.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&tt.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&it.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ye.event.addProp),ye.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ye.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,s=this,a=e.relatedTarget,r=e.handleObj;return a&&(a===s||ye.contains(s,a))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),ye.fn.extend({on:function(e,t,i,s){return k(this,e,t,i,s)},one:function(e,t,i,s){return k(this,e,t,i,s,1)},off:function(e,t,i){var s,a;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,ye(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=T),this.each(function(){ye.event.remove(this,e,i,t)})}});var at=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,rt=/<script|<style|<link/i,nt=/checked\s*(?:[^=]|=\s*.checked.)/i,ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ye.extend({htmlPrefilter:function(e){return e.replace(at,"<$1></$2>")},clone:function(e,t,i){var s,a,r,n,o=e.cloneNode(!0),l=ye.contains(e.ownerDocument,e);if(!(_e.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ye.isXMLDoc(e)))for(n=y(o),r=y(e),s=0,a=r.length;s<a;s++)L(r[s],n[s]);if(t)if(i)for(r=r||y(e),n=n||y(o),s=0,a=r.length;s<a;s++)j(r[s],n[s]);else j(e,o);return n=y(o,"script"),n.length>0&&w(n,!l&&y(e,"script")),o},cleanData:function(e){for(var t,i,s,a=ye.event.special,r=0;void 0!==(i=e[r]);r++)if(Ne(i)){if(t=i[ze.expando]){if(t.events)for(s in t.events)a[s]?ye.event.remove(i,s):ye.removeEvent(i,s,t.handle);i[ze.expando]=void 0}i[Ve.expando]&&(i[Ve.expando]=void 0)}}}),ye.fn.extend({detach:function(e){return E(this,e,!0)},remove:function(e){return E(this,e)},text:function(e){return Pe(this,function(e){return void 0===e?ye.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){O(this,e).appendChild(e)}})},prepend:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=O(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ye.cleanData(y(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ye.clone(this,e,t)})},html:function(e){return Pe(this,function(e){var t=this[0]||{},i=0,s=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!rt.test(e)&&!Ze[(Qe.exec(e)||["",""])[1].toLowerCase()]){e=ye.htmlPrefilter(e);try{for(;i<s;i++)t=this[i]||{},1===t.nodeType&&(ye.cleanData(y(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return A(this,arguments,function(t){var i=this.parentNode;ye.inArray(this,e)<0&&(ye.cleanData(y(this)),i&&i.replaceChild(t,this))},e)}}),ye.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ye.fn[e]=function(e){for(var i,s=[],a=ye(e),r=a.length-1,n=0;n<=r;n++)i=n===r?this:this.clone(!0),ye(a[n])[t](i),he.apply(s,i.get());return this.pushStack(s)}});var lt=new RegExp("^("+Ye+")(?!px)[a-z%]+$","i"),dt=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},ht=new RegExp(We.join("|"),"i");!function(){function t(){if(d){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",et.appendChild(l).appendChild(d);var t=e.getComputedStyle(d);s="1%"!==t.top,o=12===i(t.marginLeft),d.style.right="60%",n=36===i(t.right),a=36===i(t.width),d.style.position="absolute",r=36===d.offsetWidth||"absolute",et.removeChild(l),d=null}}function i(e){return Math.round(parseFloat(e))}var s,a,r,n,o,l=ne.createElement("div"),d=ne.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",_e.clearCloneStyle="content-box"===d.style.backgroundClip,ye.extend(_e,{boxSizingReliable:function(){return t(),a},pixelBoxStyles:function(){return t(),n},pixelPosition:function(){return t(),s},reliableMarginLeft:function(){return t(),o},scrollboxSize:function(){return t(),r}}))}();var ct=/^(none|table(?!-c[ea]).+)/,ut=/^--/,pt={position:"absolute",visibility:"hidden",display:"block"},mt={letterSpacing:"0",fontWeight:"400"},gt=["Webkit","Moz","ms"],ft=ne.createElement("div").style;ye.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=P(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,r,n,o=m(t),l=ut.test(t),d=e.style;if(l||(t=N(o)),n=ye.cssHooks[t]||ye.cssHooks[o],void 0===i)return n&&"get"in n&&void 0!==(a=n.get(e,!1,s))?a:d[t];r=typeof i,"string"===r&&(a=Ue.exec(i))&&a[1]&&(i=v(e,t,a),r="number"),null!=i&&i===i&&("number"===r&&(i+=a&&a[3]||(ye.cssNumber[o]?"":"px")),_e.clearCloneStyle||""!==i||0!==t.indexOf("background")||(d[t]="inherit"),n&&"set"in n&&void 0===(i=n.set(e,i,s))||(l?d.setProperty(t,i):d[t]=i))}},css:function(e,t,i,s){var a,r,n,o=m(t);return ut.test(t)||(t=N(o)),n=ye.cssHooks[t]||ye.cssHooks[o],n&&"get"in n&&(a=n.get(e,!0,i)),void 0===a&&(a=P(e,t,s)),"normal"===a&&t in mt&&(a=mt[t]),""===i||i?(r=parseFloat(a),!0===i||isFinite(r)?r||0:a):a}}),ye.each(["height","width"],function(e,t){ye.cssHooks[t]={get:function(e,i,s){if(i)return!ct.test(ye.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?B(e,t,s):Ge(e,pt,function(){return B(e,t,s)})},set:function(e,i,s){var a,r=dt(e),n="border-box"===ye.css(e,"boxSizing",!1,r),o=s&&V(e,t,s,n,r);return n&&_e.scrollboxSize()===r.position&&(o-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-V(e,t,"border",!1,r)-.5)),o&&(a=Ue.exec(i))&&"px"!==(a[3]||"px")&&(e.style[t]=i,i=ye.css(e,t)),z(e,i,o)}}}),ye.cssHooks.marginLeft=M(_e.reliableMarginLeft,function(e,t){if(t)return(parseFloat(P(e,"marginLeft"))||e.getBoundingClientRect().left-Ge(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ye.each({margin:"",padding:"",border:"Width"},function(e,t){ye.cssHooks[e+t]={expand:function(i){for(var s=0,a={},r="string"==typeof i?i.split(" "):[i];s<4;s++)a[e+We[s]+t]=r[s]||r[s-2]||r[0];return a}},"margin"!==e&&(ye.cssHooks[e+t].set=z)}),ye.fn.extend({css:function(e,t){return Pe(this,function(e,t,i){var s,a,r={},n=0;if(Array.isArray(t)){for(s=dt(e),a=t.length;n<a;n++)r[t[n]]=ye.css(e,t[n],!1,s);return r}return void 0!==i?ye.style(e,t,i):ye.css(e,t)},e,t,arguments.length>1)}}),ye.Tween=H,H.prototype={constructor:H,init:function(e,t,i,s,a,r){this.elem=e,this.prop=i,this.easing=a||ye.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=s,this.unit=r||(ye.cssNumber[i]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(e){var t,i=H.propHooks[this.prop];return this.options.duration?this.pos=t=ye.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ye.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ye.fx.step[e.prop]?ye.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ye.cssProps[e.prop]]&&!ye.cssHooks[e.prop]?e.elem[e.prop]=e.now:ye.style(e.elem,e.prop,e.now+e.unit)}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ye.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ye.fx=H.prototype.init,ye.fx.step={};var _t,vt,bt=/^(?:toggle|show|hide)$/,xt=/queueHooks$/;ye.Animation=ye.extend(q,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return v(i.elem,e,Ue.exec(t),i),i}]},tweener:function(e,t){ve(e)?(t=e,e=["*"]):e=e.match(Le);for(var i,s=0,a=e.length;s<a;s++)i=e[s],q.tweeners[i]=q.tweeners[i]||[],q.tweeners[i].unshift(t)},prefilters:[G],prefilter:function(e,t){t?q.prefilters.unshift(e):q.prefilters.push(e)}}),ye.speed=function(e,t,i){var s=e&&"object"==typeof e?ye.extend({},e):{complete:i||!i&&t||ve(e)&&e,duration:e,easing:i&&t||t&&!ve(t)&&t};return ye.fx.off?s.duration=0:"number"!=typeof s.duration&&(s.duration in ye.fx.speeds?s.duration=ye.fx.speeds[s.duration]:s.duration=ye.fx.speeds._default),null!=s.queue&&!0!==s.queue||(s.queue="fx"),s.old=s.complete,s.complete=function(){ve(s.old)&&s.old.call(this),s.queue&&ye.dequeue(this,s.queue)},s},ye.fn.extend({fadeTo:function(e,t,i,s){return this.filter(Xe).css("opacity",0).show().end().animate({opacity:t},e,i,s)},animate:function(e,t,i,s){var a=ye.isEmptyObject(e),r=ye.speed(t,i,s),n=function(){var t=q(this,ye.extend({},e),r);(a||ze.get(this,"finish"))&&t.stop(!0)};return n.finish=n,a||!1===r.queue?this.each(n):this.queue(r.queue,n)},stop:function(e,t,i){var s=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",r=ye.timers,n=ze.get(this);if(a)n[a]&&n[a].stop&&s(n[a]);else for(a in n)n[a]&&n[a].stop&&xt.test(a)&&s(n[a]);for(a=r.length;a--;)r[a].elem!==this||null!=e&&r[a].queue!==e||(r[a].anim.stop(i),t=!1,r.splice(a,1));!t&&i||ye.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){
var t,i=ze.get(this),s=i[e+"queue"],a=i[e+"queueHooks"],r=ye.timers,n=s?s.length:0;for(i.finish=!0,ye.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<n;t++)s[t]&&s[t].finish&&s[t].finish.call(this);delete i.finish})}}),ye.each(["toggle","show","hide"],function(e,t){var i=ye.fn[t];ye.fn[t]=function(e,s,a){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(W(t,!0),e,s,a)}}),ye.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ye.fn[e]=function(e,i,s){return this.animate(t,e,i,s)}}),ye.timers=[],ye.fx.tick=function(){var e,t=0,i=ye.timers;for(_t=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||ye.fx.stop(),_t=void 0},ye.fx.timer=function(e){ye.timers.push(e),ye.fx.start()},ye.fx.interval=13,ye.fx.start=function(){vt||(vt=!0,Y())},ye.fx.stop=function(){vt=null},ye.fx.speeds={slow:600,fast:200,_default:400},ye.fn.delay=function(t,i){return t=ye.fx?ye.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,s){var a=e.setTimeout(i,t);s.stop=function(){e.clearTimeout(a)}})},function(){var e=ne.createElement("input"),t=ne.createElement("select"),i=t.appendChild(ne.createElement("option"));e.type="checkbox",_e.checkOn=""!==e.value,_e.optSelected=i.selected,e=ne.createElement("input"),e.value="t",e.type="radio",_e.radioValue="t"===e.value}();var yt,wt=ye.expr.attrHandle;ye.fn.extend({attr:function(e,t){return Pe(this,ye.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ye.removeAttr(this,e)})}}),ye.extend({attr:function(e,t,i){var s,a,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?ye.prop(e,t,i):(1===r&&ye.isXMLDoc(e)||(a=ye.attrHooks[t.toLowerCase()]||(ye.expr.match.bool.test(t)?yt:void 0)),void 0!==i?null===i?void ye.removeAttr(e,t):a&&"set"in a&&void 0!==(s=a.set(e,i,t))?s:(e.setAttribute(t,i+""),i):a&&"get"in a&&null!==(s=a.get(e,t))?s:(s=ye.find.attr(e,t),null==s?void 0:s))},attrHooks:{type:{set:function(e,t){if(!_e.radioValue&&"radio"===t&&r(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,s=0,a=t&&t.match(Le);if(a&&1===e.nodeType)for(;i=a[s++];)e.removeAttribute(i)}}),yt={set:function(e,t,i){return!1===t?ye.removeAttr(e,i):e.setAttribute(i,i),i}},ye.each(ye.expr.match.bool.source.match(/\w+/g),function(e,t){var i=wt[t]||ye.find.attr;wt[t]=function(e,t,s){var a,r,n=t.toLowerCase();return s||(r=wt[n],wt[n]=a,a=null!=i(e,t,s)?n:null,wt[n]=r),a}});var Ct=/^(?:input|select|textarea|button)$/i,St=/^(?:a|area)$/i;ye.fn.extend({prop:function(e,t){return Pe(this,ye.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ye.propFix[e]||e]})}}),ye.extend({prop:function(e,t,i){var s,a,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&ye.isXMLDoc(e)||(t=ye.propFix[t]||t,a=ye.propHooks[t]),void 0!==i?a&&"set"in a&&void 0!==(s=a.set(e,i,t))?s:e[t]=i:a&&"get"in a&&null!==(s=a.get(e,t))?s:e[t]},propHooks:{tabIndex:{get:function(e){var t=ye.find.attr(e,"tabindex");return t?parseInt(t,10):Ct.test(e.nodeName)||St.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),_e.optSelected||(ye.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ye.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ye.propFix[this.toLowerCase()]=this}),ye.fn.extend({addClass:function(e){var t,i,s,a,r,n,o,l=0;if(ve(e))return this.each(function(t){ye(this).addClass(e.call(this,t,K(this)))});if(t=Z(e),t.length)for(;i=this[l++];)if(a=K(i),s=1===i.nodeType&&" "+Q(a)+" "){for(n=0;r=t[n++];)s.indexOf(" "+r+" ")<0&&(s+=r+" ");o=Q(s),a!==o&&i.setAttribute("class",o)}return this},removeClass:function(e){var t,i,s,a,r,n,o,l=0;if(ve(e))return this.each(function(t){ye(this).removeClass(e.call(this,t,K(this)))});if(!arguments.length)return this.attr("class","");if(t=Z(e),t.length)for(;i=this[l++];)if(a=K(i),s=1===i.nodeType&&" "+Q(a)+" "){for(n=0;r=t[n++];)for(;s.indexOf(" "+r+" ")>-1;)s=s.replace(" "+r+" "," ");o=Q(s),a!==o&&i.setAttribute("class",o)}return this},toggleClass:function(e,t){var i=typeof e,s="string"===i||Array.isArray(e);return"boolean"==typeof t&&s?t?this.addClass(e):this.removeClass(e):ve(e)?this.each(function(i){ye(this).toggleClass(e.call(this,i,K(this),t),t)}):this.each(function(){var t,a,r,n;if(s)for(a=0,r=ye(this),n=Z(e);t=n[a++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==i||(t=K(this),t&&ze.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":ze.get(this,"__className__")||""))})},hasClass:function(e){var t,i,s=0;for(t=" "+e+" ";i=this[s++];)if(1===i.nodeType&&(" "+Q(K(i))+" ").indexOf(t)>-1)return!0;return!1}});var Tt=/\r/g;ye.fn.extend({val:function(e){var t,i,s,a=this[0];{if(arguments.length)return s=ve(e),this.each(function(i){var a;1===this.nodeType&&(a=s?e.call(this,i,ye(this).val()):e,null==a?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=ye.map(a,function(e){return null==e?"":e+""})),(t=ye.valHooks[this.type]||ye.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))});if(a)return(t=ye.valHooks[a.type]||ye.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(a,"value"))?i:(i=a.value,"string"==typeof i?i.replace(Tt,""):null==i?"":i)}}}),ye.extend({valHooks:{option:{get:function(e){var t=ye.find.attr(e,"value");return null!=t?t:Q(ye.text(e))}},select:{get:function(e){var t,i,s,a=e.options,n=e.selectedIndex,o="select-one"===e.type,l=o?null:[],d=o?n+1:a.length;for(s=n<0?d:o?n:0;s<d;s++)if(i=a[s],(i.selected||s===n)&&!i.disabled&&(!i.parentNode.disabled||!r(i.parentNode,"optgroup"))){if(t=ye(i).val(),o)return t;l.push(t)}return l},set:function(e,t){for(var i,s,a=e.options,r=ye.makeArray(t),n=a.length;n--;)s=a[n],(s.selected=ye.inArray(ye.valHooks.option.get(s),r)>-1)&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),ye.each(["radio","checkbox"],function(){ye.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=ye.inArray(ye(e).val(),t)>-1}},_e.checkOn||(ye.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),_e.focusin="onfocusin"in e;var Rt=/^(?:focusinfocus|focusoutblur)$/,kt=function(e){e.stopPropagation()};ye.extend(ye.event,{trigger:function(t,i,s,a){var r,n,o,l,d,h,c,u,p=[s||ne],m=me.call(t,"type")?t.type:t,g=me.call(t,"namespace")?t.namespace.split("."):[];if(n=u=o=s=s||ne,3!==s.nodeType&&8!==s.nodeType&&!Rt.test(m+ye.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),d=m.indexOf(":")<0&&"on"+m,t=t[ye.expando]?t:new ye.Event(m,"object"==typeof t&&t),t.isTrigger=a?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=s),i=null==i?[t]:ye.makeArray(i,[t]),c=ye.event.special[m]||{},a||!c.trigger||!1!==c.trigger.apply(s,i))){if(!a&&!c.noBubble&&!be(s)){for(l=c.delegateType||m,Rt.test(l+m)||(n=n.parentNode);n;n=n.parentNode)p.push(n),o=n;o===(s.ownerDocument||ne)&&p.push(o.defaultView||o.parentWindow||e)}for(r=0;(n=p[r++])&&!t.isPropagationStopped();)u=n,t.type=r>1?l:c.bindType||m,h=(ze.get(n,"events")||{})[t.type]&&ze.get(n,"handle"),h&&h.apply(n,i),(h=d&&n[d])&&h.apply&&Ne(n)&&(t.result=h.apply(n,i),!1===t.result&&t.preventDefault());return t.type=m,a||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),i)||!Ne(s)||d&&ve(s[m])&&!be(s)&&(o=s[d],o&&(s[d]=null),ye.event.triggered=m,t.isPropagationStopped()&&u.addEventListener(m,kt),s[m](),t.isPropagationStopped()&&u.removeEventListener(m,kt),ye.event.triggered=void 0,o&&(s[d]=o)),t.result}},simulate:function(e,t,i){var s=ye.extend(new ye.Event,i,{type:e,isSimulated:!0});ye.event.trigger(s,null,t)}}),ye.fn.extend({trigger:function(e,t){return this.each(function(){ye.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return ye.event.trigger(e,t,i,!0)}}),_e.focusin||ye.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){ye.event.simulate(t,e.target,ye.event.fix(e))};ye.event.special[t]={setup:function(){var s=this.ownerDocument||this,a=ze.access(s,t);a||s.addEventListener(e,i,!0),ze.access(s,t,(a||0)+1)},teardown:function(){var s=this.ownerDocument||this,a=ze.access(s,t)-1;a?ze.access(s,t,a):(s.removeEventListener(e,i,!0),ze.remove(s,t))}}});var Ot=e.location,Dt=Date.now(),It=/\?/;ye.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||ye.error("Invalid XML: "+t),i};var jt=/\[\]$/,Lt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;ye.param=function(e,t){var i,s=[],a=function(e,t){var i=ve(t)?t():t;s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!ye.isPlainObject(e))ye.each(e,function(){a(this.name,this.value)});else for(i in e)J(i,e[i],t,a);return s.join("&")},ye.fn.extend({serialize:function(){return ye.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ye.prop(this,"elements");return e?ye.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ye(this).is(":disabled")&&Et.test(this.nodeName)&&!At.test(e)&&(this.checked||!qe.test(e))}).map(function(e,t){var i=ye(this).val();return null==i?null:Array.isArray(i)?ye.map(i,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}}):{name:t.name,value:i.replace(Lt,"\r\n")}}).get()}});var Pt=/%20/g,Mt=/#.*$/,Ft=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,zt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Vt=/^(?:GET|HEAD)$/,Bt=/^\/\//,Ht={},Yt={},Ut="*/".concat("*"),Wt=ne.createElement("a");Wt.href=Ot.href,ye.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ot.href,type:"GET",isLocal:zt.test(Ot.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ut,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ye.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ie(ie(e,ye.ajaxSettings),t):ie(ye.ajaxSettings,e)},ajaxPrefilter:ee(Ht),ajaxTransport:ee(Yt),ajax:function(t,i){function s(t,i,s,o){var d,u,p,x,y,w=i;h||(h=!0,l&&e.clearTimeout(l),a=void 0,n=o||"",C.readyState=t>0?4:0,d=t>=200&&t<300||304===t,s&&(x=se(m,C,s)),x=ae(m,x,C,d),d?(m.ifModified&&(y=C.getResponseHeader("Last-Modified"),y&&(ye.lastModified[r]=y),(y=C.getResponseHeader("etag"))&&(ye.etag[r]=y)),204===t||"HEAD"===m.type?w="nocontent":304===t?w="notmodified":(w=x.state,u=x.data,p=x.error,d=!p)):(p=w,!t&&w||(w="error",t<0&&(t=0))),C.status=t,C.statusText=(i||w)+"",d?_.resolveWith(g,[u,w,C]):_.rejectWith(g,[C,w,p]),C.statusCode(b),b=void 0,c&&f.trigger(d?"ajaxSuccess":"ajaxError",[C,m,d?u:p]),v.fireWith(g,[C,w]),c&&(f.trigger("ajaxComplete",[C,m]),--ye.active||ye.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=void 0),i=i||{};var a,r,n,o,l,d,h,c,u,p,m=ye.ajaxSetup({},i),g=m.context||m,f=m.context&&(g.nodeType||g.jquery)?ye(g):ye.event,_=ye.Deferred(),v=ye.Callbacks("once memory"),b=m.statusCode||{},x={},y={},w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(h){if(!o)for(o={};t=Nt.exec(n);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return h?n:null},setRequestHeader:function(e,t){return null==h&&(e=y[e.toLowerCase()]=y[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==h&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)C.always(e[C.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||w;return a&&a.abort(t),s(0,t),this}};if(_.promise(C),m.url=((t||m.url||Ot.href)+"").replace(Bt,Ot.protocol+"//"),m.type=i.method||i.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(Le)||[""],null==m.crossDomain){d=ne.createElement("a");try{d.href=m.url,d.href=d.href,m.crossDomain=Wt.protocol+"//"+Wt.host!=d.protocol+"//"+d.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ye.param(m.data,m.traditional)),te(Ht,m,i,C),h)return C;c=ye.event&&m.global,c&&0==ye.active++&&ye.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Vt.test(m.type),r=m.url.replace(Mt,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Pt,"+")):(p=m.url.slice(r.length),m.data&&(m.processData||"string"==typeof m.data)&&(r+=(It.test(r)?"&":"?")+m.data,delete m.data),!1===m.cache&&(r=r.replace(Ft,"$1"),p=(It.test(r)?"&":"?")+"_="+Dt+++p),m.url=r+p),m.ifModified&&(ye.lastModified[r]&&C.setRequestHeader("If-Modified-Since",ye.lastModified[r]),ye.etag[r]&&C.setRequestHeader("If-None-Match",ye.etag[r])),(m.data&&m.hasContent&&!1!==m.contentType||i.contentType)&&C.setRequestHeader("Content-Type",m.contentType),C.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Ut+"; q=0.01":""):m.accepts["*"]);for(u in m.headers)C.setRequestHeader(u,m.headers[u]);if(m.beforeSend&&(!1===m.beforeSend.call(g,C,m)||h))return C.abort();if(w="abort",v.add(m.complete),C.done(m.success),C.fail(m.error),a=te(Yt,m,i,C)){if(C.readyState=1,c&&f.trigger("ajaxSend",[C,m]),h)return C;m.async&&m.timeout>0&&(l=e.setTimeout(function(){C.abort("timeout")},m.timeout));try{h=!1,a.send(x,s)}catch(e){if(h)throw e;s(-1,e)}}else s(-1,"No Transport");return C},getJSON:function(e,t,i){return ye.get(e,t,i,"json")},getScript:function(e,t){return ye.get(e,void 0,t,"script")}}),ye.each(["get","post"],function(e,t){ye[t]=function(e,i,s,a){return ve(i)&&(a=a||s,s=i,i=void 0),ye.ajax(ye.extend({url:e,type:t,dataType:a,data:i,success:s},ye.isPlainObject(e)&&e))}}),ye._evalUrl=function(e){return ye.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ye.fn.extend({wrapAll:function(e){var t;return this[0]&&(ve(e)&&(e=e.call(this[0])),t=ye(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return ve(e)?this.each(function(t){ye(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ye(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=ve(e);return this.each(function(i){ye(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ye(this).replaceWith(this.childNodes)}),this}}),ye.expr.pseudos.hidden=function(e){return!ye.expr.pseudos.visible(e)},ye.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ye.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Xt={0:200,1223:204},Gt=ye.ajaxSettings.xhr();_e.cors=!!Gt&&"withCredentials"in Gt,_e.ajax=Gt=!!Gt,ye.ajaxTransport(function(t){var i,s;if(_e.cors||Gt&&!t.crossDomain)return{send:function(a,r){var n,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(n in t.xhrFields)o[n]=t.xhrFields[n];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");for(n in a)o.setRequestHeader(n,a[n]);i=function(e){return function(){i&&(i=s=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?r(0,"error"):r(o.status,o.statusText):r(Xt[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=i(),s=o.onerror=o.ontimeout=i("error"),void 0!==o.onabort?o.onabort=s:o.onreadystatechange=function(){4===o.readyState&&e.setTimeout(function(){i&&s()})},i=i("abort");try{o.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}}),ye.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ye.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ye.globalEval(e),e}}}),ye.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ye.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(s,a){t=ye("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&a("error"===e.type?404:200,e.type)}),ne.head.appendChild(t[0])},abort:function(){i&&i()}}}});var $t=[],qt=/(=)\?(?=&|$)|\?\?/;ye.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$t.pop()||ye.expando+"_"+Dt++;return this[e]=!0,e}}),ye.ajaxPrefilter("json jsonp",function(t,i,s){var a,r,n,o=!1!==t.jsonp&&(qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=ve(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(qt,"$1"+a):!1!==t.jsonp&&(t.url+=(It.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return n||ye.error(a+" was not called"),n[0]},t.dataTypes[0]="json",r=e[a],e[a]=function(){n=arguments},s.always(function(){void 0===r?ye(e).removeProp(a):e[a]=r,t[a]&&(t.jsonpCallback=i.jsonpCallback,$t.push(a)),n&&ve(r)&&r(n[0]),n=r=void 0}),"script"}),_e.createHTMLDocument=function(){var e=ne.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),ye.parseHTML=function(e,t,i){if("string"!=typeof e)return[];"boolean"==typeof t&&(i=t,t=!1);var s,a,r;return t||(_e.createHTMLDocument?(t=ne.implementation.createHTMLDocument(""),s=t.createElement("base"),s.href=ne.location.href,t.head.appendChild(s)):t=ne),a=ke.exec(e),r=!i&&[],a?[t.createElement(a[1])]:(a=C([e],t,r),r&&r.length&&ye(r).remove(),ye.merge([],a.childNodes))},ye.fn.load=function(e,t,i){var s,a,r,n=this,o=e.indexOf(" ");return o>-1&&(s=Q(e.slice(o)),e=e.slice(0,o)),ve(t)?(i=t,t=void 0):t&&"object"==typeof t&&(a="POST"),n.length>0&&ye.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){r=arguments,n.html(s?ye("<div>").append(ye.parseHTML(e)).find(s):e)}).always(i&&function(e,t){n.each(function(){i.apply(this,r||[e.responseText,t,e])})}),this},ye.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ye.fn[t]=function(e){return this.on(t,e)}}),ye.expr.pseudos.animated=function(e){return ye.grep(ye.timers,function(t){return e===t.elem}).length},ye.offset={setOffset:function(e,t,i){var s,a,r,n,o,l,d,h=ye.css(e,"position"),c=ye(e),u={};"static"===h&&(e.style.position="relative"),o=c.offset(),r=ye.css(e,"top"),l=ye.css(e,"left"),d=("absolute"===h||"fixed"===h)&&(r+l).indexOf("auto")>-1,d?(s=c.position(),n=s.top,a=s.left):(n=parseFloat(r)||0,a=parseFloat(l)||0),ve(t)&&(t=t.call(e,i,ye.extend({},o))),null!=t.top&&(u.top=t.top-o.top+n),null!=t.left&&(u.left=t.left-o.left+a),"using"in t?t.using.call(e,u):c.css(u)}},ye.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ye.offset.setOffset(this,e,t)});var t,i,s=this[0];if(s)return s.getClientRects().length?(t=s.getBoundingClientRect(),i=s.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,i,s=this[0],a={top:0,left:0};if("fixed"===ye.css(s,"position"))t=s.getBoundingClientRect();else{for(t=this.offset(),i=s.ownerDocument,e=s.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===ye.css(e,"position");)e=e.parentNode;e&&e!==s&&1===e.nodeType&&(a=ye(e).offset(),a.top+=ye.css(e,"borderTopWidth",!0),a.left+=ye.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-ye.css(s,"marginTop",!0),left:t.left-a.left-ye.css(s,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ye.css(e,"position");)e=e.offsetParent;return e||et})}}),ye.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;ye.fn[e]=function(s){return Pe(this,function(e,s,a){var r;if(be(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===a)return r?r[t]:e[s];r?r.scrollTo(i?r.pageXOffset:a,i?a:r.pageYOffset):e[s]=a},e,s,arguments.length)}}),ye.each(["top","left"],function(e,t){ye.cssHooks[t]=M(_e.pixelPosition,function(e,i){if(i)return i=P(e,t),lt.test(i)?ye(e).position()[t]+"px":i})}),ye.each({Height:"height",Width:"width"},function(e,t){ye.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,s){ye.fn[s]=function(a,r){var n=arguments.length&&(i||"boolean"!=typeof a),o=i||(!0===a||!0===r?"margin":"border");return Pe(this,function(t,i,a){var r;return be(t)?0===s.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===a?ye.css(t,i,o):ye.style(t,i,a,o)},t,n?a:void 0,n)}})}),ye.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){ye.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),ye.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ye.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,s){return this.on(t,e,i,s)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),ye.proxy=function(e,t){var i,s,a;if("string"==typeof t&&(i=e[t],t=e,e=i),ve(e))return s=le.call(arguments,2),a=function(){return e.apply(t||this,s.concat(le.call(arguments)))},a.guid=e.guid=e.guid||ye.guid++,a},ye.holdReady=function(e){e?ye.readyWait++:ye.ready(!0)},ye.isArray=Array.isArray,ye.parseJSON=JSON.parse,ye.nodeName=r,ye.isFunction=ve,ye.isWindow=be,ye.camelCase=m,ye.type=s,ye.now=Date.now,ye.isNumeric=function(e){var t=ye.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return ye});var Qt=e.jQuery,Kt=e.$;return ye.noConflict=function(t){return e.$===ye&&(e.$=Kt),t&&e.jQuery===ye&&(e.jQuery=Qt),ye},t||(e.jQuery=e.$=ye),ye}),function(e,t){var i=t.jQuery;"object"==typeof exports?module.exports=i?e(t,i):function(i){if(i&&!i.fn)throw"Provide jQuery or null";return e(t,i)}:"function"==typeof define&&define.amd?define(function(){return e(t)}):e(t,!1)}(function(e,t){"use strict";function i(e,t){return function(){var i,s=this,a=s.base;return s.base=e,i=t.apply(s,arguments),s.base=a,i}}function s(e,t){return ne(t)&&(t=i(e?e._d?e:i(n,e):n,t),t._d=(e&&e._d||0)+1),t}function a(e,t){var i,a=t.props;for(i in a)!Ae.test(i)||e[i]&&e[i].fix||(e[i]="convert"!==i?s(e.constructor.prototype[i],a[i]):a[i])}function r(e){return e}function n(){return""}function o(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}function l(e){this.name=(t.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function d(e,t){if(e){for(var i in t)e[i]=t[i];return e}}function h(e,t,i){return e?oe(e)?h.apply(ae,e):(xe=i?i[0]:xe,/^(\W|_){5}$/.test(e+t+xe)||F("Invalid delimiters"),fe=e[0],_e=e[1],ve=t[0],be=t[1],pe.delimiters=[fe+_e,ve+be,xe],e="\\"+fe+"(\\"+xe+")?\\"+_e,t="\\"+ve+"\\"+be,ie="(?:(\\w+(?=[\\/\\s\\"+ve+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+ve+"]|\\"+ve+"(?!\\"+be+"))*?)",ue.rTag="(?:"+ie+")",ie=new RegExp("(?:"+e+ie+"(\\/)?|\\"+fe+"(\\"+xe+")?\\"+_e+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+t,"g"),ue.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+e+".*"+t),ge):pe.delimiters}function c(e,t){t||!0===e||(t=e,e=void 0);var i,s,a,r,n=this,o="root"===t;if(e){if(!(r=t&&n.type===t&&n))if(i=n.views,n._.useKey){for(s in i)if(r=t?i[s].get(e,t):i[s])break}else for(s=0,a=i.length;!r&&s<a;s++)r=t?i[s].get(e,t):i[s]}else if(o)r=n.root;else if(t)for(;n&&!r;)r=n.type===t?n:void 0,n=n.parent;else r=n.parent;return r||void 0}function u(){var e=this.get("item");return e?e.index:void 0}function p(){return this.index}function m(e,t,i,s){var a,r,o,l=0;if(1===i&&(s=1,i=void 0),t)for(r=t.split("."),o=r.length;e&&l<o;l++)a=e,e=r[l]?e[r[l]]:e;return i&&(i.lt=i.lt||l<o),void 0===e?s?n:"":s?function(){return e.apply(a,arguments)}:e}function g(i,s,a){var r,n,o,l,h,c,u,p=this,m=!we&&arguments.length>1,g=p.ctx;if(i){if(p._||(h=p.index,p=p.tag),c=p,g&&g.hasOwnProperty(i)||(g=he).hasOwnProperty(i)){if(o=g[i],"tag"===i||"tagCtx"===i||"root"===i||"parentTags"===i||p._.it===i)return o}else g=void 0;if((!we&&p.tagCtx||p.linked)&&(o&&o._cxp||(p=p.tagCtx||ne(o)?p:(p=p.scope||p,!p.isTop&&p.ctx.tag||p),void 0!==o&&p.tagCtx&&(p=p.tagCtx.view.scope),g=p._ocps,(o=g&&g.hasOwnProperty(i)&&g[i]||o)&&o._cxp||!a&&!m||((g||(p._ocps=p._ocps||{}))[i]=o=[{_ocp:o,_vw:c,_key:i}],o._cxp={path:Se,ind:0,updateValue:function(e,i){return t.observable(o[0]).setProperty(Se,e),this}})),l=o&&o._cxp)){if(arguments.length>2)return n=o[1]?ue._ceo(o[1].deps):[Se],n.unshift(o[0]),n._cxp=l,n;if(h=l.tagElse,u=o[1]?l.tag&&l.tag.cvtArgs?l.tag.cvtArgs(h,1)[l.ind]:o[1](o[0].data,o[0],ue):o[0]._ocp,m)return o&&u!==s&&ue._ucp(i,s,p,l),p;o=u}return o&&ne(o)&&(r=function(){return o.apply(this&&this!==e?this:c,arguments)},d(r,o)),r||o}}function f(e){return e&&(e.fn?e:this.getRsc("templates",e)||le(e))}function _(e,t,i,s){var r,n,o,l,h,c="number"==typeof i&&t.tmpl.bnds[i-1];if(void 0===s&&c&&c._lr&&(s=""),void 0!==s?i=s={props:{},args:[s]}:c&&(i=c(t.data,t,ue)),c=c._bd&&c,e||c){if(n=t._lc,r=n&&n.tag,i.view=t,!r){if(r=d(new ue._tg,{_:{bnd:c,unlinked:!0,lt:i.lt},inline:!n,tagName:":",convert:e,flow:!0,tagCtx:i,tagCtxs:[i],_is:"tag"}),(l=i.args.length)>1)for(h=r.bindTo=[];l--;)h.unshift(l);n&&(n.tag=r,r.linkCtx=n),i.ctx=W(i.ctx,(n?n.view:t).ctx),a(r,i)}r._er=s&&o,r.ctx=i.ctx||r.ctx||{},i.ctx=void 0,o=r.cvtArgs()[0],r._er=s&&o}else o=i.args[0];return o=c&&t._.onRender?t._.onRender(o,t,r):o,void 0!=o?o:""}function v(e,t){var i,s,a,r,n,o,l,d=this;if(d.tagName){if(o=d,!(d=(o.tagCtxs||[d])[e||0]))return}else o=d.tag;if(n=o.bindFrom,r=d.args,(l=o.convert)&&""+l===l&&(l="true"===l?void 0:d.view.getRsc("converters",l)||F("Unknown converter: '"+l+"'")),l&&!t&&(r=r.slice()),n){for(a=[],i=n.length;i--;)s=n[i],a.unshift(b(d,s));t&&(r=a)}if(l){if(void 0===(l=l.apply(o,a||r)))return r;if(n=n||[0],i=n.length,oe(l)&&l.length===i||(l=[l],n=[0],i=1),t)r=l;else for(;i--;)+(s=n[i])===s&&(r[s]=l[i])}return r}function b(e,t){return(e=e[+t===t?"args":"props"])&&e[t]}function x(e){return this.cvtArgs(e,1)}function y(e,t){var i,s,a=this;if(""+t===t){for(;void 0===i&&a;)s=a.tmpl&&a.tmpl[e],i=s&&s[t],a=a.parent;return i||ae[e][t]}}function w(e,t,i,s,r,n){function o(e){var t=l[e];if(void 0!==t)for(t=oe(t)?t:[t],m=t.length;m--;)z=t[m],isNaN(parseInt(z))||(t[m]=parseInt(z));return t||[0]}t=t||se;var l,d,h,c,u,p,m,f,_,y,w,C,S,T,R,k,O,D,I,j,L,A,M,N,z,V,B,H,Y,U=0,X="",G=t._lc||!1,$=t.ctx,q=i||t.tmpl,Q="number"==typeof s&&t.tmpl.bnds[s-1];for("tag"===e._is?(l=e,e=l.tagName,s=l.tagCtxs,l.template):(d=t.getRsc("tags",e)||F("Unknown tag: {{"+e+"}} "),d.template),void 0===n&&Q&&(Q._lr=d.lateRender&&!1!==Q._lr||Q._lr)&&(n=""),void 0!==n?(X+=n,s=n=[{props:{},args:[],params:{props:{}}}]):Q&&(s=Q(t.data,t,ue)),p=s.length;U<p;U++)y=s[U],k=y.tmpl,(!G||!G.tag||U&&!G.tag.inline||l._er||k&&+k===k)&&(k&&q.tmpls&&(y.tmpl=y.content=q.tmpls[k-1]),y.index=U,y.ctxPrm=g,y.render=E,y.cvtArgs=v,y.bndArgs=x,y.view=t,y.ctx=W(W(y.ctx,d&&d.ctx),$)),(i=y.props.tmpl)&&(y.tmpl=t._getTmpl(i),y.content=y.content||y.tmpl),l?G&&G.fn._lr&&(O=!!l.init):(l=new d._ctr,O=!!l.init,l.parent=u=$&&$.tag,l.tagCtxs=s,G&&(l.inline=!1,G.tag=l),l.linkCtx=G,(l._.bnd=Q||G.fn)?(l._.ths=y.params.props.this,l._.lt=s.lt,l._.arrVws={}):l.dataBoundOnly&&F(e+" must be data-bound:\n{^{"+e+"}}")),M=l.dataMap,y.tag=l,M&&s&&(y.map=s[U].map),l.flow||(w=y.ctx=y.ctx||{},h=l.parents=w.parentTags=$&&W(w.parentTags,$.parentTags)||{},u&&(h[u.tagName]=u),h[l.tagName]=w.tag=l,w.tagCtx=y);if(!(l._er=n)){for(a(l,s[0]),l.rendering={rndr:l.rendering},U=0;U<p;U++){if(y=l.tagCtx=s[U],A=y.props,l.ctx=y.ctx,!U){if(O&&(l.init(y,G,l.ctx),O=void 0),y.args.length||!1===y.argDefault||!1===l.argDefault||(y.args=j=[y.view.data],y.params.args=["#data"]),S=o("bindTo"),void 0!==l.bindTo&&(l.bindTo=S),void 0!==l.bindFrom?l.bindFrom=o("bindFrom"):l.bindTo&&(l.bindFrom=l.bindTo=S),T=l.bindFrom||S,B=S.length,V=T.length,l._.bnd&&(H=l.linkedElement)&&(l.linkedElement=H=oe(H)?H:[H],B!==H.length&&F("linkedElement not same length as bindTo")),(H=l.linkedCtxParam)&&(l.linkedCtxParam=H=oe(H)?H:[H],V!==H.length&&F("linkedCtxParam not same length as bindFrom/bindTo")),T)for(l._.fromIndex={},l._.toIndex={},f=V;f--;)for(z=T[f],m=B;m--;)z===S[m]&&(l._.fromIndex[m]=f,l._.toIndex[f]=m);G&&(G.attr=l.attr=G.attr||l.attr||G._dfAt),c=l.attr,l._.noVws=c&&c!==He}if(j=l.cvtArgs(U),l.linkedCtxParam)for(L=l.cvtArgs(U,1),m=V,Y=l.constructor.prototype.ctx;m--;)(C=l.linkedCtxParam[m])&&(z=T[m],R=L[m],y.ctx[C]=ue._cp(Y&&void 0===R?Y[C]:R,void 0!==R&&b(y.params,z),y.view,l._.bnd&&{tag:l,cvt:l.convert,ind:m,tagElse:U}));(D=A.dataMap||M)&&(j.length||A.dataMap)&&(I=y.map,I&&I.src===j[0]&&!r||(I&&I.src&&I.unmap(),D.map(j[0],y,I,!l._.bnd),I=y.map),j=[I.tgt]),_=void 0,l.render&&(_=l.render.apply(l,j),t.linked&&_&&!Ee.test(_)&&(i={links:[]},i.render=i.fn=function(){return _},_=P(i,t.data,void 0,!0,t,void 0,void 0,l))),j.length||(j=[t]),void 0===_&&(N=j[0],l.contentCtx&&(N=!0===l.contentCtx?t:l.contentCtx(N)),_=y.render(N,!0)||(r?void 0:"")),X=X?X+(_||""):void 0!==_?""+_:void 0}l.rendering=l.rendering.rndr}return l.tagCtx=s[0],l.ctx=l.tagCtx.ctx,l._.noVws&&l.inline&&(X="text"===c?de.html(X):""),Q&&t._.onRender?t._.onRender(X,t,l):X}function C(e,t,i,s,a,r,n,o){var l,d,h,c=this,p="array"===t;c.content=o,c.views=p?[]:{},c.data=s,c.tmpl=a,h=c._={key:0,useKey:p?0:1,id:""+ze++,onRender:n,bnds:{}},c.linked=!!n,c.type=t||"top",(c.parent=i)?(c.root=i.root||c,l=i.views,d=i._,c.isTop=d.scp,c.scope=(!e.tag||e.tag===i.ctx.tag)&&!c.isTop&&i.scope||c,d.useKey?(l[h.key="_"+d.useKey++]=c,c.index=Xe,c.getIndex=u):l.length===(h.key=c.index=r)?l.push(c):l.splice(r,0,c),c.ctx=e||i.ctx):c.ctx=e||{}}function S(e){var t,i,s;for(t in Qe)i=t+"s",e[i]&&(s=e[i],e[i]={},ae[i](s,e))}function T(e,t,i){function a(){var t=this;t._={unlinked:!0},t.inline=!0,t.tagName=e}var r,n,o,l=new ue._tg;if(ne(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t}),n=t.baseTag){t.flow=!!t.flow,n=""+n===n?i&&i.tags[n]||ce[n]:n,n||F('baseTag: "'+t.baseTag+'" not found'),l=d(l,n);for(o in t)l[o]=s(n[o],t[o])}else l=d(l,t);return void 0!==(r=l.template)&&(l.template=""+r===r?le[r]||le(r):r),(a.prototype=l).constructor=l._ctr=a,i&&(l._parentTmpl=i),l}function R(e){return this.base.apply(this,e)}function k(e,i,s,a){function r(i){var r,o;if(""+i===i||i.nodeType>0&&(n=i)){if(!n)if(/^\.\/[^\\:*?"<>]*$/.test(i))(o=le[e=e||i])?i=o:n=document.getElementById(i);else if(t.fn&&!ue.rTmpl.test(i))try{n=t(i,document)[0]}catch(e){}
n&&("SCRIPT"!==n.tagName&&F(i+": Use script block, not "+n.tagName),a?i=n.innerHTML:(r=n.getAttribute(Ue),r&&(r!==We?(i=le[r],delete le[r]):t.fn&&(i=t.data(n)[We])),r&&i||(e=e||(t.fn?We:i),i=k(e,n.innerHTML,s,a)),i.tmplName=e=e||r,e!==We&&(le[e]=i),n.setAttribute(Ue,e),t.fn&&t.data(n,We,i))),n=void 0}else i.fn||(i=void 0);return i}var n,o,l=i=i||"";if(ue._html=de.html,0===a&&(a=void 0,l=r(l)),a=a||(i.markup?i.bnds?d({},i):i:{}),a.tmplName=a.tmplName||e||"unnamed",s&&(a._parentTmpl=s),!l&&i.markup&&(l=r(i.markup))&&l.fn&&(l=l.markup),void 0!==l)return l.render||i.render?l.tmpls&&(o=l):(i=j(l,a),z(l.replace(ke,"\\$&"),i)),o||(o=d(function(){return o.render.apply(o,arguments)},i),S(o)),o}function O(e,t){return ne(e)?e.call(t):e}function D(e){for(var t=[],i=0,s=e.length;i<s;i++)t.push(e[i].unmap());return t}function I(e,i){function s(e){h.apply(this,e)}function a(){return new s(arguments)}function r(e,t){for(var i,s,a,r,n=0;n<v;n++)a=u[n],i=void 0,a+""!==a&&(i=a,a=i.getter),void 0===(r=e[a])&&i&&void 0!==(s=i.defaultVal)&&(r=O(s,e)),t(r,i&&c[i.type],a)}function n(t){t=t+""===t?JSON.parse(t):t;var i,s,a=0,n=t,d=[];if(oe(t)){for(t=t||[],i=t.length;a<i;a++)d.push(this.map(t[a]));return d._is=e,d.unmap=l,d.merge=o,d}if(t){r(t,function(e,t){t&&(e=t.map(e)),d.push(e)}),n=this.apply(this,d);for(s in t)s===re||x[s]||(n[s]=t[s])}return n}function o(e){e=e+""===e?JSON.parse(e):e;var t,i,s,n,o,l,d,h,c,u=0,p=this;if(oe(p)){for(d={},c=[],i=e.length,s=p.length;u<i;u++){for(h=e[u],l=!1,t=0;t<s&&!l;t++)d[t]||(o=p[t],m&&(d[t]=l=m+""===m?h[m]&&(x[m]?o[m]():o[m])===h[m]:m(o,h)));l?(o.merge(h),c.push(o)):c.push(a.map(h))}return void(b?b(p).refresh(c,!0):p.splice.apply(p,[0,p.length].concat(c)))}r(e,function(e,t,i){t?p[i]().merge(e):p[i](e)});for(n in e)n===re||x[n]||(p[n]=e[n])}function l(){var e,t,i,s,a=0,r=this;if(oe(r))return D(r);for(e={};a<v;a++)t=u[a],i=void 0,t+""!==t&&(i=t,t=i.getter),s=r[t](),e[t]=i&&s&&c[i.type]?oe(s)?D(s):s.unmap():s;for(t in r)"_is"===t||x[t]||t===re||"_"===t.charAt(0)&&x[t.slice(1)]||ne(r[t])||(e[t]=r[t]);return e}var d,h,c=this,u=i.getters,p=i.extend,m=i.id,g=t.extend({_is:e||"unnamed",unmap:l,merge:o},p),f="",_="",v=u?u.length:0,b=t.observable,x={};for(s.prototype=g,d=0;d<v;d++)!function(e){e=e.getter||e,x[e]=d+1;var t="_"+e;f+=(f?",":"")+e,_+="this."+t+" = "+e+";\n",g[e]=g[e]||function(i){if(!arguments.length)return this[t];b?b(this).setProperty(e,i):this[t]=i},b&&(g[e].set=g[e].set||function(e){this[t]=e})}(u[d]);return h=new Function(f,_.slice(0,-1)),h.prototype=g,g.constructor=h,a.map=n,a.getters=u,a.extend=p,a.id=m,a}function j(e,i){var s,a=me._wm||{},r={tmpls:[],links:{},bnds:[],_is:"template",render:E};return i&&(r=d(r,i)),r.markup=e,r.htmlTag||(s=Ie.exec(e),r.htmlTag=s?s[1].toLowerCase():""),s=a[r.htmlTag],s&&s!==a.div&&(r.markup=t.trim(r.markup)),r}function L(e){ge[e]=function(t){return arguments.length?(pe[e]=t,ge):pe[e]}}function A(e){function t(t,i){this.tgt=e.getTgt(t,i),i.map=this}return ne(e)&&(e={getTgt:e}),e.baseMap&&(e=d(d({},e.baseMap),e)),e.map=function(e,i){return new t(e,i)},e}function E(e,t,i,s,a,r){var n,o,l,d,h,c,u,p,m=s,g="";if(!0===t?(i=t,t=void 0):typeof t!==Ye&&(t=void 0),(l=this.tag)?(h=this,m=m||h.view,d=m._getTmpl(l.template||h.tmpl),arguments.length||(e=l.contentCtx&&ne(l.contentCtx)?e=l.contentCtx(e):m)):d=this,d){if(!s&&e&&"view"===e._is&&(m=e),m&&e===m&&(e=m.data),c=!m,we=we||c,m||((t=t||{}).root=e),!we||me.useViews||d.useViews||m&&m!==se)g=P(d,e,t,i,m,a,r,l);else{if(m?(u=m.data,p=m.index,m.index=Xe):(m=se,u=m.data,m.data=e,m.ctx=t),oe(e)&&!i)for(n=0,o=e.length;n<o;n++)m.index=n,m.data=e[n],g+=d.fn(e[n],m,ue);else m.data=e,g+=d.fn(e,m,ue);m.data=u,m.index=p}c&&(we=void 0)}return g}function P(e,t,i,s,a,r,n,o){function l(e){x=d({},i),x[b]=e}var h,c,u,p,m,g,f,_,v,b,x,y,w,S="";if(o&&(v=o.tagName,y=o.tagCtx,i=i?W(i,o.ctx):o.ctx,e===a.content?f=e!==a.ctx._wrp?a.ctx._wrp:void 0:e!==y.content?e===o.template?(f=y.tmpl,i._wrp=y.content):f=y.content||a.content:f=a.content,!1===y.props.link&&(i=i||{},i.link=!1),(b=y.props.itemVar)&&("~"!==b[0]&&N("Use itemVar='~myItem'"),b=b.slice(1))),a&&(n=n||a._.onRender,w=i&&!1===i.link,w&&a._.nl&&(n=void 0),i=W(i,a.ctx)),!0===r&&(g=!0,r=0),n&&o&&o._.noVws&&(n=void 0),_=n,!0===n&&(_=void 0,n=a._.onRender),i=e.helpers?W(e.helpers,i):i,x=i,oe(t)&&!s)for(u=g?a:void 0!==r&&a||new C(i,"array",a,t,e,r,n,f),u._.nl=w,a&&a._.useKey&&(u._.bnd=!o||o._.bnd&&o,u.tag=o),h=0,c=t.length;h<c;h++)b&&l(t[h]),p=new C(x,"item",u,t[h],e,(r||0)+h,n,u.content),p._.it=b,m=e.fn(t[h],p,ue),S+=u._.onRender?u._.onRender(m,p):m;else b&&l(t),u=g?a:new C(x,v||"data",a,t,e,r,n,f),u._.it=b,u.tag=o,u._.nl=w,S+=e.fn(t,u,ue);return o&&(u.tagElse=y.index,y.contentView=u),_?_(S,u):S}function M(e,t,i){var s=void 0!==i?ne(i)?i.call(t.data,e,t):i||"":"{Error: "+(e.message||e)+"}";return pe.onError&&void 0!==(i=pe.onError.call(t.data,e,i&&s,t))&&(s=i),t&&!t._lc?de.html(s):s}function F(e){throw new ue.Err(e)}function N(e){F("Syntax error\n"+e)}function z(e,t,i,s,a){function r(t){(t-=g)&&_.push(e.substr(g,t).replace(Te,"\\n"))}function n(t,i){t&&(t+="}}",N((i?"{{"+i+"}} block has {{/"+t+" without {{"+t:"Unmatched or missing {{/"+t)+", in template:\n"+e))}function o(o,l,d,u,m,b,x,y,w,C,S,T){(x&&l||w&&!d||y&&":"===y.slice(-1)||C)&&N(o),b&&(m=":",u=He),w=w||i&&!a;var R,k,O,D=(l||i)&&[[]],I="",j="",L="",A="",E="",P="",M="",F="",z=!w&&!m;d=d||(y=y||"#data",m),r(T),g=T+o.length,x?p&&_.push(["*","\n"+y.replace(/^:/,"ret+= ").replace(Re,"$1")+";\n"]):d?("else"===d&&(De.test(y)&&N('For "{{else if expr}}" use "{{else expr}}"'),D=v[9]&&[[]],v[10]=e.substring(v[10],T),k=v[11]||v[0]||N("Mismatched: "+o),v=f.pop(),_=v[2],z=!0),y&&Y(y.replace(Te," "),D,t,i).replace(Oe,function(e,t,i,s,a,r,n,o){return"this:"===s&&(r="undefined"),o&&(O=O||"@"===o[0]),s="'"+a+"':",n?(j+=i+r+",",A+="'"+o+"',"):i?(L+=s+"j._cp("+r+',"'+o+'",view),',P+=s+"'"+o+"',"):t?M+=r:("trigger"===a&&(F+=r),"lateRender"===a&&(R="false"!==o),I+=s+r+",",E+=s+"'"+o+"',",c=c||Ae.test(a)),""}).slice(0,-1),D&&D[0]&&D.pop(),h=[d,u||!!s||c||"",z&&[],B(A||(":"===d?"'#data',":""),E,P),B(j||(":"===d?"data,":""),I,L),M,F,R,O,D||0],_.push(h),z&&(f.push(v),v=h,v[10]=g,v[11]=k)):S&&(n(S!==v[0]&&S!==v[11]&&S,v[0]),v[10]=e.substring(v[10],T),v=f.pop()),n(!v&&S),_=v[2]}var l,d,h,c,u,p=pe.allowCode||t&&t.allowCode||!0===ge.allowCode,m=[],g=0,f=[],_=m,v=[,,m];if(p&&t._is&&(t.allowCode=p),i&&(void 0!==s&&(e=e.slice(0,-s.length-2)+ve),e=fe+e+be),n(f[0]&&f[0][2].pop()[0]),e.replace(ie,o),r(e.length),(g=m[m.length-1])&&n(""+g!==g&&+g[10]===g[10]&&g[0]),i){for(d=U(m,e,i),u=[],l=m.length;l--;)u.unshift(m[l][9]);V(d,u)}else d=U(m,t);return d}function V(e,t){var i,s,a=0,r=t.length;for(e.deps=[],e.paths=[];a<r;a++){e.paths.push(s=t[a]);for(i in s)"_jsvto"!==i&&s.hasOwnProperty(i)&&s[i].length&&!s[i].skp&&(e.deps=e.deps.concat(s[i]))}}function B(e,t,i){return[e.slice(0,-1),t.slice(0,-1),i.slice(0,-1)]}function H(e,t){return"\n\t"+(t?t+":{":"")+"args:["+e[0]+"],\n\tprops:{"+e[1]+"}"+(e[2]?",\n\tctx:{"+e[2]+"}":"")}function Y(e,t,i,s){function a(a,h,b,x,y,w,C,S,T,R,k,O,D,I,j,L,A,E,P,M,F){function V(e,i,a,o,l,d,h,p){var m="."===a;if(a&&(y=y.slice(i.length),/^\.?constructor$/.test(p||y)&&N(e),m||(e=(R?(s?"":"(ltOb.lt=ltOb.lt||")+"(ob=":"")+(o?'view.ctxPrm("'+o+'")':l?"view":"data")+(R?")===undefined"+(s?"":")")+'?"":view._getOb(ob,"':"")+(p?(d?"."+d:o?"":l?"":"."+a)+(h||""):(p=o?"":l?d||"":a,"")),e+=p?"."+p:"",e=i+("view.data"===e.slice(0,9)?e.slice(5):e)+(R?(s?'"':'",ltOb')+(k?",1)":")"):"")),c)){if(Y="_linkTo"===r?n=t._jsvto=t._jsvto||[]:u.bd,U=m&&Y[Y.length-1]){if(U._cpfn){for(;U.sb;)U=U.sb;U.bnd&&(y="^"+y.slice(1)),U.sb=y,U.bnd=U.bnd||"^"===y[0]}}else Y.push(y);v[f]=M+(m?1:0)}return e}x&&!S&&(y=x+y),w=w||"",b=b||h||D,y=y||T,R&&(R=!/\)|]/.test(F[M-1]))&&(y=y.slice(1).split(".").join("^")),k=k||E||"";var B,H,Y,U,W,X=")";if("["===k&&(k="[j._sq(",X=")]"),!C||d||l){if(c&&A&&!d&&!l&&f&&(B=v[f-1],F.length-1>M-(B||0))){if(B=F.slice(B,M+a.length),!0!==H)if(Y=n||p[f-1].bd,(U=Y[Y.length-1])&&U.prm){for(;U.sb&&U.sb.prm;)U=U.sb;W=U.sb={path:U.sb,bnd:U.bnd}}else Y.push(W={path:Y.pop()});A=_e+":"+B+" onerror=''"+ve,H=g[A],H||(g[A]=!0,g[A]=H=z(A,i,!0)),!0!==H&&W&&(W._cpfn=H,W.prm=u.bd,W.bnd=W.bnd||W.path&&W.path.indexOf("^")>=0)}return d?(d=!I,d?a:D+'"'):l?(l=!j,l?a:D+'"'):(b?(v[f]=M++,u=p[++f]={bd:[]},b):"")+(P?f?"":(m=F.slice(m,M),(r?(r=o=n=!1,"\b"):"\b,")+m+(m=M+a.length,c&&t.push(u.bd=[]),"\b")):S?(f&&N(e),c&&t.pop(),r="_"+y,o=x,m=M+a.length,c&&(c=u.bd=t[r]=[],c.skp=!x),y+":"):y?y.split("^").join(".").replace(ue.rPath,V)+(k?(u=p[++f]={bd:[]},_[f]=X,k):w):w||(L?(L=_[f]||L,_[f]=!1,u=p[--f],L+(k?(u=p[++f],_[f]=X,k):"")):O?(_[f]||N(e),","):h?"":(d=I,l=j,'"')))}N(e)}var r,n,o,l,d,h,c=t&&t[0],u={bd:c},p={0:u},m=0,g=(i?i.links:c&&(c.links=c.links||{}))||se.tmpl.links,f=0,_={},v={};return"@"===e[0]&&(e=e.replace(Ne,".")),h=(e+(i?" ":"")).replace(ue.rPrm,a),!f&&h||N(e)}function U(e,t,i){var s,a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,L,A,E,P,M=0,F=me.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,z="",B={},Y=e.length;for(""+t===t?(b=i?'data-link="'+t.replace(Te," ").slice(1,-1)+'"':t,t=0):(b=t.tmplName||"unnamed",t.allowCode&&(B.allowCode=!0),t.debug&&(B.debug=!0),u=t.bnds,v=t.tmpls),s=0;s<Y;s++)if(""+(a=e[s])===a)z+='\n+"'+a+'"';else if("*"===(r=a[0]))z+=";\n"+a[1]+"\nret=ret";else{if(n=a[1],w=!i&&a[2],o=H(a[3],"params")+"},"+H(m=a[4]),L=a[6],A=a[7],a[8]?(E="\nvar ob,ltOb={},ctxs=",P=";\nctxs.lt=ltOb.lt;\nreturn ctxs;"):(E="\nreturn ",P=""),C=a[10]&&a[10].replace(Re,"$1"),(R="else"===r)?p&&p.push(a[9]):(D=a[5]||!1!==pe.debugMode&&"undefined",u&&(p=a[9])&&(p=[p],M=u.push(1))),F=F||m[1]||m[2]||p||/view.(?!index)/.test(m[0]),(k=":"===r)?n&&(r=n===He?">":n+r):(w&&(x=j(C,B),x.tmplName=b+"/"+r,x.useViews=x.useViews||F,U(w,x),F=x.useViews,v.push(x)),R||(y=r,F=F||r&&(!ce[r]||!ce[r].flow),T=z,z=""),S=e[s+1],S=S&&"else"===S[0]),I=D?";\ntry{\nret+=":"\n+",g="",f="",k&&(p||L||n&&n!==He||A)){if(O=new Function("data,view,j,u","// "+b+" "+ ++M+" "+r+E+"{"+o+"};"+P),O._er=D,O._tag=r,O._bd=!!p,O._lr=A,i)return O;V(O,p),_='c("'+n+'",view,',c=!0,g=_+M+",",f=")"}if(z+=k?(i?(D?"try{\n":"")+"return ":I)+(c?(c=void 0,F=h=!0,_+(O?(u[M-1]=O,M):"{"+o+"}")+")"):">"===r?(d=!0,"h("+m[0]+")"):(!0,"((v="+m[0]+")!=null?v:"+(i?"null)":'"")'))):(l=!0,"\n{view:view,content:false,tmpl:"+(w?v.length:"false")+","+o+"},"),y&&!S){if(z="["+z.slice(0,-1)+"]",_='t("'+y+'",view,this,',i||p){if(z=new Function("data,view,j,u"," // "+b+" "+M+" "+y+E+z+P),z._er=D,z._tag=y,p&&V(u[M-1]=z,p),z._lr=A,i)return z;g=_+M+",undefined,",f=")"}z=T+I+_+(p&&M||z)+")",p=0,y=0}D&&!S&&(F=!0,z+=";\n}catch(e){ret"+(i?"urn ":"+=")+g+"j._err(e,view,"+D+")"+f+";}"+(i?"":"ret=ret"))}z="// "+b+(B.debug?"\ndebugger;":"")+"\nvar v"+(l?",t=j._tag":"")+(h?",c=j._cnvt":"")+(d?",h=j._html":"")+(i?(a[8]?", ob":"")+";\n":',ret=""')+z+(i?"\n":";\nreturn ret;");try{z=new Function("data,view,j,u",z)}catch(e){N("Compiled template code:\n\n"+z+'\n: "'+(e.message||e)+'"')}return t&&(t.fn=z,t.useViews=!!F),z}function W(e,t){return e&&e!==t?t?d(d({},t),e):e:t&&d({},t)}function X(e,i){var s,a,r=i.map,n=r&&r.propsArr;if(!n){if(n=[],typeof e===Ye||ne(e))for(s in e)a=e[s],s===re||!e.hasOwnProperty(s)||i.props.noFunctions&&t.isFunction(a)||n.push({key:s,prop:a});r&&(r.propsArr=r.options&&n)}return G(n,i)}function G(e,i){var s,a,r,n=i.tag,o=i.props,l=i.params.props,d=o.filter,h=o.sort,c=!0===h,u=parseInt(o.step),p=o.reverse?-1:1;if(!oe(e))return e;if(c||h&&""+h===h?(s=e.map(function(e,t){return e=c?e:m(e,h),{i:t,v:""+e===e?e.toLowerCase():e}}),s.sort(function(e,t){return e.v>t.v?p:e.v<t.v?-p:0}),e=s.map(function(t){return e[t.i]})):(h||p<0)&&!n.dataMap&&(e=e.slice()),ne(h)&&(e=e.sort(function(){return h.apply(i,arguments)})),p<0&&(!h||ne(h))&&(e=e.reverse()),e.filter&&d&&(e=e.filter(d,i),i.tag.onFilter&&i.tag.onFilter(i)),l.sorted&&(s=h||p<0?e:e.slice(),n.sorted?t.observable(n.sorted).refresh(s):i.map.sorted=s),a=o.start,r=o.end,(l.start&&void 0===a||l.end&&void 0===r)&&(a=r=0),isNaN(a)&&isNaN(r)||(a=+a||0,r=void 0===r||r>e.length?e.length:+r,e=e.slice(a,r)),u>1){for(a=0,r=e.length,s=[];a<r;a+=u)s.push(e[a]);e=s}return l.paged&&n.paged&&$observable(n.paged).refresh(e),e}function $(e,i,s){var a=this.jquery&&(this[0]||F("Unknown template")),r=a.getAttribute(Ue);return E.call(r&&t.data(a)[We]||le(a),e,i,s)}function q(e){return Ve[e]||(Ve[e]="&#"+e.charCodeAt(0)+";")}function Q(e,t){return Be[t]||""}function K(e){return void 0!=e?Le.test(e)&&(""+e).replace(Pe,q)||e:""}function Z(e){return""+e===e?e.replace(Me,q):e}function J(e){return""+e===e?e.replace(Fe,Q):e}var ee=!1===t;t=t&&t.fn?t:e.jQuery;var te,ie,se,ae,re,ne,oe,le,de,he,ce,ue,pe,me,ge,fe,_e,ve,be,xe,ye,we,Ce="v1.0.2",Se="_ocp",Te=/[ \t]*(\r\n|\n|\r)/g,Re=/\\(['"])/g,ke=/['"\\]/g,Oe=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,De=/^if\s/,Ie=/<(\w+)[>\s]/,je=/[\x00`><"'&=]/g,Le=/[\x00`><\"'&=]/,Ae=/^on[A-Z]|^convert(Back)?$/,Ee=/^\#\d+_`[\s\S]*\/\d+_`$/,Pe=je,Me=/[&<>]/g,Fe=/&(amp|gt|lt);/g,Ne=/\[['"]?|['"]?\]/g,ze=0,Ve={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},Be={amp:"&",gt:">",lt:"<"},He="html",Ye="object",Ue="data-jsv-tmpl",We="jsvTmpl",Xe="For #index in nested block use #getIndex().",Ge={},$e=e.jsrender,qe=$e&&t&&!t.render,Qe={template:{compile:k},tag:{compile:T},viewModel:{compile:I},helper:{},converter:{}};if(ae={jsviews:Ce,sub:{rPath:/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,rPrm:/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,View:C,Err:l,tmplFn:z,parse:Y,extend:d,extendCtx:W,syntaxErr:N,onStore:{template:function(e,t){null===t?delete Ge[e]:e&&(Ge[e]=t)}},addSetting:L,settings:{allowCode:!1},advSet:n,_thp:a,_gm:s,_tg:function(){},_cnvt:_,_tag:w,_er:F,_err:M,_cp:r,_sq:function(e){return"constructor"===e&&N(""),e}},settings:{delimiters:h,advanced:function(e){return e?(d(me,e),ue.advSet(),ge):me}},map:A},(l.prototype=new Error).constructor=l,u.depends=function(){return[this.get("item"),"index"]},p.depends="index",C.prototype={get:c,getIndex:p,ctxPrm:g,getRsc:y,_getTmpl:f,_getOb:m,_is:"view"},ue=ae.sub,ge=ae.settings,!($e||t&&t.render)){for(te in Qe)!function(e,t){function i(a,r,n){var o,l,d,h=ue.onStore[e];if(a&&typeof a===Ye&&!a.nodeType&&!a.markup&&!a.getTgt&&!("viewModel"===e&&a.getters||a.extend)){for(l in a)i(l,a[l],r);return r||ae}return a&&""+a!==a&&(n=r,r=a,a=void 0),d=n?"viewModel"===e?n:n[s]=n[s]||{}:i,o=t.compile,void 0===r&&(r=o?a:d[a],a=void 0),null===r?a&&delete d[a]:(o&&(r=o.call(d,a,r,n,0)||{},r._is=e),a&&(d[a]=r)),h&&h(a,r,n,o),r}var s=e+"s";ae[s]=i}(te,Qe[te]);if(de=ae.converters,he=ae.helpers,ce=ae.tags,ue._tg.prototype={baseApply:R,cvtArgs:v,bndArgs:x,ctxPrm:g},se=ue.topView=new C,t){if(t.fn.render=$,re=t.expando,t.observable){if(Ce!==(Ce=t.views.jsviews))throw"JsObservable requires JsRender "+Ce;d(ue,t.views.sub),ae.map=t.views.map}}else t={},ee&&(e.jsrender=t),t.renderFile=t.__express=t.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},t.isFunction=function(e){return"function"==typeof e},t.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},ue._jq=function(e){e!==t&&(d(e,t),t=e,t.fn.render=$,delete t.jsrender,re=t.expando)},t.jsrender=Ce;pe=ue.settings,pe.allowCode=!1,ne=t.isFunction,t.render=Ge,t.views=ae,t.templates=le=ae.templates;for(ye in pe)L(ye);(ge.debugMode=function(e){return void 0===e?pe.debugMode:(pe.debugMode=e,pe.onError=e+""===e?function(){return e}:ne(e)?e:void 0,ge)})(!1),me=pe.advanced={useViews:!1,_jsv:!1},ce({if:{render:function(e){var t=this,i=t.tagCtx;return t.rendering.done||!e&&(i.args.length||!i.index)?"":(t.rendering.done=!0,void(t.selected=i.index))},contentCtx:!0,flow:!0},for:{sortDataMap:A(G),init:function(e,t){var i,s,a,r=this,n=r.tagCtxs;for(i=n.length;i--;)s=n[i],a=s.params.props,s.argDefault=void 0===s.props.end||s.args.length>0,!1!==s.argDefault&&oe(s.args[0])&&(void 0!==a.sort||a.start||a.end||a.step||a.filter||a.reverse)&&(s.props.dataMap=r.sortDataMap)},render:function(e){var t,i,s,a,r,n=this,o=n.tagCtx,l=!1===o.argDefault,d=o.props,h=l||o.args.length,c="",u=0;if(!n.rendering.done){if(t=h?e:o.view.data,l)for(l=d.reverse?"unshift":"push",a=+d.end,r=+d.step||1,t=[],s=+d.start||0;(a-s)*r>0;s+=r)t[l](s);void 0!==t&&(i=oe(t),c+=o.render(t,!h||d.noIteration),u+=i?t.length:1),(n.rendering.done=u)&&(n.selected=o.index)}return c},flow:!0},props:{baseTag:"for",dataMap:A(X),init:n,flow:!0},include:{flow:!0},"*":{render:r,flow:!0},":*":{render:r,flow:!0},dbg:he.dbg=de.dbg=o}),de({html:K,attr:K,encode:Z,unencode:J,url:function(e){return void 0!=e?encodeURI(""+e):null===e?e:""}})}return pe=ue.settings,oe=(t||$e).isArray,ge.delimiters("{{","}}","^"),qe&&$e.views.sub._jq(t),t||$e},window),function(e){"use strict";function t(){function e(s){var a=this;if(!(a instanceof e))return s===f?t():new e(s);s instanceof e?(a.s=s.s,a.e=s.e,a.c=s.c.slice()):i(a,s),a.constructor=e}return e.prototype=g,e.DP=n,e.RM=o,e.NE=d,e.PE=h,e.version="5.2.2",e}function i(e,t){var i,s,a;if(0===t&&1/t<0)t="-0";else if(!_.test(t+=""))throw Error(u+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(i=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(i<0&&(i=s),i+=+t.slice(s+1),t=t.substring(0,s)):i<0&&(i=t.length),a=t.length,s=0;s<a&&"0"==t.charAt(s);)++s;if(s==a)e.c=[e.e=0];else{for(;a>0&&"0"==t.charAt(--a););for(e.e=i-s-1,e.c=[],i=0;s<=a;)e.c[i++]=+t.charAt(s++)}return e}function s(e,t,i,s){var a=e.c,r=e.e+t+1;if(r<a.length){if(1===i)s=a[r]>=5;else if(2===i)s=a[r]>5||5==a[r]&&(s||r<0||a[r+1]!==f||1&a[r-1]);else if(3===i)s=s||!!a[0];else if(s=!1,0!==i)throw Error(m);if(r<1)a.length=1,s?(e.e=-t,a[0]=1):a[0]=e.e=0;else{if(a.length=r--,s)for(;++a[r]>9;)a[r]=0,r--||(++e.e,a.unshift(1));for(r=a.length;!a[--r];)a.pop()}}else if(i<0||i>3||i!==~~i)throw Error(m);return e}function a(e,t,i,a){var r,n,o=e.constructor,d=!e.c[0];if(i!==f){if(i!==~~i||i<(3==t)||i>l)throw Error(3==t?u+"precision":p);for(e=new o(e),i=a-e.e,e.c.length>++a&&s(e,i,o.RM),2==t&&(a=e.e+i+1);e.c.length<a;)e.c.push(0)}if(r=e.e,n=e.c.join(""),i=n.length,2!=t&&(1==t||3==t&&a<=r||r<=o.NE||r>=o.PE))n=n.charAt(0)+(i>1?"."+n.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)n="0"+n;n="0."+n}else if(r>0)if(++r>i)for(r-=i;r--;)n+="0";else r<i&&(n=n.slice(0,r)+"."+n.slice(r));else i>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&(!d||4==t)?"-"+n:n}var r,n=20,o=1,l=1e6,d=-7,h=21,c="[big.js] ",u=c+"Invalid ",p=u+"decimal places",m=u+"rounding mode",g={},f=void 0,_=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;g.abs=function(){var e=new this.constructor(this);return e.s=1,e},g.cmp=function(e){var t,i=this,s=i.c,a=(e=new i.constructor(e)).c,r=i.s,n=e.s,o=i.e,l=e.e;if(!s[0]||!a[0])return s[0]?r:a[0]?-n:0;if(r!=n)return r;if(t=r<0,o!=l)return o>l^t?1:-1;for(n=(o=s.length)<(l=a.length)?o:l,r=-1;++r<n;)if(s[r]!=a[r])return s[r]>a[r]^t?1:-1;return o==l?0:o>l^t?1:-1},g.div=function(e){var t=this,i=t.constructor,a=t.c,r=(e=new i(e)).c,n=t.s==e.s?1:-1,o=i.DP;if(o!==~~o||o<0||o>l)throw Error(p);if(!r[0])throw Error("[big.js] Division by zero");if(!a[0])return new i(0*n);var d,h,c,u,m,g=r.slice(),_=d=r.length,v=a.length,b=a.slice(0,d),x=b.length,y=e,w=y.c=[],C=0,S=o+(y.e=t.e-e.e)+1;for(y.s=n,n=S<0?0:S,g.unshift(0);x++<d;)b.push(0);do{for(c=0;c<10;c++){if(d!=(x=b.length))u=d>x?1:-1;else for(m=-1,u=0;++m<d;)if(r[m]!=b[m]){u=r[m]>b[m]?1:-1;break}if(!(u<0))break;for(h=x==d?r:g;x;){if(b[--x]<h[x]){for(m=x;m&&!b[--m];)b[m]=9;--b[m],b[x]+=10}b[x]-=h[x]}for(;!b[0];)b.shift()}w[C++]=u?c:++c,b[0]&&u?b[x]=a[_]||0:b=[a[_]]}while((_++<v||b[0]!==f)&&n--);return w[0]||1==C||(w.shift(),y.e--),C>S&&s(y,o,i.RM,b[0]!==f),y},g.eq=function(e){return!this.cmp(e)},g.gt=function(e){return this.cmp(e)>0},g.gte=function(e){return this.cmp(e)>-1},g.lt=function(e){return this.cmp(e)<0},g.lte=function(e){return this.cmp(e)<1},g.minus=g.sub=function(e){var t,i,s,a,r=this,n=r.constructor,o=r.s,l=(e=new n(e)).s;if(o!=l)return e.s=-l,r.plus(e);var d=r.c.slice(),h=r.e,c=e.c,u=e.e;if(!d[0]||!c[0])return c[0]?(e.s=-l,e):new n(d[0]?r:0);if(o=h-u){for((a=o<0)?(o=-o,s=d):(u=h,s=c),s.reverse(),l=o;l--;)s.push(0);s.reverse()}else for(i=((a=d.length<c.length)?d:c).length,o=l=0;l<i;l++)if(d[l]!=c[l]){a=d[l]<c[l];break}if(a&&(s=d,d=c,c=s,e.s=-e.s),(l=(i=c.length)-(t=d.length))>0)for(;l--;)d[t++]=0;for(l=t;i>o;){if(d[--i]<c[i]){for(t=i;t&&!d[--t];)d[t]=9;--d[t],d[i]+=10}d[i]-=c[i]}for(;0===d[--l];)d.pop();for(;0===d[0];)d.shift(),--u;return d[0]||(e.s=1,d=[u=0]),e.c=d,e.e=u,e},g.mod=function(e){var t,i=this,s=i.constructor,a=i.s,r=(e=new s(e)).s;if(!e.c[0])throw Error("[big.js] Division by zero");return i.s=e.s=1,t=1==e.cmp(i),i.s=a,e.s=r,t?new s(i):(a=s.DP,r=s.RM,s.DP=s.RM=0,i=i.div(e),s.DP=a,s.RM=r,this.minus(i.times(e)))},g.plus=g.add=function(e){var t,i=this,s=i.constructor,a=i.s,r=(e=new s(e)).s;if(a!=r)return e.s=-r,i.minus(e);var n=i.e,o=i.c,l=e.e,d=e.c;if(!o[0]||!d[0])return d[0]?e:new s(o[0]?i:0*a);if(o=o.slice(),a=n-l){for(a>0?(l=n,t=d):(a=-a,t=o),t.reverse();a--;)t.push(0);t.reverse()}for(o.length-d.length<0&&(t=d,d=o,o=t),a=d.length,r=0;a;o[a]%=10)r=(o[--a]=o[a]+d[a]+r)/10|0;for(r&&(o.unshift(r),++l),a=o.length;0===o[--a];)o.pop();return e.c=o,e.e=l,e},g.pow=function(e){var t=this,i=new t.constructor(1),s=i,a=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(u+"exponent");for(a&&(e=-e);1&e&&(s=s.times(t)),e>>=1;)t=t.times(t);return a?i.div(s):s},g.round=function(e,t){var i=this.constructor;if(e===f)e=0;else if(e!==~~e||e<-l||e>l)throw Error(p);return s(new i(this),e,t===f?i.RM:t)},g.sqrt=function(){var e,t,i,a=this,r=a.constructor,n=a.s,o=a.e,l=new r(.5);if(!a.c[0])return new r(a);if(n<0)throw Error(c+"No square root");n=Math.sqrt(a+""),0===n||n===1/0?(t=a.c.join(""),t.length+o&1||(t+="0"),n=Math.sqrt(t),o=((o+1)/2|0)-(o<0||1&o),e=new r((n==1/0?"1e":(n=n.toExponential()).slice(0,n.indexOf("e")+1))+o)):e=new r(n),o=e.e+(r.DP+=4);do{i=e,e=l.times(i.plus(a.div(i)))}while(i.c.slice(0,o).join("")!==e.c.slice(0,o).join(""));return s(e,r.DP-=4,r.RM)},g.times=g.mul=function(e){var t,i=this,s=i.constructor,a=i.c,r=(e=new s(e)).c,n=a.length,o=r.length,l=i.e,d=e.e;if(e.s=i.s==e.s?1:-1,!a[0]||!r[0])return new s(0*e.s);for(e.e=l+d,n<o&&(t=a,a=r,r=t,d=n,n=o,o=d),t=new Array(d=n+o);d--;)t[d]=0;for(l=o;l--;){for(o=0,d=n+l;d>l;)o=t[d]+r[l]*a[d-l-1]+o,t[d--]=o%10,o=o/10|0;t[d]=o}for(o?++e.e:t.shift(),l=t.length;!t[--l];)t.pop();return e.c=t,e},g.toExponential=function(e){return a(this,1,e,e)},g.toFixed=function(e){return a(this,2,e,this.e+e)},g.toPrecision=function(e){return a(this,3,e,e-1)},g.toString=function(){return a(this)},g.valueOf=g.toJSON=function(){return a(this,4)},r=t(),r.default=r.Big=r,"function"==typeof define&&define.amd?define(function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:e.Big=r}(this),window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i){"use strict";t.version="17.4.0.39",t.consts={NamespaceJoin:"-"},t.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},t.Orientation={Horizontal:"horizontal",Vertical:"vertical"},t.serverTimezoneOffset=0,t.parseDateInUTC=!1,t.persistStateVersion=null,t.locales=t.locales||[],Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return void 0!==e[t]}),Date.prototype.toISOString||function(){function e(e){var t=String(e);return 1===t.length&&(t="0"+t),t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e=e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},t.defineClass=function(e,i,s,a){if(e&&s){for(var r=e.split("."),n=window,o=0;o<r.length-1;o++)t.isNullOrUndefined(n[r[o]])&&(n[r[o]]={}),n=n[r[o]];return(a||t.isNullOrUndefined(n[r[o]]))&&(i="function"==typeof i?i:function(){},n[r[o]]=i,n[r[o]].prototype=s),n[r[o]]}},t.util={getNameSpace:function(e){var i=e.toLowerCase().split(".");return"ej"===i[0]&&(i[0]="e"),i.join(t.consts.NamespaceJoin)},getObject:function(e,i){if(i&&e){"string"!=typeof e&&(e=JSON.stringify(e));for(var s=i,a=e.split("."),r=0;r<a.length&&!t.util.isNullOrUndefined(s);r++)s=s[a[r]];return s}},createObject:function(e,i,s){var a,r,n=e.split("."),o=s||window,l=o,d=n.length;for(a=0;a<d;a++)r=n[a],a+1==d?l[r]=i:t.isNullOrUndefined(l[r])&&(l[r]={}),l=l[r];return o},isNullOrUndefined:function(e){return void 0===e||null===e},exportAll:function(i,s){var a,r,n,o,l,d,h=[],c=[],u={action:i,method:"post","data-ajax":"false"},p=t.buildTag("form","",null,u);if(0!=s.length){for(var m=0;m<s.length;m++)if(r=m,n=e("#"+s[m]),o=e("#"+s[m]).data(),a=o.ejWidgets,l=e(n).data(a[0]),c.push({id:l._id,locale:l.model.locale}),!t.isNullOrUndefined(l)){d=l._getExportModel(l.model),h.push({name:a[0],type:"hidden",value:l.stringify(d)});var g=t.buildTag("input","",null,h[r]);p.append(g)}e("body").append(p),p.submit(),setTimeout(function(){var i,s;if(c.length)for(var r=0;r<c.length;r++)t.isNullOrUndefined(c[r].locale)||(i=e("#"+c[r].id).data(),a=i.ejWidgets,s=e("#"+c[r].id).data(a[0]),s.model.locale=c[r].locale)},0),p.remove()}return!0},print:function(i,s){var a=t.buildTag("div"),r=i.clone();if(a.append(r),!s)var s=window.open("","print","height=452,width=1024,tabbar=no");s.document.write("<!DOCTYPE html>");var n=e("head").find("link").add("style");if("msie"===t.browserInfo().name){var o="";n.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),o+=i.outerHTML}),s.document.write("<html><head></head><body>"+o+a[0].innerHTML+"</body></html>")}else{var o="";s.document.write("<html><head>"),n.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),o+=i.outerHTML}),s.document.writeln(o+"</head><body>"),s.document.writeln(a[0].innerHTML+"</body></html>")}s.document.close(),s.focus(),setTimeout(function(){t.isNullOrUndefined(s.window)||(s.print(),setTimeout(function(){s.close()},1e3))},1e3)},ieClearRemover:function(t){var i=e(t).height();t.style.paddingTop=parseFloat(i/2)+"px",t.style.paddingBottom=parseFloat(i/2)+"px",t.style.height="1px",t.style.lineHeight="1px"},sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.successHandler,error:t.errorHandler,beforeSend:t.beforeSendHandler,complete:t.completeHandler})},buildTag:function(t,i,s,a){var r=/^[a-z]*[0-9a-z]+/gi.exec(t)[0],n=/#([_a-z0-9-&@\/\\,+()$~%:*?<>{}\[\]]+\S)/gi.exec(t);n=n?n[n.length-1].replace(/[&@\/\\,+()$~%.:*?<>{}\[\]]/g,""):void 0;var o=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(t);return o=o?o[o.length-1]:void 0,e(document.createElement(r)).attr(n?{id:n}:{}).addClass(o||"").css(s||{}).attr(a||{}).html(i||"")},_preventDefaultException:function(e,t){if(e)for(var i in t)if(t[i].test(e[i]))return!0;return!1},getMaxZindex:function(){var t=1;return t=Math.max.apply(null,e.map(e("body *"),function(t,i){if("absolute"==e(t).css("position")||"fixed"==e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),void 0!=t&&null!=t||(t=1),t},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(t,i){var s,a=e(t).parents().andSelf().filter(":hidden");if(a){var r={visibility:"hidden",display:"block"},n=[];a.each(function(){var e,t={};for(e in r)t[e]=this.style[e],this.style[e]=r[e];n.push(t)}),s=/(outer)/g.test(i)?e(t)[i](!0):e(t)[i](),a.each(function(e){var t,i=n[e];for(t in r)this.style[t]=i[t]})}return s},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[t.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[t.userAgent()]},startEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return t.isTouchDevice()||e.support.hasPointer?e.support.hasPointer&&!t.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"taphold":"click"},isDevice:function(){return t.getBooleanVal(e("head"),"data-ej-forceset",!1)?t.getBooleanVal(e("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var e=document.documentElement;return e&&e.clientWidth/e.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&t.isPortrait()&&t.isDevice()||window.innerWidth<=800&&!t.isDevice()||window.innerWidth<=800&&!t.isPortrait()&&t.isWindows()&&t.isDevice()||t.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!("undefined"==typeof Android)},isWindowsWebView:function(){return-1!=location.href.indexOf("x-wmapp")},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-mobile",!1)},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-tablet",!1)||!t.isMobile()&&t.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&t.isMobile())&&this.isDevice()},getClearString:function(t){return e.trim(t.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(t,i,s){var a=e(t).attr(i);return null!=a?"true"==a.toLowerCase():s},_getSkewClass:function(e,t,i){var s=e.width(),a=e.height(),r=e.offset().left,n=e.offset().left+s,o=e.offset().top,l=e.offset().top+a,d=.3*s,h=.3*a;return t<r+d&&i<o+h?"e-m-skew-topleft":t>n-d&&i<o+h?"e-m-skew-topright":t>n-d&&i>l-h?"e-m-skew-bottomright":t<r+d&&i>l-h?"e-m-skew-bottomleft":t>r+d&&i<o+h&&t<n-d?"e-m-skew-top":t<r+d?"e-m-skew-left":t>n-d?"e-m-skew-right":i>l-h?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(t){e(t).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(e){var t,i=[];if(e=Object.prototype.toString.call(e)===Object.prototype.toString()?e:{},!Object.keys){for(t in e)e.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(e)},_touchStartPoints:function(e,t){if(e){var i=e.touches?e.touches[0]:e;t._distX=0,t._distY=0,t._moved=!1,t._pointX=i.pageX,t._pointY=i.pageY}},_isTouchMoved:function(e,t){if(e){
var i,s,a=e.touches?e.touches[0]:e,r=a.pageX-t._pointX,n=a.pageY-t._pointY;Date.now();return t._pointX=a.pageX,t._pointY=a.pageY,t._distX+=r,t._distY+=n,i=Math.abs(t._distX),s=Math.abs(t._distY),!(i<5&&s<5)}},listenEvents:function(e,i,s,a,r,n){for(var o=0;o<e.length;o++)t.listenTouchEvent(e[o],i[o],s[o],a,r,n)},listenTouchEvent:function(i,s,a,r,n,o){for(var l=r?"removeEventListener":"addEventListener",d=r?"off":"on",h=e(i),c=0;c<h.length;c++){var u=h[c];switch(s){case"touchstart":t._bindEvent(u,l,s,a,"mousedown","MSPointerDown","pointerdown",o);break;case"touchmove":t._bindEvent(u,l,s,a,"mousemove","MSPointerMove","pointermove",o);break;case"touchend":t._bindEvent(u,l,s,a,"mouseup","MSPointerUp","pointerup",o);break;case"touchcancel":t._bindEvent(u,l,s,a,"mousecancel","MSPointerCancel","pointercancel",o);break;case"tap":case"taphold":case"ejtouchmove":case"click":e(u)[d](s,a);break;default:"msie"==t.browserInfo().name&&t.browserInfo().version<9?n._on(e(u),s,a):u[l](s,a,!0)}}},_bindEvent:function(t,i,s,a,r,n,o,l){e.support.hasPointer?t[i](window.navigator.pointerEnabled?o:n,a,!0):t[i](s,a,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e="webkitT,t,MozT,msT,OT".split(","),i=0,s=e.length;i<s;i++)if(e[i]+"ransform"in t.styles)return e[i].substr(0,e[i].length-1);return!1},addPrefix:function(e){return""===t.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),t.userAgent()+e)},destroyWidgets:function(t){e(t).find("[data-role *= ejm]").each(function(t,i){var s=e(i),a=s.data("ejWidgets");a&&s[a]("destroy")})},getAttrVal:function(t,i,s){var a=e(t).attr(i);return null!=a?a:s},getOffset:function(t){var i={},s=t.offset()||{left:0,top:0};if(e.extend(!0,i,s),"static"!=e("body").css("position")){var a=e("body").offset();i.left-=a.left,i.top-=a.top}return i},getZindexPartial:function(i,s){if(!t.isNullOrUndefined(i)&&i.length>0){var a,r=i.parents();a=e("body").children(),!t.isNullOrUndefined(i)&&i.length>0&&a.splice(a.index(s),1),e(a).each(function(e,t){r.push(t)});var n=Math.max.apply(n,e.map(r,function(t,i){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1}));return!n||n<1e4?n=1e4:n+=1,n}},isValidAttr:function(t,i){var t=e(t)[0];if(void 0!==t[i])return!0;var s=!1;return e.each(t,function(e){if(e.toLowerCase()==i.toLowerCase())return s=!0,!1}),s}},e.extend(t,t.util),t.widgetBase={droppables:{default:[]},resizables:{default:[]},_renderEjTemplate:function(i,s,a,r,n){var o=null;if(("object"==typeof i||i.startsWith("#")||i.startsWith("."))&&(o=e(i).attr("type")),o){if(o=o.toLowerCase(),t.template[o])return t.template[o](this,i,s,a,r)}else if(!t.isNullOrUndefined(n))return t.template["text/x-"+n](this,i,s,a,r);return t.template.render(this,i,s,a,r)},destroy:function(){if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),e(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(var i=this.element.data("ejWidgets")||[],s=0;s<i.length;s++)i[s]==this.pluginName&&i.splice(s,1);for(i.length||this.element.removeData("ejWidgets");this._events;){var a=this._events.pop(),r=[];if(!a)break;for(var s=0;s<a[1].length;s++)e.isPlainObject(a[1][s])||r.push(a[1][s]);e.fn.off.apply(a[0],r)}this._events=null,this.element.removeClass(t.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(i){this._events||(this._events=[]);for(var s=[].splice.call(arguments,1,arguments.length-1),a={},r=s.length;a&&"function"!=typeof a;)a=s[--r];return s[r]=t.proxy(s[r],this),this._events.push([i,s,a,s[r]]),e.fn.on.apply(i,s),this},_off:function(t,i,s,a){var r,n=this._events;if(!n||!n.length)return this;"function"==typeof s&&(r=a,a=s,s=r);for(var o=i.match(/\S+/g)||[""],l=0;l<n.length;l++){var d=n[l];if(d[0].length&&(!a||d[2]===a)&&(d[1][0]===i||o[0])&&(!s||d[1][1]===s)&&e.inArray(t[0],d[0])>-1){e.fn.off.apply(t,a?[i,s,d[3]]:[i,s]),n.splice(l,1);break}}return this},_trigger:function(i,s){var a,r,n=null,o={};if(e.extend(o,s),i in this.model&&(n=this.model[i]),n&&("string"==typeof n&&(n=t.util.getObject(n,window)),e.isFunction(n)&&(r=t.event(i,this.model,s),a=n.call(this,r),s&&e.extend(s,r),r.cancel||!t.isNullOrUndefined(a))))return!1===a||r.cancel;var l=Boolean(s);return s=s||{},s.originalEventType=i,s.type=this.pluginName+i,r=e.Event(s.type,t.event(s.type,this.model,s)),this.element&&this.element.trigger(r),l&&e.extend(s,r),t.isOnWebForms&&0==r.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&t.raiseWebFormsServerEvents(i,s,o),r.cancel},setModel:function(t,i){if(!this._trigger("modelChange",{changes:t})){for(var a in t){if(!i){if(this.model[a]===t[a]){delete t[a];continue}if(e.isPlainObject(t[a])&&(s(this.model[a],t[a]),e.isEmptyObject(t[a]))){delete t[a];continue}}if(this.dataTypes){var r=this._isValidModelValue(a,this.dataTypes,t);if(!0!==r)throw"setModel - Invalid input for property :"+a+" - "+r}if(this.model.notifyOnEachPropertyChanges&&this.model[a]!==t[a]){var n={oldValue:this.model[a],newValue:t[a]};t[a]=this._trigger(a+"Change",n)?this.model[a]:n.newValue}}if(!e.isEmptyObject(t)){if(this._setFirst){var o=t.dataSource;o&&delete t.dataSource,e.extend(!0,this.model,t),o&&(this.model.dataSource=o instanceof Array?o.slice():o,t.dataSource=this.model.dataSource),!this._setModel||this._setModel(t)}else this._setModel&&!1===this._setModel(t)||e.extend(!0,this.model,t);"enablePersistence"in t&&this._setState(t.enablePersistence)}}},option:function(i,s,a){if(!i)return this.model;if(e.isPlainObject(i))return this.setModel(i,a);if("string"==typeof i){i=i.replace(/^model\./,"");var r=t.getObject(i,this.model);if(void 0===s&&!a)return r;if("enablePersistence"===i)return this._setState(s);if(a&&s===t.extensions.modelGUID)return this._setModel(t.createObject(i,t.getObject(i,this.model),{}));if(a||t.getObject(i,this.model)!==s)return this.setModel(t.createObject(i,s,{}),a)}},_isValidModelValue:function(e,t,i){var s,a=t[e],r=i[e];if(!a)return!0;if("string"==typeof a){if("enum"==a&&(i[e]=r?r.toString().toLowerCase():r,a="string"),"array"===a){if("[object Array]"===Object.prototype.toString.call(r))return!0}else{if("data"===a)return!0;if("parent"===a)return!0;if(typeof r===a)return!0}return"Expected type - "+a}if(r instanceof Array){for(var n=0;n<r.length;n++)if(!0!==(s=this._isValidModelValue(e,t,r[n])))return" ["+n+"] - "+s;return!0}for(var o in r)if(!0!==(s=this._isValidModelValue(o,a,r)))return o+" : "+s;return!0},_returnFn:function(e,t){-1!=t.indexOf(".")?this._returnFn(e[t.split(".")[0]],t.split(".").slice(1).join(".")):e[t]=e[t].call(e.propName)},_removeCircularRef:function(e){function t(e,s,a){if("object"==typeof e){if(Array.prototype.indexOf||(Array.prototype.indexOf=function(e){return jQuery.inArray(e,this)}),i.indexOf(e)>=0)return void delete a[s];i.push(e);for(var r in e)e.hasOwnProperty(r)&&t(e[r],r,e);i.pop()}}var i=[];return t(e,"obj",null),e},stringify:function(e,i){for(var s=this.observables,a=0;a<s.length;a++){var r=t.getObject(s[a],e);t.isNullOrUndefined(r)||"function"!=typeof r||this._returnFn(e,s[a])}return i&&(e=this._removeCircularRef(e)),JSON.stringify(e)},_setState:function(i){!0===i?(this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler)):(this.deleteState(),e(window).off("unload",this._persistHandler))},_removeProp:function(e,i){t.isNullOrUndefined(e)||(-1!=i.indexOf(".")?this._removeProp(e[i.split(".")[0]],i.split(".").slice(1).join(".")):delete e[i])},persistState:function(){var e;if(this._ignoreOnPersist){e=r({},this.model);for(var i=0;i<this._ignoreOnPersist.length;i++)this._removeProp(e,this._ignoreOnPersist[i]);e.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){e={};for(var i=0;i<this._addToPersist.length;i++)t.createObject(this._addToPersist[i],t.getObject(this._addToPersist[i],this.model),e);e.addToPersist=this._addToPersist}else e=r({},this.model);this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?(t.isNullOrUndefined(t.persistStateVersion)||null!=window.localStorage.getItem("persistKey")||window.localStorage.setItem("persistKey",t.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(e))):document.cookie&&(t.isNullOrUndefined(t.persistStateVersion)||null!=t.cookie.get("persistKey")||t.cookie.set("persistKey",t.persistStateVersion),t.cookie.set("$ej$"+this.pluginName+this._id,e))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&t.cookie.set("$ej$"+this.pluginName+this._id,void 0,new Date)},restoreState:function(i){var s=null;if(window.localStorage?s=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(s=t.cookie.get("$ej$"+this.pluginName+this._id)),s){var a=JSON.parse(s);this._restoreState&&(this._restoreState(a.customPersists),delete a.customPersists),!1===t.isNullOrUndefined(a)&&(t.isNullOrUndefined(a.ignoreOnPersist)?t.isNullOrUndefined(a.addToPersist)||(this._addToPersist=a.addToPersist,delete a.addToPersist):(this._ignoreOnPersist=a.ignoreOnPersist,delete a.ignoreOnPersist))}if(t.isNullOrUndefined(a)||t.isNullOrUndefined(this._ignoreOnPersist))this.model=e.extend(!0,this.model,a);else{for(var r=0,n=this._ignoreOnPersist.length;r<n;r++)-1!==this._ignoreOnPersist[r].indexOf(".")?t.createObject(this._ignoreOnPersist[r],t.getObject(this._ignoreOnPersist[r],this.model),a):a[this._ignoreOnPersist[r]]=this.model[this._ignoreOnPersist[r]];this.model=a}!i&&s&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(e){var t=[];if("object"==typeof e?t=e:"string"==typeof e&&t.push(e),void 0===this._addToPersist){this._ignoreOnPersist=this._ignoreOnPersist||[];for(var i=0;i<t.length;i++)this._ignoreOnPersist.push(t[i])}else for(var i=0;i<t.length;i++){var s=this._addToPersist.indexOf(t[i]);this._addToPersist.splice(s,1)}},addToPersist:function(t){var i=[];if("object"==typeof t?i=t:"string"==typeof t&&i.push(t),void 0===this._addToPersist){this._ignoreOnPersist=this._ignoreOnPersist||[];for(var s=0;s<i.length;s++){var a=this._ignoreOnPersist.indexOf(i[s]);this._ignoreOnPersist.splice(a,1)}}else for(var s=0;s<i.length;s++)-1===e.inArray(i[s],this._addToPersist)&&this._addToPersist.push(i[s])},formatting:function(i,s,a){i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),a=t.preferredCulture(a)?a:"en-US";var r,n,o,l,d=i;if(r=i.split("{0:"),l=i.split("}"),n=r[0],o=l[1],"string"==typeof s&&e.isNumeric(s)&&(s=Number(s)),-1!=i.indexOf("{0:")){var h=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),c=h.exec(i);return s=null!=c&&null!=s?null!=n&&null!=o?n+t.format(s,c[2],a)+o:t.format(s,c[2],a):null!=s?s:""}if(d.startsWith("{")&&!d.startsWith("{0:")){for(var u,p=d.split(""),s=(s||"")+"",m=s.split(""),g=/[0aA\*CN<>\?]/gm,u=0,f=0;u<p.length;u++)p[u]=g.test(p[u])?"{"+f+++"}":p[u];return String.format.apply(String,[p.join("")].concat(m)).replace("{","").replace("}","")}return null!=this.data&&null==this.data.Value?(e.each(this.data,function(e,t){d=d.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),d):this.data.Value}},t.WidgetBase=function(){};var s=function(t,i){if(t instanceof Array)for(var a=0,r=t.length;a<r;a++)n=t[a],n===i[n]&&delete i[n],e.isPlainObject(i[n])&&e.isPlainObject(n)&&s(n,i[n]);else for(var n in t)t[n]===i[n]&&delete i[n],e.isPlainObject(i[n])&&e.isPlainObject(t[n])&&s(t[n],i[n])};t.widget=function(i,s,o){if("object"!=typeof i){var d=o._rootCSS||t.getNameSpace(s);o=t.defineClass(s,function(l,h){if(this.sfType=s,this.pluginName=i,this.instance=n,t.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},e.extend(this,t.widgetBase),this.dataTypes)for(var c in h){var u=this._isValidModelValue(c,this.dataTypes,h);if(!0!==u)throw"setModel - Invalid input for property :"+c+" - "+u}var p=l.data("ejWidgets")||[];p.push(i),l.data("ejWidgets",p);for(var m=0;t.widget.observables&&this.observables&&m<this.observables.length;m++){var g=t.getObject(this.observables[m],h);g&&t.createObject(this.observables[m],t.widget.observables.register(g,this.observables[m],this,l),h)}if(this.element=l.jquery?l:e(l),this.model=r(!0,{},o.prototype.defaults,h),this.model.keyConfigs=r(this.keyConfigs),this.element.addClass(d+" e-js").data(i,this),this._id=l[0].id,this.model.enablePersistence){if(window.localStorage&&!t.isNullOrUndefined(t.persistStateVersion)&&window.localStorage.getItem("persistKey")!=t.persistStateVersion)for(var m in window.localStorage)-1!=m.indexOf("$ej$")&&(window.localStorage.removeItem(m),window.localStorage.setItem("persistKey",t.persistStateVersion));else if(document.cookie&&!t.isNullOrUndefined(t.persistStateVersion)&&t.cookie.get("persistKey")!=t.persistStateVersion){var f=document.cookie.split(/; */);for(var _ in f)-1!=_.indexOf("$ej$")&&(t.cookie.set(_.split("=")[0],void 0,new Date),t.cookie.set("persistKey",t.persistStateVersion))}this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler),this.restoreState(!0)}if(this._init(h),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){var v=!1;this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus);for(var b in this.model.keyConfigs)if("focus"!==b){v=!0;break}if(v&&this._keyPressed){var x=l,y="keydown";this.keySettings&&(x=this.keySettings.getElement?this.keySettings.getElement()||x:x,y=this.keySettings.event||y),this._on(x,y,function(e){if(this.model.keyConfigs){var t=a.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),i={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};t&&!1===this._keyPressed(t,e.target,i,e)&&e.preventDefault()}})}}this._trigger("create")},o),e.fn[i]=function(a){for(var r,n=a,c=0;c<this.length;c++){var u=e(this[c]),p=u.data(i),m=p&&u.hasClass(d),g=null;if(this.length>0&&e.isPlainObject(n)&&(a=t.copyObject({},n)),m){if(a)if(r=[].slice.call(arguments,1),this.length>0&&r[0]&&"option"===n&&e.isPlainObject(r[0])&&(r[0]=t.copyObject({},r[0])),e.isPlainObject(a))p.setModel(a);else if(0!==a.indexOf("_")&&!t.isNullOrUndefined(g=t.getObject(a,p))||0===a.indexOf("model.")){if(!g||!e.isFunction(g)){if(1==arguments.length)return g;p.option(a,arguments[1]);continue}var f=g.apply(p,r);if(void 0!==f)return f}else h(s+": function/property - "+a+" does not exist")}else!0!==o.prototype._requiresID||e(this[c]).attr("id")||u.attr("id",l("ejControl_")),a&&"object"!=typeof a?h(i+": methods/properties can be accessed only after plugin creation"):(o.prototype.defaults&&!t.isNullOrUndefined(t.setCulture)&&"locale"in o.prototype.defaults&&"ejChart"!=i&&(!a||"locale"in a?t.isNullOrUndefined(a)&&(a={},a.locale=t.setCulture().name):a.locale=t.setCulture().name),new o(u,a))}return-1!=i.indexOf("ejm")&&t.widget.registerInstance(u,i,s,o.prototype),this},t.widget.register(i,s,o.prototype),t.loadLocale(i)}else{o=s;for(var c in i){var u=i[c];u instanceof Array&&(o._rootCSS=u[1],u=u[0]),t.widget(c,u,o),i[c]instanceof Array&&(o._rootCSS="")}}},t.loadLocale=function(i){var s,a,r=t.locales;for(s=0,a=r.length;s<a;s++)e.fn["Locale_"+r[s]](i)},e.extend(t.widget,function(){var e={},i=[];return{register:function(i,s,a){t.isNullOrUndefined(e[i])||h("ej.widget : The widget named "+i+" is trying to register twice."),e[i]={name:i,className:s,proto:a},t.widget.extensions&&t.widget.extensions.registerWidget(i)},registerInstance:function(e,t,s,a){i.push({element:e,pluginName:t,className:s,proto:a})},registeredWidgets:e,registeredInstances:i}}()),t.widget.destroyAll=function(e){if(e&&e.length)for(var t=0;t<e.length;t++){var i=e.eq(t).data(),s=i.ejWidgets;if(s&&s.length)for(var a=0;a<s.length;a++)i[s[a]]&&i[s[a]].destroy&&i[s[a]].destroy()}},t.cookie={get:function(e){var t=RegExp(e+"=([^;]+)").exec(document.cookie);if(t&&t.length>1)return t[1]},set:function(e,t,i){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==i?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t}};var a={getActionFromCode:function(e,t,i,s,r){i=i||!1,s=s||!1,r=r||!1;for(var n in e)if("focus"!==n)for(var o=a.getKeyObject(e[n]),l=0;l<o.length;l++)if(t===o[l].code&&i==o[l].isCtrl&&s==o[l].isShift&&r==o[l].isAlt)return n;return null},getKeyObject:function(t){for(var i={isCtrl:!1,isShift:!1,isAlt:!1},s=e.extend(!0,{},i),r=t.split(","),n=[],o=0;o<r.length;o++){var l=null;if(-1!=r[o].indexOf("+"))for(var d=r[o].split("+"),h=0;h<d.length;h++)l=a.getResult(e.trim(d[h]),i);else l=a.getResult(e.trim(r[o]),e.extend(!0,{},s));n.push(l)}return n},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}};t.getScrollableParents=function(t){return e(t).parentsUntil("html").filter(function(){return"visible"!=e(this).css("overflow")}).add(e(window))},t.browserInfo=function(){var i={},s=[],a={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var r in a)if(a.hasOwnProperty(r)&&(s=navigator.userAgent.match(a[r]))){if(i.name="opr"==s[1].toLowerCase()?"opera":s[1].toLowerCase(),i.version=s[2],i.culture={},i.culture.name=i.culture.language=navigator.language||navigator.userLanguage,void 0!==t.globalize){for(var n=t.preferredCulture().name,o=navigator.language||navigator.userLanguage?t.preferredCulture(navigator.language||navigator.userLanguage):t.preferredCulture("en-US"),l=0;navigator.languages&&l<navigator.languages.length&&(o=t.preferredCulture(navigator.languages[l]),o.language!=navigator.languages[l]);l++);t.preferredCulture(n),e.extend(!0,i.culture,o)}navigator.userAgent.match(/Trident\/7\./)&&(i.name="msie");break}return i.isMSPointerEnabled="msie"==i.name&&i.version>9&&window.navigator.msPointerEnabled,i.pointerEnabled=window.navigator.pointerEnabled,i},t.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},t.event=function(t,i,s){return e.extend(s||{},{type:t,model:i,cancel:!1})},t.proxy=function(e,t,i){return e&&"function"==typeof e?"on"in e&&t?i?e.on(t,i):e.on(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}:null},t.hasStyle=function(e){var t=document.documentElement.style;if(e in t)return!0;var i=["ms","Moz","Webkit","O","Khtml"];e=e[0].toUpperCase()+e.slice(1);for(var s=0;s<i.length;s++)if(i[s]+e in t)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var i=0;i<t;i++)if(i in this&&this[i]===e)return i;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e};var r=t.copyObject=function(e,i){var s,a,n=2;"boolean"!=typeof e&&(n=1);var o=[].slice.call(arguments,n);1===n&&(i=e,e=void 0);for(var l=0;l<o.length;l++)for(var d in o[l])if(s=i[d],void 0!==(a=o[l][d])&&s!==a&&o[l]!==a&&i!==a)if(a instanceof Array)if(0===l&&e)if("dataSource"===d||"data"===d||"predicates"===d)i[d]=a.slice();else{i[d]=new Array;for(var h=0;h<a.length;h++)r(!0,i[d],a)}else i[d]=a.slice();else t.isPlainObject(a)?(i[d]=s||{},e?r(e,i[d],a):r(i[d],a)):i[d]=a;return i},n=function(){return this},o=0,l=function(e){return e+o++};t.template={},t.template.render=t.template["text/x-jsrender"]=function(t,i,s,a,r){"#"!==i.slice(0,1)&&(i=["<div>",i,"</div>"].join(""));var n={prop:r,index:a};return e(i).render(s,n)},t.isPlainObject=function(e){if(!e)return!1;if(void 0!==t.DataManager&&e instanceof t.DataManager)return!1;if("object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(e){return!1}var i,s=t.support.isOwnLast;for(i in e)if(s)break;return void 0===i||e.hasOwnProperty(i)};var d=!1;t.util.valueFunction=function(e){return function(i,s){var a=t.getObject(e,this.model);if(!1===d&&(d=t.getObject("observables.getValue",t.widget)),void 0===i)return t.isNullOrUndefined(d)?"function"==typeof a?a.call(this):a:d(a,s);"function"==typeof a?(this["ob.values"][e]=i,a.call(this,i)):t.createObject(e,i,this.model)}},t.util.getVal=function(e){return"function"==typeof e?e():e},t.support={isOwnLast:function(){var e=function(){this.a=1};e.prototype.b=1;for(var t in new e)return"b"===t}(),outerHTML:function(){return void 0!==document.createElement("div").outerHTML}()};var h=t.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}};t.getRandomValue=function(e,i){if(void 0===e||void 0===i)return t.throwError("Min and Max values are required for generating a random number");var s;if("crypto"in window&&"getRandomValues"in crypto){var a=new Uint16Array(1);window.crypto.getRandomValues(a),s=a[0]%(i-e)+e}else s=Math.random()*(i-e)+e;return 0|s},t.extensions={},t.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(e){var t=$(this);$.each(e,function(e,i){i&&i.specified&&t.attr(i.name,i.value)})},$.fn.removeEleAttrs=function(e){return this.each(function(){var t=$(this),i=$(this.attributes).clone();$.each(i,function(i,s){s&&s.specified&&e.test(s.name)&&t.removeAttr(s.name)})})},$.fn.attrNotStartsWith=function(e){var t,i=[];this.each(function(){t=$(this.attributes).clone()});for(var s=0;s<t.length;s++)t[s]&&t[s].specified&&e.test(t[s].name)||i.push(t[s]);return i},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var e=$(this),t=$(this.attributes).clone();$.each(t,function(t,i){i&&i.specified&&""===i.value&&e.removeAttr(i.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:!1!==ej.userAgent(),pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,i){var s,a=e.attributes;for(s=0;s<a.length;s++)if(0===a[s].nodeName.indexOf(i[3]))return!1;return!0}});var e=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return e.apply(this,arguments)}}(),window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i,s){"use strict";t.DataManager=function(i,s,a){if(!(this instanceof t.DataManager))return new t.DataManager(i,s,a);i||(i=[]),"string"==typeof(a=a||i.adaptor)&&(a=new t[a]);var r=[],n=this;return i instanceof Array?r={json:i,offline:!0}:"object"==typeof i?e.isPlainObject(i)?(i.json||(i.json=[]),i.table&&(i.json=this._getJsonFromElement(i.table,i.headerOption)),r={url:i.url,insertUrl:i.insertUrl,removeUrl:i.removeUrl,updateUrl:i.updateUrl,crudUrl:i.crudUrl,batchUrl:i.batchUrl,json:i.json,headers:i.headers,accept:i.accept,data:i.data,async:i.async,timeTillExpiration:i.timeTillExpiration,cachingPageSize:i.cachingPageSize,enableCaching:i.enableCaching,requestType:i.requestType,key:i.key,crossDomain:i.crossDomain,antiForgery:i.antiForgery,jsonp:i.jsonp,dataType:i.dataType,enableAjaxCache:i.enableAjaxCache,offline:void 0!==i.offline?i.offline:!("remoteSaveAdaptor"==i.adaptor||i.adaptor instanceof t.remoteSaveAdaptor)&&!i.url,requiresFormat:i.requiresFormat}):(i.jquery||k(i))&&(r={json:this._getJsonFromElement(i),offline:!0,table:i}):"string"==typeof i&&(r={url:i,offline:!1,dataType:"json",json:[]}),void 0!==r.requiresFormat||t.support.cors||(r.requiresFormat=!!P(r.crossDomain)||r.crossDomain),r.antiForgery&&this.antiForgeryToken(),void 0===r.dataType&&(r.dataType="json"),this.dataSource=r,this.defaultQuery=s,r.url&&r.offline&&!r.json.length?(this.isDataAvailable=!1,this.adaptor=a||new t.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(s||t.Query()).done(function(e){n.dataSource.offline=!0,n.isDataAvailable=!0,r.json=e.result,n.adaptor=new t.JsonAdaptor})):this.adaptor=r.offline?new t.JsonAdaptor:new t.ODataAdaptor,!r.jsonp&&this.adaptor instanceof t.ODataAdaptor&&(r.jsonp="callback"),this.adaptor=a||this.adaptor,r.enableCaching&&(this.adaptor=new t.CacheAdaptor(this.adaptor,r.timeTillExpiration,r.cachingPageSize)),this},t.DataManager.prototype={setDefaultQuery:function(e){this.defaultQuery=e},executeQuery:function(i,s,a,r){"function"==typeof i&&(r=a,a=s,s=i,i=null),i||(i=this.defaultQuery),i instanceof t.Query||M("DataManager - executeQuery() : A query is required to execute");var n=e.Deferred();n.then(s,a,r);var o={query:i};if(this.dataSource.offline||void 0==this.dataSource.url)t.isNullOrUndefined(this.dataSource.async)||0!=this.dataSource.async?y(function(){this._localQueryProcess(i,o,n)},this):this._localQueryProcess(i,o,n);else{var l=this.adaptor.processQuery(this,i);t.isNullOrUndefined(l.url)?y(function(){o=this._getDeferedArgs(i,l,o),n.resolveWith(this,[o])},this):this._makeRequest(l,n,o,i)}return n.promise()},_localQueryProcess:function(e,t,i){var s=this.executeLocal(e);t=this._getDeferedArgs(e,s,t),i.resolveWith(this,[t])},_getDeferedArgs:function(e,t,i){return e._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=D(e._fromTable,i.result,this),i.getKnockoutModel=I(i.result),i},executeLocal:function(i){this.defaultQuery||i instanceof t.Query||M("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||M("DataManager - executeLocal() : Json data is required to execute"),i=i||this.defaultQuery;var s=this.adaptor.processQuery(this,i);if(i._subQuery){var r=i._subQuery._fromTable,n=i._subQuery._lookup,o=i._requiresCount?s.result:s;n&&n instanceof Array&&a(i._subQuery._fKey,r,o,n,i._subQuery._key);for(var l=0;l<o.length;l++)o[l][r]instanceof Array&&(o[l]=e.extend({},o[l]),o[l][r]=this.adaptor.processResponse(i._subQuery.using(t.DataManager(o[l][r].slice(0))).executeLocal(),this,i))}return this.adaptor.processResponse(s,this,i)},_makeRequest:function(i,s,r,n){var o=!!n._subQuerySelector,l=E(function(e){r.error=e,s.rejectWith(this,[r])},this),d=E(function(e,t,i,a,l,d,h){o||(r.xhr=i,r.count=parseInt(t,10),r.result=e,r.request=a,r.aggregates=d,r.getTableModel=D(n._fromTable,e,this),r.getKnockoutModel=I(e),r.actual=l,r.virtualSelectRecords=h,s.resolveWith(this,[r]))},this),h=E(function(t,i){var s=e.Deferred(),h={parent:r};n._subQuery._isChild=!0;var c=this.adaptor.processQuery(this,n._subQuery,t?this.adaptor.processResponse(t):i),u=this._makeRequest(c,s,h,n._subQuery);return o||s.then(function(e){t&&(a(n._subQuery._fKey,n._subQuery._fromTable,t,e,n._subQuery._key),d(t))},l),u},this),c=A(function(e,i,s,a){-1==s.getResponseHeader("Content-Type").indexOf("xml")&&t.dateParse&&(e=t.parseJSON(e));var r=this.adaptor.processResponse(e,this,n,s,a),l=0,c=null,u=e.virtualSelectRecords;if(n._requiresCount&&(l=r.count,c=r.aggregates,r=r.result),!n._subQuery)return void d(r,l,s,a,e,c,u);o||h(r)},this),u=e.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!!t.isNullOrUndefined(this.dataSource.enableAjaxCache)||this.dataSource.enableAjaxCache,beforeSend:E(this._beforeSend,this),processData:!1,success:c,error:l},i);if("async"in this.dataSource&&(u.async=this.dataSource.async),u=e.ajax(u),o){var p=n._subQuerySelector.call(this,{query:n._subQuery,parent:n});p&&p.length?(u=e.when(u,h(null,p)),u.then(A(function(e,t,i){var s=this.adaptor.processResponse(e[0],this,n,e[2],i[0]),r=0;n._requiresCount&&(r=s.count,s=s.result);var l=this.adaptor.processResponse(t[0],this,n._subQuery,t[2],i[1]),r=0;n._subQuery._requiresCount&&(r=l.count,l=l.result),a(n._subQuery._fKey,n._subQuery._fromTable,s,l,n._subQuery._key),o=!1,d(s,r,e[2])},this),l)):o=!1}return u},_beforeSend:function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,s=this.dataSource.headers,a=0;s&&a<s.length;a++){i=[];for(var r in s[a])i.push(r),e.setRequestHeader(r,s[a][r])}},saveChanges:function(i,s,a,r){a instanceof t.Query&&(r=a,a=null);var n={url:a,key:s||this.dataSource.key},o=this.adaptor.batchRequest(this,i,n,r);if(this.dataSource.offline)return o;var l=e.Deferred();return e.ajax(e.extend({beforeSend:E(this._beforeSend,this),success:A(function(e,t,a,r){l.resolveWith(this,[this.adaptor.processResponse(e,this,null,a,r,i,s)])},this),error:function(e){l.rejectWith(this,[{error:e}])}},o)),l.promise()},insert:function(i,s,a){i=n.replacer(i,!0),s instanceof t.Query&&(a=s,s=null);var r=this.adaptor.insert(this,i,s,a);if(this.dataSource.offline)return r;var o=e.Deferred();return e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:E(this._beforeSend,this),success:A(function(e,i,s,a){try{t.isNullOrUndefined(e)?e=[]:n.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(n.parseJson(e),this,null,s,a),o.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){o.rejectWith(this,[{error:e,dataManager:this}])}},r)),o.promise()},antiForgeryToken:function(){if(t.isNullOrUndefined(e("input[name='_ejRequestVerifyToken']").val())){t.buildTag("input","","",{type:"hidden",name:"_ejRequestVerifyToken",value:t.getGuid()}).appendTo("body")}else e("input[name='_ejRequestVerifyToken']").val(t.getGuid());return t.cookie.set("_ejRequestVerifyToken",e("input[name='_ejRequestVerifyToken']").val()),{name:"_ejRequestVerifyToken",value:e("input[name='_ejRequestVerifyToken']").val()}},remove:function(i,s,a,r){"object"==typeof s&&(s=s[i]),a instanceof t.Query&&(r=a,a=null);var o=this.adaptor.remove(this,i,s,a,r);if(this.dataSource.offline)return o;var l=e.Deferred();return e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:E(this._beforeSend,this),success:A(function(e,i,s,a){try{t.isNullOrUndefined(e)?e=[]:n.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(n.parseJson(e),this,null,s,a),l.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){l.rejectWith(this,[{error:e,dataManager:this}])}},o)),l.promise()},update:function(i,s,a,r){s=n.replacer(s,!0),a instanceof t.Query&&(r=a,a=null);var o=this.adaptor.update(this,i,s,a,r);if(this.dataSource.offline)return o;var l=e.Deferred();return e.ajax(e.extend({contentType:"application/json; charset=utf-8",beforeSend:E(this._beforeSend,this),success:A(function(e,i,s,a){try{t.isNullOrUndefined(e)?e=[]:n.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(n.parseJson(e),this,null,s,a),l.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){l.rejectWith(this,[{error:e,dataManager:this}])}},o)),l.promise()},_getJsonFromElement:function(i){"string"==typeof i&&(i=e(e(i).html())),i=i.jquery?i[0]:i;var s=i.tagName.toLowerCase();return"table"!==s&&M("ej.DataManager : Unsupported htmlElement : "+s),t.parseTable(i)}};var a=function(e,i,s,a,r){var n,o,l={};for(a.result&&(a=a.result),a.GROUPGUID&&M("ej.DataManager: Do not have support Grouping in hierarchy"),n=0;n<a.length;n++){var d=t.getObject(e,a[n]);o=l[d]||(l[d]=[]),o.push(a[n])}for(n=0;n<s.length;n++)s[n][i]=l[t.getObject(r||e,s[n])]},r={accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},n={parseJson:function(e){var t=typeof e;return"string"===t?e=JSON.parse(e,n.jsonReviver):e instanceof Array?n.iterateAndReviveArray(e):"object"===t&&n.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?n.iterateAndReviveJson(e[t]):"string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?e[t]=n.parseJson(e[t]):e[t]=n.jsonReviver("",e[t])},iterateAndReviveJson:function(e){var t
;for(var i in e)i.startsWith("__")||(t=e[i],"object"==typeof t?t instanceof Array?n.iterateAndReviveArray(t):n.iterateAndReviveJson(t):e[i]=n.jsonReviver(i,t))},jsonReviver:function(e,i){var s=i,a=/[\-,\/,\,.,:,]+/;if("string"==typeof i){var r=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(r)return t.parseDateInUTC?n.isValidDate(r[0]):n.replacer(new Date(parseInt(r[1])));if(t.dateParse?/^(?:(\d{4}\-\d\d\-\d\d)|(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?)$/.test(i):/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var o=s.split(/[^0-9]/);/^(\d{4}\-\d\d\-\d\d)$/.test(i)?i=new Date(o[t.dateFormat.split(a).indexOf("yyyy")],o[t.dateFormat.split(a).indexOf("MM")]-1,o[t.dateFormat.split(a).indexOf("dd")]):(i=t.parseDateInUTC?n.isValidDate(i):n.replacer(new Date(i)),isNaN(i)&&(i=n.replacer(new Date(o[0],o[1]-1,o[2],o[3],o[4],o[5]))))}}return i},isValidDate:function(e){var t=e;if("string"==typeof t&&0==t.indexOf("/Date(")&&(e=t.replace(/\d+/,function(e){var t=6e4*new Date(parseInt(e)).getTimezoneOffset(),i=parseInt(e)+t;return n.replacer(new Date(parseInt(i)))})),"string"==typeof e){e=e.replace("/Date(",function(){return""}),e=e.replace(")/",function(){return""});return new Date(e)instanceof Date?new Date(e):e}return e},isJson:function(e){return"string"==typeof e[0]?e:t.parseJSON(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e,i){return t.isPlainObject(e)?n.jsonReplacer(e,i):e instanceof Array?n.arrayReplacer(e):e instanceof Date?n.jsonReplacer({val:e},i).val:e},jsonReplacer:function(e,i){var s;for(var a in e)if((s=e[a])instanceof Date){var r=60*t.serverTimezoneOffset*60*1e3*(t.isNullOrUndefined(i)||!1===i?1:-1);e[a]=new Date(+s+r)}return e},arrayReplacer:function(e){for(var i=0;i<e.length;i++)t.isPlainObject(e[i])?e[i]=n.jsonReplacer(e[i]):e[i]instanceof Date&&(e[i]=n.jsonReplacer({date:e[i]}).date);return e}};t.isJSON=n.isJson,t.parseJSON=n.parseJson,t.dateParse=!0,t.dateFormat="yyyy-MM-dd",t.isGUID=n.isGuid,t.Query=function(e){return this instanceof t.Query?(this.queries=[],this._key="",this._fKey="","string"==typeof e?this._fromTable=e||"":e&&e instanceof Array&&(this._lookup=e),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new t.Query(e)},t.Query.prototype={key:function(e){return"string"==typeof e&&(this._key=e),this},using:function(e){return e instanceof t.DataManager?(this.dataManagar=e,this):M("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(e,i,s,a){return e=e||this.dataManagar,e&&e instanceof t.DataManager?e.executeQuery(this,i,s,a):M("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(e){return e=e||this.dataManagar,e&&e instanceof t.DataManager?e.executeLocal(this):M("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var e=new t.Query;return e.queries=this.queries.slice(0),e._key=this._key,e._isChild=this._isChild,e.dataManagar=this.dataManager,e._fromTable=this._fromTable,e._params=this._params.slice(0),e._expands=this._expands.slice(0),e._sortedColumns=this._sortedColumns.slice(0),e._groupedColumns=this._groupedColumns.slice(0),e._subQuerySelector=this._subQuerySelector,e._subQuery=this._subQuery,e._fKey=this._fKey,e._requiresCount=this._requiresCount,e},from:function(e){return"string"==typeof e&&(this._fromTable=e),this},addParams:function(e,i){return"function"==typeof i||t.isPlainObject(i)?"function"==typeof i&&this._params.push({key:e,fn:i}):this._params.push({key:e,value:i}),this},expand:function(e){return this._expands="string"==typeof e?[].slice.call(arguments,0):e.slice(0),this},where:function(e,i,s,a,r){i=(i||t.FilterOperators.equal).toLowerCase();var n=null;return"string"==typeof e?n=new t.Predicate(e,i,s,a,r):e instanceof t.Predicate?n=e:M("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:n}),this},search:function(e,i,s,a,r){i&&"boolean"!=typeof i?"string"==typeof i&&(i=[i]):(i=[],a=i),"boolean"==typeof s&&(a=s,s=null),s=s||t.FilterOperators.contains,s.length<3&&(s=t.data.operatorSymbols[s]);var n=t.data.fnOperators[s]||t.data.fnOperators.processSymbols(s);return this.queries.push({fn:"onSearch",e:{fieldNames:i,operator:s,searchKey:e,ignoreCase:a,ignoreAccent:r,comparer:n}}),this},sortBy:function(e,i,s){var a,r,n=t.sortOrder.Ascending;if("string"==typeof e&&e.toLowerCase().endsWith(" desc")&&(e=e.replace(/ desc$/i,""),i=t.sortOrder.Descending),e instanceof Array){for(var l=0;l<e.length;l++)this.sortBy(e[l],i,s);return this}if("boolean"==typeof i?i=i?t.sortOrder.Descending:t.sortOrder.Ascending:"function"==typeof i&&(n="custom"),i&&"string"!=typeof i||(n=i?i.toLowerCase():t.sortOrder.Ascending,i=t.pvt.fnSort(i)),s){a=o(this.queries,"onSortBy");for(var l=0;l<a.length;l++)if("string"==typeof(r=a[l].e.fieldName)){if(r===e)return this}else if(r instanceof Array)for(var d=0;d<r.length;d++)if(r[d]===e||e.toLowerCase()===r[d]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:i,direction:n}}),this},sortByDesc:function(e){return this.sortBy(e,t.sortOrder.Descending)},group:function(e,t){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,fn:t}}),this},page:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},range:function(e,t){return"number"==typeof e&&"number"==typeof t||M("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},take:function(e){return"number"!=typeof e&&M("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:e}}),this},skip:function(e){return"number"!=typeof e&&M("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:e}}),this},select:function(e){return"string"==typeof e&&(e=[].slice.call(arguments,0)),e instanceof Array||M("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},hierarchy:function(e,i){return e&&e instanceof t.Query||M("Query() - hierarchy : query must be instance of ej.Query"),"function"==typeof i&&(this._subQuerySelector=i),this._subQuery=e,this},foreignKey:function(e){return"string"==typeof e&&(this._fKey=e),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(e,t){this.queries.push({fn:"onAggregates",e:{field:t,type:e}})}},t.Adaptor=function(e){this.dataSource=e,this.pvt={},this.init.apply(this,[].slice.call(arguments,1))},t.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",antiForgery:"antiForgery"},init:function(){},extend:function(t){var i=function(t){this.dataSource=t,this.options&&(this.options=e.extend({},this.options)),this.init.apply(this,[].slice.call(arguments,0)),this.pvt={}};i.prototype=new this.type,i.prototype.type=i;var s=i.prototype.base={};for(var a in t)i.prototype[a]&&(s[a]=i.prototype[a]);return e.extend(!0,i.prototype,t),i},processQuery:function(e,t){},processResponse:function(e,t,i,s){return e.d?e.d:e},convertToQueryString:function(t,i,s){return e.param(t)},type:t.Adaptor},t.UrlAdaptor=(new t.Adaptor).extend({processQuery:function(e,t,i){var s,a,r=o(t.queries,"onSortBy"),n=o(t.queries,"onGroup"),c=o(t.queries,"onWhere"),u=o(t.queries,"onSearch"),p=o(t.queries,"onAggregates"),m=l(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),g=t._params,f=e.dataSource.url,_=null,v=this.options,b={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]};m.onPage?(s=m.onPage,a=h(s.pageIndex,t),_=h(s.pageSize,t),a=(a-1)*_):m.onRange&&(s=m.onRange,a=s.start,_=s.end-s.start);for(var x=0;x<r.length;x++)s=h(r[x].e.fieldName,t),b.sorted.push(d(this,"onEachSort",{name:s,direction:r[x].e.direction},t));i&&(s=this.getFiltersFrom(i,t))&&b.filters.push(d(this,"onEachWhere",s.toJSON(),t));for(var x=0;x<c.length;x++){b.filters.push(d(this,"onEachWhere",c[x].e.toJSON(),t));for(var y in b.filters[x])P(b[y])&&delete b[y]}for(var x=0;x<u.length;x++)s=u[x].e,b.searches.push(d(this,"onEachSearch",{fields:s.fieldNames,operator:s.operator,key:s.searchKey,ignoreCase:s.ignoreCase},t));for(var x=0;x<n.length;x++)b.grouped.push(h(n[x].e.fieldName,t));for(var x=0;x<p.length;x++)s=p[x].e,b.aggregates.push({type:s.type,field:h(s.field,t)});var w={};w[v.from]=t._fromTable,v.expand&&(w[v.expand]=t._expands),w[v.select]=m.onSelect?d(this,"onSelect",h(m.onSelect.fieldNames,t),t):"",w[v.count]=t._requiresCount?d(this,"onCount",t._requiresCount,t):"",w[v.search]=b.searches.length?d(this,"onSearch",b.searches,t):"",w[v.skip]=m.onSkip?d(this,"onSkip",h(m.onSkip.nos,t),t):"",w[v.take]=m.onTake?d(this,"onTake",h(m.onTake.nos,t),t):"",w[v.antiForgery]=e.dataSource.antiForgery?e.antiForgeryToken().value:"",w[v.where]=b.filters.length||b.searches.length?d(this,"onWhere",b.filters,t):"",w[v.sortBy]=b.sorted.length?d(this,"onSortBy",b.sorted,t):"",w[v.group]=b.grouped.length?d(this,"onGroup",b.grouped,t):"",w[v.aggregates]=b.aggregates.length?d(this,"onAggregates",b.aggregates,t):"",w.param=[],d(this,"addParams",{dm:e,query:t,params:g,reqParams:w});for(var y in w)(P(w[y])||""===w[y]||0===w[y].length||"params"===y)&&delete w[y];v.skip in w&&v.take in w||null===_||(w[v.skip]=d(this,"onSkip",a,t),w[v.take]=d(this,"onTake",_,t));var C=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(w),url:f,ejPvtData:C,type:"POST",contentType:"application/json; charset=utf-8"}:(s=this.convertToQueryString(w,t,e),s=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+s,{type:"GET",url:s.length?f.replace(/\/*$/,s):f,ejPvtData:C})},convertToQueryString:function(t,i,s){return s.dataSource.url&&-1!==s.dataSource.url.indexOf("?")?e.param(t):"?"+e.param(t)},processResponse:function(e,i,s,a,r,n){var o=r.ejPvtData||{},l=e.groupDs;if(a&&a.getResponseHeader("Content-Type")&&-1!=a.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return s._requiresCount?{result:[],count:0}:[];var d=JSON.parse(r.data);if(d&&"batch"===d.action&&e.added)return n.added=e.added,n;if(e.d&&(e=e.d),o&&o.aggregates&&o.aggregates.length){var h,c=o.aggregates,u={},p={};"count"in e&&(u.count=e.count),e.result&&(u.result=e.result),e.aggregate&&(e=e.aggregate);for(var m=0;m<c.length;m++)(h=t.aggregates[c[m].type])&&(p[c[m].field+" - "+c[m].type]=h(e,c[m].field));u.aggregates=p,e=u}if(o&&o.groups&&o.groups.length){var g=o.groups,u={};"count"in e&&(u.count=e.count),e.aggregates&&(u.aggregates=e.aggregates),e.result&&(e=e.result);for(var m=0;m<g.length;m++){var f=C(g[m],s.queries);t.isNullOrUndefined(l)||(l=t.group(l,g[m],null,f)),e=t.group(e,g[m],o.aggregates,f,null,l)}return void 0!=u.count?u.result=e:u=e,u}return e},onGroup:function(e){this.pvt.groups=e},onAggregates:function(e){this.pvt.aggregates=e},batchRequest:function(e,t,i,s){var a={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:a}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a)}},beforeSend:function(e,t){},insert:function(e,t,i,s){var a={value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:a}),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(a)}},remove:function(e,t,i,s,a){var r={key:i,keyColumn:t,table:s,action:"remove",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return a&&this.addParams({dm:e,query:a,params:a._params,reqParams:r}),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(r)}},update:function(e,t,i,s,a){var r={value:i,action:"update",keyColumn:t,key:i[t],table:s,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return a&&this.addParams({dm:e,query:a,params:a._params,reqParams:r}),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(r)}},getFiltersFrom:function(e,i){e instanceof Array&&e.length||M("ej.SubQuery: Array of key values required");var s,a=i._fKey,r=a,n=i._key,o=[],l="object"!=typeof e[0];"object"!=typeof e[0]&&(r=null);for(var d=0;d<e.length;d++)s=l?e[d]:t.pvt.getObject(n||r,e[d]),o.push(new t.Predicate(a,"==",s));return t.Predicate.or(o)},addParams:function(e){var t=e.dm,i=e.query,s=e.params,a=e.reqParams;a.params={};for(var r,n=0;r=s[n];n++)a[r.key]&&M("ej.Query: Custom Param is conflicting other request arguments"),a[r.key]=r.value,r.fn&&(a[r.key]=r.fn.call(i,r.key,i,t)),a.params[r.key]=a[r.key]}}),t.WebMethodAdaptor=(new t.UrlAdaptor).extend({processQuery:function(e,i,s){var a=t.UrlAdaptor.prototype.processQuery(e,i,s),r=t.parseJSON(a.data),n={};return n.value=r,d(this,"addParams",{dm:e,query:i,params:i._params,reqParams:n}),{data:JSON.stringify(n),url:a.url,ejPvtData:a.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(e){var t=e.dm,i=e.query,s=e.params,a=e.reqParams;a.params={};for(var r,n=0;r=s[n];n++){a[r.key]&&M("ej.Query: Custom Param is conflicting other request arguments");var o=r.key,l=r.value;r.fn&&(l=r.fn.call(i,r.key,i,t)),a[o]=l,a.params[o]=a[o]}}}),t.CacheAdaptor=(new t.UrlAdaptor).extend({init:function(e,i,s){t.isNullOrUndefined(e)||(this.cacheAdaptor=e),this.pageSize=s,this.guidId=t.getGuid("cacheAdaptor");var a={keys:[],results:[]};window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify(a));var r=this.guidId;t.isNullOrUndefined(i)||setInterval(function(){for(var e=t.parseJSON(window.localStorage.getItem(r)),s=[],a=0;a<e.results.length;a++)e.results[a].timeStamp=new Date-new Date(e.results[a].timeStamp),new Date-new Date(e.results[a].timeStamp)>i&&s.push(a);for(var a=0;a<s.length;a++)e.results.splice(s[a],1),e.keys.splice(s[a],1);window.localStorage.removeItem(r),window.localStorage.setItem(r,JSON.stringify(e))},i)},generateKey:function(e,t){var i=o(t.queries,"onSortBy"),s=o(t.queries,"onGroup"),a=o(t.queries,"onWhere"),r=o(t.queries,"onSearch"),n=(o(t.queries,"onPage"),l(t.queries,["onSelect","onPage","onSkip","onTake","onRange"])),d=(t._params,e);n.onPage&&(d+=n.onPage.pageIndex),i.forEach(function(e){d+=e.e.direction+e.e.fieldName}),s.forEach(function(e){d+=e.e.fieldName}),r.forEach(function(e){d+=e.e.searchKey});for(var h=0;h<a.length;h++){var c=a[h];if(c.e.isComplex){var u=t.clone();u.queries=[];for(var p=0;p<c.e.predicates.length;p++)u.queries.push({fn:"onWhere",e:c.e.predicates[p],filter:t.queries.filter});d+=c.e.condition+this.generateKey(e,u)}else d+=c.e.field+c.e.operator+c.e.value}return d},processQuery:function(e,i,s){var a,r=this.generateKey(e.dataSource.url,i);window.localStorage&&(a=t.parseJSON(window.localStorage.getItem(this.guidId)));var n=a?a.results[a.keys.indexOf(r)]:null;return null==n||this._crudAction||this._insertAction?(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):n},processResponse:function(i,s,a,r,n,o){if(this._insertAction||n&&this.cacheAdaptor.options.batch&&n.url.endsWith(this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase())return this.cacheAdaptor.processResponse(i,s,a,r,n,o);var i=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0)),l=this.generateKey(s.dataSource.url,a),d={};window.localStorage&&(d=t.parseJSON(window.localStorage.getItem(this.guidId)));var h=e.inArray(l,d.keys);for(-1!=h&&(d.results.splice(h,1),d.keys.splice(h,1)),d.results[d.keys.push(l)-1]={keys:l,result:i.result,timeStamp:new Date,count:i.count};d.results.length>this.pageSize;)d.results.splice(0,1),d.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(d)),i},update:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.update(e,t,i,s)},insert:function(e,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(e,t,i)},remove:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},batchRequest:function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}});var o=function(e,t){return e.filter(function(e){return e.fn===t})||[]},l=function(e,t){for(var i=e.filter(function(e){return-1!==t.indexOf(e.fn)}),s={},a=0;a<i.length;a++)s[i[a].fn]||(s[i[a].fn]=i[a].e);return s},d=function(e,t,i,s){if(e[t]){var a=e[t](i,s);P(a)||(i=a)}return i};t.ODataAdaptor=(new t.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(e,t){return e.isComplex?this.onComplexPredicate(e,t):this.onPredicate(e,t)},_typeStringQuery:function(e,i,s,a,r){return-1!=s.indexOf("'")&&(s=s.replace(new RegExp(/'/g),"''")),/[ !@@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(s)&&(s=encodeURIComponent(s)),s="'"+s+"'",i&&(a="cast("+a+", 'Edm.String')"),t.isGUID(s)&&(r="guid"),e.ignoreCase&&(r||(a="tolower("+a+")"),s=s.toLowerCase()),{val:s,guid:r,field:a}},onPredicate:function(e,i,s){var a,r,o="",l=e.value,d=typeof l,h=this._p(e.field);if(l instanceof Date&&(l="datetime'"+n.replacer(l).toJSON()+"'"),"string"===d){var c=this._typeStringQuery(e,s,l,h,r);l=c.val,h=c.field,r=c.guid}if(a=t.data.odBiOperator[e.operator],""!=e.anyCondition&&a)return o+=l.table,o+="/"+e.anyCondition,o+="(d:d/",o+=h,o+=a,o+=l.value,o+=")";if("in"==e.operator||"notin"==e.operator){o+="(";for(var u=0;u<l.length;u++){if(l[u]instanceof Date&&(l[u]="datetime'"+n.replacer(l[u]).toJSON()+"'"),"string"==typeof l[u]){var c=this._typeStringQuery(e,s,l[u],h,r);l[u]=c.val,h=c.field,r=c.guid}o+=h,o+=a,o+=l[u],u!=l.length-1&&(o+="in"==e.operator?" or ":" and ")}return o+=")"}if(a)return this.onOperation(o,a,h,l,r);if(!(a=t.data.odUniOperator[e.operator])||"string"!==d)return"";if("substringof"===a){var p=l;l=h,h=p}if(o+=a+"(",o+=h+",",r&&(o+=r),o+=l+")","notcontains"==e.operator&&(o+=" eq false"),""!=e.anyCondition&&a){var m;return m+=l.table,m+="/"+e.anyCondition,m+="(d:d/",o+=o,m+=")"}return o},onOperation:function(e,t,i,s,a){return e+=i,e+=t,a&&(e+=a),e+s},onComplexPredicate:function(e,t){for(var i=[],s=0;s<e.predicates.length;s++)i.push("("+this.onEachWhere(e.predicates[s],t)+")");return i.join(" "+e.condition+" ")},onWhere:function(e){return this.pvt.searches&&e.push(this.onEachWhere(this.pvt.searches,null,!0)),e.join(" and ")},onEachSearch:function(e){0===e.fields.length&&M("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.searches||[],s=0;s<e.fields.length;s++)i.push(new t.Predicate(e.fields[s],e.operator,e.key,e.ignoreCase));this.pvt.searches=i},onSearch:function(e){return this.pvt.searches=t.Predicate.or(this.pvt.searches),""},onEachSort:function(e){var t=[];if(e.name instanceof Array)for(var i=0;i<e.name.length;i++)t.push(this._p(e.name[i]));else t.push(this._p(e.name)+("descending"===e.direction?" desc":""));return t.join(",")},onSortBy:function(e){return e.reverse().join(",")},onGroup:function(e){return this.pvt.groups=e,""},onSelect:function(e){for(var t=0;t<e.length;t++)e[t]=this._p(e[t]);return e.join(",")},onAggregates:function(e){return this.pvt.aggregates=e,""},onCount:function(e){return!0===e?"allpages":""},beforeSend:function(e,t,i){i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()&&(t.setRequestHeader("Accept",r.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")),e.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(i,s,a,r,o,l){if(!t.isNullOrUndefined(i.d)){var d=a&&a._requiresCount?i.d.results:i.d;if(!t.isNullOrUndefined(d))for(var h=0;h<d.length;h++)!t.isNullOrUndefined(d[h].__metadata)&&delete d[h].__metadata}var c=o&&o.ejPvtData;if(r&&r.getResponseHeader("Content-Type")&&-1!=r.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return a._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){var u,p,m=r.getResponseHeader("Content-Type");if(m=m.substring(m.indexOf("=batchresponse")+1),i=i.split(m),i.length<2)return;i=i[1];var g=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i);i.replace(g[0],"");var f=g[1];i=i.split(f);for(var h=i.length;h>-1;h--)/\bContent-ID:/i.test(i[h])&&/\bHTTP.+201/.test(i[h])&&(u=parseInt(/\bContent-ID: (\d+)/i.exec(i[h])[1]),l.added[u]&&(p=n.parseJson(/^\{.+\}/m.exec(i[h])[0]),e.extend(l.added[u],this.processResponse(p))));return l}var _=r&&r.getResponseHeader("DataServiceVersion"),v=null,b={};if(_=_&&parseInt(_,10)||2,a&&a._requiresCount&&((i.__count||i["odata.count"])&&(v=i.__count||i["odata.count"]),i.d&&(i=i.d),(i.__count||i["odata.count"])&&(v=i.__count||i["odata.count"])),3===_&&i.value&&(i=i.value),i.d&&(i=i.d),_<3&&i.results&&(i=i.results),c&&c.aggregates&&c.aggregates.length){for(var x,y=c.aggregates,w={},h=0;h<y.length;h++)(x=t.aggregates[y[h].type])&&(w[y[h].field+" - "+y[h].type]=x(i,y[h].field));b=w}if(c&&c.groups&&c.groups.length)for(var S=c.groups,h=0;h<S.length;h++){var T=C(S[h],a.queries);i=t.group(i,S[h],c.aggregates,T)}return P(v)?i:{result:i,count:v,aggregates:b}},convertToQueryString:function(e,t,i){var s=[],a=e.table||"";delete e.table,i.dataSource.requiresFormat&&(e.$format="json");for(var r in e)s.push(r+"="+e[r]);return s=s.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!a?s:s.length?a+"?"+s:a||""},insert:function(e,t,i){return{url:e.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(e,i,s,a){return"string"==typeof s?{type:"DELETE",url:t.isGUID(s)?e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s+")":e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"('"+s+"')"}:{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s+")"}},update:function(e,i,s,a){var r;return r="string"==typeof s[i]?t.isGUID(s[i])?e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s[i]+")":e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"('"+s[i]+"')":e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s[i]+")",{type:"PUT",url:r,data:JSON.stringify(s),accept:this.options.accept}},batchRequest:function(e,i,s){var a=s.guid=t.getGuid(r.batchPre),n=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),o={url:s.url,key:s.key,cid:1,cSet:t.getGuid(r.changeSet)},l="--"+a+"\n";return l+="Content-Type: multipart/mixed; boundary="+o.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(i.added,o),l+=this.generateUpdateRequest(i.changed,o),l+=this.generateDeleteRequest(i.deleted,o),l+=o.cSet+"--\n",l+="--"+a+"--",{type:"POST",url:n,contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:l}},generateDeleteRequest:function(e,t){if(!e)return"";for(var i,s="",a=0;a<e.length;a++)s+="\n"+t.cSet+"\n",s+=r.changeSetContent+"\n\n",s+="DELETE ",i="string"==typeof e[a][t.key]?"'"+e[a][t.key]+"'":e[a][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+r.accept+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=r.batchChangeSetContentType+"\n";return s+"\n"},generateInsertRequest:function(e,t){if(!e)return"";for(var i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=r.changeSetContent+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+r.accept+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=r.batchChangeSetContentType+"\n\n",i+=JSON.stringify(e[s])+"\n";return i},generateUpdateRequest:function(e,t){if(!e)return"";for(var i,s="",a=0;a<e.length;a++)s+="\n"+t.cSet+"\n",s+=r.changeSetContent+"\n\n",s+="PUT ",i="string"==typeof e[a][t.key]?"'"+e[a][t.key]+"'":e[a][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+r.accept+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=r.batchChangeSetContentType+"\n\n",s+=JSON.stringify(e[a])+"\n\n";return s},_p:function(e){return e.replace(/\./g,"/")}}),t.ODataV4Adaptor=(new t.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(e){return!0===e?"true":""},onPredicate:function(e,i,s){var a="",r=e.value,n=r instanceof Date;return t.data.odUniOperator.contains="contains",a=t.ODataAdaptor.prototype.onPredicate.call(this,e,i,s),t.data.odUniOperator.contains="substringof",n&&(a=a.replace(/datetime'(.*)'$/,"$1")),a},onOperation:function(e,t,i,s,a){return a?(e+="("+i,e+=t,e+=s.replace(/["']/g,"")+")"):(e+=i,e+=t,e+=s),e},onEachSearch:function(e){var t=this.pvt.search||[];t.push(e.key),this.pvt.search=t},onSearch:function(e){return this.pvt.search.join(" OR ")},beforeSend:function(e,t,i){},processQuery:function(e,i){for(var s=/\/[\d*\/]*/g,a="",r=i._expands.length-1;r>0;r--)if(a.indexOf(i._expands[r])>=0)i._expands.pop();else if(s.test(i._expands[r])){a=i._expands.pop();for(var n=a.replace(s,"($expand="),o=0;o<a.split(s).length-1;o++)n+=")";i._expands.unshift(n),r++}return t.ODataAdaptor.prototype.processQuery.apply(this,[e,i])},processResponse:function(i,s,a,r,o,l){var d=o&&o.ejPvtData;if(r&&r.getResponseHeader("Content-Type")&&-1!=r.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return a._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){var h,c,u=r.getResponseHeader("Content-Type");if(u=u.substring(u.indexOf("=batchresponse")+1),i=i.split(u),i.length<2)return;i=i[1];var p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i);i.replace(p[0],"");var m=p[1];i=i.split(m);for(var g=i.length;g>-1;g--)/\bContent-ID:/i.test(i[g])&&/\bHTTP.+201/.test(i[g])&&(h=parseInt(/\bContent-ID: (\d+)/i.exec(i[g])[1]),l.added[h]&&(c=n.parseJson(/^\{.+\}/m.exec(i[g])[0]),e.extend(l.added[h],this.processResponse(c))));return l}var f=null,_={};if(a&&a._requiresCount&&"@odata.count"in i&&(f=i["@odata.count"]),i=t.isNullOrUndefined(i.value)?i:i.value,d&&d.aggregates&&d.aggregates.length){for(var v,b=d.aggregates,x={},g=0;g<b.length;g++)(v=t.aggregates[b[g].type])&&(x[b[g].field+" - "+b[g].type]=v(i,b[g].field));_=x}if(d&&d.groups&&d.groups.length)for(var y=d.groups,g=0;g<y.length;g++){var w=C(y[g],a.queries);i=t.group(i,y[g],d.aggregates,w)}return P(f)?i:{result:i,count:f,aggregates:_}}}),t.JsonAdaptor=(new t.Adaptor).extend({processQuery:function(e,t){for(var i,s,a=e.dataSource.json.slice(0),r=a.length,n=!0,o={},l=0;l<t.queries.length;l++)s=t.queries[l],i=this[s.fn].call(this,a,s.e,t),"onAggregates"==s.fn?o[s.e.field+" - "+s.e.type]=i:a=void 0!==i?i:a,"onPage"!==s.fn&&"onSkip"!==s.fn&&"onTake"!==s.fn&&"onRange"!==s.fn||(n=!1),n&&(r=a.length);return t._requiresCount&&(a={result:a,count:r,aggregates:o}),a},batchRequest:function(e,t,i){var s;for(s=0;s<t.added.length;s++)this.insert(e,t.added[s]);for(s=0;s<t.changed.length;s++)this.update(e,i.key,t.changed[s]);for(s=0;s<t.deleted.length;s++)this.remove(e,i.key,t.deleted[s]);return t},onWhere:function(e,t){return e?e.filter(function(e){return t.validate(e)}):e},onAggregates:function(e,i){var s=t.aggregates[i.type];return e&&s&&0!=e.length?s(e,i.field):null},onSearch:function(e,i){return e&&e.length?(0===i.fieldNames.length&&t.pvt.getFieldList(e[0],i.fieldNames),e.filter(function(e){for(var s=0;s<i.fieldNames.length;s++)if(i.comparer.call(e,t.pvt.getObject(i.fieldNames[s],e),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):e},onSortBy:function(e,i,s){if(!e)return e;var a,r=h(i.fieldName,s);if(!r)return e.sort(i.comparer);if(r instanceof Array){r=r.slice(0);for(var n=r.length-1;n>=0;n--)r[n]&&(a=i.comparer,r[n].endsWith(" desc")&&(a=t.pvt.fnSort(t.sortOrder.Descending),r[n]=r[n].replace(" desc","")),e=w(e,r[n],a,[]));return e}return w(e,r,i.comparer,s?s.queries:[])},onGroup:function(e,i,s){if(!e)return e;var a=o(s.queries,"onAggregates"),r=[];if(a.length)for(var n,l=0;l<a.length;l++)n=a[l].e,r.push({type:n.type,field:h(n.field,s)});var d=C(i.fieldName,s.queries);return t.group(e,h(i.fieldName,s),r,d)},onPage:function(e,t,i){var s=h(t.pageSize,i),a=(h(t.pageIndex,i)-1)*s,r=a+s;return e?e.slice(a,r):e},onRange:function(e,t){return e?e.slice(h(t.start),h(t.end)):e},onTake:function(e,t){return e?e.slice(0,h(t.nos)):e},onSkip:function(e,t){return e?e.slice(h(t.nos)):e},onSelect:function(e,i){return e?t.select(e,h(i.fieldNames)):e},insert:function(e,t){return e.dataSource.json.push(t)},remove:function(e,i,s,a){var r,n=e.dataSource.json;for("object"==typeof s&&(s=t.getObject(i,s)),r=0;r<n.length&&t.getObject(i,n[r])!==s;r++);return r!==n.length?n.splice(r,1):null},update:function(i,s,a,r){var n,o=i.dataSource.json,l=t.getObject(s,a);for(n=0;n<o.length&&t.getObject(s,o[n])!==l;n++);return n<o.length?e.extend(o[n],a):null}}),t.ForeignKeyAdaptor=function(i,s){var a=(new t[s||"JsonAdaptor"]).extend({init:function(){this.foreignData=[],this.key=[],this.adaptorType=s,this.value=[],this.fValue=[],this.keyField=[];for(var e=i,a=0;a<e.length;a++)this.foreignData[a]=e[a].dataSource,this.key[a]=e[a].foreignKeyField,this.fValue[a]=t.isNullOrUndefined(e[a].field)?e[a].foreignKeyValue:e[a].field+"_"+e[a].foreignKeyValue,this.value[a]=e[a].foreignKeyValue,this.keyField[a]=e[a].field||e[a].foreignKeyField,this.initial=!0},processQuery:function(e,i){var s=e.dataSource.json;if(this.initial){for(var a=0;a<s.length;a++)for(var r=this,n=0;n<this.foreignData.length;n++)this.foreignData[n].filter(function(e){t.getObject(r.key[n],e)==t.getObject(r.keyField[n],s[a])&&(s[a][r.fValue[n]]=t.getObject(r.value[n],e))});this.initial=!1}return this.base.processQuery.apply(this,[e,i])},setValue:function(i){for(var s=0;s<this.foreignData.length;s++){var a=this,r=i[this.fValue[s]];"string"!=typeof r||isNaN(r)||(r=t.parseFloat(r));var n=e.grep(a.foreignData[s],function(e){return e[a.value[s]]==r})[0];t.isNullOrUndefined(n)&&(n=e.grep(a.foreignData[s],function(e){return e[a.key[s]]==r})[0],void 0!=t.getObject(this.value[s],n)&&t.createObject(a.value[s],t.getObject(this.value[s],n),i)),void 0!=t.getObject(this.value[s],n)&&t.createObject(this.keyField[s],t.getObject(this.key[s],n),i)}},insert:function(e,t,i){return this.setValue(t),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}},update:function(e,i,s,a){return this.setValue(s),t.JsonAdaptor.prototype.update(e,i,s,a),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:s,action:"update",keyColumn:i,key:s[i],table:a,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}}});return e.extend(this,new a),this},
t.remoteSaveAdaptor=(new t.JsonAdaptor).extend({beforeSend:t.UrlAdaptor.prototype.beforeSend,insert:t.UrlAdaptor.prototype.insert,update:t.UrlAdaptor.prototype.update,remove:t.UrlAdaptor.prototype.remove,addParams:t.UrlAdaptor.prototype.addParams,batchRequest:function(e,t,i,s){var a={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:a}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a)}},processResponse:function(e,i,s,a,r,n,o){if(t.isNullOrUndefined(n))return e.d?e.d:e;e.d&&(e=e.d),e.added&&(n.added=t.parseJSON(e.added)),e.changed&&(n.changed=t.parseJSON(e.changed)),e.deleted&&(n.deleted=t.parseJSON(e.deleted));var l;for(l=0;l<n.added.length;l++)t.JsonAdaptor.prototype.insert(i,n.added[l]);for(l=0;l<n.changed.length;l++)t.JsonAdaptor.prototype.update(i,o,n.changed[l]);for(l=0;l<n.deleted.length;l++)t.JsonAdaptor.prototype.remove(i,o,n.deleted[l]);return e}}),t.WebApiAdaptor=(new t.ODataAdaptor).extend({insert:function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},remove:function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(e,t,i,s){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},batchRequest:function(i,s,a){var n=a.guid=t.getGuid(r.batchPre),o=[];return e.each(s.added,function(e,t){o.push("--"+n),o.push("Content-Type: application/http; msgtype=request",""),o.push("POST "+i.dataSource.insertUrl+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",t?JSON.stringify(t):"")}),e.each(s.changed,function(e,t){o.push("--"+n),o.push("Content-Type: application/http; msgtype=request",""),o.push("PUT "+i.dataSource.updateUrl+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",t?JSON.stringify(t):"")}),e.each(s.deleted,function(e,t){o.push("--"+n),o.push("Content-Type: application/http; msgtype=request",""),o.push("DELETE "+i.dataSource.removeUrl+"/"+t[a.key]+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",t?JSON.stringify(t):"")}),o.push("--"+n+"--",""),{type:"POST",url:i.dataSource.batchUrl||i.dataSource.crudUrl||i.dataSource.url,data:o.join("\r\n"),contentType:'multipart/mixed; boundary="'+n+'"'}},processResponse:function(e,i,s,a,r,n){var o=r&&r.ejPvtData;if(r&&"post"!=r.type.toLowerCase()){var l=a&&a.getResponseHeader("DataServiceVersion"),d=null,h={};if(l=l&&parseInt(l,10)||2,s&&s._requiresCount&&(P(e.Count)||(d=e.Count)),l<3&&e.Items&&(e=e.Items),o&&o.aggregates&&o.aggregates.length){for(var c,u=o.aggregates,p={},m=0;m<u.length;m++)(c=t.aggregates[u[m].type])&&(p[u[m].field+" - "+u[m].type]=c(e,u[m].field));h=p}if(o&&o.groups&&o.groups.length)for(var g=o.groups,m=0;m<g.length;m++){var f=C(g[m],s.queries);e=t.group(e,g[m],o.aggregates,f)}return P(d)?e:{result:e,count:d,aggregates:h}}}});var h=function(e,t){return"function"==typeof e?e.call(t||{}):e};t.TableModel=function(i,s,a,r){if(!O(this,t.TableModel))return new t.TableModel(s);O(s,Array)||M("ej.TableModel - Json Array is required");for(var n,o=[],l=E(g,this),d=0;d<s.length;d++)n=new t.Model(s[d],this),n.state="unchanged",n.on("stateChange",l),r&&n.computes(r),o.push(n);return this.name=i||"table1",this.rows=t.NotifierArray(o),this._deleted=[],this._events=e({}),this.dataManager=a,this._isDirty=!1,this},t.TableModel.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},setDataManager:function(e){this.dataManagar=e},saveChanges:function(){if(this.dataManager&&O(this.dataManager,t.DataManager)||M("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()){var e=this.dataManager.saveChanges(this.getChanges(),this.key,this.name);e.done(E(function(e){for(var t=this.toArray(),i=0;i<t.length;i++)"added"===t.state&&t.set(this.key,e.added.filter(function(e){return e[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})},this)),e.fail(E(function(e){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:e})},this)),this._isDirty=!1}},rejectChanges:function(){for(var e=this.toArray(),t=0;t<e.length;t++)e[t].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(e){var i=new t.Model(e);i._isDirty=this._isDirty=!0,this.rows.push(i),this._events.triggerHandler({type:"insert",model:i,table:this})},update:function(e){this.key||M("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=e,s=this.key,a=i[s];t=this.rows.array.filter(function(e){return e.get(s)===a}),t=t[0];for(var r in i)t.set(r,i[r]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:t,table:this})},remove:function(e){this.key||M("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=this.key,s=-1;e&&"object"==typeof e&&(e=void 0!==e[i]?e[i]:e.get(i));for(var a=0;a<this.rows.length();a++)if(this.rows.array[a].get(i)===e){s=a;break}s>-1&&(t=this.rows.removeAt(s),t.markDelete(),this._deleted.push({model:t,position:s}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:t,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var e={added:[],changed:[]},i=this.toArray(),s=0;s<i.length;s++)e[i[s].state]&&e[i[s].state].push(i[s].json);return e.deleted=t.select(this._deleted,["model"]),e},toArray:function(){return this.rows.toArray()},setDirty:function(e,t){this._isDirty!==!!e&&(this._isDirty=!!e,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(e){return this.rows.array[e]},length:function(){return this.rows.array.length},bindTo:function(t){var i,s=c,a=e(t.html()),r=this.toArray();e.inArray(t.prop("tagName").toLowerCase(),["table","tbody"])&&(s=u),s.insertBefore(t),t.detach().empty();for(var n=0;n<r.length;n++)i=a.clone(),r[n].bindTo(i),t.append(i);t.insertAfter(s),s.remove()}};var c=i?e(document.createElement("div")):{},u=i?e(document.createElement("tr")):{};t.Model=function(i,s,a){"string"==typeof s&&(a=s,s=null),this.$id=L("m"),this.json=i,this.table=s instanceof t.TableModel?s:null,this.name=a||this.table&&this.table.name,this.dataManager=s instanceof t.DataManager?s:s.dataManagar,this.actual={},this._events=e({}),this.isDirty=!1,this.state="added",this._props=[],this._computeEls={},this._fields={},this._attrEls={},this._updates={},this.computed={}},t.Model.prototype={computes:function(t){e.extend(this.computed,t)},on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},set:function(e,t){var i,s=this.json,a=e;e=e.split(".");for(var r=0;r<e.length-1;r++)e=e[0],s=s[e[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),i=s[e],void 0!==this.actual[e]||e in this.actual||(this.actual[e]=t),s[e]=t,this._updateValues(e,t),this._events.triggerHandler({type:a,current:t,previous:i,model:this})},get:function(e){return t.pvt.getObject(e,this.json)},revert:function(e){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,e?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(i,s){return i=i||this.dataManagar,s=s||i.dataSource.key,i||M("ej.Model - DataManager is required to commit the changes"),"added"===this.state?i.insert(this.json,this.name).done(t.proxy(function(t){e.extend(this.json,t.record)},this)):"changed"===this.state?i.update(s,this.json,this.name):"deleted"===this.state?i.remove(s,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(t,i){if(this.state!==t){if("added"===this.state){if("deleted"!==t)return;t="unchanged"}var s=t;i=i||{},this.state=t,this._events.triggerHandler(e.extend({type:"stateChange",current:t,previous:s,model:this},i))}},properties:function(){if(this._props.length)return this._props;for(var e in this.json)this._props.push(e),this._updates[e]={read:[],input:[]};return this._props},bindTo:function(t){var i,s,a=e(t),r=a.find("[ej-observe], [ej-computed], [ej-prop]"),n=r.length;a.data("ejModel",this);for(var o={fields:[],props:[],computes:[]},l=0;l<n;l++)i=r.eq(l),s=i.attr("ej-prop"),s&&this._processAttrib(s,i,o),s=i.attr("ej-observe"),s&&-1!==this._props.indexOf(s)?this._processField(i,s,o):(s=i.attr("ej-computed"))&&this._processComputed(s,i,o);a.data("ejModelBinding"+this.$id,o)},unbind:function(t){var i,s={props:this._attrEls,computes:this._computeEls},a=!1;t&&(s=e(t).removeData("ejModel").data("ejModelBinding"+this.$id)||s,a=!0);for(var r in this.computed)i=s.computes[r],r=this.computed[r],i&&r.deps&&(this.off(r.deps.join(" "),i.handle),a&&delete this._computeEls[r]);a||(this._computeEls={});for(var r in s.props)(i=s.props[r])&&(this.off(i.deps.join(" "),i.handle),delete s.props[r],a&&delete this._attrEls[r]);if(a||(this._attrEls={}),s.fields&&s.fields.length)for(var n,o,l,d=s.fields.length,h=0;h<d;h++)n=s.fields[h],e(n).off("change",null,this._changeHandler),l=-1!==this.formElements.indexOf(n.tagName.toLowerCase())?"input":"read",-1!==(o=this._updates[l].indexOf(n))&&this._updates[l].splice(o,1)},_processComputed:function(e,t,i){if(e){var s,a,r=m(e),n=-1!==this.formElements.indexOf(t[0].tagName.toLowerCase())?"val":"html";this.computed[e]&&this.computed[r]||(this.computed[r]={value:new Function("var e = this; return "+e),deps:this._generateDeps(e)},e=r),s=this.computed[e],s.get||(s.get=function(){s.value.call(this.json)}),a=s.deps,s=s.value,this._updateDeps(a),this._updateElement(t,n,s),s={el:t,handle:E(this._computeHandle,this,{value:e,type:n})},this._computeEls[e]=s,i.computes[e]=s,this.on(a.join(" "),s.handle)}},_computeHandle:function(e){var t=this._computeEls[e.value];t&&this.computed[e.value]&&this._updateElement(t.el,e.type,this.computed[e.value].value)},_updateElement:function(t,i,s){t[i](s.call(e.extend({},this.json,this.computed)))},_updateDeps:function(e){for(var i=0;i<e.length;i++)!(e[i]in this.json)&&e[i]in this.computed&&t.merge(e,this.computed[e[i]].deps)},_generateDeps:function(e){for(var t,i=e.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),s=[],a=0;a<i.length;a++)i[a].startsWith("#ej.#")&&(t=i[a].replace("#ej.#","").split(" ")[0])&&-1!==this._props.indexOf(t)&&s.push(t);return s},_processAttrib:function(e,t,i){var s,a,r={};e=e.replace(/^ +| +$/g,"").split(";");for(var n=0;n<e.length;n++)e[n]=e[n].split(":"),e[n].length<2||(s=e[n][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""),r[s]=e[n][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));e=r;var o=[];for(s in e)o.push(e[s]);this._updateDeps(o),this._updateProps(t,e),r=L("emak"),a={el:t,handle:E(this._attrHandle,this,r),value:e,deps:o},t.prop("ejmodelattrkey",r),i.props[r]=a,this._attrEls[r]=a,this.on(o.join(" "),a.handle)},_attrHandle:function(e){var t=this._attrEls[e];t&&this._updateProps(t.el,t.value)},_updateProps:function(t,i){var s,a=this.json,r=this.computed;for(var n in i)s=i[n],s in a?s=a[s]:s in r&&(s=r[s])&&(s=s.value.call(e.extend({},this.json,r))),P(s)||t.prop(n,s)},_updateValues:function(e,t){var i=this._updates[e];i&&(i.read||i.input)&&(this._ensureItems(i.read,"html",t),this._ensureItems(i.input,"val",t))},_ensureItems:function(t,i,s){if(t)for(var a=t.length-1;a>-1;a--)t[a].offsetParent?e(t[a])[i](s):t.splice(a,1)},_changeHandler:function(t){t.data.self.set(t.data.prop,e(this).val())},_processField:function(e,t,i){var s={self:this,prop:t},a=this.get(t);return i.fields.push(e[0]),-1===this.formElements.indexOf(e[0].tagName.toLowerCase())?(e.html(a),this._updates[t].read.push(e[0])):(e.val(a).off("change",null,this._changeHandler).on("change",null,s,this._changeHandler),this._updates[t].input.push(e[0]))},formElements:["input","select","textarea"]};var p=/[^\w]+/g,m=function(e){return e.replace(p,"_")},g=function(e){this.setDirty(!0,e.model)};t.Predicate=function(e,i,s,a,r){if(!(this instanceof t.Predicate))return new t.Predicate(e,i,s,a,r);if(this.ignoreAccent=!1,"string"==typeof e){var n="";-1!=i.toLowerCase().indexOf(" any")?(i=i.replace(" any",""),n="any"):-1!=i.toLowerCase().indexOf(" all")&&(i=i.replace(" all",""),n="all"),this.field=e,this.operator=i,this.value=s,this.ignoreCase=a,this.ignoreAccent=r,this.isComplex=!1,this.anyCondition=n,this._comparer=t.data.fnOperators.processOperator(""!=n?n:this.operator)}else(e instanceof t.Predicate&&s instanceof t.Predicate||s instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[e],s instanceof Array?[].push.apply(this.predicates,s):this.predicates.push(s));return this},t.Predicate.and=function(){return f._combinePredicates([].slice.call(arguments,0),"and")},t.Predicate.or=function(){return f._combinePredicates([].slice.call(arguments,0),"or")},t.Predicate.fromJSON=function(e){if(O(e,Array)){for(var t=[],i=0,s=e.length;i<s;i++)t.push(f._fromJSON(e[i]));return t}return f._fromJSON(e)};var f={_combinePredicates:function(e,i){if(e.length){if(1===e.length){if(!O(e[0],Array))return e[0];e=e[0]}return new t.Predicate(e[0],i,e.slice(1))}},_combine:function(e,i,s,a,r,n,o){return i instanceof t.Predicate?t.Predicate[r](e,i):"string"==typeof i?t.Predicate[r](e,new t.Predicate(i,s,a,n,o)):M("Predicate - "+r+" : invalid arguments")},_fromJSON:function(e){if(!e||O(e,t.Predicate))return e;for(var i=e.predicates||[],s=i.length,a=[],r=0;r<s;r++)a.push(f._fromJSON(i[r]));return e.isComplex?new t.Predicate(a[0],e.condition,a.slice(1)):new t.Predicate(e.field,e.operator,t.parseJSON({val:e.value}).val,e.ignoreCase,e.ignoreAccent)}};if(t.Predicate.prototype={and:function(e,t,i,s,a){return f._combine(this,e,t,i,"and",s,a)},or:function(e,t,i,s,a){return f._combine(this,e,t,i,"or",s,a)},validate:function(e){var i,s,a=this.predicates;if(!this.isComplex)return this._comparer.call(this,t.pvt.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);i="and"===this.condition;for(var r=0;r<a.length;r++)if(s=a[r].validate(e),i){if(!s)return!1}else if(s)return!0;return i},toJSON:function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJSON())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e,anyCondition:this.anyCondition}}},t.dataUtil={swap:function(e,t,i){if(t!=i){var s=e[t];e[t]=e[i],e[i]=s}},mergeSort:function(e,i,s){return s&&"string"!=typeof s||(s=t.pvt.fnSort(s,!0)),"function"==typeof i&&(s=i,i=null),t.pvt.mergeSort(e,i,s)},max:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnDescending)},min:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnAscending)},distinct:function(e,t,i){for(var s,a=[],r={},n=0;n<e.length;n++)(s=R(e,t,n))in r||(a.push(i?e[n]:s),r[s]=1);return a},sum:function(e,t){for(var i,s=0,a="number"!=typeof R(e,t,0),r=0;r<e.length;r++)i=R(e,t,r),isNaN(i)||null===i||(a&&(i=+i),s+=i);return s},avg:function(e,i){return t.sum(e,i)/e.length},select:function(e,i){for(var s=[],a=0;a<e.length;a++)s.push(t.pvt.extractFields(e[a],i));return s},group:function(i,s,a,r,n,o){if(n=n||1,i.GROUPGUID==t.pvt.consts.GROUPGUID){for(var l=0;l<i.length;l++)if(t.isNullOrUndefined(o))i[l].items=t.group(i[l].items,s,a,r,i.level+1),i[l].count=i[l].items.length;else{var d=-1,h=e.grep(o,function(e){return e.key==i[l].key});d=o.indexOf(h[0]),i[l].items=t.group(i[l].items,s,a,r,i.level+1,o[d].items),i[l].count=o[d].count}return i.childLevels+=1,i}var c={},u=[];u.GROUPGUID=t.pvt.consts.GROUPGUID,u.level=n,u.childLevels=0,u.records=i;for(var p=0;p<i.length;p++){var m=R(i,s,p);if(t.isNullOrUndefined(r)||(m=r(m,s)),!c[m]&&(c[m]={key:m,count:0,items:[],aggregates:{},field:s},u.push(c[m]),!t.isNullOrUndefined(o))){var g=e.grep(o,function(e){return e.key==c[m].key});c[m].count=g[0].count}c[m].count=t.isNullOrUndefined(o)?c[m].count+=1:c[m].count,c[m].items.push(i[p])}if(a&&a.length)for(var p=0;p<u.length;p++){for(var f,_={},l=0;l<a.length;l++)if(f=t.aggregates[a[l].type],t.isNullOrUndefined(o))f&&(_[a[l].field+" - "+a[l].type]=f(u[p].items,a[l].field));else{var h=e.grep(o,function(e){return e.key==u[p].key});f&&(_[a[l].field+" - "+a[l].type]=f(h[0].items,a[l].field))}u[p].aggregates=_}return u},parseTable:function(i,s,a){var r,n,o=i.rows,l=[],d=[];if(!o.length)return[];switch(a=a||0,(s||"").toLowerCase()){case t.headerOption.tHead:r=i.tHead.rows[a];break;case t.headerOption.row:default:r=i.rows[a]}var h=r.cells;for(n=0;n<h.length;n++)l.push(e.trim(h[n].innerHTML));for(n=a+1;n<o.length;n++){for(var c={},u=o[n].cells,p=0;p<u.length;p++){var m=u[p].innerHTML;"string"==typeof m&&e.isNumeric(m)?c[l[p]]=Number(m):c[l[p]]=m}d.push(c)}return d}},t.headerOption={tHead:"thead",row:"row"},t.aggregates={sum:function(e,i){return t.sum(e,i)},average:function(e,i){return t.avg(e,i)},minimum:function(e,i){return t.getObject(i,t.min(e,i))},maximum:function(e,i){return t.getObject(i,t.max(e,i))},truecount:function(e,i){var s=t.Predicate(i,"equal",!0);return t.DataManager(e).executeLocal(t.Query().where(s)).length},falsecount:function(e,i){var s=t.Predicate(i,"equal",!1);return t.DataManager(e).executeLocal(t.Query().where(s)).length},count:function(e,t){return e.length}},t.pvt={filterQueries:o,mergeSort:function(e,i,s){if(e.length<=1)return e;var a=parseInt(e.length/2,10),r=e.slice(0,a),n=e.slice(a);return r=t.pvt.mergeSort(r,i,s),n=t.pvt.mergeSort(n,i,s),t.pvt.merge(r,n,i,s)},getItemFromComparer:function(e,i,s){var a,r,n,o=0,l="string"==typeof R(e,i,0);if(e.length)for(;t.isNullOrUndefined(a)&&o<e.length;)a=R(e,i,o),n=e[o++];for(;o<e.length;o++)r=R(e,i,o),t.isNullOrUndefined(r)||(l&&(a=+a,r=+r),s(a,r)>0&&(a=r,n=e[o]));return n},quickSelect:function(e,i,s,a,r,n){if(s==a)return e[s];var o=t.pvt.partition(e,i,s,a,n),l=o-s+1;return l==r?e[o]:r<l?t.pvt.quickSelect(e,i,s,o-1,r,n):t.pvt.quickSelect(e,i,o+1,a,r-l,n)},extractFields:function(e,i){var s={};if(1==i.length)return t.pvt.getObject(i[0],e);for(var a=0;a<i.length;a++)s[i[a].replace(".",t.pvt.consts.complexPropertyMerge)]=t.pvt.getObject(i[a],e);return s},partition:function(e,i,s,a,r){var n=parseInt((s+a)/2,10),o=R(e,i,n);t.swap(e,n,a),n=s;for(var l=s;l<a;l++)r(R(e,i,l),o)&&(t.swap(e,l,n),n++);return t.swap(e,n,a),n},fnSort:function(e){return e=e?e.toLowerCase():t.sortOrder.Ascending,e==t.sortOrder.Ascending?t.pvt.fnAscending:t.pvt.fnDescending},fnGetComparer:function(e,i){return function(s,a){return i(t.pvt.getObject(e,s),t.pvt.getObject(e,a))}},fnAscending:function(e,i){return t.isNullOrUndefined(i)&&t.isNullOrUndefined(e)?-1:null===i||void 0===i?-1:"string"==typeof e?e.localeCompare(i):null===e||void 0===e?1:e-i},fnDescending:function(e,i){return t.isNullOrUndefined(i)&&t.isNullOrUndefined(e)?-1:null===i||void 0===i?1:"string"==typeof e?-1*e.localeCompare(i):null===e||void 0===e?-1:i-e},merge:function(e,t,i,s){for(var a,r=[];e.length>0||t.length>0;)a=e.length>0&&t.length>0?s?s(R(e,i,0),R(t,i,0))<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,r.push(a.shift());return r},getObject:function(e,t){if(t){if(!e)return t;if(-1===e.indexOf("."))return t[e];for(var i=t,s=e.split("."),a=0;a<s.length&&null!=i;a++)i=i[s[a]];return i}},createObject:function(e,t,i){var s,a=e.split("."),r=i||window,n=r;for(s=0;s<a.length;s++)s+1==a.length?n[a[s]]=void 0===t?{}:t:null==n[a[s]]&&(n[a[s]]={}),n=n[a[s]];return r},ignoreDiacritics:function(e){return"string"!=typeof e?e:e.split("").map(function(e){return e in t.data.diacritics?t.data.diacritics[e]:e}).join("")},getFieldList:function(e,i,s){if(void 0===s&&(s=""),void 0===i||null===i)return t.pvt.getFieldList(e,[],s);for(var a in e)"object"!=typeof e[a]||e[a]instanceof Array?i.push(s+a):t.pvt.getFieldList(e[a],i,s+a+".");return i}},t.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},t.data={},t.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne ",in:" eq ",notin:" ne "},t.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",notcontains:"substringof"},t.data.diacritics={"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï"},t.data.fnOperators={equal:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?T(e)==T(i):e==i},notequal:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),!t.data.fnOperators.equal(e,i,s)},notin:function(e,i,s){for(var a=0;a<i.length;a++)if(0==t.data.fnOperators.notequal(e,i[a],s))return!1;return!0},lessthan:function(e,t,i){return i?T(e)<T(t):e<t},greaterthan:function(e,t,i){return i?T(e)>T(t):e>t},lessthanorequal:function(e,t,i){return i?T(e)<=T(t):e<=t},greaterthanorequal:function(e,t,i){return i?T(e)>=T(t):e>=t},contains:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?!P(e)&&!P(i)&&-1!=T(e).indexOf(T(i)):!P(e)&&!P(i)&&-1!=e.toString().indexOf(i)},notcontains:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),!t.data.fnOperators.contains(e,i,s)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?e&&i&&T(e).startsWith(T(i)):e&&i&&e.startsWith(i)},endswith:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?e&&i&&T(e).endsWith(T(i)):e&&i&&e.endsWith(i)},all:function(e,i,s){for(var a=0;a<i.length;a++)if(0==t.data.fnOperators[this.operator](e,i[a],s))return!1;return!0},any:function(e,i,s){for(var a=0;a<i.length;a++)if(1==t.data.fnOperators[this.operator](e,i[a],s))return!0;return!1},processSymbols:function(e){var i=t.data.operatorSymbols[e];if(i){var s=t.data.fnOperators[i];if(s)return s}return M("Query - Process Operator : Invalid operator")},processOperator:function(e){var i=t.data.fnOperators[e];return i||t.data.fnOperators.processSymbols(e)}},t.data.fnOperators.in=function(e,i,s){for(var a=0;a<i.length;a++)if(1==t.data.fnOperators.equal(e,i[a],s))return!0;return!1},t.NotifierArray=function(i){return O(this,t.NotifierArray)?(this.array=i,this._events=e({}),this._isDirty=!1,this):new t.NotifierArray(i)},t.NotifierArray.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},push:function(e){var t;return t=O(e,Array)?[].push.apply(this.array,e):this.array.push(e),this._raise("add",{item:e,index:this.length()-1}),t},pop:function(){var e=this.array.pop();return this._raise("remove",{item:e,index:this.length()-1}),e},addAt:function(e,t){return this.array.splice(e,0,t),this._raise("add",{item:t,index:e}),t},removeAt:function(e){var t=this.array.splice(e,1)[0];return this._raise("remove",{item:t,index:e}),t},remove:function(e){var t=this.array.indexOf(e);return t>-1&&(this.array.splice(t,1),this._raise("remove",{item:e,index:t})),t},length:function(){return this.array.length},_raise:function(t,i){this._events.triggerHandler(e.extend({type:t},i)),this._events.triggerHandler({type:"all",name:t,args:i})},toArray:function(){return this.array}},e.extend(t,t.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=0,s=this.length;i<s;++i)e.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var i=0;i<t;i++)if(i in this&&this[i]===e)return i;return-1},Array.prototype.filter=Array.prototype.filter||function(e){if("function"!=typeof e)throw new TypeError;for(var t=[],i=arguments[1]||this,s=0;s<this.length;s++){var a=this[s];e.call(i,a,s,this)&&t.push(a)}return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this.slice(-e.length)===e},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},t.support||(t.support={}),t.support.stableSort=function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),t=0;t<17;t++)if(t!==e[t])return!1;return!0}(),t.support.cors=e.support.cors,!e.support.cors&&window.XDomainRequest){var _=/^https?:\/\//i,v=/^get|post$/i,b=new RegExp("^"+location.protocol,"i"),x=/\/xml/i;e.ajaxTransport("text html xml json",function(e,t,i){if(e.crossDomain&&e.async&&v.test(e.type)&&_.test(t.url)&&b.test(t.url)){var s=null,a=(t.dataType||"").toLowerCase();return{send:function(i,r){s=new XDomainRequest,/^\d+$/.test(t.timeout)&&(s.timeout=t.timeout),s.ontimeout=function(){r(500,"timeout")},
s.onload=function(){var e="Content-Length: "+s.responseText.length+"\r\nContent-Type: "+s.contentType,t={code:200,message:"success"},i={text:s.responseText};try{if("json"===a)try{i.json=JSON.parse(s.responseText)}catch(e){t.code=500,t.message="parseerror"}else if("xml"===a||"text"!==a&&x.test(s.contentType)){var n=new ActiveXObject("Microsoft.XMLDOM");n.async=!1;try{n.loadXML(s.responseText)}catch(e){n=void 0}if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+s.responseText;i.xml=n}}catch(e){throw e}finally{r(t.code,t.message,i,e)}},s.onerror=function(){r(500,"error",{text:s.responseText})},-1!=navigator.userAgent.indexOf("MSIE 9.0")&&(s.onprogress=function(){}),s.open(e.type,e.url),s.send(t.data)},abort:function(){s&&s.abort()}}}})}e.support.cors=!0,t.sortOrder={Ascending:"ascending",Descending:"descending"},t.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"};var y=function(e,t){t&&(e=E(e,t)),(window.setImmediate||window.setTimeout)(e,0)};t.support.enableLocalizedSort=!1;var w=function(e,i,s,a){return t.support.stableSort?t.support.enableLocalizedSort||"string"!=typeof t.pvt.getObject(i,e[0]||{})||s!==t.pvt.fnAscending&&s!==t.pvt.fnDescending||1!==a.filter(function(e){return"onSortBy"===e.fn}).length?e.sort(t.pvt.fnGetComparer(i,s)):S(e,i,s===t.pvt.fnDescending):t.mergeSort(e,i,s)},C=function(i,s){for(var a=e.grep(s,function(e){return"onGroup"==e.fn}),r=0;r<a.length;r++)if(t.getObject("fieldName",a[r].e)==i)return t.getObject("fn",a[r].e)},S=function(e,i,s){var a=Object.prototype.toString;Object.prototype.toString=-1===i.indexOf(".")?function(){return this[i]}:function(){return t.pvt.getObject(i,this)},e=e.sort(),Object.prototype.toString=a,s&&e.reverse()},T=function(e){return e?e.toLowerCase?e.toLowerCase():e.toString().toLowerCase():0===e||!1===e?e.toString():""},R=function(e,i,s){return i?t.pvt.getObject(i,e[s]):e[s]},k=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&1===e.nodeType&&"object"==typeof e&&"string"==typeof e.nodeName},O=function(e,t){return e instanceof t},D=function(e,i,s,a){return function(r){return"object"==typeof r&&(a=r,r=null),new t.TableModel(r||e,i,s,a)}},I=function(t){return function(i,s){(s=s||window.ko)||M("Knockout is undefined");for(var a,r,n,o=[],l=0;l<t.length;l++){a={};for(r in t[l])r.startsWith("_")||(a[r]=s.observable(t[l][r]));for(r in i)n=i[r],e.isPlainObject(n)?(n.owner||(n.owner=a),n=s.computed(n)):n=s.computed(n,a),a[r]=n;o.push(a)}return s.observableArray(o)}},j=0,L=function(e){return j+=1,e+j};t.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var s=new Uint8Array(1);window.crypto.getRandomValues(s),t=s[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]})};var A=function(e,t){return function(){var i=[].slice.call(arguments,0);return i.push(this),e.apply(t||this,i)}},E=function(e,t,i){return"bind"in e?i?e.bind(t,i):e.bind(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}};t.merge=function(e,t){e&&t&&Array.prototype.push.apply(e,t)};var P=function(e){return void 0===e||null===e},M=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}}(window.jQuery,window.Syncfusion,window.document),function(e,t){function i(e,t){var i,s,a=e||"",r=P,t=t.toString(),n=t.indexOf(".")>-1||e.indexOf(".")>-1,o=0,l=0,d="",h="",c=e.split(","),u="0",p=e.toLowerCase().indexOf("e"),m=a.indexOf("#");if(e.indexOf("\\")>-1&&(h=e.substr(0,e.lastIndexOf("\\")+1),e=e.substr(e.lastIndexOf("\\")+1,e.length),m=e.indexOf("#")),p>-1){var g="",a="";s=e.toLowerCase().split("e"),e.indexOf("+")>-1?e.split("+")[1]:e.split("-")[1],t=parseInt(t).toExponential(),i=t.split("e"),o=s[1].length-i[1].length;for(var f=s[1].length-1;f>0;f--)"0"!=s[1][f]?a+=s[1][f]:o>1?(a+="#",o--):a+="0";a=(e.indexOf("+")>-1?"+":"")+a.split("").reverse().join("");for(var f=0;f<i[0].length;f++)g="."!=i[0][f]?g.concat("#"):g.concat(".");g.length>s[0].length&&(g=s[0]),a=h+g+"e"+a}else if(n){if(s=e.split("."),i=t.split("."),s[1]=s[1].replace(/[,.]/g,""),(o=s[0].replace(/[,.]/g,"").length-i[0].replace(/[,.]/g,"").length)<0&&ej.isNullOrUndefined(e.match(/[\[\(\)\]]/g))){c=s[0].split(","),d=s[0].split(",");for(var _=c.length-1;_>=0;_--)if(c[_])for(var v=c[_].length,f=0,b=Math.abs(o);f<b&&3!==v;f++)d[_]="0"+d[_],v++,o++;if(d=d.join(),o<0){!ej.isNullOrUndefined(v)&&3!=v&&(d=","+d);for(var f=0,b=Math.abs(o);f<b;f++)3===v&&(d=","+d,v=0),d="0"+d,v++}o=0,a=h+d+"."+s[1]}else if(ej.isNullOrUndefined(e.match(/[\[\(\)\]]/g))){d=s[0].replace(/[,.]/g,"");for(var x="",v=0,y=d.length-1;y>=0;y--)3===v?(x=","+x,v=0):v++,x=d[y]+x;a=h+x+"."+s[1]}}else{var w=0,C=c.splice(1,c.length);if(o=e.replace(/[,.\[\(\]\)]/g,"").length-t.replace(/[,.]/g,"").length,m>-1){for(var S=0,b=e.length;S<b;S++)"#"===e[S]&&w++;(1===w||c[1]&&2===w)&&(u="#"),1===w&&(C=c[0])}if(o<0){s=a.split(","),d=s.splice(1,s.length);for(var _=c.length-1;_>=0;_--)if(C[_]){var v=C[_].length;!d[_]&&(d[_]="");for(var f=0,b=Math.abs(o)+1;f<b;f++){if(1!=w&&3===v){v=0;break}d[_]=d[_].concat(u),v++,o++}}if(d=d.join(),o<0){!ej.isNullOrUndefined(v)&&3!=v&&(d=","+d);for(var f=0,b=Math.abs(o)+1;f<b;f++)1!=w&&3===v&&(d=","+d,v=0),d=u+d,v++}o=0,a=h+d}l=0}for(var T,R,k=[],O=a.split(""),D=0,y=0,I=!1,j=!1,L=e.indexOf("\\");y<a.length;y++)if(T=O[y],"e"===T&&(j=!0),"0"===T&&m<0?o>0&&l<=y?(o--,l++):o>0?o--:R=r[T]:("0"!=T||!j&&"0"==T)&&(R=r[T]),"0"===T&&L>-1&&(R=r[T]),y===a.lastIndexOf("\\")&&(I=!1),R&&!I)k[D]={rule:R},D+=1;else{"\\"===T&&(T="",!(y===a.lastIndexOf("\\"))&&(I=!0)),T=T.split("");for(var _=0;_<T.length;_++)k[D]=T[_],D+=1}return r=k,{rules:r,format:a}}function s(e,t,s){if(ej.isNullOrUndefined(e)||"string"==typeof e||!t)throw"Bad Number Format Exception";var n,o,l,d=t;if(n=i(t,e),l=n.rules,t=n.format,t.indexOf("\\")>=0){var h,c=t.lastIndexOf("\\"),u=t.slice(0,c),p=t.slice(c+1,t.length);p=p.replace(/[9?CANa#&]/g,"_"),h=u+p,o=h.replace(/[\\]/g,""),t=t.replace(/[\\]/g,"")}else o=t.replace(/[9?CANa#&]/g,"_");return o=a(o,s),r(e,t,o,l,s,d)}function a(e,t){if(0!=e.length){var i,s,a,r=ej.preferredCulture(t),n="";i=r.numberFormat[","],s=r.numberFormat.currency.symbol,a=r.numberFormat["."];for(var o=0;o<e.length;o++)","==e[o]?n+=i:"."==e[o]?n+=a:"$"==e[o]?n+=s:n+=e[o];e=n}return e}function r(i,s,r,l,d,h){if(!ej.isNullOrUndefined(i)){if(s.toLowerCase().indexOf("e")>-1){h.indexOf("+")>-1?h.split("+")[1]:h.split("-")[1];i=i.toExponential(),h.indexOf("-")>-1&&(i=i.replace("+",""))}var c,u,p,m,g,f,_,v,b=c=u=i.toString(),x=r,y=p=0,w=s.match(/[\(\[\]\)]/g);b=!s.indexOf("\\")>=0?i=u.replace(/[\(\)-]/g,""):void 0;var C=l.length-1,S=c.length-1;if(ej.isNullOrUndefined(w))for(;y<l.length&&(m=c[p],g=l[y],m!=t);){if(m===g||"_"===m||"e"===m&&m===g.toLowerCase())f=x.substring(0,y),_=x.substring(y),m=a(m,d),x=f+m+_.substr(1,_.length),p+=1,y+=1;else if(l[y].rule!=t){var T=c.charCodeAt(p);n(s,T,y)?(f=x.substring(0,y),_=x.substring(y),v=o(c,p,y,s,r),x=f+v+_.substr(1,_.length),y++,p++):y++}else"e"===g&&(p=c.indexOf("e")+1),y++;if(p>b.length||C<0)break}else for(;C>=0&&(m=c[S],g=l[C],m!=t);){if(m===g||"_"===m||"e"===m&&m===g.toLowerCase())f=x.substring(0,C+1),_=x.substring(C+1),m=a(m,d),x=f.substr(0,f.length-1)+m+_,C--,S--;else if(l[C].rule!=t){var T=c.charCodeAt(S);n(s,T,C)?(f=x.substring(0,C+1),_=x.substring(C+1),v=o(c,S,C,s,r),x=f.substr(0,f.length-1)+v+_,C--,S--):C--}else C--;if(p>b.length||C<0)break}if(i){x.indexOf("_")-x.indexOf(",")!=1&&x.indexOf("_")-x.indexOf(".")!=1||(x=x.slice(0,x.indexOf("_")-1));return""==e.trim(x.replace(/[_]/g,""))?null:x.replace(/[_]/g,"")}}}function n(t,i,s){var a=P,r=!1,n=t.substr(s,1),o=String.fromCharCode(i);return e.each(a,function(e,t){n==e&&(r=!!o.match(new RegExp(t)))}),r}function o(e,t,i,s,a){var r=!1;return s.indexOf(".")>-1&&i===a.length-1&&e[t+1]>5&&(r=!0),r?(parseInt(e[t])+1).toString():e[t]}function l(e,t){return 0===e.indexOf(t)}function d(e,t){return e.substr(e.length-t.length)===t}function h(e){return(e+"").replace(j,"")}function c(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)}function u(e,t,i){for(var s=e.length;s<t;s++)e=i?"0"+e:e+"0";return e}function p(e,t,i){var s,a=t["-"],r=t["+"];switch(i){case"n -":a=" "+a,r=" "+r;case"n-":d(e,a)?s=["-",e.substr(0,e.length-a.length)]:d(e,r)&&(s=["+",e.substr(0,e.length-r.length)]);break;case"- n":a+=" ",r+=" ";case"-n":l(e,a)?s=["-",e.substr(a.length)]:l(e,r)&&(s=["+",e.substr(r.length)]);break;case"(n)":l(e,"(")&&d(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]}function m(e,t,i){var s=i.groupSizes||[3],a=s[0],r=1,n=ej._round(e,t);isFinite(n)||(n=e),e=n;var o=e+"",l="",d=o.split(/e/i),h=d.length>1?parseInt(d[1],10):0;o=d[0],d=o.split("."),o=d[0],l=d.length>1?d[1]:"";h>0?(l=u(l,h,!1),o+=l.slice(0,h),l=l.substr(h)):h<0&&(h=-h,o=u(o,h+1,!0),l=o.slice(-h,o.length)+l,o=o.slice(0,-h));var c=i["."]||".";l=t>0?c+(l.length>t?l.slice(0,t):u(l,t)):"";for(var p=o.length-1,m=i[","]||",",g="";p>=0;){if(0===a||a>p)return o.slice(0,p+1)+(g.length?m+g+l:l);g=o.slice(p-a+1,p+1)+(g.length?m+g:""),p-=a,r<s.length&&(a=s[r],r++)}return o.slice(0,p+1)+m+g+l}function g(e,t,i){if(!t||"i"===t)return i.name.length?e.toLocaleString():e.toString();t=t||"D";var a,r=i.numberFormat,n=Math.abs(e),o=-1;t.length>1&&(o=parseInt(t.slice(1),10));var l,d=t.charAt(0).toUpperCase();switch(d){case"D":a="n",n=c(n),-1!==o&&(n=u(""+n,o,!0)),e<0&&(n=-n);break;case"N":l=r,l.pattern=l.pattern||["-n"];case"C":l=l||r.currency,l.pattern=l.pattern||["-$n","$n"];case"P":l=l||r.percent,l.pattern=l.pattern||["-n %","n %"],a=e<0?l.pattern[0]||"-n":l.pattern[1]||"n",-1===o&&(o=l.decimals),n=m(n*("P"===d?100:1),o,l);break;default:return s(e,t,i)}return f(n,a,r)}function f(e,t,i){for(var s=/n|\$|-|%/g,a="";;){var r=s.lastIndex,n=s.exec(t);if(a+=t.slice(r,n?n.index:t.length),!n)break;switch(n[0]){case"n":a+=e;break;case"$":a+=i.currency.symbol||"$";break;case"-":/[1-9]/.test(e)&&(a+=i["-"]||"-");break;case"%":a+=i.percent.symbol||"%"}}return a}function _(e,t,i){"string"==typeof i&&(t=i,i=10),t=ej.globalize.findCulture(t);var s=NaN,a=t.numberFormat,r=t.numberFormat.pattern[0];if(e=e.replace(/ /g,""),e.indexOf(t.numberFormat.currency.symbol)>-1?(e=e.replace(t.numberFormat.currency.symbol||"$",""),e=e.replace(t.numberFormat.currency["."]||".",t.numberFormat["."]||"."),r=h(t.numberFormat.currency.pattern[0].replace("$",""))):e.indexOf(t.numberFormat.percent.symbol)>-1&&(e=e.replace(t.numberFormat.percent.symbol||"%",""),e=e.replace(t.numberFormat.percent["."]||".",t.numberFormat["."]||"."),r=h(t.numberFormat.percent.pattern[0].replace("%",""))),e=h(e),L.test(e))s=parseFloat(e,"",i);else if(A.test(e))s=parseInt(e,16);else{var n=p(e,a,r),o=n[0],l=n[1];""===o&&"-n"!==a.pattern[0]&&(n=p(e,a,"-n"),o=n[0],l=n[1]),o=o||"+";var d,c,u=l.indexOf("e");u<0&&(u=l.indexOf("E")),u<0?(c=l,d=null):(c=l.substr(0,u),d=l.substr(u+1));var m,g,f=a["."]||".",_=c.indexOf(f);_<0?(m=c,g=null):(m=c.substr(0,_),g=c.substr(_+f.length));var v=a[","]||",";m=m.split(v).join("");var b=v.replace(/\u00A0/g," ");v!==b&&(m=m.split(b).join(""));var x=o+m;if(null!==g&&(x+="."+g),null!==d){var y=p(d,a,r);x+="e"+(y[0]||"+")+y[1]}!i&&E.test(x)?s=parseFloat(x):i&&(s=parseInt(x,i))}return s}function v(e,t,i){return e<t||e>i}function b(e,t){var i=new Date;if(t<100){var s=e.twoDigitYearMax;s="string"==typeof s?(new Date).getFullYear()%100+parseInt(s,10):s;var a=i.getFullYear();t+=a-a%100,t>s&&(t-=100)}return t}function x(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}function y(e){return e.split("Â ").join(" ").toUpperCase()}function w(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=y(e[i]);return t}function C(e,t,i){var s,a=e.days,r=e._upperDays;return r||(e._upperDays=r=[w(a.names),w(a.namesAbbr),w(a.namesShort)]),t=y(t),i?-1===(s=x(r[1],t))&&(s=x(r[2],t)):s=x(r[0],t),s}function S(e,t,i){var s=e.months,a=e.monthsGenitive||e.months,r=e._upperMonths,n=e._upperMonthsGen;r||(e._upperMonths=r=[w(s.names),w(s.namesAbbr)],e._upperMonthsGen=n=[w(a.names),w(a.namesAbbr)]),t=y(t);var o=x(i?r[1]:r[0],t);return o<0&&(o=x(i?n[1]:n[0],t)),o}function T(e,t){for(var i=0,s=!1,a=0,r=e.length;a<r;a++){var n=e.charAt(a);"'"==n?(s?t.push("'"):i++,s=!1):"\\"==n?(s&&t.push("\\"),s=!s):(t.push(n),s=!1)}return i}function R(e,t,i,s){if(!e)return null;var a=0,r=0,n=null;t=t.split("");for(var o=t.length,l=function(e){for(var t=0,i=e.length,s=[];t<i;t++)s[t]=(e[t]+"").toLowerCase();return s};a<o;a++){if("d"===t[a]){var d=function(e){for(var i=0;t[a]===e;)i++,a++;return i>0&&(a-=1),i}("d");s._lowerDays||(s._lowerDays=function(e){var t,i={};for(t in e)i[t]=l(e[t]);return i}(s.days)),n=d<3?function(t){var i=new RegExp("^\\d{1,"+t+"}"),s=e.substr(r,t).match(i);return s?(s=s[0],r+=s.length,parseInt(s,10)):null}(2):function(t,i){for(var s,a,n,o=0,l=t.length;o<l;o++)if(s=t[o],a=s.length,n=e.substr(r,a),i&&(n=n.toLowerCase()),n==s)return r+=a,o+1;return null}(s._lowerDays[3==d?"namesAbbr":"names"],!0)}}return n}function k(e,t){t=t||"F";var i,s=e.patterns,a=t.length;if(1===a){if(!(i=s[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===a&&"%"===t.charAt(0)&&(t=t.charAt(1));return t}function O(e,t,i){e=h(e),t=h(t);var s=i.calendar,a=ej.globalize._getDateParseRegExp(s,t),r=new RegExp(a.regExp).exec(e);if(null===r)return null;for(var n,o=a.groups,d=null,c=null,u=null,p=0,m=0,g=0,f=0,_=null,x=!1,y=0,w=o.length;y<w;y++){var T=r[y+1];if(T){var k=o[y],O=k.length,D=parseInt(T,10);switch(k){case M.DAY_OF_MONTH_DOUBLE_DIGIT:case M.DAY_OF_MONTH_SINGLE_DIGIT:if(u=D,v(u,1,31))return null;break;case M.MONTH_THREE_LETTER:case M.MONTH_FULL_NAME:if(c=S(s,T,3===O),v(c,0,11))return null;break;case M.MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:if(c=D-1,v(c,0,11))return null;break;case M.YEAR_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_FULL:if(d=O<4?b(s,D):D,v(d,0,9999))return null;break;case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:if(p=D,12===p&&(p=0),v(p,0,11))return null;break;case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:if(p=D,v(p,0,23))return null;break;case M.MINUTES_SINGLE_DIGIT:case M.MINUTES_DOUBLE_DIGIT:if(m=D,v(m,0,59))return null;break;case M.SECONDS_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:if(g=D,v(g,0,59))return null;break;case M.MERIDIAN_INDICATOR_FULL:case M.MERIDIAN_INDICATOR_SINGLE:if(!(x=s.PM&&(T===s.PM[0]||T===s.PM[1]||T===s.PM[2]))&&(!s.AM||T!==s.AM[0]&&T!==s.AM[1]&&T!==s.AM[2]))return null;break;case M.DECISECONDS:case M.CENTISECONDS:case M.MILLISECONDS:if(f=D*Math.pow(10,3-O),v(f,0,999))return null;break;case M.DAY_OF_WEEK_THREE_LETTER:u=R(e,t,i,s);break;case M.DAY_OF_WEEK_FULL_NAME:if(C(s,T,3===O),v(null,0,6))return null;break;case M.TIME_ZONE_OFFSET_FULL:var I=T.split(/:/);if(2!==I.length)return null;if(n=parseInt(I[0],10),v(n,-12,13))return null;var j=parseInt(I[1],10);if(v(j,0,59))return null;_=60*n+(l(T,"-")?-j:j);break;case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:if(n=D,v(n,-12,13))return null;_=60*n}}}var L,A=new Date,E=s.convert;if(L=E?E.fromGregorian(A)[0]:A.getFullYear(),null===d&&(d=L),null===c&&(c=0),null===u&&(u=1),E){if(null===(A=E.toGregorian(d,c,u)))return null}else if(A.setFullYear(d,c,u),A.getDate()!==u)return null;if(x&&p<12&&(p+=12),A.setHours(p,m,g,f),null!==_){var P=A.getMinutes()-(_+A.getTimezoneOffset());A.setHours(A.getHours()+parseInt(P/60,10),P%60)}return A}function D(e,t,i){function s(e,t){var i,s=e+"";return t>1&&s.length<t?(i=u[t-2]+s,i.substr(i.length-t,t)):i=s}var a=i.calendar,r=a.convert;if(!t||!t.length||"i"===t){var n;return n=i&&i.name.length?r?D(e,a.patterns.F,i):e.toLocaleString():e.toString()}var o="s"===t;t=k(a,t),n=[];var l,d,h,c,u=["0","00","000"],p=/([^d]|^)(d|dd)([^d]|$)/g,m=0,g=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;for(!o&&r&&(c=r.fromGregorian(e));;){var f=g.lastIndex,_=g.exec(t);if(m+=T(t.slice(f,_?_.index:t.length),n),!_)break;if(m%2)n.push(_[0]);else{var v=_[0],b=v.length;switch(v){case M.DAY_OF_WEEK_THREE_LETTER:case M.DAY_OF_WEEK_FULL_NAME:var x=3===b?a.days.namesAbbr:a.days.names;n.push(x[e.getDay()]);break;case M.DAY_OF_MONTH_SINGLE_DIGIT:case M.DAY_OF_MONTH_DOUBLE_DIGIT:d=!0,n.push(s(c?c[2]:e.getDate(),b));break;case M.MONTH_THREE_LETTER:case M.MONTH_FULL_NAME:var y=c?c[1]:e.getMonth();n.push(a.monthsGenitive&&function(){return d||h?d:(d=p.test(t),h=!0,d)}()?a.monthsGenitive[3===b?"namesAbbr":"names"][y]:a.months[3===b?"namesAbbr":"names"][y]);break;case M.MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:n.push(s((c?c[1]:e.getMonth())+1,b));break;case M.YEAR_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_FULL:y=c?c[0]:e.getFullYear(),b<4&&(y%=100),n.push(s(y,b));break;case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:l=e.getHours()%12,0===l&&(l=12),n.push(s(l,b));break;case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:n.push(s(e.getHours(),b));break;case M.MINUTES_SINGLE_DIGIT:case M.MINUTES_DOUBLE_DIGIT:n.push(s(e.getMinutes(),b));break;case M.SECONDS_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:n.push(s(e.getSeconds(),b));break;case M.MERIDIAN_INDICATOR_SINGLE:case M.MERIDIAN_INDICATOR_FULL:y=e.getHours()<12?a.AM?a.AM[0]:" ":a.PM?a.PM[0]:" ",n.push(1===b?y.charAt(0):y);break;case M.DECISECONDS:case M.CENTISECONDS:case M.MILLISECONDS:n.push(s(e.getMilliseconds(),3).substr(0,b));break;case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:l=e.getTimezoneOffset()/60,n.push((l<=0?"+":"-")+s(Math.floor(Math.abs(l)),b));break;case M.TIME_ZONE_OFFSET_FULL:l=e.getTimezoneOffset()/60,n.push((l<=0?"+":"-")+s(Math.floor(Math.abs(l)),2)+":"+s(Math.abs(e.getTimezoneOffset()%60),2));break;case M.DATE_SEPARATOR:n.push(a["/"]||"/");break;default:throw"Invalid date format pattern '"+v+"'."}}}return n.join("")}function I(e,t){return t.length?I(e[t[0]],t.slice(1)):e}ej.globalize={},ej.cultures={},ej.cultures.default=ej.cultures["en-US"]=e.extend(!0,{name:"en-US",englishName:"English",nativeName:"English",language:"en",isRTL:!1,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{"/":"/",":":":",firstDay:0,week:{name:"Week",nameAbbr:"Wek",nameShort:"Wk"},days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},ej.cultures["en-US"]),ej.cultures["en-US"].calendar=ej.cultures["en-US"].calendar||ej.cultures["en-US"].calendars.standard;var j=/^\s+|\s+$/g,L=/^[+-]?infinity$/i,A=/^0x[a-f0-9]+$/i,E=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,P={9:"[0-9 ]",0:"[0-9 ]",a:"[A-Za-z0-9 ]",A:"[A-Za-z0-9]",N:"[0-9]","#":"[0-9]","&":"[^]+","<":"",">":"",C:"[A-Za-z ]","?":"[A-Za-z]"},M={DAY_OF_WEEK_THREE_LETTER:"ddd",DAY_OF_WEEK_FULL_NAME:"dddd",DAY_OF_MONTH_SINGLE_DIGIT:"d",DAY_OF_MONTH_DOUBLE_DIGIT:"dd",MONTH_THREE_LETTER:"MMM",MONTH_FULL_NAME:"MMMM",MONTH_SINGLE_DIGIT:"M",MONTH_DOUBLE_DIGIT:"MM",YEAR_SINGLE_DIGIT:"y",YEAR_DOUBLE_DIGIT:"yy",YEAR_FULL:"yyyy",HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:"h",HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:"hh",HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:"H",HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:"HH",MINUTES_SINGLE_DIGIT:"m",MINUTES_DOUBLE_DIGIT:"mm",SECONDS_SINGLE_DIGIT:"s",SECONDS_DOUBLE_DIGIT:"ss",MERIDIAN_INDICATOR_SINGLE:"t",MERIDIAN_INDICATOR_FULL:"tt",DECISECONDS:"f",CENTISECONDS:"ff",MILLISECONDS:"fff",TIME_ZONE_OFFSET_SINGLE_DIGIT:"z",TIME_ZONE_OFFSET_DOUBLE_DIGIT:"zz",TIME_ZONE_OFFSET_FULL:"zzz",DATE_SEPARATOR:"/"};ej.globalize._getDateParseRegExp=function(e,t){var i=e._parseRegExp;if(i){var s=i[t];if(s)return s}else e._parseRegExp=i={};for(var a,r=k(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),n=["^"],o=[],l=0,d=0,h=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;null!==(a=h.exec(r));){var c=r.slice(l,a.index);if(l=h.lastIndex,(d+=T(c,n))%2)n.push(a[0]);else{var u,p=a[0],m=p.length;switch(p){case M.DAY_OF_WEEK_THREE_LETTER:case M.DAY_OF_WEEK_FULL_NAME:case M.MONTH_FULL_NAME:case M.MONTH_THREE_LETTER:u="(\\D+)";break;case M.MERIDIAN_INDICATOR_FULL:case M.MERIDIAN_INDICATOR_SINGLE:u="(\\D*)";break;case M.YEAR_FULL:case M.MILLISECONDS:case M.CENTISECONDS:case M.DECISECONDS:u="(\\d{"+m+"})";break;case M.DAY_OF_MONTH_DOUBLE_DIGIT:case M.DAY_OF_MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:case M.MONTH_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_SINGLE_DIGIT:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.MINUTES_DOUBLE_DIGIT:case M.MINUTES_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:case M.SECONDS_SINGLE_DIGIT:u="(\\d\\d?)";break;case M.TIME_ZONE_OFFSET_FULL:u="([+-]?\\d\\d?:\\d{2})";break;case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:u="([+-]?\\d\\d?)";break;case M.DATE_SEPARATOR:u="(\\"+e["/"]+")";break;default:throw"Invalid date format pattern '"+p+"'."}u&&n.push(u),o.push(a[0])}}T(r.slice(l),n),n.push("$");var g=n.join("").replace(/\s+/g,"\\s+"),f={regExp:g,groups:o};return i[t]=f},ej.globalize.addCulture=function(t,i){ej.cultures[t]=e.extend(!0,e.extend(!0,{},ej.cultures.default,i),ej.cultures[t]),ej.cultures[t].calendar=ej.cultures[t].calendars.standard},ej.globalize.preferredCulture=function(e){return e=void 0!==e&&typeof e==typeof this.cultureObject?e.name:e,this.cultureObject=ej.globalize.findCulture(e),this.cultureObject},ej.globalize.setCulture=function(e){return ej.isNullOrUndefined(this.globalCultureObject)&&(this.globalCultureObject=ej.globalize.findCulture(e)),e=void 0!==e&&typeof e==typeof this.globalCultureObject?e.name:e,e&&(this.globalCultureObject=ej.globalize.findCulture(e)),ej.cultures.current=this.globalCultureObject,this.globalCultureObject},ej.globalize.culture=function(e){ej.cultures.current=ej.globalize.findCulture(e)},ej.globalize.findCulture=function(t){var i;if(t){if(e.isPlainObject(t)&&t.numberFormat&&(i=t),"string"==typeof t){var s=ej.cultures;if(s[t])return s[t];if(t.indexOf("-")>-1){var a=t.split("-")[0];if(s[a])return s[a]}else for(var r=e.map(s,function(e){return e}),n=0;n<r.length;n++){var o=r[n].name.split("-")[0];if(o===t)return r[n]}return ej.cultures.default}}else i=ej.cultures.current||ej.cultures.default;return i},ej.globalize.format=function(e,t,i){var s=ej.globalize.findCulture(i);return"number"==typeof e?e=g(e,t,s):e instanceof Date&&(e=D(e,t,s)),e},ej.globalize._round=function(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i},ej.globalize.parseInt=function(e,t,i){return t||(t=10),Math.floor(_(e,i,t))},ej.globalize.getISODate=function(e){if(e instanceof Date)return e.toISOString()},ej.globalize.parseFloat=function(e,t,i){return"string"==typeof t&&(i=t,t=10),_(e,i)},ej.globalize.parseDate=function(e,t,i){i=ej.globalize.findCulture(i);var s,a,r;if(t){if("string"==typeof t&&(t=[t]),t.length)for(var n=0,o=t.length;n<o;n++){var l=t[n];if(l&&(s=O(e,l,i)))break}}else{r=i.calendar.patterns;for(a in r)if(s=O(e,r[a],i))break}return s||null},ej.globalize.getLocalizedConstants=function(t,i){var s,a=t.replace("ej.","").split(".");return s=I(ej,a),e.extend(!0,{},s.Locale.default,s.Locale[i||this.cultureObject.name])},e.extend(ej,ej.globalize)}(jQuery),ej.EjVmlRender=function(e){var t=document;if(this.vmlNamespace="urn:schemas-microsoft-com:vml",this.vmStyle="#default#VML",t.namespaces.add("v","urn:schemas-microsoft-com:vml"),this.isdocmode8=8===t.documentMode,!t.getElementById("vml_chart")){var i;i=this.isdocmode8?"v\\:fill, v\\:path, v\\:polyline, v\\:line, v\\:rect,v\\:shape,v\\:oval, v\\:stroke{ behavior:url(#default#VML); display: inline-block; } ":"v\\:*{ behavior:url(#default#VML); display: inline-block; } ";var s=t.createStyleSheet();s.owningElement.id="vml_chart",s.cssText=i}this._rootId=jQuery(e).attr("id"),this.svgObj=t.createElement("div"),this.svgObj.style.position="relative",this.svgObj.setAttribute("id",this._rootId+"_vml"),this.changeOptions={id:"id",fill:"fillcolor",stroke:"strokecolor","stroke-width":"strokeweight",d:"path","font-size":"font-size","font-family":"font-family","font-style":"font-style","font-weight":"font-weight",points:"points"}},function(e){ej.EjVmlRender.prototype={drawPath:function(t,i){var s=t.d.split(" ");if(-1!=e.inArray("A",s)){var a=parseFloat(s[4]),r=parseFloat(s[5]);t.d=this.drawArc(a,r,t)}if(e("#"+t.id).length>0)t.d=this.changePathValue(t.d),this.applyVMLStyle(e("#"+t.id),t);else{t.d=this.changePathValue(t.d);var n=document.createElement("v:shape"),o=e(n);this.applyVMLStyle(o,t),o.appendTo(i)}},createLegendSvg:function(e){var t=document;return this._rootId=jQuery(e).attr("id"),this.legendsvgObj=t.createElement("div"),this.legendsvgObj.style.position="relative",this.legendsvgObj.setAttribute("id","legend_"+this._rootId+"_vml"),this.legendsvgObj},drawPolyline:function(t,i){t.points.split(" ");if(e("#"+t.id).length>0)t.points=this.changePathValue(t.points),this.applyVMLStyle(e("#"+t.id),t);else{t.points=this.changePathValue(t.points);var s=document.createElement("v:polyline"),a=e(s);this.applyVMLStyle(a,t),a.appendTo(i)}},setFillAttribute:function(t,i){var s=document.createElement("v:fill"),a=i["fill-opacity"]?i["fill-opacity"]:i.opacity;a=ej.util.isNullOrUndefined(a)?i.opacity?i.opacity:1:a;var r=i.fill;if("none"==r||ej.util.isNullOrUndefined(r))"none"==r?(s.setAttribute("type","gradient"),s.setAttribute("color",i.color),s.setAttribute("color2",i.color2),s.setAttribute("colors",i.colors),s.setAttribute("angle",i.angle),a=i.fill_opacity):a=.1;else if(r.match("gradient")){var n=r.replace("gradient","");s.setAttribute("type","gradient"),s.setAttribute("colors",n)}else e(t).attr("fillcolor",r);s.setAttribute("opacity",a),e(s).appendTo(t)},setStrokeAttribute:function(t,i){"transparent"==i.stroke&&(i.opacity=.1),i.name&&e(t).attr("name",i.name);var s=i.opacity;if(s){var a=document.createElement("v:stroke");a.setAttribute("opacity",s),e(a).appendTo(t)}},changePathValue:function(e){if(!e.d){for(var t=e.split(" "),i=0;i<t.length;i++){null!=t[i].match(/\d+/g)&&(t[i]=Math.round(parseFloat(t[i])))}return e=t.join(" ")}},drawArc:function(e,t,i){var s,a=i.start,r=i.end,r=Number(Math.PI.toFixed(2))==Number((r+a).toFixed(2))?r-.01:r,n=i.r||e||t,o=Math.cos(a),l=Math.sin(a),d=Math.cos(r),h=Math.sin(r),c=i.innerR,u=.08/n,p=c&&.1/c||0;return r-a==0?"":(2*Math.PI-r+a<u?d=-u:r-a<p&&(d=Math.cos(a+p)),s=["wa",0-n,0-n,0+n,0+n,0+n*o,0+n*l,0+n*d,0+n*h],i.open&&!c&&s.push("e",void 0,0,0),s.push("at",0-c,0-c,0+c,0+c,0+c*d,0+c*h,0+c*o,0+c*l,"x","e"),s=s.join(" "))},changeVMLStyle:function(t,i){var s=this,a=i.stroke;t.css("width",i.width).css("visibility",i.visibility).css("height",i.height).css("position","absolute").css("left",i.x).css("top",i.y),e.each(i,function(e,a){null==s.changeOptions[e]&&void 0==s.changeOptions[e]||("d"!=e&&"points"!=e||(a=s.changePathValue(i[e]).toLowerCase()),"transparent"!=a||i.fill_opacity||(i[e]=a="white","fill"!=e||i.hasOwnProperty("opacity")&&i.opacity||(i.opacity=.1)),i.fill_opacity&&(i.opacity=i.fill_opacity),"SPAN"===t[0].tagName?"fill"==e?t.css("color",a):"id"==e?t.attr(s.changeOptions[e],a):t.css(s.changeOptions[e],a):s.isdocmode8?t.get(0)[s.changeOptions[e]]=a:t.get(0).setAttribute(s.changeOptions[e],a))}),(i.hasOwnProperty("fill-opacity")||i.hasOwnProperty("opacity")||i.hasOwnProperty("fill"))&&"SPAN"!==t[0].tagName&&(s.setFillAttribute(t,i),i.hasOwnProperty("stroke")&&(i.stroke=a,i.fill_opacity&&(i.opacity=i.fill_opacity),s.setStrokeAttribute(t,i)))},applyVMLStyle:function(e,t){"SPAN"!==e[0].tagName&&(ej.util.isNullOrUndefined(t.width)&&(t.width="1000px"),ej.util.isNullOrUndefined(t.height)&&(t.height="1000px")),ej.util.isNullOrUndefined(t.x)&&(t.x="0px"),ej.util.isNullOrUndefined(t.y)&&(t.y="0px"),this.changeVMLStyle(e,t)},drawLine:function(t,i){if(e("#"+t.id).length>0){var s=t.x1+","+t.y1,a=t.x2+","+t.y2;e(t).attr("from",s).attr("to",a),this.applyVMLStyle(e("#"+t.id),t)}else{var r=document.createElement("v:line"),n=e(r),s=t.x1+","+t.y1,a=t.x2+","+t.y2;n.attr("from",s).attr("to",a),this.applyVMLStyle(n,t),n.appendTo(i)}},drawCircle:function(t,i){if(e("#"+t.id).length>0)t.x=t.cx-t.r,t.y=t.cy-t.r,t.width=t.height=2*t.r,this.applyVMLStyle(e("#"+t.id),t);else{var s=document.createElement("v:oval"),a=e(s);t.x=t.cx-t.r,t.y=t.cy-t.r,t.width=t.height=2*t.r,this.applyVMLStyle(a,t),0==e("#"+t.id).length&&a.appendTo(i)}},drawEllipse:function(t,i){if(e("#"+t.id).length>0)t.x=t.cx-t.rx,t.y=t.cy-t.ry,t.width=2*t.rx,t.height=2*t.ry,this.applyVMLStyle(e("#"+t.id),t);else{var s=document.createElement("v:oval"),a=e(s);t.x=t.cx-t.rx,t.y=t.cy-t.ry,t.width=2*t.rx,t.height=2*t.ry,this.applyVMLStyle(a,t),a.appendTo(i)}},drawRect:function(t,i){if(e("#"+t.id).length>0)this.applyVMLStyle(e("#"+t.id),t);else{var s=document.createElement("v:rect"),a=e(s);this.applyVMLStyle(a,t),a.appendTo(i)}},drawCylinder:function(t,i,s){var a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I=t.x,j=t.y,L=t.width,A=t.height,E=t.id,P=t.fill;if(!ej.EjSvgRender.prototype.checkColorFormat(P))var P=ej.datavisualization.Chart.prototype.colorNameToHex(t.fill);var M=t.opacity,F={svgRenderer:ej.EjSvgRender.prototype},N=ej.Ej3DRender.prototype.polygon3D.prototype.applyZLight(P,F),z=ej.Ej3DRender.prototype.polygon3D.prototype.applyXLight(P,F);1==s.isColumn?(t.rx=r=L/2,t.ry=n=r/4,o=l=I+r,c=d=j-n,g=w=f=j+A-n,u=o+r,h=m=y=o-r,k=-Math.round(11796300),O=Math.round(11796300),b=Math.round(23592600),x=-Math.round(11796300),D="90",1==s.stacking&&(s.isLastSeries||(d=j+n)),p=d):(t.ry=n=A/2,t.rx=r=n/4,u=h=l=I+r,y=o=I+L+r,k=Math.round(5898150),O=Math.round(11796300),b=Math.round(17694450),x=-Math.round(11796300),f=d=j+n,w=p=d+n,c=g=f-n,D="0",1==s.stacking&&(s.isLastSeries||(o=I+L-r)),m=o),delete t.x,delete t.y,t.width=1e3,t.x=0,t.y=0,delete t.stacking,t.height=1e3,delete t.isColumn,t.fill=N,t.fill_opacity=M,t.stroke=N,t["stroke-width"]=0;for(var V=1;V<=4;V++){if(V%2==0?(C=l,S=d,T=m,R=g,_=b,v=x):(C=o,S=f,T=u,R=p,_=k,v=O),V<3&&(_=65535,v=23592600),V<4&&(a=["M",Math.round(y),Math.round(w)]),a.push("ae",Math.round(C),Math.round(S),Math.round(r),Math.round(n),_,v),V>2&&(a.push("l",Math.round(T),Math.round(R)),t.fill="none",t.color=P,t.color2=P,t.colors="30% "+z+",70% "+z,t.angle=D),3!=V){a.push("e"),a=a.join(" "),t.d=a,t.id=E+"_Region_"+(V-1).toString(),4==V&&(t.id=E+"_Region_"+(V-2).toString());var B=document.createElement("v:shape"),H=e(B);this.applyVMLStyle(H,t),H.appendTo(i)}y=h,w=c}},_getAttrVal:function(t,i,s){i="x"==i?"left":i,i="y"==i?"top":i;var a=e(t).attr(i),r=a||e(t).css(i);return null!=r?r:s},_setAttr:function(t,i){if(i.transform){var s=i.transform,a=s.slice(s.indexOf("(")+1,s.indexOf(")")).split(",");i.x=a[0],i.y=a[1]}var r=e(t);r.length>0&&this.changeVMLStyle(r,i)},createGradientElement:function(e,t){var i;if("[object Array]"==Object.prototype.toString.call(t)){i="gradient ";for(var s="",a=0,r=t.length-1;a<t.length;a++,r--)i+=s+t[a].colorStop+" "+t[r].color,s=","}else i=t;return i},setSpanAttr:function(t,i,s){var a=t["font-size"]>0?t["font-size"]+"px":t["font-size"],r={size:a,fontStyle:t["font-style"],fontFamily:t["font-family"]},n=ej.EjSvgRender.utils._measureText(i,null,r);e(s).css("white-space","nowrap"),
"middle"===t["text-anchor"]?t.x=Math.round(t.x-n.width/2):"end"===t["text-anchor"]&&(t.x=Math.round(t.x-n.width)),t.y=Math.round(t.y-r.size.replace("px","")),this.applyVMLStyle(s,t)},drawText:function(t,i,s,a){var r=document,n=e("#"+t.id);if(n.length>0)this._textAttrReplace(t,i,a,n);else if(t.id.indexOf("YAxisTitle")>0&&!this.isdocmode8){t.on=!0;var o=document.createElement("v:line");o.style.behavior="url(#default#VML)",o.style.display="inline-block";var l=ej.EjSvgRender.utils._measureText(i,null,null);o.setAttribute("to",(t.x-1).toString()+","+(t.y-l.width/2).toString()),o.setAttribute("from",t.x.toString()+","+t.y.toString());var d=document.createElement("v:path");d.setAttribute("textpathok",!0);var h=document.createElement("v:textpath");h.setAttribute("on",!0),h.setAttribute("string",i),h.style["font-style"]=t["font-style"],h.style["font-size"]=t["font-size"],h.style["font-family"]=t["font-family"],o.appendChild(d),o.appendChild(h),e(o).appendTo(s)}else{var c=r.createElement("span"),u=e(c);if("array"==jQuery.type(i)){this.setSpanAttr(t,i,u);for(var p=0;p<i.length;p++){var m=r.createElement("span");e(m).html(i[p]),e(m).appendTo(c);var g=r.createElement("br");e(g).appendTo(c)}}else this.setSpanAttr(t,i,u),u.html(i);u.appendTo(s)}},_textAttrReplace:function(t,i,s,a){if("array"==jQuery.type(i)){var r=e("#"+t.id).children("span");if(this.setSpanAttr(t,i,a),r.length>0&&r.length==i.length)for(var n=0;n<r.length;n++){var o=r[n];e(o).text(i[n])}else e("#"+t.id).remove(),this.drawText(t,i,this.gTransToolEle,s)}else this.setSpanAttr(t,i,a),a.text(i)},drawImage:function(t,i){var s=document.createElement("img"),a=e(s);a.css({position:"absolute"}),e.each(t,function(e,t){"href"==e&&(e="src"),a.attr(e,t)}),a.appendTo(i)},createDefs:function(){},createGroup:function(t){var i=document.createElement("div");if(!ej.util.isNullOrUndefined(t.transform)){var s=t.transform.slice(t.transform.indexOf("(")+1,t.transform.indexOf(")")).split(",");e(i).css({position:"absolute",left:s[0]+"px",top:s[1]+"px"})}return t.cursor&&e(i).css({cursor:t.cursor}),e.each(t,function(t,s){"transform"!==t&&"clip-path"!=t&&e(i).attr(t,s)}),i},createText:function(t,i){var s=document.createElement("span");return e(s).attr(t),ej.util.isNullOrUndefined(i)||(s.textContent=i),s},drawAxesBoundsClipPath:function(t,i,s){var a,r=e(t);r.removeAttr("clip-path");var n=this._getTransform(i.xAxis,i.yAxis,s);a={id:t.id+"_ClipRect",x:0,y:0,width:n.width,height:n.height,fill:"white","stroke-width":1,stroke:"transparent"},this.drawClipPath(a,t),r.attr("clip-path","url(#"+a.id+")")},getAttrVal:function(t,i,s){var a=e(t).attr(i);return null!=a?a:s},round:function(e,t,i){return t*(i?Math.ceil(e/t):Math.floor(e/t))},hexFromRGB:function(t){var i=t.R,s=t.G,a=t.B;if(t.A){return"rgba("+i.toString()+","+s.toString()+","+a.toString()+","+t.A+")"}var i=t.R,s=t.G,a=t.B,r=[i.toString(16),s.toString(16),a.toString(16)];return e.each(r,function(e,t){1===t.length&&(r[e]="0"+t)}),"#"+r.join("").toUpperCase()},hexToRGB:function(e){var t,i=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/.test(e);if(1==i)return t=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/.exec(e),t?{R:parseInt(t[1]),G:parseInt(t[2]),B:parseInt(t[3]),A:t[4]}:null;var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{R:parseInt(t[1],16),G:parseInt(t[2],16),B:parseInt(t[3],16)}:null},checkColorFormat:function(e){return/(rgba?\((?:\d{1,3}[,\)]){3}(?:\d+\.\d+\))?)|(^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$)/gim.test(e)},createDelegate:function(e,t){return function(i){t.apply(e,[i,this])}},drawClipPath:function(t,i){if(-1==t.id.indexOf("ChartAreaClipRect")){var s=Math.round(t.x)+"px",a=Math.round(t.y)+"px",r=Math.round(t.width)+Math.round(t.x)+"px",n=Math.round(t.y)+Math.round(t.height)+"px",o="rect("+a+" "+r+" "+n+" "+s+")";e(i).css("position","absolute").css("clip",o)}},drawCircularClipPath:function(t,i){var s=Math.round(t.r),a=Math.round(t.cx),r=Math.round(t.cy);if(-1==t.id.indexOf("_ClipRect")){var n=a-s+"px",o=r-s+"px",l=a+s+"px",d=r+s+"px",h="rect("+o+" "+l+" "+d+" "+n+")";e(i).css("position","absolute").css("clip",h)}},append:function(t,i){e(t).appendTo(i)}}}(jQuery),ej.EjSvgRender=function(e){this.svgLink="http://www.w3.org/2000/svg",this.svgObj=document.createElementNS(this.svgLink,"svg"),this._rootId=jQuery(e).attr("id");var t=this._rootId+"_svg";if($(document).find("#"+t).length>0){var i=0;do{i++}while($(document).find("#"+this._rootId+"_svg"+i).length>0);t=this._rootId+"_svg"+i}this.svgObj.setAttribute("id",t)},function(e){function t(e,t,i,s){var a=s*Math.PI/180;return[e+i*Math.cos(a),t+i*Math.sin(a)]}ej.EjSvgRender.prototype={drawPath:function(t,i){if(e("#"+t.id).length>0)e("#"+t.id).attr(t);else{var s=document.createElementNS(this.svgLink,"path");e(s).attr(t).appendTo(i)}},createLegendSvg:function(e){return this.svgLink="http://www.w3.org/2000/svg",this.legendsvgObj=document.createElementNS(this.svgLink,"svg"),this._rootId=jQuery(e).attr("id"),this.legendsvgObj.setAttribute("id","legend_"+this._rootId+"_svg"),this.legendsvgObj},drawPolyline:function(t,i){if(e("#"+t.id).length>0)e("#"+t.id).attr(t);else{var s=document.createElementNS(this.svgLink,"polyline");e(s).attr(t).appendTo(i)}},drawLine:function(t,i){if(e("#"+t.id).length>0)e("#"+t.id).attr(t);else{var s=document.createElementNS(this.svgLink,"line");e(s).attr(t),e(s).appendTo(i)}},drawPolygon:function(t,i){if(e("#"+t.id).length>0)e("#"+t.id).attr(t);else{var s=document.createElementNS(this.svgLink,"polygon");e(s).attr(t),e(s).appendTo(i)}},drawCircle:function(t,i){if(e("#"+t.id).length>0)e("#"+t.id).attr(t);else{var s=document.createElementNS(this.svgLink,"circle");e(s).attr(t).appendTo(i)}},drawEllipse:function(t,i){if(e("#"+t.id).length>0)e("#"+t.id).attr(t);else{var s=document.createElementNS(this.svgLink,"ellipse");e(s).attr(t).appendTo(i)}},drawRect:function(t,i){if(e("#"+t.id).length>0)e("#"+t.id).attr(t);else{var s=document.createElementNS(this.svgLink,"rect");e(s).attr(t).appendTo(i)}},drawCylinder:function(t,i,s){if(e("#"+t.id).length>0)e("#"+t.id).attr(t);else{var a=t.x,r=t.y,n=t.id,o=t.fill,l=o;this.checkColorFormat(o)||(o=ej.datavisualization.Chart.prototype.colorNameToHex(o));var d,h,c,u,p,m,g,f,_,v,b,x=2,y=0,w=0,C={svgRenderer:this};if(1==s.isColumn){var S=t.width/2,T=t.height,R=S/4;p=_=a,m=R<r?r-R:s.stacking?r+R:r-R,v=m,d=2*S,h=0,c=0,u=R<r?T:T<2*R?T:s.stacking?T-2*R:T,g=p,f=R<r?m+T:T<m?T+m:s.stacking?T+(r-R):T+m,y=100,(s.stacking=!0)&&(s.isLastSeries||(m=v=r+R,u=T<S/2?T:T-S/2))}else{var R=t.height/2,T=t.width,S=R/4;m=v=r,p=_=a+S,d=0,h=2*R,c=T,u=0,g=p+T,f=m,w=100,(s.stacking=!0)&&(s.isLastSeries||(g=p+T-2*S,c=T-2*S))}for(delete t.x,delete t.y,delete t.width,delete t.height,delete t.isColumn;x--;)b="M"+p.toString()+","+m.toString(),b+="a"+S.toString()+","+R.toString()+" 0 1,0 "+d.toString()+","+h.toString(),b+="a"+S.toString()+","+R.toString()+" 0 1,0 "+(-1*d).toString()+","+(-1*h).toString(),t.d=b,t.id=n+"_Region_"+x,t.fill=ej.Ej3DRender.prototype.polygon3D.prototype.applyZLight(o,C),this.drawPath(t,i),p=g,m=f;if(b="M"+_.toString()+","+v.toString(),b+="a"+S.toString()+","+R.toString()+" 0 1,0 "+d.toString()+","+h.toString(),b+="l"+c.toString()+" "+u.toString(),b+="a"+S.toString()+","+R.toString()+" 0 1,1 "+(-1*d).toString()+","+(-1*h).toString()+" z",t.d=b,t.id=n+"_Region_2",-1==l.indexOf("url")){var k=n;if(0==e("#"+k).length){var O={id:k,x1:"0%",y1:"0%",x2:y.toString()+"%",y2:w.toString()+"%"},D=[];D[0]={colorStop:"0%",color:o},D[1]={colorStop:"30%",color:ej.Ej3DRender.prototype.polygon3D.prototype.applyXLight(o,C)},D[2]={colorStop:"70%",color:ej.Ej3DRender.prototype.polygon3D.prototype.applyXLight(o,C)},D[3]={colorStop:"100%",color:o},this.drawGradient(O,D,i)}t.fill="url(#"+k+")"}this.drawPath(t,i)}},createGradientElement:function(e,t,i,s,a,r,n){var o;if("[object Array]"==Object.prototype.toString.call(t)){var l={id:this.svgObj.id+"_"+e+"Gradient",x1:i+"%",y1:s+"%",x2:a+"%",y2:r+"%"};this.svgObj.id;this.drawGradient(l,t,n),o="url(#"+this.svgObj.id+"_"+e+"Gradient)"}else o=t;return o},drawGradient:function(t,i,s){var a=this.createDefs(),r=document.createElementNS(this.svgLink,"linearGradient");e(r).attr(t);for(var n=0;n<i.length;n++){var o=document.createElementNS(this.svgLink,"stop");e(o).attr({offset:i[n].colorStop,"stop-color":i[n].color,"stop-opacity":1}),e(o).appendTo(r)}e(r).appendTo(a),e(a).appendTo(s)},drawText:function(t,i,s,a){if(e("#"+t.id).length>0)this._textAttrReplace(t,i,a);else{var r=document.createElementNS(this.svgLink,"text"),n=e(r);if("array"==jQuery.type(i)){var o=0;n.attr(t);for(var l=0;l<i.length;l++){var d=document.createElementNS(this.svgLink,"tspan");d.textContent=i[l],e(d).attr({x:t.x,dy:o}),e(d).appendTo(r),a=this.enable3D?a.font:a;var h=ej.EjSvgRender.utils._measureText(i[l],null,a);o=t.isTrackball?h.height+2:h.height}}else r.textContent=i,n.attr(t);n.appendTo(s)}},_textAttrReplace:function(t,i,s){if(e("#"+t.id).attr(t),"array"==jQuery.type(i)){var a=e("#"+t.id).children("tspan"),r=0;if(a.length>0&&a.length==i.length)for(var n=0;n<a.length;n++){var o=a[n];e(o).attr({x:t.x,dy:r}),o.textContent=i[n];var l=ej.EjSvgRender.utils._measureText(i[n],null,s);r=l.height+2}else e("#"+t.id).remove(),this.drawText(t,i,this.gTransToolEle,s)}else e("#"+t.id).text(i)},drawImage:function(t,i){var s=document.createElementNS(this.svgLink,"image");s.setAttributeNS(null,"height",t.height),s.setAttributeNS(null,"width",t.width),s.setAttributeNS("http://www.w3.org/1999/xlink","href",t.href),s.setAttributeNS(null,"x",t.x),s.setAttributeNS(null,"y",t.y),s.setAttributeNS(null,"id",t.id),s.setAttributeNS(null,"visibility",t.visibility),ej.util.isNullOrUndefined(t.clippath)&&ej.util.isNullOrUndefined(t.preserveAspectRatio)||(s.setAttributeNS(null,"clip-path",t.clippath),s.setAttributeNS(null,"preserveAspectRatio",t.preserveAspectRatio)),e(s).appendTo(i)},createDefs:function(){return document.createElementNS(this.svgLink,"defs")},createClipPath:function(t){var i=document.createElementNS(this.svgLink,"clipPath");return e(i).attr(t),i},createForeignObject:function(t){var i=document.createElementNS(this.svgLink,"foreignObject");return e(i).attr(t),i},createGroup:function(t){var i=document.createElementNS(this.svgLink,"g");return e(i).attr(t),i},createPattern:function(e,t){var i=document.createElementNS(this.svgLink,t);for(var s in e)e.hasOwnProperty(s)&&i.setAttribute(s,e[s]);return i},createText:function(t,i){var s=document.createElementNS(this.svgLink,"text");return e(s).attr(t),ej.util.isNullOrUndefined(i)||(s.textContent=i),s},createPath:function(t){var i=document.createElementNS(this.svgLink,"path");return e(i).attr(t),i},createCircle:function(t){var i=document.createElementNS(this.svgLink,"circle");return e(i).attr(t),i},createLine:function(t){var i=document.createElementNS(this.svgLink,"line");return e(i).attr(t),i},_getAttrVal:function(t,i,s){var a=e(t).attr(i);return null!=a?a:s},hexFromRGB:function(t){var i=t.R,s=t.G,a=t.B;if(t.A){return"rgba("+i.toString()+","+s.toString()+","+a.toString()+","+t.A+")"}var r=[i.toString(16),s.toString(16),a.toString(16)];return e.each(r,function(e,t){1===t.length&&(r[e]="0"+t)}),"#"+r.join("").toUpperCase()},checkColorFormat:function(e){return/(rgba?\((?:\d{1,3}[,\)]){3}(?:\d+\.\d+\))?)|(^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$)/gim.test(e)},hexToRGB:function(e){var t,i=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/.test(e);return 1==i?(t=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/.exec(e),t?{R:parseInt(t[1]),G:parseInt(t[2]),B:parseInt(t[3]),A:t[4]}:null):(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),t?{R:parseInt(t[1],16),G:parseInt(t[2],16),B:parseInt(t[3],16)}:null)},createDelegate:function(e,t){return function(i){t.apply(e,[i,this])}},drawClipPath:function(t,i){if(e(i).find("#"+t.id).length>0)e(i).find("#"+t.id).attr(t);else{var s=this.createDefs(),a=this.createClipPath({id:t.id});t.id=t.id+"_Rect",this.drawRect(t,a),this.append(a,s),this.append(s,i)}},drawCircularClipPath:function(e,t){var i=this.createDefs(),s=this.createClipPath({id:e.id});this.drawCircle(e,s),this.append(s,i),this.append(i,t)},append:function(t,i){e(t).appendTo(i)},_setAttr:function(t,i){e(t).attr(i)}},ej.EjSvgRender.commonChartEventArgs={cancel:!1,data:null},ej.EjSvgRender.utils={_decimalPlaces:function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},_getLabelContent:function(e,t,i){switch(t._categoryValueType){case"number":var s=ej.util.isNullOrUndefined(t.labelFormat)?null:t.labelFormat.match("{value}");return ej.util.isNullOrUndefined(t.labelFormat)?t.labels[Math.floor(e)]:null!=s?t.labelFormat.replace("{value}",t.labels[Math.floor(e)]):ej.format(t.labels[Math.floor(e)],t.labelFormat,i);case"date":return ej.format(new Date(t.labels[Math.floor(e)]),ej.util.isNullOrUndefined(t.labelFormat)?"dd/MM/yyyy":t.labelFormat,i);case"string":return t.labels[Math.floor(e)];default:return""}},_getSeriesTemplateSize:function(t,i,s,a,r){var t,i,n=r.model.AreaType,o=r._id,l=e.inArray(s,r.model._visibleSeries);if(0!=e("#template_group_"+o).length)var d=e("#template_group_"+o);else d=e("<div></div>").attr("id","template_group_"+o);d.css("position","relative").css("z-index",1e3);var h=e("#"+s.marker.dataLabel.template).clone();e(h).attr("id",s.marker.dataLabel.template+"_"+l+"_"+i+"_"+o);var c=e(h);c.css("position","absolute"),t.count=1;var u={series:s,point:t};c.html(c.html().parseTemplate(u));var p="cartesianaxes"!=n&&s.enableAnimation&&"pyramid"!=s.type.toLowerCase()&&"funnel"!=s.type.toLowerCase()?"none":"block";c.css("display",p).appendTo(e(d)),e(d).appendTo("#"+o),t.size={height:c.height(),width:c.width()},a?((ej.util.isNullOrUndefined(s.LeftLabelMaxHeight)||s.LeftLabelMaxHeight<t.size.height)&&(s.LeftLabelMaxHeight=t.size.height),(ej.util.isNullOrUndefined(s.LeftLabelMaxWidth)||s.LeftLabelMaxWidth<t.size.width)&&(s.LeftLabelMaxWidth=t.size.width)):((ej.util.isNullOrUndefined(s.RightLabelMaxHeight)||s.RightLabelMaxHeight<t.size.height)&&(s.RightLabelMaxHeight=t.size.height),(ej.util.isNullOrUndefined(s.RightLabelMaxWidth)||s.RightLabelMaxWidth<t.size.width)&&(s.RightLabelMaxWidth=t.size.width))},getMinPointsDelta:function(t,i,s){var a=i,r=Number.MAX_VALUE;return e.each(a.model._visibleSeries,function(i,n){if("visible"==n.visibility.toLowerCase()&&t.name==n._xAxisName){var o=ej.DataManager(n.points,ej.Query().sortBy("xValue")).executeLocal();if(1!=o.length||a.currentSeries&&a.currentSeries._yAxisName.toLowerCase()!=n._yAxisName.toLowerCase())e.each(o,function(e,t){if(e>0&&t.xValue){var i=t.xValue-o[e-1].xValue;0!=i&&(r=Math.min(r,i))}});else{var l=ej.util.isNullOrUndefined(s)?n.xAxis.visibleRange.min:s,d=o[0].xValue-l;0!=d&&(r=Math.min(r,d))}}}),r==Number.MAX_VALUE&&(r=1),r},_getSeriesMaxLabel:function(t){var i,s,a,r={width:0,height:0},n=e(this.svgObject).width(),o=[];if(t.labels.length>0){for(var l=0;l<t.labels.length;l++){var a=this._measureText(t.visibleLabels[l],n,t.marker.dataLabel.font);r.width<a.width&&(r.width=a.width),r.height<a.height&&(r.height=a.height)}t.LabelMaxHeight=r.height,t.LabelMaxWidth=r.width}else{o.push(t.rightsidePoints),o.push(t.leftsidePoints);for(var d=0;d<o.length;d++){for(var l=0;l<o[d].length;l++)i=o[d][l],s=i.text?i.text:i.y,a=this._measureText(s,n,t.marker.dataLabel.font),r.width<a.width&&(r.width=a.width),r.height<a.height&&(r.height=a.height);0==d?(t.RightLabelMaxHeight=r.height,t.RightLabelMaxWidth=r.width):(t.LeftLabelMaxHeight=r.height,t.LeftLabelMaxWidth=r.width)}}},_getHighestLabel:function(t,i,s,a){var r,n,o,l,d=0,h=[],c=0;if(ej.isNullOrUndefined(s))for(var u=0==t.labels.length?t.visibleLabels:t.labels,p=0;p<u.length;p++){var m=0==t.labels.length?u[p].Text:u[p],c=0;-1!=m.indexOf("<br>")?h=m.split("<br>"):h.push(m);for(var g=0;g<h.length;g++)n=h[g],o=this._measureText(n,e(i.svgObject).width(),t.font).width,c<o&&(c=o,r=n);d<c&&(d=c,l=r)}else if(s&&("string"==typeof s&&-1!=s.indexOf("<br>")||"object"==typeof s)){var c=0;h="object"==typeof s?s:s.split("<br>");for(var g=0;g<h.length;g++)n="object"==typeof h[g]?h[g].Text:h[g],o=this._measureText(n,i,t.font).width,c<o&&(c=o,r=n),l=r}return l},_getMaxLabelWidth:function(t,i){this.chartObj=i;var s,a,r,n,o,l={width:0,height:0,maxHeight:0,maxWidth:0},d="",h=i.svgRenderer.vmlNamespace,c=t.visibleRange,u=t.labelIntersectAction?t.labelIntersectAction.toLowerCase():"",p=t.labelPlacement,m=t.opposedPosition,g=t.orientation.toLowerCase(),f=i.model.requireInvertedAxes?"vertical"==g:"horizontal"==g,_=t.roundingPlaces,v=t.labelRotation,g=t.orientation,b=0,x=t.visibleLabels,y=x.length;if(t.visible){for(var w=0;w<y;w++){if(t.visibleLabels[w].y=0,"string"==typeof t.visibleLabels[w].Text&&-1!=t.visibleLabels[w].Text.indexOf("<br>")&&"vertical"==t.orientation){s=t.visibleLabels[w].Text.split("<br>"),a=this._getHighestLabel(t,e(this.svgObject).width(),s);var C=this._measureText(a,e(this.svgObject).width(),t.font,t.labelRotation)}else var C=this._measureText(t.visibleLabels[w].Text,e(this.svgObject).width(),t.font,t.labelRotation);l.width<C.width&&(l.width=C.width,d=t.visibleLabels[w].Text),l.height<C.height&&(l.height=C.height)}if(t.enableTrim||"trim"==u&&"vertical"!=t.orientation){var S=t.maximumLabelWidth;l.width=l.width>S?S:l.width}if(l.rows=1,l.maxWidth=l.width,l.maxHeight=l.height,!h&&(v||u)){var T=0;if("rotate45"==u?T=45:"rotate90"==u&&(T=90),v=null!=v||"vertical"==g?v:T,t.rotationValue=v,v){d=ej.isNullOrUndefined(d)?"":d;var R=this._measureText(d,e(this.svgObject).width(),t.font,t.labelRotation);if((t.enableTrim||"trim"==u)&&R.width>S&&""!=d){var k,O,D=d;for(k=1;k<D.toString().length;k++)if(D=D.toString().substring(0,k)+"... ",O=this._measureText(D,e(i.svgObject).width(),t.font),O.width>=S){D=D.toString().substring(0,k-1)+"... ",d=D;break}}d=(u||t.enableTrim)&&v?"string"==typeof d&&-1!=d.indexOf("<br>")?this._getHighestLabel(t,i,null):d:this._getHighestLabel(t,i,null);var I=this.rotatedLabel(t,i,v,d);t.labelIntersectAction&&"multiplerows"==t.labelIntersectAction.toLowerCase()&&(b=l.height+I.height),l.height=t.rowsCount&&t.rowsCount>1&&90!=v&&t.enableTrim?t.rowsCount*l.height:I.height,l.width=I.width}}if(t.labelIntersectAction)if(!t.rowsCount||"none"!=u&&"trim"!=u&&"hide"!=u&&0!=v||"wrap"==u&&!t.enableTrim||"wrapbyword"==u&&!t.enableTrim||"multiplerows"==u&&!t.enableTrim){if("wrap"==u||"wrapbyword"==u){var j,L;if(p=p||ej.datavisualization.Chart.LabelPlacement.BetweenTicks,"betweenticks"==p.toLowerCase()?(L=1+(t.labels.length>1?-.5:0),L=_?parseFloat(L.toFixed(_)):parseFloat(L.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(c.interval)?1:ej.EjSvgRender.utils._decimalPlaces(c.interval))),j=Math.ceil((L-c.min)/(c.max-c.min)*t.length)):j=Math.ceil(t.length/x.length),"horizontal"==t.orientation){var A,E=0,P=0,M=t.labels.length>0&&"datetimecategory"!=t.valueType?t.labels:t.visibleLabels,F=t.width?t.width/M.length:(t.length-(i.svgWidth-t.length)-20)/M.length;t.labelsCollection=[];for(var N=0;N<M.length;N++){var z=0,V=[],B=[],H="object"==typeof M[N]?M[N].Text:M[N];"string"==typeof H&&-1!=H.indexOf("<br>")?B=H.split("<br>"):B.push(H);for(var Y=0;Y<B.length;Y++){var U=ej.EjAxisRenderer.prototype.rowscalculation(B[Y],i.model.m_AreaBounds,t,F,null);z=U.length+z;for(var k=0;k<U.length;k++)V.push(U[k])}if(v){d=this._getHighestLabel(t,i,V);var W=this._measureText(d,e(i.svgObject).width(),t.font).width;P<W&&(P=W,A=d)}E=Math.max(z,E),t.labelsCollection[N]=V}var I=this.rotatedLabel(t,i,v,A)}j=j<0?Math.ceil(t.length/x.length):j;var X=Math.round(l.width/j);l.rows=v?X-1:X+1,l.rows<0&&(l.rows=0);var G=E&&!v?E:l.rows;E>X&&!v&&(G-=1),l.height=v?I.height+G*I.height:l.height+G*l.height}else if("multiplerows"==u){var $=i._getLegendSpace(),q=i.model.border.width,Q=(i.model._axes[1],e(i.svgObject).width()-i.model.margin.left-i.model.margin.right);n=t.title,o=n.text;var K=""!=o&&t.visible?this._measureText(o,Q,n.font).height+2*i.model.elementSpacing:0,Z=i.model.elementSpacing+K+t.majorTickLines.size+t.axisLine.width,J=i._getYValues(i.model._visibleSeries[0].points),ee=Math.max.apply(Math,J),te=i.model._axes[1],C=this._measureText(ee,e(this.svgObject).width(),te.font,te.labelRotation),ie=$.rightLegendWidth+Z+C.width+i.model.margin.right+i.model.margin.left+2*q,se=e(i.svgObject).width()-ie;if(f){var A,ae=0,re=[],X=0,P=0;for(w=0;w<x.length;w++){var ne=x[w],oe=[];"string"==typeof ne.Text&&-1!=ne.Text.indexOf("<br>")?oe=ne.Text.split("<br>"):oe.push(ne);var le=oe.length,de=!1;b=Math.max(b,ae),ae=ne.y=l.height;var D=this._measureText(ne.Text,e(this.svgObject).width(),t.font),he=D.height,ce=Math.abs(Math.floor((ne.Value-c.min)/c.delta*se));if(re.length>0)for(var ue=re,pe=!0,me=0;me<ue.length&&pe;me++)for(var z=0,ge=ue[me],N=0;ge&&N<ge.length;N++)for(var Y=0;Y<le;Y++){var O=ej.EjSvgRender.utils._measureText(1==le?oe[Y].Text:oe[Y],e(this.svgObject).width(),t.font).width,he=ej.EjSvgRender.utils._measureText(oe[Y],e(this.svgObject).width(),t.font).height,fe=N==ge.length?ge[N-1]:ge[N],_e=Math.abs(Math.floor((fe.Value-c.min)/c.delta*se)),ve=ej.EjSvgRender.utils._measureText(fe.Text,e(this.svgObject).width(),t.font).width;O/=2;var be=_e+(t.isInversed?-ve/2:ve/2);if(be>=ce-O)ae=ne.y+he,ne.y+=he,z++,me+1==ue.length&&(pe=!1);else if(N+1==ge.length){pe=Y!=le-1;break}}if(ne.y=ae,X=ae/he-1,void 0==re[X]&&(re[X]=[]),1==le)re[X].push(ne);else for(var Y=0;Y<le;Y++)void 0==re[X]&&(re[X]=[]),re[X].push({Text:oe[Y],Value:ne.Value}),Y!=le-1&&(X+=1,ae=ne.y+he)}b=re.length*he,l.height=l.height>b?l.height:b,he>0&&(l.rows=m?Math.round((b+he)/he):Math.round(b/he)),l.rows=v?l.rows-1:l.rows,l.rows<1&&(l.rows=1)}if(!f){var xe=0;for(w=0;w<t.visibleLabels.length;w++){ne=t.visibleLabels[w],D=this._measureText(ne.Text,e(this.svgObject).width(),t.font),O=D.width,he=D.height,ce=Math.abs(Math.floor((ne.Value-t.visibleRange.min)/t.visibleRange.delta*t.length));for(var ye=0;ye<w;ye++){ge=t.visibleLabels[ye],r=Math.abs(Math.floor((ge.Value-t.visibleRange.min)/t.visibleRange.delta*t.length));var we=this._measureText(ge.Text,e(this.svgObject).width(),t.font).height;be=r+we/2,be>ce-he/2&&t.visibleLabels[ye].y==ne.y&&(xe=ne.y+O,ne.y=xe,de=!0)}var Ce=xe}l.width=l.width+Ce+(de?5:0)}}}else 0==v&&(l.rows=t.rowsCount,l.height=t.rowsCount*l.height)}return l},rotatedLabel:function(e,t,i,s,a){var r={"font-size":e.font.size,transform:"rotate("+i+",0,0)","font-family":e.font.fontFamily,"font-style":e.font.fontStyle,rotateAngle:"rotate("+i+"deg)","text-anchor":"middle"};t=a?this.chartObj:t;var n=t.svgRenderer.createText(r,s);return{height:Math.ceil(this._measureBounds(n,t).height),width:Math.ceil(this._measureBounds(n,t).width)}},_getTransform:function(e,t,i){var s,a,r,n;return i?(s=t.x,a=e.y,r=t.width,n=e.height):(s=e.x,a=t.y,r=e.width,n=t.height),{x:s,y:a,width:r,height:n}},_calculateroundedCorner:function(e,t,i,s,a,r){var n,o,l,d,h,c=t.x,u=t.y,p=this.chartObj.model.enableCanvasRendering&&!r?5/4:0,m=t.width,g=t.height;return"object"!=typeof e||ej.util.isNullOrUndefined(e)?n=o=l=d=e:(n=e.topLeft,o=e.bottomLeft,l=e.topRight,d=e.bottomRight),n=ej.util.isNullOrUndefined(t.rx)?n:t.rx,o=ej.util.isNullOrUndefined(t.rx)?o:t.rx,l=ej.util.isNullOrUndefined(t.ry)?l:t.ry,d=ej.util.isNullOrUndefined(t.ry)?d:t.ry,h="M "+c+" "+(n+u)+" Q "+c+" "+u+" "+(c+n)+" "+u+" ",i&&"top"==s&&(h+="L "+(c+m/2-2.5+p)+" "+u+" L "+(c+m/2+p-a)+" "+(u-5)+" L "+(c+m/2+2.5+p)+" "+u+" "),h+="L "+(c+m-l)+" "+u+" Q "+(c+m)+" "+u+" "+(c+m)+" "+(u+l)+" ",i&&"right"==s&&(h+="L "+(c+m)+" "+(u+g/2-2.5+p)+" L "+(c+m+5)+" "+(u+g/2+p-a)+" L "+(c+m)+" "+(u+g/2+2.5+p)+" "),h+="L "+(c+m)+" "+(u+g-d)+" Q "+(c+m)+" "+(u+g)+" "+(c+m-d)+" "+(u+g)+" ",i&&"bottom"==s&&(h+="L "+(c+m/2-2.5+p)+" "+(u+g)+" L "+(c+m/2+p-a)+" "+(u+g+5)+" L "+(c+m/2+2.5+p)+" "+(u+g)+" "),h+="L "+(c+o)+" "+(u+g)+" Q "+c+" "+(u+g)+" "+c+" "+(u+g-o)+" ",i&&"left"==s&&(h+="L "+c+" "+(u+g/2-2.5+p)+" L "+(c-5)+" "+(u+g/2+p-a)+" L "+c+" "+(u+g/2+2.5+p)+" "),h+="L "+c+" "+(n+u)+" z"},browserInfo:function(){var e={},t=[],i={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie) ([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var s in i)if(i.hasOwnProperty(s)&&(t=navigator.userAgent.match(i[s]))){e.name=t[1].toLowerCase(),e.version=t[2],navigator.userAgent.match(/Trident\/7\./)&&(e.name="msie");break}return e.isMSPointerEnabled="msie"==e.name&&e.version>9&&window.navigator.msPointerEnabled,e.pointerEnabled=window.navigator.pointerEnabled,e},_measureText:function(t,i,s){if(this.chartObj&&this.chartObj.chartExtensions){var a=this.chartObj.chartExtensions.chartLabelCache.getTextSize(t,i,s);if(a)return a}var r=e(document).find("#measureTex");if(e("#measureTex").css("display","block"),0==r.length){var n=document.createElement("text");e(n).attr({id:"measureTex"}),document.body.appendChild(n)}else var n=r[0];var o=null,l=null,d=null,h=null;if("string"==typeof t&&(t.indexOf("<")>-1||t.indexOf(">")>-1)){for(var c=t.split(" "),u=0;u<c.length;u++)-1==c[u].indexOf("<br/>")&&(c[u]=c[u].replace(/[<>]/g,"&"));t=c.join(" ")}if(/<\/?[a-z][\s\S]*>/.test(t)?e(n).html(t):n.textContent=t,void 0!=s&&void 0==s.size){var p=s;p=p.split(" "),o=p[0],l=p[1],d=p[2],h=p[3]}null!=s&&(n.style.fontSize=s.size>0?s.size+"px":s.size?s.size:l,n.style.fontStyle&&(n.style.fontStyle=s.fontStyle?s.fontStyle:o),n.style.fontFamily=s.fontFamily?s.fontFamily:d,-1==window.navigator.userAgent.indexOf("MSIE 8.0")&&(n.style.fontWeight=s.fontWeight?s.fontWeight:h)),n.style.backgroundColor="white",n.style.position="absolute",n.style.top=-100,n.style.left=0,n.style.visibility="hidden",n.style.whiteSpace="nowrap",i&&(n.style.maxwidth=i+"px");var m={width:n.offsetWidth,height:n.offsetHeight};return e("#measureTex").css("display","none"),this.chartObj&&this.chartObj.chartExtensions&&this.chartObj.chartExtensions.chartLabelCache.cacheTextSize(t,i,s,m),m},_trimText:function(e,t,i){var s,a;s=e.toString(),a=s.length;for(var r=1;r<a;r++)if(s=e.substring(0,r)+"...",ej.EjSvgRender.utils._measureText(s,null,i).width>=t)return s=s.substring(0,r-1)+"... ";return e},_measureBounds:function(t,i){i.model.enableCanvasRendering?e(document.body).append(t):(i.svgRenderer.append(t,i.svgObject),i.svgRenderer.append(i.svgObject,i.element));var s=t.getBoundingClientRect(),a={left:s.left,right:s.right,top:s.top,bottom:s.bottom,width:s.right-s.left,height:s.bottom-s.top};return e(t).remove(),a},_drawAxesBoundsClipPath:function(t,i,s){var a,r=e(t),n=this._getTransform(i.xAxis,i.yAxis,s.model.requireInvertedAxes),o="polaraxes"==s.model.AreaType?e(s.svgObject).width():n.width,l="polaraxes"==s.model.AreaType?e(s.svgObject).height():n.height,d=s.model.requireInvertedAxes?i.yAxis.plotOffset:i.xAxis.plotOffset,h=s.model.requireInvertedAxes?i.xAxis.plotOffset:i.yAxis.plotOffset;"polaraxes"==s.model.AreaType?(a={id:t?t.id+"_ClipRect":"",cx:s.model.centerX,cy:s.model.centerY,r:s.model.Radius,fill:"white","stroke-width":1,stroke:"transparent"},s.svgRenderer.drawCircularClipPath(a,t)):(a={id:t?t.id+"_ClipRect":"",x:0-d,y:0-h,width:o+2*d,height:l+2*h,fill:"white","stroke-width":1,stroke:"transparent"},s.svgRenderer.drawClipPath(a,t)),a.id.indexOf("_Rect")&&(a.id=a.id.replace("_Rect","")),r.attr("clip-path","url(#"+a.id+")")},_getStringBuilder:function(){var e=[],t=0;return{append:function(i){return e[t++]=i,this},remove:function(t,i){return e.splice(t,i||1),this},insert:function(t,i){return e.splice(t,0,i),this},toString:function(t){return e.join(t||"")}}},_addRegion:function(t,i,s,a,r){var n=s.type,o=e.inArray(s,t.model._visibleSeries);if(o>=0){var l={SeriesIndex:o,Region:{PointIndex:r,Bounds:i},type:n};t.model.chartRegions.push(l)}},AddRegion:function(e,t,i){if(i){var s={isStripLine:i,Region:{Bounds:t}};e.model.chartRegions.push(s)}},_getSvgXY:function(e,t,i,s){var a,r;return s.model.requireInvertedAxes?(a=e+i.yAxis.x,r=t+i.xAxis.y):(a=e+i.xAxis.x,r=t+i.yAxis.y),{X:a,Y:r}},_getPoint:function(e,t){var i,s,a,r=e.xValue,n="boxandwhisker"==t.type?e.YValues:e.YValues[0],o=t._isTransposed?t.xAxis.height:t.xAxis.width,l=t._isTransposed?t.yAxis.width:t.yAxis.height;return e.location={},t._hiloTypes&&(i=e.YValues[1],i="logarithmic"==t.yAxis._valueType?ej.EjSvgRender.utils._logBase(0==i?1:i,t.xAxis.logBase):i,i=this._getPointXY(i,t.yAxis.visibleRange,t.yAxis.isInversed),e.location.low=(t._isTransposed?i:1-i)*l),s="logarithmic"==t.xAxis._valueType?ej.EjSvgRender.utils._logBase(0==r?1:r,t.xAxis.logBase):r,a="logarithmic"==t.yAxis._valueType?ej.EjSvgRender.utils._logBase(0==n?1:n,t.xAxis.logBase):n,s=this._getPointXY(s,t.xAxis.visibleRange,t.xAxis.isInversed),a=this._getPointXY(a,t.yAxis.visibleRange,t.yAxis.isInversed),e.location.X=t._isTransposed?a*l:s*o,e.location.Y=t._isTransposed?(1-s)*o:(1-a)*l,e.location},_getPointXY:function(e,t,i){var s=0;return s=(e-t.min)/t.delta,s=isNaN(s)?0:s,i?1-s:s},_dateTimeLabelFormat:function(e,t){switch(e.toLowerCase()){case"years":return t._labelFormat="MMM, yyyy";case"months":return t._labelFormat="dd, MMM";case"days":return t._labelFormat="dd/MM/yyyy";case"hours":return t._labelFormat="dd, hh:mm";case"minutes":return t._labelFormat="hh:mm";case"seconds":return t._labelFormat="mm:ss";case"milliseconds":return t._labelFormat="ss:fff";default:return t._labelFormat="dd/MM/yyyy"}},_getFontString:function(e){return null==e&&(e={}),e.FontFamily||(e.FontFamily="Arial"),e.FontStyle||(e.FontStyle="Normal"),e.Size||(e.Size="12px"),e.FontStyle+" "+e.Size+" "+e.FontFamily},_valueToVector:function(e,t){return this._coefficientToVector(this._valueToPolarCoefficient(e,t))},TransformToVisible:function(e,t,i,s){t="logarithmic"==e.xAxis._valueType&&t>0?Math.log(t,e.xAxis.logBase):t,i="logarithmic"==e.xAxis._valueType&&i>0?Math.log(i,e.yAxis.logBase):i;var a=s.model.Radius*this._valueToCoefficient(e.yAxis,i),r=this._valueToVector(e.xAxis,t);return{X:s.model.centerX+a*r.X,Y:s.model.centerY+a*r.Y}},Transform3DToVisible:function(e,t,i,s){if(null!=e.xAxis&&null!=e.yAxis){var a,r=e.xAxis._valueType.toLowerCase();if(t=t="logarithmic"==r&&t>0?math.log(t,void 0):t,i=i,s.model.requireInvertedAxes){var n=s.model.m_AreaBounds.X,o=s.model.m_AreaBounds.Y;return{X:n+e.yAxis.width*ej.EjSvgRender.utils._valueToCoefficient(e.yAxis,i,s),Y:o+e.xAxis.height*(1-ej.EjSvgRender.utils._valueToCoefficient(e.xAxis,t,s))}}var n=e.xAxis.x,o=e.yAxis.y,t=n+Math.round(e.xAxis.width*ej.EjSvgRender.utils._valueToCoefficient(e.xAxis,t,s)),i=o+Math.round(e.yAxis.height*(1-ej.EjSvgRender.utils._valueToCoefficient(e.yAxis,i,s)));return{X:t,Y:i}}return new a(0,0)},_valueToPolarCoefficient:function(e,t){var i,s,a,r=e.visibleRange.min;return"category"!=e._valueType?(i=e.visibleRange.max-e.visibleRange.interval-e.visibleRange.min,s=e.visibleLabels.length-1):(i=e.visibleRange.delta,s=e.visibleLabels.length),a=(t-r)/i,a*=1-1/s,a=isNaN(a)?0:a,e.isInversed?a:1-a},_coefficientToVector:function(e){var t=Math.PI*(1.5-2*e);return{X:Math.cos(t),Y:Math.sin(t)}},_valueToCoefficient:function(e,t,i){if(i&&"polaraxes"==i.model.AreaType)var s=t;else var s=e._valueType&&"logarithmic"==e._valueType.toLowerCase()?ej.EjSvgRender.utils._logBase(0==t?1:t,e.logBase):t;return s=(s-e.visibleRange.min)/e.visibleRange.delta,e.isInversed?1-s:s},_getBoundingClientRect:function(t,i,s,a){var r,n,o=t.getBoundingClientRect(),l=e("#"+i.svgObject.id)[0].getBoundingClientRect();return a?(r=this._getTransform(s.xAxis,s.yAxis,!0).x,n=this._getTransform(s.xAxis,s.yAxis,!0).y):(r=this._getTransform(s.xAxis,s.yAxis,!1).x,n=this._getTransform(s.xAxis,s.yAxis,!1).y),{x:o.left-(r+l.left),y:o.top-(n+l.top),width:o.right-o.left,height:o.bottom-o.top}},_minMax:function(e,t,i){return e>i?i:e<t?t:e},_inside:function(e,t){return""!==e&&(e<=t.max&&e>=t.min)},_logBase:function(e,t){return Math.log(e)/Math.log(t)},_correctRect:function(e,t,i,s){return{X:Math.min(e,i),Y:Math.min(t,s),Width:Math.abs(i-e),Height:Math.abs(s-t)}},_getValuebyPoint:function(e,t,i,s){var a=s?i.xAxis.height:i.xAxis.width,r=s?i.yAxis.width:i.yAxis.height,n=i.xAxis.isInversed?1-e/a:e/a,o=i.yAxis.isInversed?1-t/r:t/r;return n=n*i.xAxis.visibleRange.delta+i.xAxis.visibleRange.min,
o=o*i.yAxis.visibleRange.delta+i.yAxis.visibleRange.min,n="logarithmic"==i.xAxis._valueType?Math.pow(i.xAxis.logBase,n):n,o="logarithmic"==i.yAxis._valueType?Math.pow(i.yAxis.logBase,o):o,{PointX:n,PointY:o}}},ej.EjSvgRender.chartTransform3D={ToRadial:Math.PI/180,transform3D:function(e){return this.vector||(this.vector=new((new ej.Ej3DRender).vector3D),this.matrixobj=new((new ej.Ej3DRender).matrix3D),this.bsptreeobj=new((new ej.Ej3DRender).BSPTreeBuilder),this.polygon=new((new ej.Ej3DRender).polygon3D)),{mViewport:e,Rotation:0,Tilt:0,Depth:0,PerspectiveAngle:0,needUpdate:!0,centeredMatrix:this.matrixobj.getIdentity(),Perspective:this.matrixobj.getIdentity(),resultMatrix:this.matrixobj.getIdentity(),viewMatrix:this.matrixobj.getIdentity(),Depth:0}},transform:function(e){this.setCenter(this.vector.vector3D(e.mViewport.Width/2,e.mViewport.Height/2,e.Depth/2),e),this.setViewMatrix(this.matrixobj.transform(0,0,e.Depth),e),this.setViewMatrix(this.matrixobj.getMatrixMultiplication(e.viewMatrix,this.matrixobj.turn(-this.ToRadial*e.Rotation)),e),this.setViewMatrix(this.matrixobj.getMatrixMultiplication(e.viewMatrix,this.matrixobj.tilt(-this.ToRadial*e.Tilt)),e),this.updatePerspective(e.PerspectiveAngle,e),e.needUpdate=!0},updatePerspective:function(e,t){var i=(t.mViewport.Width+t.mViewport.Height)*Math.tan(this.degreeToRadianConverter((180-Math.abs(e%181))/2))+2*t.Depth/2;t.Perspective[0][0]=i,t.Perspective[1][1]=i,t.Perspective[2][3]=1,t.Perspective[3][3]=i},degreeToRadianConverter:function(e){return e*Math.PI/180},toScreen:function(e,t,i,s){var i=i||this.result;return s?(this.matrixobj=s,e=s.getMatrixVectorMutiple(i(t,s),e)):(t.chartObj=this.matrixobj,e=this.matrixobj.getMatrixVectorMutiple(i(t),e)),{x:e.x,y:e.y}},setViewMatrix:function(e,t){t.viewMatrix!=e&&(t.viewMatrix=e,t.needUpdate=!0)},setCenteredMatrix:function(e,t){t.viewMatrix!=e&&(t.centeredMatrix=e,t.needUpdate=!0)},result:function(e,t){var i=e.chartObj?e.chartObj:this.matrixobj;if(i||(i=t),!e.needUpdate)return e.resultMatrix;var s=this.matrixobj?this.matrixobj:t;return e.resultMatrix=i.getMatrixMultiplication(s.getInvertal(e.centeredMatrix),e.Perspective),e.resultMatrix=i.getMatrixMultiplication(e.resultMatrix,e.viewMatrix),e.resultMatrix=i.getMatrixMultiplication(e.resultMatrix,e.centeredMatrix),e.needUpdate=!1,e.resultMatrix},setCenter:function(e,t){t.centeredMatrix=this.matrixobj.transform(-e.x,-e.y,-e.z),t.needUpdate=!0},toPlane:function(e,t,i){var s=this.vector.vector3D(e.x,e.y,0),a=this.vector.vector3DPlus(s,this.vector.vector3D(0,0,1));return s=this.vector.vector3DMultiply(i.centeredMatrix,s),a=this.vector.vector3DMultiply(i.centeredMatrix,a),s=this.vector.vector3DMultiply(this.matrixobj.getInvertal(i.Perspective),s),a=this.vector.vector3DMultiply(this.matrixobj.getInvertal(i.Perspective),a),s=this.polygon.getPoint(s,this.vector.vector3DMinus(a-s)),s=this.vector.vector3DMultiply(this.matrixobj.getInvertal(i.viewMatrix),s),s=this.vector.vector3DMultiply(this.matrixobj.getInvertal(i.centeredMatrix),s)}},ej.EjSvgRender.chartSymbol={_drawSeriesType:function(e,t,i){var s=i.model.series[t.SeriesIndex].type.toLowerCase(),a=i.legendItem.drawType;switch(s=ej.util.isNullOrUndefined(a)?s:a){case ej.datavisualization.Chart.Type.Line:;return ej.util.isNullOrUndefined(a)?this._drawLine(e,t,i,i.gLegendItemEle):this._drawStraightLine(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.StepLine:return this._drawStepLine(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.StackingArea:case ej.datavisualization.Chart.Type.StackingArea100:case ej.datavisualization.Chart.Type.Area:case ej.datavisualization.Chart.Type.RangeArea:return this._drawArea(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.StepArea:return this._drawStepArea(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Bar:case ej.datavisualization.Chart.Type.StackingBar100:case ej.datavisualization.Chart.Type.StackingBar:return this._drawBar(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Pie:return this._drawPie(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Doughnut:return this._drawDoughnut(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Hilo:return this._drawHilo(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.HiloOpenClose:return this._drawHiloOpenClose(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Candle:return this._drawCandle(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Pyramid:return this._drawPyramid(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Funnel:return this._drawFunnel(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Spline:return this._drawSpline(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.SplineArea:case ej.datavisualization.Chart.Type.StackingSplineArea:case ej.datavisualization.Chart.Type.StackingSplineArea100:return this._drawSplineArea(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.RangeColumn:return this._drawRangeColumn(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Bubble:case ej.datavisualization.Chart.Type.Scatter:return this._drawCircle(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Column:case ej.datavisualization.Chart.Type.StackingColumn:case ej.datavisualization.Chart.Type.StackingColumn100:case ej.datavisualization.Chart.Type.Waterfall:return this._drawColumn(e,t,i,i.gLegendItemEle);default:return this._drawRectangle(e,t,i,i.gLegendItemEle)}},_drawCircle:function(e,t,i,s){var a=i.svgRenderer,r=(i.svgObject,t.ShapeSize),n=Math.sqrt(r.height*r.height+r.width*r.width)/2,o=t.Style,l={id:t.ID,cx:e.startX,cy:e.startY,r:n,fill:o.Color,"stroke-width":o.BorderWidth,stroke:o.BorderColor,opacity:o.Opacity,visibility:o.Visibility,lgndCtx:t.context};return a.drawCircle(l,s),e.startX-n},_drawLeftArrow:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX-n.width/2+n.width)+" "+(e.startY+n.height/4)+" L "+(e.startX-n.width/2+n.width)+" "+(e.startY+-n.height/4)+" L "+(e.startX-n.width/2+n.width/2)+" "+(e.startY+-n.height/4)+" L "+(e.startX-n.width/2+n.width/2)+" "+(e.startY+-n.height/2)+" L "+(e.startX-n.width/2)+" "+e.startY+" L "+(e.startX-n.width/2+n.width/2)+" "+(e.startY+n.height/2)+" L "+(e.startX-n.width/2+n.width/2)+" "+(e.startY+n.height/4)+" L "+(e.startX-n.width/2+n.width)+" "+(e.startY+n.height/4)+" z";var o={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawRightArrow:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX-n.width/2)+" "+(e.startY+n.height/4)+" L "+(e.startX-n.width/2)+" "+(e.startY+-n.height/4)+" L "+(e.startX-n.width/2+n.width/2)+" "+(e.startY+-n.height/4)+" L "+(e.startX-n.width/2+n.width/2)+" "+(e.startY+-n.height/2)+" L "+(e.startX-n.width/2+n.width)+" "+e.startY+" L "+(e.startX-n.width/2+n.width/2)+" "+(e.startY+n.height/2)+" L "+(e.startX-n.width/2+n.width/2)+" "+(e.startY+n.height/4)+" L "+(e.startX-n.width/2)+" "+(e.startY+n.height/4)+" z";var o={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawUpArrow:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX-n.width/2+n.width/4)+" "+(e.startY-n.height/2+n.height)+" L "+(e.startX-n.width/2+n.width/4)+" "+(e.startY-n.height/2+n.height/2)+" L "+(e.startX-n.width/2)+" "+(e.startY-n.height/2+n.height/2)+" L "+e.startX+" "+(e.startY-n.height/2)+" L "+(e.startX+n.width/2)+" "+(e.startY-n.height/2+n.height/2)+" L "+(e.startX+n.width/2-n.width/4)+" "+(e.startY-n.height/2+n.height/2)+" L "+(e.startX+n.width/2-n.width/4)+" "+(e.startY-n.height/2+n.height)+" L "+(e.startX-n.width/2+n.width/4)+" "+(e.startY-n.height/2+n.height)+" z";var o={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawDownArrow:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX-n.width/2+n.width/4)+" "+(e.startY-n.height/2)+" L "+(e.startX+n.width/2-n.width/4)+" "+(e.startY-n.height/2)+" L "+(e.startX+n.width/2-n.width/4)+" "+(e.startY-n.height/2+n.height/2)+" L "+(e.startX+n.width/2)+" "+(e.startY-n.height/2+n.height/2)+" L "+e.startX+" "+(e.startY-n.height/2+n.height)+" L "+(e.startX-n.width/2)+" "+(e.startY-n.height/2+n.height/2)+" L "+(e.startX-n.width/2+n.width/4)+" "+(e.startY-n.height/2+n.height/2)+" L "+(e.startX-n.width/2+n.width/4)+" "+(e.startY-n.height/2)+" z";var o={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawCross:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX+-n.width/2)+" "+e.startY+" L "+(e.startX+n.width/2)+" "+e.startY+" M "+e.startX+" "+(e.startY+n.height/2)+" L "+e.startX+" "+(e.startY+-n.height/2);var o={id:t.ID,opacity:t.Style.Opacity,"stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawHorizLine:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX+-n.width/2)+" "+e.startY+" L "+(e.startX+n.width/2)+" "+e.startY;var o={id:t.ID,opacity:t.Style.Opacity,"stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawVertLine:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+e.startX+" "+(e.startY+n.height/2)+" L "+e.startX+" "+(e.startY+-n.height/2);var o={id:t.ID,opacity:t.Style.Opacity,"stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawTriangle:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX+-n.width/2)+" "+(e.startY+n.height/2)+" L "+e.startX+" "+(e.startY+-n.height/2)+" L "+(e.startX+n.width/2)+" "+(e.startY+n.height/2)+" L "+(e.startX+-n.width/2)+" "+(e.startY+n.height/2)+" z";var o={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawInvertedTriangle:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX+n.width/2)+" "+(e.startY-n.height/2)+" L "+e.startX+" "+(e.startY+n.height/2)+" L "+(e.startX-n.width/2)+" "+(e.startY-n.height/2)+" L "+(e.startX+n.width/2)+" "+(e.startY-n.height/2)+" z";var o=(e.startX,e.startY,{id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:a});r.drawPath(o,s)},_drawHexagon:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX+-n.width/2)+" "+e.startY+" L "+(e.startX+-n.width/4)+" "+(e.startY+-n.height/2)+" L "+(e.startX+n.width/4)+" "+(e.startY+-n.height/2)+" L "+(e.startX+n.width/2)+" "+e.startY+" L "+(e.startX+n.width/4)+" "+(e.startY+n.height/2)+" L "+(e.startX+-n.width/4)+" "+(e.startY+n.height/2)+" L "+(e.startX+-n.width/2)+" "+e.startY+" z";var o={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawWedge:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX-n.width)+" "+e.startY+" L "+(e.startX+n.width)+" "+(e.startY+-n.height/2)+" L "+(e.startX+n.width/4*3)+" "+e.startY+" L "+(e.startX+n.width)+" "+(e.startY+n.height/2)+" L "+(e.startX-n.width)+" "+e.startY+" z";var o={"stroke-linecap":"miter","stroke-miterlimit":n.width/4,id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawPentagon:function(e,t,i,s){for(var a=i.svgRenderer,r=(i.svgObject,t.ShapeSize),n=Math.sqrt(r.height*r.height+r.width*r.width)/2,o=ej.EjSvgRender.utils._getStringBuilder(),l=0;l<=5;l++){var d=72*l,h=Math.PI/180*d,c=n*Math.cos(h),u=n*Math.sin(h);0==l?o.append("M "+(e.startX+c)+" "+(e.startY+u)+" "):o.append("L "+(e.startX+c)+" "+(e.startY+u)+" ")}o.append("z");var p=o.toString(),m={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:p};a.drawPath(m,s)},_drawStar:function(e,t,i,s){var a,r=i.svgRenderer,n=t.ShapeSize;i.svgObject;a="M "+(e.startX+n.width/3)+" "+(e.startY+-n.height/2)+" L "+(e.startX+-n.width/2)+" "+(e.startY+n.height/6)+" L "+(e.startX+n.width/2)+" "+(e.startY+n.height/6)+" L "+(e.startX+-n.width/3)+" "+(e.startY+-n.height/2)+" L "+e.startX+" "+(e.startY+n.height/2)+" L "+(e.startX+n.width/3)+" "+(e.startY+-n.height/2)+" z";var o={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawRectangle:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX+-n.width/2)+" "+(e.startY+-n.height/2)+" L "+(e.startX+n.width/2)+" "+(e.startY+-n.height/2)+" L "+(e.startX+n.width/2)+" "+(e.startY+n.height/2)+" L "+(e.startX+-n.width/2)+" "+(e.startY+n.height/2)+" L "+(e.startX+-n.width/2)+" "+(e.startY+-n.height/2)+" z";var o={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawTrapezoid:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX+-n.width/2)+" "+e.startY+" L "+(e.startX+-n.width/2)+" "+(e.startY+-n.height/4)+" L "+(e.startX+-n.width/2+n.width)+" "+(e.startY+-n.height/2)+" L "+(e.startX+-n.width/2+n.width)+" "+(e.startY+n.height/2)+" L "+(e.startX+-n.width/2)+" "+(e.startY+n.height/4)+" L "+(e.startX+-n.width/2)+" "+e.startY+" z";var o={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawDiamond:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX+-n.width/2)+" "+e.startY+" L "+e.startX+" "+(e.startY+-n.height/2)+" L "+(e.startX+n.width/2)+" "+e.startY+" L "+e.startX+" "+(e.startY+n.height/2)+" L "+(e.startX+-n.width/2)+" "+e.startY+" z";var o={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};r.drawPath(o,s)},_drawEllipse:function(e,t,i,s){var a=i.svgRenderer,r=(i.svgObject,t.ShapeSize),n=e.startX,o=e.startY,l={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,cx:n,cy:o,rx:r.width,ry:r.height/2};a.drawEllipse(l,s)},_drawImage:function(e,t,i,s){var a=i.svgRenderer,r=i.svgObject,n=t.ShapeSize,o=e.startX+-n.width/2,l=e.startY+-n.width/2,d=n.width,h=n.height,c={id:r.id+"_image"+t.PointIndex,height:h,width:d,href:t.Imageurl,x:o,y:l,visibility:"visible",lgndCtx:t.context};a.drawImage(c,s)},_drawStraightLine:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize),o=t.ElementSpace;a="M "+(e.startX+-n.width/2+-o/4)+" "+(e.startY+n.height/10)+" L "+(e.startX+n.width/2+o/4)+" "+(e.startY+n.height/10);var l={id:t.ID,fill:t.Style.Color,"stroke-width":2*t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};return r.drawPath(l,s),e.startX+-n.width/2+-o/4},_drawLine:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize),o=t.ElementSpace;if(!0===i.model.enableCanvasRendering){a="M "+(e.startX+-n.width/2+-o/4)+" "+(e.startY+n.height/10)+" L "+(e.startX-Math.floor(n.width/3))+" "+(e.startY+n.height/10)+" M "+(e.startX+Math.floor(n.width/3))+" "+(e.startY+n.height/10)+" L "+(e.startX+n.width/2+o/4)+" "+(e.startY+n.height/10);var l={id:t.ID,fill:t.Style.Color,"stroke-width":2*t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0},d="M "+(e.startX-Math.floor(n.width/3))+" "+(e.startY+n.height/10)+" a "+Math.floor(n.width/3)+" "+Math.floor(n.width/3)+" 0 1 0 "+2*Math.floor(n.width/3)+" 0 a"+Math.floor(n.width/3)+" "+Math.floor(n.width/3)+" 0 1 0 "+-2*Math.floor(n.width/3)+" 0",h={id:t.ID,fill:"transparent","stroke-width":2*t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:d,lgndCtx:!0};r.drawPath(l,s),r.drawPath(h,s)}else{a="M "+(e.startX+-n.width/2+-o/4)+" "+(e.startY+n.height/10)+" L "+(e.startX-Math.floor(n.width/3))+" "+(e.startY+n.height/10)+" M "+(e.startX+Math.floor(n.width/3))+" "+(e.startY+n.height/10)+" L "+(e.startX+n.width/2+o/4)+" "+(e.startY+n.height/10)+" M "+(e.startX-Math.floor(n.width/3))+" "+(e.startY+n.height/10)+" a "+Math.floor(n.width/3)+" "+Math.floor(n.width/3)+" 0 1 0 "+2*Math.floor(n.width/3)+" 0 a"+Math.floor(n.width/3)+" "+Math.floor(n.width/3)+" 0 1 0 "+-2*Math.floor(n.width/3)+" 0";var l={id:t.ID,fill:"transparent","stroke-width":2*t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};r.drawPath(l,s)}return e.startX+-n.width/2+-o/4},_drawColumn:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize),o=t.ElementSpace;a="M "+(e.startX-n.width/5*3)+" "+(e.startY-n.height/5)+" L "+(e.startX+-n.width/10*3)+" "+(e.startY-n.height/5)+" L "+(e.startX+-n.width/10*3)+" "+(e.startY+n.height/2)+" L "+(e.startX-n.height/5*3)+" "+(e.startY+n.height/2)+" Z M "+(e.startX+-n.width/10-n.width/20)+" "+(e.startY-n.height/4-o/2)+" L "+(e.startX+n.width/10+n.width/20)+" "+(e.startY-n.height/4-o/2)+" L "+(e.startX+n.width/10+n.width/20)+" "+(e.startY+n.height/2)+" L "+(e.startX+-n.width/10-n.width/20)+" "+(e.startY+n.height/2)+" Z M "+(e.startX+n.width/10*3)+" "+e.startY+" L "+(e.startX+n.width/5*3)+" "+e.startY+" L "+(e.startX+n.width/5*3)+" "+(e.startY+n.height/2)+" L "+(e.startX+n.width/10*3)+" "+(e.startY+n.height/2)+" Z";var l={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};return r.drawPath(l,s),e.startX-n.width/5*3},_drawRangeColumn:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize),o=t.ElementSpace;a="M "+(e.startX+-n.width/5)+" "+(e.startY+n.height/2+o/4)+" L "+(e.startX+-n.width/5)+" "+(e.startY-n.height/2-o/4)+" L "+(e.startX+n.width/2)+" "+(e.startY+-n.height/2+-o/4)+" L "+(e.startX+n.width/2)+" "+(e.startY+n.height/2+o/4)+" Z";var l={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};return r.drawPath(l,s),e.startX+-n.width/5},_drawBar:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize),o=t.ElementSpace;a="M "+(e.startX+-n.width/2+-o/4)+" "+(e.startY-n.height/5*3)+" L "+(e.startX+n.width/10*3)+" "+(e.startY-n.height/5*3)+" L "+(e.startX+n.width/10*3)+" "+(e.startY-n.height/10*3)+" L "+(e.startX-n.width/2+-o/4)+" "+(e.startY-n.height/10*3)+" Z M "+(e.startX+-n.width/2+-o/4)+" "+(e.startY-n.height/5+o/20)+" L "+(e.startX+n.width/2+o/4)+" "+(e.startY-n.height/5+o/20)+" L "+(e.startX+n.width/2+o/4)+" "+(e.startY+n.height/10+o/20)+" L "+(e.startX-n.width/2+-o/4)+" "+(e.startY+n.height/10+o/20)+" Z M "+(e.startX-n.width/2+-o/4)+" "+(e.startY+n.height/5+o/10)+" L "+(e.startX+-n.width/4)+" "+(e.startY+n.height/5+o/10)+" L "+(e.startX+-n.width/4)+" "+(e.startY+n.height/2+o/10)+" L "+(e.startX-n.width/2+-o/4)+" "+(e.startY+n.height/2+o/10)+" Z";var l={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};return r.drawPath(l,s),e.startX+-n.width/2+-o/4},_drawStepLine:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize),o=t.ElementSpace;a="M "+(e.startX+-n.width/2-o/4)+" "+(e.startY+n.height/2)+" L "+(e.startX+-n.width/2+n.width/10)+" "+(e.startY+n.height/2)+" L "+(e.startX+-n.width/2+n.width/10)+" "+e.startY+" L "+(e.startX+-n.width/10)+" "+e.startY+" L "+(e.startX+-n.width/10)+" "+(e.startY+n.height/2)+" L "+(e.startX+n.width/5)+" "+(e.startY+n.height/2)+" L "+(e.startX+n.width/5)+" "+(e.startY+-n.height/2)+" L "+(e.startX+n.width/2)+" "+(e.startY+-n.height/2)+"L "+(e.startX+n.width/2)+" "+(e.startY+n.height/2)+" L"+(e.startX+n.width/2+o/4)+" "+(e.startY+n.height/2);var l={id:t.ID,fill:"transparent","stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};return r.drawPath(l,s),e.startX+-n.width/2-o/4},_drawSpline:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX-n.width/2)+" "+(e.startY+n.height/5)+" Q "+e.startX+" "+(e.startY-n.height)+" "+e.startX+" "+(e.startY+n.height/5)+" M "+e.startX+" "+(e.startY+n.height/5)+" Q "+(e.startX+n.width/2)+" "+(e.startY+n.height/2)+" "+(e.startX+n.width/2)+" "+(e.startY-n.height/2);var o={id:t.ID,fill:"transparent","stroke-width":2*t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};return r.drawPath(o,s),e.startX-n.width/2},_drawSplineArea:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize);a="M "+(e.startX-n.width/2)+" "+(e.startY+n.height/5)+" Q "+e.startX+" "+(e.startY-n.height)+" "+e.startX+" "+(e.startY+n.height/5)+" Z M "+e.startX+" "+(e.startY+n.height/5)+" Q "+(e.startX+n.width/2)+" "+(e.startY+n.height/2)+" "+(e.startX+n.width/2)+" "+(e.startY-n.height/2)+"  Z";var o={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};return r.drawPath(o,s),e.startX-n.width/2},_drawArea:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize),o=t.ElementSpace;a="M "+(e.startX-n.width/2-o/4)+" "+(e.startY+n.height/2)+" L "+(e.startX+-n.width/4+-o/8)+" "+(e.startY-n.height/2)+" L "+e.startX+" "+(e.startY+n.height/4)+" L "+(e.startX+n.width/4+o/8)+" "+(e.startY+-n.height/2+n.height/4)+" L "+(e.startX+n.height/2+o/4)+" "+(e.startY+n.height/2)+" Z";var l={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};return r.drawPath(l,s),e.startX-n.width/2-o/4},_drawStepArea:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize),o=t.ElementSpace;a="M "+(e.startX+-n.width/2+-o/4)+" "+(e.startY+n.height/2)+" L "+(e.startX+-n.width/2+-o/4)+" "+(e.startY+-n.height/2)+" L "+(e.startX-n.width/4)+" "+(e.startY-n.height/2)+" L "+(e.startX-n.width/4)+" "+(e.startY-n.height/4)+" L "+(e.startX+n.width/4)+" "+(e.startY-n.height/4)+" L "+(e.startX+n.width/4)+" "+e.startX+" L "+(e.startX+n.width/2+o/4)+" "+e.startY+" L "+(e.startX+n.width/2+o/4)+" "+(e.startY+n.height/2)+" Z";var l={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};return r.drawPath(l,s),e.startX+-n.width/2+-o/4},_drawPyramid:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize),o=t.ElementSpace;a="M "+(e.startX+-n.width/2+-o/4)+" "+(e.startY+n.height/2+o/8)+" L "+e.startX+" "+(e.startY+-n.height/2+-o/8)+" L "+(e.startX+n.width/2+o/4)+" "+(e.startY+n.height/2+o/8)+" Z";var l={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};return r.drawPath(l,s),e.startX+-n.width/2+-o/4},_drawFunnel:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize),o=t.ElementSpace;a="M "+(e.startX+-n.width/2+-o/5)+" "+(e.startY+-n.height/2+-o/4)+" L "+(e.startX+-n.width/5)+" "+(e.startY+n.height/4)+" L "+(e.startX+-n.width/5)+" "+(e.startY+n.height/2+o/4)+" L "+(e.startX+n.width/5)+" "+(e.startY+n.height/2+o/4)+" L "+(e.startX+n.width/5)+" "+(e.startY+n.height/4)+" L "+(e.startX+n.width/2+o/5)+" "+(e.startY+-n.height/2+-o/4)+" Z";var l={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};return r.drawPath(l,s),e.startX+-n.width/2+-o/5},_drawCandle:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize),o=t.ElementSpace;a="M "+(e.startX+-n.width/2)+" "+(e.startY+n.height/4+o/8)+" L "+(e.startX+n.width/2)+" "+(e.startY+n.height/4+o/8)+" L "+(e.startX+n.width/2)+" "+(e.startY+-n.height/2+o/8)+" L "+(e.startX+-n.width/2)+" "+(e.startY+-n.height/2+o/8)+" Z M "+e.startX+" "+(e.startY+-n.height/2+o/8)+" L "+e.startX+" "+(e.startY+-n.height/2+-o/4)+" M "+e.startX+" "+(e.startY+n.height/4+o/8)+" L "+e.startX+" "+(e.startY+n.height/4+o/2);var l={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};return r.drawPath(l,s),e.startX+-n.width/2},_drawHilo:function(e,t,i,s){var a,r=i.svgRenderer,n=(i.svgObject,t.ShapeSize),o=t.ElementSpace;a="M "+(e.startX+n.width/2)+" "+(e.startY+n.height/2+o/4)+" L "+(e.startX+n.width/2)+" "+(e.startY+-n.height/2+-o/4);var l={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:a,lgndCtx:!0};return r.drawPath(l,s),e.startX+n.width/2},_drawHiloOpenClose:function(e,i,s,a){var r,n=s.svgRenderer,o=(s.svgObject,i.ShapeSize),l=(t(18,12,4.0710678118654755,270),i.ElementSpace);r="M "+e.startX+" "+(e.startY-o.height/10*3)+" L "+(e.startX-o.width/2-l/4)+" "+(e.startY-o.height/10*3)+" M "+e.startX+" "+(e.startY-o.height/2-l/4)+" L "+e.startX+" "+(e.startY+o.height/2+l/4)+" M "+e.startX+" "+(e.startY+o.height/10*3)+" L "+(e.startX+o.width/2+l/4)+" "+(e.startY+o.height/10*3);var d={id:i.ID,fill:"transparent","stroke-width":i.Style.BorderWidth,stroke:i.Style.Color,opacity:i.Style.Opacity,visibility:i.Style.Visibility,d:r,lgndCtx:!0};return n.drawPath(d,a),e.startX-o.width/2},_drawDoughnut:function(e,i,s,a){var r=s.svgRenderer,n=(s.svgObject,i.ShapeSize),o=i.ElementSpace,l=Math.sqrt(n.height*n.width)/2;l+=o/5;var d=t(e.startX,e.startY,l,270),h=t(e.startX+n.width/10,e.startY,l,270),o=i.ElementSpace,c="M "+e.startX+" "+e.startY+" L "+(e.startX+l)+" "+e.startY+" A "+l+" "+l+" 0 1 1 "+d[0]+" "+d[1]+" Z M "+(e.startX+n.width/10)+" "+(e.startY-n.height/10)+" L"+(e.startX+l)+" "+(e.startY-n.height/10)+" A "+l+" "+l+" 0 0 0 "+h[0]+" "+h[1]+" Z",u={id:i.ID,fill:i.Style.Color,"stroke-width":i.Style.BorderWidth,stroke:i.Style.BorderColor,opacity:i.Style.Opacity,visibility:i.Style.Visibility,d:c,lgndCtx:!0},p={id:i.ID,cx:e.startX,cy:e.startY,r:l/2,lgndCtx:!0,fill:"white","stroke-width":i.Style.BorderWidth,stroke:i.Style.BorderColor,opacity:i.Style.Opacity,visibility:i.Style.Visibility};return r.drawPath(u,a),r.drawCircle(p,a),e.startX-l},_drawPie:function(e,i,s,a){var r=s.svgRenderer,n=(s.svgObject,i.ShapeSize),o=i.ElementSpace,l=Math.sqrt(n.height*n.width)/2;l+=o/5;var d=t(e.startX,e.startY,l,270),h=t(e.startX+n.width/10,e.startY,l,270),o=i.ElementSpace,c="M "+e.startX+" "+e.startY+" L "+(e.startX+l)+" "+e.startY+" A "+l+" "+l+" 0 1 1 "+d[0]+" "+d[1]+" Z M "+(e.startX+n.width/10)+" "+(e.startY-n.height/10)+" L"+(e.startX+l)+" "+(e.startY-n.height/10)+" A "+l+" "+l+" 0 0 0 "+h[0]+" "+h[1]+" Z",u={id:i.ID,fill:i.Style.Color,"stroke-width":i.Style.BorderWidth,stroke:i.Style.BorderColor,opacity:i.Style.Opacity,visibility:i.Style.Visibility,d:c,lgndCtx:!0};return r.drawPath(u,a),e.startX-l}},ej.EjSvgRender.seriesPalette={defaultMetro:["#E94649","#F6B53F","#6FAAB0","#C4C24A","#FB954F","#005277","#8BC652","#69D2E7","#E27F2D","#6A4B82"],defaultHighContrast:["#F93A00","#44E2D6","#DDD10D","#0AA368","#0556CB","#AB40B2","#5F930A","#D12E41","#E0670E","#008FFF"],defaultOffice:["#005277","#8BC652","#6A4B82","#E94649","#6FAAB0","#F7B74F","#C4C24A","#EF863F","#69D2E7","#FFD13E"],defaultMaterial:["#663AB6","#EB3F79","#F8AB1D","#B82E3D","#049CB1","#F2424F","#C2C924","#3DA046","#074D67","#02A8F4"],defaultGradient:{borderColors:["#F34649","#F6D321","#6EB9B0","#CBC26A","#FBAF4F","#E2CDB1","#FFC0B7","#68E1E6","#E1A62D","#9C6EBF"],seriesColors:[[{color:"#F34649",colorStop:"0%"},{color:"#B74143",colorStop:"100%"}],[{color:"#F6D321",colorStop:"0%"},{color:"#F6AE26",colorStop:"100%"}],[{color:"#6EB9B0",colorStop:"0%"},{color:"#3F77BD",colorStop:"100%"}],[{color:"#CBC26A",colorStop:"0%"},{color:"#9AAD21",colorStop:"100%"}],[{color:"#FBAF4F",colorStop:"0%"},{color:"#F07542",colorStop:"100%"}],[{color:"#E2CDB1",colorStop:"0%"},{color:"#AAA089",colorStop:"100%"}],[{color:"#8BC652",colorStop:"0%"},{color:"#6F9E41",colorStop:"100%"}],[{color:"#68E1E6",colorStop:"0%"},{color:"#3D9CBE",colorStop:"100%"}],[{color:"#E1A62D",colorStop:"0%"},{color:"#B66824",colorStop:"100%"}],[{color:"#9C6EBF",colorStop:"0%"}],[{color:"#593F6D",colorStop:"100%"}]]},blueMetro:["#005378","#006691","#007EB5","#0D97D4","#00AEFF","#14B9FF","#54CCFF","#87DBFF","#ADE5FF","#C5EDFF"],blueGradient:{seriesColors:[[{color:"#005277",colorStop:"0%"},{color:"#00304F",colorStop:"100%"}],[{color:"#006590",colorStop:"0%"},{color:"#004068",colorStop:"100%"}],[{color:"#007DB4",colorStop:"0%"},{color:"#00558B",colorStop:"100%"}],[{color:"#0D97D4",colorStop:"0%"},{color:"#057FC7",colorStop:"100%"}],[{color:"#00ADFE",colorStop:"0%"},{color:"#008BE9",colorStop:"100%"}],[{color:"#14B8FE",colorStop:"0%"},{color:"#0798EB",colorStop:"100%"}],[{color:"#53CBFF",colorStop:"0%"},{color:"#35AFEB",colorStop:"100%"}],[{color:"#86DAFF",colorStop:"0%"},{color:"#64C0EC",colorStop:"100%"}],[{color:"#ACE5FF",colorStop:"0%"},{color:"#8DCEED",colorStop:"100%"}],[{color:"#C4ECFF",colorStop:"0%"}],[{color:"#A3D1E6",colorStop:"100%"}]],borderColors:["#005277","#006590","#007DB4","#0D97D4","#00ADFE","#14B8FE","#53CBFF","#86DAFF","#ACE5FF","#C4ECFF"]},greenMetro:["#496612","#597B15","#709A1B","#87B62A","#9AD926","#A6DC37","#BCE654","#C8E780","#D5EFA5","#E2F3BE"],greenGradient:{seriesColors:[[{color:"#5C7F16",colorStop:"0%"},{color:"#384C08",colorStop:"100%"}],[{color:"#6A9319",colorStop:"0%"},{color:"#486009",colorStop:"100%"}],[{color:"#739D1C",colorStop:"0%"},{color:"#57760B",colorStop:"100%"}],[{color:"#90B546",colorStop:"0%"},{color:"#6E9215",colorStop:"100%"}],[{color:"#9AD826",colorStop:"0%"},{color:"#75A010",colorStop:"100%"}],[{color:"#A5DB36",colorStop:"0%"},{color:"#8EB91D",colorStop:"100%"}],[{color:"#BBE554",colorStop:"0%"},{color:"#A4C849",colorStop:"100%"}],[{color:"#C8E780",colorStop:"0%"},{color:"#B4D072",colorStop:"100%"}],[{color:"#D4EEA5",colorStop:"0%"},{color:"#BFD593",colorStop:"100%"}],[{color:"#E1F2BD",colorStop:"0%"}],[{color:"#C8D7A8",colorStop:"100%"}]],borderColors:["#5C7F16","#6A9319","#739D1C","#90B546","#9AD826","#A5DB36","#BBE554","#C8E780","#D4EEA5","#E1F2BD"]},sandleMetro:["#6C450C","#82520D","#A36812","#C07F1F","#E69719","#E89A2B","#EEB564","#F3CB93","#F7DEB4","#F9E6CA"],sandleGradient:{seriesColors:[[{color:"#7F602F",colorStop:"0%"},{color:"#512D04",colorStop:"100%"}],[{color:"#986827",colorStop:"0%"},{color:"#673803",colorStop:"100%"}],[{color:"#A16C1F",colorStop:"0%"},{color:"#8A4B05",colorStop:"100%"}],[{color:"#BF812A",colorStop:"0%"},{color:"#AD630D",colorStop:"100%"}],[{color:"#E49519",colorStop:"0%"},{color:"#B86607",colorStop:"100%"}],[{color:"#E7992A",colorStop:"0%"},{color:"#D7780D",colorStop:"100%"}],[{color:"#EDB463",colorStop:"0%"},{color:"#D98F31",colorStop:"100%"}],[{color:"#F2CA92",colorStop:"0%"},{
color:"#DAAC6F",colorStop:"100%"}],[{color:"#F6DDB3",colorStop:"0%"},{color:"#DABE8F",colorStop:"100%"}],[{color:"#F8E5C9",colorStop:"0%"}],[{color:"#DDBE92",colorStop:"100%"}]],borderColors:["#7F602F","#986827","#A16C1F","#BF812A","#E49519","#E7992A","#EDB463","#F2CA92","#F6DDB3","#F8E5C9"]}},ej.EjSvgRender.themes={flatlight:{highlightColor:"black",background:"transparent",legend:{font:{color:"#282828"},title:{font:{color:"#282828"}}},title:{font:{color:"#565656"},subTitle:{font:{color:"#565656"}}},primaryXAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryX:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},primaryYAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,border:{color:"#3D3D3D",borderWidth:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryY:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#565656"}}},errorBar:{fill:"#000000",cap:{fill:"#000000"}},connectorLine:{color:"#565656"}},crosshair:{line:{width:1,color:"Black"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultMetro,colors:ej.EjSvgRender.seriesPalette.defaultMetro},flatdark:{highlightColor:"white",background:"#111111",legend:{font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}}},title:{font:{color:"#C9C9C9"},subTitle:{font:{color:"#C9C9C9"}}},primaryXAxis:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:0,ry:0,fill:"#B5B5B5",border:{color:"#B5B5B5",width:1},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},secondaryX:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:0,ry:0,fill:"#B5B5B5",border:{color:"#B5B5B5",width:1},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},primaryYAxis:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:0,ry:0,fill:"#B5B5B5",border:{color:"#B5B5B5",width:1},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},secondaryY:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:0,ry:0,fill:"#B5B5B5",border:{color:"#B5B5B5",width:1},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#C9C9C9"}}},errorBar:{fill:"#ffffff",cap:{fill:"#ffffff"}},connectorLine:{color:"#C9C9C9"}},crosshair:{line:{width:1,color:"White"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultMetro,colors:ej.EjSvgRender.seriesPalette.defaultMetro},gradientlight:{highlightColor:"black",background:"transparent",legend:{font:{color:"#282828"},title:{font:{color:"#282828"}}},title:{font:{color:"#565656"},subTitle:{font:{color:"#565656"}}},primaryXAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,fill:"#3D3D3D",border:{color:"#3D3D3D",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryX:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,fill:"#3D3D3D",border:{color:"#3D3D3D",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},primaryYAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,fill:"#3D3D3D",border:{color:"#3D3D3D",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryY:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,fill:"#3D3D3D",border:{color:"#3D3D3D",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#565656"}}},errorBar:{fill:"#000000",cap:{fill:"#000000"}},connectorLine:{color:"#565656"}},crosshair:{line:{width:1,color:"Black"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.defaultGradient.seriesColors},gradientdark:{highlightColor:"white",background:"#111111",legend:{font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}}},title:{font:{color:"#C9C9C9"},subTitle:{font:{color:"#C9C9C9"}}},primaryXAxis:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},secondaryX:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},primaryYAxis:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},secondaryY:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#C9C9C9"}}},errorBar:{fill:"#ffffff",cap:{fill:"#ffffff"}},connectorLine:{color:"#C9C9C9"}},crosshair:{line:{width:1,color:"White"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.defaultGradient.seriesColors},highcontrast01:{highlightColor:"white",background:"#111111",legend:{font:{color:"#ffffff"},title:{font:{color:"#ffffff"}}},title:{font:{color:"#ffffff"},subTitle:{font:{color:"#ffffff"}}},primaryXAxis:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#ffffff",axisLine:{color:"#AAAAAA"},font:{color:"#ffffff"},title:{font:{color:"#ffffff"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},secondaryX:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},axisLine:{color:"#AAAAAA"},font:{color:"#ffffff"},title:{font:{color:"#ffffff"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},primaryYAxis:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#ffffff",axisLine:{color:"#AAAAAA"},font:{color:"#ffffff"},title:{font:{color:"#ffffff"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},secondaryY:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},axisLine:{color:"#AAAAAA"},font:{color:"#ffffff"},title:{font:{color:"#ffffff"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#ffffff"}}},errorBar:{fill:"#ffffff",cap:{fill:"#ffffff"}},connectorLine:{color:"#C9C9C9"}},crosshair:{line:{width:1,color:"White"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultHighContrast,colors:ej.EjSvgRender.seriesPalette.defaultHighContrast},material:{highlightColor:"black",background:"transparent",legend:{font:{color:"#333333"},title:{font:{color:"#333333"}}},title:{font:{color:"#333333"},subTitle:{font:{color:"#333333"}}},primaryXAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#333333",axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryX:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},primaryYAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#333333",axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",borderWidth:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryY:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#333333"}}},errorBar:{fill:"#000000",cap:{fill:"#000000"}},connectorLine:{color:"#565656"}},crosshair:{line:{width:1,color:"Black"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultMaterial,colors:ej.EjSvgRender.seriesPalette.defaultMaterial},office365:{highlightColor:"black",background:"transparent",legend:{font:{color:"#333333"},title:{font:{color:"#333333"}}},title:{font:{color:"#333333"},subTitle:{font:{color:"#333333"}}},primaryXAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#333333",axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryX:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},primaryYAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#333333",axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",borderWidth:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryY:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#333333"}}},errorBar:{fill:"#000000",cap:{fill:"#000000"}},connectorLine:{color:"#565656"}},crosshair:{line:{width:1,color:"Black"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultOffice,colors:ej.EjSvgRender.seriesPalette.defaultOffice}},e.extend(ej.EjSvgRender.themes,{azure:{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.blueMetro,colors:ej.EjSvgRender.seriesPalette.blueMetro},azuredark:{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.blueMetro,colors:ej.EjSvgRender.seriesPalette.blueMetro},"gradient-azure":{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.blueGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.blueGradient.seriesColors},"gradient-azuredark":{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.blueGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.blueGradient.seriesColors},lime:{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.greenMetro,colors:ej.EjSvgRender.seriesPalette.greenMetro},limedark:{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.greenMetro,colors:ej.EjSvgRender.seriesPalette.greenMetro},"gradient-lime":{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.greenGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.greenGradient.seriesColors},"gradient-limedark":{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.greenGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.greenGradient.seriesColors},saffron:{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.sandleMetro,colors:ej.EjSvgRender.seriesPalette.sandleMetro},saffrondark:{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.sandleMetro,colors:ej.EjSvgRender.seriesPalette.sandleMetro},"gradient-saffron":{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.sandleGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.sandleGradient.seriesColors},"gradient-saffrondark":{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.sandleGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.sandleGradient.seriesColors}})}(jQuery),ej.axisTypes={},ej.EjAxisRenderer=function(){};var _sideBySeriesPadding=function(e,t,i,s){for(var a=ej.DataManager(e.model._visibleSeries,ej.Query().sortBy("_zOrder")).executeLocal(),r=!1,n=a.length,o=(s.orientation.toLowerCase(),0);o<n;o++){var l=a[o].type.toLowerCase();if(-1!=l.indexOf("column")||-1!=l.indexOf("bar")||-1!=l.indexOf("waterfall")||"candle"==l||-1!=l.indexOf("hilo")||-1!=l.indexOf("box")){r=!0;break}}if("polaraxes"!=e.model.AreaType&&r){s.m_minPointsDelta=void 0;var d=.5*ej.EjSvgRender.utils.getMinPointsDelta(s,e,t);t-=d,i=i+d>Number.MAX_VALUE?Number.MAX_VALUE:i+d,s.padding=d}else s.padding=0;return{startPadding:t,endPadding:i}};ej.EjStripline=function(e){this.chart=e},function(e){function t(t,i){var s=function(){};return s.prototype=new t,e.extend(s.prototype,i),s}ej.EjAxisRenderer.prototype={_seriesMinMax:function(t,i,s,a,r){var n=i.orientation.toLowerCase(),o=s.length;r.seriesCollection=ej.util.isNullOrUndefined(r.seriesCollection)?{}:r.seriesCollection;var l;if(o>0&&t.model._hasSeriesPoints&&s[0].points.length>0||this.chartObj.model.indicators[0]._points.length>0){for(var d,h,c,u,p,m,g,f,_,v,b,x={maxX:null,minX:null},y={maxY:null,minY:null},w=x.maxX,C=x.minX,S=y.maxY,T=y.minY,R=0;R<o;R++){if(f=s[R].visibility.toLowerCase(),_=s[R].points.length,l=0,"visible"===f){s[R]._visiblePoints=[];for(var k=0;k<_;k++){var O=s[R].points[k];(null!=O.x&&void 0!=O.x&&("object"==typeof O.y||!isNaN(O.y))&&null!=O.y&&void 0!=O.y||O.showIntermediateSum||O.showTotalSum||0==O.isEmpty)&&(s[R]._visiblePoints[l]=O,s[R]._visiblePoints[l].actualIndex=k,l++)}}i.maxPointLength=_}for(var R=0;R<o;R++){v=s[R]._visiblePoints.length;var D=s[R];if(v>0&&(f=s[R].visibility.toLowerCase(),_=s[R].points.length,"visible"===f&&_>0))if("horizontal"==n&&!t.model.requireInvertedAxes||"vertical"==n&&t.model.requireInvertedAxes){c=d=s[R]._visiblePoints[0].xValue;for(var k=0;k<v;k++){var I=s[R]._visiblePoints[k].xValue;c>I&&(c=I),d<I&&(d=I)}s[R].minX=c,s[R].maxX=d,(null===C||void 0===C)&&v>0&&(w=s[R].maxX,C=s[R].minX),C>s[R].minX&&(C=s[R].minX),w<s[R].maxX&&(w=s[R].maxX)}else{var j,L,A,E,P,M=-1!=D.type.toLowerCase().indexOf("spline"),F=0,N=s[R]._visiblePoints;if(M){var z=D._name=D.name||"series"+R;r.seriesCollection[z]={},N=ej.ejSplineSeries.prototype._isVisiblePoints(D),L=r.seriesCollection[z].naturalSpline=ej.ejSplineSeries.prototype.naturalSpline(N,D,0),"splinerangearea"==D.type.toLowerCase()&&(A=r.seriesCollection[z].naturalSpline1=ej.ejSplineSeries.prototype.naturalSpline(N,D,1)),r.seriesCollection[z].controlPoints=[],E=ej.ejSplineSeries.prototype.getBezierControlPoints,P=N.filter(function(e,t,i){return!ej.isNullOrUndefined(e.YValues[0])&&!isNaN(e.YValues[0])})}u=h=M?P[0].YValues[0]:N[0].YValues[0];for(var V,B,k=0;k<N.length;k++){var I=N[k];if(s[R]._hiloTypes&&"splinerangearea"!=D.type.toLowerCase())for(var H=0;H<2;H++)h>I.YValues[H]&&(h=I.YValues[H]),u<I.YValues[H]&&(u=I.YValues[H]);else if("boxandwhisker"==D.type.toLowerCase()){V=N[k].YValues[0][0],B=N[k].YValues[0][0];for(var Y=0;Y<I.YValues[0].length;Y++)V>I.YValues[0][Y]&&(V=I.YValues[0][Y]),B<I.YValues[0][Y]&&(B=I.YValues[0][Y]);h=V>h?h:V,u=B<u?u:B}else if(M)if(0!=k&&I.visible&&N[k-1].visible){if(r.seriesCollection[z].controlPoints.push(E(N[k-1],I,L[k-1],L[k],0,D,this)),"splinerangearea"==D.type.toLowerCase()){var U=E(N[k-1],I,A[k-1],A[k],1,D,this);r.seriesCollection[z].controlPoints[F].controlPoint1.YValues[1]=U.controlPoint1.YValues[0],r.seriesCollection[z].controlPoints[F].controlPoint2.YValues[1]=U.controlPoint2.YValues[0]}j=r.seriesCollection[z].controlPoints[F++],h=Math.min(h,I.YValues[0],j.controlPoint1.YValues[0],j.controlPoint2.YValues[0]),u=Math.max(u,I.YValues[0],j.controlPoint1.YValues[0],j.controlPoint2.YValues[0]),"splinerangearea"==D.type.toLowerCase()&&(h=Math.min(h,I.YValues[1],j.controlPoint1.YValues[1],j.controlPoint2.YValues[1]),u=Math.max(u,I.YValues[1],j.controlPoint1.YValues[1],j.controlPoint2.YValues[1]))}else{if(0!=k&&(-1!=D.type.toLowerCase().indexOf("stacking")||"splinerangearea"==D.type.toLowerCase())){if(r.seriesCollection[z].controlPoints.push(E(N[k-1],I,L[k-1],L[k],0,D,this)),"splinerangearea"==D.type.toLowerCase()){var U=E(N[k-1],I,A[k-1],A[k],1,D,this);r.seriesCollection[z].controlPoints[F].controlPoint1.YValues[1]=U.controlPoint1.YValues[0],r.seriesCollection[z].controlPoints[F].controlPoint2.YValues[1]=U.controlPoint2.YValues[0]}j=r.seriesCollection[z].controlPoints[F++]}h=Math.min(h,isNaN(I.YValues[0])?h:I.YValues[0]||null),u=Math.max(u,I.YValues[0]||null),"splinerangearea"==D.type.toLowerCase()&&(h=Math.min(h,isNaN(I.YValues[1])?h:I.YValues[1]||null),u=Math.max(u,I.YValues[1]||null))}else h>I.YValues[0]&&(h=I.YValues[0]),u<I.YValues[0]&&(u=I.YValues[0])}s[R].minY=h,s[R].maxY=u,(null===T||void 0===T)&&v>0&&(S=s[R].maxY,T=s[R].minY),T>s[R].minY&&(T=s[R].minY),S<s[R].maxY&&(S=s[R].maxY),b=s[R].type,"column"!=b&&"bar"!=b||!i.startFromZero||(T=T<0?T:0)}}if("horizontal"==n&&!t.model.requireInvertedAxes||"vertical"==n&&t.model.requireInvertedAxes){if(this.chartObj.model.indicatorRange&&this.chartObj.model.indicatorRange[i.name]){var W=this.chartObj.model.indicatorRange[i.name];(T>W.min||null==T)&&(T=W.min),(S<W.max||null==S)&&(S=W.max)}if(w==C&&(w+=1),"double"==a){var X=_sideBySeriesPadding(t,C,w,i);C=X.startPadding,w=X.endPadding;var G=w-C;i.range=this._getDoubleAutoRange(i,C,w,G)}else i.range=this._getLogAutoRange(i,C,w,w-C)}else{if(this.chartObj.model.stackedValue[i.name]){var W=this.chartObj.model.stackedValue[i.name],$=!0;T>W.min&&(T=W.min),S<W.max&&(S=W.max)}if(this.chartObj.model.indicatorRange&&this.chartObj.model.indicatorRange[i.name]){var W=this.chartObj.model.indicatorRange[i.name];(T>W.min||null==T)&&(T=W.min),(S<W.max||null==S)&&(S=W.max)}if(S==T&&(S<0?S=0:S<=1&&S>0?T=0:(T=0,S+=1)),("column"==b||"bar"==b)&&!i.startFromZero){var q=i.range&&i.range.max||S,Q=i.range&&i.range.interval||this.calculateNumericNiceInterval(q-T,i,null,q);S+=Q,T-Q<0&&T>0||$?T=0:T-=Q}var K=S-T;$=!1,i.range="double"==a?this._getDoubleAutoRange(i,T,S,K):this._getLogAutoRange(i,T,S,K)}}else i.setRange?(p=null==i.range.min||void 0==i.range.min?0:i.range.min,m=null==i.range.max||void 0==i.range.max?5:i.range.max,g=m-p,i.range="double"==a?this._getDoubleAutoRange(i,p,m,g):this._getLogAutoRange(i,p,m,g)):i.range={min:0,max:5,interval:1,Delta:4};var Z=e.extend({},ej.EjSvgRender.commonChartEventArgs);Z.data={range:i.range,axis:i},this.chartObj._trigger("axesRangeCalculate",Z);var J=Z.data.range;i.range={min:J.min,max:J.max,interval:J.interval,delta:J.max-J.min}},_calculateTrendLineRange:function(e,t,i){for(var s,a,r,n,o,l,d,n=i.length,h=0;h<n;h++)if(s=i[h],a=s.trendlines,"cartesianaxes"==e.model.AreaType&&(t.name==s._xAxisName||t.name==s._yAxisName)){o=a.length;for(var c=0;c<o;c++)r=a[c],"visible"===r.visibility.toLowerCase()&&(t.name==s._xAxisName?(l=r.type.toLowerCase(),d=new ej.trendlineTypes[l],d.calculateTrendLineSegment(s,r,t,e)):t.name==s._yAxisName&&!t.setRange&&r.points&&r.points.length>1&&(r.points.length-1,t.range.min=t.range.min>r.minY?r.minY:t.range.min,t.range.max=t.range.max<r.maxY?r.maxY:t.range.max))}return!1},AlignRangeStart:function(e,t,i){var s=new Date(e);if("days"==i.toLowerCase()){var a=Math.floor(Math.floor(e.getDate()/t)*t);s=new Date(e.getFullYear(),e.getMonth(),a,0,0,0)}else if("hours"==i.toLowerCase()){var r=Math.floor(Math.floor(e.getHours()/t)*t);s=new Date(e.getFullYear(),e.getMonth(),e.getDate(),r,0,0)}else if("milliseconds"==i.toLowerCase()){var n=Math.floor(Math.floor(e.getMilliseconds()/t)*t);s=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),n)}else if("seconds"==i.toLowerCase()){var o=Math.floor(Math.floor(e.getSeconds()/t)*t);s=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),o,0)}else if("minutes"==i.toLowerCase()){var l=Math.floor(Math.floor(e.getMinutes()/t)*t);s=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),l,0,0)}else if("months"==i.toLowerCase()){var d=Math.floor(Math.floor(e.getMonth()/t)*t);s=new Date(e.getFullYear(),d,e.getDate(),0,0,0)}else if("years"==i.toLowerCase()){var h=Math.floor(Math.floor(e.getFullYear()/t)*t);s=new Date(h,e.getMonth(),e.getDate(),0,0,0)}return s},_increaseDateTimeInterval:function(e,t,i){var s=new Date(e);return"days"==i.toLowerCase()?s.setDate(e.getDate()+t):"hours"==i.toLowerCase()?s.setHours(e.getHours()+t):"milliseconds"==i.toLowerCase()?s.setMilliseconds(e.getMilliseconds()+t):"seconds"==i.toLowerCase()?s.setSeconds(e.getSeconds()+t):"minutes"==i.toLowerCase()?s.setMinutes(e.getMinutes()+t):"months"==i.toLowerCase()?s.setMonth(e.getMonth()+t):"years"==i.toLowerCase()&&s.setYear(e.getFullYear()+t),s},_calculatePadding:function(e){var t="string"!=typeof e.range.min||isNaN(Date.parse(e.range.min))?e.range.min.getTime():Date.parse(e.range.min),i="string"!=typeof e.range.max||isNaN(Date.parse(e.range.max))?e.range.max.getTime():Date.parse(e.range.max),s=this._increaseDateTimeInterval(new Date(t),e.range.interval,e._intervalType).getTime()-t,a=e.rangePadding.toLowerCase();if(!this.chartObj.zoomed&&!e.setRange){t=new Date(t),i=new Date(i);var r=e._intervalType.toLowerCase();if("none"==e.rangePadding.toLowerCase())t=t.getTime(),i=i.getTime();else if("additional"==a||"round"==a)switch(r){case"years":var n=t.getFullYear(),o=i.getFullYear();"additional"==e.rangePadding.toLowerCase()?(t=new Date(n-e.range.interval,1,1,0,0,0).getTime(),i=new Date(o+e.range.interval,1,1,0,0,0).getTime()):(t=new Date(n,0,0,0,0,0).getTime(),i=new Date(o,11,30,23,59,59).getTime());break;case"months":var l=t.getMonth(),d=i.getMonth();"round"==a?(t=new Date(t.getFullYear(),l,0,0,0,0).getTime(),i=new Date(i.getFullYear(),d,new Date(i.getFullYear(),i.getMonth(),0).getDate(),23,59,59).getTime()):(t=new Date(t.getFullYear(),l+-e.range.interval,1,0,0,0).getTime(),i=new Date(i.getFullYear(),d+e.range.interval,2==d?28:30,0,0,0).getTime());break;case"days":var h=t.getDate(),c=i.getDate();"round"==a?(t=new Date(t.getFullYear(),t.getMonth(),h,0,0,0).getTime(),i=new Date(i.getFullYear(),i.getMonth(),c,23,59,59).getTime()):(t=new Date(t.getFullYear(),t.getMonth(),h+-e.range.interval,0,0,0).getTime(),i=new Date(i.getFullYear(),i.getMonth(),c+e.range.interval,0,0,0).getTime());break;case"hours":var u=t.getHours()/e.range.interval*e.range.interval,p=i.getHours()+(t.getHours()-u);"round"==a?(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),u,0,0).getTime(),i=new Date(i.getFullYear(),i.getMonth(),i.getDay(),p,59,59).getTime()):(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),u+-e.range.interval,0,0).getTime(),i=new Date(i.getFullYear(),i.getMonth(),i.getDay(),p+e.range.interval,0,0).getTime());break;case"minutes":var m=t.getMinutes()/e.range.interval*e.range.interval,g=i.getMinutes()+(t.getMinutes()-m);"round"==a?(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),t.getHour(),m,0).getTime(),i=new Date(i.getFullYear(),i.getMonth(),i.getDay(),i.getHour(),g,59).getTime()):(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),t.getHours(),m+-e.range.interval,0).getTime(),i=new Date(i.getFullYear(),i.getMonth(),i.getDay(),i.getHours(),m+e.range.interval,0).getTime());break;case"seconds":var f=t.getSeconds()/e.range.interval*e.range.interval,_=i.getSeconds()+(t.getSeconds()-f);"round"==a?(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),t.getHours(),t.getMinutes(),f,0).getTime(),i=new Date(i.getFullYear(),i.getMonth(),i.getDay(),i.getHour(),i.getMinutes(),_,0).getTime()):(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),t.getHours(),t.getMinutes(),f+-e.range.interval,0).getTime(),i=new Date(i.getFullYear(),i.getMonth(),i.getDay(),i.getHours(),i.getMinutes(),_+e.range.interval,0).getTime());break;case"milliseconds":var v=t.getMilliseconds()/e.range.interval*e.range.interval,b=i.getMilliseconds()+(t.getMilliseconds()-v);"round"==a?(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),t.getHours(),t.getMinutes(),t.getSeconds(),v).getTime(),i=new Date(i.getFullYear(),i.getMonth(),i.getDay(),i.getHours(),i.getMinutes(),i.getSeconds(),b).getTime()):(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),t.getHours(),t.getMinutes(),t.getSeconds(),v+-e.range.interval).getTime(),i=new Date(i.getFullYear(),i.getMonth(),i.getDay(),i.getHours(),i.getMinutes(),i.getSeconds(),b+e.range.interval).getTime())}}e.actualRange.interval=s,e.actualRange.min=t,e.actualRange.max=i,e._interval=e.range.interval,e.actualRange.delta=e.actualRange.max-e.actualRange.min,e.range.min=new Date(t),e.range.max=new Date(i),this._calculateVisibleRange(e)},_calculateVisibleRange:function(t,i,s){if(this.chartObj=i||this.chartObj,t.visibleRange=s?t.visibleRange:e.extend(!0,{},t.actualRange),
(t.zoomFactor<1||t.zoomPosition>0)&&"polaraxes"!=this.chartObj.model.AreaType&&!this.chartObj.model.disableZoom){t.zoomFactor=t.zoomFactor>1?1:t.zoomFactor<0?0:t.zoomFactor,t.zoomPosition=t.zoomPosition<0?0:t.zoomPosition>1?1:t.zoomPosition;var a=t.actualRange;if(t.isInversed)var r=t.actualRange.max-t.zoomPosition*t.actualRange.delta,n=r-t.zoomFactor*t.actualRange.delta;else var r=t.actualRange.min+t.zoomPosition*t.actualRange.delta,n=r+t.zoomFactor*t.actualRange.delta;r<a.min&&(n+=a.min-r,r=a.min),n>a.max&&(r-=n-a.max,n=a.max);var o=new Date(r),l=new Date(n);r==n&&(o=new Date(Date.parse(o)-2592e6),l=new Date(Date.parse(l)+2592e6));var d=Math.min(o.getTime(),l.getTime()),h=Math.max(o.getTime(),l.getTime()),c=t.enableAutoIntervalOnZooming?this.calculateDateTimeNiceInterval(t,o,l):{interval:t._interval,intervalType:t._intervalType},u=this._increaseDateTimeInterval(o,c.interval,c.intervalType).getTime()-d;if(s)return{min:d,max:h,interval:u};t._intervalType=c.intervalType,t.visibleRange.min=d,t.visibleRange.max=h,t.visibleRange.interval=u,t.visibleRange.delta=Math.abs(t.visibleRange.max-t.visibleRange.min),t._interval=c.interval}},_calculateAxisLabels:function(t){var i,s,a=t.enableAutoIntervalOnZooming?t.visibleRange.min:t.actualRange.min;for(i=this.chartObj.zoomed||t.zoomed||!t.setRange?this.AlignRangeStart(new Date(a),t._interval,t._intervalType).getTime():t.visibleRange.min;i<=t.visibleRange.max;){if(i>=t.visibleRange.min&&i<=t.visibleRange.max){s=ej.format(new Date(i),t.labelFormat?t.labelFormat:ej.EjSvgRender.utils._dateTimeLabelFormat(t._intervalType,t),this.chartObj.model.locale);var r=e.extend({},ej.EjSvgRender.commonChartEventArgs);r.data={label:{Text:s,Value:i},axis:t},this.chartObj._trigger("axesLabelRendering",r),t.visibleLabels.push({Value:i,Text:r.data.label.Text})}i=this._increaseDateTimeInterval(new Date(i),t._interval,t._intervalType).getTime(),t.visibleLabels[t.visibleLabels.length-1]=t.visibleLabels[t.visibleLabels.length-1]}t._LableMaxWidth=ej.EjSvgRender.utils._getMaxLabelWidth(t,this.chartObj),"vertical"==currentAxis.orientation&&(t._LableMaxWidth.maxWidth=55,t._LableMaxWidth.width=55)},calculateDateTimeNiceInterval:function(e,t,i){var s=Math.abs((t.getTime()-i.getTime())/864e5),a=this.calculateNumericNiceInterval(s/365,e,"years");if(a>=1)return{interval:a,intervalType:"Years"};if((a=this.calculateNumericNiceInterval(s/30,e,"months"))>=1)return{interval:a,intervalType:"Months"};if((a=this.calculateNumericNiceInterval(s,e,"days"))>=1)return{interval:a,intervalType:"Days"};var r=24*s;if((a=this.calculateNumericNiceInterval(r,e,"hours"))>=1)return{interval:a,intervalType:"Hours"};var n=24*s*60;if((a=this.calculateNumericNiceInterval(n,e,"minutes"))>=1)return{interval:a,intervalType:"Minutes"};var o=24*s*60*60;if((a=this.calculateNumericNiceInterval(o,e,"seconds"))>=1)return{interval:a,intervalType:"Seconds"};var l=24*s*60*60*1e3;return a=this.calculateNumericNiceInterval(l,e,"milliseconds"),a>=1?{interval:a,intervalType:"Milliseconds"}:void 0},calculateNumericNiceInterval:function(e,t,i,s){var a=this.GetActualDesiredIntervalsCount(t,t.length),r=e/a;if("double"==t._valueType&&null!=t.desiredIntervals)return r;for(var n=Math.pow(10,Math.floor(ej.EjSvgRender.utils._logBase(r,10))),o=[10,5,2,1],l=s||t.range&&t.range.max,d=0;d<o.length;d++){var h=n*o[d];if(a<e/h)return"datetime"==t._valueType?r=ej.util.isNullOrUndefined(t.intervalType)||t.intervalType.toLowerCase()!=i?r:Math.ceil(r):ej.util.isNullOrUndefined(t.range)||ej.util.isNullOrUndefined(t.range.max)?r:r>l?h:r;r=h}return r},GetActualDesiredIntervalsCount:function(e,t){if(ej.util.isNullOrUndefined(e.desiredIntervals)){var i=("horizontal"==e.orientation.toLowerCase()?.533:1)*e.maximumLabels;return i=Math.max(t*(i/100),1)}return e.desiredIntervals},_calculateRange:function(t,i){if(!this.chartObj.zoomed){var s=new Date;if(i.length>0&&this.chartObj.model._hasSeriesPoints&&i[0].points.length>0||this.chartObj.model.indicators[0]._points.length>0){for(var a,r,n,o,l,d={maxX:null,minX:null},h={maxY:null,minY:null},c=0;c<i.length;c++){if((l=i[c].points.length)>0&&"visible"===i[c].visibility.toLowerCase()&&i[c].points.length>0){o=a=new Date(i[c].points[0].xValue),n=r=i[c].points[0].YValues[0];for(var u=0;u<l;u++)null!=o&&void 0!=o?(o>i[c].points[u].xValue&&(o=i[c].points[u].xValue),a<i[c].points[u].xValue&&(a=i[c].points[u].xValue)):o=a=new Date(i[c].points[u+1].xValue),r>i[c].points[u].YValues[0]&&(r=i[c].points[u].YValues[0]),n<i[c].points[u].YValues[0]&&(n=i[c].points[u].YValues[0]);i[c].minX=o,i[c].maxX=a,i[c].minY=r,i[c].maxY=n,(!t.maxPointLength||t.maxPointLength<l)&&(t.maxPointLength=l)}(d.minX=null==d.minX&&"number"!=typeof i[c].minX?i[c].minX:d.minX)>i[c].minX&&(d.minX="number"!=typeof i[c].minX?i[c].minX:d.minX),(d.maxX=null==d.maxX&&"number"!=typeof i[c].maxX?i[c].maxX:d.maxX)<i[c].maxX&&(d.maxX="number"!=typeof i[c].maxX?i[c].maxX:d.maxX),h.minY>i[c].minY&&(h.minY=i[c].minY),h.maxY<i[c].maxY&&(h.maxY=i[c].maxY)}if(this.chartObj.model.indicatorRange&&this.chartObj.model.indicatorRange[t.name]){var p=this.chartObj.model.indicatorRange[t.name];(d.minX>new Date(p.min)||null==d.minX)&&(d.minX=new Date(p.min)),(d.maxX<new Date(p.max)||null==d.maxX)&&(d.maxX=new Date(p.max))}d.minX=null==d.minX?s:d.minX,d.maxX=null==d.maxX?new Date((new Date).setMonth(s.getMonth()+5)):d.maxX,d.minX==d.maxX&&(d.minX=new Date(Date.parse(d.minX)-2592e6),d.maxX=new Date(Date.parse(d.maxX)+2592e6));var m=_sideBySeriesPadding(this.chartObj,d.minX.getTime(),d.maxX.getTime(),t);d.minX=new Date(m.startPadding),d.maxX=new Date(m.endPadding);var g=this.calculateDateTimeNiceInterval(t,d.minX,d.maxX);if(t._intervalType=t.intervalType?t.intervalType:g.intervalType,"auto"==t.intervalType&&(t._intervalType=t.intervalType=g.intervalType),null!=t.setAxisInterval&&void 0!=t.setAxisInterval||(t.setAxisInterval=!(!t.range||!t.range.interval)),t._setInterval&&!this.chartObj._chartResize&&t.range&&t._setInterval!=t.range.interval&&(t._setInterval=null),t.setRange){t.range.max||(t.range.max=d.maxX),t.range.min||(t.range.min=d.minX),"string"==typeof t.range.min&&-1!=t.range.min.indexOf("/Date(")&&(t.range.min=new Date(parseInt(t.range.min.substr(6)))),"string"==typeof t.range.max&&-1!=t.range.max.indexOf("/Date(")&&(t.range.max=new Date(parseInt(t.range.max.substr(6)))),new Date(t.range.min).getTime()==new Date(t.range.max).getTime()&&(t.range.max=new Date(Date.parse(t.range.max)+864e5)),g=this.calculateDateTimeNiceInterval(t,new Date(t.range.min),new Date(t.range.max)),t._intervalType=t.intervalType?t.intervalType:g.intervalType,t.setAxisInterval||(t.range.interval=g.interval,t._setInterval=g.interval),t.actual_Range=e.extend(!0,{},t.range),t.setRange=!0;var f=t._setInterval?g.interval:t.range.interval||t.actual_Range.interval;t.range={min:t.actual_Range.min,max:t.actual_Range.max,interval:f}}else t.range={min:d.minX,max:d.maxX,interval:g.interval}}else t.setRange?(t.range.min=null===t.range.min||void 0===t.range.min?s:t.range.min,t.range.max=null===t.range.max||void 0===t.range.max?new Date((new Date).setMonth(s.getMonth()+5)):t.range.max,t.range.interval=null===t.range.interval||void 0===t.range.interval?1:t.range.interval,t._intervalType="Months"):(t.range={min:s,max:new Date((new Date).setMonth(s.getMonth()+5)),interval:1},t._intervalType=ej.util.isNullOrUndefined(t.intervalType)?"Months":t.intervalType);var _=e.extend({},ej.EjSvgRender.commonChartEventArgs);_.data={range:t.range,axis:t},this.chartObj._trigger("axesRangeCalculate",_);var v=_.data.range;t.range={min:v.min,max:v.max,interval:v.interval,delta:v.max-v.min}}},_calculateRanges:function(e,t,i){this.chartObj=e,this._saveRange(e,t),this._calculateRange(t,i),t._range=t.range,e.model._drawTrendline&&this._calculateTrendLineRange(e,t,i),this._calculatePadding(t),this._calculateAxisLabels(t)},_saveRange:function(e,t){(e.zoomed||e.resetZooming)&&(t.range=null!=t.range&&null!=t.range.min&&null!=t.range.max?t.range:t._range),t._initialRange&&(t._initialRange!=t.range&&null!=t.range?t.setRange=!0:null==t.range&&(t.setRange=!1)),t._initialRange=null==t.range?{min:null,max:null,interval:null}:{min:t.range.min,max:t.range.max,interval:t.range.interval}}};var i=t(ej.EjAxisRenderer);ej.axisTypes.datetime=i;var s=t(ej.EjAxisRenderer,{_calculateRange:function(e,t,i,s){e.zoomed||this._seriesMinMax(e,t,i,"double",s)},_getDoubleAutoRange:function(t,i,s){var a,r,n;return t.setRange?(ej.util.isNullOrUndefined(t.range.max)&&(t.range.max=s),ej.util.isNullOrUndefined(t.range.min)&&(t.range.min=i),t.actual_Range=e.extend(!0,{},t.range),t.setRange=!0):t.range={min:i,max:s},a=t.range.max-t.range.min,r=this.calculateNumericNiceInterval(a,t),ej.EjSvgRender.utils._decimalPlaces(r)>20&&(n=r.toString(),r=parseFloat(n.substring(0,n.indexOf("."))+n.substring(n.indexOf("."),22))),(ej.util.isNullOrUndefined(t.range.interval)||t.range.interval<0)&&(t.range.interval=r),t.range.delta=a,t.range},_calculatePadding:function(e,t,i){var s=i.min,a=i.max,r=t.rangePadding.toLowerCase(),n=i.interval;if(!t.setRange&&!e.zoomed)if("normal"==r){var o,l=0;if(s<0?(s=0,l=i.min+i.min/20,o=n+l%n,.365*n>=o&&(l-=n),l%n<0&&(l=l-n-l%n)):(l=s<5/6*a?0:s-(a-s)/2)%n>0&&(l-=l%n),a>0)var d=a+(a-s)/20>Number.MAX_VALUE?Number.MAX_VALUE:a+(a-s)/20;else var d=a-(a-s)/20;o=n-d%n,.365*n>=o&&(d=d+n>Number.MAX_VALUE?Number.MAX_VALUE:d+n),d%n>0&&(d=d+n-d%n>Number.MAX_VALUE?Number.MAX_VALUE:d+n-d%n),l<=0&&(n=this.calculateNumericNiceInterval(d-l,t),d=Math.ceil(d/n)*n>Number.MAX_VALUE?Number.MAX_VALUE:Math.ceil(d/n)*n),s=t.roundingPlaces?parseFloat(l.toFixed(t.roundingPlaces)):parseFloat(l.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(n)?1:ej.EjSvgRender.utils._decimalPlaces(n))),a=t.roundingPlaces?parseFloat(d.toFixed(t.roundingPlaces)):parseFloat(d.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(n)?1:ej.EjSvgRender.utils._decimalPlaces(n)))}else"additional"!=r&&"round"!=r||(s=Math.floor(s/n)*n,a=Math.ceil(a/n)*n>Number.MAX_VALUE?Number.MAX_VALUE:Math.ceil(a/n)*n,"additional"==r&&(s-=n,a=a+n>=Number.MAX_VALUE?Number.MAX_VALUE:a+n));t.actualRange.min=s,t.actualRange.max=a,t.actualRange.interval=n,t.range.min=s,t.range.max=a,t.range.interval=n,t.actualRange.delta=a-s>=Number.MAX_VALUE?a:a-s,this._calculateVisibleRange(t),t.rangePadding=t._rangePadding},_calculateVisibleRange:function(t,i,s){if(this.chartObj=i||this.chartObj,t.visibleRange=s?t.visibleRange:e.extend(!0,{},t.actualRange),(t.zoomFactor<1||t.zoomPosition>0)&&"polaraxes"!=this.chartObj.model.AreaType&&!this.chartObj.model.disableZoom){var a=t.actualRange;if(t.zoomFactor=t.zoomFactor>1?1:t.zoomFactor<0?0:t.zoomFactor,t.zoomPosition=t.zoomPosition<0?0:t.zoomPosition>1?1:t.zoomPosition,t.isInversed)var r=t.actualRange.max-t.zoomPosition*t.actualRange.delta,n=r-t.zoomFactor*t.actualRange.delta;else var r=t.actualRange.min+t.zoomPosition*t.actualRange.delta,n=r+t.zoomFactor*t.actualRange.delta;r<a.min&&(n+=a.min-r,r=a.min),n>a.max&&(r-=n-a.max,n=a.max);var o=Math.abs(n-r),l=t.enableAutoIntervalOnZooming?this.calculateNumericNiceInterval(o,t):t.actualRange.interval;if(s)return{min:Math.min(r,n),max:Math.max(r,n),delta:o,interval:l};t.visibleRange.min=Math.min(r,n),t.visibleRange.max=Math.max(r,n),t.visibleRange.delta=o,t.visibleRange.interval=l,t.zoomed=null===this.chartObj.zoomed||void 0===this.chartObj.zoomed||this.chartObj.zoomed}},_calculateAxisLabels:function(t,i){var s,a,r,n,o,l,d,h,c=i.roundingPlaces,u=this.chartObj.model.locale;i.labelFormat;for(i.visibleRange.min=parseFloat(i.visibleRange.min.toPrecision(14)),i.visibleRange.max=parseFloat(i.visibleRange.max.toPrecision(14)),s=this.chartObj&&this.chartObj.chartExtensions?i.visibleRange.min-i.visibleRange.min%i.visibleRange.interval:t.zoomed||i.zoomed||i.padding?i.visibleRange.min-i.visibleRange.min%i.visibleRange.interval:i.visibleRange.min;s<=i.visibleRange.max;s+=i.visibleRange.interval)if(ej.EjSvgRender.utils._inside(s,i.visibleRange)){if(s==d)break;d=s,r=20,s=parseFloat(s.toFixed(!c&&c>r?c:r)),n=c?s:parseFloat(s.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(i.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(i.visibleRange.interval))),l=c?parseFloat(s.toFixed(c)):parseFloat(s.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(i.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(i.visibleRange.interval))),a=i.labelFormat,a?null!=a.match("{value}")?l=a.replace("{value}",l):0!=a.indexOf("e")&&0!=a.indexOf("E")||-1!=a.indexOf("ej.format")?(-1!=a.indexOf("ej.format")&&(a=a.substring(a.indexOf("(")+1,a.indexOf(")"))),l=ej.format(l,a,u)):(h=a.match(/(\d+)/g),h=null==h?6:h>20?20:h,l=l.toExponential(h)):l=i.isStacked100?l+"%":u?l.toLocaleString(u):l,o=e.extend({},ej.EjSvgRender.commonChartEventArgs),o.data={label:{Text:l,Value:s},axis:i},t._trigger("axesLabelRendering",o),i.visibleLabels.push({Value:n,Text:o.data.label.Text})}for(var p=0,m=i.visibleLabels,g=0;g<m.length;g++)if("string"==typeof m[g].Text){var f=m[g].Text.split("<br>").length;p=Math.max(f,p)}i.rowsCount=p,i._LableMaxWidth=ej.EjSvgRender.utils._getMaxLabelWidth(i,this.chartObj),"vertical"==i.orientation&&(i._LableMaxWidth.maxWidth=this.chartObj.maxLabelWidth,i._LableMaxWidth.width=this.chartObj.maxLabelWidth)},_calculateRanges:function(e,t,i,s){this.chartObj=e,this._saveRange(e,t),this._calculateRange(e,t,i,s),t._range=t.range,e.model._drawTrendline&&this._calculateTrendLineRange(e,t,i),this._calculatePadding(e,t,t.range),t.maximumLabels>0&&this._calculateAxisLabels(e,t)}});ej.axisTypes.double=s;var a=t(ej.EjAxisRenderer,{_getRoundValue:function(e,t,i){return(i?Math.ceil(e/t):Math.floor(e/t))*t},calculateLogNiceInterval:function(e,t){for(var i=this.GetActualDesiredIntervalsCount(t,t.length),s=e,a=Math.pow(10,Math.floor(ej.EjSvgRender.utils._logBase(s,10))),r=[10,5,2,1],n=0;n<r.length;n++){var o=a*r[n];if(i<e/o)return s;s=o}return s},_getLogAutoRange:function(t,i,s,a){var r=ej.EjSvgRender.utils._logBase(i,t.logBase);r=e.isNumeric(r)?r:i;var n=ej.EjSvgRender.utils._logBase(s,t.logBase);n=e.isNumeric(n)?n:s;var o=this._getRoundValue(r,1,!1),l=this._getRoundValue(n,1,!0);0==o&&0==l&&(o=ej.EjSvgRender.utils._logBase(s-s/2,t.logBase),l=ej.EjSvgRender.utils._logBase(s+s/2,t.logBase)),a=l-o;var d=this.calculateLogNiceInterval(a,t);return t.actual_Range={min:o,max:l,interval:d,Delta:a},o=Math.pow(t.logBase,Math.floor(r)),l=Math.pow(t.logBase,Math.ceil(n)),a=l-o,t.setRange?(ej.util.isNullOrUndefined(t.range.interval)&&(t.range.interval=d),ej.util.isNullOrUndefined(t.range.max)&&(t.range.max=l),ej.util.isNullOrUndefined(t.range.min)&&(t.range.min=o),t.actual_Range=e.extend(!0,{},t.range),ej.util.isNullOrUndefined(t.actual_Range.max)||(t.actual_Range.max=ej.EjSvgRender.utils._logBase(t.actual_Range.max,t.logBase),t.actual_Range.max=this._getRoundValue(t.actual_Range.max,1,!0)),ej.util.isNullOrUndefined(t.range.min)||(t.actual_Range.min=ej.EjSvgRender.utils._logBase(t.actual_Range.min,t.logBase),t.actual_Range.min=this._getRoundValue(t.actual_Range.min,1,!1)),t.setRange=!0,t.range):t.range={min:o,max:l,interval:d,Delta:a}},_calculateLogRange:function(e,t,i,s){e.zoomed||this._seriesMinMax(e,t,i,"logarithmic",s)},_calculateLogPadding:function(e,t,i){var s=i.min,a=i.max,r=i.interval;t.actualRange.min=s,t.actualRange.max=a,t.actualRange.interval=r,t.actualRange.delta=a-s,this._calculateVisibleRange(t)},_calculateVisibleRange:function(t,i,s){if(this.chartObj=i||this.chartObj,t.visibleRange=s?t.visibleRange:e.extend(!0,{},t.actualRange),(t.zoomFactor<1||t.zoomPosition>0)&&"polaraxes"!=this.chartObj.model.AreaType&&!this.chartObj.model.disableZoom){t.zoomFactor=t.zoomFactor>1?1:t.zoomFactor<0?0:t.zoomFactor,t.zoomPosition=t.zoomPosition<0?0:t.zoomPosition>1?1:t.zoomPosition;var a=t.actualRange;if(t.isInversed)var r=t.actualRange.max-t.zoomPosition*t.actualRange.delta,n=r-t.zoomFactor*t.actualRange.delta;else var r=t.actualRange.min+t.zoomPosition*t.actualRange.delta,n=r+t.zoomFactor*t.actualRange.delta;r<a.min&&(n+=a.min-r,r=a.min),n>a.max&&(r-=n-a.max,n=a.max);var o=Math.abs(n-r),l=t.enableAutoIntervalOnZooming?this.calculateLogNiceInterval(o,t):t.visibleRange.interval,d=ej.util.isNullOrUndefined(t.roundingPlaces)?0==ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval):t.roundingPlaces;if(l=parseFloat(t.visibleRange.interval.toFixed(d)),s)return{min:Math.min(r,n),max:Math.max(r,n),interval:l};t.visibleRange.interval=l,t.visibleRange.min=Math.min(r,n),t.visibleRange.max=Math.max(r,n),t.visibleRange.delta=o,t.zoomed=null===this.chartObj.zoomed||void 0===this.chartObj.zoomed||this.chartObj.zoomed}},_calculateAxisLabels:function(t,i){var s,a=i.roundingPlaces;for(s=t.zoomed||i.zoomed?i.visibleRange.min-i.visibleRange.min%i.visibleRange.interval:i.visibleRange.min;s<=i.visibleRange.max;s+=i.visibleRange.interval)if(ej.EjSvgRender.utils._inside(s,i.visibleRange)){var r=i.labelFormat?i.labelFormat.match("{value}"):null,n=Math.pow(i.logBase,s),o=n.toString().split(0).length-1>10?10:20;n=parseFloat(n.toFixed(!a&&a>o?a:o));var l=i.labelFormat?null!=r?i.labelFormat.replace("{value}",n):ej.format(n,i.labelFormat,t.model.locale):n,d=e.extend({},ej.EjSvgRender.commonChartEventArgs);d.data={label:{Text:l,Value:s},axis:i},t._trigger("axesLabelRendering",d),i.visibleLabels.push({Value:s,Text:d.data.label.Text})}i._LableMaxWidth=ej.EjSvgRender.utils._getMaxLabelWidth(i,this.chartObj),"vertical"==i.orientation&&(i._LableMaxWidth.maxWidth=this.chartObj.maxLabelWidth,i._LableMaxWidth.width=this.chartObj.maxLabelWidth)},_calculateRanges:function(e,t,i,s){this.chartObj=e,this._calculateLogRange(e,t,i,s),e.model._drawTrendline&&this._calculateTrendLineRange(e,t,i),this._calculateLogPadding(e,t,t.actual_Range),this._calculateAxisLabels(e,t)}});ej.axisTypes.logarithmic=a;var r=t(ej.EjAxisRenderer,{_calculateCategoryRange:function(t,i){var s=void 0==this.chartObj.model.legendCollapsed?!this.chartObj.zoomed:this.chartObj.model.legendCollapsed;if(!this.chartObj.model.excludeDataUpdate||s){var a,r,n,o,l={maxX:null,minX:0},d=[],h=t.isIndexed,c=this.chartObj.model.locale;if(i.length>0&&this.chartObj.model._hasSeriesPoints&&i[0].points.length>0||this.chartObj.model.indicators[0]._points.length>0){for(var u=0;u<i.length;u++){o=i[u].points.length;for(var p=0;p<o;p++)a="date"==i[u]._xAxisValueType?ej.format(new Date(i[u].points[p].x),ej.util.isNullOrUndefined(t.labelFormat)?"dd/MM/yyyy":t.labelFormat,c):i[u].points[p].x,h?d[p]=0==u?a:d[p]+", "+a:e.inArray(a,d)<0&&d.push(a);(!t.maxPointLength||t.maxPointLength<o)&&(t.maxPointLength=o)}for(var m=0;m<i.length;m++){i[m]._pointCollection=[];for(var g=0;g<i[m].points.length;g++)i[m]._pointCollection.push(i[m].points[g].x),a="date"==i[m]._xAxisValueType?ej.format(new Date(i[m].points[g].x),ej.util.isNullOrUndefined(t.labelFormat)?"dd/MM/yyyy":t.labelFormat,c):i[m].points[g].x,i[m].points[g].xValue=h?g:e.inArray(a,d);i[m].minX=0,i[m].maxX="date"==i[m]._xAxisValueType?i[m]._pointCollection.length-1:d.length-1,0==m&&(l.maxX=i[m].maxX,t.labels="date"==i[m]._xAxisValueType?i[m]._pointCollection:d,t._categoryValueType=i[m]._xAxisValueType),l.maxX<i[m].maxX&&(l.maxX=i[m].maxX,t.labels=[],t.labels=d)}if(this.chartObj.model.indicatorRange&&this.chartObj.model.indicatorRange[t.name]){var f=this.chartObj.model.indicatorRange[t.name];(l.minX>f.min||null==l.minX)&&(l.minX=f.min),(l.maxX<f.max||null==l.maxX)&&(l.maxX=f.max)}n=l.maxX-l.minX,r=t.setRange&&t.range.interval?Math.ceil(t.range.interval):this._calculateActualInterval(n,t),t.range={min:l.minX,max:l.maxX,interval:r,Delta:n}}else{var _=t.labels.length;_>0?(n=_-1,r=this._calculateActualInterval(n,t),t.range={min:0,max:_-1,interval:r,Delta:n}):t.range||(t.range={min:0,max:6,interval:1,Delta:6})}}var v,b=0,x=t.labelIntersectAction,y=t.labelRotation;if(!("rotate45"==x&&"rotate90"==x||0!=y&&null!=y))for(v=0;v<t.labels.length;v++)if("string"==typeof t.labels[v]){var _=t.labels[v].split("<br>").length;b=Math.max(_,b)}t.rowsCount=b},_calculateActualInterval:function(e,t){return null==t.categoryInterval?Math.max(1,Math.floor(e/this.GetActualDesiredIntervalsCount(t,t.length))):t.categoryInterval},_applyRangePadding:function(e){if(!this.chartObj.zoomed&&!this.chartObj._scrollBarEnabled&&!e.zoomed){var t=0;if("polaraxes"!==this.chartObj.model.AreaType&&(t=null===e.labelPlacement||void 0===e.labelPlacement||""===e.labelPlacement?-.5:"betweenticks"==e.labelPlacement.toLowerCase()?-.5:0),!this.chartObj.scrollsvgObj)if(t<0)e.range.min=e.range.min+t,e.range.max=e.range.max-t,e.range.delta=e.range.max-e.range.min,e.actualRange=e.range;else{var i=_sideBySeriesPadding(this.chartObj,e.range.min,e.range.max,e);e.range.min=i.startPadding,e.range.max=i.endPadding,e.range.delta=e.range.max-e.range.min,e.actualRange=e.range}}this._calculateVisibleRange(e)},_calculateVisibleRange:function(t,i,s){if(this.chartObj=i||this.chartObj,t.visibleRange=s?t.visibleRange:e.extend(!0,{},t.actualRange),(t.zoomFactor<1||t.zoomPosition>0)&&"polaraxes"!=this.chartObj.model.AreaType&&!this.chartObj.model.disableZoom){t.zoomFactor=t.zoomFactor>1?1:t.zoomFactor<0?0:t.zoomFactor,t.zoomPosition=t.zoomPosition<0?0:t.zoomPosition>1?1:t.zoomPosition;var a=t.actualRange;if(t.isInversed)var r=t.actualRange.max-t.zoomPosition*t.actualRange.delta,n=r-t.zoomFactor*t.actualRange.delta;else var r=t.actualRange.min+t.zoomPosition*t.actualRange.delta,n=r+t.zoomFactor*t.actualRange.delta;r<a.min&&(n+=a.min-r,r=a.min),n>a.max&&(r-=n-a.max,n=a.max);var o=Math.abs(n-r),l=this._calculateActualInterval(o,t),d=Math.min(r,n),h=Math.max(r,n);if(s)return{min:d,max:h,interval:l};var o=Math.abs(n-r);t.visibleRange.interval=l,t.visibleRange.min=d,t.visibleRange.max=h,t.visibleRange.delta=o,t.zoomed=null===this.chartObj.zoomed||void 0===this.chartObj.zoomed||this.chartObj.zoomed}},_calculateAxisLabels:function(t){for(var i=t.visibleRange.interval,s=t.visibleRange.min-t.visibleRange.min%t.range.interval;s<=t.visibleRange.max;s+=i)if(ej.EjSvgRender.utils._inside(s,t.visibleRange)){var a=Math.round(s);t.visibleLabels.push({Value:a,Text:ej.EjSvgRender.utils._getLabelContent(a,t,this.chartObj.model.locale)});var r=e.extend({},ej.EjSvgRender.commonChartEventArgs);r.data={label:t.visibleLabels[t.visibleLabels.length-1],axis:t},this.chartObj._trigger("axesLabelRendering",r),t.visibleLabels[t.visibleLabels.length-1]=r.data.label}t._LableMaxWidth=ej.EjSvgRender.utils._getMaxLabelWidth(t,this.chartObj),"vertical"==currentAxis.orientation&&(t._LableMaxWidth.maxWidth=this.chartObj.maxLabelWidth,t._LableMaxWidth.width=this.chartObj.maxLabelWidth)},_calculateRanges:function(e,t,i){this.chartObj=e,this._saveRange(e,t),this._calculateCategoryRange(t,i),t._range=t.range,e.model._drawTrendline&&this._calculateTrendLineRange(e,t,i),this._applyRangePadding(t),this._calculateAxisLabels(t)}});ej.axisTypes.category=r;var n=t(ej.EjAxisRenderer,{_calculateDateTimeCategoryRange:function(t,i){var s,a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b={minX:0,MaxX:null},x=[],y=[],w=[],C=[],S=[];for(v=0;v<i.length;v++){for(i[v]._pointCollection=[],l=[],i[v]._points=[],i[v]._xPoints=[],i[v]._yPoints=[],m=i[v].points.length,_=0;_<m;_++)d=isNaN(new Date(i[v].points[_].x).getTime())?null:new Date(i[v].points[_].x).getTime(),-1!=l.indexOf(d)&&(i[v].points[_].xValue=l.indexOf(d)),l.push(d),i[v]._xPoints.push(d),i[v]._yPoints.push(i[v].points[_].y),null!=d&&C.push(d);for(ej.isNullOrUndefined(t.intervalType)&&(n=this.calculateDateTimeNiceInterval(t,new Date(Math.min.apply(null,C)),new Date(Math.max.apply(null,C))),t.intervalType=n.intervalType.toLowerCase()),g=0;g<l.length;g++){s=new Date(l[g]),-1==i[v]._points.indexOf(s.getTime())&&i[v]._points.push(s.getTime());e.inArray(l[g],i[v]._xPoints);if(i[v]._pointCollection.push(new Date(i[v].points[g].x)),0==v)i[v].points[g].x==i[v].points[g].xValue&&(i[v].points[g].xValue=g);else for(var T=0;T<v;T++){if((a=e.inArray(new Date(i[v].points[g].x).getTime(),i[T]._points))>=0){i[v].points[g].xValue=0==T?a:i[T].points[a].xValue;break}if(T==v-1){if(i[v].points[g].x==i[v].points[g].xValue)i[v].points[g].xValue=t.maxPointLength++;else{var R=i[v].points[g].xValue;i[v].points[g].xValue=i[v].points[R].xValue}break}}switch(0==v?-1:e.inArray(s.getTime(),w),t.intervalType){case"auto":-1==x.indexOf(s.getTime())&&x.push(s.getTime());break;case"years":c=s.getFullYear();break;case"months":p=s.getFullYear(),h=s.getMonth(),g<=0?c=g+1:(u=new Date(l[g-1]).getFullYear(),c+=p!=u?12-o+h:h-o),o=h;break;case"days":if(p=s.getMonth(),h=s.getDate(),g<=0)c=g+1;else if(u=new Date(l[g-1]).getMonth(),c+=p!=u?new Date(s.getFullYear(),u,1).getDate()-o+h:h-o,p==u){var k=this._diffDate(s,new Date(l[g-1]),1),O=new Date(s.getFullYear(),u,0).getDate();c=k>O?y[y.length-1]+1:c}o=h;break;case"hours":if(p=s.getDate(),h=s.getHours(),g<=0)c=g+1;else if(u=new Date(l[g-1]).getDate(),c+=p!=u?24-o+h:h-o,p==u){var k=this._diffDate(s,new Date(l[g-1]),24);c=k>24?y[y.length-1]+1:c}o=h;break;case"minutes":if(p=s.getHours(),h=s.getMinutes(),g<=0)c=g+1;else if(u=new Date(l[g-1]).getHours(),c+=p!=u?60-o+h:h-o,p==u){var k=this._diffDate(s,new Date(l[g-1]),1440);c=k>60?y[y.length-1]+1:c}o=h;break;case"seconds":if(p=s.getMinutes(),h=s.getSeconds(),g<=0)c=g+1;else if(u=new Date(l[g-1]).getMinutes(),c+=p!=u?60-o+h:h-o,p==u){var k=this._diffDate(s,new Date(l[g-1]),86400);c=k>60?y[y.length-1]+1:c}o=h;break;case"milliseconds":if(p=s.getSeconds(),h=s.getMilliseconds(),g<=0)c=g+1;else if(u=new Date(l[g-1]).getSeconds(),c+=p!=u?1e3-o+h:h-o,p==u){var k=this._diffDate(s,new Date(l[g-1]),864e5);c=k>1e3?y[y.length-1]+1:c}o=h}"auto"!=t.intervalType&&-1==x.indexOf(s.getTime())&&x.push(s.getTime()),c=0==v?c:y[y.length-1]+c,-1==y.indexOf(c)&&y.push(c),S.push(c),w.push(new Date(l[g]).getTime())}t.maxPointLength||("auto"!=t.intervalType?t.maxPointLength=y.length:t.maxPointLength=x.length)}for(f=0;f<i.length;f++)t.setRange||(t.range={min:null,max:null,interval:null}),ej.isNullOrUndefined(t.m_minPointsDelta)||(t.m_minPointsDelta=void 0),i[f].minX=ej.isNullOrUndefined(t.range.min)?0:t.range.min<b.minX?0:t.range.min,i[f].maxX=ej.isNullOrUndefined(t.range.max)?x.length-1:t.range.max>x.length-1?x.length-1:t.range.max,b.MaxX=i[f].maxX,b.minX=i[f].minX,t.labels=x,t.dateLabels=S,t._categoryValueType="date";if(b.minX==b.MaxX&&"onticks"==t.labelPlacement.toLowerCase()&&(b.MaxX+=1),i.length>0)r=b.MaxX-b.minX,n=null==t.range.interval||void 0==t.range.interval?1:t.range.interval<1?1:Math.ceil(t.range.interval),t.range={min:b.minX,max:b.MaxX,interval:n,Delta:r};else if(!t.setInterval){t.range={min:0,max:6,interval:1,Delta:6},t.dateLabels=[];for(var T=0;T<=t.range.max;T++)t.labels.push(""),t.dateLabels.push("")}},_diffDate:function(e,t,i){var s,a;return s=864e5,a=Math.abs(e.getTime()-t.getTime())/s,Math.round(a*i)},_calculateAxisLabels:function(t){for(var i,s,a,r,n,o=t.visibleRange.interval,l=[],d=this.chartObj.model.series.length,h=t.visibleRange.min-t.visibleRange.min%t.range.interval;h<=t.visibleRange.max;h+=o)ej.EjSvgRender.utils._inside(h,t.visibleRange)&&(s=Math.round(h),a=t.dateLabels,ej.util.isNullOrUndefined(a)||(a[a.length-1]-a[s]>=o&&t.visibleRange.max<h+o&&(t.visibleRange.max+=h+o-t.visibleRange.max),r=e.inArray(a[s],l)),(r<0||"auto"==t.intervalType||0==d)&&s<t.labels.length&&("auto"!=t.intervalType&&(i=a[s],l.push(i)),t.visibleLabels.push({Value:s,Text:t.labelFormat||""==t.labels[Math.floor(s)]?ej.EjSvgRender.utils._getLabelContent(s,t,this.chartObj.model.locale):ej.format(new Date(t.labels[Math.floor(s)]),ej.EjSvgRender.utils._dateTimeLabelFormat(t.intervalType,t),this.chartObj.model.locale)}),n=e.extend({},ej.EjSvgRender.commonChartEventArgs),n.data={label:t.visibleLabels[t.visibleLabels.length-1],axis:t},this.chartObj._trigger("axesLabelRendering",n),t.visibleLabels[t.visibleLabels.length-1]=n.data.label));t._LableMaxWidth=ej.EjSvgRender.utils._getMaxLabelWidth(t,this.chartObj),"vertical"==currentAxis.orientation&&(t._LableMaxWidth.maxWidth=this.chartObj.maxLabelWidth,t._LableMaxWidth.width=this.chartObj.maxLabelWidth)},_calculateActualInterval:function(e,t){return null==t.categoryInterval?Math.max(1,Math.floor(e/this.GetActualDesiredIntervalsCount(t,t.length))):t.categoryInterval},_applyRangePadding:function(e){if(!this.chartObj.zoomed&&!this.chartObj._scrollBarEnabled){var t=0;if("polaraxes"!==this.chartObj.model.AreaType&&(t=null===e.labelPlacement||void 0===e.labelPlacement?-.5:"betweenticks"==e.labelPlacement.toLowerCase()?-.5:0),t<0)e.range.min=e.range.min+t,e.range.max=e.range.max-t,e.range.delta=e.range.max-e.range.min,e.actualRange=e.range;else{var i=_sideBySeriesPadding(this.chartObj,e.range.min,e.range.max,e);e.range.min=i.startPadding,e.range.max=i.endPadding,e.range.delta=e.range.max-e.range.min,e.actualRange=e.range}}this._calculateVisibleRange(e)},_calculateVisibleRange:function(t,i,s){if(this.chartObj=i||this.chartObj,t.visibleRange=s?t.visibleRange:e.extend(!0,{},t.actualRange),(t.zoomFactor<1||t.zoomPosition>0)&&"polaraxes"!=this.chartObj.model.AreaType&&!this.chartObj.model.disableZoom){t.zoomFactor=t.zoomFactor>1?1:t.zoomFactor<0?0:t.zoomFactor,t.zoomPosition=t.zoomPosition<0?0:t.zoomPosition>1?1:t.zoomPosition;var a=t.actualRange;if(t.isInversed)var r=t.actualRange.max-t.zoomPosition*t.actualRange.delta,n=r-t.zoomFactor*t.actualRange.delta;else var r=t.actualRange.min+t.zoomPosition*t.actualRange.delta,n=r+t.zoomFactor*t.actualRange.delta;r<a.min&&(n+=a.min-r,r=a.min),n>a.max&&(r-=n-a.max,n=a.max);var o=Math.abs(n-r),l=this._calculateActualInterval(o,t),d=Math.min(r,n),h=Math.max(r,n);if(s)return{min:d,max:h,interval:l};var o=Math.abs(n-r);t.visibleRange.interval=l,t.visibleRange.min=d,t.visibleRange.max=h,t.visibleRange.delta=o,t.zoomed=null===this.chartObj.zoomed||void 0===this.chartObj.zoomed||this.chartObj.zoomed}},_calculateRanges:function(e,t,i){this.chartObj=e,this._saveRange(e,t),this._calculateDateTimeCategoryRange(t,i),e.model._drawTrendline&&this._calculateTrendLineRange(e,t,i),t._range=t.range,this._applyRangePadding(t),this._calculateAxisLabels(t)}});ej.axisTypes.datetimecategory=n,ej.EjAxisRenderer.prototype={_drawGridLines:function(e,t,i){"cartesianaxes"==this.model.AreaType?"horizontal"==t.orientation.toLowerCase()?this._drawXAxisGridLine(e,t,i):this._drawYAxisGridLine(e,t,i):"horizontal"==t.orientation.toLowerCase()&&0==e?(this._drawPolarGridLine(t),this._drawPolarLabels(t)):1==e&&this._drawPolarCircle(t)},_drawAxes:function(e,t){"cartesianaxes"==this.model.AreaType&&(t.visible&&"horizontal"==t.orientation.toLowerCase()&&(this._drawXAxisLabels(e,t),this._drawXTitle(e,t)),t.visible&&"vertical"==t.orientation.toLowerCase()&&(this._drawYAxisLabels(e,t),this._drawYTitle(e,t)))},_getSharpPath:function(e){return e%2==0?0:.5},_drawAxisLine:function(t){var i=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisLine"}),s=ej.EjSvgRender.utils._getStringBuilder(),a=this.model.centerX,r=this.model.centerY,n=this.model.centerX,o=this.model.centerY-this.model.Radius,l="M "+a+" "+r+" L "+n+" "+o;if(t.visible&&t.axisLine.visible){var d={id:this.svgObject.id+"_YAxisLines",fill:"none","stroke-width":t.axisLine.width,stroke:t.axisLine.color,opacity:t.axisLine.opacity,"stroke-dasharray":t.axisLine.dashArray,d:l};this.svgRenderer.drawPath(d,i),e(i).appendTo(this.gPolarAxisEle)}if(t.visible&&t.majorTickLines.visible){i=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisMajorTicks"});for(var h=0;h<t.visibleLabels.length;h++){var c=t.visibleLabels[h],u=this.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(t,c.Value,this),p={};p.X1=this.model.centerX,p.Y1=this.model.centerY-u,p.X2=p.X1-t.majorTickLines.size,p.Y2=p.Y1,s.append("M "+p.X1+" "+p.Y1+" L "+p.X2+" "+p.Y2+" ")}var m=s.toString(),d={id:this.svgObject.id+"_YAxisMajorTicks",fill:"none","stroke-width":t.majorTickLines.width,stroke:t.majorTickLines.color,d:m};this.svgRenderer.drawPath(d,i),e(i).appendTo(this.gPolarAxisEle)}if(t.visible){for(var g,f,i=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisLabels"}),_=t.font,v=t.visibleLabels.length,h=0;h<v;h++){
var u=(this.model.Radius||this.model._radius)*ej.EjSvgRender.utils._valueToCoefficient(t,t.visibleLabels[h].Value,this),b=t.visibleLabels[h].Text,x=ej.EjSvgRender.utils._measureText(b,null,t.font),y=this.model.centerX-t.majorTickLines.size-this.model.elementSpacing/3,w=this.model.centerY-u+x.height/5,d={id:this.svgObject.id+"_"+t.name+"_YLabel_"+h,x:y,y:w,fill:_.color,"font-size":_.size,"font-family":_.fontFamily,"font-style":_.fontStyle,"font-weight":_.fontWeight,opacity:_.opacity,"text-anchor":"end"};this.svgRenderer.drawText(d,b,i),f=d.x-x.width,g={x:f,y:d.y,width:x.width,height:x.height},t.visibleLabels[h].region={bounds:g,labelText:b}}e(i).appendTo(this.gPolarAxisEle)}},_drawPolarLabels:function(t){if(!t.visible)return 0;for(var i,s,a,r,n=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisLabels"}),o=this.model.Radius+t.majorTickLines.size,l=t.font,d=t.visibleLabels.length,h=0;h<d;h++){var c=ej.EjSvgRender.utils._valueToPolarCoefficient(t,t.visibleLabels[h].Value),u=ej.EjSvgRender.utils._valueToVector(t,t.visibleLabels[h].Value);if(!isNaN(u.X)&&!isNaN(u.Y)){var p=t.visibleLabels[h].Text,m=this.model.centerX+o*u.X,g=this.model.centerY+o*u.Y,f=m<this.model.centerX?"end":m>this.model.centerX?"start":"middle",_=ej.EjSvgRender.utils._measureText(p,this.model.m_AreaBounds.Height,t.font);.25==c?(m-=this.model.elementSpacing/2,g+=_.height/4):.5==c?g+=_.height:.75==c?(m+=this.model.elementSpacing/2,g+=_.height/4):1==c||0==c?g-=_.height/2:.25<c&&c<.5?(m-=this.model.elementSpacing/2,g+=_.height/2):.5<c&&c<=.75?(m+=this.model.elementSpacing/2,g+=_.height/2):0<c&&c<.25?m-=this.model.elementSpacing/2:m+=this.model.elementSpacing/2,0==h&&(i=m),h==d-1&&"category"!=t._valueType&&(r=ej.EjSvgRender.utils._measureText(p,null,l).width,(r+=m)>i&&(p=""));var v={id:this.svgObject.id+"_"+t.name+"_XLabel_"+h,x:m,y:g,fill:l.color,"font-size":l.size,"font-family":l.fontFamily,"font-style":l.fontStyle,"font-weight":l.fontWeight,opacity:l.opacity,"text-anchor":f};this.svgRenderer.drawText(v,p,n),a="middle"==f?v.x-_.width/2:"end"==f?v.x-_.width:v.x,s={x:a,y:v.y,width:_.width,height:_.height},t.visibleLabels[h].region={bounds:s,labelText:p}}}e(n).appendTo(this.gXaxisEle)},_drawPolarCircle:function(t){if(t.majorGridLines.visible){var i=ej.EjSvgRender.utils._getStringBuilder(),s=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisGrid"});if(this.model.isPolar)for(var a=0;a<t.visibleLabels.length;a++){var r=t.visibleLabels[a],n=this.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(t,r.Value,this),o={id:this.svgObject.id+"_YAxisGridLines_"+a,cx:this.model.centerX,cy:this.model.centerY,r:n,fill:"transparent","stroke-width":t.majorGridLines.width,stroke:t.majorGridLines.color,opacity:this.vmlRendering?.3:t.majorGridLines.opacity};this.svgRenderer.drawCircle(o,s)}else{for(var a=0;a<t.visibleLabels.length;a++)for(var r=t.visibleLabels[a],n=this.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(t,r.Value,this),l=0;l<this.model._axes[0].visibleLabels.length;l++){var d=this.model._axes[0],h=ej.EjSvgRender.utils._valueToVector(d,d.visibleLabels[l].Value);if(!isNaN(h.X)&&!isNaN(h.Y)){var c;c=l+1<d.visibleLabels.length?ej.EjSvgRender.utils._valueToVector(d,d.visibleLabels[l+1].Value):ej.EjSvgRender.utils._valueToVector(d,d.visibleLabels[0].Value);var u={X:this.model.centerX+n*h.X,Y:this.model.centerY+n*h.Y},p={X:this.model.centerX+n*c.X,Y:this.model.centerY+n*c.Y};i.append("M "+u.X+" "+u.Y+" L "+p.X+" "+p.Y+" ")}}if(t.majorGridLines.visible){var m=i.toString(),o={id:this.svgObject.id+"_YAxisGridLines",fill:"none","stroke-width":t.majorGridLines.width,stroke:t.majorGridLines.color,opacity:t.majorGridLines.opacity,"stroke-dasharray":t.majorGridLines.dashArray,d:m};this.svgRenderer.drawPath(o,s)}}}e(s).appendTo(this.gYaxisEle)},_drawPolarGridLine:function(t){var i,s,a,r,n,o,l,d=this.model,h=d.legend,c=ej.EjSvgRender.utils._measureText(h.title.text,null,h.title.font).height,u=h.position.toLowerCase(),p=0,m=0,g=ej.EjSvgRender.utils._getStringBuilder(),f=ej.EjSvgRender.utils._getStringBuilder(),_=h.border.width,v=t.visibleLabels.length,b=d.border.width,x=d.title,y=d.title.subTitle,w=!(!x.enableTrim||"wrap"!=x.textOverflow&&"wrapandtrim"!=x.textOverflow),C=!(""==y.text||!y.visible||!y.enableTrim||"wrap"!=y.textOverflow&&"wrapandtrim"!=y.textOverflow);h.visible&&"custom"!=u&&("right"==u||"left"==u?p=("right"==u?d.margin.right:d.margin.left)+d.LegendActualBounds.Width+2*(_+b):m=("top"==u?d.margin.top:d.margin.bottom)+d.LegendActualBounds.Height+c+2*(_+b)),i=(d.title.text&&d.title.visible?d._titleLocation.Y+(w?d._titleLocation.size.height:0)+(C?d._subTitleLocation.size.height:0):0)+m,s=d.svgWidth-p,a=d.svgHeight-i,d.centerX=.5*s+("left"===u?p:0),d.centerY=.5*a+("top"===u?i:x.text&&x.visible?d._titleLocation.Y+(w?d._titleLocation.size.height:0)+(C?d._subTitleLocation.size.height:0):0);var S=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisGrid"});d.finalSize={width:s,height:a},d.Radius=Math.min(d.finalSize.width,d.finalSize.height)/2-2*d.elementSpacing-t.majorTickLines.size-t._LableMaxWidth.maxHeight;if(t.majorGridLines.visible)for(var T=0;T<v;T++)r=ej.EjSvgRender.utils._valueToVector(t,t.visibleLabels[T].Value),n={},n.X1=d.centerX,n.Y1=d.centerY,n.X2=d.centerX+d.Radius*r.X,n.Y2=d.centerY+d.Radius*r.Y,g.append("M "+n.X1+" "+n.Y1+" L "+n.X2+" "+n.Y2+" ");if(t.visible&&t.majorTickLines.visible)for(var R=d.Radius,T=0;T<v;T++){r=ej.EjSvgRender.utils._valueToVector(t,t.visibleLabels[T].Value),n={},n.X1=d.centerX+R*r.X,n.Y1=d.centerY+R*r.Y,n.X2=n.X1+t.majorTickLines.size*r.X,n.Y2=n.Y1+t.majorTickLines.size*r.Y;var k="M "+n.X1+" "+n.Y1+" L "+n.X2+" "+n.Y2+" ";-1==k.indexOf("NaN")&&f.append(k)}if(t.majorGridLines.visible){o=g.toString();var O={id:this.svgObject.id+"_XAxisGridLines",fill:"none","stroke-width":t.majorGridLines.width,stroke:t.majorGridLines.color,opacity:t.majorGridLines.opacity,"stroke-dasharray":t.majorGridLines.dashArray,d:o};-1==o.indexOf("NaN")&&(this.svgRenderer.drawPath(O,S),e(S).appendTo(this.gXaxisEle))}if(t.visible&&t.majorTickLines.visible){l=f.toString();var O={id:this.svgObject.id+"_XAxisMajorTicks",fill:"none","stroke-width":t.majorTickLines.width,stroke:t.majorTickLines.color,d:l};this.svgRenderer.drawPath(O,S),e(S).appendTo(this.gXaxisEle)}},_drawXAxisTickLine:function(t,i,s,a){var r,n,o,l,d=ej.EjSvgRender.utils._getStringBuilder(),h=ej.EjSvgRender.utils._getStringBuilder(),c=Math.floor(i.x),u=(Math.floor(i.x+i.width),i._opposed),p=[],m=i._isScroll&&!(null!=i.scrollbarSettings.pointsLength&&i.scrollbarSettings.pointsLength<i.maxPointLength),g=i.labelBorder,f=a.axes[i.name]._validCross;if(0!=t&&!f&&("inside"==i.labelPosition&&"inside"==i.tickLinesPosition||"inside"==i.labelPosition&&"inside"!=i.tickLinesPosition)&&i.y!=this.model.m_AreaBounds.Height+this.model.m_AreaBounds.Y&&i.y!=this.model.m_AreaBounds.Y)var _=u?Math.floor(i.y-i._LableMaxWidth.height):Math.floor(i.y+i._LableMaxWidth.height),v=u?Math.floor(i.y-i._LableMaxWidth.height):Math.floor(i.y+i._LableMaxWidth.height);else if(0==t||f||"inside"==i.labelPosition||"inside"!=i.tickLinesPosition||i.y==this.model.m_AreaBounds.Height+this.model.m_AreaBounds.Y||i.y==this.model.m_AreaBounds.Y)var _=v=i._y?i.showNextToAxisLine?i.y:i._y:Math.floor(i.y+i.majorTickLines.size-5);else var _=u?Math.floor(i.y-i.majorTickLines.size):Math.floor(i.y+i.majorTickLines.size),v=u?Math.floor(i.y-i.majorTickLines.size):Math.floor(i.y+i.majorTickLines.size);if(!s)var b=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisTicklines_"+t});i.labelPlacement=i.labelPlacement?i.labelPlacement:ej.datavisualization.Chart.LabelPlacement.BetweenTicks;var x=i.labels.length>0&&"betweenticks"==i.labelPlacement.toLowerCase()?-.5:0,y=i.visibleLabels.length;i._valueType.toLowerCase()==ej.datavisualization.Chart.ValueType.Category&&x<0&&(y=y>0?i.visibleLabels.length+1:y);for(var w=0;w<y;w++){l=i.visibleLabels[w]?i.visibleLabels[w].Value:i.visibleLabels[w-1].Value+i.range.interval;var C=i.labels.length>0&&x<0?l+x:l;if(C=i.roundingPlaces?C:parseFloat(C.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(i.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(i.visibleRange.interval))),ej.EjSvgRender.utils._inside(C,i.visibleRange)){if(i.hidePartialLabels&&(0==w||w==y-1))continue;if(i.minorGridLines.visible||i.minorTickLines.visible){var S,T=this._getSharpPath(i.minorTickLines.width);this._getSharpPath(i.minorGridLines.width);if("logarithmic"==i._valueType){E=C;var R=i.visibleRange.max,k=i.visibleRange.min,O=Math.pow(i.logBase,E-i.visibleRange.interval),D=Math.pow(i.logBase,E),I=(D-O)/(i.minorTicksPerInterval+1),j=O+I;E=ej.EjSvgRender.utils._logBase(j,i.logBase);for(var L=0;L<i.minorTicksPerInterval;L++)if(E<R&&E>k&&(o=Math.ceil((E-k)/(R-k)*i.width),i.minorTickLines&&i.minorTickLines.visible)){var A=Math.floor(o+c);S="inside"!=i.tickLinesPosition&&"inside"!=i.labelPosition||"inside"!=i.tickLinesPosition&&"inside"==i.labelPosition?u?Math.floor(_-i.minorTickLines.size):Math.floor(i.minorTickLines.size+_):u?Math.floor(_+i.minorTickLines.size):_-Math.floor(i.minorTickLines.size),d.append("M "+(A+T)+" "+(S+T)+" L "+(A+T)+" "+(_+T)+" ")}}else for(var L=0,E=C;L<i.minorTicksPerInterval;L++)if((E+=i.visibleRange.interval/(i.minorTicksPerInterval+1))<i.visibleRange.max&&E>i.visibleRange.min&&(o=Math.ceil((E-i.visibleRange.min)/(i.visibleRange.max-i.visibleRange.min)*i.width),i.minorTickLines&&i.minorTickLines.visible)){S="inside"!=i.tickLinesPosition&&"inside"!=i.labelPosition||"inside"!=i.tickLinesPosition&&"inside"==i.labelPosition?u?Math.floor(_-i.minorTickLines.size):Math.floor(i.minorTickLines.size+_):u?Math.floor(_+i.minorTickLines.size):Math.floor(_-i.minorTickLines.size);var P=Math.floor(o+c);d.append("M "+(P+T)+" "+(S+T)+" L "+(P+T)+" "+(_+T)+" ")}}if(i.majorTickLines.visible||i.majorGridLines.visible||g.width>0){var M=this._getSharpPath(i.majorTickLines.width),F=(this._getSharpPath(i.majorGridLines.width),p[w]=this.pointX=Math.ceil(ej.EjSvgRender.utils._getPointXY(C,i.visibleRange,i.isInversed)*i.width));if(i.majorTickLines.visible){var N=i.majorTickLines.size+i.axisLine.width/2;if("inside"==i.tickLinesPosition&&"inside"==i.labelPosition||"inside"==i.tickLinesPosition&&"inside"!=i.labelPosition)var z=u?_+N:_-N;else var z=(u?_-N:N+_)-(m?u?this.model.scrollerSize:-this.model.scrollerSize:0);h.append("M "+(Math.floor(F+c)+M)+" "+(Math.floor(z)+M)+" L "+(Math.floor(F+c)+M)+" "+(Math.floor(_+(u?-i.axisLine.width/2:i.axisLine.width/2))+M)+" ")}}}}if(g.width>0){var z,V,B,H,w,Y,U=ej.EjSvgRender.utils._getStringBuilder(),W=m?this.model.scrollerSize:0,N=i.axisLine.width,X=i.labelPosition.toLowerCase(),G=(this.model.m_AreaBounds.X,this.model.m_AreaBounds.Width,g.width),$=i._LableMaxWidth.height+i.axisLine.width/2+2,y=i.visibleLabels.length;for(_=i.y,i.tickLinesPosition==X&&($+=i.majorTickLines.size),"inside"==X?(z=_+N,V=u?_+$:_-$):(z=u?_-N:N+_+(i.zoomFactor<1&&this.model.zooming.enableScrollbar&&0==t?this.model.scrollerSize:0),V=u?_-$-W:_+$+W),w=0;w<y;w++)Y=(p[p.length-1]-p[p.length-2])/2,!ej.util.isNullOrUndefined(p[w])&&p.length>=1&&!isNaN(Y)&&("category"==i._valueType&&"betweenticks"==i.labelPlacement.toLowerCase()?(B=p[w]+c,H=p[w]+2*Y+c):(B=p[w]-Y+c,H=p[w]+Y+c),H=Math.floor(H),V=Math.floor(V),B=Math.floor(B),z=Math.floor(z),B<i.x?U.append("M "+Math.floor(c)+" "+V+" L "+H+" "+V+" "):H>i.width+i.x?(U.append("M "+B+" "+z+" L "+B+" "+V+" L "+Math.floor(i.width+c)+" "+V+" "),H-G<=i.width+i.x&&U.append("M "+Math.floor(i.width+c)+" "+V+" L "+(i.x+i.width)+" "+z)):(0==w&&U.append("M "+i.x+" "+V+" L "+B+" "+V+" "),U.append("M "+B+" "+z+" L "+B+" "+V+" L "+H+" "+V+" "),w==y-1&&U.append("M "+H+" "+z+" L "+H+" "+V+" M "+H+" "+V+" L "+(i.x+i.width)+" "+V)));var q={id:this.svgObject.id+"_XAxisLabelBorder_"+t,fill:"transparent","stroke-width":g.width,stroke:g.color,d:U.toString()};this.svgRenderer.drawPath(q,s),e(s).appendTo(this.gXaxisEle)}if(i.minorTickLines.visible&&i.visible&&i.minorTicksPerInterval>0){n=d.toString();var Q={id:this.svgObject.id+"_XAxisMinorTicks_"+t,fill:"none","stroke-width":i.minorTickLines.width,stroke:i.minorTickLines.color,d:n};s?this.svgRenderer.drawPath(Q,s):this.svgRenderer.drawPath(Q,b)}if(i.majorTickLines.visible&&i.visible){r=h.toString();var K={id:this.svgObject.id+"_XAxisMajorTicks_"+t,fill:"none","stroke-width":i.majorTickLines.width,stroke:i.majorTickLines.color,d:r};s?this.svgRenderer.drawPath(K,s):this.svgRenderer.drawPath(K,b)}"inside"==i.tickLinesPosition&&e(b).appendTo(this.gXaxisEle)},_drawXAxisGridLine:function(t,i,s){var a,r,n,o,l=ej.EjSvgRender.utils._getStringBuilder(),d=ej.EjSvgRender.utils._getStringBuilder(),h=[],c=this.model.elementSpacing+5,u=i._opposed,p=Math.floor(i.x),m=Math.floor(i.x+i.width),g=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisGrid_"+t}),f=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisAlternateGridBand_"+t}),_=s.axes[i.name]._validCross;if(0==t||_||"inside"!=i.labelPosition||"inside"!=i.tickLinesPosition||i.y==this.model.m_AreaBounds.Height+this.model.m_AreaBounds.Y||i.y==this.model.m_AreaBounds.Y)if("inside"==i.labelPosition&&"inside"!=i.tickLinesPosition&&i.y!=this.model.m_AreaBounds.Height+this.model.m_AreaBounds.Y&&i.y!=this.model.m_AreaBounds.Y)var v=b=u?Math.floor(i.y-i._LableMaxWidth.height)+c:i.showNextToAxisLine?Math.floor(i.y+i._LableMaxWidth.height)-c:Math.floor(i.y+i._LableMaxWidth.height);else if(0==t||_||"inside"==i.labelPosition||"inside"!=i.tickLinesPosition||i.y==this.model.m_AreaBounds.Height+this.model.m_AreaBounds.Y||i.y==this.model.m_AreaBounds.Y)var v=Math.floor(i.y),b=Math.floor(i.y);else var v=u?Math.floor(i.y-i.majorTickLines.size):Math.floor(i.y+i.majorTickLines.size),b=u?Math.floor(i.y-i.majorTickLines.size):Math.floor(i.y+i.majorTickLines.size);else var v=u?Math.floor(i.y-i._LableMaxWidth.height):Math.floor(i.y+i._LableMaxWidth.height),b=u?Math.floor(i.y-i._LableMaxWidth.height):Math.floor(i.y+i._LableMaxWidth.height);if(i.visible&&i.axisLine.visible){var x=i.axisLine.offset>0?i.axisLine.offset:0,y=this._getSharpPath(i.axisLine.width),w={id:this.svgObject.id+"_XAxisLine_"+t,x1:p-i.plotOffset+y+x,y1:v+y,x2:m+i.plotOffset-x+y,y2:b+y,"stroke-dasharray":i.axisLine.dashArray,"stroke-width":i.axisLine.width,stroke:i.axisLine.color,opacity:i.axisLine.opacity||1};s.axes[i.name]._lineOption=[w,this.gXaxisEle]}else s.axes[i.name]._lineOption=[null,this.gXaxisEle];i.labelPlacement=i.labelPlacement?i.labelPlacement:ej.datavisualization.Chart.LabelPlacement.BetweenTicks;var C=i.labels.length>0&&"betweenticks"==i.labelPlacement.toLowerCase()?-.5:0,S=i.visibleLabels.length;i._valueType.toLowerCase()==ej.datavisualization.Chart.ValueType.Category&&C<0&&(S=S>0?i.visibleLabels.length+1:S);for(var T=0;T<S;T++){o=i.visibleLabels[T]?i.visibleLabels[T].Value:i.visibleLabels[T-1].Value+i.range.interval;var R=i.labels.length>0&&C<0?o+C:o;if(R=i.roundingPlaces?R:parseFloat(R.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(i.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(i.visibleRange.interval))),ej.EjSvgRender.utils._inside(R,i.visibleRange)){if(i.hidePartialLabels&&(0==T||T==S-1))continue;if(i.minorGridLines.visible||i.minorTickLines.visible){var k=(this._getSharpPath(i.minorTickLines.width),this._getSharpPath(i.minorGridLines.width));if("logarithmic"==i._valueType){M=R;var O=i.visibleRange.max,D=i.visibleRange.min,I=Math.pow(i.logBase,M-i.visibleRange.interval),j=Math.pow(i.logBase,M),L=(j-I)/(i.minorTicksPerInterval+1),A=I+L;M=ej.EjSvgRender.utils._logBase(A,i.logBase);for(var E=0;E<i.minorTicksPerInterval;E++){if(M<O&&M>D&&(n=Math.ceil((M-D)/(O-D)*i.width),i.minorGridLines&&i.minorGridLines.visible)){var P=Math.floor(n+p);l.append("M "+(P+k)+" "+(v+k)+" L "+(P+k)+" "+(Math.floor(u?this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height:this.model.m_AreaBounds.Y)+k)+" ")}A+=L,M=ej.EjSvgRender.utils._logBase(A,i.logBase)}}else for(var E=0,M=R;E<i.minorTicksPerInterval;E++)(M+=i.visibleRange.interval/(i.minorTicksPerInterval+1))<i.visibleRange.max&&M>i.visibleRange.min&&(n=Math.ceil((M-i.visibleRange.min)/(i.visibleRange.max-i.visibleRange.min)*i.width),i.minorGridLines&&i.minorGridLines.visible&&l.append("M "+(Math.floor(n+p)+k)+" "+(v+k)+" L "+(Math.floor(n+p)+k)+" "+(Math.floor(u?this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height:this.model.m_AreaBounds.Y)+k)+" "))}if(i.majorTickLines.visible||i.majorGridLines.visible){var F=(this._getSharpPath(i.majorTickLines.width),this._getSharpPath(i.majorGridLines.width)),N=this.pointX=Math.ceil(ej.EjSvgRender.utils._getPointXY(R,i.visibleRange,i.isInversed)*i.width),z=Math.floor(N+p);if(i.zoomed&&(h[0]=i.x),0==T&&z==Math.floor(this.model.m_AreaBounds.X)){h.push(z+F);continue}if(T==S-1&&"transparent"!=this.model.chartArea.border.color&&this.model.chartArea.border.width>0){if(z==Math.floor(this.model.m_AreaBounds.X+this.model.m_AreaBounds.Width))continue;i.zoomed&&(h[S]=z+F)}if(i.majorGridLines.visible&&d.append("M "+(z+F)+" "+(Math.floor(this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height)+F)+" L "+(z+F)+" "+(Math.floor(this.model.m_AreaBounds.Y)+F)+" "),"category"!=i._valueType.toLowerCase()&&T==S-1)continue;h.push(z+F)}}}if("transparent"!=i.alternateGridBand.odd.fill||"transparent"!=i.alternateGridBand.even.fill){var V,B=this.model.m_AreaBounds.Height;0===h.length&&(V={id:this.svgObject.id+"_XAxis"+t+"_Alternateeven0",x:i.x,y:Math.floor(this.model.m_AreaBounds.Y),width:i.width,height:B,fill:i.alternateGridBand.even.fill,opacity:i.alternateGridBand.even.opacity,"clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)",stroke:"transparent"},this.svgRenderer.drawRect(V,f));for(var T=1;T<h.length;T+=2){var H=h[T+1]-h[T];H=H||"onticks"==i.labelPlacement.toLowerCase()?H:i.width+i.x-h[T],T==h.length-1&&i.zoomed&&(H=this.model.m_AreaBounds.X+this.model.m_AreaBounds.Width-h[h.length-1]-i.plotOffset);var Y={id:this.svgObject.id+"_XAxis"+t+"_Alternateodd"+[T],x:h[T],y:Math.floor(this.model.m_AreaBounds.Y),width:H,height:B,fill:i.alternateGridBand.odd.fill,opacity:i.alternateGridBand.odd.opacity,stroke:"transparent","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"};H>0&&this.svgRenderer.drawRect(Y,f)}for(var T=0;T<h.length;T+=2){var H=h[T+1]-h[T];H=H||"onticks"==i.labelPlacement.toLowerCase()?H:i.width+i.x-h[T],0==T&&i.zoomed&&(H=h[1]-i.x),T==h.length-1&&i.zoomed&&(H=this.model.m_AreaBounds.X+this.model.m_AreaBounds.Width-h[h.length-1]-i.plotOffset),V={id:this.svgObject.id+"_XAxis"+t+"_Alternateeven"+[T],x:h[T],y:Math.floor(this.model.m_AreaBounds.Y),width:H,height:B,fill:i.alternateGridBand.even.fill,opacity:i.alternateGridBand.even.opacity,"clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)",stroke:"transparent"},H>0&&this.svgRenderer.drawRect(V,f)}e(f).appendTo(g)}if(i.minorGridLines.visible&&i.minorTicksPerInterval>0){r=l.toString();var U={id:this.svgObject.id+"_XAxisMinorGridLines_"+t,fill:"none","stroke-width":i.minorGridLines.width,stroke:i.minorGridLines.color,"stroke-dasharray":i.minorGridLines.dashArray,d:r};this.svgRenderer.drawPath(U,g)}if(a=d.toString(),i.majorGridLines.visible){var W={id:this.svgObject.id+"_XAxisMajorGridLines_"+t,fill:"none","stroke-width":i.majorGridLines.width,stroke:i.majorGridLines.color,opacity:i.majorGridLines.opacity,"stroke-dasharray":i.majorGridLines.dashArray,d:a};""!=W.d&&this.svgRenderer.drawPath(W,g)}e(g).appendTo(this.svgObject)},_drawYAxisTickLine:function(t,i,s,a){var r,n="",o="",l=0,d=i._isScroll&&!(null!=i.scrollbarSettings.pointsLength&&i.scrollbarSettings.pointsLength<i.maxPointLength),h=i._opposed,c=[],u=i.labelBorder;if(1!=t&&("inside"==i.labelPosition&&"inside"==i.tickLinesPosition||"inside"==i.labelPosition&&"inside"!=i.tickLinesPosition)&&i.x!=this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X&&i.x!=this.model.m_AreaBounds.X)var p=h||a?i.showNextToAxisLine?i.x:Math.floor(i.x+i._LableMaxWidth.width+this.model.elementSpacing):Math.floor(i.x-i._LableMaxWidth.width-this.model.elementSpacing),m=h||a?i.showNextToAxisLine?i.x:Math.floor(i.x+i._LableMaxWidth.width+this.model.elementSpacing):Math.floor(i.x-i._LableMaxWidth.width-this.model.elementSpacing);else if(1==t||a||"inside"==i.labelPosition||"inside"!=i.tickLinesPosition||i.x==this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X||i.x==this.model.m_AreaBounds.X)var p=m=i.showNextToAxisLine?i.showNextToAxisLine||"inside"!=i.tickLinesPosition?i.x:i.x+i.majorTickLines.size:i._x;else var p=Math.floor(i.x+i.majorTickLines.size),m=Math.floor(i.x+i.majorTickLines.size);var g=Math.floor(i.y+i.height),f=(Math.floor(i.y),ej.EjSvgRender.utils._getStringBuilder()),_=ej.EjSvgRender.utils._getStringBuilder();this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisTicklines_"+t});i.labelPlacement=i.labelPlacement?i.labelPlacement:ej.datavisualization.Chart.LabelPlacement.BetweenTicks;var v=i.labels.length>0&&"betweenticks"==i.labelPlacement.toLowerCase()?-.5:0,b=i.visibleLabels.length;i._valueType.toLowerCase()==ej.datavisualization.Chart.ValueType.Category&&v<0&&(b=b>0?i.visibleLabels.length+1:b);for(var x=0;x<b;x++){r=i.visibleLabels[x]?i.visibleLabels[x].Value:i.visibleLabels[x-1].Value+i.range.interval;var y=i.labels.length>0&&v<0?r+v:r;if(y=i.roundingPlaces?y:parseFloat(y.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(i.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(i.visibleRange.interval))),ej.EjSvgRender.utils._inside(y,i.visibleRange)){if(i.hidePartialLabels&&(0==x||x==i.visibleLabels.length-1))continue;if(i.minorGridLines.visible||i.minorTickLines.visible){var w,C=this._getSharpPath(i.minorTickLines.width);this._getSharpPath(i.minorGridLines.width);if("logarithmic"==i._valueType){L=y;var S=i.visibleRange.max,T=i.visibleRange.min,R=Math.pow(i.logBase,L-i.visibleRange.interval),k=Math.pow(i.logBase,L),O=(k-R)/(i.minorTicksPerInterval+1),D=R+O;L=ej.EjSvgRender.utils._logBase(D,i.logBase);for(var I=0;I<i.minorTicksPerInterval;I++){if(L<S&&L>T&&(w=Math.ceil((L-T)/(S-T)*i.height),i.minorTickLines&&i.minorTickLines.visible&&i.minorTickLines.visible)){if("inside"!=i.tickLinesPosition&&"inside"!=i.labelPosition||"inside"!=i.tickLinesPosition&&"inside"==i.labelPosition)j=h?i.minorTickLines.size:-i.minorTickLines.size;else var j=h?-i.minorTickLines.size:i.minorTickLines.size;f.append("M "+(Math.floor(j+p)+C)+" "+(Math.floor(-1*w+g)+C)+" L "+(p+C)+" "+(Math.floor(-1*w+g)+C)+" ")}D+=O,L=ej.EjSvgRender.utils._logBase(D,i.logBase)}}else for(var I=0,L=y;I<i.minorTicksPerInterval;I++)if((L+=i.visibleRange.interval/(i.minorTicksPerInterval+1))<i.visibleRange.max&&L>i.visibleRange.min&&(w=(L-i.visibleRange.min)/i.visibleRange.delta*i.height,i.minorTickLines.visible)){if("inside"!=i.tickLinesPosition&&"inside"!=i.labelPosition||"inside"!=i.tickLinesPosition&&"inside"==i.labelPosition)var j=h?i.minorTickLines.size:-i.minorTickLines.size;else var j=h?-i.minorTickLines.size:i.minorTickLines.size;f.append("M "+(Math.floor(j+p)+C)+" "+(Math.floor(-1*w+g)+C)+" L "+(p+C)+" "+(Math.floor(-1*w+g)+C)+" ")}}if(i.majorTickLines.visible||i.majorGridLines.visible||u.width>0){var A=this._getSharpPath(i.minorTickLines.width);this._getSharpPath(i.majorGridLines.width);if(l=c[x]=ej.EjSvgRender.utils._getPointXY(y,i.visibleRange,i.isInversed)*i.height,i.majorTickLines.visible){if("inside"!=i.tickLinesPosition&&"inside"!=i.labelPosition||"inside"!=i.tickLinesPosition&&"inside"==i.labelPosition)var E=(h?i.majorTickLines.size+i.axisLine.width/2:-(i.majorTickLines.size+i.axisLine.width/2))+(d?h?this.model.scrollerSize:h-this.model.scrollerSize:0);else if("inside"==i.tickLinesPosition&&"inside"!=i.labelPosition||"inside"==i.tickLinesPosition&&"inside"==i.labelPosition)var E=h?-(i.majorTickLines.size+i.axisLine.width/2):i.majorTickLines.size+i.axisLine.width/2;_.append("M "+(Math.floor(E+p)+A)+" "+(Math.floor(-1*l+g)+A)+" L "+(Math.floor(p+i.axisLine.width/2)+A)+" "+(Math.floor(-1*l+g)+A)+" ")}}}}if(u.width>0){var x,P,M,F,N,z=ej.EjSvgRender.utils._getStringBuilder(),E=i.axisLine.width/2,V=d?this.model.scrollerSize:0,B=i._LableMaxWidth.maxWidth+10;p=i.x,i.tickLinesPosition==i.labelPosition&&(B+=i.majorTickLines.size),F=Math.floor(p-B),F="outside"==i.labelPosition?h?Math.floor(p+B)+V:Math.floor(p-B)-V:h?Math.floor(p-B):Math.floor(p+B);for(var x=0;x<b;x++)N=(c[c.length-1]-c[c.length-2])/2,!ej.util.isNullOrUndefined(c[x])&&c.length>1&&!isNaN(N)&&("category"==i._valueType&&"betweenticks"==i.labelPlacement.toLowerCase()?(P=Math.floor(-1*c[x]+g),M=Math.floor(-1*c[x]-2*N+g)):(P=Math.floor(-1*c[x]+N+g),M=Math.floor(-1*c[x]-N+g)),P>g?z.append("M "+F+" "+g+" L "+F+" "+M+" "):M<this.model.m_AreaBounds.Y?z.append("M "+Math.floor(E+p)+" "+P+" L "+F+" "+P+" L "+F+" "+this.model.m_AreaBounds.Y+" "):(z.append("M "+Math.floor(E+p)+" "+P+" L "+F+" "+P+" L "+F+" "+M+" "),x==b-1&&z.append("M "+Math.floor(E+p)+" "+M+" L "+F+" "+M+" ")));var H={id:this.svgObject.id+"_YAxisLabelBorder_"+t,fill:"none","stroke-width":u.width,stroke:u.color,d:z.toString()};this.svgRenderer.drawPath(H,s),e(s).appendTo(this.gYaxisEle)}if(i.minorTickLines.visible&&i.visible&&i.minorTicksPerInterval>0){o=f.toString();var Y={id:this.svgObject.id+"_YAxisMinorTicks_"+t,fill:"none","stroke-width":i.minorTickLines.width,stroke:i.minorTickLines.color,d:o};this.svgRenderer.drawPath(Y,s)}if(i.majorTickLines.visible&&i.visible){n=_.toString();var U={id:this.svgObject.id+"_YAxisMajorTicks_"+t,fill:"none","stroke-width":i.majorTickLines.width,stroke:i.majorTickLines.color,d:n};this.svgRenderer.drawPath(U,s)}},_drawYAxisGridLine:function(t,i,s){var a,r="",n="",o=0,l=Math.floor(i.y+i.height),d=Math.floor(i.y),h=i._opposed,c=[],u=s.axes[i.name]._validCross,p=i.name.replace(/[^a-zA-Z0-9]/g,"");if(1!=t&&!u&&("inside"==i.labelPosition&&"inside"==i.tickLinesPosition||"inside"==i.labelPosition&&"inside"!=i.tickLinesPosition)&&i.x!=this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X&&i.x!=this.model.m_AreaBounds.X)var m=h?Math.floor(i.x+i._LableMaxWidth.width+this.model.elementSpacing):Math.floor(i.x-i._LableMaxWidth.width-this.model.elementSpacing),g=h?Math.floor(i.x+i._LableMaxWidth.width+this.model.elementSpacing):Math.floor(i.x-i._LableMaxWidth.width-this.model.elementSpacing);else if(1==t||u||"inside"==i.labelPosition||"inside"!=i.tickLinesPosition||i.x==this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X||i.x==this.model.m_AreaBounds.X)var m=Math.floor(i.x),g=Math.floor(i.x);else var m=h?Math.floor(i.x+i.majorTickLines.size):Math.floor(i.x-i.majorTickLines.size),g=h?Math.floor(i.x+i.majorTickLines.size):Math.floor(i.x-i.majorTickLines.size);var f=ej.EjSvgRender.utils._getStringBuilder(),_=ej.EjSvgRender.utils._getStringBuilder(),v=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisGrid_"+t}),b=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisAlternateGridBand_"+t});if(i.visible&&i.axisLine.visible){var x=i.axisLine.offset>0?i.axisLine.offset:0,y=this._getSharpPath(i.axisLine.width),w={id:this.svgObject.id+p+"_YAxisLine_"+t,x1:m+y,y1:d-i.plotOffset+x+y,x2:g+y,y2:l+i.plotOffset-x+y,"stroke-width":i.axisLine.width,"stroke-dasharray":i.axisLine.dashArray,stroke:i.axisLine.color,opacity:i.axisLine.opacity||1};s.axes[i.name]._lineOption=[w,this.gYaxisEle]}else s.axes[i.name]._lineOption=[null,this.gYaxisEle];if(i.axisBottomLine&&i.axisBottomLine.visible){var C={id:this.svgObject.id+p+"_YAxisBottomLine_"+t,x1:this.model.m_AreaBounds.X,y1:l,x2:this.model.m_AreaBounds.X+this.model.m_AreaBounds.Width,y2:l,"stroke-width":i.axisBottomLine.width,stroke:i.axisBottomLine.color};this.svgRenderer.drawLine(C,v)}i.labelPlacement=i.labelPlacement?i.labelPlacement:ej.datavisualization.Chart.LabelPlacement.BetweenTicks;for(var S=i.labels.length>0&&"betweenticks"==i.labelPlacement.toLowerCase()?-.5:0,T=i.visibleLabels.length,R=0;R<T;R++){a=i.visibleLabels[R].Value;var k=i.labels.length>0&&S<0?a+S:a;if(k=i.roundingPlaces?k:parseFloat(k.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(i.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(i.visibleRange.interval))),ej.EjSvgRender.utils._inside(k,i.visibleRange)){if(i.hidePartialLabels&&(0==R||R==i.visibleLabels.length-1))continue;if(i.minorGridLines.visible||i.minorTickLines.visible){var O,D=(this._getSharpPath(i.minorTickLines.width),this._getSharpPath(i.minorGridLines.width));if("logarithmic"==i._valueType){F=k;var I=i.visibleRange.max,j=i.visibleRange.min,L=Math.pow(i.logBase,F-i.visibleRange.interval),A=Math.pow(i.logBase,F),E=(A-L)/(i.minorTicksPerInterval+1),P=L+E;F=ej.EjSvgRender.utils._logBase(P,i.logBase);for(var M=0;M<i.minorTicksPerInterval;M++)F<I&&F>j&&(O=Math.ceil((F-j)/(I-j)*i.height),i.minorGridLines.visible&&f.append("M "+(Math.floor(this.model.m_AreaBounds.X)+D)+" "+(Math.floor(-1*O+l)+D)+" L "+(Math.floor(this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X)+D)+" "+(Math.floor(-1*O+l)+D)+" ")),P+=E,F=ej.EjSvgRender.utils._logBase(P,i.logBase)}else for(var M=0,F=k;M<i.minorTicksPerInterval;M++)(F+=i.visibleRange.interval/(i.minorTicksPerInterval+1))<i.visibleRange.max&&F>i.visibleRange.min&&(O=(F-i.visibleRange.min)/i.visibleRange.delta*i.height,i.minorGridLines.visible&&f.append("M "+(Math.floor(this.model.m_AreaBounds.X)+D)+" "+(Math.floor(-1*O+l)+D)+" L "+(Math.floor(this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X)+D)+" "+(Math.floor(-1*O+l)+D)+" "))}if(i.majorTickLines.visible||i.majorGridLines.visible){var N=(this._getSharpPath(i.minorTickLines.width),this._getSharpPath(i.majorGridLines.width));if(i.majorGridLines.visible){o=ej.EjSvgRender.utils._getPointXY(k,i.visibleRange,i.isInversed)*i.height;var z=Math.floor(this.model.m_AreaBounds.X)+N,V=Math.floor(-1*o+l),B=Math.floor(this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X)+N;if(0==R){if(V==Math.floor(this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height))continue;i.zoomed&&(c[0]=V+N)}if(R==i.visibleLabels.length-1&&"transparent"!=this.model.chartArea.border.color&&this.model.chartArea.border.width>0&&V==Math.floor(this.model.m_AreaBounds.Y)){c.push(V+N);continue}if(_.append("M "+z+" "+(V+N)+" L "+B+" "+(V+N)+" "),0==R)continue;c.push(V+N)}}}}if("transparent"!=i.alternateGridBand.odd.fill||"transparent"!=i.alternateGridBand.even.fill){var H=this.model.m_AreaBounds.Width;i.zoomed&&(c[c.length]=i.y);for(var R=1;R<c.length;R+=2){var Y=c[0]-c[1];if(R==c.length-1&&i.zoomed){var U=c[c.length-2]-i.y;Y=U}var W={id:this.svgObject.id+"_YAxisAlternateodd"+[R],x:Math.floor(this.model.m_AreaBounds.X),y:c[R],width:H,height:Y,fill:i.alternateGridBand.odd.fill,opacity:i.alternateGridBand.odd.opacity,stroke:"transparent","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"};this.svgRenderer.drawRect(W,b)}for(var R=0;R<c.length;R+=2){var Y=c[0]-c[1];if(R==c.length-1&&i.zoomed){var U=c[c.length-2]-i.y;Y=U}if(0==R&&i.zoomed){var U=i.y+i.height-c[0]-i.plotOffset;Y=U}var X={id:this.svgObject.id+"_YAxisAlternateeven"+[R],x:Math.floor(this.model.m_AreaBounds.X),y:c[R],width:H,height:Y,fill:i.alternateGridBand.even.fill,opacity:i.alternateGridBand.even.opacity,stroke:"transparent","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"};this.svgRenderer.drawRect(X,b)}e(b).appendTo(v)}if(i.minorGridLines.visible&&i.minorTicksPerInterval>0){n=f.toString();var G={id:this.svgObject.id+"_YAxisMinorGridLines_"+t,fill:"none","stroke-width":i.minorGridLines.width,stroke:i.minorGridLines.color,"stroke-dasharray":i.minorGridLines.dashArray,d:n};this.svgRenderer.drawPath(G,v)}if(r=_.toString(),i.majorGridLines.visible){var $={id:this.svgObject.id+"_YAxisMajorGridLines_"+t,fill:"none","stroke-width":i.majorGridLines.width,opacity:i.majorGridLines.opacity,"stroke-dasharray":i.majorGridLines.dashArray,stroke:i.majorGridLines.color,d:r};""!=$.d&&this.svgRenderer.drawPath($,v)}e(v).appendTo(this.svgObject)},textOverflowMultiLevelLabels:function(e,t,i,s,a,r,n,o,l,d){var h,c,u,p,m,g=o.y,f=0;if("wrap"==a||"wrapandtrim"==a){c=d._wrap(e,t,i,a,r,n),u=c.text,p=u.length;for(var _=0;_<p;_++)o.y+=n.height,d.model.enable3D||(o.id+="_"+_,d.svgRenderer.drawText(o,u[_],l)),"wrapandtrim"==a&&u[_].indexOf("...")>-1&&(d.model.enable3D&&0==f&&(o.y-=n.height),m=c.unTrimmedText,
n=ej.EjSvgRender.utils._measureText(u[_],null,r),h={X:o.x-n.width/2,Y:o.y,Width:n.width,Height:n.height},d.model.axisMultiLevelLabelRegions.push({trimText:u[_],labelText:m[f],Bounds:h}),f++);return u}return i="trim"==a?ej.EjSvgRender.utils._trimText(s,t,r):s,d.model.enable3D||(g=o.y+n.height),"vertical"==e.orientation.toLowerCase()&&(g=o.y-n.height/4),n=ej.EjSvgRender.utils._measureText(i,null,r),h={X:o.x-n.width/2,Y:g,Width:n.width,Height:n.height},d.model.axisMultiLevelLabelRegions.push({trimText:i,labelText:s,Bounds:h}),i},_triggerMultiLevelLabelsRendering:function(t,i,s,a,r,n,o){var l=e.extend({},ej.EjSvgRender.commonChartEventArgs);return l.data={text:t,location:{x:i,y:s},textOverflow:a,font:r,border:n},o._trigger("multiLevelLabelRendering",l),l.data},_drawXAxisMultiLevelLabels:function(t,i){var s,a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,j=this.svgObject.id,L=i.visibleRange,A=this.svgRenderer.createGroup({id:j+"_XAxisMultiLevelLabels_"+t,"clip-path":"url(#"+this.svgObject.id+"_XAxis_Clippath_"+t+")"}),E=this.model.m_AreaBounds,P=i.opposedPosition,M=i.labelPosition.toLowerCase(),F=i.labelBorder,N=i._isScroll?this.model.scrollerSize:0;p=i.majorTickLines.size+i._LableMaxWidth.height+F.width,v=i.x,b=i.y+p+N,x=i.width+this.model.chartArea.border.width,y=i._multiLevelLabelHeight+10-2,P?b="outside"==M?i.y-p-i._multiLevelLabelHeight-5-N:i.y+p-5:"inside"==M&&(b=i.y-p-i._multiLevelLabelHeight);var z={id:this.svgObject.id+"_XAxis_Clippath_"+t,x:v,y:b,width:x,height:y,fill:"white","stroke-width":1,stroke:"Gray"};for(this.svgRenderer.drawClipPath(z,A),s=0;s<i.multiLevelLabels.length;s++)if(h=i.multiLevelLabels[s],"string"==typeof h.start&&-1!=h.start.indexOf("/Date(")&&(h.start=parseInt(h.start.substr(6))),"string"==typeof h.end&&-1!=h.end.indexOf("/Date(")&&(h.end=parseInt(h.end.substr(6))),h.visible&&(h.start>=L.min&&h.start<=L.max||h.end>=L.min&&h.end<=L.max||h.start<L.min&&h.end>L.max)){c=h.font,k=h.border,I=k.width,f=h._level,_=h.textOverflow.toLowerCase(),O=k.type.toLowerCase(),D=h.textAlignment.toLowerCase(),u=Math.ceil(ej.EjSvgRender.utils._getPointXY(h.start,L,i.isInversed)*i.width),m=Math.ceil(ej.EjSvgRender.utils._getPointXY(h.end,L,i.isInversed)*i.width),i.isInversed&&(u-=m,m=u+m,u=m-u),o=h.text,d=ej.EjSvgRender.utils._measureText(o,null,c),n=ej.util.isNullOrUndefined(h.maximumTextWidth)?m-u-I-10:h.maximumTextWidth-10,1,0,a=u+i.x+5,r=p+i.y,r=P?"outside"==M?i.y-p-i.multiLevelLabelHeight[f]-10-i.prevHeight[f]-N:i.y+p-5+i.prevHeight[f]:"inside"==M?i.y-p-i.multiLevelLabelHeight[f]-i.prevHeight[f]:p+i.y+i.prevHeight[f]+N,this.model.enableCanvasRendering&&(this.svgRenderer.ctx.save(),this.svgRenderer.ctx.beginPath(),this.svgRenderer.ctx.rect(v,b,x,y),this.svgRenderer.ctx.clip()),"center"==D?(a+=n/2,w="middle"):"far"==D?(a=a+n-I/2,w="end"):(w="start",a+=I/2);var V=this._triggerMultiLevelLabelsRendering(o,a,r,_,c,h.border,this),o=V.text;a=V.location.x,r=V.location.y,_=V.textOverflow.toLowerCase(),c=V.font,k=V.border,O=V.border.type.toLowerCase(),I=V.border.width,g={id:j+"_XAxisMultiLevelLabels_Text_"+t+"_"+s,x:a,y:"curlybrace"==O?r+10:r,fill:c.color?c.color:i.multiLevelLabelsFontColor,"font-size":c.size,"font-family":c.fontFamily,"font-style":c.fontStyle,"font-weight":c.fontWeight,opacity:c.opacity,"text-anchor":w},l=o,"none"!=_&&(l=this.textOverflowMultiLevelLabels(i,n,l,o,_,c,d,g,A,this)),"wrap"!=_&&"wrapandtrim"!=_&&(g.y+=d.height,d.height<i.multiLevelLabelHeight[f]&&(g.y=g.y+i.multiLevelLabelHeight[f]/2-d.height/2),this.svgRenderer.drawText(g,l,A)),r=P?"inside"==M?p+i.y+i.prevHeight[f]-5:i.y-p-i.multiLevelLabelHeight[f]-10+2-i.prevHeight[f]-N:"inside"==M?i.y-p-i.multiLevelLabelHeight[f]-3-i.prevHeight[f]:p+i.y+i.prevHeight[f]+N,a=u+i.x,r+=I,C=i.multiLevelLabelHeight[f]+5,S=n+10+I;var B={bounds:{x:a,y:r,height:C,width:S},axisIndex:t,multiLevelLabel:h};this.model.multiLevelLabelRegions.push(B);var H="";d.width;if("rectangle"==O)R={id:j+"_XAxisMultiLevelLabels_Rect_"+t+"_"+s,x:a,y:r,width:S,height:C,fill:"transparent",stroke:k.color?k.color:i.multiLevelLabelsColor,"stroke-width":I},this.svgRenderer.drawRect(R,A);else{switch(O){case"withouttopandbottomborder":H="M "+a+" "+r+" L "+a+" "+(r+C)+" M "+(a+S)+" "+r+" L "+(a+S)+" "+(r+C);break;case"withouttopborder":T=!P&&"outside"==M||P&&"inside"==M?C:0,H="M "+a+" "+(r+T)+" L "+(a+S)+" "+(r+T)+" M "+a+" "+r+" L "+a+" "+(r+C)+" M "+(a+S)+" "+r+" L "+(a+S)+" "+(r+C);break;case"brace":if("near"==D){var Y=g.x;U=g.x+d.width+2}else if("center"==D)var Y=g.x-d.width/2-2<=E.X+u?E.X+u+10:g.x-d.width/2-2,U=g.x+d.width/2+2>E.X+m?E.X+m-10:g.x+d.width/2+2;else{var Y=g.x-d.width-2;U=g.x}H=!P&&"outside"==M||P&&"inside"==M?"M "+a+" "+r+" L "+a+" "+(r+C/2)+" M "+a+" "+(r+C/2)+" L "+(Y-2)+" "+(r+C/2)+" M "+U+" "+(r+C/2)+" L "+(a+S)+" "+(r+C/2)+" M "+(a+S)+" "+(r+C/2)+" L "+(a+S)+" "+r:"M "+a+" "+(r+C)+" L "+a+" "+(r+C/2)+" M "+a+" "+(r+C/2)+" L "+Y+" "+(r+C/2)+" M "+U+" "+(r+C/2)+" L "+(a+S)+" "+(r+C/2)+" M "+(a+S)+" "+(r+C)+" L "+(a+S)+" "+(r+C/2);break;case"curlybrace":r=i.y+p+i.prevHeight[f],H=S<30?"M "+(a+S/2-5)+" "+(r+10)+" L "+(a+S/2)+" "+(r+15)+" L "+(a+S/2+5)+" "+(r+10):P?"M "+a+" "+r+" C "+a+" "+r+" "+(a+5)+" "+(r+10)+" "+(a+10)+" "+(r+10)+" L "+(a+S/2-5)+" "+(r+10)+" L "+(a+S/2)+" "+(r+15)+" L "+(a+S/2+5)+" "+(r+10)+" L "+(a+S-10)+" "+(r+10)+" C "+(a+S-10)+" "+(r+10)+" "+(a+S)+" "+(r+5)+" "+(a+S)+" "+r:"center"==D?"M "+a+" "+r+" C "+a+" "+r+" "+(a+5)+" "+(r+10)+" "+(a+10)+" "+(r+10)+" L "+(a+S/2-5)+" "+(r+10)+" L "+(a+S/2)+" "+(r+15)+" L "+(a+S/2+5)+" "+(r+10)+" L "+(a+S-10)+" "+(r+10)+" C "+(a+S-10)+" "+(r+10)+" "+(a+S)+" "+(r+5)+" "+(a+S)+" "+r:"near"==D?"M "+a+" "+r+" C "+a+" "+r+" "+(a+5)+" "+(r+10)+" "+(a+10)+" "+(r+10)+" L "+(a+15)+" "+(r+15)+" L "+(a+15+5)+" "+(r+10)+" L "+(a+S-10)+" "+(r+10)+" C "+(a+S-10)+" "+(r+10)+" "+(a+S)+" "+(r+5)+" "+(a+S)+" "+r:"M "+a+" "+r+" C "+a+" "+r+" "+(a+5)+" "+(r+10)+" "+(a+10)+" "+(r+10)+" L "+(a+S-20)+" "+(r+10)+" L "+(a+S-15)+" "+(r+15)+" L "+(a+S-10)+" "+(r+10)+" L "+(a+S-10)+" "+(r+10)+" C "+(a+S-10)+" "+(r+10)+" "+(a+S)+" "+(r+5)+" "+(a+S)+" "+r}H&&(R={id:j+"_XAxisMultiLevelLabels_Rect_"+t+"_"+s,d:H,stroke:k.color?k.color:i.multiLevelLabelsColor,"stroke-width":k.width,fill:"none"},this.svgRenderer.drawPath(R,A))}this.model.enableCanvasRendering&&this.svgRenderer.ctx.restore(),e(A).appendTo(this.gXaxisEle)}},_drawYAxisMultiLevelLabels:function(t,i){var s,a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,j,L,A,E,P,M,F=this.svgObject.id,N=i.visibleRange,z=this.svgRenderer.createGroup({id:F+"_YAxisMultiLevelLabels_"+t,"clip-path":"url(#"+this.svgObject.id+"_YAxis_Clippath_"+t+")"}),V=(this.model.m_AreaBounds,i.opposedPosition),B=i.labelPosition.toLowerCase(),H=i.labelBorder,Y=i._multiLevelLabelHeight,h=i.majorTickLines.size+i._LableMaxWidth.width+H.width+10,U=i._isScroll?this.model.scrollerSize:0;I=i.y,j=Y+5,L=i.height+5,D=V?"outside"==B?i.x+h-5+U:i.x-Y-h+5:"outside"==B?i.x-Y-h-U:i.x+h-5;var W={id:this.svgObject.id+"_YAxis_Clippath_"+t,x:D,y:i.y,width:j,height:L,fill:"white","stroke-width":1,stroke:"Gray"};for(this.svgRenderer.drawClipPath(W,z),s=0;s<i.multiLevelLabels.length;s++)if(l=e.extend(!0,{},this.model.multiLevelLabelsDefault,i.multiLevelLabels[s]),l.visible&&(l.start>=N.min&&l.start<=N.max||l.end>=N.min&&l.end<=N.max||l.start<N.min&&l.end>N.max)){d=l.font,R=l.border,g=l._level,f=l.maximumTextWidth,m=l.textOverflow.toLowerCase(),k=R.type.toLowerCase(),O=l.textAlignment.toLowerCase(),c=Math.ceil(ej.EjSvgRender.utils._getPointXY(l.start,N,i.isInversed)*i.height),u=Math.ceil(ej.EjSvgRender.utils._getPointXY(l.end,N,i.isInversed)*i.height),i.isInversed&&(c-=u,u=c+u,c=u-c),_=l.text,o=ej.EjSvgRender.utils._measureText(_,null,d),n=u-c-R.width,v=ej.util.isNullOrUndefined(f)?i.multiLevelLabelHeight[g]+5:f-5,1,0,A=0,a=i.x-h-i.prevHeight[g]-i.multiLevelLabelHeight[g]/2+R.width-2.5,r=i.height+i.y-c-n/2,a=V?"outside"==B?i.x+h+i.multiLevelLabelHeight[g]/2+i.prevHeight[g]+R.width+U:i.x-h-i.multiLevelLabelHeight[g]/2-i.prevHeight[g]+R.width+2.5:"inside"==B?i.x+h+i.multiLevelLabelHeight[g]/2+i.prevHeight[g]-2.5:a+A-U,this.model.enableCanvasRendering&&(this.svgRenderer.ctx.save(),this.svgRenderer.ctx.beginPath(),this.svgRenderer.ctx.rect(D,I,j,L),this.svgRenderer.ctx.clip()),"far"==O?r=r+n/2-o.height/2:"near"==O?r=r-n/2+o.height:r+=o.height/4,E=this._triggerMultiLevelLabelsRendering(_,a,r,m,d,l.border,this);var _=E.text;a=E.location.x,r=E.location.y,m=E.textOverflow,d=E.font,R=E.border,k=R.type.toLowerCase(),R.width,p={id:F+"_YAxisMultiLevelLabels_Text_"+t+"_"+s,x:"curlybrace"==k?V?a+A+10:a+A-10:a+A,y:r,fill:d.color?d.color:i.multiLevelLabelsFontColor,"font-size":d.size,"font-family":d.fontFamily,"font-style":d.fontStyle,"font-weight":d.fontWeight,opacity:d.opacity,"text-anchor":"middle"},b=_,"none"!=m&&(b=this.textOverflowMultiLevelLabels(i,v,b,_,m,d,o,p,z,this)),"wrap"!=m&&"wrapandtrim"!=m&&this.svgRenderer.drawText(p,b,z),a=a-2.5-i.multiLevelLabelHeight[g]/2,r=i.y+i.height-u+R.width,x=u-c,y=i.multiLevelLabelHeight[g]+5,P="",(y+R.width-Y)/2-2;var X={bounds:{x:a,y:r,height:x,width:y},axisIndex:t,multiLevelLabel:l};if(this.model.multiLevelLabelRegions.push(X),"rectangle"==k)T={id:F+"_YAxisMultiLevelLabels_Rect_"+t+"_"+s,x:a,y:r,width:y,height:x,fill:"transparent",stroke:R.color?R.color:i.multiLevelLabelsColor,"stroke-width":R.width},this.svgRenderer.drawRect(T,z);else{switch(k){case"withouttopandbottomborder":P="M "+a+" "+(r+x)+" L "+(a+y)+" "+(r+x)+" M "+a+" "+r+" L "+(a+y)+" "+r;break;case"withouttopborder":S=!V&&"outside"==B||V&&"inside"==B?0:y,P="M "+a+" "+(r+x)+" L "+(a+y)+" "+(r+x)+" M "+a+" "+r+" L "+(a+y)+" "+r+" M "+(a+S)+" "+(r+x)+" L "+(a+S)+" "+r;break;case"brace":w=p.y-o.height/2-4,C=p.y+o.height/4+2,P=!V&&"outside"==B||V&&"inside"==B?"M "+(a+y)+" "+r+" L "+(a+y/2)+" "+r+" M "+(a+y/2)+" "+r+" L "+(a+y/2)+" "+w+" M "+(a+y/2)+" "+C+" L "+(a+y/2)+" "+(r+x)+" M "+(a+y/2)+" "+(r+x)+" L "+(a+y)+" "+(r+x):"M "+a+" "+r+" L "+(a+y/2)+" "+r+" M "+(a+y/2)+" "+r+" L "+(a+y/2)+" "+w+" M "+(a+y/2)+" "+C+" L "+(a+y/2)+" "+(r+x)+" M "+(a+y/2)+" "+(r+x)+" L "+a+" "+(r+x);break;case"curlybrace":a=i.x-h-i.prevHeight[g],M=x-10,x<30?V?(a=i.x+h+i.prevHeight[g],M=x-10,P=" M "+(a+10)+" "+(r+M/2)+"  L "+(a+15)+" "+(r+M/2+5)+" L "+(a+10)+" "+(r+M/2+10)):P="M "+(a-10)+" "+(r+x/2-5)+" L "+(a-15)+" "+(r+x/2)+" L "+(a-10)+" "+(r+x/2+5):V?(a=i.x+h+i.prevHeight[g],M=x-10,P="M "+a+" "+r+" C "+a+" "+r+" "+(a+10)+" "+r+" "+(a+10)+" "+(r+10)+" L "+(a+10)+" "+(r+M/2)+"  L "+(a+15)+" "+(r+M/2+5)+" L "+(a+10)+" "+(r+M/2+10)+" L "+(a+10)+" "+(r+M)+" C"+(a+10)+" "+(r+M)+" "+(a+5)+" "+(r+M+10)+" "+a+" "+(r+M+10)):P="center"==O?"M "+a+" "+r+" C "+a+" "+r+" "+(a-10)+" "+r+" "+(a-10)+" "+(r+10)+" L "+(a-10)+" "+(r+M/2)+" L "+(a-15)+" "+(r+M/2+5)+" L "+(a-10)+" "+(r+M/2+10)+" L "+(a-10)+" "+(r+M)+" C "+(a-10)+" "+(r+M)+" "+(a-5)+" "+(r+M+10)+" "+a+" "+(r+M+10):"far"==O?"M "+a+" "+r+" C "+a+" "+r+" "+(a-10)+" "+r+" "+(a-10)+" "+(r+10)+" L "+(a-10)+" "+(r+M-10)+"  L "+(a-15)+" "+(r+M-10+5)+" L "+(a-10)+" "+(r+M)+" L "+(a-10)+" "+(r+M)+" C"+(a-10)+" "+(r+M)+" "+(a-10)+" "+(r+M+10)+" "+a+" "+(r+M+10):"M "+a+" "+r+" C "+a+" "+r+" "+(a-10)+" "+r+" "+(a-10)+" "+(r+10)+" L "+(a-15)+" "+(r+10+5)+" L "+(a-10)+" "+(r+10+10)+" L "+(a-10)+" "+(r+M)+" C"+(a-10)+" "+(r+M)+" "+(a-5)+" "+(r+M+10)+" "+a+" "+(r+M+10)}P&&(T={id:F+"_YAxisMultiLevelLabels_Rect_"+t+"_"+s,d:P,stroke:R.color?R.color:i.multiLevelLabelsColor,"stroke-width":R.width,fill:"none"},this.svgRenderer.drawPath(T,z))}this.model.enableCanvasRendering&&this.svgRenderer.ctx.restore(),e(z).appendTo(this.gYaxisEle)}},_getLabelCollection:function(e,t,i,s,a){var r,n,o=[],l=[];"string"==typeof e&&-1!=e.indexOf("<br>")?o=e.split("<br>"):o.push(e),s=s<=0?i.width/i.labels.length:s,r=o.length;for(var d=0;d<r;d++){n=this.rowscalculation(o[d].toString(),t,i,s,a);for(var h=0;h<n.length;h++)l.push(n[h])}return l},_drawXAxisLabels:function(t,i){var s,a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,j,L,A,E,P,M,F,N,z,V=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisLabels_"+t,cursor:"default"}),B=(this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisLabels_"+t,cursor:"default"}),this.model.m_AreaBounds),H=this.model.enableCanvasRendering,Y=i.name.replace(/[^a-zA-Z0-9]/g,""),U=i._opposed,W=i._valueType,X=i.alignment.toLowerCase(),G=i.labelIntersectAction,$=i.labelPlacement.toLowerCase(),q=!1,L=0,Q="inside"==i.tickLinesPosition,K=i._LableMaxWidth,Z=K.height,J=0==K.rows?1:K.rows,ee=this.svgRenderer.vmlNamespace,te=i.axisLine.width,ie=i.font,se=i.rotationValue,ae=B.Width,re=B.X,ne=i.labelIntersectAction.toLowerCase(),oe=e(this.svgObject).width(),le=i.maximumLabelWidth,de=i.visibleRange,he=ae,ce=i.majorTickLines.size,ue=i.visibleLabels,W=i.valueType&&i.valueType.toLowerCase(),pe=i.width,me=i.isInversed,ge=i.majorTickLines.width,fe=!1,_e=this.model.scrollerSize,ve=i.rotateOn.toLowerCase(),be="inside"==i.labelPosition,xe=0,ye=[],we=[],Ce=[];z=i._isScroll&&!(null!=i.scrollbarSettings.pointsLength&&i.scrollbarSettings.pointsLength<i.maxPointLength),this.edgeLabel=!1,0!=t&&(be&&Q||be&&!Q)&&i.y!=B.Height+B.Y&&i.y!=B.Y?i.y=U?Math.floor(i.y-Z):Math.floor(i.y+Z):0!=t&&be&&Q&&i.y!=B.Height+B.Y&&i.y!=B.Y?i.y=U?Math.floor(i.y-ce):Math.floor(i.y+ce):(i._y=Math.floor(i.y),i.y=i.showNextToAxisLine?Math.floor(i.y):U?Math.floor(B.Y):Math.floor(B.Height+B.Y));for(var Se=0;Se<ue.length;Se++)if(T=ue[Se],R=T.displayText=ej.util.isNullOrUndefined(T.displayText)?T.Text:T.displayText,ej.EjSvgRender.utils._inside(T.Value,de)){p=pe/ue.length,ej.isNullOrUndefined(W)||Se<ue.length-1&&"datetimecategory"==W&&"wrap"==ne&&"betweenticks"==$&&(_=ue[Se+1],T.Value-=.5,v=_.Value-.5);var Te=Math.abs(Math.floor(ej.EjSvgRender.utils._getPointXY(T.Value,de,me)*pe));if(ej.isNullOrUndefined(W)||(Se<ue.length-1&&"datetimecategory"==W&&"wrap"==ne&&"betweenticks"==$?(f=Math.abs(Math.floor(ej.EjSvgRender.utils._getPointXY(v,de,me)*pe)),m=0==Se?i.x+Te+(ge-.5):i.x+Te+(ge+.5),g=i.x+f+(ge+.5),p=g-m):"datetimecategory"==W&&"wrap"==ne&&"betweenticks"==$?(p=pe+i.x-g,m=g):"datetimecategory"==W&&"wrap"==ne&&"onticks"==$&&(p=pe/i.labels.length)),i._gap=m,this.edgeLabel=!1,N="string"==typeof R&&-1!=R.indexOf("<br>")?ej.EjSvgRender.utils._getHighestLabel(i,oe,R):R,o=ej.EjSvgRender.utils._measureText(N,he,i.font),d=o.width,h=o.height,L=0,q=!1,"trim"==ne||i.enableTrim){if("onticks"==$)if(Se!=ue.length-1){var Re=T,ke=ue[Se+1];Ce=[],we=[],_=ue[Se+1],"string"==typeof _.Text&&-1!=_.Text.indexOf("<br>")||"string"==typeof T.Text&&-1!=T.Text.indexOf("<br>")?(Ce=T.Text.split("<br>"),we=_.Text.split("<br>")):(we.push(_.Text),T.displayText?Ce.push(T.displayText):Ce.push(T.Text));for(var Oe=0;Oe<we.length;Oe++){b=Math.abs(Math.floor(ej.EjSvgRender.utils._getPointXY(_.Value,de,me)*pe)),x=ej.EjSvgRender.utils._measureText(we[Oe],ae,ie).width,y=b-x/2,L=0,w=!0;for(var De=0;De<Ce.length&&w;De++)for(var d=ej.EjSvgRender.utils._measureText(Ce[De],he,i.font).width;y<Te+d/2&&L<2;){L++,x>d?(C=we[Oe],fe=!1):(C=Ce[De],fe=!0),l=C;var Ie={};Ie.displayText=C;for(var je=1;je<l.length;je++)if(l=Ie.displayText.substring(0,je)+"... ",S=ej.EjSvgRender.utils._measureText(l,ae,ie).width,fe){if((y=b-x/2)<Te+S/2){je-1!=0&&(l=l.toString().substring(0,je-1)+"... "),d=S,R=Ie.displayText=Re.displayText=l,Ce[De]=l;break}}else if((y=b-S/2)<Te+d/2){je-1!=0&&(l=l.toString().substring(0,je-1)+"... "),x=S,Ie.displayText=ke.displayText=l,we[Oe]=l,w=!1;break}}}}else Se==ue.length-1&&(Ce=we);else if("betweenticks"==$){var Le=i.enableTrim?le:p,Ce=[];"string"==typeof R&&-1!=R.indexOf("<br>")?Ce=R.split("<br>"):Ce.push(R);for(var Ae=Ce.length,Oe=0;Oe<Ae;Oe++)if(T.displayText=Ce[Oe],o=ej.EjSvgRender.utils._measureText(Ce[Oe],he,i.font),(d=o.width)>Le&&""!=Ce[Oe]){for(var je=1;je<Ce[Oe].toString().length;je++)if(Ce[Oe]=T.displayText.toString().substring(0,je)+"... ",(d=ej.EjSvgRender.utils._measureText(Ce[Oe],ae,ie).width)>=Le){if(Ce[Oe]=Ce[Oe].toString().substring(0,je-1)+"... ",T.displayText=Ce[Oe],Se==ue.length-1&&Te+i.x+d/2>oe&&Le==p){Le-=d/2,je=1;continue}break}T.displayText=Ce[Oe]}}"double"==i._valueType&&"string"!=typeof T.displayText||(N=Ce.length>0?ej.EjSvgRender.utils._getHighestLabel(i,oe,Ce,null):N,o=ej.EjSvgRender.utils._measureText(N,ae,ie))}else o="string"==typeof R&&-1!=R.indexOf("<br>")?ej.EjSvgRender.utils._measureText(N,ae,ie):ej.EjSvgRender.utils._measureText(T.displayText,ae,ie);if(c=o.width/2,h=o.height,d=o.width,u=i.majorGridLines.width>ge?i.majorGridLines.width:ge,!ej.util.isNullOrUndefined(T.Text)){r="near"==X?Te+i.x+u+("category"==W&&"onticks"!=$?-pe/i.actualRange.delta/2+3:-o.width-3):"far"==X?Te+i.x+("category"==W&&"onticks"!=$?+pe/i.actualRange.delta/2-o.width:+u+3):Te+i.x-c,be&&Q||be&&!Q&&"multiplerows"==ne?n=U?i.y+ce+h/2+te/2+Z/(2*J)-5:i.y-ce-te/2-Z/(2*J)+5:be&&!Q?n=U?i.y+h/2+te/2+Z/(2*J)-5:i.y-te/2-Z/(2*J)+5:!be&&!Q||!be&&Q&&"multiplerows"==ne?(n=U?i.y-ce+h/2-te/2-Z/(2*J)-5:i.y+ce+te/2+Z/(2*J)+5,n+=z?U?-_e:_e:0):!be&&Q&&(n=U?i.y+h/2-te/2-Z/(2*J)-5:i.y+te/2+Z/(2*J)+5,n+=z?U?-_e:_e:0),be&&!Q?90!=se&&"rotate90"!=ne||(n=U?n:n-ce):!be&&Q?90!=i.labelRotation&&"rotate90"!=ne||(n-=ce):be&&Q&&(90!=i.labelRotation&&"rotate90"!=ne||(n=U?n:n-ce));var Ee={id:this.svgObject.id+"_"+Y+"_XLabel_"+Se,x:r,y:n,fill:ie.color,"font-size":ie.size,"font-family":ie.fontFamily,"font-style":ie.fontStyle,"font-weight":ie.fontWeight,opacity:ie.opacity};if(i.edgeLabelPlacement)switch(O=i.edgeLabelPlacement.toLowerCase(),D=ue.length-1,O){case"none":break;case"shift":0==Se?Ee.x<i.x&&(I=i.x-Ee.x,Ee.x=r=Ee.x+I,this.diff=I,this.edgeLabel=!0):Se==D&&Ee.x+o.width>i.x+i.width&&(I=Ee.x+o.width-(i.x+i.width),Ee.x=r=Ee.x-I,this.diff=I,this.edgeLabel=!0);break;case"hide":(0==Se&&Ee.x<i.x||Se==D&&Ee.x+d>ae+re)&&(R="")}if("wrap"==ne||"wrapbyword"==ne){var Pe=this._getLabelCollection(R,he,i,p,Ee),Me=ej.EjSvgRender.utils._getHighestLabel(i,e(this.svgObject).width(),Pe,null);d=ej.EjSvgRender.utils._measureText(Me,ae,ie).width}if(0==se||ee||(T.displayText="string"==typeof T.displayText&&-1!=T.displayText.indexOf("<br>")?ej.EjSvgRender.utils._getHighestLabel(i,oe,T.displayText):T.displayText,this.labelRotation(i,r+c,n,Ee,T,se)),i.labelIntersectAction||i.enableTrim){if(this.diff=ej.util.isNullOrUndefined(this.diff)?0:this.diff,"none"==ne&&!i.enableTrim){if("string"==typeof R&&-1!=R.indexOf("<br>")){var Fe=R.split("<br>");Ee.y=be?U?Ee.y:Ee.y-h*(Fe.length-1):U?Ee.y-h*(Fe.length-1):Ee.y,0!=se&&(Ee.x=Ee.x+d/2,Ee["text-anchor"]=ve),this.svgRenderer.drawText(Ee,Fe,H?N:V)}else"start"!=ve&&"end"!=ve||0==se||-360==se||360==se||(Ee.x=Ee.x+d/2,Ee["text-anchor"]=ve),this.svgRenderer.drawText(Ee,R,H?N:V);ue[Se].region=this.calculateRegion(R,ie,Ee,T),this.model.xAxisLabelRegions.push(ue[Se].region),be?e(V).appendTo(this.gXaxisTickEle):e(V).appendTo(this.gXaxisEle);continue}if(!("wrap"!=ne&&"wrapbyword"!=ne||i.enableTrim)){0;var Fe=[],Pe=[];"string"==typeof R&&-1!=R.indexOf("<br>")?Fe=R.split("<br>"):Fe.push(R),A="",p=p<=0?pe/ue.length:p;for(var Ne=0;Ne<Fe.length;Ne++){j=this.rowscalculation(Fe[Ne].toString(),he,i,p,Ee);for(var je=0;je<j.length;je++)Pe.push(j[je]),A+=j[je]}Ee.x=Ee.x+c,-1==A.indexOf("...")&&(A=R);var N=ej.EjSvgRender.utils._getHighestLabel(i,oe,Pe,null),o=ej.EjSvgRender.utils._measureText(N,ae,ie),d=o.width;Ee.x=Ee.x-d/2,Ee.y=be?U?Ee.y:Ee.y-h*(Pe.length-1):U?Ee.y-h*(Pe.length-1):Ee.y,0!=se&&-360!=se&&360!=se&&(Ee["text-anchor"]=ve,Ee.x=Ee.x+d/2),this.svgRenderer.drawText(Ee,Pe,H?N:V),a=ej.EjSvgRender.utils._measureText(Pe[0],null,ie);var ze=Pe.length;k=a.height*Pe.length,s={x:Ee.x,y:Ee.y,width:d,height:k-k/ze},ue[Se].region={bounds:s,labelText:T.Text,displayText:A},ue[Se].displayText=A,this.model.xAxisLabelRegions.push(ue[Se].region);continue}if("hide"==ne)for(var Ve=ue.length-1,Be=0;Be<Se;Be++){E=ue[Be],P=0,M=Math.abs(Math.floor(ej.EjSvgRender.utils._getPointXY(E.Value,de,i.isInversed)*i.width)),F=ej.EjSvgRender.utils._measureText(E.displayText,he,i.font).width,y=M+(i.isInversed?-F/2:F/2),y=0==Be?y+this.diff:y;var He=0==F?F:d;if((Se!=Ve||Se==Ve&&d<=F)&&(He/=2),"shift"==O&&Se==Ve){var Ye=ue[Se],b=Math.abs(Math.floor(ej.EjSvgRender.utils._getPointXY(Ye.Value,de,i.isInversed)*i.width)),x=ej.EjSvgRender.utils._measureText(Ye.displayText,he,i.font).width,Ue=b+(i.isInversed?x/2:-x/2);(i.isInversed?y<=Ue-this.diff:y>=Ue-this.diff)&&(R=T.displayText="")}"hide"==ne&&(i.isInversed?y<Te+He:y>Te-He)&&(T.displayText=R="")}else if("multiplerows"==ne&&!i.enableTrim){var We=[],Xe=T;"string"==typeof Xe.Text&&-1!=Xe.Text.indexOf("<br>")?We=Xe.Text.split("<br>"):We.push(Xe.Text);var Ge=We.length;if(""==R&&"hide"==i.edgeLabelPlacement)for(var $e=0;$e<Ge;$e++)We[$e]="";var qe=ej.EjSvgRender.utils._getHighestLabel(i,oe,We),d=ej.EjSvgRender.utils._measureText(qe,ae,ie).width,Ve=i.visibleLabels.length-1;if(d/=2,ye.length>0)for(var Qe=ye,Ke=0;Ke<Qe.length&&!q;Ke++)for(var Ze=Qe[Ke],Je=0;Ze&&Je<Ze.length;Je++)for(var et=0;et<Ge;et++){var P=0,d=ej.EjSvgRender.utils._measureText(We[et],ae,ie).width,E=Ze[Je],M=Math.abs(Math.floor(ej.EjSvgRender.utils._getPointXY(E.Value,de,i.isInversed)*i.width)),F=ej.EjSvgRender.utils._measureText(E.Text,he,i.font).width;Se!=Ve&&(d/=2);var y=M+(i.isInversed?-F/2:F/2);if((this.edgeLabel||1==Qe.length)&&(y+=this.diff),i.isInversed?y<Te+d:y>Te-d){if(U){P=be?Ee.y+h:Ee.y-h,Ee.y=P,L+=1,L<xe&&(L+=xe,xe=0),Ke+1==Qe.length&&(q=!0);break}P=be?Ee.y-h:Ee.y+h,Ee.y=P,L+=1,L<xe&&(L+=xe,xe=0),Ke+1==Qe.length&&(q=!0);break}if(Je+1==Ze.length){et==Ge-1?q=!0:(xe++,q=!1);break}}if(void 0==P)if(void 0==ye[0]&&(ye[0]=[]),1==Ge)ye[0].push(Xe);else for(var et=0;et<Ge;et++)void 0==ye[et]&&(ye[et]=[]),ye[et].push({Text:We[et],Value:Xe.Value});else if(void 0==ye[L]&&(ye[L]=[]),1==Ge)ye[L].push(Xe);else for(var et=0;et<Ge;et++)void 0==ye[L]&&(ye[L]=[]),ye[L].push({Text:We[et],Value:Xe.Value}),et!=Ge-1&&(L+=1);if(Ee.y=be?U?Ee.y:Ee.y-h*(We.length-1):U?Ee.y-h*(We.length-1):Ee.y,0!=se&&-360!=se&&360!=se){var qe=ej.EjSvgRender.utils._getHighestLabel(i,oe,We);d=ej.EjSvgRender.utils._measureText(qe,ae,ie).width,Ee["text-anchor"]=ve,Ee.x=Ee.x+d/2}this.svgRenderer.drawText(Ee,We,V)}}this.edgeLabel||this.zoomed||i.zoomed||se||"rotate90"==G||"rotate45"==G||!(Te+i.x+d/2>e(this.svgObject).width())||(e(Ee).attr("x",e(this.svgObject).width()-2),e(Ee).attr("text-anchor","end")),i.visibleLabels[Se].y=Ee.y,this.model.enableCanvasRendering&&be&&("rotate45"==i.labelIntersectAction||"rotate90"==i.labelIntersectAction)&&(Ee.y=Ee.y-d),"trim"!=ne&&!i.enableTrim||"double"==i._valueType&&"string"!=typeof T.displayText?"multiplerows"!=ne&&("string"==typeof R&&-1!=R.indexOf("<br>")?(Fe=R.split("<br>"),Ee.y=be?U?Ee.y:Ee.y-h*(Fe.length-1):U?Ee.y-h*(Fe.length-1):Ee.y,0==se&&"rotate45"!=G&&"rotate90"!=G||(Ee.x=Ee.x+d/2,Ee["text-anchor"]=ve),this.svgRenderer.drawText(Ee,Fe,H?N:V)):("start"==ve&&0!=se&&-360!=se&&360!=se&&(Ee.x=Ee.x+d/2,Ee["text-anchor"]=ve),this.svgRenderer.drawText(Ee,R,H?N:V))):(Ee.y=be?U?Ee.y:Ee.y-h*(Ce.length-1):U?Ee.y-h*(Ce.length-1):Ee.y,T.displayText=Ce.length>0?Ce.join(""):R,-1==T.displayText.indexOf("...")&&(T.displayText=R),0!=se&&"middle"!=ve&&(Ee.x=Ee.x+d/2,Ee["text-anchor"]=ve),this.svgRenderer.drawText(Ee,Ce.length>0?Ce:R,H?N:V)),Se==ue.length-1||"trim"!=ne&&!i.enableTrim||(Ee.x=Ee.x-d/2),i.visibleLabels[Se].region=this.calculateRegion(R,ie,Ee,T,Ce||Fe,N,ne),this.model.xAxisLabelRegions.push(i.visibleLabels[Se].region)}}e(V).appendTo(this.gXaxisEle)},calculateRegion:function(e,t,i,s,a,r,n){if("trim"==n&&a.length>0){var o=a.join("");-1==o.indexOf("...")&&(o=s.Text)}else var o=r||e;var l=a&&a.length>0?a.length:1,d=l>1&&r?ej.EjSvgRender.utils._measureText(r,null,t):ej.EjSvgRender.utils._measureText(o,null,t),h=d.height*l;return{bounds:{x:i.x,y:i.y,width:d.width,height:h},trimText:o,labelText:s.Text}},rowscalculation:function(e,t,i,s,a){var r,n,o=ej.EjSvgRender.utils._measureText,l=i.font,d=o(e,t,l),h=d.width,c=e.toString(),u=c.length,p=[],m=0,g=i.labelIntersectAction,f=c.split(" "),_=f.length;if(this.edgeLabel&&(s=0==m?s-this.diff:s),h>s&&a&&(r=0,this.edgeLabel&&(a.x=0==m?a.x-this.diff:a.x+this.diff)),"wrap"==g){if(h>s)for(var v=1;v<=c.length;v++)if(e=c.substring(0,v),(h=o(e,t,l).width)>s){r+=1,e=c.substring(0,v-1),p[m]=e,c=c.slice(v-1,u),n=c.split(" "),c=f.indexOf(n[0])>-1?c:"-"+c;var b=o(e,t,l).width;m++,v=0}a&&(a.x="datetimeCategory"==i.valueType&&"betweenticks"==i.labelPlacement.toLowerCase()?i._gap:a.x),p[m]=e}else for(var x,y,w,C=0,m=0;m<_;m++)if(x=f[m],(y=o(x,t,l).width)<s&&h>s){for(;m<_;){if(y=o(x,t,l).width,w=f[m+1]?o(f[m+1],t,l).width:0,!(y+w<=s&&w>0)){C=Math.max(C,y);break}x=x.concat(" "+f[m+1]),m++}p.push(x)}else{if(!(h>s)){p.push(e);break}x=ej.EjSvgRender.utils._trimText(x,s,l),b=o(x,t,l).width,C=Math.max(C,b),p.push(x)}return p},labelRotation:function(t,i,s,a,r,n,o){var l=t._opposed,d=t.rotateOn.toLowerCase(),h=t.labelIntersectAction.toLowerCase(),c=0,u=r.displayText?r.displayText:r.Text,p=n>360?n-360:n<-360?n+360:n,m="rotate("+p+","+i+","+s+")";if(e(a).attr("transform",m),e(a).attr("labelRotation",p),e(a).attr("labelPosition",t.labelPosition),"wrap"==h||"wrapbyword"==h)var g=t.width/t.labels.length,f=this._getLabelCollection(u,this.model.m_AreaBounds.width,t,g,a),u=ej.EjSvgRender.utils._getHighestLabel(t,e(this.svgObject).width(),f,null);var _=this.svgRenderer.createText(a,u),v=Math.round(ej.EjSvgRender.utils._measureBounds(_,this).height),b=ej.EjSvgRender.utils._measureText(u,null,t.font).height;if(c=Math.ceil(ej.EjSvgRender.utils._measureBounds(_,this).height-ej.EjSvgRender.utils._measureText(u,null,t.font).height),c=t._LableMaxWidth.height-c-ej.EjSvgRender.utils._measureText(u,null,t.font).height,"inside"!=t.labelPosition)var x=l?c/2:-c/2;else var x=l?-c/2:c/2;"end"==d&&(x+=p<0&&p>-180||p>180?-v/2:(v-b)/2),"start"==d&&(x+=p<0&&p>-180||p>180?v/2:-(v-b)/2),m="rotate("+p+","+i+","+(s+(this.model.enableCanvasRendering&&t.opposedPosition?-x:x))+")",this.edgeLabel&&90==n&&(s=0==o?a.y+this.diff:a.y-this.diff),e(a).attr({transform:m,y:s+(this.model.enableCanvasRendering&&t.opposedPosition?-x:x)})},_drawYAxisLabels:function(t,i){var s,a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,j=i.name.replace(/[^a-zA-Z0-9]/g,""),L=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisLabels_"+t,cursor:"default"}),A=i._opposed,E="inside"==i.labelPosition,P="inside"==i.tickLinesPosition,M=this.model.m_AreaBounds,F=(this.model.requireInvertedAxes,this.model.enableCanvasRendering),N=i._isScroll&&!(null!=i.scrollbarSettings.pointsLength&&i.scrollbarSettings.pointsLength<i.maxPointLength),z=i.font,V=i.visibleRange,B=i.axisLine.width,H=i._LableMaxWidth,M=(H.height,H.rows,this.model.m_AreaBounds),Y=M.Width,U=i.maximumLabelWidth,W=this.model.scrollerSize,X=i.labelIntersectAction.toLowerCase(),G=i.visibleLabels,$=V,q=i.isInversed,Q=i.height,K=i.labelRotation,Z=i.alignment.toLowerCase();1!=t&&(E&&P||E&&!P&&i.x!=M.Width+M.X&&i.x!=M.X)?i.x=A?E&&P?Math.floor(i.x):Math.floor(i.x+H.width+this.model.elementSpacing):i.showNextToAxisLine?Math.floor(i.x):Math.floor(i.x-H.width-this.model.elementSpacing):1==t||i.x==M.Width+M.X&&i.x!=M.X||E||!P?(i._x=Math.floor(i.x),i.x=i.showNextToAxisLine?Math.floor(i.x):A?Math.floor(M.X+M.Width):Math.floor(M.X)):(i._x=Math.floor(i.x),i.x=A?Math.floor(i.x+i.majorTickLines.size):i.showNextToAxisLine?Math.floor(i.x-i.majorTickLines.size):Math.floor(M.X));for(var J=0;J<G.length;J++)if(S=G[J],ej.EjSvgRender.utils._inside(S.Value,$)){d=Math.abs(ej.EjSvgRender.utils._getPointXY(S.Value,$,q)*Q),h=ej.EjSvgRender.utils._measureText(S.Text,M.Height,z),p=h.height,g=S.displayText=S.Text,y=ej.EjSvgRender.utils._measureText(g,Y,z),C=y.width,E&&P?(f=A?i.x-i.majorTickLines.size-B/2-5:i.x+B/2+5+i.majorTickLines.size,_=A?"end":"start"):E&&!P?(f=A?i.x-B/2-5:i.x+B/2+5,_=A?"end":"start"):P&&!E?(f=A?B/2+i.x+5:i.x-B/2-5,_=A?"start":"end",f-=N?A?-W:W:0):(f=A?i.majorTickLines.size+B/2+i.x+5:i.x-B/2-5-i.majorTickLines.size,_=A?"start":"end",f-=N?A?-W:W:0),D=i.majorGridLines.width>i.majorTickLines.width?i.majorGridLines.width:i.majorTickLines.width,I="far"==Z?-d+(i.y+Q)-D-3:"near"==Z?-d+(i.y+Q)+p/2+D+3:-d+(i.y+Q)+p/4,w={id:this.svgObject.id+"_"+j+"_YLabel_"+J,x:f,y:I,fill:z.color,"font-size":z.size,"font-family":z.fontFamily,"font-style":z.fontStyle,"font-weight":z.fontWeight,opacity:z.opacity,"text-anchor":ej.util.isNullOrUndefined(K)||0==K?_:"middle"},g=S.displayText?S.displayText:S.Text;var ee,te=[];if("string"==typeof g&&-1!=g.indexOf("<br>")?(te=g.split("<br>"),ee=g=ej.EjSvgRender.utils._getHighestLabel(i,M.Height,te),C=ej.EjSvgRender.utils._measureText(g,Y,z).width):te.push(g),i.edgeLabelPlacement)switch(c=i.edgeLabelPlacement.toLowerCase(),u=G.length-1,c){case"none":break;case"shift":0==J?w.y>i.y+Q&&(v=w.y-(i.y+Q),w.y=I=w.y-v,this.diff=v,this.edgeLabel=!0):J==u&&w.y-p/2<i.y&&(v=i.y-(w.y-p/2),w.y=I=w.y+v,this.diff=v,this.edgeLabel=!0);break;case"hide":(0==J&&w.y>i.y+Q||J==u&&w.y-p/2<M.Y)&&(g=S.Text="",1==te.length&&(te[0]=g))}if(ej.util.isNullOrUndefined(K)||0==K||this.svgRenderer.vmlNamespace||(f=E?A?f-C/2:f+C/2:A?f+C/2:f-C/2,g=S.displayText?S.displayText:S.Text,g=ee||g,b=K>360?K-360:K<-360?K+360:K,x="rotate("+b+","+f+","+I+")",e(w).attr("transform",x),e(w).attr("labelRotation",b),a=this.svgRenderer.createText(w,g),r=Math.ceil(ej.EjSvgRender.utils._measureBounds(a,this).width-ej.EjSvgRender.utils._measureText(g,null,z).width),m=E?A?-r/2:r/2:A?r/2:-r/2,x="rotate("+b+","+(f+m)+","+I+")",e(w).attr({transform:x,x:f+m})),i.labelIntersectAction||i.enableTrim){if("none"==X&&!i.enableTrim){this.svgRenderer.drawText(w,te.length>0?te:S.Text,F&&ee?ee:L),s=ej.EjSvgRender.utils._measureText(g,null,z),l=i.opposedPosition?w.x:w.x-s.width,o={x:l,y:w.y,width:s.width,height:s.height},n={bounds:o,trimText:g,labelText:S.Text},i.visibleLabels[J].region={bounds:o,trimText:g,labelText:S.Text},this.model.yAxisLabelRegions.push(n);continue}if(i.enableTrim)for(var ie=0;ie<te.length;ie++){var g=te[ie];if((C=ej.EjSvgRender.utils._measureText(g,null,z).width)>U&&""!=g){for(var se=1;se<g.toString().length;se++)if(g=S.displayText.toString().substring(0,se-1)+"...",(C=ej.EjSvgRender.utils._measureText(g,Y,z).width)>=U){g=g.toString().substring(0,se-1)+"...";break}S.displayText=te[ie]=g}}for(var ae=0;ae<J;ae++)T=G[ae],0,R=Math.abs(ej.EjSvgRender.utils._getPointXY(T.Value,V,q)*Q),k=ej.EjSvgRender.utils._measureText(T.Text,M.Height,z).height,O=-1*R+(i.y+Q)+k/4,O+=q?k/2:-k/2,this.edgeLabel&&(O=0==ae?O-k/4:O),"hide"==X&&""!=T.Text.toString()&&(q?O>w.y-p/4:O<w.y+p/4)?g=S.Text="":"multiplerows"==X&&(q?O>w.y-p/4:O<w.y+p/4)&&T.x==w.x&&(w.x=T.x+A?E?-H.maxWidth-5:H.maxWidth+5:E?H.maxWidth+5:-H.maxWidth-5)}G[J].x=w.x,this.svgRenderer.drawText(w,te.length>0?te:g,L),s=ej.EjSvgRender.utils._measureText(g,null,z),l=A?w.x:w.x-s.width,o={x:l,y:w.y,width:s.width,height:s.height},n={bounds:o,trimText:g,labelText:S.Text},G[J].region={bounds:o,trimText:g,labelText:S.Text},this.model.yAxisLabelRegions.push(n)}e(L).appendTo(this.gYaxisEle)},trimText:function(e,t,i){return t--,(e=e.substring(0,t-i.length))+i},_drawXTitle:function(t,i){if(""!=i.title.text&&i.title.text&&i.title.visible){var s,a,r,n=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxis_Title_"+t,cursor:"default"}),o=(this.model.elementSpacing,i._LableMaxWidth.height,ej.EjSvgRender.utils._measureText(i.title.text,i.width,i.title.font)),l=o.height/2,d=i._opposed,h=i.title.text,c=i._LableMaxWidth,u="middle",p=this.model.elementSpacing,m=i.title.enableTrim,g=i._isScroll||this.model.zooming.enableScrollbar&&i.scrollbarSettings.visible&&(i.zoomFactor<1||i.zoomPosition>0),f=i.title.maximumTitleWidth,_=i.title.position.toLowerCase(),v=i.title.alignment.toLowerCase(),b=i.title.isReversed,x=i.tickLinesPosition.toLowerCase(),y=i.labelPosition.toLowerCase(),w=this.model.m_AreaBounds,C=i.title.offset,S=this.model.scrollerSize;if(m&&(ej.util.isNullOrUndefined(f)||f>0||isNaN(f)))for(var T=f||i.width-2*p;o.width>T;)if(h=this.trimText(h,h.length,"..."),o=ej.EjSvgRender.utils._measureText(h,i.width,i.title.font),"..."==h){h="";break}var R=e.extend({},ej.EjSvgRender.commonChartEventArgs),s=p+c.height+l+i._multiLevelLabelHeight+i.majorTickLines.size+i.axisLine.width
;"inside"!=x||"inside"!=y||0!=t&&i.y!=w.Height+w.Y&&i.y!=w.Y?0!=t&&i.y!=w.Width+w.X&&i.y!=w.X||"inside"==x||"inside"!=y?0!=t&&i.y!=w.Width+w.X&&i.y!=w.X||"inside"!=x||"inside"==y?"inside"!=x&&"inside"!=y||1!=t?s="inside"==_?p:p+c.height+l+i.majorTickLines.size+i.axisLine.width+i._multiLevelLabelHeight:"inside"==x||"inside"!=y||i.showNextToAxisLine||(s="inside"==_?p+c.height+l+i._multiLevelLabelHeight+i.axisLine.width:p+l+i.majorTickLines.size+i.axisLine.width+p+p):s="inside"==_?p+l+i.majorTickLines.size+i.axisLine.width:p+c.height+l+i._multiLevelLabelHeight+i.axisLine.width:s="inside"==_?p+c.height+l+i._multiLevelLabelHeight+i.axisLine.width:p+i.majorTickLines.size+i.axisLine.width:s="inside"==_?p+c.height+l+i._multiLevelLabelHeight+i.majorTickLines.size+i.axisLine.width:p+l+i.axisLine.width,"far"==v?(a=b?i.x+C:i.x+i.width+C,u=b?"start":"end"):"near"==v?(a=b?i.x+i.width+C:i.x+C,u=b?"end":"start"):a=i.x+i.width/2+C,R.data={title:i.title.text,location:{x:a,y:s},axes:i},this._trigger("axesTitleRendering",R),r="inside"==_?(d?"inside"==x&&"outside"==y?i.y+R.data.location.y-(g?S:0)-i.majorTickLines.size:i.y+R.data.location.y-(g?S:0):"outside"==x&&"inside"==y?(g?S:0)+(i.y-R.data.location.y)+i.majorTickLines.size:(g?S:0)+(i.y-R.data.location.y))+o.height/3.5:(d?"inside"==x&&"outside"==y?i.y-R.data.location.y-(g?S:0)-i.majorTickLines.size:i.y-R.data.location.y-(g?S:0):"outside"==x&&"inside"==y?(g?S:0)+(R.data.location.y+i.y)-i.majorTickLines.size:(g?S:0)+(R.data.location.y+i.y))+o.height/3.5;var k={id:this.svgObject.id+"_XAxisTitle_"+t,x:R.data.location.x,y:r,fill:i.title.font.color,"font-size":i.title.font.size,"font-family":i.title.font.fontFamily,"font-style":i.title.font.fontStyle,"font-weight":i.title.font.fontWeight,opacity:i.title.font.opacity,"text-anchor":u};if(this.model.enableCanvasRendering){var O=jQuery.uaMatch(navigator.userAgent),D=!!navigator.userAgent.match(/Trident\/7\./),I=O.browser.toLowerCase();"msie"==I||D||(k.y=d?k.y+l/2+1:k.y+l/2+("mozilla"==I?1:-2))}if(e(this.svgObject).find("#"+this.svgObject.id+"_XAxisTitle_"+t).length>0)e(this.svgObject).find("#"+this.svgObject.id+"_XAxisTitle_"+t).attr(k);else if(m){if(m&&(ej.util.isNullOrUndefined(f)||f>0||isNaN(f))){var j="middle"==u?k.x-o.width/2:"end"==u?k.x-o.width:k.x,L={X:j,Y:k.y,Width:o.width,Height:o.height},A={Bounds:L,trimText:h,labelText:i.title.text};this.model.xAxisTitleRegion.push(A),this.svgRenderer.drawText(k,h,n)}}else this.svgRenderer.drawText(k,R.data.title,n);if(!this.model.enableCanvasRendering){var E="start"==u?0:"end"==u?o.width:o.width/2,P={id:this.svgObject.id+"_XAxisTitleBorder_"+t,x:R.data.location.x-E-p,y:r-o.height+o.height/4,width:o.width+2*p,height:o.height,fill:"transparent",class:"e-xaxistitleborder"};this.svgRenderer.drawRect(P,n)}e(n).appendTo(this.gXaxisEle)}},_drawYTitle:function(t,i){if(""!=i.title.text&&i.title.text&&i.title.visible){var s,a,r=i._opposed,n=this.model.elementSpacing,o="middle",l=this.model.series.isTransposed,d=i.majorTickLines.size,h=i.title.position.toLowerCase(),c=i._LableMaxWidth,u=this.model.m_AreaBounds,p=i.axisLine,m=i.tickLinesPosition.toLowerCase(),g=i.labelPosition.toLowerCase(),f=i.title.text,_=i.title.enableTrim,v=(this.model.requireInvertedAxes,i._isScroll),b=i.title.maximumTitleWidth,x=i.title.offset,y=i.title.alignment.toLowerCase(),w=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisTitleGroup_"+t,cursor:"default"}),C=ej.EjSvgRender.utils._measureText(i.title.text,i.height,i.title.font);"inside"!=m||"inside"!=g||1!=t&&i.x!=u.Width+u.X&&i.x!=u.X?1!=t&&i.x!=u.Width+u.X&&i.x!=u.X||"inside"==m||"inside"!=g?1!=t&&i.x!=u.Width+u.X&&i.x!=u.X||"inside"!=m||"inside"==g?("inside"!=i.tickLinesPosition&&"inside"!=i.labelPosition||1!=t)&&(s="inside"==h?r?i.x-(n+p.width+d):i.x+(n+(i.showNextToAxisLine?0:c.width)+p.width+d):r?i.x+(3*n+i._multiLevelLabelHeight+c.width+d+p.width):i.x-(3*n+c.width+i._multiLevelLabelHeight+d+p.width)):s="inside"==h?r?i.x-(3*n+d+p.width):i.x+(3*n+d+p.width)+(i.showNextToAxisLine?"inside"==g?-i._multiLevelLabelHeight:i._multiLevelLabelHeight:-n):r?i.x+(3*n+i._multiLevelLabelHeight+c.width+p.width):i.x-(3*n+c.width+p.width+i._multiLevelLabelHeight):s="inside"==h?r?i.x-(3*n+c.width+i._multiLevelLabelHeight+p.width):i.x+(3*n+c.width+i._multiLevelLabelHeight+p.width):r?i.x+(3*n+d+p.width):i.x-(3*n+d+p.width):s="inside"==h?r?i.x-(3*n+c.width+i._multiLevelLabelHeight+d+p.width):i.x+(3*n+c.width+i._multiLevelLabelHeight+d+p.width):r?i.x+(3*n+p.width-5):i.x-(3*n+p.width);var S=ej.EjSvgRender.utils._measureText(f,i.height,i.title.font);if(_&&(ej.util.isNullOrUndefined(b)||b>0||isNaN(b)))for(var T=b||i.height-2*n;S.width>T;)if(f=this.trimText(f,f.length,"..."),S=ej.EjSvgRender.utils._measureText(f,i.height,i.title.font),"..."==f){f="";break}s=i.opposedPosition?s:s-(v?this.model.scrollerSize:0),8===document.documentMode&&(s=r?s+S.width/2-n:s-S.width/2+n);var R=e.extend({},ej.EjSvgRender.commonChartEventArgs);R.data={title:i.title.text,location:{x:C.width/2,y:0},axes:i},this._trigger("axesTitleRendering",R),a=R.data.location.y+(i.y+i.height)+i.height/2*-1,"near"==y?(a=i.y+i.height-x,o=r||l?"end":"start"):"far"==y?(a=i.y-x,o=r||l?"start":"end"):"center"==y&&(a=i.y+i.height/2-x);var k=r?90:-90,O={id:this.svgObject.id+"_YAxisTitle_"+t,x:s,y:a,fill:i.title.font.color,labelRotation:k,transform:"rotate("+k+","+s+","+a+")","font-size":i.title.font.size,"font-family":i.title.font.fontFamily,"font-style":i.title.font.fontStyle,"font-weight":i.title.font.fontWeight,opacity:i.title.font.opacity,"text-anchor":o,"dominant-baseline":"middle"};if(this.model.enableCanvasRendering){var D=jQuery.uaMatch(navigator.userAgent),I=!!navigator.userAgent.match(/Trident\/7\./),j=D.browser.toLowerCase();"msie"==j||I||(O.x=r?O.x-C.height/4+1:O.x+C.height/4+("mozilla"==j?1:-2))}if(e(this.svgObject).find("#"+this.svgObject.id+"_YAxisTitle_"+t).length>0)e(this.svgObject).find("#"+this.svgObject.id+"_YAxisTitle_"+t).attr(O);else if(_){if(_&&(ej.util.isNullOrUndefined(b)||b>0||isNaN(b))){if(this.svgRenderer.vmlNamespace)var L={X:O.x-S.width/2,Y:O.y+S.height/2,Width:S.width,Height:S.height};else var L={X:O.x-S.height/2,Y:O.y+S.width/2,Width:S.height/2,Height:S.width};var A={Bounds:L,trimText:f,labelText:i.title.text};this.model.yAxisTitleRegion.push(A),this.svgRenderer.drawText(O,f,w)}}else this.svgRenderer.drawText(O,R.data.title,w);if(!this.model.enableCanvasRendering){var E="start"==o?S.width:"end"==o?0:S.width/2,P={id:this.svgObject.id+"_YAxisTitleBorder_"+t,x:O.x-S.height+S.height/2,y:O.y-E-n,width:S.height,height:S.width+2*n,fill:"transparent",class:"e-yaxistitleborder"};this.svgRenderer.drawRect(P,w)}e(w).appendTo(this.gYaxisEle)}}},ej.EjStripline.prototype={_drawStripline:function(e,t,i,s){var a=ej.util.isNullOrUndefined(e.valueType)?e._valueType.toLowerCase():e.valueType.toLowerCase();"string"==typeof t.start&&"string"==typeof t.end&&(t.start=-1!=t.start.indexOf("/Date(")?new Date(parseInt(t.start.substr(6))):t.start,t.end=-1!=t.end.indexOf("/Date(")?new Date(parseInt(t.end.substr(6))):t.end);var r,n;"datetimecategory"==a?(r=null!=t.start&&"number"!=typeof t.start?e.labels.indexOf(t.start.getTime()):t.start,n=null!=t.end&&"number"!=typeof t.end?e.labels.indexOf(t.end.getTime()):t.end):(r=t.start<e.visibleRange.min?e.visibleRange.min:t.start,n=t.end>e.visibleRange.max?e.visibleRange.max:t.end);var o,l=0,d=t.isRepeat,h=t.repeatEvery,c=t.repeatUntil,u=t.width;if(t.visible){this.model._stripeline=!0;var p=t.startFromAxis,m="over"==t.zIndex?this.gStriplineOver:this.gStriplineBehind;m=ej.util.isNullOrUndefined(m)?"":m;var g=!0,f=0;if("horizontal"==e.orientation.toLowerCase()){var l=-90;if(ej.util.isNullOrUndefined(r)&&(ej.util.isNullOrUndefined(n)||ej.util.isNullOrUndefined(u)))g=!1;else if(r=p?ej.util.isNullOrUndefined(t.offset)?e.visibleRange.min:e.visibleRange.min+t.offset:"date"==jQuery.type(r)?r.getTime():r,ej.util.isNullOrUndefined(n)||"date"!=jQuery.type(n)||(n=n.getTime()),d&&!ej.util.isNullOrUndefined(h)&&u)for(var _=ej.util.isNullOrUndefined(c)?n||e.visibleRange.max:"datetime"==e._valueType?c.getTime():c;r<_;)n="datetime"===e._valueType?this._getDatetimeValue(n,r,u,e,u?null:n,t,a):r+u,o=this._getHorizontalValue(r,n,e,u,t),g&&this._drawAxisStriplines(o.x,o.y,o.height,o.width,o.textX,o.textY,l,i,f,s,m,t,e),f++,r="datetime"===e._valueType?this._getDatetimeValue(n,r,h,e,null,t,a):r+h;else o=this._getHorizontalValue(r,n,e,u,t),g&&this._drawAxisStriplines(o.x,o.y,o.height,o.width,o.textX,o.textY,l,i,f,s,m,t,e)}else if(ej.util.isNullOrUndefined(r)&&(ej.util.isNullOrUndefined(n)||ej.util.isNullOrUndefined(u)))g=!1;else if(r=p?ej.util.isNullOrUndefined(t.offset)?e.visibleRange.min:e.visibleRange.min+t.offset:"date"==jQuery.type(r)?r.getTime():r,ej.util.isNullOrUndefined(n)||"date"!=jQuery.type(n)||(n=n.getTime()),d&&!ej.util.isNullOrUndefined(h)&&u)for(var _=ej.util.isNullOrUndefined(c)?n||e.visibleRange.max:c;r<_;)n=r+u,o=this._getVerticalValue(r,n,e,u,t),g&&this._drawAxisStriplines(o.x,o.y,o.height,o.width,o.textX,o.textY,l,i,f,s,m,t,e),f++,r+=h;else o=this._getVerticalValue(r,n,e,u,t),g&&this._drawAxisStriplines(o.x,o.y,o.height,o.width,o.textX,o.textY,l,i,f,s,m,t,e)}},_getHorizontalValue:function(e,t,i,s,a,r){var n=(r?(e-i.visibleRange.min)/i.visibleRange.delta:ej.EjSvgRender.utils._getPointXY(e,i.visibleRange,i.isInversed))*i.width+i.x,o=ej.EjSvgRender.utils._getPointXY(t,i.visibleRange,i.isInversed)*i.width+i.x,l=ej.EjSvgRender.utils._getPointXY(e,i.visibleRange,i.isInversed)*i.width+i.x;l+=ej.util.isNullOrUndefined(s)?0:s;var d=(i.isInversed?o<l:o>l)?Math.abs(n-o):Math.abs(n-l);return this._calculateHorizontalStripline(d,n,i,a)},_getVerticalValue:function(e,t,i,s,a,r){var n=i.y+i.height-(r?(e-i.visibleRange.min)/i.visibleRange.delta:ej.EjSvgRender.utils._getPointXY(e,i.visibleRange,i.isInversed))*i.height,o=i.y+i.height-ej.EjSvgRender.utils._getPointXY(ej.util.isNullOrUndefined(t)?0:t,i.visibleRange,i.isInversed)*i.height,l=i.y+i.height-ej.EjSvgRender.utils._getPointXY(e+(ej.util.isNullOrUndefined(s)?0:s),i.visibleRange,i.isInversed)*i.height,d=(i.isInversed?o>l:o<l)?Math.abs(n-o):Math.abs(n-l);return this._calculateVerticalStripline(d,n,i,a)},_calculateHorizontalStripline:function(e,t,i,s){var a=e,r=this.chart.model.m_AreaBounds.Height,n=i.isInversed?t-e:t,o=this.chart.model.m_AreaBounds.Y,l=ej.EjSvgRender.utils._measureText(s.text,null,s.font).height;return"middletop"==s.textAlignment?(textX=n+l,textY=Math.abs(o+r/2)):"middlecenter"==s.textAlignment?(textX=Math.floor(n+a/2)+l/3,textY=Math.abs(o+r/2)):"middlebottom"==s.textAlignment&&(textX=n+a-l,textY=Math.abs(o+r/2)),{x:n,y:o,height:r,width:a,textX:textX,textY:textY}},_calculateVerticalStripline:function(e,t,i,s){var a,r,n=e,o=this.chart.model.m_AreaBounds.X,l=this.chart.model.m_AreaBounds.Width,d=t+(i.isInversed?0:-e),h=ej.EjSvgRender.utils._measureText(s.text,l,s.font).height;return"middletop"==s.textAlignment?(a=o+l/2,r=d+h):"middlecenter"==s.textAlignment?(a=o+l/2,r=Math.abs(d+n/2)+h/3):"middlebottom"==s.textAlignment&&(a=o+l/2,r=d+n-h),{x:o,y:d,height:n,width:l,textX:a,textY:r}},_getDatetimeValue:function(e,t,i,s,a,r,n){var o=r.sizeType.toLowerCase(),l=null===a;if("datetime"!==n)return"pixel"===r.sizeType?t:l?t+i:e;var d=new Date(t);switch("auto"===o&&(o=s._intervalType.toLowerCase()),o){case"years":return l?new Date(d.setFullYear(d.getFullYear()+i)):e;case"months":return l?new Date(d.setMonth(d.getMonth()+i)):e;case"days":return l?new Date(d.setDate(d.getDate()+i)):e;case"hours":return l?new Date(d.setHours(d.getHours()+i)):e;case"minutes":return l?new Date(d.setMinutes(d.getMinutes()+i)):e;case"seconds":return l?new Date(d.setSeconds(d.getSeconds()+i)):e;default:return t}},_drawAxisStriplines:function(e,t,i,s,a,r,n,o,l,d,h,c,u){if(ej.util.isNullOrUndefined(c.imageUrl)){var p={id:h.id+"_striplineRect_"+o+"_"+d+"_"+l,x:e,y:t,width:s,height:i,fill:c.color,opacity:c.opacity,"stroke-width":c.borderWidth,stroke:0==c.borderWidth?"transparent":c.borderColor},m={id:h.id+"_striplineRectText_"+o+"_"+d+"_"+l,x:a,y:r,fill:c.font.color,transform:"rotate("+n+","+a+","+r+")",labelRotation:n,"font-size":c.font.size,"font-family":c.font.fontFamily,"font-style":c.font.fontStyle,"font-weight":c.font.fontWeight,opacity:c.font.opacity,"text-anchor":"middle"},g={X:e,Y:t,Width:s,Height:i},f="over"==c.zIndex;if(ej.EjSvgRender.utils.AddRegion(this.chart,g,f),this.chart.model.enableCanvasRendering){var _=this.chart.svgObject.getContext("2d"),v="horizontal"==u.orientation.toLowerCase()?{X:u.x,Y:t,Width:u.width,Height:this.chart.model.m_AreaBounds.Height}:{X:e,Y:u.y,Width:this.chart.model.m_AreaBounds.Width,Height:u.height};_.save(),_.beginPath(),_.rect(v.X,v.Y,v.Width,v.Height),_.clip(),this.svgRenderer.drawRect(p,h),this.svgRenderer.drawText(m,c.text,h),_.closePath(),_.restore()}else this.svgRenderer.drawRect(p,h),this.svgRenderer.drawText(m,c.text,h)}else{var b={height:i,width:s,href:c.imageUrl,x:e,y:t,id:h.id+"_backImage",visibility:"visible",preserveAspectRatio:"none"};this.svgRenderer.drawImage(b,h)}}}}(jQuery),ej.EjLegendRender=function(e){this.chartObj=e},function(e){ej.EjLegendRender.prototype={sumofArray:function(e){for(var t=0,i=e.length,s=0;s<i;s++)t+=e[s];return t},legendRectSpace:function(e,t){var i=e.Width-10,s=e.Height-10,a=!1;return Math.ceil(t.Width)>=i&&Math.ceil(t.Height)>=s&&(a=!0),a},drawLegendTitle:function(){var e=this.chartObj,t=e.model,i=t.legend,s=i.isReversed,a=t.LegendBounds,r=t.elementSpacing,n=i.title,o=ej.EjSvgRender.utils._measureText,l=n.font,d=a.Width,h=o(n.text,null,l),c=h.width,u=h.height,p=n.textAlignment.toLowerCase(),m=0,g=r+u/2;switch(p){case"far":m=s?m:d-c-m;break;case"center":m=d/2-c/2}m<0&&(m=0,d=c),d<c+m&&(d=c+m);var f={id:e.svgObject.id+"_LegendTitleText",x:s&&"near"==p?d-c-m:m,y:g,fill:l.color,"font-size":l.size,"font-style":l.fontStyle,"font-family":l.fontFamily,"font-weight":l.fontWeight,"text-anchor":"start",direction:"ltr",lgndCtx:!0};e.svgRenderer.drawText(f,n.text,this.chartObj.gLegendEle)},drawLegendItem:function(t,i,s){var a,r,n,o,l,d,h,c,u,p,m,g,f,_,v=this.chartObj,b=v.model,x=b.legend,y=x.isReversed,w=x.textOverflow.toLowerCase(),C=x.textWidth,S=b.LegendBounds,T=b.elementSpacing,R=x.border.width,k=ej.EjSvgRender.utils._measureText,O=ej.EjSvgRender,D=v.svgRenderer,I=t.Font,j=b.symbolShape,L=b.enableCanvasRendering,A=x.itemStyle,E=t.PointIndex,P=t.SeriesIndex,M=E||P,F=b.series[P],N=v.svgObject,z=t.LegendStyle,V=(jQuery.uaMatch(navigator.userAgent),navigator.userAgent.match(/Trident\/7\./),F.type.toLowerCase()),B=F.drawType;if(g=k(t.Text,S.Width,I).height,"object"==typeof t.Text&&y){for(var H,Y,U,W=0,X=0;X<t.Text.length;X++)H=t.Text[X],Y=ej.EjSvgRender.utils._measureText(H,S.Width,I).width,W<Y&&(W=Y,U=H);f=k(U,null,I).width}else f=k(t.Text,null,I).width;_={startX:y?f+i+T:i+A.width/2,startY:s+(g>A.height?g:A.height)/2};for(d in j)if(t.Shape.toLowerCase()==d.toLowerCase()){h="seriestype"==d.toLowerCase()?"SeriesType":d;break}if("SeriesType"==h&&("radar"!=V&&"polar"!=V||(c="scatter"==B.toLowerCase()?F.marker.shape:c=B,h="rangecolumn"==c.toLowerCase()?"RangeColumn":c.capitalizeFirstString()),"scatter"==V&&(c=F.marker.shape,h=c.capitalizeFirstString()),t.drawType&&(h="SeriesType"),!v.vmlRendering||"pie"!=V&&"doughnut"!=V&&"pieofpie"!=V||(h="Circle")),"None"==h&&(h="pie"==V||"doughnut"==V||"pieofpie"==V?"Circle":"Rectangle"),M=ej.util.isNullOrUndefined(E)?P:E,v.gLegendItemEle=D.createGroup({id:N.id+"_Legend"+M,cursor:"pointer"}),t.CommonEventArgs.data.gLegendItemEle=v.gLegendItemEle,n=e.extend(!0,{},t.CommonEventArgs.data),n.model=v.model,o=n.style,!t.CommonEventArgs.cancel){l=O.chartSymbol["_draw"+h](_,o,n,v.gLegendItemEle),a=z.Color&&"gray"!==z.Color.toString().toLowerCase()&&L?I.color:z.Color&&"gray"!==z.Color.toLowerCase()?I.color:"gray",r=t,m=r.Text.length,"seriestype"!=x.shape&&"seriesType"!=x.shape||(i=y?i-T/2:i+T/2);var G={id:this.chartObj.svgObject.id+"_LegendItemText"+M,x:y?i:A.width+i+T/2,y:_.startY,fill:a,"font-size":I.size,"font-style":I.fontStyle,"font-family":I.fontFamily,"font-weight":I.fontWeight,"text-anchor":"start",direction:"ltr"};if(L&&(G.lgndCtx=!0),G.y=_.startY+g/4,"wrap"==w||"wrapandtrim"==w){G.y=G.y-g;for(var $=0;$<m;$++)G.y=G.y+g,D.drawText(G,r.Text[$],v.gLegendItemEle),"wrapandtrim"==w&&(u={x:G.x+S.X,y:G.y+S.Y,height:g*m,width:C},p={bounds:u,trimText:r.Text,labelText:r.displayText},b.legendTextRegion.push(p))}else"trim"==w&&(u={x:G.x+S.X,y:G.y+S.Y,height:g+T,width:C},p={bounds:u,trimText:r.Text,labelText:r.displayText},b.legendTextRegion.push(p)),D.drawText(G,r.Text,v.gLegendItemEle);D.append(v.gLegendItemEle,v.gLegendEle);var q={X:S.X+R,Y:S.Y+R};i=l?y?_.startX-f-T:l:i;var Q={X:i,Y:s,_Width:t.Bounds._Width,Width:t.Bounds.Width,Height:t.Bounds.Height},K={LegendBound:q,ItemBound:Q};_.startX=y?Math.abs(_.startX-f-T/2):_.startX;var Z={LegendItem:t,Location:_,SymbolShape:h,Style:t.CommonEventArgs.data.style,Bounds:K};b.legendRegion.push(Z)}},drawLegend:function(t){var i,s,a,r,n,o,l=this.chartObj,d=l.model,h=d.legend,c=h.isReversed,u=d.LegendViewerBounds,p=d.LegendBounds,m=d.LegendActualBounds,g=d.AreaType,f=h.position.toLowerCase(),_=h.alignment.toLowerCase(),v=d.elementSpacing,b=d.svgWidth,x=d.svgHeight,y=d.title,w=y.font.size,C=y.subTitle,S=y.subTitle.font.size,T=h.title,R=h.border.width,k=ej.EjSvgRender.utils._measureText,O=d.margin,D=d.border.width,I=d.legendCollection,j=I.length,L=b-2*D,A=x-2*D,E=h.itemPadding>0?h.itemPadding:0,P=10,M=10,F=""!=C.text&&C.visible&&y.visible?k(C.text,L-O.left-O.right,C.font).height+v:0,N=d._titleLocation?d._titleLocation.Y:0+F,z=k(T.text,null,T.font),V=z.height,B=z.width,H=d._rowDefinitions,Y=0,U=d._columnDefinitions,W=this.sumofArray(H.farSizes),X=this.sumofArray(H.nearSizes),G=(this.sumofArray(U.farSizes),this.sumofArray(U.nearSizes)),$=!1,q=d.m_AreaBounds,Q=h.enableScrollbar,K=e(l.legendContainer),Z=e("#ScrollerParent_vertical_"+l._id).length>0?18:0,J=e("#ScrollerParent_horizontal_"+l._id).length>0?18:0,ee=e(l.legendSvgContainer),te=10,y=d.title,C=d.title.subTitle,ie=y.visible?1.2*parseInt(w):0,se=C.visible?1.2*parseInt(S):0,ie=d.titleWrapTextCollection&&d.titleWrapTextCollection.length>1?d._titleLocation._height*d.titleWrapTextCollection.length-1:ie,se=d.subTitleWrapTextCollection&&d.subTitleWrapTextCollection.length>1?d._subTitleLocation.size.height:se;if(d.legend.border&&!C.text&&(se=0,te=5),"right"==f||"left"==f?P=10:M=Q?A>200?10:A>100?5:0:10,u.Height+=V,p.Height+=V,h.visible){if("custom"!=f){if("cartesianaxes"==g)switch(f){case"bottom":p.Y=q.Y+q.Height+G-v/2+J;break;case"top":p.Y=0==N?D+v:ie+10+se+te+v;break;case"right":p.X=q.X+q.Width+W+2*v;break;case"left":p.X=q.X-X-m.Width-v/2-2*R-Z}else switch(f){case"bottom":p.Y=A-(m.Height+R)-2*v;break;case"top":p.Y=0==N?D+v:ie+10+se+te+v;break;case"right":p.X=L-m.Width-2*v;break;case"left":p.X=D+2*v}if(!d.enable3D&&"cartesianaxes"==g&&null!=t._crossAxisOverlap)for(var ae=0,re=d._axes.length;ae<re;ae++){var ne=d._axes[ae],oe=t.axes[ne.name]._bounds,le="horizontal"===ne.orientation.toLowerCase();"top"==f&&le&&ne._opposed&&ne.y-oe<p.Y+p.Height?p.Y-=p.Y+p.Height-ne.y+oe:"bottom"==f&&le&&!ne._opposed&&ne.y+oe>p.Y?p.Y+=ne.y+oe-p.Y:"left"==f&&!le&&ne._opposed&&ne.x-oe<p.X+p.Width?p.X+=ne.x+oe-p.X:"right"==f&&!le&&!ne._opposed&&ne.x+oe>p.X&&(p.X-=p.X+p.Width-ne.x+oe)}if("left"==f||"right"==f)if(Q)switch(_){case"center":p.Y=q.Height/2-m.Height/2+q.Y-R;break;case"near":p.Y=q.Y;break;case"far":p.Y=q.Y+q.Height-m.Height-2*R}else switch(_){case"center":p.Y=A/2-(m.Height+2*R)/2+v/2;break;case"near":p.Y=D+2*v;break;case"far":p.Y=A-(m.Height+R)-2*v}else switch(_){case"center":p.X=L/2-(m.Width+2*R)/2+v/2;break;case"near":p.X=c?L-(m.Width+R)-2*v:D+2*v;break;case"far":p.X=c?D+2*v:L-(m.Width+R)-2*v}}else p.Y=h.location.y<A?h.location.y:0,p.X=h.location.x<L?h.location.x:0;if(Q)if("right"==f||"left"==f){if(p.Y<q.Y||m.Height+2*R>=q.Height)for(var de=2*R,he=0;he<j;he++)if((de+=I[he].Bounds.Height+E)>q.Height){m.Height=q.Height-2*R,p.Y=q.Y;break}}else if(2*R+m.Width>=L)for(var ce=2*R,he=0;he<j;he++)if((ce+=I[he].Bounds.Width+E)>L){m.Width=L-2*R-m.vScrollSize-2*D,p.X=L/2-(m.Width+2*R)/2+v/2;break}l.legendSvgContainer.setAttribute("height",p.Height),l.legendSvgContainer.setAttribute("width",Math.max(B,p.Width)),a=i=P,r=s=M,""!=T.text&&T.text&&(this.drawLegendTitle(),r=s=M+V);for(var he=0;he<j;he++)!(h.rowCount<h.columnCount||h.rowCount==h.columnCount)||"top"!=f&&"bottom"!=f&&"custom"!=f?(r+I[he].Bounds.Height+E+V+D>p.Height+s&&(r=s,a+=Y+E),this.drawLegendItem(I[he],a,r),r+=I[he].Bounds.Height+E,Y=Math.max(Y,I[he].Bounds.Width)):(a+I[he].Bounds.Width>p.Width+i&&(a=P,r+=I[he].Bounds.Height+E),this.drawLegendItem(I[he],a,r),a+=I[he].Bounds.Width+E);var ue=l.legendContainer[0].offsetLeft,pe=e(l.element).offset(),me=l.vmlRendering?ue<=0?p.X:ue-pe.left:e(l.svgObject).offset().left-pe.left,ge=l.vmlRendering?me:p.X+(me<=0?0:me);K.attr("style",""),K.show(),h._ejScroller||(c?K.css({direction:"rtl"}):K.css({direction:"ltr"})),K.css({position:"absolute",background:h.background,left:ge,top:p.Y,width:m.Width,height:m.Height,"border-width":h.border.width,"border-color":h.border.color,"border-style":"solid"}),K.addClass("e-legendborder"),ee.css({height:p.Height,width:p.Width}),p.Height=p.Height-(20-2*M);var fe=this.legendRectSpace(p,m);Q&&(h._ejScroller?!fe&&(p.Width>Math.ceil(m.Width)||p.Height>Math.ceil(m.Height))?(e("#"+K[0].id).ejScroller({scrollTop:l.scrolltop,scrollLeft:l.scrollleft,height:m.Height,width:m.Width}),$=!0,p.Height>Math.ceil(m.Height)&&0==m.vScrollSize&&(n=K[0].offsetWidth+5*R-K[0].clientWidth,K.css({width:m.Width+n}))):(e("#"+K[0].id).ejScroller("instance").destroy(),h._ejScroller=!1):!fe&&p.Width>Math.ceil(m.Width)&&p.Height>Math.ceil(m.Height)?(K.css({overflow:"scroll"}),$=!0):(!fe&&p.Height>Math.ceil(m.Height)&&m.vScrollSize>=0&&(K[0].style.overflowY="scroll",K[0].style.overflowX="hidden",0==m.vScrollSize&&(n=K[0].offsetWidth-2*R-K[0].clientWidth,K.css({width:m.Width+n})),$=!0),!fe&&p.Width>Math.ceil(m.Width)&&m.hScrollSize>=0&&(K[0].style.overflowX="scroll",K[0].style.overflowY="hidden",0==m.hScrollSize&&(o=K[0].offsetHeight-2*R-K[0].clientHeight,K.css({height:m.Height+o})),$=!0))),l.svgRenderer.append(l.gLegendEle,l.legendSvgContainer),$||K.css({width:m.Width-m.vScrollSize,height:m.Height-m.hScrollSize}),h._ejScroller||(void 0!=l.scrolltop&&K.scrollTop(l.scrolltop),void 0!=l.scrollleft&&K.scrollLeft(l.scrollleft))}else K.hide()}}}(jQuery),ej.seriesTypes={},ej.EjSeriesRender=function(){},ej.indicatorTypes={},ej.EjIndicatorRender=function(){},ej.trendlineTypes={},ej.EjTrendLineRenderer=function(){},function(e){function t(t,i){var s=function(){};return s.prototype=new t,e.extend(s.prototype,i),s}ej.EjTrendLineRenderer.prototype={draw:function(t,i,s){this.chartObj=s;var a=e.inArray(t,i.trendlines);t._isTransposed=s.model.requireInvertedAxes,t.xAxis=i.xAxis,t.yAxis=i.yAxis;var r=t.type.toLowerCase();return t.points.length>1&&("linear"==r||"movingaverage"==r?this.calculateLineDirection(t,i,a):this.calculateSplineDirection(t,i,a)),!1},calculateSplineDirection:function(e,t,i){for(var s,a="",r=ej.EjSvgRender.utils._getStringBuilder(),n=!0,o=e.points,l=ej.EjSeriesRender.prototype.naturalSpline(o,t),d=null,h=null,c=-1,u=o.length,p=0;p<u;p++){if(s=p,h=o[p],null!=d){var m=null,g=null,f=ej.EjSeriesRender.prototype.getBezierControlPoints(d,h,l[c],l[s],0,t,this);m=f.controlPoint1,g=f.controlPoint2;var _=ej.EjSvgRender.utils._getPoint(d,e),v=ej.EjSvgRender.utils._getPoint(h,e),b=ej.EjSvgRender.utils._getPoint(m,e),x=ej.EjSvgRender.utils._getPoint(g,e);this.chartObj;n?(r.append("M "+_.X+" "+_.Y+" C "+b.X+" "+b.Y+" "+x.X+" "+x.Y+" "+v.X+" "+v.Y+" "),n=!1):r.append("C "+b.X+" "+b.Y+" "+x.X+" "+x.Y+" "+v.X+" "+v.Y+" ")}d=h,c=s}return a=r.toString(),this._drawLinePath(e,t,a,i),!1},calculateLineDirection:function(e,t,i){for(var s,a,r,n=ej.EjSvgRender.utils._getStringBuilder(),o=!1,l=e.points.length,d=0;d<l;d++)r=e.points[d],s=ej.EjSvgRender.utils._getPoint(r,e),o?n.append("L "+s.X+" "+s.Y+" "):(n.append("M "+s.X+" "+s.Y+" "),n.append("L "+s.X+" "+s.Y+" "),o=!0);return a=n.toString(),this._drawLinePath(e,t,a,i),!1},_drawLinePath:function(e,t,i,s){var a=[];if(a[0]=e.xAxis.x,a[1]=e.yAxis.y,""!=i){var r={id:this.chartObj.svgObject.id+"_"+e.seriesIndex+"_"+s+"_"+e.name.replace(/[^a-zA-Z ]/g,""),fill:"none","stroke-dasharray":e.dashArray,"stroke-width":e.width,stroke:e.fill,opacity:e.opacity,d:i};e.id=r.id,this.chartObj.svgRenderer.drawPath(r,t.gTrendGroupEle,a)}return this.chartObj.svgRenderer.append(t.gTrendGroupEle,this.chartObj.gTrendlinesGroupEle[e.seriesIndex]),!1},calculateTrendLineSegment:function(t,i,s,a){var s,r=a.model,n=e.extend([],t.points),o=i.type.toLowerCase();switch(i.xAxis=t.xAxis?t.xAxis:r.primaryXAxis,i.yAxis=t.yAxis?t.yAxis:r.primaryYAxis,i.backwardForecast=i.backwardForecast<0?0:i.backwardForecast,i.forwardForecast=i.forwardForecast<0?0:i.forwardForecast,n=n.sort(function(e,t){return e.xValue>t.xValue?1:t.xValue>e.xValue?-1:0}),o){case"linear":this.updateTrendSource(n,i),this.calculateLinearTrendline(t,i,s);break;case"exponential":this.updateExponentialTrendSource(n,i),this.calculateExponentialTrendline(t,i,s);break;case"logarithmic":this.updateLogarithmicTrendSource(n,i),this.calculateLogarithmicTrendline(t,i,s);break;case"power":this.updatePowerTrendSource(n,i),this.calculatePowerTrendline(t,i,s);break;case"polynomial":var l=t.points.length;i.polynomialOrder=l<=i.polynomialOrder?l:i.polynomialOrder,i.polynomialOrder=i.polynomialOrder<2?2:i.polynomialOrder,i.polynomialOrder=i.polynomialOrder>6?6:i.polynomialOrder,l>1&&(this.updateTrendSource(n,i),this.calculatePolynomialTrendline(t,i,s));break;case"movingaverage":this.updateMovingAverageTrendSource(n,i),this.calculateMovingAverageTrendline(t,i,s)}return t.points.length>1&&i.points&&this.calculateTrendLineRange(i,s),!1},updateTrendSource:function(e,t){var i,s,a=e.length;t.xPoints=[],t.xValues=[],t.yValues=[];for(var r=0;r<a;r++)i=e[r],i.isEmpty||ej.isNullOrUndefined(i.y)||(t.xPoints.push(i.xValue),s="number"==typeof i.xValue?i.xValue:Date.parse(i.xValue),t.xValues.push(s),t.yValues.push(i.y));return this.calculateSumXAndYValue(t),!1},calculateLinearTrendline:function(e,t,i){var s,a,r=t.xValues.length;if(t.points=[],r>1){"datetime"==i._valueType.toLowerCase()?(s=this._increaseDateTimeInterval(t.xPoints[0],-t.backwardForecast,i._intervalType),a=this._increaseDateTimeInterval(t.xPoints[r-1],t.forwardForecast,i._intervalType)):(s=t.xPoints[0]-t.backwardForecast,a=t.xPoints[r-1]+t.forwardForecast);var n=t.slope*s+t._intercept,o=t.slope*a+t._intercept;t.points.push({x:s,xValue:s,y:n,YValues:[],visible:!0}),t.points.push({x:a,xValue:a,y:o,YValues:[],visible:!0}),t.points[0].YValues[0]=t.points[0].y,t.points[1].YValues[0]=t.points[1].y}return!1},calculateTrendLineRange:function(e,t){var i,s=e.points.length;e.minY=e.points[0].y,e.maxY=e.points[s-1].y,t.setRange||(e.backwardForecast>0&&"category"!=t._valueType&&s>1&&(t.range.min=t.range.min>e.points[0].x?e.points[0].x:t.range.min,t.visibleRange.min=t.range.min),e.forwardForecast>0&&s>1&&(t.range.max=t.range.max<e.points[s-1].x?e.points[s-1].x:t.range.max,t.visibleRange.max=t.range.max));for(var a=0;a<s;a++)i=e.points[a].y,e.minY=Math.min(e.minY,i),e.maxY=Math.max(e.maxY,i);return!1},calculateSumXAndYValue:function(e){var t,i,s,a=(e.points,e.xPoints.length),r=e.type.toLowerCase(),n=0,o=0,l=0,d=0,h=0,c=0,u=e.xValues,p=e.yValues;for(s=0;s<a;s++)n+=u[s],o+=p[s],c+=u[s]*p[s],d+=u[s]*p[s],l+=u[s]*u[s],h+=p[s]*p[s];if(ej.util.isNullOrUndefined(e.intercept)||"linear"!=r&&"exponential"!=r&&"polynomial"!=r)t=(a*d-n*o)/(a*l-n*n),i="exponential"==r||"power"==r?Math.exp((o-t*n)/a):(o-t*n)/a,e._intercept=i;else{switch(r){case"polynomial":t=(c-Math.log(e.intercept)*n)/l*3;break;case"linear":t=(c-e.intercept*n)/l;break;case"exponential":t=(c-Math.log(e.intercept)*n)/l}e._intercept=e.intercept}return e.slope=t,!1},_increaseDateTimeInterval:function(e,t,i){var s=new Date(e);return e="object"==typeof e?e:s,"days"==i.toLowerCase()?s.setDate(e.getDate()+t):"hours"==i.toLowerCase()?s.setHours(e.getHours()+t):"milliseconds"==i.toLowerCase()?s.setMilliseconds(e.getMilliseconds()+t):"seconds"==i.toLowerCase()?s.setSeconds(e.getSeconds()+t):"minutes"==i.toLowerCase()?s.setMinutes(e.getMinutes()+t):"months"==i.toLowerCase()?s.setMonth(e.getMonth()+t):"years"==i.toLowerCase()&&s.setYear(e.getFullYear()+t),s}},ej.ejLinear=t(ej.EjTrendLineRenderer),ej.trendlineTypes.linear=ej.ejLinear,ej.Exponential=t(ej.EjTrendLineRenderer,{updateExponentialTrendSource:function(e,t){var i,s,a=e.length;t.xPoints=[],t.xValues=[],t.yValues=[];for(var r=0;r<a;r++)i=e[r],i.isEmpty||ej.isNullOrUndefined(i.y)||(t.xPoints.push(i.xValue),s="number"==typeof i.xValue?i.xValue:Date.parse(i.xValue),t.xValues.push(s),t.yValues.push(Math.log(i.y)));return this.calculateSumXAndYValue(t),!1},calculateExponentialTrendline:function(e,t,i){var s,a,r,n,o,l,d=t.xValues.length,h=Math.round(d/2);if(t.points=[],d>1){"datetime"==i._valueType.toLowerCase()?(s=this._increaseDateTimeInterval(t.xPoints[0],-t.backwardForecast,i._intervalType),n=s.getTime(),a=t.xPoints[h-1],o=new Date(a).getTime(),r=this._increaseDateTimeInterval(t.xPoints[d-1],t.forwardForecast,i._intervalType),l=r.getTime()):(s=n=t.xPoints[0]-t.backwardForecast,a=o=t.xPoints[h-1],r=l=t.xPoints[d-1]+t.forwardForecast);var c=t._intercept*Math.exp(t.slope*s),u=t._intercept*Math.exp(t.slope*a),p=t._intercept*Math.exp(t.slope*r);t.points.push({x:s,xValue:n,y:c,YValues:[],visible:!0}),t.points.push({x:a,xValue:o,y:u,YValues:[],visible:!0}),t.points.push({x:r,xValue:l,y:p,YValues:[],visible:!0}),t.points[0].YValues[0]=t.points[0].y,t.points[1].YValues[0]=t.points[1].y,t.points[2].YValues[0]=t.points[2].y}return!1}}),ej.trendlineTypes.exponential=ej.Exponential,ej.Logarithmic=t(ej.EjTrendLineRenderer,{updateLogarithmicTrendSource:function(e,t){var i,s,a=e.length;t.xPoints=[],t.xValues=[],t.yValues=[];for(var r=0;r<a;r++)if(i=e[r],!i.isEmpty&&!ej.isNullOrUndefined(i.y)){t.xPoints.push(i.xValue),s="number"==typeof i.xValue?i.xValue:Date.parse(i.xValue);var n=isFinite(Math.log(s))?Math.log(s):s;t.xValues.push(n),t.yValues.push(i.y)}return this.calculateSumXAndYValue(t),!1},calculateLogarithmicTrendline:function(e,t,i){var s,a,r,n,o,l,d=t.xValues.length,h=Math.round(d/2);if(t.points=[],d>1){"datetime"==i._valueType.toLowerCase()?(s=this._increaseDateTimeInterval(t.xPoints[0],-t.backwardForecast,i._intervalType),n=s.getTime(),a=t.xPoints[h-1],o=new Date(a).getTime(),r=this._increaseDateTimeInterval(t.xPoints[d-1],t.forwardForecast,i._intervalType),l=r.getTime()):(s=n=t.xPoints[0]-t.backwardForecast,a=o=t.xPoints[h-1],r=l=t.xPoints[d-1]+t.forwardForecast);var c=t._intercept+t.slope*(isFinite(Math.log(s))?Math.log(s):s),u=t._intercept+t.slope*(isFinite(Math.log(a))?Math.log(a):a),p=t._intercept+t.slope*(isFinite(Math.log(r))?Math.log(r):r);t.points.push({x:s,xValue:n,y:c,YValues:[],visible:!0}),t.points.push({x:a,xValue:o,y:u,YValues:[],visible:!0}),t.points.push({x:r,xValue:l,y:p,YValues:[],visible:!0}),t.points[0].YValues[0]=t.points[0].y,t.points[1].YValues[0]=t.points[1].y,t.points[2].YValues[0]=t.points[2].y}return!1}}),ej.trendlineTypes.logarithmic=ej.Logarithmic,ej.Power=t(ej.EjTrendLineRenderer,{updatePowerTrendSource:function(e,t){var i,s,a=e.length;t.xPoints=[],t.xValues=[],t.yValues=[];for(var r=0;r<a;r++)i=e[r],i.isEmpty||(t.xPoints.push(i.xValue),s="number"==typeof i.xValue?i.xValue:Date.parse(i.xValue),t.xValues.push(Math.log(s)),t.yValues.push(Math.log(i.y)));return this.calculateSumXAndYValue(t),!1},calculatePowerTrendline:function(e,t,i){var s,a,r,n,o,l,d=t.xValues.length,h=Math.round(d/2);if(t.points=[],d>1){if("datetime"==i._valueType.toLowerCase())s=this._increaseDateTimeInterval(t.xPoints[0],-t.backwardForecast,i._intervalType),n=s.getTime(),a=t.xPoints[h-1],o=new Date(a).getTime(),r=this._increaseDateTimeInterval(t.xPoints[d-1],t.forwardForecast,i._intervalType),l=r.getTime();else{var c=t.xPoints[0]-t.backwardForecast;s=n=c>-1?c:0,a=o=t.xPoints[h-1],r=l=t.xPoints[d-1]+t.forwardForecast}
var u=t._intercept*Math.pow(s,t.slope),p=t._intercept*Math.pow(a,t.slope),m=t._intercept*Math.pow(r,t.slope);t.points.push({x:s,xValue:n,y:u,YValues:[],visible:!0}),t.points.push({x:a,xValue:o,y:p,YValues:[],visible:!0}),t.points.push({x:r,xValue:l,y:m,YValues:[],visible:!0}),t.points[0].YValues[0]=t.points[0].y,t.points[1].YValues[0]=t.points[1].y,t.points[2].YValues[0]=t.points[2].y}return!1}}),ej.trendlineTypes.power=ej.Power,ej.Polynomial=t(ej.EjTrendLineRenderer,{calculatePolynomialTrendline:function(e,t,i){var s=t.polynomialOrder;t.polynomialSlopes=new Array(s+1);for(var a=t.xValues.length,r=0;r<a;r++)for(var n=t.xValues[r],o=t.yValues[r],l=0;l<=s;++l)t.polynomialSlopes[l]||(t.polynomialSlopes[l]=0),t.polynomialSlopes[l]+=Math.pow(n,l)*o;for(var d=new Array(1+2*s),h=new Array(s+1),c=0;c<s+1;c++)h[c]=new Array(3);for(var u=0,r=0;r<a;++r)for(var n=1,p=t.xValues[r],l=0;l<d.length;++l)d[l]||(d[l]=0),d[l]+=n,n*=p,++u;for(var r=0;r<=s;++r)for(var l=0;l<=s;++l)h[r][l]=d[r+l];return this.gaussJordanEliminiation(h,t.polynomialSlopes)||(t.polynomialSlopes=null),this.createPolynomialSegments(e,i,t),!1},createPolynomialSegments:function(e,t,i){var s=i.polynomialSlopes;if(null!=s){var a,r=i.xValues.length,n=(Math.round(r/2),1),o=s.length,l=t._valueType.toLowerCase();i.points=[];for(var d=1;d<=o;d++){var h,c;if(1==d){"datetime"==l?(h=this._increaseDateTimeInterval(i.xPoints[0],-i.backwardForecast,t._intervalType),a=h.getTime()):h=a=i.xPoints[0]-i.backwardForecast;var c=this.getPolynomialYValue(s,a)}else if(d==s.length){"datetime"==l?(h=this._increaseDateTimeInterval(i.xPoints[r-1],i.forwardForecast,t._intervalType),a=h.getTime()):h=a=i.xPoints[r-1]+i.forwardForecast;var c=this.getPolynomialYValue(s,a)}else{n+=(r+i.forwardForecast)/s.length,"category"==l?h=a=i.xPoints[0]+(n-1):(h=a=i.xPoints[parseInt(n)-1],"datetime"==l&&r>n&&(a=new Date(h).getTime()));var c=this.getPolynomialYValue(s,a)}(1==d||d==s.length||"category"==l||r>n)&&(i.points.push({x:h,xValue:a,y:c,YValues:[],visible:!0}),i.points[i.points.length-1].YValues[0]=i.points[i.points.length-1].y)}}return!1},getPolynomialYValue:function(e,t){for(var i=0,s=0;s<e.length;s++)i+=e[s]*Math.pow(t,s);return i},gaussJordanEliminiation:function(e,t){for(var i=e.length,s=new Array(i),a=new Array(i),r=new Array(i),n=0;n<i;++n)r[n]=0;for(var o=0;o<i;++o){for(var l=0,d=0,h=0,c=0;c<i;++c)if(1!=r[c])for(var u=0;u<i;++u)0==r[u]&&Math.abs(e[c][u])>=l&&(l=Math.abs(e[c][u]),d=c,h=u);if(++r[h],d!=h){for(var c=0;c<i;++c){var p=e[c];e[d][c]=e[h][c],e[h][c]=p}var m=t[d];t[d]=t[h],t[h]=m}if(a[o]=d,s[o]=h,0==e[h][h])return!1;var g=1/e[h][h];e[h][h]=1;for(var c=0;c<i;++c)e[h][c]*=g;t[h]*=g;for(var c=0;c<i;++c)if(c!=h){var p=e[c][h];e[c][h]=0;for(var u=0;u<i;++u)e[c][u]-=e[h][u]*p;t[c]-=t[h]*p}}for(var o=i-1;o>=0;--o)if(a[o]!=s[o])for(var d=0;d<i;++d){var f=e[a[o]];e[d][a[o]]=e[d][s[o]],e[d][s[o]]=f}return!0}}),ej.trendlineTypes.polynomial=ej.Polynomial,ej.MovingAverage=t(ej.EjTrendLineRenderer,{updateMovingAverageTrendSource:function(e,t){var i,s,a=e.length;for(t.xPoints=[],t.xValues=[],t.yValues=[],i=0;i<a;i++)t.xPoints.push(e[i].xValue),t.xValues.push(i+1),s=e[i].isEmpty?null:e[i].y,t.yValues.push(s);return!1},calculateMovingAverageTrendline:function(e,t,i){var s,a,r,n,o,l,d,h=t.xPoints.length,c=t.period>=h?h-1:t.period;for(c=c<2?2:c,t.points=[],s=0;s<h-1;s++){for(r=n=o=0,a=s;n<c;a++)n++,ej.util.isNullOrUndefined(t.yValues[a])&&o++,r+=t.yValues[a];r=c-o<=0?null:r/(c-o),ej.util.isNullOrUndefined(r)||isNaN(r)||(l=t.xPoints[c-1+s],t.points.push({x:l,xValue:l,y:r,YValues:[],visible:!0}),d=t.points.length,t.points[d-1].YValues[0]=t.points[d-1].y)}}}),ej.trendlineTypes.movingaverage=ej.MovingAverage,ej.EjIndicatorRender.prototype={draw:function(t,i){this.chartObj=i;var s=null;if("cartesianaxes"==this.chartObj.model.AreaType){s="translate("+t.xAxis.x+","+t.yAxis.y+")"}var a=e.inArray(t,this.chartObj.model.indicators),r={id:this.chartObj.svgObject.id+"_indicatorGroup_"+a,transform:s};if(this.gIndicatorGroupEle=this.chartObj.svgRenderer.createGroup(r),t._points.length>0)for(var n=0;n<t.segment.length;n++){var o=t.segment[n],l={fill:o.fill,width:o.width,opacity:t.opacity};o.isIndicator=!0,o.xAxis=t.xAxis,o.yAxis=t.yAxis,"line"==o.type?this.calculateDirection(o,l,a):this.drawColumn(o,l,t)}},_drawLinePath:function(e,t,i,s){if(""!=i){var a={name:"line",id:this.chartObj.svgObject.id+"_"+s+"_"+e.name,fill:"none","stroke-dasharray":e.dashArray,"stroke-width":t.width,stroke:t.fill,"stroke-linecap":e.lineCap,"stroke-linejoin":e.lineJoin,opacity:t.opacity,d:i};this.chartObj.svgRenderer.drawPath(a,this.gIndicatorGroupEle)}this.chartObj.svgRenderer.append(this.gIndicatorGroupEle,this.chartObj.gIndicatorEle)},calculateDirection:function(e,t,i){var s,a=0,r=0;this.chartObj.model.enableCanvasRendering&&(a=e.xAxis.x,r=e.yAxis.y),e.points=ej.DataManager(e.points,ej.Query().sortBy("xValue")).executeLocal();for(var n,o,l=ej.EjSeriesRender.prototype._isVisiblePoints(e),d=ej.EjSvgRender.utils._getStringBuilder(),h=!1,c=0;c<l.length;c++)o=l[c],o.visible?(s=ej.EjSvgRender.utils._getPoint(o,e),h?d.append("L "+(s.X+a)+" "+(s.Y+r)+" "):(d.append("M "+(s.X+a)+" "+(s.Y+r)+" "),h=!0)):h=!1;n=d.toString(),this._drawLinePath(e,t,n,i)},drawColumn:function(t,i,s){var a=t,r=e.inArray(s,this.chartObj.model.indicators);a.index=r;for(var n=Math.max(t.yAxis.visibleRange.min,0),o={Start:-.35,End:.35},l=ej.EjSeriesRender.prototype._isVisiblePoints(a),d=this,h=d.chartObj,c=0;c<l.length;c++){var u=c,p=l[c],m=p.YValues[0],g=n;if(p.visible){var f=ej.EjSeriesRender.prototype.calculateSides(p,o),_=f.x1,v=f.x2,b=ej.EjSeriesRender.prototype.getRectangle(_,m,v,g,a,h),x=Math.min(0,b.Width),y=Math.min(0,b.Height);b.Width<1e-4&&(b.Width=1e-4);var w;if((0==x||0==y)&&b.Width>0){var C={id:this.chartObj.svgObject.id+"_"+r+"_"+a.name,x:b.X+d.chartObj.canvasX,y:b.Y+d.chartObj.canvasY,width:b.Width,height:b.Height,fill:l[c].fill?l[c].fill:i.fill,"stroke-width":a.border.width,plot:m<0?"negative":"positive",opacity:a.histogram.opacity,stroke:l[c].fill?l[c].fill:a.border.color};this.chartObj.svgRenderer.drawRect(C,this.gIndicatorGroupEle);var S=ej.EjSvgRender.utils._getSvgXY(b.X,b.Y,a,d.chartObj);w={X:S.X,Y:S.Y,Width:b.Width,Height:b.Height},this._addRegion(d.chartObj,w,a,p,u)}}}this.chartObj.svgRenderer.append(this.gIndicatorGroupEle,this.chartObj.gIndicatorEle)},_addRegion:function(e,t,i,s,a){var r=i.type;if(i.index>=0){var n={SeriesIndex:i.index,Region:{PointIndex:a,Bounds:t},type:r,isIndicator:!0};e.model.chartRegions.push(n)}},calculateSegment:function(t,i){if(this.chartObj=i,t.segment=[],t.xRange={},t.yRange={},t.period=parseInt(t.period),t.period<t._points.length&&t.period>0){var s=e.extend(!0,{},t);s.name="upperseries",s.fill=t.upperLine.fill,s.width=t.upperLine.width,s.type="line";for(var a=0;a<t._points.length;a++)t._points[a].YValues.length=1,t._points[a].YValues[0]=t._points[a].y=70;s.points=e.extend(!0,[],t._points);var r=i._getXValues(s.points),n=i._getYValues(s.points);t.xRange.min=Math.min.apply(Math,r),t.xRange.max=Math.max.apply(Math,r),t.yRange.min=Math.min.apply(Math,n),t.yRange.max=Math.max.apply(Math,n),t.segment.push(s);var o=e.extend(!0,{},t);o.name="lowerSeries",o.width=t.lowerLine.width,o.fill=t.lowerLine.fill,o.type="line";for(var l=0;l<t._points.length;l++)t._points[l].YValues[0]=t._points[l].y=30;o.points=e.extend(!0,[],t._points),n=i._getYValues(o.points),t.yRange.min=Math.min(Math.min.apply(Math,n),t.yRange.min),t.yRange.max=Math.max(Math.max.apply(Math,n),t.yRange.max),t.segment.push(o);var d=e.extend(!0,{},t);d.name="signalSeries",d.width=t.width,d.fill=t.fill,d.type="line";var h=0,c=0,u=0,p=0,m=t.period;c=t._points[0].close;for(var g=1;g<=m;++g)h=t._points[g].close,h>c?u+=h-c:h<c&&(p+=c-h),c=h,t._points[g-1].YValues[0]=t._points[g-1].y=null;u/=m,p/=m,t._points[m].YValues[0]=t._points[m].y=100-100/(1+u/p);for(var f=m+1;f<t._points.length;f++)h=t._points[f].close,h>c?(u=(u*(m-1)+(h-c))/m,p=p*(m-1)/m):h<c&&(p=(p*(m-1)+(c-h))/m,u=u*(m-1)/m),c=h,t._points[f].YValues[0]=t._points[f].y=100-100/(1+u/p);d.points=e.extend(!0,[],t._points);for(var _=[],g=m,f=0;g<d.points.length;g++,f++)_[f]=d.points[g].y;t.yRange.min=Math.min(Math.min.apply(Math,_),t.yRange.min),t.yRange.max=Math.max(Math.max.apply(Math,_),t.yRange.max),t.segment.push(d),this.calculateIndicatorRange(i,t)}},calculateIndicatorRange:function(e,t){void 0==e.model.indicatorRange[t.xAxisName]?(e.model.indicatorRange[t.xAxisName]={},e.model.indicatorRange[t.xAxisName]={min:t.xRange.min,max:t.xRange.max}):(e.model.indicatorRange[t.xAxisName].min>t.xRange.min&&(e.model.indicatorRange[t.xAxisName].min=t.xRange.min),e.model.indicatorRange[t.xAxisName].max<t.xRange.max&&(e.model.indicatorRange[t.xAxisName].max=t.xRange.max)),void 0===e.model.indicatorRange[t.yAxisName]?(e.model.indicatorRange[t.yAxisName]={},e.model.indicatorRange[t.yAxisName]={min:t.yRange.min,max:t.yRange.max}):(e.model.indicatorRange[t.yAxisName].min>t.yRange.min&&(e.model.indicatorRange[t.yAxisName].min=t.yRange.min),e.model.indicatorRange[t.yAxisName].max<t.yRange.max&&(e.model.indicatorRange[t.yAxisName].max=t.yRange.max))}},ej.ejRSI=t(ej.EjIndicatorRender),ej.indicatorTypes.rsi=ej.ejRSI,ej.ejMACD=t(ej.EjIndicatorRender,{calculateSegment:function(t,i){this.chartObj=i,t.segment=[],t.xRange={},t.yRange={};var s=t._points.length,a=t.longPeriod,r=t.shortPeriod,n=t.trigger,o=a-r,l=[],d=[],h=[],c=[],u=[],p=a+n;if(p<=t._points.length&&p-2>=0&&r<=a&&r>0){for(l=this.calculateEMA(t._points,r,!0),d=this.calculateEMA(t._points,a,!0),_=0;_<d.length;_++)h.push(l[_+o]-d[_]);var m=e.extend(!0,{},t);m.name="macdSeries",m.fill=t.macdLine.fill,m.width=t.macdLine.width,m.type="line",m.xAxis=t.xAxis,m.yAxis=t.yAxis;for(var g=a-1,f=0,_=0;f<s;f++)f<g?t._points[f].YValues[0]=t._points[f].y=null:(t._points[f].YValues[0]=t._points[f].y=h[_],_+=1);m.points=e.extend(!0,[],t._points),c=this.calculateEMA(h,n,!1);var v=e.extend(!0,{},t);v.name="signalSeries",v.fill=t.fill,v.width=t.width,v.type="line",v.xAxis=t.xAxis,v.yAxis=t.yAxis;for(var g=a+n-2,f=0,_=0;f<s;f++)f<g?t._points[f].YValues[0]=t._points[f].y=null:(t._points[f].YValues[0]=t._points[f].y=c[_],_+=1);v.points=e.extend(!0,[],t._points);var b=e.extend(!0,{},t);b.border={},b.name="histogramSeries",b.fill=t.histogram.fill,b.opacity=t.histogram.opacity,b.fill=t.histogram.fill,b.border=t.histogram.border,b.type="column",b.xAxis=t.xAxis,b.yAxis=t.yAxis;for(var x=0,y=g;y<s;x++,y++)u.push(h[x+(n-1)]-c[x]);for(var x=0,y=g;y<s;x++,y++)t._points[y].YValues[0]=t._points[y].y=u[x];b.points=e.extend(!0,[],t._points);var w=i._getXValues(m.points);switch(t.xRange.min=Math.min.apply(Math,w),t.xRange.max=Math.max.apply(Math,w),t.macdType){case"line":t.yRange.min=Math.min.apply(Math,h),t.yRange.max=Math.max.apply(Math,h),t.segment.push(m);var C=Math.min.apply(Math,c),S=Math.max.apply(Math,c);t.yRange.min=t.yRange.min<C?t.yRange.min:C,t.yRange.max=t.yRange.max>S?t.yRange.max:S,t.segment.push(v);break;case"histogram":var T=Math.min.apply(Math,u),R=Math.max.apply(Math,u);t.yRange.min=t.yRange.min<T?t.yRange.min:T,t.yRange.max=t.yRange.max>R?t.yRange.max:R,t.segment.push(b);break;case"both":var T=Math.min.apply(Math,u),R=Math.max.apply(Math,u);t.yRange.min=t.yRange.min<T?t.yRange.min:T,t.yRange.max=t.yRange.max>R?t.yRange.max:R,t.segment.push(b),t.yRange.min=Math.min.apply(Math,h),t.yRange.max=Math.max.apply(Math,h),t.segment.push(m);var C=Math.min.apply(Math,c),S=Math.max.apply(Math,c);t.yRange.min=t.yRange.min<C?t.yRange.min:C,t.yRange.max=t.yRange.max>S?t.yRange.max:S,t.segment.push(v)}this.calculateIndicatorRange(i,t)}},calculateEMA:function(e,t,i){var s=0,a=0,r=e.length,n=[],o=[],l=2/(t+1);if(i){for(var d=0;d<t;d++)n.push(e[d].close),s+=n[d];a=s/t,o.push(a);for(var h=a,c=t;c<r;c++)h=(e[c].close-h)*l+h,o.push(h)}else{for(var d=0;d<t;d++)n.push(e[d]),s+=n[d];a=s/t,o.push(a);for(var h=a,c=t;c<r;c++)h=(e[c]-h)*l+h,o.push(h)}return o}}),ej.indicatorTypes.macd=ej.ejMACD,ej.ejSMA=t(ej.EjIndicatorRender,{calculateSegment:function(t,i){this.chartObj=i,t.segment=[],t.xRange={},t.yRange={};var s=e.extend(!0,{},t);s.name="trendSeries",s.width=t.width,s.fill=t.fill,s.type="line";var a,r,n=[],o=[],l=[],d=t._points.length,h=t.period;if(!(h<=0||d<h)){for(var c=0;c<d;c++)n.push(t._points[c].close);for(var u=n.length;u>=h;){a=0;for(var p=0;p<h;p++)a+=n[p];a/=h,o.push(a),n.splice(0,1),u=n.length}for(var m=0;m<d;m++)t._points[m].YValues[0]=t._points[m].y=m<h-1?null:o[m-(h-1)];s.points=e.extend(!0,[],t._points);for(var r=i._getXValues(s.points),c=h-1,p=0;c<s.points.length;c++,p++)l[p]=s.points[c].y;t.xRange.min=Math.min.apply(Math,r),t.xRange.max=Math.max.apply(Math,r),t.yRange.min=Math.min.apply(Math,l),t.yRange.max=Math.max.apply(Math,l),t.segment.push(s),this.calculateIndicatorRange(i,t)}}}),ej.indicatorTypes.sma=ej.ejSMA,ej.ejEMA=t(ej.EjIndicatorRender,{calculateSegment:function(t,i){this.chartObj=i,t.segment=[],t.xRange={},t.yRange={};var s=e.extend(!0,{},t);s.name="trendSeries",s.type="line",s.xAxis=t.xAxis,s.yAxis=t.yAxis;var a,r=[],n=[],o=t._points.length,l=t.period,d=0;if(!(o<l||l<=0)){for(var h=2/(l+1),c=0;c<l;c++)r.push(t._points[c].close),d+=r[c];for(n.push(d/l),m=l;m<o;m++)n.push((t._points[m].close-n[m-l])*h+n[m-l]);for(var u=0;u<o;u++)u<l-1?t._points[u].YValues[0]=t._points[u].y=null:u>=l-1&&(t._points[u].YValues[0]=t._points[u].y=n[u-(l-1)]);s.points=e.extend(!0,[],t._points),a=i._getXValues(s.points);for(var p=[],c=l,m=0;c<s.points.length;c++,m++)p[m]=s.points[c].y;t.xRange.min=Math.min.apply(Math,a),t.xRange.max=Math.max.apply(Math,a),t.yRange.min=Math.min.apply(Math,p),t.yRange.max=Math.max.apply(Math,p),t.segment.push(s),this.calculateIndicatorRange(i,t)}}}),ej.indicatorTypes.ema=ej.ejEMA,ej.ejSTOCHASTIC=t(ej.EjIndicatorRender,{calculateSegment:function(t,i){function s(e,i,s){t._points.length>=e+i&&a(e,i,s)}function a(e,i,s){for(var a,r=e+(i-1),n=[],o=[],l=0;l<t._points.length;l++){var d=b[l].y;n.push(d)}for(var h=n.length;h>=r;){a=0;for(var c=e-1;c<e+i-1;c++)a+=n[c];a/=i,o.push(a.toFixed(2)),n.splice(0,1),h=n.length}for(var u=r-1,p=0;p<t._points.length;p++)s[p].YValues[0]=s[p].y=p<u?null:Number(o[p-u])}function r(e,i,s){for(var a,r,n=e+i,o=[],l=[],d=0,h=0,c=0;c<e-1;++c)l.push(0),o.push(0);for(var c=e-1;c<t._points.length;++c){r=Number.MAX_VALUE,a=Number.MIN_VALUE;for(var u=0;u<e;++u)r=Math.min(r,_[c-u]),a=Math.max(a,f[c-u]);l.push(a),o.push(r)}for(var c=0;c<n-1;++c)s[c].YValues.length=1,s[c].YValues[0]=s[c].y=null;for(var c=e-1;c<t._points.length;++c)d=0,h=0,d+=v[c]-o[c],h+=l[c]-o[c],s[c].YValues.length=1,s[c].YValues[0]=s[c].y=d/h*100}this.chartObj=i,t.segment=[],t.xRange={},t.yRange={};var n=t.kPeriod,o=t.dPeriod,l=t.period;if(!(l<1||o<1||n<1||l>t._points.length||o>t._points.length||n>t._points.length)){var d=e.extend(!0,{},t);d.name="upperseries",d.type="line",d.fill=t.upperLine.fill,d.width=t.upperLine.width;for(var h=0;h<t._points.length;h++)t._points[h].YValues.length=1,t._points[h].YValues[0]=t._points[h].y=80;d.points=e.extend(!0,[],t._points);var c=i._getXValues(d.points),u=i._getYValues(d.points);t.xRange.min=Math.min.apply(Math,c),t.xRange.max=Math.max.apply(Math,c),t.yRange.min=Math.min.apply(Math,u),t.yRange.max=Math.max.apply(Math,u),t.segment.push(d);var p=e.extend(!0,{},t);p.name="lowerSeries",p.width=t.lowerLine.width,p.fill=t.lowerLine.fill,p.type="line";for(var m=0;m<t._points.length;m++)t._points[m].YValues[0]=t._points[m].y=20;p.points=e.extend(!0,[],t._points),c=i._getXValues(p.points),u=i._getYValues(p.points),t.xRange.min=Math.min(Math.min.apply(Math,c),t.xRange.min),t.xRange.max=Math.max(Math.max.apply(Math,c),t.xRange.max),t.yRange.min=Math.min(Math.min.apply(Math,u),t.yRange.min),t.yRange.max=Math.max(Math.max.apply(Math,u),t.yRange.max),t.segment.push(p);var g=e.extend(!0,{},t);g.name="periodSeries",g.width=t.periodLine.width,g.fill=t.periodLine.fill,g.type="line";for(var f=[],_=[],v=[],b=[],x=0;x<t._points.length;x++)_[x]=t._points[x].low,f[x]=t._points[x].high,v[x]=t._points[x].close;!function(e,i,s){t._points.length>e&&r(e,i,s)}(l,n,t._points),b=t._points,s(l,n,t._points),b=t._points,g.points=e.extend(!0,[],t._points),c=i._getXValues(g.points),u=i._getYValues(g.points),t.xRange.min=Math.min(Math.min.apply(Math,c),t.xRange.min),t.xRange.max=Math.max(Math.max.apply(Math,c),t.xRange.max),t.yRange.min=Math.min(Math.min.apply(Math,u),t.yRange.min),t.yRange.max=Math.max(Math.max.apply(Math,u),t.yRange.max),t.segment.push(g);var y=e.extend(!0,{},t);y.name="trendSeries",y.width=t.width,y.fill=t.fill,y.type="line",s(l+n-1,o,t._points),y.points=e.extend(!0,[],t._points),t.segment.push(y),this.calculateIndicatorRange(i,t)}}}),ej.indicatorTypes.stochastic=ej.ejSTOCHASTIC,ej.ejbollingerBand=t(ej.EjIndicatorRender,{calculateSegment:function(t,i){this.chartObj=i,t.segment=[],t.xRange={},t.yRange={};var s=0,a=0,r=t._points.length,n=t.standardDeviations,o=t.period,l=Math.round(o),d=[],h=[],c=[];if(l<r&&l>0){for(var u=0;u<l;u++)s+=t._points[u].close;for(var p=s/o,u=0;u<r;++u)if(u>=l-1&&u<r){if(u-o>=0){var m=t._points[u].close-t._points[u-l].close;s+=m,p=s/o,d[u]=p,h[u]=Math.pow(t._points[u].close-p,2),a+=h[u]-h[u-l]}else d[u]=p,h[u]=Math.pow(t._points[u].close-p,2),a+=h[u];var g=Math.sqrt(a/o),f=d[u]-n*g,_=d[u]+n*g;if(u+1==l)for(var v=0;v<l-1;v++)c[v]={X:t._points[v].X,mb:d[u],lb:f,ub:_,visible:!0};c[u]={X:t._points[u].X,mb:d[u],lb:f,ub:_,visible:!0}}else u<o-1&&(d[u]=p,h[u]=Math.pow(t._points[u].close-p,2),a+=h[u]);var b=e.extend(!0,{},t);b.name="upperseries",b.fill=t.upperLine.fill,b.width=t.upperLine.width,b.type="line";for(var x=0;x<t._points.length;x++)x>=l-1?(t._points[x].YValues.length=1,t._points[x].YValues[0]=t._points[x].y=c[x].ub):t._points[x].YValues[0]=t._points[x].y=null;b.points=e.extend(!0,[],t._points);for(var y=i._getXValues(b.points),w=[],u=l;u<b.points.length;u++)w.push(b.points[u].y);var C=w;t.xRange.min=Math.min.apply(Math,y),t.xRange.max=Math.max.apply(Math,y),t.yRange.min=Math.min.apply(Math,C),t.yRange.max=Math.max.apply(Math,C),t.segment.push(b);var S=e.extend(!0,{},t);S.name="lowerSeries",S.width=t.lowerLine.width,S.fill=t.lowerLine.fill,S.type="line";for(var T=0;T<t._points.length;T++)T>=l-1?(t._points[T].YValues.length=1,t._points[T].YValues[0]=t._points[T].y=c[T].lb):t._points[T].YValues[0]=t._points[T].y=null;S.points=e.extend(!0,[],t._points),y=i._getXValues(S.points);for(var R=[],u=l;u<S.points.length;u++)R.push(S.points[u].y);var C=R;t.xRange.min=Math.min(Math.min.apply(Math,y),t.xRange.min),t.xRange.max=Math.max(Math.max.apply(Math,y),t.xRange.max),t.yRange.min=Math.min(Math.min.apply(Math,C),t.yRange.min),t.yRange.max=Math.max(Math.max.apply(Math,C),t.yRange.max),t.segment.push(S);var k=e.extend(!0,{},t);k.name="trendSeries",k.width=t.width,k.fill=t.fill,k.type="line";for(var O=0;O<t._points.length;O++)O>=l-1?(t._points[O].YValues.length=1,t._points[O].YValues[0]=t._points[O].y=c[O].mb):t._points[O].YValues[0]=t._points[O].y=null;k.points=e.extend(!0,[],t._points),y=i._getXValues(k.points);for(var D=[],u=l;u<k.points.length;u++)D.push(k.points[u].y);var C=D;t.xRange.min=Math.min(Math.min.apply(Math,y),t.xRange.min),t.xRange.max=Math.max(Math.max.apply(Math,y),t.xRange.max),t.yRange.min=Math.min(Math.min.apply(Math,C),t.yRange.min),t.yRange.max=Math.max(Math.max.apply(Math,C),t.yRange.max),t.segment.push(k),this.calculateIndicatorRange(i,t)}}}),ej.indicatorTypes.bollingerband=ej.ejbollingerBand,ej.ejATR=t(ej.EjIndicatorRender,{calculateSegment:function(t,i){this.chartObj=i,t.segment=[],t.xRange={},t.yRange={};var s,a,r,n=[];s=a=r=0;var o,l,d=0,h=t.period;if(!(h<=0||h>t._points.length)){for(var c=0;c<h;c++)s=t._points[c].high-t._points[c].low,c>0&&(a=Math.abs(t._points[c].high-t._points[c-1].close),r=Math.abs(t._points[c].low-t._points[c-1].close)),o=Math.max(s,a,r),d+=o,l=d/h,n[c]={X:t._points[c].X,YValues:l};for(var c=h;c<t._points.length;++c)s=t._points[c].high-t._points[c].low,a=Math.abs(t._points[c].high-t._points[c-1].close),r=Math.abs(t._points[c].low-t._points[c-1].close),o=Math.max(s,a,r),l=(n[c-1].YValues*(h-1)+o)/h,n[c]={X:t._points[c].X,YValues:l};var u=e.extend(!0,{},t);u.name="trendSeries",u.width=t.width,u.fill=t.fill,u.type="line";for(var p=0;p<t._points.length;p++)p>=h-1?(t._points[p].YValues.length=1,t._points[p].YValues[0]=t._points[p].y=n[p].YValues):t._points[p].YValues[0]=t._points[p].y=null;u.points=e.extend(!0,[],t._points);for(var m=i._getXValues(u.points),g=[],c=h;c<u.points.length;c++)g.push(u.points[c].y);t.xRange.min=Math.min.apply(Math,m),t.xRange.max=Math.max.apply(Math,m),t.yRange.min=Math.min.apply(Math,g),t.yRange.max=Math.max.apply(Math,g),t.segment.push(u),this.calculateIndicatorRange(i,t)}}}),ej.indicatorTypes.atr=ej.ejATR,ej.ejaccumulationDistribution=t(ej.EjIndicatorRender,{calculateSegment:function(t,i){this.chartObj=i,t.segment=[],t.xRange={},t.yRange={};for(var s=[],a=0,r=0;r<t._points.length;r++){var n=t._points[r].close,o=(n-t._points[r].low-(t._points[r].high-n))/(t._points[r].high-t._points[r].low);a+=(isNaN(o)?0:o)*t._points[r].volume,s[r]=a}var l=e.extend(!0,{},t);l.name="trendseries",l.fill=t.fill,l.width=t.width,l.type="line";for(var d=0;d<t._points.length;d++)t._points[d].YValues[0]=t._points[d].y=s[d];l.points=e.extend(!0,[],t._points);var h=i._getXValues(l.points),c=i._getYValues(l.points);t.xRange.min=Math.min.apply(Math,h),t.xRange.max=Math.max.apply(Math,h),t.yRange.min=Math.min.apply(Math,c),t.yRange.max=Math.max.apply(Math,c),t.segment.push(l),this.calculateIndicatorRange(i,t)}}),ej.indicatorTypes.accumulationdistribution=ej.ejaccumulationDistribution,ej.ejTMA=t(ej.EjIndicatorRender,{calculateSegment:function(t,i){this.chartObj=i,t.segment=[],t.xRange={},t.yRange={};var s=e.extend(!0,{},t);s.name="trendSeries",s.width=t.width,s.fill=t.fill,s.type="line";var a,r=[],n=[],o=[],l=[],d=[],h=0,c=t._points.length,u=t.period;if(!(u<1)&&u<c){for(var p=0;p<c;p++)r.push(t._points[p].close);for(var m=r.length;m>=u;){h=0;for(var g=0;g<u;g++)h+=r[g];h/=u,n.push(parseFloat(h.toFixed(2))),r.splice(0,1),m=r.length}for(var f=0;f<c;f++)if(f<u-1){h=0;for(var g=0;g<f+1;g++)h+=t._points[g].close;h/=f+1,l[f]=parseFloat(h.toFixed(2))}else l[f]=n[f-(u-1)];for(var _=l.length;_>=u;){a=0;for(var g=0;g<u;g++)a+=l[g];a/=u,o.push(a),l.splice(0,1),_=l.length}for(var f=0;f<c;f++)t._points[f].YValues[0]=t._points[f].y=f<u-1?null:o[f-(u-1)];s.points=e.extend(!0,[],t._points);for(var v=i._getXValues(s.points),p=u-1,g=0;p<s.points.length;p++,g++)d[g]=s.points[p].y;t.xRange.min=Math.min.apply(Math,v),t.xRange.max=Math.max.apply(Math,v),t.yRange.min=Math.min.apply(Math,d),t.yRange.max=Math.max.apply(Math,d),t.segment.push(s),this.calculateIndicatorRange(i,t)}}}),ej.indicatorTypes.tma=ej.ejTMA,ej.ejMomentum=t(ej.EjIndicatorRender,{calculateSegment:function(t,i){this.chartObj=i,t.segment=[],t.xRange={},t.yRange={};var s=e.extend(!0,{},t);s.name="upperseries",s.fill=t.upperLine.fill,s.width=t.upperLine.width,s.type="line";var a=t.period,r=t._points.length;if(a>0&&a<r-1){for(var n=0;n<r;n++)t._points[n].YValues.length=1,t._points[n].YValues[0]=t._points[n].y=100;s.points=e.extend(!0,[],t._points);var o=i._getXValues(s.points),l=i._getYValues(s.points);t.xRange.min=Math.min.apply(Math,o),t.xRange.max=Math.max.apply(Math,o),t.yRange.min=Math.min.apply(Math,l),t.yRange.max=Math.max.apply(Math,l),t.segment.push(s);var d=e.extend(!0,{},t);d.name="trendSeries",d.width=t.width,d.fill=t.fill,d.type="line";for(var h=t.period,c=0;c<t._points.length;++c){var u=t._points;c<h||(t._points[c].YValues[0]=t._points[c].y=u[c].close/u[c-h].close*100)}for(var n=0;n<h&&n<t._points.length;n++)t._points[n].YValues[0]=t._points[n].y=null;d.points=e.extend(!0,[],t._points),o=i._getXValues(d.points);for(var p=[],c=h,m=0;c<d.points.length;c++,m++)p[m]=d.points[c].y;t.xRange.min=Math.min(Math.min.apply(Math,o),t.xRange.min),t.xRange.max=Math.max(Math.max.apply(Math,o),t.xRange.max),t.yRange.min=Math.min(Math.min.apply(Math,p),t.yRange.min),t.yRange.max=Math.max(Math.max.apply(Math,p),t.yRange.max),t.segment.push(d),this.calculateIndicatorRange(i,t)}}}),ej.indicatorTypes.momentum=ej.ejMomentum,ej.EjSeriesRender.prototype={getOrigin:function(e,t,i){if(i.axes[t.xAxis.name]._validCross){var s=e.chartObj._getCrossAxis(e.chartObj.model._axes,!0,t.xAxis.crossesInAxis);if(e.chartObj.model.requireInvertedAxes?t.xAxis.name:t.yAxis.name===s.name)return t.xAxis._crossValue}return"splinerangearea"==t.type.toLowerCase()?Math.max(t.points[0].YValues[1],0):Math.max(t.yAxis.visibleRange.min,0)},setLineSeriesStyle:function(t){var i,s=e.inArray(t,this.chartObj.model._visibleSeries),a=this.chartObj.model.seriesColors[s];return i=t.isTransposed?this.chartObj.svgRenderer.createGradientElement(this.getSeriesName(t)+s,a,100,0,0,0,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.createGradientElement(this.getSeriesName(t)+s,a,0,0,0,100,this.chartObj.gSeriesEle),{SeriesInterior:i,SeriesBorder:this.chartObj.model.seriesBorderColors[s]}},getSeriesName:function(e){return e.name?e.name.replace(/\s/g,""):"series"},drawAreaPath:function(t,i,s,a){var r=this.chartObj.model.requireInvertedAxes,n=e.inArray(t,this.chartObj.model._visibleSeries),o=null,l=this.chartObj.model.AreaType,d=t.border;if("cartesianaxes"==l){var h=ej.EjSvgRender.utils._getTransform(t.xAxis,t.yAxis,r);o="translate("+h.x+","+h.y+")"}var c={id:this.chartObj.svgObject.id+"_SeriesGroup_"+n,transform:o};if(this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(c),""!=s){var u={id:this.chartObj.svgObject.id+"_Series"+n,fill:i.SeriesInterior,"fill-opacity":t.opacity,"stroke-width":d.width,stroke:d.color,"stroke-dasharray":d.dashArray,"stroke-linecap":t.lineCap,"stroke-linejoin":t.lineJoin,d:s};this.chartObj.dragPoint?(u.id=this.chartObj.svgObject.id+"_PreviewSeries"+n,u["fill-opacity"]=.6,this.chartObj.model.enableCanvasRendering?this.chartObj.svgRenderer.drawPath(u,this.chartObj.canvasElement,a):this.chartObj.svgRenderer.drawPath(u,this.chartObj.gPreviewSeriesGroupEle,a)):this.chartObj.svgRenderer.drawPath(u,this.gSeriesGroupEle,a)}},setAreaSeriesStyle:function(t){var i,s=e.inArray(t,this.chartObj.model._visibleSeries),a=this.chartObj.model.seriesColors[s];return i=t.isTransposed?this.chartObj.svgRenderer.createGradientElement(this.getSeriesName(t)+s,a,100,0,0,0,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.createGradientElement(this.getSeriesName(t)+s,a,0,0,0,100,this.chartObj.gSeriesEle),{SeriesInterior:i}},naturalSpline:function(e,t,i){var s=e.length,a=[],r=[],n=[],o=[],l=[],d=ej.util.isNullOrUndefined(t.cardinalSplineTension)?.5:t.cardinalSplineTension<0?0:t.cardinalSplineTension>1?1:t.cardinalSplineTension,h="splinerangearea"==t.type.toLowerCase()?i:0;if("monotonic"==t.splineType){for(var c=0;c<s-1;c++)a[c]=e[c+1].xValue-e[c].xValue,r[c]=e[c+1].YValues[h]-e[c].YValues[h],n[c]=r[c]/a[c];var u,p=n.length;o[0]=n[0],o[s-1]=n[p-1];for(var m=0;m<a.length;m++)p>m+1&&(n[m]*n[m+1]<=0?o[m+1]=0:(u=a[m]+a[m+1],o[m+1]=3*u/((u+a[m+1])/n[m]+(u+a[m])/n[m+1])))}else if("cardinal"==t.splineType)for(var c=0;c<s;c++)o[c]=0==c?s>2?d*(e[c+2].xValue-e[c].xValue):0:c==s-1?s>2?d*(e[s-1].xValue-e[s-3].xValue):0:d*(e[c+1].xValue-e[c-1].xValue);else{if("clamped"==t.splineType){var g=(e[1].xValue-e[0].xValue)/(e[1].YValues[h]-e[0].YValues[h]),f=(e[s-1].xValue-e[s-2].xValue)/(e[s-1].YValues[h]-e[s-2].YValues[h]);o[0]=3*(e[1].YValues[h]-e[0].YValues[h])/(e[1].xValue-e[0].xValue)-3*g,l[0]=.5,o[e.length-1]=3*f-3*(e[e.length-1].YValues[h]-e[e.length-2].YValues[h])/(e[e.length-1].xValue-e[e.length-2].xValue),o[0]="Infinity"==Math.abs(o[0])?0:o[0],o[e.length-1]="Infinity"==Math.abs(o[e.length-1])?0:o[e.length-1]}else o[0]=l[0]=0,o[e.length-1]=0;for(var c=1;c<s-1;c++){var _=e[c].xValue-e[c-1].xValue,v=e[c+1].xValue-e[c-1].xValue,b=e[c+1].xValue-e[c].xValue,x=e[c+1].YValues[h]-e[c].YValues[h]||null,y=e[c].YValues[h]-e[c-1].YValues[h]||null;if(0==_||0==v||0==b)o[c]=0,l[c]=0;else{var w=1/(_*o[c-1]+2*v);o[c]=-w*b,l[c]=w*(6*(x/b-y/_)-_*l[c-1])}}for(var C=s-2;C>=0;C--)o[C]=o[C]*o[C+1]+l[C]}return o},getDaysInMonth:function(e,t){return new Date(t,e+1,0).getDate()},getBezierControlPoints:function(t,i,s,a,r,n,o){var l,d,h,c,u=new Date(t.xValue),p=o.chartObj.model.hAxes.length,m=e.inArray(n,o.chartObj.model._visibleSeries),g=m!=p&&m<p?m:0;if("cardinal"==n.splineType){if(ej.util.isNullOrUndefined(o.chartObj.model.hAxes[g].intervalType)||"years"==o.chartObj.model.hAxes[g].intervalType.toLowerCase()||"auto"==o.chartObj.model.hAxes[g].intervalType.toLowerCase()){var f=new Date(u.getFullYear()),_=f%4!=0||f%100!=0&&f%400==0?365:366;h=s/(864e5*_),c=a/(864e5*_)}else if("months"==o.chartObj.model.hAxes[g].intervalType.toLowerCase()){var v=new Date(u),f=v.getFullYear(),b=v.getMonth(),x=ej.EjSeriesRender.prototype.getDaysInMonth(b,f);h=s/(864e5*x),c=a/(864e5*x)}else h=s,c=a;l={xValue:t.xValue+s/3,YValues:[t.YValues[r]+h/3]},d={xValue:i.xValue-a/3,YValues:[i.YValues[r]-c/3]}}else if("monotonic"==n.splineType){var y=(i.xValue-t.xValue)/3;l={xValue:t.xValue+y,YValues:[t.YValues[r]+s*y]},d={xValue:i.xValue-y,YValues:[i.YValues[r]-a*y]}}else{var w=i.xValue-t.xValue;w*=w;var C=2*parseFloat(t.xValue)+parseFloat(i.xValue),S=parseFloat(t.xValue)+2*parseFloat(i.xValue),T=2*t.YValues[r]+i.YValues[r],R=t.YValues[r]+2*i.YValues[r],k=1/3*(T-1/3*w*(s+.5*a)),O=1/3*(R-1/3*w*(.5*s+a));l={xValue:C*(1/3),YValues:[k]},d={xValue:S*(1/3),YValues:[O]}}return{controlPoint1:l,controlPoint2:d}},improveChartPerformance:function(e){if(this.chartObj&&this.chartObj.chartExtensions)return r=this.chartObj.chartExtensions.chartDataOptimizer.trimSeriesForChartBounds(e,this.chartObj);for(var t,i,s,a=[],r=e.pointCollection&&e.dragPoint?e.pointCollection:e.points,n=this.chartObj.model.m_AreaBounds,o=0,l=e.xAxis.visibleRange.delta/n.Width,d=e.yAxis.visibleRange.delta/n.Height,h=r[0]&&r[0].xValue>l?0:l,c=r[0]&&r[0].y>d?0:d,u=0,p=0,m=r.length,g=0,f=0,_=!0,v=0,b=m>0&&r[0].xValue,x=0;x<m;x++)t=r[x],u=t.xValue,p=t.YValues[0],t.fill&&(e.pointFill=!0),_&&u!=b&&(_=b<u,b=u),(t.isEmpty||null==u||null==p||u!==u||p!==p||isNaN(u)||isNaN(p))&&(t.isEmpty=!0),null==u&&(t.xValue=e.xAxis.visibleRange.min),null==p&&(t.YValues[0]=e.yAxis.visibleRange.min),t.marker&&t.marker.visible&&g++,t.marker&&t.marker.dataLabel&&t.marker.dataLabel.visible&&f++,t.isEmpty&&o++,i=u-h,s=p-c,(i>=l||-i>=l||s>=d||-s>=d)&&(t.visible=!t.isEmpty||(t.visible||!1),a[v++]=t,u===u&&(h=u),p===p&&(c=p));return _&&(e._sorted=_),e._pointMarker=g,e._dataLabels=f,0==o&&e.marker&&!e.marker.dataLabel.visible?a:this._calculateEmptyPoints(e,a)},_isVisiblePoints:function(e){for(var t,i,s=e.pointCollection&&e.dragPoint?e.pointCollection:e.points,a=ej.util.isNullOrUndefined,r=s.length,n=0;n<r;n++)i=!a(s[n].isEmpty)&&s[n].isEmpty,s[n].visible=!!a(s[n].visible)||s[n].visible,a(s[n].xValue)?(s[n].isEmpty=!0,s[n].visible=!1,s[n].xValue=e.xAxis?e.xAxis.visibleRange.min:null):s[n].isEmpty=i,"object"!=typeof s[n].YValues[0]&&isNaN(s[n].YValues[0])||null==s[n].YValues[0]||"undefined"==s[n].YValues[0]||!e.isIndicator&&e._hiloTypes&&(isNaN(s[n].YValues[1])||void 0==s[n].YValues[1]||null==s[n].YValues[1])?(s[n].isEmpty=!0,s[n].visible=!1):(s[n].isEmpty=s[n].isEmpty,s[n].visible=s[n].isEmpty?!s[n].isEmpty:s[n].visible),a(s[n].x)||"date"==jQuery.type(s[n].xValue)&&(s[n].xValue=s[n].xValue.getTime());return t=e.emptyPointSettings?this._calculateEmptyPoints(e,s):s,"waterfall"==e.type.toLowerCase()&&this.chartObj.calculateWaterfallSeriesPoints(t),e._visiblePoints=t,t},_calculateEmptyPoints:function(t,i,s){var a,r,n,o=t.emptyPointSettings,l=o.style,d=l.color,h=ej.util.isNullOrUndefined,c=l.border.color,u=l.border.width,p=o.displayMode.toLowerCase(),m=o.visible,g=i.length,f=[];a=e.extend(!0,{},i,a);var _=t.type.toLowerCase();if(a.length=i.length,p="boxandwhisker"==_?"gap":p,m)if("gap"!=p)for(var v=0;v<g;v++)if(a[v].actualIndex=h(s)?v:s.model._isPieOfPie?a[v].actualIndex:v,r=a[v],!r.isEmpty||h(r.x)&&"string"!=t._xAxisValueType)h(a[v].x)&&"string"!=t._xAxisValueType||f.push(r);else{switch(""!=d&&(r.fill=d),""!=c&&(r.border=r.border?r.border:{},r.border.color=c,r.border.width=u),p){case"average":t._hiloTypes?("splinerangearea"==_&&this._setsraPoint(a[v]),
e.each(r.YValues,function(e,t){t=((a[v-1]?a[v-1].YValues[e]:0)+(a[v+1]?a[v+1].isEmpty?0:a[v+1].YValues[e]:0))/2,r.YValues[e]=t,ej.EjSeriesRender.prototype._sethlocPoint(e,r,t)})):(n=((a[v-1]?a[v-1].y:0)+(a[v+1]?a[v+1].isEmpty?0:a[v+1].y:0))/2,r.YValues[0]=n,r.y=n);break;case"zero":if(t._hiloTypes)"splinerangearea"==_&&this._setsraPoint(a[v]),e.each(r.YValues,function(e,t){r.y=0,r.YValues[e]=0,ej.EjSeriesRender.prototype._sethlocPoint(e,r,0)});else{var b=-1!=_.indexOf("stackingspline")?a[v].YValues[0]:0;r.YValues[0]=b,r.y=b}}r.isEmpty=!1,r.visible=!0,f.push(r)}else for(var v=0;v<g;v++)a[v].actualIndex=h(s)?v:s.model._isPieOfPie?a[v].actualIndex:v,"splinerangearea"==_&&this._setsraPoint(a[v]),f[v]=a[v];else for(var v=0;v<g;v++)a[v].actualIndex=v,a[v].visible&&f.push(a[v]);return f},_setsraPoint:function(e){var t=ej.util.isNullOrUndefined;t(e.YValues[0])&&(e.YValues[0]=0),t(e.YValues[1])&&(e.YValues[1]=0)},_sethlocPoint:function(e,t,i){switch(e){case 0:t.high=i;break;case 1:t.low=i;break;case 2:t.open=i;break;case 3:t.close=i}},_calculatePolarAxesSegment:function(t){var i,s,a,r,n,o,l,d,h,c,u,p=t._visiblePoints,m=ej.EjSvgRender.utils._getStringBuilder(),g=e.inArray(t,this.chartObj.model._visibleSeries),f=this.chartObj.model.centerX,_=this.chartObj.model.centerY,v=this._getSeriesPosition(t),b=t.drawType.toLowerCase(),o=(ej.EjSvgRender.utils._getStringBuilder(),this.setLineSeriesStyle(t),null),l=null,n=-1,x=null,y=null,d=null,w=null,C=null,S=this.chartObj;if(i=e.extend(!0,{},t.marker.size,i),i.width<=10&&(i.width=i.height=1.5*this.chartObj.model.elementSpacing),"column"==t.drawType.toLowerCase()||"rangecolumn"==t.drawType.toLowerCase()){var T=0,R={id:this.chartObj.svgObject.id+"_SeriesGroup_"+g};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(R);var s=t.xAxis.visibleRange.interval;t.xAxis.labelPlacement=t.xAxis.labelPlacement?t.xAxis.labelPlacement:"betweenticks";var k,O,D=0;("category"!=t.xAxis._valueType||"category"==t.xAxis._valueType&&"onticks"==t.xAxis.labelPlacement)&&(D=s/2);var I=t.xAxis.isInversed?0:1;s/=v.all;for(var j=s,L=t._visiblePoints,A=L.length,E=0;E<A;E++){var P=k=L[E].xValue-t.xAxis.visibleRange.min+(s*v.pos-D);P/=this.chartObj.model.sumofYValues,O=L[E];var j=t.xAxis.visibleRange.interval/v.all;O.startAngle=2*Math.PI*P,O.endAngle=2*Math.PI*(P+j/this.chartObj.model.sumofYValues)}L[L.length-1].startAngle||(L[L.length-1].startAngle=L[0].startAngle,L[L.length-1].endAngle=L[0].endAngle)}for(var M=!1,F=0;F<p.length;F++){var N,z;if("scatter"==b)N=ej.EjSvgRender.utils.TransformToVisible(t,p[F].xValue,p[F].y,this.chartObj),this.drawSymbol(g,t,F,N.X,N.Y);else if("line"==t.drawType.toLowerCase())N=ej.EjSvgRender.utils.TransformToVisible(t,p[F].xValue,p[F].y,this.chartObj),F<p.length-1&&p[F+1].visible?(z=ej.EjSvgRender.utils.TransformToVisible(t,p[F+1].xValue,p[F+1].y,this.chartObj),m.append("M "+N.X+" "+N.Y+" L "+z.X+" "+z.Y+" ")):F==p.length-1&&t.isClosed&&(z=ej.EjSvgRender.utils.TransformToVisible(t,p[0].xValue,p[0].y,this.chartObj),m.append("M "+N.X+" "+N.Y+" L "+z.X+" "+z.Y+" "));else if("column"==t.drawType.toLowerCase()){var V,B,H,Y,U,s=t.xAxis.visibleRange.interval,I=t.xAxis.isInversed?0:1,s=s/v.all,W=this.chartObj.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(t.yAxis,p[F].y),X=-.5*Math.PI,G=p[F].startAngle+X,$=p[F].endAngle+X-1e-6;if(t.isStacking){var q=t.stackedValue.StartValues[F],Q=t.stackedValue.EndValues[F];W=q==Q?0:this.chartObj.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(t.yAxis,Q),V=f+W*Math.cos(G),B=_+W*Math.sin(G),H=f+W*Math.cos($),Y=_+W*Math.sin($),T=this.chartObj.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(t.yAxis,0==q&&0!=t.yAxis.visibleRange.min?t.yAxis.visibleRange.min:q);var K=f+T*Math.cos(G),Z=_+T*Math.sin(G),J=f+T*Math.cos($),ee=_+T*Math.sin($);U=this.chartObj.model.isPolar?"M "+V+" "+B+" A "+W+" "+W+" 0 0 "+I+" "+H+" "+Y+" L "+J+" "+ee+" A "+T+" "+T+" 1 0 0 "+K+" "+Z+" z":"M "+V+" "+B+" L "+H+" "+Y+" L "+J+" "+ee+" L "+K+" "+Z+" z"}else V=f+W*Math.cos(G),B=_+W*Math.sin(G),H=f+W*Math.cos($),Y=_+W*Math.sin($),U=this.chartObj.model.isPolar?"M "+V+" "+B+" A "+W+" "+W+" 0 0 "+I+" "+H+" "+Y+" L "+f+" "+_+" z":"M "+V+" "+B+" L "+H+" "+Y+" L "+f+" "+_+" z";var te=this.chartObj.svgRenderer.createGradientElement(this.getSeriesName(t)+"_"+g+F,this.chartObj.model.seriesColors[g],0,0,0,100,this.chartObj.gSeriesEle),ie=t.border,se={id:this.chartObj.svgObject.id+"_Series"+g+"_Point"+F,fill:te,stroke:ie.color,"stroke-dasharray":ie.dashArray,"stroke-width":ie.width,opacity:t.opacity,pointIndex:F,d:U,start:p[F].startAngle-1.57,end:p[F].endAngle-1.57,radius:W,innerR:T};if(this.chartObj.model.isPolar&&(se.x=f,se.y=_,he={PointIndex:F,StartAngle:p[F].startAngle,EndAngle:p[F].endAngle,CenterX:f,CenterY:_,Radius:W,DRadius:T}),"radar"==t.type){var ae={x:f,y:_},re={x:V,y:B},ne={x:H,y:Y};he={PointIndex:F,Line1:ae,Line2:re,Line3:ne};var oe=!!T;se.hasStackingInnerRadius=oe}O=t._visiblePoints[F],(!ej.util.isNullOrUndefined(t.marker)&&t.marker.visible||!ej.util.isNullOrUndefined(t.marker)&&t.marker.dataLabel.visible)&&(O.symbolLocation={X:(V+H)/2,Y:(B+Y)/2}),this.chartObj.svgRenderer.drawPath(se,this.gSeriesGroupEle)}else if("spline"==b)L=this.chartObj.dragPoint?t.pointCollection:this._isVisiblePoints(t),N=ej.EjSvgRender.utils.TransformToVisible(t,p[F].xValue,p[F].y,this.chartObj),F<p.length-1&&p[F+1].visible&&(z=ej.EjSvgRender.utils.TransformToVisible(t,p[F+1].xValue,p[F+1].y,this.chartObj),a=this.naturalSpline(p,t),r=n=F,o=L[F],l=L[F+1],d=this.getBezierControlPoints(o,l,a[n],a[r],0,t,this),x=d.controlPoint1,y=d.controlPoint2,w=ej.EjSvgRender.utils.TransformToVisible(t,x.xValue,x.YValues,S),C=ej.EjSvgRender.utils.TransformToVisible(t,y.xValue,y.YValues,S),m.append("M "+N.X+" "+N.Y+" C "+w.X+" "+w.Y+" "+C.X+" "+C.Y+" "+z.X+" "+z.Y+" "),t.isClosed&&F==p.length-1&&null!=N&&(h=ej.EjSvgRender.utils.TransformToVisible(t,p[0].xValue,p[0].y,S),o=L[L.length-1],l=L[0],r=n=0,d=this.getBezierControlPoints(o,l,a[n],a[r],0,t,this),x=d.controlPoint1,y=d.controlPoint2,w=ej.EjSvgRender.utils.TransformToVisible(t,x.xValue,x.YValues,S),C=ej.EjSvgRender.utils.TransformToVisible(t,y.xValue,y.YValues,S),m.append("M "+z.X+" "+z.Y+" C "+(w.X+S.canvasX)+" "+(w.Y+S.canvasY)+" "+(C.X+S.canvasX)+" "+(C.Y+S.canvasY)+" "+h.X+" "+h.Y+" ")));else if("rangecolumn"==t.drawType.toLowerCase()){var V,B,H,Y,U,s=t.xAxis.visibleRange.interval,I=t.xAxis.isInversed?0:1,s=s/v.all,X=-.5*Math.PI,G=p[F].startAngle+X,$=p[F].endAngle+X-1e-6,q=p[F].YValues[1],Q=p[F].YValues[0];W=q==Q?0:this.chartObj.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(t.yAxis,Q),V=f+W*Math.cos(G),B=_+W*Math.sin(G),H=f+W*Math.cos($),Y=_+W*Math.sin($),T=this.chartObj.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(t.yAxis,0==q&&0!=t.yAxis.visibleRange.min?t.yAxis.visibleRange.min:q);var K=f+T*Math.cos(G),Z=_+T*Math.sin(G),J=f+T*Math.cos($),ee=_+T*Math.sin($);U=this.chartObj.model.isPolar?"M "+V+" "+B+" A "+W+" "+W+" 0 0 "+I+" "+H+" "+Y+" L "+J+" "+ee+" A "+T+" "+T+" 1 0 0 "+K+" "+Z+" z":"M "+V+" "+B+" L "+H+" "+Y+" L "+J+" "+ee+" L "+K+" "+Z+" z";var te=this.chartObj.svgRenderer.createGradientElement(this.getSeriesName(t)+"_"+g+F,this.chartObj.model.seriesColors[g],0,0,0,100,this.chartObj.gSeriesEle),ie=t.border,se={id:this.chartObj.svgObject.id+"_Series"+g+"_Point"+F,fill:te,stroke:ie.color,"stroke-dasharray":ie.dashArray,"stroke-width":ie.width,opacity:t.opacity,pointIndex:F,d:U,start:p[F].startAngle-1.57,end:p[F].endAngle-1.57,radius:W,innerR:T};if(this.chartObj.model.isPolar&&(se.x=f,se.y=_,he={PointIndex:F,StartAngle:p[F].startAngle,EndAngle:p[F].endAngle,CenterX:f,CenterY:_,Radius:W,DRadius:T}),"radar"==t.type){var ae={x:J,y:ee},re={x:V,y:B},ne={x:H,y:Y},le={x:K,y:Z};he={PointIndex:F,Line1:ae,Line2:re,Line3:ne,Line4:le};var oe=!!T;se.hasStackingInnerRadius=oe}O=t._visiblePoints[F],(!ej.util.isNullOrUndefined(t.marker)&&t.marker.visible||!ej.util.isNullOrUndefined(t.marker)||t.marker.dataLabel.visible)&&(O.symbolLocation={X:(V+H)/2,Y:(B+Y)/2},this.chartObj.svgRenderer.drawPath(se,this.gSeriesGroupEle))}else if(t.isStacking){if(q=t.stackedValue.StartValues[F],Q=t.stackedValue.EndValues[F],0==F){N=ej.EjSvgRender.utils.TransformToVisible(t,p[F].xValue,Q,this.chartObj);for(var de=p.length-1;de>=0;de--)q=t.stackedValue.StartValues[de],p[de].y=Math.max(t.yAxis.actualRange.min,q),N=ej.EjSvgRender.utils.TransformToVisible(t,p[de].xValue,p[de].y,this.chartObj),u=de==p.length-1?"M":"L",m.append(u+" "+N.X+" "+N.Y+" ")}F<=p.length-1&&(p[F].y=Q,N=ej.EjSvgRender.utils.TransformToVisible(t,p[F].xValue,p[F].y,this.chartObj),m.append("L "+N.X+" "+N.Y+" "),F==p.length-1&&(t.isClosed?(z=ej.EjSvgRender.utils.TransformToVisible(t,p[0].xValue,t.stackedValue.EndValues[0],this.chartObj),h=ej.EjSvgRender.utils.TransformToVisible(t,p[0].xValue,t.stackedValue.StartValues[0],this.chartObj),c=ej.EjSvgRender.utils.TransformToVisible(t,p[F].xValue,t.stackedValue.StartValues[F],this.chartObj),m.append("L "+z.X+" "+z.Y+"  L "+h.X+" "+h.Y+"  L "+c.X+" "+c.Y+"  L "+h.X+" "+h.Y+" z ")):m.append("L "+f+" "+_+" ")))}else N=ej.EjSvgRender.utils.TransformToVisible(t,p[F].xValue,p[F].y,this.chartObj),0==F||M?m.append("M "+N.X+" "+N.Y+" "):F==p.length-1?t.isClosed?(z=ej.EjSvgRender.utils.TransformToVisible(t,p[0].xValue,p[0].y,this.chartObj),m.append("L "+N.X+" "+N.Y+" z")):m.append("L "+N.X+" "+N.Y+" L "+f+" "+_):p[F+1].visible?m.append("L "+N.X+" "+N.Y+" "):m.append("L "+N.X+" "+N.Y+" L "+f+" "+_+" z"),M=!p[F+1]||!p[F+1].visible;if(!t.regionAdded&&"column"!=t.drawType.toLowerCase()&&"rangecolumn"!=t.drawType.toLowerCase()){var he={X:N.X-i.width/2,Y:N.Y-i.height/2,Width:i.width,Height:i.height};ej.EjSvgRender.utils._addRegion(this.chartObj,he,t,p[F],F)}(!t.regionAdded&&"column"==t.drawType.toLowerCase()&&this.chartObj.model.enableCanvasRendering||"rangecolumn"==t.drawType.toLowerCase()&&this.chartObj.model.enableCanvasRendering)&&ej.EjSvgRender.utils._addRegion(this.chartObj,he,t,null,null)}return(!t.regionAdded&&"column"==t.drawType.toLowerCase()&&!this.chartObj.model.enableCanvasRendering||"rangecolumn"==t.drawType.toLowerCase()&&!this.chartObj.model.enableCanvasRendering)&&ej.EjSvgRender.utils._addRegion(this.chartObj,he,t,null,null),m.toString()},_calculateVisiblePoints:function(t,i){for(var s,a,r,n,o=[],l=[],d=ej.util.isNullOrUndefined,h=d(i)?t.points:i.model._isPieOfPie?t.pieCollections[t.collectionIndex]:t.points,c=h.length,u=0;u<c;u++)n=h[u],d(n._visibility)&&(n._visibility="visible"),n.actualIndex=d(i)?u:i.model._isPieOfPie?n.actualIndex:u,n.visible=!n.isEmpty&&n.visible,d(n.visible)&&(n.visible=!0),n.y<0&&(n.YValues[0]=Math.abs(n.YValues[0])),d(n.x)&&"string"!=t._xAxisValueType&&(n.visible=!1,n.isEmpty=!0),d(n.y)&&(n.visible=!1,n.isEmpty=!0);if(a=e.extend(!0,{},h,a),a.length=c,t.emptyPointSettings.visible){r=this._calculateEmptyPoints(t,a,i),s=r.length;for(var p=0;p<s;p++)r[p].visible?(r[p].visible="hidden"!=r[p]._visibility,l.push(r[p]),r[p].visible&&o.push(r[p])):(r[p].y=((r[p-1]?r[p-1].y:0)+(r[p+1]?r[p+1].y:0))/2,isNaN(r[p].y)&&(r[p].y=((r[p-2]?r[p-2].y:0)+(r[p+2]?r[p+2].y:0))/2),r[p].YValues[0]=r[p].y,d(r[p].x)&&"string"!=t._xAxisValueType||(r[p].gapMode=!0,o.push(r[p])))}else for(var p=0;p<c;p++)l.push(a[p]),a[p].visible&&(a[p].visible="hidden"!=a[p]._visibility,a[p].visible&&o.push(a[p]));if("hidden"==t.visibility)for(var u=0;u<l.length;u++)l[u].visible=!1;return t._visiblePoints=o,t.visiblePoints=l,{visiblePoints:o,legendPoints:l}},getMinMaxValue:function(e,t,i){var s,a=Math.min(e.x,t.x),r=Math.min(e.y,t.y),n=Math.max(e.x,t.x),o=Math.max(e.y,t.y);switch(i){case 0:case 360:s=o;break;case 90:s=a;break;case 180:s=r;break;case 270:s=n}return s},pieDoughnutCenter:function(t){var i=t.startAngle,s=t.endAngle;this.chartObj.model.centerCount++;var a=e.inArray(t,this.chartObj.model._visibleSeries),r=[-630,-540,-450,-360,-270,-180,-90,0,90,180,270,360,450,540,630],n=[],o=this.chartObj.model.circleCenterX[a],l=this.chartObj.model.circleCenterY[a];if(t.startAngle<t.endAngle)for(S=0;S<r.length;S++)r[S]>i&&r[S]<s&&(n[n.length]=r[S]%360<0?r[S]%360+360:r[S]%360);else for(S=0;S<r.length;S++)r[S]<i&&r[S]>s&&(n[n.length]=r[S]%360<0?r[S]%360+360:r[S]%360);if(1==this.chartObj.model.centerCount){var d=this.chartObj.model.circularRadius[a],h=2*Math.PI*(i-90)/360,c=2*Math.PI*(s-90)/360,u={x:this.chartObj.model.circleCenterX[a],y:this.chartObj.model.circleCenterY[a]},p={x:this.chartObj.model.circleCenterX[a]+d*Math.cos(h),y:this.chartObj.model.circleCenterY[a]+d*Math.sin(h)},m={x:this.chartObj.model.circleCenterX[a]+d*Math.cos(c),y:this.chartObj.model.circleCenterY[a]+d*Math.sin(c)};switch(n.length){case 0:var g=Math.abs(u.x-p.x)>Math.abs(u.x-m.x)?p.x:m.x,f=Math.abs(u.y-p.y)>Math.abs(u.y-m.y)?p.y:m.y,_={x:(u.x+g)/2,y:(u.y+f)/2};this.chartObj.model.circleCenterX[a]=this.chartObj.model.circleCenterX[a]+(this.chartObj.model.circleCenterX[a]-_.x),this.chartObj.model.circleCenterY[a]=this.chartObj.model.circleCenterY[a]+(this.chartObj.model.circleCenterY[a]-_.y);break;case 1:var v=2*Math.PI*(n[0]-90)/360,b={x:this.chartObj.model.circleCenterX[a]+d*Math.cos(v),y:this.chartObj.model.circleCenterY[a]+d*Math.sin(v)};switch(n[0]){case 0:case 360:x={x:p.x,y:b.y},y={x:m.x,y:u.y};break;case 90:x={x:u.x,y:m.y},y={x:b.x,y:p.y};break;case 180:x={x:m.x,y:u.y},y={x:p.x,y:b.y};break;case 270:x={x:b.x,y:p.y},y={x:u.x,y:m.y}}var _={x:(x.x+y.x)/2,y:(x.y+y.y)/2};this.chartObj.model.circleCenterX[a]=this.chartObj.model.circleCenterX[a]+(this.chartObj.model.circleCenterX[a]-_.x>=d?0:this.chartObj.model.circleCenterX[a]-_.x),this.chartObj.model.circleCenterY[a]=this.chartObj.model.circleCenterY[a]+(this.chartObj.model.circleCenterY[a]-_.y>=d?0:this.chartObj.model.circleCenterY[a]-_.y);break;case 2:var x,y,w=2*Math.PI*(n[0]-90)/360,v=2*Math.PI*(n[1]-90)/360,b={x:this.chartObj.model.circleCenterX[a]+d*Math.cos(v),y:this.chartObj.model.circleCenterY[a]+d*Math.sin(v)},C={x:this.chartObj.model.circleCenterX[a]+d*Math.cos(w),y:this.chartObj.model.circleCenterY[a]+d*Math.sin(w)};x=90==n[0]&&180==n[1]||270==n[0]&&0==n[1]?{x:C.x,y:b.y}:{x:b.x,y:C.y},y=90==n[0]||270==n[0]?{x:this.getMinMaxValue(p,m,n[0]),y:this.getMinMaxValue(p,m,n[1])}:{x:this.getMinMaxValue(p,m,n[1]),y:this.getMinMaxValue(p,m,n[0])};var _={x:Math.abs(x.x-y.x)/2>=d?0:(x.x+y.x)/2,y:Math.abs(x.y-y.y)/2>=d?0:(x.y+y.y)/2};this.chartObj.model.circleCenterX[a]=this.chartObj.model.circleCenterX[a]+(0==_.x?0:this.chartObj.model.circleCenterX[a]-_.x>=d?0:this.chartObj.model.circleCenterX[a]-_.x),this.chartObj.model.circleCenterY[a]=this.chartObj.model.circleCenterY[a]+(0==_.y?0:this.chartObj.model.circleCenterY[a]-_.y>=d?0:this.chartObj.model.circleCenterY[a]-_.y)}}for(var S=0;S<t.points.length;S++)a<this.chartObj.model._visibleSeries.length&&this.chartObj.model.centerCount>1&&this.chartObj.model._visibleSeries[a+1].startAngle==i&&this.chartObj.model._visibleSeries[a+1].endAngle==s&&(this.chartObj.model.circleCenterX[a]=this.chartObj.model.circleCenterX[a+1],this.chartObj.model.circleCenterY[a]=this.chartObj.model.circleCenterY[a+1]),this.chartObj.model.startX[S]=this.chartObj.model.startX[S]-(o-this.chartObj.model.circleCenterX[a]),this.chartObj.model.startY[S]=this.chartObj.model.startY[S]-(l-this.chartObj.model.circleCenterY[a])},_drawEmptyPieOfPie:function(e){var t=-.5*Math.PI,i=Math.PI/180*360+-.5*Math.PI-1e-6,s=e.model.circleCenterX[1],a=e.model.circleCenterY[1],r=e.model.circularRadius[1],n="M "+(s+r*Math.cos(t))+" "+(a+r*Math.sin(t))+" A "+r+" "+r+" 0 1 1 "+(s+r*Math.cos(i))+" "+(a+r*Math.sin(i))+" z",o=e.model.theme.toLowerCase();return{id:e.svgObject.id+"_Series0_EmptyCircle",fill:"none","stroke-width":1.5,stroke:o.indexOf("dark")>=0||o.indexOf("contrast")>=0?" #FFFFFF":"#000000","stroke-dasharray":"",d:n,opacity:1,radius:r,start:-1.57,end:Math.PI/180*360-1.57,cx:s,cy:a}},calculatingSliceAngle:function(t,i){var s,a,r=this.chartObj?this.chartObj:i,n=r.model,o=n.legend,l=e.inArray(t,n._visibleSeries),d=o.position.toLowerCase(),h=n.LegendActualBounds,c=t._visiblePoints,u=c.length,p=0,m=0,g=o.border.width,f=n.border.width,_=n.margin,v=n.elementSpacing,b=0,x=n.title.subTitle.text?n.title.subTitle:"";n.arcData=[],t.rightsidePoints=[],t.leftsidePoints=[],t.labels=[],n.sumofYValues=0,n.midPoint=0;var y=t.type.toLowerCase(),w=t.gapWidth;for(z=0;z<c.length;z++)n.sumofYValues+=c[z].YValues[0];s=null!=t.endAngle&&"pieofpie"!=y?t.endAngle-t.startAngle:360,s=360!=s&&-360!=s?s%360:s,t.startAngle&&"pieofpie"!=y?(t.startAngle=t.startAngle%360,t.endAngle=t.startAngle+s,b=t.startAngle?n.sumofYValues/360*t.startAngle:0,b/=n.sumofYValues,n.itemCurrentXPos=b):t.endAngle=s,o.visible&&"custom"!=d&&("right"==d||"left"==d?p+=h.Width+2*g+v:m+=h.Height+2*g+v);var C=n.title.text&&n.title.visible?n._titleLocation.size.height+n.elementSpacing+(""==x?0:x.text&&x.visible&&x.enableTrim&&("wrap"==x.textOverflow||"wrapandtrim"==x.textOverflow)?n._subTitleLocation.size.height:0):0,S=.1*Math.min(e(r.svgObject).width(),e(r.svgObject).height()),T=e(r.svgObject).width()-(p+_.left+_.right+2*f)-("pieofpie"==y?w:0),R=e(r.svgObject).height()-(m+C+_.top+_.bottom+2*f);if(l=r.model._isPieOfPie?t.collectionIndex:l,"pieofpie"==y){if(T<S){var k=S-T;T=S}w=k?w-k:e(r.svgObject).width()>=w?w:0}var O="pieofpie"==y?0==l?.25:.75:.5;n.circleCenterX[l]=T*O+(1==l&&"pieofpie"==y?w:0)+_.left+(o.visible&&"left"===d?p:0),n.circleCenterY[l]=.5*R+_.top+C+(o.visible&&"top"===d?m:0),ej.util.isNullOrUndefined(r.model.pieGapWidth)||0==r.model.pieGapWidth||(n.circleCenterX[l]=0==l?n.circleCenterX[l]+r.model.pieGapWidth/2:n.circleCenterX[l]-r.model.pieGapWidth/2);var D;t.startAngle="pieofpie"==y?0:t.startAngle,s=t.endAngle-t.startAngle;for(var I=s/180,j=s/4*(Math.PI/180),L=0;L<u;L++)if(a=t._visiblePoints[L],a.visible||a.gapMode){var A="pieofpie"==y?a.actualIndex:L;if(0==L&&0==l&&"pieofpie"==y){var E=2*Math.PI*b,D=I*Math.PI*(a.YValues[0]/n.sumofYValues)+E;D=isNaN(D)?E:D,M=(D+E)/2,a.start=a.startAngle=j-M,a.end=a.endAngle=j+M,a.midAngle=j}else a.startAngle=0==L?2*Math.PI*b:"pieofpie"==y?t.pieCollections[l][L-1].endAngle:D,D=a.endAngle=I*Math.PI*(a.YValues[0]/n.sumofYValues)+a.startAngle,D=a.endAngle=isNaN(D)?a.startAngle:D,a.start=a.startAngle,a.end=a.endAngle,a.midAngle=(a.endAngle+a.startAngle)/2;a.pointIndex=A;var P=-.5*Math.PI;a.radian=a.midAngle%(2*Math.PI),"outsideextended"==t.labelPosition.toLowerCase()&&"pieofpie"!=y&&(a.radian<Math.PI?t.rightsidePoints.push(a):t.leftsidePoints.push(a)),b+=a.YValues[0]/n.sumofYValues;var M=a.midAngle+P;a.actualIndex!=t.explodeIndex&&!t.explodeAll||r.vmlRendering?(n.startX[A]=n.circleCenterX[l],n.startY[A]=n.circleCenterY[l]):(n.startX[A]=n.circleCenterX[l]+Math.cos(M)*t.explodeOffset,n.startY[A]=n.circleCenterY[l]+Math.sin(M)*t.explodeOffset)}if("outsideextended"==t.labelPosition.toLowerCase()&&(t.rightsidePoints=ej.DataManager(t.rightsidePoints,ej.Query().sortBy("radian")).executeLocal(),t.leftsidePoints=ej.DataManager(t.leftsidePoints,ej.Query().sortBy("radian")).executeLocal()),t.marker.dataLabel.template)if("outsideextended"==t.labelPosition.toLowerCase()){for(var F=0;F<t.rightsidePoints.length;F++)ej.EjSvgRender.utils._getSeriesTemplateSize(t.rightsidePoints[F],t.rightsidePoints[F].actualIndex,t,!1,r);for(var N=0;N<t.leftsidePoints.length;N++)ej.EjSvgRender.utils._getSeriesTemplateSize(t.leftsidePoints[N],t.leftsidePoints[N].actualIndex,t,!0,r)}else for(var z=0;z<t._visiblePoints.length;z++)ej.EjSvgRender.utils._getSeriesTemplateSize(t._visiblePoints[z],t._visiblePoints[z].actualIndex,t,!0,r);else ej.EjSvgRender.utils._getSeriesMaxLabel(t);return t.finalSize={width:T,height:R},t.finalSize},_drawHiloPath:function(t,i,s,a,r,n){var o=e.inArray(t,this.chartObj.model._visibleSeries),l={name:t.type,id:this.chartObj.svgObject.id+"_Series"+o+"_Point"+r,fill:"none","stroke-dasharray":t.dashArray,"stroke-width":i.borderWidth,stroke:s,"stroke-linecap":t.lineCap,"stroke-linejoin":t.lineJoin,opacity:t.opacity,d:a};this.chartObj.svgRenderer.drawPath(l,this.gSeriesGroupEle);var d,h,c,u,p=ej.EjSvgRender.utils._getTransform(t.xAxis,t.yAxis,this.chartObj.model.requireInvertedAxes);c=Math.min(n.point2.X,n.point1.X)+p.x-i.borderWidth,u=Math.min(n.point2.Y,n.point1.Y)+p.y,n.point1.Y!=n.point2.Y?(d=i.borderWidth+i.borderWidth/2,h=Math.abs(n.point1.Y-n.point2.Y)):(d=Math.abs(n.point2.X-n.point1.X),h=i.borderWidth+i.borderWidth/2);var m={X:c,Y:u,Width:d,Height:h};ej.EjSvgRender.utils._addRegion(this.chartObj,m,t,null,r)},isIntersec:function(e,t){return!(t.Bottom<e.Top||t.Right<e.Left||t.Top>e.Bottom||t.Left>e.Right)},IntersectWith:function(t,i,s,a,r,n){var o;if((ej.util.isNullOrUndefined(t.model.rightsidebounds[r])||ej.util.isNullOrUndefined(t.model.leftsidebounds[r]))&&(t.model.leftsidebounds[r]=[],t.model.rightsidebounds[r]=[],t.model.leftsidebounds[r].points=[],t.model.rightsidebounds[r].points=[]),"outsideExtended"==a){for(var l=r;l<t.model.bounds.length;l++)if("outsideextended"==t.model._visibleSeries[l].labelPosition.toLowerCase()){if(!ej.util.isNullOrUndefined(t.model.bounds[l].points.left)&&t.model.bounds[l].points.left.length>0)for(var d=t.model.bounds[l].points.left.length,h=d-1;h>=0&&!ej.util.isNullOrUndefined(t.model.bounds[l].points.left[h]);h--)t.model.leftsidebounds[l].points[h]=t.model.bounds[l].points.left[h];if(!ej.util.isNullOrUndefined(t.model.bounds[l].points.right)&&t.model.bounds[l].points.right.length>0)for(var d=t.model.bounds[l].points.right.length,c=0;c<d&&!ej.util.isNullOrUndefined(t.model.bounds[l].points.right[c]);c++)t.model.rightsidebounds[l].points[c]=t.model.bounds[l].points.right[c]}}else if(t.model.bounds[r].points.length>0||r>=0)for(var l=r;l<t.model.bounds.length&&!ej.util.isNullOrUndefined(t.model.bounds[l]);l++)if("outsideextended"!=t.model._visibleSeries[l].labelPosition.toLowerCase())for(var d=t.model.bounds[l].points.length,h=0;h<d&&!ej.util.isNullOrUndefined(t.model.bounds[l].points[h]);h++)t.model.bounds[l].points[h].X<t.model.circleCenterX[r]?-1==e.inArray(t.model.bounds[l].points[h],t.model.leftsidebounds[l].points)&&(t.model.leftsidebounds[l].points[h]=t.model.bounds[l].points[h]):-1==e.inArray(t.model.bounds[l].points[h],t.model.rightsidebounds[l].points)&&(t.model.rightsidebounds[l].points[h]=t.model.bounds[l].points[h]);for(l=r;l<t.model.bounds.length&&!ej.util.isNullOrUndefined(t.model.bounds[l]);l++)if(t.model.leftsidebounds[l].points.length>0&&(o=t.model.leftsidebounds[l].points,o.length>0))for(var h=o.length-1;h>=0;h--){var u=o[h];if(!ej.util.isNullOrUndefined(u)||u==s){if(u.SeriesIndex==s.SeriesIndex&&u.PointIndex==s.PointIndex){if("outside"==i.smartLabelPosition)continue;break}if(this.isIntersec(u,s))return!0;if(s.X<t.model.circleCenterX[r]&&u.X<t.model.circleCenterX[r]&&"none"!=t.model.series[r].marker.dataLabel.shape){var p=Math.abs(u.Y-s.Y);n&&p<=n.height&&u.Bottom>s.Top&&u.Left<s.X&&(s.overlap=!0)}}}for(l=r;l<t.model.bounds.length&&!ej.util.isNullOrUndefined(t.model.bounds[l]);l++)if(o=t.model.rightsidebounds[l].points,o.length>0)for(var h=o.length-1;h>=0;h--){var u=o[h];if(!ej.util.isNullOrUndefined(u)||u==s){if(u.SeriesIndex==s.SeriesIndex&&u.PointIndex==s.PointIndex){if("outside"==i.smartLabelPosition)continue;break}if(this.isIntersec(u,s))return!0;if(s.X>t.model.circleCenterX[r]&&u.X>t.model.circleCenterX[r]&&"none"!=t.model.series[r].marker.dataLabel.shape){var p=Math.abs(u.Y-s.Y);n&&p<=n.height&&u.Bottom>s.Top&&u.X+(u.Right-u.Left)>s.X&&(s.overlap=!0)}}}return!1},_calculateArcData:function(e,t,i,s,a,r){var n,o,a=e.model._isPieOfPie?r:a,l=(s._visiblePoints,i.actualIndex),d=e,h=-.5*Math.PI;"doughnut"==s.type.toLowerCase()&&1==s._visiblePoints.length&&360==Math.abs(s.endAngle-s.startAngle)&&s.startAngle%90!=0?(n=parseFloat((i.startAngle+h).toFixed(3)),o=parseFloat((i.endAngle+h).toFixed(3))-1e-6):(n=i.startAngle+h,o=i.endAngle+h-1e-6);var c=s.endAngle-s.startAngle,u=o-n<Math.PI?0:1,p=(n+o)/2;ej.util.isNullOrUndefined(i.currentMidAngle)&&(i.currentMidAngle=(n+o)/2);var m,g,f,_=c>0?1:0,u=_?o-n<Math.PI?0:1:o-n>-1*Math.PI?0:1,v=d.model.circularRadius[a],b=d.model.innerRadius[a];l!=s.explodeIndex&&!s.explodeAll||d.vmlRendering?(g=d.model.circleCenterX[a],f=d.model.circleCenterY[a]):(g=d.model.circleCenterX[a]+Math.cos(p)*s.explodeOffset,f=d.model.circleCenterY[a]+Math.sin(p)*s.explodeOffset);var x=g+v*Math.cos(n),y=f+v*Math.sin(n),w=g+v*Math.cos(o),C=f+v*Math.sin(o);if("doughnut"==s.type.toLowerCase()){var S=g+b*Math.cos(n),T=f+b*Math.sin(n),R=g+b*Math.cos(o),k=f+b*Math.sin(o),O=_?0:1;n<0&&6==Math.round(i.endAngle-i.startAngle)&&(R-=.01,w-=.01),m="M "+x+" "+y+" A "+v+" "+v+" 0 "+u+" "+_+" "+w+" "+C+" L "+R+" "+k+" A "+b+" "+b+" 1 "+u+" "+O+" "+S+" "+T+" z"}else if((i.endAngle-i.startAngle).toFixed(4)==(2*Math.PI).toFixed(4)){var D=g,I=f;m="M "+x+" "+y+" A "+v+" "+v+" 0 "+u+" "+_+" "+w+" "+C}else m="M "+x+" "+y+" A "+v+" "+v+" 0 "+u+" "+_+" "+w+" "+C+" L "+g+" "+f+" z";return{Direction:m,centerX:D,centerY:I}},getXCordinate:function(e,t,i){return e+t*Math.cos(i)},getYCordinate:function(e,t,i){return e+t*Math.sin(i)},getDoubleRange:function(e,t){var i,s;return e>t?(i=t,s=e):(i=e,s=t),{Start:i,End:s,Delta:s-i,Median:(i+s)/2,IsEmpty:isNaN(i)||isNaN(s)}},isDependentSeries:function(e){var t=e.type.toLowerCase(),i=this.chartObj.model.requireInvertedAxes;return!i||i&&e.isTransposed?-1!=t.indexOf("bar")&&!e._isTransposed||-1!=t.indexOf("column")||-1!=t.indexOf("waterfall")||-1!=t.indexOf("hilo")||-1!=t.indexOf("candle")||-1!=t.indexOf("boxandwhisker"):-1!=t.indexOf("bar")},getPointXYOrgin:function(e,t,i,s){var a,r,n=s.model.requireInvertedAxes;return i.isTransposed&&n||i._isTransposed?(a=(1-ej.EjSvgRender.utils._valueToCoefficient(i.xAxis,e))*i.xAxis.height,r=ej.EjSvgRender.utils._valueToCoefficient(i.yAxis,t)*i.yAxis.width,{X:r,Y:a}):(a=ej.EjSvgRender.utils._valueToCoefficient(i.xAxis,e)*i.xAxis.width,r=(1-ej.EjSvgRender.utils._valueToCoefficient(i.yAxis,t))*i.yAxis.height,{X:a,Y:r})},getRectangle:function(e,t,i,s,a,r){var n=this.getPointXYOrgin(e,t,a,r),o=this.getPointXYOrgin(i,s,a,r);return ej.EjSvgRender.utils._correctRect(n.X,n.Y,o.X,o.Y)},calculateMean:function(e,t,i){var s,a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b=0,x=0,y=[],w=0;e.length>1&&e.sort(function(e,t){return e-t});for(var C=0;C<e.length;C++)b+=e[C];x=b/e.length,x=parseInt(x.toFixed(2)),y[w]=x,w++,"normal"==t.boxPlotMode.toLowerCase()?(s=e.length%2==0?e.slice(0,e.length/2):e.slice(0,Math.floor(e.length/2)),n=Math.floor(s.length/2),d=s.length%2==0?(s[n-1]+s[n])/2:s[n],d=e.length<=3?e[0]:d,y[w]=d,w++,a=e.length%2==0?e.slice(e.length/2,e.length):e.slice(Math.ceil(e.length/2),e.length),o=Math.floor(a.length/2),h=a.length%2==0?(a[o-1]+a[o])/2:a[o],h=e.length<=3?e[e.length-1]:h,y[w]=h,w++):"exclusive"!=t.boxPlotMode.toLowerCase()&&"inclusive"!=t.boxPlotMode.toLowerCase()||(c="exclusive"==t.boxPlotMode.toLowerCase()?(e.length+1)/4:(e.length-1)/4,u=Math.floor(c),p=c-u,_="exclusive"==t.boxPlotMode.toLowerCase()?u-1:u,s=(1-p)*e[_]+p*e[_+1],s=e.length<=3?e[0]:s,d=s,y[w]=d,w++,m="exclusive"==t.boxPlotMode.toLowerCase()?3*(e.length+1)/4:3*(e.length-1)/4,g=Math.floor(m),f=m-g,v="exclusive"==t.boxPlotMode.toLowerCase()?g-1:g,a=(1-f)*e[v]+f*e[v+1],a=e.length<=3?e[e.length-1]:a,h=a,y[w]=h,w++),l=Math.floor(e.length/2),r=e.length%2==0?(e[l-1]+e[l])/2:e[l],y[w]=r,w++;for(var S=h-d,T=h+1.5*S,R=d-1.5*S,k=e[e.length-1],O=e[0],D=[],I=0,j=0,L=0;L<e.length;L++)T<e[L]&&(I++,D[j]=e[L],j++,k=e[L-I]),R>e[L]&&(D[j]=e[L],j++,O=e[L+1]);y[w]=O,w++,y[w]=k,w++;var A={Minimum:O,LowerQuartile:d,midvalue:r,UpperQuartile:h,Maximum:k,boxAverage:x,outliers:D};return t._visiblePoints[i].boxPlotValues=A,t._visiblePoints[i].boxPlotValues.quartileValues=y,{Minimum:O,LowerQuartile:d,midvalue:r,UpperQuartile:h,Maximum:k,boxAverage:x,outliers:D}},calculateBoxAndWhiskerPath:function(e,t,i,s,a,r,n){a._visiblePoints[n].boxPlotLocation=[],a._visiblePoints[n].dataLabelLocation=[];for(var o,l,d,h,c,u=0,p=this,m=a._isTransposed,g=a.outlierSettings.shape.toLowerCase(),f=(this.chartObj.model.requireInvertedAxes,0);f<a._visiblePoints[n].boxPlotValues.quartileValues.length;f++)l={xValue:r.xValue,YValues:a._visiblePoints[n].boxPlotValues.quartileValues[f]},d=ej.EjSvgRender.utils._getPoint(l,a),a._visiblePoints[n].boxPlotLocation[u]=d,a._visiblePoints[n].boxPlotLocation[u].xValue=l.xValue,a._visiblePoints[n].boxPlotLocation[u].YValues=l.YValues,a._visiblePoints[n].dataLabelLocation[u]=m?{X:d.X,Y:t.Y+t.Height/2+5}:{X:t.X+t.Width/2,Y:d.Y},u++;for(var _=0;_<s.outliers.length&&"none"!=g;_++)h={xValue:r.xValue,YValues:s.outliers[_]},c=ej.EjSvgRender.utils._getPoint(h,a),a._visiblePoints[n].boxPlotLocation[u]=c,a._visiblePoints[n].boxPlotLocation[u].xValue=h.xValue,a._visiblePoints[n].boxPlotLocation[u].YValues=h.YValues,a._visiblePoints[n].boxPlotLocation[u].outlier=!0,m?c.Y=t.Y+t.Height/2:c.X=t.X+t.Width/2,a._visiblePoints[n].dataLabelLocation[u]=m?{X:c.X-a.outlierSettings.size.height,Y:t.Y+t.Height/2+a.outlierSettings.size.width,outlier:!0}:{X:t.X+t.Width/2,Y:c.Y,outlier:!0},u++;if(o=a._visiblePoints[n].boxPlotLocation,a._isTransposed)var v="M "+(p.chartObj.canvasX+o[4].X)+" "+(p.chartObj.canvasY+t.Y)+" L "+(o[4].X+p.chartObj.canvasX)+" "+(t.Height+t.Y+p.chartObj.canvasY)+" M "+(p.chartObj.canvasX+o[4].X)+" "+(p.chartObj.canvasY+t.Y+t.Height/2)+" L "+(p.chartObj.canvasX+o[1].X)+" "+(p.chartObj.canvasY+t.Y+t.Height/2)+"  z",b="M "+(p.chartObj.canvasX+o[5].X)+" "+(p.chartObj.canvasY+t.Y)+" L "+(p.chartObj.canvasX+o[5].X)+" "+(t.Height+t.Y+p.chartObj.canvasY)+" M "+(p.chartObj.canvasX+o[5].X)+" "+(p.chartObj.canvasY+t.Y+t.Height/2)+" L "+(p.chartObj.canvasX+o[2].X)+" "+(p.chartObj.canvasY+t.Y+t.Height/2)+"  z";else var v="M "+(p.chartObj.canvasX+t.X)+" "+(p.chartObj.canvasY+o[4].Y)+" L "+(p.chartObj.canvasX+t.X+t.Width)+" "+(p.chartObj.canvasY+o[4].Y)+" M "+(p.chartObj.canvasX+t.X+t.Width/2)+" "+(p.chartObj.canvasY+o[4].Y)+" L "+(p.chartObj.canvasX+t.X+t.Width/2)+" "+(p.chartObj.canvasY+o[1].Y)+"  z",b="M "+(p.chartObj.canvasX+t.X)+" "+(p.chartObj.canvasY+o[5].Y)+" L "+(p.chartObj.canvasX+t.X+t.Width)+" "+(p.chartObj.canvasY+o[5].Y)+" M "+(p.chartObj.canvasX+t.X+t.Width/2)+" "+(p.chartObj.canvasY+o[5].Y)+" L "+(p.chartObj.canvasX+t.X+t.Width/2)+" "+(p.chartObj.canvasY+o[2].Y)+"  z";return{upperWhisker:b,lowerWhisker:v,mean:a._isTransposed?"M "+(p.chartObj.canvasX+o[0].X-5)+" "+(p.chartObj.canvasY+t.Y+t.Height/2-5)+" L "+(p.chartObj.canvasX+o[0].X+5)+" "+(p.chartObj.canvasY+t.Y+t.Height/2+5)+" M "+(p.chartObj.canvasX+o[0].X+5)+" "+(p.chartObj.canvasY+t.Y+t.Height/2-5)+" L "+(p.chartObj.canvasX+o[0].X-5)+" "+(p.chartObj.canvasY+t.Y+t.Height/2+5)+" z":"M "+(p.chartObj.canvasX+t.X+t.Width/2-5)+" "+(p.chartObj.canvasY+o[0].Y-5)+" L "+(p.chartObj.canvasX+t.X+t.Width/2+5)+" "+(p.chartObj.canvasY+o[0].Y+5)+" M "+(p.chartObj.canvasX+t.X+t.Width/2-5)+" "+(p.chartObj.canvasY+o[0].Y+5)+" L "+(p.chartObj.canvasX+t.X+t.Width/2+5)+" "+(p.chartObj.canvasY+o[0].Y-5)+" z"}},calculateSides:function(e,t){return{x1:e.xValue+t.Start,x2:e.xValue+t.End}},_getSeriesPosition:function(e){if(ej.util.isNullOrUndefined(e.position)||this.chartObj.model.legendCollapsed){for(var t,i,s=0,a=[],r=0;r<this.chartObj.model._visibleSeries.length;r++){var n=this.chartObj.model._visibleSeries[r];("visible"===n.visibility.toLowerCase()&&"column"==n.drawType.toLowerCase()||"rangecolumn"==n.drawType.toLowerCase())&&a.push(n)}for(var o=0;o<a.length;o++){var n=a[o];n._xAxisName==this.chartObj.model._axes[0].name&&n._yAxisName==this.chartObj.model._axes[1].name&&(n.isStacking?(t||(i=s,s++,t=!0),n.position=i):(n.position=s,s++))}for(var l=0;l<a.length;l++)a[l].all=s}return{all:e.all,pos:e.position}},getSideBySidePositions:function(t,i){var s,a,r,n,o,l=this,d=[],h=l.chartObj.model;if(a=r=n=0,o=h._visibleSeries.length,ej.util.isNullOrUndefined(t.position)||h.legendCollapsed||!i.spacingCalculated){var c=h.requireInvertedAxes?h.vAxes:h.hAxes;h.requireInvertedAxes?h.hAxes:h.vAxes;e.each(c,function(e,t){var c=[];for(s=[],r=0;r<o;r++){var u=h._visibleSeries[r];"visible"===u.visibility.toLowerCase()&&l.isDependentSeries(u)&&t.name==u._xAxisName&&c.push(u)}var p=c.length;for(r=0;r<p;r++){var e=h.requireInvertedAxes?c[r].yAxis.columnIndex:c[r].yAxis.rowIndex;s[e]||(s[e]=[],
c[r].yAxis.position=null),s[e].push(c[r])}for(a=0;a<s.length;a++)if(!ej.util.isNullOrUndefined(s[a]))for(s[a].all=0,r=0;r<s[a].length;r++)u=s[a][r],-1!=u.type.toLowerCase().indexOf("stacking")?u.stackingGroup?ej.util.isNullOrUndefined(d[u.stackingGroup])?(s[a].all++,u.position=s[a].all,d[u.stackingGroup]=s[a].all):u.position=d[u.stackingGroup]:ej.util.isNullOrUndefined(u.yAxis.position)||h.legendCollapsed?(s[a].all++,u.position=s[a].all,u.yAxis.position=s[a].all,h.legendCollapsed=!1):u.position=u.yAxis.position:(s[a].all++,u.position=s[a].all);var m=p>0&&c[0].columnWidth;for(n=0;n<p;n++){var e=h.requireInvertedAxes?c[n].yAxis.columnIndex:c[n].yAxis.rowIndex;c[n].all=s[e].all,i.needSpace=i.needSpace||m!=c[n].columnWidth}}),i.needSpace&&this.chartObj.model._sideBySideSeriesPlacement&&this._getColumnSpacing(s,i),i.spacingCalculated=!0}return{all:t.all,pos:t.position}},getSideBySideInfo:function(e,t){ej.util.isNullOrUndefined(e.xAxis.m_minPointsDelta)&&(this.chartObj.currentSeries=e,e.xAxis.m_minPointsDelta=ej.EjSvgRender.utils.getMinPointsDelta(e.xAxis,this.chartObj));var i=e.columnSpacing,s=e.columnWidth,a=this.getSideBySidePositions(e,t),r=a.pos,n=a.all,o=t.needSpace&&this.chartObj.model._sideBySideSeriesPlacement,l=e.xAxis.m_minPointsDelta*(o?1:s),d=o?t[e.name||e._name].loc:(r-1)/n-.5,h=this.getDoubleRange(d,d+(o?s:1)/n);if(!this.chartObj.model._sideBySideSeriesPlacement)return this.getDoubleRange(-l/2,l/2);if(!h.IsEmpty){h=this.getDoubleRange(h.Start*l,h.End*l);var c=i*h.Delta;h=this.getDoubleRange(h.Start+c/2,h.End-c/2)}return h},_getColumnSpacing:function(e,t){var i,s,a,r,n=0,o=0;for(s=e.length;n<s;n++){var l=0,d={};for(i=e[n].length;o<i;o++)-1==(a=e[n][o]).type.toLowerCase().indexOf("stacking")?l+=a.columnWidth/a.all:d[r=a.stackingGroup]={width:Math.max(a.columnWidth,d[r]?d[r].width:0),all:a.all};for(var h in d)l+=d[h].width/d[h].all;var c=(1-l)/2-.5;for(o=0,i=e[n].length;o<i;o++)-1==(a=e[n][o]).type.toLowerCase().indexOf("stacking")?(t[a.name||(a._name="series"+n+o)]={loc:c},c+=a.columnWidth/a.all):null==d[r=a.stackingGroup].loc?(t[a.name||(a._name="series"+n+o)]={loc:c+(d[r].width-a.columnWidth)/2/a.all},d[r].loc=t[a.name||a._name].loc+a.columnWidth/2/a.all,c+=d[r].width/a.all):t[a.name||a._name]={loc:d[r].loc-a.columnWidth/2/a.all}}},_getPoint:function(e,t,i,s,a,r,n){var o=e.xValue,l=e.YValues[0];return o=(o-s.min)/s.delta,l=(l-r.min)/r.delta,{X:(a?1-o:o)*t,Y:(1-(n?1-l:l))*i}},_getLogPoint:function(e,t,i,s,a,r,n,o){var l=e.xValue,d=e.YValues[0];return l="logarithmic"==o.xAxis._valueType.toLowerCase()?(ej.EjSvgRender.utils._logBase(0==l?1:l,o.xAxis.logBase)-s.min)/s.delta:(l-s.min)/s.delta,d="logarithmic"==o.yAxis._valueType.toLowerCase()?(ej.EjSvgRender.utils._logBase(0==d?1:d,o.yAxis.logBase)-r.min)/r.delta:(d-r.min)/r.delta,{X:(a?1-l:l)*t,Y:(1-(n?1-d:d))*i}},_getTransposedPoint:function(e,t,i,s,a,r,n){var o=e.xValue,l=e.YValues[0];return o=(o-s.min)/s.delta,l=(l-r.min)/r.delta,{X:(n?1-l:l)*i,Y:(1-(a?1-o:o))*t}},_getTransposedLogPoint:function(e,t,i,s,a,r,n,o){var l=e.xValue,d=e.YValues[0];return l="logarithmic"==o.xAxis._valueType.toLowerCase()?(ej.EjSvgRender.utils._logBase(0==l?1:l,o.xAxis.logBase)-s.min)/s.delta:(l-s.min)/s.delta,d="logarithmic"==o.yAxis._valueType.toLowerCase()?(ej.EjSvgRender.utils._logBase(0==d?1:d,o.yAxis.logBase)-r.min)/r.delta:(d-r.min)/r.delta,{X:(n?1-d:d)*i,Y:(1-(a?1-l:l))*t}},draw:function(t,i,s){var a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C=ej.EjSvgRender.utils._getStringBuilder(),S=t.canvasX,T=t.canvasY,R=t.model.requireInvertedAxes,k=0,O=t.model.enableCanvasRendering,D=t,I="logarithmic"==i.xAxis._valueType.toLowerCase()||"logarithmic"==i.yAxis._valueType.toLowerCase(),j=i._isTransposed,L=j?i.xAxis.height:i.xAxis.width,A=j?i.yAxis.width:i.yAxis.height,E=i.xAxis.visibleRange,P=i.yAxis.visibleRange,M=i.xAxis.isInversed,F=i.yAxis.isInversed,N=this["_get"+(j?"Transposed":"")+(I?"Log":"")+"Point"];if(this.chartObj=t,w=this.setLineSeriesStyle(i),i._animationType="path",i.sorting&&(i.points=ej.DataManager(i.points,ej.Query().sortBy("xValue")).executeLocal()),i._visiblePoints=void 0,a=this.improveChartPerformance(i),r={min:0,max:a.length},i.pointFill)for(p=e.inArray(i,this.chartObj.model._visibleSeries),f=a.length-1,y=ej.EjSvgRender.utils._getTransform(i.xAxis,i.yAxis,R),S=D.canvasX,T=D.canvasY,_={id:this.chartObj.svgObject.id+"_SeriesGroup_"+p,transform:"translate("+y.x+","+y.y+")"},this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(_),n=0;n<f;n++)x=a[n],m=a[n+1],v||(v=this.chartObj.setStyle(this,i,p,n,void 0,a)),m.visible&&x.visible&&(c=ej.EjSvgRender.utils._getPoint(x,i),u=ej.EjSvgRender.utils._getPoint(m,i),C.append("M "+(c.X+S)+" "+(c.Y+T)+" L "+(u.X+S)+" "+(u.Y+T)+" ")),b=this.chartObj.setStyle(this,i,p,n+1,void 0,a),b.interior==v.interior&&n!=f-1&&m.visible||(o={name:i.type,id:this.chartObj.svgObject.id+"_Series"+p+"_Point"+k++,"stroke-dasharray":v.dashArray,fill:"none","stroke-width":v.width,"stroke-linecap":i.lineCap,"stroke-linejoin":i.lineJoin,stroke:v.interior,opacity:v.opacity,d:C.toString()},this.chartObj.svgRenderer.drawPath(o,this.gSeriesGroupEle),C=ej.EjSvgRender.utils._getStringBuilder(),v=b);else{O&&(g=t.svgRenderer.ctx,g.save(),g.beginPath(),"cartesianaxes"==t.model.AreaType&&(y=ej.EjSvgRender.utils._getTransform(i.xAxis,i.yAxis,R),y="translate("+y.x+","+y.y+")"),b={"stroke-dasharray":i.dashArray,"stroke-width":i.width,stroke:w.SeriesInterior,"stroke-linecap":i.lineCap,"stroke-linejoin":i.lineJoin,opacity:i.opacity},t.svgRenderer._setLinePathStyle(b,y)),l=null,h=-1;var z,V="M ";for(n=r.min;n<r.max;n++)d=a[n],!1!==d.visible?(null!=l&&a.length>h+1&&(m=a[h+1],c=N(l,L,A,E,M,P,F,i),u=N(m,L,A,E,M,P,F,i),O?(this.chartObj.chartExtensions?(points=this.chartObj.chartExtensions.chartRenderOptimizer.getPointsInCanvasBounds(c,u,this.chartObj.canvasWidth,this.chartObj.canvasHeight),c=points.point1,u=points.point2):z&&(g.lineTo(u.X+S,u.Y+T),z=null),g.moveTo(c.X+S,c.Y+T),g.lineTo(u.X+S,u.Y+T),z=u):(C.append(V+(c.X+S)+" "+(c.Y+T)+" L "+(u.X+S)+" "+(u.Y+T)+" "),V="L ")),l=d,h=n):l=null;O?(g.stroke(),g.restore()):this._drawLinePath(i,w,C.toString())}this.chartObj.dragPoint?this.chartObj.svgRenderer.append(this.chartObj.gPreviewSeriesGroupEle,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle),i._dataLabels>0||i.marker&&1==i.marker.dataLabel.visible&&i.enableSmartLabels?i._visiblePoints=this._isVisiblePoints(i):i._visiblePoints=a},doCircularAnimation:function(t,i,s,a,r){var n=i.type.toLowerCase();if("pie"==n||"doughnut"==n||"pieofpie"==n){var o,l,d=this,h=i.points[0]?i.points[0].startAngle:0,c=t.model._isPieOfPie?i.collectionIndex:0,u=i.emptyPointSettings.visible?i.visiblePoints:i._visiblePoints;r=ej.util.isNullOrUndefined(r)?1200:r,e.each(u,function(s,u){o=u.startAngle,l=u.endAngle,t.model._radius=t.model._isPieOfPie?t.model.circularRadius[c]:t.model.circularRadius[a],u.startAngle=0,u.endAngle=u.startAngle,t.model.Radius=0;var p=e(t.gSeriesEle).find("#"+t.svgObject.id+"_SeriesGroup_"+a)[c].childNodes[s];"pie"==n||"pieofpie"==n?e(p).each(function(){this.StartAngle=h,this.EndAngle=h}).animate({StartAngle:o,EndAngle:l,pieRadius:t.model._radius},{duration:r,queue:!1,step:function(r,n){if("StartAngle"===n.prop.toString()?(u.startAngle=r,u.endAngle=u.startAngle):"pieRadius"==n.prop.toString()&&t.model?t.model.Radius=r:u.endAngle=r,t.model){var o=d._calculateArcData(t,s,u,i,a,c);t.svgRenderer._setAttr(e(p),{d:o.Direction}),t.model.Radius=t.model._radius}},complete:function(){d.circularAnimationComplete(s,t,i)}}):e(p).each(function(){this.StartAngle=h,this.EndAngle=h}).animate({StartAngle:o,EndAngle:l},{duration:r,queue:!1,step:function(r,n){if("StartAngle"===n.prop.toString()?(u.startAngle=r,u.endAngle=u.startAngle):u.endAngle=r,t.model){var o=d._calculateArcData(t,s,u,i,a);t.svgRenderer._setAttr(e(p),{d:o.Direction}),t.model.Radius=t.model._radius}},complete:function(){d.circularAnimationComplete(s,t,i)}})})}},circularAnimationComplete:function(t,i,s){if(!ej.util.isNullOrUndefined(i.model)){var a,r,n,o=e.inArray(s,i.model._visibleSeries);if(i.gSeriesTextEle[o]&&i.svgRenderer._setAttr(e(i.gSeriesEle).find("#"+i.gSeriesTextEle[o].id),{visibility:"visible"}),i.gSymbolGroupEle[o]&&i.svgRenderer._setAttr(e(i.gSeriesEle).find("#"+i.gSymbolGroupEle[o].id),{visibility:"visible"}),i.gDataLabelEle[o]&&i.svgRenderer._setAttr(e(i.gSeriesEle).find("#"+i.gDataLabelEle[o].id),{visibility:"visible"}),s.marker.dataLabel.template)for(n=e(i.element[0].childNodes[0].childNodes),r=0;r<n.length;r++)e(n[r]).css("display","block");i.gConnectorEle[o]&&i.svgRenderer._setAttr(e(i.gSeriesEle).find("#"+i.gConnectorEle[o].id),{visibility:"visible"}),i.gConnectorLinesGroup&&i.svgRenderer._setAttr(e(i.gSeriesEle).find("#"+i.gConnectorLinesGroup.id),{visibility:"visible"}),i.model.AnimationComplete=!0,s.AnimationComplete=!0,a=e.extend({},ej.EjSvgRender.commonChartEventArgs),a.data={series:s},i._trigger("animationComplete",a)}},_doLineSymbol:function(t,i,s,a,r,n,o){if("defs"!=t.tagName){var l,d=parseInt(s*i),h=void 0==this.chartObj?n:this.chartObj,c=ej.EjSvgRender.utils._getBoundingClientRect(t,h,a,r),u=c.x+c.width/2,p=c.y+c.height/2,m=e(t),g=h.svgRenderer._getAttrVal(m,"transform");g=ej.util.isNullOrUndefined(g)?" ":g,h.svgRenderer._setAttr(m,{transform:"scale(0)"}),m.delay(d).animate({scales:1},{duration:o,step:function(e){l=e,h.svgRenderer._setAttr(m,{transform:"translate("+u+" "+p+") scale("+l+") translate("+-u+" "+-p+")"+g})}})}},animateSymbol:function(t,i,s,a,r,n){if("defs"!=t.tagName){var o,l=void 0==this.chartObj?r:this.chartObj,d=ej.EjSvgRender.utils._getBoundingClientRect(t,l,s,a),h=d.x+d.width/2,c=d.y+d.height/2,u=e(t),p=l.svgRenderer._getAttrVal(u,"transform");p=ej.util.isNullOrUndefined(p)?" ":p,u.delay(i).each(function(){this.scale=.5}).animate({scales:1},{duration:n,step:function(e){o=e,l.svgRenderer._setAttr(u,{transform:"translate("+h+" "+c+") scale("+o+") translate("+-h+" "+-c+")"+p})}})}},animateCylinder:function(t,i,s,a,r){if(i.isTransposed&&s){var n=a[0].width.animVal.value;if(t.model.series[0].type.indexOf("bar")>-1)t.svgRenderer._setAttr(e(a),{x:n}),e(a).animate({x:0},r,function(){});else{var o=a[0].height.animVal.value;t.svgRenderer._setAttr(e(a),{y:0}),e(a).animate({y:parseFloat(t.svgRenderer._getAttrVal(a,"y")),height:parseFloat(t.svgRenderer._getAttrVal(a,"height"))},{duration:r,step:function(i){t.svgRenderer._setAttr(e(a),{y:o-i}),t.svgRenderer._setAttr(e(a),{height:i})}})}}else if(t.model.series[0].type.indexOf("bar")>-1)e(a).animate({width:parseFloat(t.svgRenderer._getAttrVal(a,"width"))},{duration:r,step:function(i){t.svgRenderer._setAttr(e(a),{width:i})}});else{var o=a[0].height.animVal.value;t.svgRenderer._setAttr(e(a),{y:o}),e(a).animate({y:0},r,function(){})}},animateRect:function(t,i,s,a,r){var n,o,l,d,h,c,u,p=i.animationType.toLowerCase(),m=ej.EjSvgRender.utils._getBoundingClientRect("smooth"==p?t[0]:t,a,i,s),g=e(t);i.isTransposed&&s||s?(c="smooth"==p?parseFloat(a.svgRenderer._getAttrVal(t,"width")):0,u=!0,"negative"===a.svgRenderer._getAttrVal(g,"plot")?(n=m.x+m.width,o=m.y+m.height):(n=m.x,o=m.y),l=") scale(",d=",1) translate("):(c="smooth"==p?parseFloat(a.svgRenderer._getAttrVal(t,"height")):0,u=!1,"negative"===a.svgRenderer._getAttrVal(g,"plot")?(n=m.x,o=m.y):(n=m.x+m.width,o=m.y+m.height),l=") scale(1,",d=") translate(");var f=Math.abs(ej.EjSvgRender.utils._getPointXY(i.yAxis.visibleRange.min<0?0:i.yAxis.visibleRange.min,i.yAxis.visibleRange,i.yAxis.isInversed)*(u?i.yAxis.width:i.yAxis.height));g.animate({scales:"smooth"==p?c:1},{duration:r,complete:function(){"waterfall"==i.type.toLowerCase()&&e("#"+a.svgObject.id+"_SeriesGroup_waterfallLine_"+i.index).attr("visibility","visible")},step:function(e){h=e,"smooth"==p?(e&&(u?a.svgRenderer._setAttr(g,{width:f+e>=c?c:e}):a.svgRenderer._setAttr(g,{height:e})),u?a.svgRenderer._setAttr(g,{x:f+e>=c?c-e:f}):a.svgRenderer._setAttr(g,{y:c-f-e>=0?c-f-e:0})):a.svgRenderer._setAttr(g,{transform:"translate("+n+" "+o+l+h+d+-n+" "+-o+")"})}})},animateStackingRect:function(t,i,s,a,r){var n,o,l,d,h,c,u,p=e(t),m=ej.EjSvgRender.utils._getBoundingClientRect(t,a,i,s);i.isTransposed&&s||s?(h=ej.EjSvgRender.utils._valueToCoefficient(i.yAxis,0)*i.yAxis.width,n=h,o=m.y,l=") scale(",d=",1) translate("):(c=(1-ej.EjSvgRender.utils._valueToCoefficient(i.yAxis,0))*i.yAxis.height,n=m.x,o=c,l=") scale(1,",d=") translate("),p.animate({scales:1},{duration:r,step:function(e){u=e,a.svgRenderer._setAttr(p,{transform:"translate("+n+" "+o+l+u+d+-n+" "+-o+")"})}})},_doLineAnimation:function(t,i,s){var s=ej.util.isNullOrUndefined(s)?2e3:s,a=t.model.primaryXAxis.isInversed,r=parseFloat(t.svgRenderer._getAttrVal(i,"width"));if(t.model.requireInvertedAxes){var n=parseFloat(t.svgRenderer._getAttrVal(i,"height"));e(i).animate({clipRectHeight:parseFloat(t.svgRenderer._getAttrVal(i,"height"))},{duration:s,step:function(s){t.svgRenderer._setAttr(e(i),{y:n-s}),t.svgRenderer._setAttr(e(i),{height:s})}})}else e(i).animate({clipRectWidth:parseFloat(t.svgRenderer._getAttrVal(i,"width"))},{duration:s,step:function(s){a&&t.svgRenderer._setAttr(e(i),{x:r-s}),t.svgRenderer._setAttr(e(i),{width:s})}})},_drawLinePath:function(t,i,s){var a,r=this.chartObj.model.requireInvertedAxes,n=e.inArray(t,this.chartObj.model._visibleSeries),o=null;"cartesianaxes"==this.chartObj.model.AreaType&&(a=ej.EjSvgRender.utils._getTransform(t.xAxis,t.yAxis,r),o="translate("+a.x+","+a.y+")");var l={id:this.chartObj.svgObject.id+"_SeriesGroup_"+n,transform:o};if(this.chartObj.gSeriesGroupEle=this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(l),""!=s&&-1==s.indexOf("NaN")){var d={id:this.chartObj.svgObject.id+"_Series"+n,fill:"none","stroke-dasharray":t.dashArray,"stroke-width":t.width,stroke:i.SeriesInterior,"stroke-linecap":t.lineCap,"stroke-linejoin":t.lineJoin,opacity:t.opacity,d:s};this.chartObj.dragPoint?(d.id=this.chartObj.svgObject.id+"_PreviewSeries"+n,d.opacity=.6,this.chartObj.model.enableCanvasRendering?this.chartObj.svgRenderer.drawPath(d,this.chartObj.canvasElement,o):this.chartObj.svgRenderer.drawPath(d,this.chartObj.gPreviewSeriesGroupEle)):this.chartObj.svgRenderer.drawPath(d,this.gSeriesGroupEle)}},_applySaturation:function(e,t){var i,s,a;return i=ej.EjSvgRender.prototype.checkColorFormat(t),i||(t=e.colorNameToHex(t)),a=ej.EjSvgRender.prototype.hexToRGB(t),s=Math.round((299*parseInt(a.R)+587*parseInt(a.G)+114*parseInt(a.B))/1e3),s>=128?"black":"white"},drawDataLabel:function(t,i,s,a,r,n,o,l){s.marker=s.marker?s.marker:{};var d,h,c,u,p,m,g,f,_,v=t.yAxis.labelFormat,b=(t.yAxis.valueType,t._visiblePoints[i].boxPlotValues),x="waterfall"==t.type.toLowerCase()&&(s.showIntermediateSum||s.showTotalSum)?s.waterfallSum:s.y;s.text?h=s.text:v?v.indexOf("{value}")>-1?h=v.replace("{value}",x):0==v.indexOf("e")||0==v.indexOf("E")?(d=v.match(/(\d+)/g),d=null==d?6:d>20?20:d,h=x.toExponential(d)):h=ej.format(x,v,this.chartObj.model.locale):h=x;var y,w,C,S=this.chartObj,T=S.model,R=e.inArray(t,T._visibleSeries),k=e.extend(!0,{},t.marker,s.marker),O=k.dataLabel,D=T.m_AreaBounds,I=O.font,j=O.textPosition.toLowerCase(),L=O.textAnchor.toLowerCase(),A=t.type.toLowerCase(),E=T.enableCanvasRendering,P=ej.seriesTypes[A].prototype.isRegion,M=ej.util.isNullOrUndefined(I.size)?"11px":I.size,F=ej.util.isNullOrUndefined(I.fontStyle)?"Normal":I.fontStyle,N=ej.util.isNullOrUndefined(I.fontFamily)?"Segoe UI":I.fontFamily,z={size:M,fontStyle:F,fontFamily:N},V=ej.EjSvgRender.utils._measureText(h,null,z);if(degree=O.angle,padding=10,angle=degree>360?degree-360:degree<-360?degree+360:degree,"middle"==j&&(-90==angle||90==angle)){var B=S.model.chartRegions[n].Region.Bounds;V.width>B.Height&&(j="bottom")}var H=this.textPosition(t,R,s,V,A,a,r,n,i,o,j),Y=e.extend({},ej.EjSvgRender.commonChartEventArgs),U=O.enableContrastColor,W=T.chartArea.background.toLowerCase(),X=T.background.toLowerCase();Y.data={text:h,location:{x:H.x+S.canvasX,y:H.y+S.canvasY},seriesIndex:R,pointIndex:i},!t.isStacking||"area"!=t.drawType||"polar"!=t.type&&"radar"!=t.type||(Y.data.text=t.stackedValue.EndValues[i]-t.stackedValue.StartValues[i]),S._trigger("displayTextRendering",Y);var G=void 0==k.dataLabel.offset.y?k.dataLabel.offset:k.dataLabel.offset.y,$=k.dataLabel.offset.x,V=ej.EjSvgRender.utils._measureText(Y.data.text,null,z);if(Y.data.location.y="bottom"==j?Y.data.location.y+G:Y.data.location.y-G,$&&(Y.data.location.x=Y.data.location.x+$),90!=angle&&-90!=angle||("bottom"==j?(L=-90==angle?"start":"end",Y.data.location.y=Y.data.location.y+padding/2):"top"==j&&("middle"==L||"start"==L?(L=-90==angle?"start":"end",Y.data.location.y=Y.data.location.y+padding):(L="end",Y.data.location.y=Y.data.location.y+2*padding))),!Y.cancel){var q={id:S.svgObject.id+"_SeriesText"+i+R,x:Y.data.location.x,y:Y.data.location.y,fill:I.color,"font-size":I.size,"font-family":I.fontFamily,"font-style":I.fontStyle,"font-weight":I.fontWeight,opacity:I.opacity,"text-anchor":L},Q=O.margin,K=V.width+Q.left+Q.right,Z=V.height+Q.top+Q.bottom,J={X:Y.data.location.x,Y:Y.data.location.y};if(ej.util.isNullOrUndefined(O.template)){y=O.shape?O.shape:"None",e.each(T.symbolShape,function(e){y.toLowerCase()==e.toLowerCase()&&(C=e)});var ee=Y.data.location.x-Q.left/2+Q.right/2,te=Y.data.location.y-Q.top/2-Z/Q.top+Q.bottom/2;if(T.enableCanvasRendering&&degree%360!=0&&(q.y-=V.height/4,q.baseline="middle"),O.showEdgeLabels){c=E?q.x-S.canvasX:q.x,u=E?q.y-S.canvasY:q.y,90!=angle&&-90!=angle||(V.width=[V.height,V.height=V.width][0]),p=V.width,m=V.height;var ie=t._visiblePoints[t._visiblePoints.length-1]==s&&c+p/2>=S.model.m_AreaBounds.Width;(c-p/2<0||c<-p/2)&&ie?(g=c-p/2,q.x=ee=Math.abs(g)+(ie?-10:c+10)):(c+p/2>D.textWidth||c+p/2>D.textWidth+p/2)&&(g=c-p/2,q.x=ee=D.textWidth-p/2-10),u+m/2>D.textHeight||u+m/2>D.textHeight+m/2?(g=u+m/2-D.textHeight,te=u-g-10,q.y=te+5):(u-m/2<0||u<-m/2)&&(g=u-m/2,te+=Math.abs(g)+10,q.y=te+5)}if(t._enableSmartLabels&&(s.dataLabel={textX:q.x,textY:q.y,x:ee,y:te,width:K,height:Z},s.margin={top:Q.top,bottom:Q.bottom}),f="array"==jQuery.type(T.seriesColors[R])?T.seriesColors[R][0].color:T.seriesColors[R],f=s.fill?"array"==jQuery.type(s.fill)?s.fill[0].color:s.fill:f,U&&(w=P&&"top"!=j?f:"transparent"===W&&"transparent"===X?"white":"transparent"!=W?W:X,q.fill=this._applySaturation(S,w)),s.y!=s.low||void 0===s.y&&void 0===s.low)if("boxandwhisker"==A.toLowerCase()&&b.midvalue!=s.y){var se={id:S.svgObject.id+"_SeriesText"+i+R,x:ej.util.isNullOrUndefined(l)?Y.data.location.x:ee,y:ej.util.isNullOrUndefined(l)?Y.data.location.y:te,fill:I.color,"font-size":I.size,"font-family":I.fontFamily,"font-style":I.fontStyle,"font-weight":I.fontWeight,opacity:I.opacity,"text-anchor":L},ae=s.textOptionsBoxValues.length;s.textOptionsBoxValues[ae]=se,0!=angle&&(s.textOptionsBoxValues[ae].angle=angle),s.textOptionsBoxValues[ae].drawText=Y.data.text,s.textOptionsBoxValues[ae].index=i,s.textOptionsBoxValues[ae].xPos=ej.util.isNullOrUndefined(l)?ee:ee-Q.left/2+Q.right/2,s.textOptionsBoxValues[ae].yPos=ej.util.isNullOrUndefined(l)?te:te-Q.top/2-Z/Q.top+Q.bottom/2,s.textOptionsBoxValues[ae].seriesIndex=R,s.textOptionsBoxValues[ae].width="None"==C?V.width:K,s.textOptionsBoxValues[ae].height="None"==C?V.height:Z,s.textOptionsBoxValues[ae].symbolName=C}else s.textOptions=q,0!=angle&&(s.textOptions.angle=angle),s.drawText=Y.data.text,s.index=i,s.xPos=ee,s.yPos=te,s.seriesIndex=R,s.width="None"==C?V.width:K,s.height="None"==C?V.height:Z,90!=angle&&-90!=angle||(s.width=[s.height,s.height=s.width][0]),s.symbolName=C;else s.xPosLow=ee,s.yPosLow=te,s.widthLow="None"==C?V.width:K,s.heightLow="None"==C?V.height:Z,s.textOptionsLow=q,s.textOptionsLow.angle=angle,s.drawTextLow=Y.data.text}else J.X-=S.canvasX,J.Y-=S.canvasY,this.drawLabelTemplate(t,s,i,J,S);if((A.indexOf("column")>-1||A.indexOf("bar")>-1)&&U){var re=S.model.chartRegions[n],ne=o.stackingGroup;if("top"==j&&A.indexOf("stacking")>-1){if(ej.util.isNullOrUndefined(t.stackingGroup)||""==t.stackingGroup)R<T._visibleSeries.length-1?(f="array"==jQuery.type(T.seriesColors[R+1])?T.seriesColors[R+1][0].color:T.seriesColors[R+1],f=s.fill?"array"==jQuery.type(s.fill)?s.fill[0].color:s.fill:f,w=f):w="transparent"===W&&"transparent"===X?"white":"transparent"!=W?W:X;else for(var oe in ne){if(oe==t.stackingGroup&&R<ne[oe].length-1){f="array"==jQuery.type(T.seriesColors[R+1])?T.seriesColors[R+1][0].color:T.seriesColors[R+1],f=s.fill?"array"==jQuery.type(s.fill)?s.fill[0].color:s.fill:f,w=f;break}w="transparent"===W&&"transparent"===X?"white":"transparent"!=W?W:X;break}q.fill=this._applySaturation(S,w)}else _=ej.ejChart.isCollide(re,s,0,U,S),"bottom"!=j&&"middle"!=j||_.state||(w="transparent"===W&&"transparent"===X?"white":"transparent"!=W?W:X,q.fill=this._applySaturation(S,w))}}},updateSmartLabelPosition:function(t,i,s,a,r,n,o,l,d,h){var c,u,p,m,g,f,_=[],v=d,b=v.model,x=b.legend,y=b.LegendActualBounds,w=x.position.toLowerCase(),C=new(ej.seriesTypes[t.type.toLowerCase()]),S="",T="",R=a.connector.connectorX,k=a.connector.connectorY,O=a.midPoint.midX,D=a.midPoint.midY,I=(a.doughnutMidPoint.dMidX,a.doughnutMidPoint.dMidY,n.startX),j=n.startY,L=e.extend(!0,{},t.marker,i.marker),A=L.dataLabel.template?0:4,E=r,P=t.startAngle>t.endAngle?-.01:.01,M=L.dataLabel.connectorLine.type.toLowerCase(),F=t.type.toLowerCase(),m=b._isPieOfPie?b.circularRadius[t.collectionIndex]:b.circularRadius[h],N="pieofpie"==F?"inside":t.labelPosition.toLowerCase();if(ej.util.isNullOrUndefined(b.bounds[h])&&(b.bounds[h]=[],b.bounds[h].points=[],"outsideextended"==N&&(b.bounds[h].points.left=[],b.bounds[h].points.right=[])),"inside"==N&&ej.util.isNullOrUndefined(i.smartLabelPosition)){u=(O+I)/2,p=(D+j)/2,u=(O+u)/2,p=(D+p)/2,ee=i.isIntersected&&b.bounds[h].points[i.index]?b.bounds[h].points[i.index]:O>I?{X:u,Y:p,Left:u,Top:p,Right:u+l.width,Bottom:p+l.height,SeriesIndex:h,PointIndex:s}:{X:u,Y:p,Left:u-l.width,Top:p,Right:u,Bottom:p+l.height,SeriesIndex:h,PointIndex:s};do{if(g=!1,this.IntersectWith(v,i,ee,"inside",h)){f=ee.Left;var z=180*r/Math.PI,V=180*E/Math.PI;V-z>=270||(E+=P,i.isIntersected=!0,ee.Angle=E,O>I?(ee.X=ee.Left=C.getXCordinate(I,m+o,E),ee.Right=ee.X+l.width):(ee.X=ee.Right=C.getXCordinate(I,m+o,E),ee.Left=ee.Right-l.width),ee.Y=ee.Top=C.getYCordinate(j,m+o,E),ee.Bottom=ee.Y+l.height,g=!0)}}while(g);if(O>I&&ee.X<I&&(ee.Right=f,ee.Left=f-l.width),b.bounds[h].points[s]=ee,i.isIntersected&&b.bounds[h].points[s].Angle){u=C.getXCordinate(I,m+o,b.bounds[h].points[s].Angle),p=C.getYCordinate(j,m+o,b.bounds[h].points[s].Angle);var B=C.getXCordinate(I,m+o/3,r),H=C.getYCordinate(j,m+o/3,r);_.push({X:O,Y:D}),_.push({X:B,Y:H}),_.push({X:u,Y:p}),i.isIntersected&&"bezier"==M&&!v.vmlRendering&&(T=C.drawBezierSegment(_,t,s,v,h)),S="M "+O+" "+D+" L "+B+" "+H+" M "+B+" "+H+" L "+u+" "+p}}else if("outside"==N||"outside"==i.smartLabelPosition){ee=O>=I?{X:R,Y:k,Left:R,Top:k,Right:R+l.width,Bottom:k+l.height,SeriesIndex:h,PointIndex:s}:{X:R,Y:k,Left:R-l.width,Top:k,Right:R,Bottom:k+l.height,SeriesIndex:h,PointIndex:s};do{g=!1,this.IntersectWith(v,i,ee,"outside",h,l)&&(f=ee.Left,E+=P,i.isIntersected=!0,O>I?(ee.X=ee.Left=C.getXCordinate(I,m+o,E),ee.Right=ee.X+l.width):(ee.X=ee.Right=C.getXCordinate(I,m+o,E),ee.Left=ee.Right-l.width),ee.Y=ee.Top=C.getYCordinate(j,m+o,E),ee.Bottom=ee.Y+l.height,g=!0)}while(g);O>I&&ee.X<I&&(ee.Right=f,ee.Left=f-l.width),b.bounds[h].points[s]=ee;var B=C.getXCordinate(I,m+o/3,r),H=C.getYCordinate(j,m+o/3,r);_.push({X:O,Y:D}),_.push({X:B,Y:H}),_.push({X:ee.X,Y:ee.Y}),u=ee.X,p=ee.Y,o>0&&(O<I?(c=ee.X-b.elementSpacing,u=c-A):(c=ee.X+b.elementSpacing,u=c+A),_.push({X:c,Y:ee.Y})),"bezier"!=M||v.vmlRendering?S="M "+O+" "+D+" L "+B+" "+H+" M "+B+" "+H+" L "+ee.X+" "+ee.Y+" M "+ee.X+" "+ee.Y+" L "+c+" "+ee.Y:T=C.drawBezierSegment(_,t,s,v,h)}else{var Y=O,U=D;O+=Math.cos(r)*(-m/10),D+=Math.sin(r)*(-m/10);var W=m/4;_.push({X:O,Y:D}),O+=Math.cos(r)*W,D+=Math.sin(r)*W,_.push({X:O,Y:D});var X,G,$=x.visible&&"left"==w?b.margin.left+y.Width:0,q=b.circleCenterX[h];if(O<I){O=(q-m-2*W-t.LeftLabelMaxWidth>0?q-m-2*W+$:t.LeftLabelMaxWidth>Y?Y:t.LeftLabelMaxWidth+$)-l.width/2,X=_[1].X-t.LeftLabelMaxWidth;var Q=q-m-2*W-t.LeftLabelMaxWidth>0?W:t.LeftLabelMaxWidth>Y?0:X>W/2*3?W:X/2;G=+l.width/2}else{var K=x.visible&&"right"==w?b.margin.right+y.Width:0;O=(q+m+2*W+t.RightLabelMaxWidth<e(v.svgObject).width()-K?q+m+2*W-$:q+m+t.RightLabelMaxWidth>e(v.svgObject).width()?Y:e(v.svgObject).width()-t.RightLabelMaxWidth-K)+l.width/2,X=e(v.svgObject).width()-t.RightLabelMaxWidth-_[1].X;var Q=q+m+2*W+t.RightLabelMaxWidth<e(v.svgObject).width()?W:q+m+t.RightLabelMaxWidth>e(v.svgObject).width()?0:X>W/2*3?W:X/2;G=-l.width/2}var Z=Math.sqrt(Math.pow(Y-O,2)+Math.pow(U-D,2))/10,J=O<I;O=J?O+Z:O-Z;var a=J?b.bounds[h].points.left:b.bounds[h].points.right,ee={X:O,Y:D,Left:O,Top:D,Right:O+l.width,Bottom:D+l.height,index:s,SeriesIndex:h,PointIndex:s},te=t.endAngle>t.startAngle;if(this.IntersectWith(v,i,ee,"outsideExtended",h)&&(_.push(O<I?{X:O+Q+G,Y:D}:{X:O-Q+G,Y:D}),D=te||null==t.startAngle?a[a.length-1].Y+l.height+2:J?a[a.length-1].Y-l.height-2:a[a.length-1].Y+l.height+2,ee.Y=D,ee.Top=D,ee.Bottom=D+l.height),_.push({X:O+G,Y:D}),q<_[0].X&&_[1].X>_[2].X&&(_[2].X=_[1].X),q>_[0].X&&_[1].X<_[2].X&&(_[2].X=_[1].X),J?(b.bounds[h].points.left||(b.bounds[h].points.left=[]),b.bounds[h].points.left.push(ee),_[_.length-1].X>_[_.length-2].X&&(_[_.length-2].X=_[_.length-1].X)):(b.bounds[h].points.right||(b.bounds[h].points.right=[]),b.bounds[h].points.right.push(ee),_[_.length-1].X<_[_.length-2].X&&(_[_.length-2].X=_[_.length-1].X)),S=ej.EjSvgRender.utils._getStringBuilder(),"bezier"!=M||v.vmlRendering){for(var ie=0;ie<_.length;ie++)ie==_.length-1?S.append(" "):S.append("M "+_[ie].X+" "+_[ie].Y+" L "+_[ie+1].X+" "+_[ie+1].Y+" ");S=S.toString()}else T=C.drawBezierSegment(_,t,s,v,h);u=_[_.length-1].X+(O<I?-A:A),p=_[_.length-1].Y}return{positionX:u,positionY:p,connectorDirection:S,isInterSected:i.isIntersected,bezierPath:T}},updateLabelPosition:function(t,i,s,a,r,n,o,l,d,h){var c,u,p,m,g=[],f=d,_=new(ej.seriesTypes[t.type.toLowerCase()]),v="",b=a.connector.connectorX,x=a.connector.connectorY,y=a.midPoint.midX,w=a.midPoint.midY,C=a.doughnutMidPoint.dMidX,S=a.doughnutMidPoint.dMidY,T=n.startX,R=n.startY,k=e.extend(!0,{},t.marker,i.marker),O=k.dataLabel.template?0:4,D=t.type.toLowerCase(),I=f.model.circularRadius[h],j="pieofpie"==D?"inside":t.labelPosition.toLowerCase();if(g.push({X:y,Y:w}),g.push({X:b,Y:x}),u=b,p=x,"outside"==j)o>0&&(b<T?(c=b-f.model.elementSpacing,u=c-O):(c=b+f.model.elementSpacing,u=c+O),g.push({X:c,Y:x})),"bezier"!=k.dataLabel.connectorLine.type.toLowerCase()||f.vmlRendering?v="M "+y+" "+w+" L "+b+" "+x+" M "+b+" "+x+" L "+c+" "+x:_.drawBezierSegment(g,t,s,f,h);else if("outsideextended"==j){m=y,w,y+=Math.cos(r)*(-I/10),w+=Math.sin(r)*(-I/10);var g=[],L=I/4;g.push({X:y,Y:w}),b=y+Math.cos(r)*L,x=w+Math.sin(r)*L,g.push({X:b,Y:x});var A=!f.model.legend.visible||"left"!=f.model.legend.position.toLowerCase()&&"right"!=f.model.legend.position.toLowerCase()?0:f.model.elementSpacing;if(b=y<T?f.model.centerX-I-2*L-t.LeftLabelMaxWidth>0?f.model.centerX-I-2*L+A:t.LeftLabelMaxWidth>m?m:t.LeftLabelMaxWidth:f.model.centerX+I+2*L+t.RightLabelMaxWidth<e(f.svgObject).width()?f.model.centerX+I+2*L-A:f.model.centerX+I+t.RightLabelMaxWidth>e(f.svgObject).width()?m:e(f.svgObject).width()-t.RightLabelMaxWidth,g.push({X:b,Y:x}),v=ej.EjSvgRender.utils._getStringBuilder(),"bezier"!=k.dataLabel.connectorLine.type.toLowerCase()||f.vmlRendering){for(var E=0;E<g.length;E++)E==g.length-1?v.append(" "):v.append("M "+g[E].X+" "+g[E].Y+" L "+g[E+1].X+" "+g[E+1].Y+" ");v=v.toString()}else _.drawBezierSegment(g,t,s,f,h);u=g[g.length-1].X+(y<T?-O:O),p=g[g.length-1].Y}else"doughnut"==t.type.toLowerCase()?(u=(y+C)/2,p=(w+S)/2):(u=(y+T)/2,p=(w+R)/2,u=(y+u)/2,p=(w+p)/2);return{positionX:u,positionY:p,connectorDirection:v,points:g[g.length-1]}},updateSmartLabel:function(t,i,s,a){var r,n,o,l,d,h=!0,c="",u=i.labelPosition.toLowerCase(),p=e.extend(!0,{},i.marker,a.marker),m=p.dataLabel,g=t.model.m_AreaBounds,f=(t.model.svgHeight,i.type.toLowerCase());return a._labelPlacement="","inside"==u||"outsideextended"==u?this.calculateInsideConnectorLines(s,a,i,t):this.compareDataLabels(a,s,t.model.outsideDataRegionPoints,i,t),r=t.model.enableCanvasRendering&&!m.template?t.pyrX:0,n=t.model.enableCanvasRendering&&!m.template?t.pyrY:0,"pyramid"==f?(t.model.actualHeight<a.yPos-n||a.xPos-r>g.Width&&"insideoverlap"==a._labelPlacement||"right"==t.model.legend.position&&m.template&&a.xPos+a.width>g.Width+t.model.LegendActualBounds.Width)&&(h=!1,a.drawTextacc=""):(a.yPos-n<0||a.xPos-r>g.Width&&"insideoverlap"==a._labelPlacement||"right"==t.model.legend.position&&m.template&&a.xPos+a.width>g.Width+t.model.LegendActualBounds.Width)&&(h=!1,a.drawTextacc=""),"outside"!=u&&"insideoverlap"!=a._labelPlacement||!h||(c=this.drawConnectorLines(s,a,i,t)),m.template&&(o=e("#"+a.id),h?(l="insidenooverlap"==a._labelPlacement?a.textOptionsacc.x+t.pyrX-a.width/2:a.textOptionsacc.x+t.pyrX,d="insidenooverlap"==a._labelPlacement?a.textOptionsacc.y+t.pyrY:a.textOptionsacc.y+t.pyrY-t.model.elementSpacing,o.css("left",l).css("top",d),o.css("height",a.height).css("overflow","hidden")):o.css("display","none")),{xPos:a.xPos,yPos:a.yPos,textOptionsacc:a.textOptionsacc,connectorDirection:c.connectorDirection,bezierPath:c.bezierdir,drawTextacc:a.drawTextacc}},compareDataLabels:function(t,i,s,a,r){for(var n,o,l,d,h,c,u=e.extend(!0,{},a.marker,t.marker),p=u.dataLabel,m=r.model.elementSpacing,g=u.dataLabel.margin,f=a._visiblePoints.length,_=a.labelPosition.toLowerCase(),v=r.model.enableCanvasRendering?r.pyrX:0,b=r.model.enableCanvasRendering?r.pyrY:0,x=0,y=s.length;x<y;x++)if(n=s[x],o=this.isCollide(n,t,a),o.state)if("inside"==_||"outsideextended"==_){t.textOptionsacc.y=t.yPos=t.textOptionsacc.y+o.height,c=p.template?{x:t.xPos,y:t.yPos}:{x:t.xPos-v,y:t.yPos-b};for(var w=0,C=f;w<C;w++)r.isPointInPolygon(r.model.chartRegions[0].Region[w].Polygon,c)&&(t.textOptionsacc.x=t.xPos=t.textOptionsacc.x+t.width,c=p.template?{x:t.xPos,y:t.yPos}:{x:t.xPos-v,y:t.yPos-b})}else t._labelPlacement="outside",t.textOptionsacc.y=t.yPos="pyramid"==a.type.toLowerCase()?t.yPos+o.height+m/2:t.yPos+o.height-m/2,t.textOptionsacc.y=t.textOptionsacc.y+t.height/4-m/2+g.top/2-g.bottom/2;l=p.angle,d=l>360?l-360:l<-360?l+360:l,h="rotate("+d+","+t.textOptionsacc.x+","+t.textOptionsacc.y+")",e(t.textOptionsacc).attr("transform",h),e(t.textOptionsacc).attr({transform:h}),"inside"!=_&&"outsideextended"!=_||(t.yPos=t.yPos+m/4,t.textOptionsacc.y=t.textOptionsacc.y+t.height/4+g.top/2-g.bottom/2),s[s.length]=t},calculateInsideConnectorLines:function(t,i,s,a){var r,n=i.Polygon,o=e.extend(!0,{},s.marker,i.marker),l=o.dataLabel,d=l.font,h=a.model.enableCanvasRendering?a.pyrX:0,c=a.model.enableCanvasRendering?a.pyrY:0,u=ej.EjSvgRender.utils._measureText(i.drawTextacc,null,d),p=l.template?{x:i.xPos,y:i.yPos}:{x:i.xPos+u.width/2-h,y:i.yPos-i.height/2-c};a.isPointInPolygon(n,p)?i._labelPlacement="insidenooverlap":(i._labelPlacement="insideoverlap",i.textOptionsacc["text-anchor"]="start",r=i.startX+70<a.model.m_AreaBounds.Width?70:a.model.m_AreaBounds.Width-i.startX,i.textOptionsacc.x=i.xPos=i.startX+r,i.textOptionsacc.y=i.yPos=i.yLocation,a.model.enableCanvasRendering&&!l.template&&(i.textOptionsacc.x+=a.pyrX,i.textOptionsacc.y+=a.pyrY,i.xPos+=a.pyrX,i.yPos+=a.pyrY),this.compareDataLabels(i,t,a.model.outsideDataRegionPoints,s,a))},drawConnectorLines:function(t,i,s,a){var r="",n=new(ej.seriesTypes[s.type.toLowerCase()]),o=s._visiblePoints[t].startX,l=s._visiblePoints[t].startY,d="",h=e.inArray(s,a.model._visibleSeries),c=e.extend(!0,{},s.marker,i.marker),u=c.dataLabel,p=i.textOptionsacc.y-a.model.elementSpacing/2,m=a.model.enableCanvasRendering?a.pyrX:0,g=a.model.enableCanvasRendering?a.pyrY:0,f=[{X:o+m,Y:l+g},{X:i.textOptionsacc.x,Y:p}];return"bezier"!=u.connectorLine.type.toLowerCase()||a.vmlRendering?(d="M "+o+" "+l+" L "+i.textOptionsacc.x+" "+p,a.model.enableCanvasRendering&&!u.template&&(d="M "+o+" "+l+" L "+(i.textOptionsacc.x-m)+" "+(p-g))):r=n.drawBezierSegment(f,s,t,a,h),{
connectorDirection:d,bezierdir:r}},isCollide:function(e,t,i){var s,a=0,r=0,n=i.type.toLowerCase();return s=!(e.yPos+e.height<t.yPos||e.yPos>t.yPos+t.height||e.xPos+e.width/2<t.xPos-t.width/2||e.xPos-e.width>t.xPos+t.width),s&&"pyramid"==n?(r=e.yPos+e.height-t.yPos,a=e.xPos+e.width-t.xPos):s&&"funnel"==n&&(r=e.yPos-(t.yPos+t.height),a=e.xPos+e.width-t.xPos),{state:s,height:r,width:a}},trimText:function(e,t,i){t--;var s=t-i.length;return e.substr(0,s)+i},trimfunction:function(e,t,i,s,a,r){for(;t<i;)if(e=e.toString(),e=this.trimText(e,e.length,s),i=ej.EjSvgRender.utils._measureText(e,a,r).width,e==s){e="";break}return e},calculatePosition:function(e,t,i,s,a){var r,n,o,l;return r=t.x+i/2-s,n=t.y-a,o=t.x-i/2-s,l=t.y-a,{rightEndX:r,rightEndY:n,leftEndX:o,leftEndY:l}},textOption:function(t,i,s,a,r,n,o,l,d,h,c){if(i.model._isPieOfPie)var u=e.extend(!0,{},t.marker,c.marker);else var u=e.extend(!0,{},t.marker,t._visiblePoints[n].marker);if(!u.dataLabel.template){e("#"+i.svgObject.id+"series"+h+"_PointText"+n).remove();var p={id:i.svgObject.id+"series"+h+"_PointText"+n,x:l+a,y:d+s.height/4+r,fill:u.dataLabel.font.color,"font-size":u.dataLabel.font.size,"font-family":u.dataLabel.font.fontFamily,"font-style":u.dataLabel.font.fontStyle,"font-weight":u.dataLabel.font.fontWeight,opacity:u.dataLabel.font.opacity,"text-anchor":o,cursor:"default",degree:u.dataLabel.angle},m=u.dataLabel.angle,g=m>360?m-360:m<-360?m+360:m,f="rotate("+g+","+l+","+d+")";e(p).attr("transform",f),i.model.enableCanvasRendering&&e(p).attr("labelRotation",m),e(p).attr({transform:f})}return p},labelTrim:function(e,t,i,s,a,r,n,o,l,d){var h,c,u,p,m,g,f=-.5*Math.PI,_=(Math.PI,this.calculatePosition(e,t,i,a,r)),v=e.model.series[l].startAngle,b=e.model.series[l].endAngle,x=(e.model.chartRegions.length<e.model._visibleSeries.length?e.model.chartRegions[0].Region:e.model.chartRegions[l].Region,b-v),l=e.model._isPieOfPie?d:l;if(x<0){b/=360;var y=b?2*Math.PI*(b<0?1+b:b):0}else var y=v?2*Math.PI*(e.model.itemCurrentXPos<0?1+e.model.itemCurrentXPos:e.model.itemCurrentXPos):0;if(v=(Math.atan2(_.rightEndY,_.rightEndX)-f-y)%(2*Math.PI),v<0&&(v=2*Math.PI+v),b=(Math.atan2(_.leftEndY,_.leftEndX)-f-y)%(2*Math.PI),b<0&&(b=2*Math.PI+b),h=parseFloat(n.start.toFixed(14)),c=parseFloat(n.end.toFixed(14)),x>0?(ej.util.isNullOrUndefined(e.firstStartAngle[0])&&e.firstStartAngle.push(h),h=e.firstStartAngle[0]<0?e.model._isPieOfPie?h:2*Math.PI+h:h,c=e.firstStartAngle[0]<0?e.model._isPieOfPie?c:2*Math.PI+c:c):(h=h<0?e.model._isPieOfPie?h:2*Math.PI+h:h,c=c<0?e.model._isPieOfPie?c:2*Math.PI+c:c),h-=y,c-=y,h>2*Math.PI&&c>2*Math.PI?(v+=2*Math.PI,b+=2*Math.PI):h<2*Math.PI&&c>2*Math.PI&&(v<Math.PI/2&&(v+=2*Math.PI),b<Math.PI/2&&(b+=2*Math.PI)),v<0&&(b>0||null==b)&&(h=h<0?2*Math.PI+h:h,c=c<=0?2*Math.PI+c:c),u=e.model.circleCenterX[l]<t.x?Math.sqrt(Math.pow(Math.abs(_.rightEndX),2)+Math.pow(Math.abs(_.rightEndY),2)):Math.sqrt(Math.pow(Math.abs(_.leftEndX),2)+Math.pow(Math.abs(_.leftEndY),2)),x<0&&(c=[h,h=c][0]),b>=h&&b<=c&&v>=h&&v<=c&&u<=e.model.circularRadius[l]&&u>0)p=!0;else for(p=!1;!p;){if("..."==(s=this.trimText(s,s.length,"..."))){s="";break}g=ej.EjSvgRender.utils._measureText(s,null,o),m=this.calculatePosition(e,t,g.width,a,r);var w=(Math.atan2(m.rightEndY,m.rightEndX)-f-y)%(2*Math.PI);w<0&&(w=2*Math.PI+w);var b=(Math.atan2(m.leftEndY,m.leftEndX)-f-y)%(2*Math.PI);if(b<0&&(b=2*Math.PI+b),u=e.model.circleCenterX[l]<t.x?Math.sqrt(Math.pow(Math.abs(m.rightEndX),2)+Math.pow(Math.abs(m.rightEndY),2)):Math.sqrt(Math.pow(Math.abs(m.leftEndX),2)+Math.pow(Math.abs(m.leftEndY),2)),h>2*Math.PI&&c>2*Math.PI&&e.model._isPieOfPie){var C=h-2*Math.PI;h=C;var S=c-2*Math.PI;c=S}else if(0!=h&&h<2*Math.PI&&c>=2*Math.PI&&e.model._isPieOfPie){var C=h-2*Math.PI;h=C}b>=h&&b<=c&&w>=h&&w<=c&&u<=e.model.circularRadius[l]&&u>0&&(p=!0)}return s},drawDataLabelAcc:function(t,i,s,a,r,n){var o=a.marker;if(a.visible&&(o&&o.dataLabel&&o.dataLabel.visible||(!o||!o.dataLabel)&&i.marker.dataLabel.visible)){var l,d,h,c,u,p,m,g,f,_,v,b,x,y,w=t,C=i.type.toLowerCase(),S=new ej.seriesTypes[C],T=ej.util.isNullOrUndefined,R="pieofpie"==C?"inside":i.labelPosition.toLowerCase(),k=w.model,O=k.title,D=ej.EjSvgRender.utils._measureText,I=k.elementSpacing,j=i.marker,L=j.dataLabel,A=L.margin,E=L.font,P=L.connectorLine,M=P.type.toLowerCase(),F=k.legend,N=F.position.toLowerCase(),z=k.LegendActualBounds,V=T(a.text)?a.y:a.text,B=L.enableWrap,H=V,Y=k._isPieOfPie?n:r,U=0,W=0,X=k.background.toLowerCase(),G=L.enableContrastColor;if("pyramid"!=C&&"funnel"!=C||"outsideextended"!=R||(R="inside"),u=e.extend({},ej.EjSvgRender.commonChartEventArgs),u.data={text:V,series:i,pointIndex:s},w._trigger("displayTextRendering",u),c={size:E.size,fontStyle:E.fontStyle,fontFamily:E.fontFamily},p=D(u.data.text,null,c),_=p.width+A.left+A.right,v=p.height+A.top+A.bottom,"pyramid"==C||"funnel"==C){var $=k.title.text?D(k.title.text,e(this.svgObject).width()-k.margin.left-k.margin.right,k.title.font):0,q=w.model.title.subTitle.text?ej.EjSvgRender.utils._measureText(w.model.title.subTitle.text,e(this.svgObject).width()-w.model.margin.left-w.model.margin.right,w.model.title.subTitle.font):0,Q=""===w.model.title.subTitle.text?0:q.height,K=I+k.margin.left+("left"===N)?z.Width:0,Z=("top"===N?z.Height:0)+(k.title.text&&k.title.visible?k._titleLocation.Y+$.height+Q:k.margin.top+I);_+=10;var J={X:a.xLocation+w.pyrX,Y:a.yLocation+w.pyrY};U=a.xLocation,W=a.yLocation;var ee=a.marker?a.marker:j;ee=e.extend(!0,{},j,ee),h=a.connectorLine,g={positionX:U,positionY:W}}if("pyramid"!=C&&"funnel"!=C){var te,ie,se,ae,re,ne,oe,le,de,he,ce,ue,pe,me,ge=-.5*Math.PI,fe=a.midAngle+ge,$=k.title.text?D(k.title.text,e(this.svgObject).width()-k.margin.left-k.margin.right,k.title.font):0,q=w.model.title.subTitle.text?ej.EjSvgRender.utils._measureText(w.model.title.subTitle.text,e(this.svgObject).width()-w.model.margin.left-w.model.margin.right,w.model.title.subTitle.font):0,Q=""===w.model.title.subTitle.text?0:q.height,_e=k.circularRadius[Y];ne=T(P.height)?D(u.data.text,null,E).height:P.height;if((w.model._isPieOfPie?a.actualIndex:i._visiblePoints[s].actualIndex)!=i.explodeIndex&&!i.explodeAll||w.vmlRendering?(oe=k.circleCenterX[Y],le=k.circleCenterY[Y]):(oe=k.circleCenterX[Y]+Math.cos(fe)*i.explodeOffset,le=k.circleCenterY[Y]+Math.sin(fe)*i.explodeOffset),de=S.getXCordinate(oe,_e,fe),de=0!=a.y?de:parseFloat(de.toFixed(12)),he=S.getYCordinate(le,_e,fe),ce=S.getXCordinate(oe,k.innerRadius[r],fe),ue=S.getYCordinate(le,k.innerRadius[r],fe),pe=this.getXCordinate(oe,_e+ne,fe),pe=0!=a.y?pe:parseFloat(pe.toFixed(12)),me=this.getYCordinate(le,_e+ne,fe),L.template)d=a.size;else{var ee=a.marker?a.marker:j,ee=e.extend(!0,{},j,ee);l=ee.dataLabel.shape,d=D(u.data.text,e(w.svgObject).width(),E),"none"!=l.toLowerCase()&&(d.height=d.height+A.top+A.bottom,d.width=d.width+A.left+A.right)}if(te={midX:de,midY:he},ie={dMidX:ce,dMidY:ue},se={connectorX:pe,connectorY:me},ae={midPoint:te,doughnutMidPoint:ie,connector:se},re={startX:oe,startY:le},i._enableSmartLabels){if(m=S.updateSmartLabelPosition(i,a,s,ae,fe,re,ne,d,t,r),w.model.bounds[r].points[s])var ve=w.model.bounds[r].points[s].overlap;U=m.positionX,W=m.positionY,g={positionX:U,positionY:W,isInterSected:m.isInterSected},h=w.model._isPieOfPie||ve?"":m.connectorDirection}else m=S.updateLabelPosition(i,a,s,ae,fe,re,ne,d,t,r),U=m.positionX,W=m.positionY,h=m.connectorDirection}var be,xe="inside"!=R&&"insidenooverlap"!=R||("pyramid"==C||"funnel"==C)&&"outside"==R?U<k.circleCenterX[Y]?"end":"start":"middle",ye="inside"==R||"insidenooverlap"==R?0:U<k.circleCenterX[Y]?-p.width:p.width,K=0,Z=0;"pie"!=C&&"doughnut"!=C&&"pieofpie"!=C||"inside"!=R||(xe=""!=h?U<k.circleCenterX[Y]?"end":"start":"middle"),"pyramid"!=C&&"funnel"!=C||"outside"!=R||(xe="start");var Q=""===w.model.title.subTitle.text?0:q.height;if(this.chartObj&&k.enableCanvasRendering&&("pyramid"==C||"funnel"==C)&&(K=("left"===N?z.Width:0)+I+k.margin.left,Z=("top"===N?z.Height:0)+(O.text?k._titleLocation.Y+$.height+Q:k.margin.top+I)),s=w.model._isPieOfPie?a.actualIndex:s,be=this.textOption(i,w,p,K,Z,s,xe,U,W,r,a),x="array"==jQuery.type(k.pointColors[a.actualIndex])?k.pointColors[a.actualIndex][0].color:k.pointColors[a.actualIndex],x=a.fill?"array"==jQuery.type(a.fill)?a.fill[0].color:a.fill:x,L.template){J=T(J)?{X:U,Y:W}:J;var we=a.actualIndex;S.drawLabelTemplate(i,a,we,J,t),"bezier"==M&&""!=m.bezierPath&&t.svgRenderer.drawPolyline(m.bezierPath,t.gConnectorEle[r])}else{if(e.each(k.symbolShape,function(t){ee=a.marker?a.marker:j,ee=e.extend(!0,{},j,ee),l=ee.dataLabel.shape,l.toLowerCase()==t.toLowerCase()&&(b=t)}),U=K+U-A.left/2+A.right/2+ye/2,W=Z+W-A.top/2+A.bottom/2,"pyramid"!=C&&"funnel"!=C||(a.xPos=g.positionX+K,a.yPos=g.positionY+Z,a.width="None"==b?p.width:_,a.height="None"==b?p.height:v,a.symbolName=L.template?"none":b,a.textOptionsacc=be,a.drawTextacc=u.data.text),k.enableCanvasRendering&&be.degree%360!=0&&(be.y-=p.height/4,be.baseline="middle"),G&&!i._enableSmartLabels&&(y="inside"!=R?"transparent"===X?"white":X:x,be.fill=this._applySaturation(w,y)),i._enableSmartLabels){var Ce,Se,Te=k.m_AreaBounds.Width+k.m_AreaBounds.X+k.margin.left,Re=R,ke=k.enableCanvasRendering,Oe="string"==typeof u.data.text?u.data.text:u.data.text.toString(),De=D(Oe,Oe.length,E).width,Ie=0,je=0;F.visible?"left"!=N&&"right"!=N||(Ce=z):Ce={Width:0},"pie"==C||"doughnut"==C||"pieofpie"==C?("outside"!=Re&&"outsideextended"!=Re&&""==h||(Se=k.circleCenterX[Y]<be.x?Te-be.x:"left"==N?be.x-k.margin.left-2*k.elementSpacing-Ce.Width:be.x-k.margin.left,Oe=this.trimfunction(Oe,Se,De,"...",Te,E),!F.visible||"top"!=N&&"bottom"!=N||(Oe=this._overlapLegend(be,Oe,t,r))),"inside"==Re&&""==h&&(""!=(Oe=this.labelTrim(w,be,De,Oe,oe,le,a,E,r,n))||w.model._isPieOfPie||(a.smartLabelPosition="outside",m=S.updateSmartLabelPosition(i,a,s,ae,fe,re,ne,d,t,r),g={positionX:m.positionX,positionY:m.positionY,isInterSected:m.isInterSected},Oe=u.data.text,h=m.connectorDirection,xe=k.circleCenterX[Y]<m.positionX?"start":"end",be=this.textOption(i,w,p,K,Z,s,xe,m.positionX,m.positionY,r,a),Se=k.circleCenterX[Y]<m.positionX?"right"==N?Te-be.x-Ce:Te-be.x:"left"==N?be.x-Ce:be.x,Oe=this.trimfunction(Oe,Se,De,"...",Te,E),delete a.smartLabelPosition))):"pyramid"!=C&&"funnel"!=C||(m=S.updateSmartLabel(t,i,s,a),U=m.xPos,W=m.yPos,h=m.connectorDirection,be=m.textOptionsacc,Oe=a.drawTextacc,""==h&&"bezier"!=M||""==Oe||(Oe=Oe.toString(),(Se=ke?Te-be.x:Te-be.x-w.pyrX)<De&&(Oe=this.trimfunction(Oe,Se,De,"...",Te,E))));var Le=D(Oe,null,E);if("pie"==C||"doughnut"==C||"pieofpie"==C)var ye="inside"!=R&&"insidenooverlap"!=R||g.isInterSected||""!=h?U<k.circleCenterX[Y]?-Le.width:Le.width:0;else if("pyramid"==C||"funnel"==C)var ye="insidenooverlap"==a._labelPlacement?0:Le.width;"pie"==C||"doughnut"==C||"pieofpie"==C?(U=K+g.positionX-A.left/2+A.right/2+ye/2,W=Z+g.positionY-A.top/2+A.bottom/2):(U=U-A.left/2+A.right/2+ye/2,W=W-A.top/2+A.bottom/2);var Ae=e("#"+w.svgObject.id+"_dataLabel_series"+r+"_point_"+s),Ee=e("#"+w.svgObject.id+"_connectorLine_series"+r+"_point_"+s);""!==Oe?(Ae.show(),Ee.show(),G&&(y="inside"!=Re?"transparent"===X?"white":X:""!=m.connectorDirection&&!ej.util.isNullOrUndefined(m.connectorDirection)||""!=m.bezierPath&&!ej.util.isNullOrUndefined(m.bezierPath)?"transparent"===X?"white":X:x,be.fill=this._applySaturation(w,y)),B||ve||S.dataLabelSymbol(r,i,s,U,W,_,v,b,w),"bezier"!=M||""==m.bezierPath||ej.util.isNullOrUndefined(m.bezierPath)||t.svgRenderer.drawPolyline(m.bezierPath,t.gConnectorEle[r])):(Ae.hide(),Ee.hide(),h=""),B||ve||w.svgRenderer.drawText(be,Oe,w.gSeriesTextEle[r]);var ae,Pe,Me,Fe,Ne,ze=D(Oe,Oe.length,E);D(u.data.text,null,E);if("pie"!=C&&"doughnut"!=C&&"pieofpie"!=C||("inside"==Re&&""==m.connectorDirection?(Pe=be.x-Le.width/2,Fe=be.x+Le.width/2,Me=be.y-Le.height/2,Ne=be.y+Le.height/2):(k.circleCenterX[Y]<be.x?(Pe=be.x,Fe=be.x+Le.width):(Pe=be.x-Le.width,Fe=be.x),Me=be.y-Le.height/2,Ne=be.y+Le.height/3),ae={centerX:k.circleCenterX[Y],minX:Pe,minY:Me,maxX:Fe,maxY:Ne,width:ze.width,height:ze.height,labelPosition:Re}),"funnel"==C||"pyramid"==C){Ie="left"==N?Ie:0;var je=0;""==h&&"bezier"!=M||(Pe=be.x-Ie,Fe=be.x+Le.width-Ie,Me=be.y-Le.height,Ne=be.y),ae=ke?{minX:Pe+Ie,maxX:Fe+Ie,minY:Me+je,maxY:Ne+je,width:ze.width,height:ze.height,labelPosition:Re}:{minX:Pe+w.pyrX+Ie,maxX:Fe+w.pyrX+Ie,minY:Me+w.pyrY+je,maxY:Ne+w.pyrY+je,width:ze.width,height:ze.height,labelPosition:Re}}f={bounds:ae,trimmedText:Oe,text:u.data.text,type:C,font:E},w.accDataLabelRegion.type=C,w.accDataLabelRegion.connectorDirection=h,ej.util.isNullOrUndefined(w.accDataLabelRegion[Y])&&(w.accDataLabelRegion[Y]=[]),w.accDataLabelRegion[Y].length<i._visiblePoints.length&&w.accDataLabelRegion[Y].push(f),T(a.index)||!i.explode||ke||w.accDataLabelRegion[Y].splice(a.index,1,f),1==n&&w.accDataLabelRegion[Y].length==i._visiblePoints.length&&(w.accDataLabelRegion[r]=e.merge(e.merge([],w.accDataLabelRegion[0]),w.accDataLabelRegion[1]))}else B||ve||(S.dataLabelSymbol(r,i,a.index,U,W,_,v,b,w),w.svgRenderer.drawText(be,u.data.text,w.gSeriesTextEle[r]));if(B){var Ve,Be=D(H,null,c);if(Ve=this.updateWrappedText(be,H,Be,a,C,oe,le,_e,k.innerRadius[r],R,L,"bezier"==M?i._enableSmartLabels?T(m.bezierPath)?"":m.bezierPath.points:m.points:h),Oe=Ve.text,be.x=parseFloat(Ve.x),be.y=parseFloat(Ve.y),""!=Oe&&!ve){var He="start"==be["text-anchor"]?parseFloat(be.x+Ve.width/2):T(h)||""==h?parseFloat(be.x):parseFloat(be.x-Ve.width/2);S.dataLabelSymbol(r,i,s,He,be.y+Ve.height/2-Be.height/2-5,Ve.width,Ve.height,b,w)}if(!T(h)&&""!=h){var K,Z;"funnel"!=C&&"pyramid"!=C||(K=k.enableCanvasRendering?this.chartObj.pyrX:0,Z=k.enableCanvasRendering?this.chartObj.pyrY:0);var Ye=h.split(" "),Ue="outsideextended"!=R||"pie"!=C&&"doughnut"!=C?Ye.length:Ye.length-2;Ye[Ue-1]=be.y-Z+(Ve.height/2-Be.height),Ye[Ue-2]=be.x-K,h=Ye.toString().replace(/,/g," ")}if(h=0==Ve.exceed?"":h,!k.enableCanvasRendering&&!this.chartObj.vmlRendering||"object"!=typeof Oe||ve)ve||w.svgRenderer.drawText(be,Oe,w.gSeriesTextEle[r]);else for(var We=0,Xe=be.y,Ge=be.x;We<Oe.length;We++)be.y=parseFloat(Xe)+We*p.height,be.x=Ge,w.svgRenderer.drawText(be,Oe[We],w.gSeriesTextEle[r])}}("pyramid"==C||"funnel"==C)&&L.template&&i._enableSmartLabels&&(m=S.updateSmartLabel(t,i,s,a),U=m.xPos,W=m.yPos,h=m.connectorDirection);var $e=[];if($e[0]=K,$e[1]=Z,("bezier"!=M||w.vmlRendering||"pyramid"==C||"funnel"==C)&&""!=h&&h){var qe={id:w.svgObject.id+"_connectorLine_series"+r+"_point_"+s,stroke:P.color?P.color:x,"stroke-width":P.width,d:h};w.svgRenderer.drawPath(qe,w.gConnectorEle[r],$e)}}},_overlapLegend:function(t,i,s,a){var r,n=e(s.svgObject).height(),o=e(s.svgObject).width(),l=s.model.LegendActualBounds,d=s.model.elementSpacing,h=s.model.series[a].marker.dataLabel.margin,c=s.model.series[a].marker.dataLabel.shape,u="none"!=c?h.top:0,p="none"!=c?h.bottom:0,m=ej.EjSvgRender.utils._measureText(t).height,g=t.y+m+p,f=t.y-u,_=s.model.legend.position.toLowerCase(),v=s.model.title,b=v.subTitle,h=s.model.margin,x=s.model.border.width,y=""==b.text?0:ej.EjSvgRender.utils._measureText(b.text,o-h.left-h.right,b.font).height+d,w=s.model._titleLocation?s.model._titleLocation.Y:0+y,C=i;return"bottom"==_?(r=n-s.model.LegendActualBounds.Height-d,C=g>r?"":C):(r=0==w?x+d:w+d,C=f<r+l.Height?"":C),g>n&&(C=""),C},updateWrappedText:function(t,i,s,a,r,n,o,l,d,h,c,u){var p,m,g,f,_,v,b,x,y,w,C,S=this.chartObj,T=a,R={},k=s.width,O=s.height,D=t.x,I=t.y,j=D,L=!0,A=S.model.m_AreaBounds.X,E=I;if(!ej.util.isNullOrUndefined(u)&&""!=u)if("object"==typeof u)w=u.X,C=u.Y;else if(x=u.split(" "),y="outsideextended"==h?x.length-2:"bezier"==c.connectorLine.type.toLowerCase()?x.length-2:x.length,x[y-1].indexOf(",")>-1){var P=x[y].split(",");w=P[0],C=P[1]}else w=x[y-2],C=x[y-1];if("pie"==r||"doughnut"==r){if("inside"==h){var d=ej.util.isNullOrUndefined(d)?0:d,M=-.5*Math.PI,F=T.startAngle+M,N=T.endAngle+M,z=T.midAngle+M,V=180/Math.PI*z%360,B=(Math.PI,Math.PI,"doughnut"==r?.75:.5);j=this.getXCordinate(n,l*B,z),E=this.getYCordinate(o,l*B,z);var H=this.getXCordinate(n,l,F),Y=this.getYCordinate(o,l,F),U=this.getXCordinate(n,l,N),W=this.getYCordinate(o,l,N),X=this.getXCordinate(n,l,z),G=this.getYCordinate(o,l,z),$=this.getXCordinate(n,d,z),q=this.getYCordinate(o,d,z),Q=this.getSegementMinMax([H,U,"doughnut"==r?$:n,X],[Y,W,"doughnut"==r?q:o,G]);Q.width=Q.height>l?Q.height:Q.width,b=.75*Q.width}else if(!("outside"!=h&&"outsideextended"!=h||"pie"!=r&&"doughnut"!=r||""==u)){var K=(S.model.m_AreaBounds,A),Z=S.svgWidth-A;b=w<=n?w-K:Z-w,j=w,E=C}}else{var J=S.svgWidth;if("outside"==h)b=J-w;else{b=T.width;if(!S.isPointInPolygon(T.Polygon,{x:j+k,y:E})){b="funnel"==r?T.Polygon[3].x-T.Polygon[4].x:T.Polygon[1].x-T.Polygon[0].x,v=T.Polygon[3].y-T.Polygon[0].y;var ee=Math.round(k/b)*O,L=ee>=v-10||b<=50;L?b=J-j-A:(t["text-anchor"]="middle",j=("funnel"==r?T.Polygon[4].x:T.Polygon[0].x)+b/2+(S.model.enableCanvasRendering?S.pyrX:0),E=(T.Polygon[0].y+T.Polygon[3].y)/2-ee/2+(S.model.enableCanvasRendering?S.pyrY:0),T._labelPlacement="insidenooverlap")}}}if("inside"!=h&&""==u&&ej.util.isNullOrUndefined(u))f="";else{p=null!=c.maximumLabelWidth?c.maximumLabelWidth:parseFloat(b),f=i,m=S._rowsCalculation({text:f.toString(),font:c.font},p,void 0),f=m.textCollection,_=e.extend([],f);for(var te=0;te<_.length-1;te++)_[te+1]=_[te].concat("<br/>",_[te+1]);_=_[_.length-1]}var ie=ej.EjSvgRender.utils._measureText(_,b,c.font);if(ie.height+=O/2,"pie"!=r&&"doughnut"!=r||"inside"!=h||(E=E-ie.height/2+O/2,f=ie.height>Q.height?"":f,""==(f=ie.width>Q.width?"":f)&&(ie.width=0,ie.height=0)),R="undefined"==this.currentBoundary?"undefined":this.currentBoundary,this.currentBoundary={X:j-ie.width/2,Y:parseFloat(E),Height:ie.height,Width:ie.width},R&&"insidenooverlap"!=T._labelPlacement){var se=this.checkOverlapping(S,this.currentBoundary,R,r,f,g,V,h,{startAngle:F,endAngle:N,radius:l,centerX:n,centerY:o});se[1]&&""!=se[2]?(R=se[0],j=R.X+R.Width/2,E=R.Y,f=se[2],ie.height=se[0].Height,ie.width=se[0].Width):f=se[2]}else g=this.currentBoundary;return L=""!=f&&L,this.currentBoundary=""==f?R:this.currentBoundary,{text:f,x:j,y:E,exceed:L,height:ie.height,width:ie.width}},checkOverlapping:function(e,t,i,s,a,r,n,o,l){var d,h,c,u=!1;if(d=this.getOverlapArea(t,i),u=d.overlap,h=d.xOverlap,c=d.yOverlap,u)if("pie"==s||"doughnut"==s)if("inside"==o.toLowerCase()){var p,m=h>=c?"Y":"X";"X"==m?(p=n>0&&n<180?-1:1,t.X+=p*(h+10)):(p=n>90&&n<270?-1:1,t.Y+=p*(c+10))}else t.Y-=c+10;else t.Y="funnel"==s?i.Y-t.Height-10:i.Y+i.Height+10;if("pie"!=s&&"doughnut"!=s&&"pieofpie"!=s||"inside"!=o.toLowerCase())"funnel"==s?t.Y+t.Height>=i.Y&&(a=""):"pyramid"==s&&t.Y+t.Height<=i.Y+i.Height&&(a="");else{d=this.getOverlapArea(t,r),a=1==d.overlap?"":a,u=1==d.overlap||u;a=this.checkSegmentExceeding(t,l)?a:""}e.model.m_AreaBounds;return[{X:t.X,Y:t.Y,Height:t.Height,Width:t.Width},u,a]},getOverlapArea:function(e,t){var i=Math.max(0,Math.min(e.X+e.Width,t.X+t.Width)-Math.max(e.X,t.X)),s=Math.max(0,Math.min(e.Y+e.Height,t.Y+t.Height)-Math.max(e.Y,t.Y));return{overlap:i*s>0,xOverlap:i,yOverlap:s}},getSegementMinMax:function(e,t){var i,s,a,r,n,o;return e.sort(function(e,t){return e-t}),t.sort(function(e,t){return e-t}),i=e[0],s=e[3],a=t[0],r=t[3],n=s-i,o=r-a,{minX:i,maxX:s,minY:a,maxY:r,width:n,height:o}},checkSegmentExceeding:function(e,t){var i=!1,s=e.X+e.Width/2,a=e.Y+e.Height/2,r=s-t.centerX,n=a-t.centerY,o=Math.atan2(n,r);if(Math.abs(Math.sqrt(r*r+n*n))<=t.radius){var l=2*Math.PI;o=o<0?l+o:o,t.startAngle=t.startAngle<0?l+t.startAngle:t.startAngle,t.endAngle=t.endAngle<0?l+t.endAngle:t.endAngle,o<=t.endAngle&&o>=t.startAngle?i=!0:(o<=l&&o>=t.startAngle&&t.endAngle<t.startAngle||o>0&&o<=t.endAngle&&t.startAngle>t.endAngle)&&(i=!0)}return i},drawBezierSegment:function(e,t,i,s,a){for(var r=ej.EjSvgRender.utils._getStringBuilder(),n=new(ej.seriesTypes[t.type.toLowerCase()]),o=0;o<=16;o++){var l=o/16,d=n.GetBezierPoint(l,e,0,e.length,t);r.append(d.X+","+d.Y+" ")}var h={id:s.svgObject.id+"_bezierLine_series"+a+"_point"+i,stroke:t.marker.dataLabel.connectorLine.color?t.marker.dataLabel.connectorLine.color:s.model.pointColors[i],"stroke-width":t.marker.dataLabel.connectorLine.width,fill:"none",points:r.toString()};if(t._enableSmartLabels)return h;s.svgRenderer.drawPolyline(h,s.gConnectorEle)},GetBezierPoint:function(e,t,i,s,a){var r=new(ej.seriesTypes[a.type.toLowerCase()]);if(1==s)return t[i];var n=r.GetBezierPoint(e,t,i,s-1,a),o=r.GetBezierPoint(e,t,i+1,s-1,a),l=n.X?n.X:n.x,d=n.Y?n.Y:n.y,h=o.X?o.X:o.x,c=o.Y?o.Y:o.y,u=(1-e)*l+e*h,p=(1-e)*d+e*c;return n.x?{x:u,y:p}:{X:u,Y:p}},drawLabelTemplate:function(t,i,s,a,r){r&&(this.chartObj=r);var n,o,l,d=this.chartObj.model.m_AreaBounds.X,h=this.chartObj.model.m_AreaBounds.Y,c=this.chartObj.model.m_AreaBounds.Width,u=this.chartObj.model.m_AreaBounds.Height,p=e.inArray(t,this.chartObj.model._visibleSeries),m=this.chartObj.model.AreaType,g=this.chartObj.model.series[p],f=0,_=0,v=this.chartObj._id,b=e.extend(!0,{},t.marker,i.marker),x={interior:b.dataLabel.fill,opacity:b.dataLabel.opacity,borderColor:b.dataLabel.border.color,borderWidth:b.dataLabel.border.width};this.chartObj.model.chartRegions[s]&&this.chartObj.model.chartRegions[s].type;if("none"!=m||this.chartObj.model.enable3D){if(0!=e("#template_group_"+v).length)var y=e("#template_group_"+v);else y=e("<div></div>").attr("id","template_group_"+v);if(y.css("position","relative").css("z-index",1e3),0==e("#"+b.dataLabel.template).length)return;var w=e("#"+b.dataLabel.template).clone();e(w).attr("id",b.dataLabel.template+"_"+p+"_"+s+"_"+v);var C=e(w);C.css("position","absolute");var S=i.x;i.dataLabeltemplate=!0,i.id=b.dataLabel.template+"_"+p+"_"+s+"_"+v,t.xAxis._valueType.indexOf("datetime")>-1&&(i.x=ej.format(new Date(i.xValue),ej.util.isNullOrUndefined(t.xAxis.labelFormat)?"datetime"==t.xAxis._valueType?ej.EjSvgRender.utils._dateTimeLabelFormat(t.xAxis._intervalType,t.xAxis):ej.EjSvgRender.utils._dateTimeLabelFormat(t.xAxis.intervalType,t.xAxis):t.xAxis.labelFormat,this.chartObj.model.locale)),"category"==t.xAxis._valueType.toLowerCase()&&(i.x=ej.EjSvgRender.utils._getLabelContent(s,t.xAxis,this.chartObj.model.locale)),i.count=1;var T={series:t,point:i};C.html(C.html().parseTemplate(T)),i.x=S;var R="cartesianaxes"!=m&&t.enableAnimation&&"pyramid"!=t.type.toLowerCase()&&"funnel"!=t.type.toLowerCase()?"none":"block";C.css("display",R).appendTo(e(y)),e(y).appendTo("#chartContainer_"+v);var k=this.chartObj.model.m_AreaBounds;"cartesianaxes"!=m||this.chartObj.model.enable3D||(f=k.X+(this.chartObj.model.requireInvertedAxes?g.yAxis.plotOffset:g.xAxis.plotOffset),_=g.yAxis.y),o=C.width()/2,l=C.height(),n=ej.util.isNullOrUndefined(x)&&x.interior?x.interior:"none"==m?this.chartObj.model.pointColors[s]:this.chartObj.model.seriesColors[p]}else n=ej.util.isNullOrUndefined(x)&&x.interior?x.interior:this.chartObj.model.pointColors[s],o=this.chartObj.model.circleCenterX[p]>a.X?i.size.width:0,C=e("#template_group_"+v).find("#"+b.dataLabel.template+"_"+p+"_"+s+"_"+v),i.id=b.dataLabel.template+"_"+p+"_"+s+"_"+v,l=this.chartObj.model.enable3D?0:i.size.height/2;if("hilo"!=g.type&&"hiloopenclose"!=g.type&&"candle"!=g.type||(n=g._visiblePoints[s]._hiloFill),n="array"==jQuery.type(n)?n[0].color:n,-1!=g.type.indexOf("bar"))var O=a.X+f-o,D=a.Y+(this.chartObj.model.enable3D?0:k.Y)-l+g.xAxis.plotOffset,I=a.X+f+o;else var O=a.X+f-o,D=_+a.Y-l,I=a.X+f+o;var j=C[0].style.backgroundColor;C.css("left",O).css("top",D).css("background-color",""!=j?j:n).css("display","block").css("cursor","default"),"cartesianaxes"!=this.chartObj.model.AreaType?(i.xPos=O-this.chartObj.pyrX,i.yPos=D-this.chartObj.pyrY,i.textOptionsacc={x:O-this.chartObj.pyrX,y:D-this.chartObj.pyrY}):i.y==i.low?(i.xPosLow=O,i.yPosLow=D,i.textOptionsLow={x:O,y:D},i.dataLabelLow={textX:O,textY:D,x:O,y:D}):(i.xPos=O,i.yPos=D,i.seriesIndex=p,i.textOptions={x:O,y:D},i.dataLabel={textX:O,textY:D,x:O,y:D},i.margin={top:0,bottom:0,left:0,right:0}),i.height=C.outerHeight(),i.width=C.outerWidth();var L,A,E;L=A=E=0;var P=0;if("cartesianaxes"==m&&(O>f+k.Width||D+l>k.Y+k.Height||O<f||D<_||O>f+k.Width||D>_+k.Height||I>k.Width+k.X)){if(o=C.outerWidth(),O<d&&(A=d-O),u+h<D+l){P=l-(D+l-(u+h))}if(D<h&&(L=h-D),c+d<O+o){E=o-(O+o-(c+d))}E=0==E?o:E,P=0==P?l:P,g.marker.dataLabel.showEdgeLabels||(document.getElementById(C[0].id).style.clip="rect("+L+"px,"+E+"px,"+P+"px,"+A+"px)")}},animateLabelTemplate:function(t){for(var i=e.inArray(t,this.chartObj.model._visibleSeries),s=t._visiblePoints.length,a=0;a<s;a++){var r=t.marker.dataLabel.template+"_"+i+"_"+a+"_"+this.chartObj._id;r=e("#"+r),r.css("display","none"),r.delay(1e3).fadeIn(300)}},textPosition:function(t,i,s,a,r,n,o,l,d,h,c){var u=e.extend(!0,{},t.marker,s.marker),p=u.dataLabel,m=p.isReversed,g=p.horizontalTextAlignment.toLowerCase(),f=p.verticalTextAlignment.toLowerCase(),_=(t._visiblePoints.length,l),v=p.margin,b=t.yAxis.isInversed,x=this.chartObj._getXCrossValue(t,t.xAxis,h),y=-1!=r.indexOf("bar")||-1!=r.indexOf("column")&&"rangecolumn"!=r?this.chartObj.model.requireInvertedAxes?"bar":"column":r;if("column"==y||"stackingcolumn"==y||"stackingcolumn100"==y){var w=this.chartObj.model.chartRegions[_].Region.Bounds,C=h.axes[t.xAxis.name]._validCross||!1;if(R=w.Height,T=w.Width,C){var S=Math.abs((b?t.yAxis.visibleRange.min:t.yAxis.visibleRange.max)-x)/t.yAxis.visibleRange.delta*t.yAxis.height;"bottom"==c?o=o<=S?o+R-v.bottom:o-R+a.height-v.bottom:"middle"==c?o<S?o+=R/2+a.height/4:o-=R/2:o<S&&b||o<S&&!b?o-=10+2*a.height/2:o+=10+2*a.height/2}else"bottom"==c?o=s.y>=x&&!t.yAxis.isInversed||s.y<x&&t.yAxis.isInversed?o+R-v.bottom:a.height+v.bottom:"middle"==c?s.y>x&&!t.yAxis.isInversed||s.y<x&&t.yAxis.isInversed?o+=R/2+a.height/4:o-=R/2:s.y>x&&t.yAxis.isInversed||s.y<x&&!t.yAxis.isInversed?o+=10:o-=10;g&&"far"==g?n=m?n-T/2:n+T/2:g&&"near"==g&&(n=m?n+T/2:n-T/2),f&&"near"==f?o+="bottom"==c?10:7:f&&"far"==f&&(o-=10)}else if(-1!=y.indexOf("bar")){var w=this.chartObj.model.chartRegions[_].Region.Bounds,T=w.Width,C=h.axes[t.xAxis.name]._validCross||!1,R=w.Height;if(o+=a.height/4,C){var k=t.xAxis._crossValue||0,S=Math.abs(b?t.yAxis.visibleRange.max:t.yAxis.visibleRange.min-k)/t.yAxis.visibleRange.delta*t.yAxis.width;"bottom"==c?n=n<S&&!b||n>=S&&b?n+T-a.width:n-T+v.left:"middle"==c?n=n<S&&!b||n>=S&&b?n+T/2-a.width/2:n-T/2-a.width/2:n<S&&!b||n>=S&&b?n-=10+2*a.width/2:n+=10+2*a.width/2}else"bottom"==c?s.y>=0&&!t.yAxis.isInversed||s.y<0&&t.yAxis.isInversed?n=-1==y.indexOf("stacking")&&i>0?n-T+a.width/2:v.left+a.width/4:n+=T-a.height-v.right:"middle"==c?s.y>0&&!t.yAxis.isInversed||s.y<0&&t.yAxis.isInversed?n-=T/2+a.width/2:n+=T/2:s.y>=0&&!t.yAxis.isInversed||s.y<0&&t.yAxis.isInversed?n+=a.width/4+10:n-=a.width/4+10;g&&"far"==g?n+="bottom"==c?a.width-a.width/4:a.width/4+10:g&&"near"==g?n-="bottom"==c?a.width/4:10-a.width/4-3:n+=a.width/4,f&&"near"==f?o+=R/2:f&&"far"==f&&(o-=R/2)}else if("rangecolumn"==y){var w=this.chartObj.model.chartRegions[_].Region.Bounds,O=0,D=0;s.high!=s.y&&(O=w.Height,D=w.Width),this.chartObj.model.requireInvertedAxes?"top"==c?n=n-D+(10+2*a.width/2):"bottom"==c?n=n-D-(2*a.width+10):"middle"==c&&(n-=D):"top"==c?o+=O-10:"bottom"==c?o=o+O+(2*a.height+10):"middle"==c&&(o+=O),g&&"far"==g.toLowerCase()?n+=w.Width/2:g&&"near"==g.toLowerCase()&&(n-=w.Width/2),f&&"near"==f.toLowerCase()?o+=7:f&&"far"==f.toLowerCase()&&(o-=10)}else if("boxandwhisker"==y){var w=this.chartObj.model.chartRegions[_].Region.Bounds,O=0,D=0;this.chartObj.model.requireInvertedAxes?"top"==c?n=n-D+(10+2*a.width/2):"bottom"==c?n=n-D-(2*a.width+10):"middle"==c&&(n-=D):"top"==c?o+=O-3:"bottom"==c?o+=O+10+a.width/2:"middle"==c&&(o+=O+10),g&&"far"==g.toLowerCase()?n+=2*a.width:g&&"near"==g.toLowerCase()&&(n-=2*a.width),f&&"near"==f.toLowerCase()?o="top"==c?o+10:o-10:f&&"far"==f.toLowerCase()&&(o="top"==c?o-10:o+10)}else if("waterfall"==r){var w=this.chartObj.model.chartRegions[_].Region.Bounds,R=w.Height,T=w.Width,I=s.waterfallSum<0||!s.showIntermediateSum&&!s.showTotalSum&&s.y<0;switch(c){case"bottom":t.isTransposed?n=t.yAxis.isInversed?n+T-(10+2*a.height/2)-(I?T:0):n-T+(10+2*a.height/2)+(I?T:0):o=t.yAxis.isInversed?o-a.height+v.bottom+(I?R:0):o+R-v.bottom-(I?R:0);break;case"middle":t.isTransposed?n=t.yAxis.isInversed?n+T/2-(I?T:0):n-(T/2+a.width/4)+(I?T:0):o=t.yAxis.isInversed?o-R/2+(I?R:0):o+(R/2+a.height/4)-(I?R:0);break;default:t.isTransposed?n=t.yAxis.isInversed?n-(10+2*a.height/2)-(I?T:0):n+(10+2*a.height/2)+(I?T:0):o=t.yAxis.isInversed?o+(10+2*a.height/2)+(I?R:0):o-(10+2*a.height/2)-(I?R:0)}g&&"far"==g?n+=T/2:g&&"near"==g&&(n-=T/2),f&&"near"==f?o+="bottom"==c?a.height/3:a.height+10:f&&"far"==f&&(o-="bottom"==c?a.height/3:10+a.height/2)}else if("polar"==r||"radar"==r)o+=a.height/4,"bottom"==c?o+=a.height:"top"==c&&(o-=a.height),g&&"far"==g?n+=a.width:g&&"near"==g&&(n-=a.width),f&&"near"==f?o+=a.height/2:f&&"far"==f&&(o-=a.height/2);else{if(("rangearea"==y||"splinerangearea"==y)&&s.high!=s.y)if(1==this.chartObj.model.series.length){var j=this.chartObj.model.chartRegions[i][d].region.length;o=this.chartObj.model.chartRegions[i][d].region[j-1].Y,n=this.chartObj.model.chartRegions[i][d].region[j-1].X}else{for(var L=0,A=0;A<i;A++){var E=this.chartObj.model.series[A].type;L+="rangearea"!=E&&"splinerangearea"!=E?this.chartObj.model.series[A].points.length:1,"hidden"==this.chartObj.model.series[A].visibility&&(L=0)}var j=this.chartObj.model.chartRegions[L][d].region.length;o=this.chartObj.model.chartRegions[L][d].region[j-1].Y,n=this.chartObj.model.chartRegions[L][d].region[j-1].X}this.chartObj.model.requireInvertedAxes?"top"==c?n+=10:"bottom"==c&&(n-=10+2*a.width/2):"bottom"==c?p.showEdgeLabels?o+=2*a.height-10:o+=2*a.height+10:"top"==c&&(o-=10),g&&"far"==g?n+=a.width+10:g&&"near"==g&&(n-=a.width+10),f&&"near"==f?o+=7:f&&"far"==f?o-=10:"bubble"!=r&&"scatter"!=r||"middle"!=c||(o+=a.height/4)}return{x:n,y:o}},changeCrossHairSymbol:function(t,i,s,a,r){var n=r.drawType;if(!ej.util.isNullOrUndefined(i)){var o={};t=e.extend(!0,{},r.marker,t),o=e.extend(!0,{},this.chartObj.model.crosshair.marker,o);var l=r.points[s],d=r.type.toLowerCase();if(ej.util.isNullOrUndefined(o.shape)&&(o.shape=t.shape,"bubble"==d&&(o.border.color=l.border&&l.border.color?l.border.color:r.border.color,o.border.width=l.border&&l.border.width?l.border.width:r.border.width)),this.chartObj.model.crosshair.visible&&!ej.util.isNullOrUndefined(o.fill)||"bubble"==r.type.toLowerCase()||"scatter"==r.type.toLowerCase()||"scatter"==n||("cross"==o.shape.toLowerCase()||"horizline"==o.shape.toLowerCase()||"vertline"==o.shape.toLowerCase()?o.fill="array"==jQuery.type(this.chartObj.model.seriesColors[a])?this.chartObj.model.seriesColors[a][0].color:this.chartObj.model.seriesColors[a]:o.fill=t.border.color),"bubble"!=r.type.toLowerCase()||this.chartObj.model.enableCanvasRendering)o.size.width<=t.size.width&&(o.size.width=t.size.width+2),o.size.height<=t.size.height&&(o.size.height=t.size.height+2),!ej.util.isNullOrUndefined(o.border.color)&&this.chartObj.model.crosshair.visible||(ej.util.isNullOrUndefined(t.fill)?"scatter"==d?(o.border.color=l.border&&l.border.color?l.border.color:r.border.color,o.border.width=l.border&&l.border.width?l.border.width:r.border.width):o.border.color=l.fill?l.fill:"array"==jQuery.type(this.chartObj.model.seriesColors[a])?this.chartObj.model.seriesColors[a][0].color:this.chartObj.model.seriesColors[a]:o.border.color="array"==jQuery.type(t.fill)?t.fill._gradientStop[0].color:t.fill);else{var h=e(this.chartObj.gSeriesEle).find("#"+this.chartObj.svgObject.id+"_Series"+a+"_Point"+s)[0].getBoundingClientRect();o.size.width=(h.right-h.left)/2+15,o.size.height=(h.bottom-h.top)/2+15}}return r._trackMarker=o,o},dataLabelSymbol:function(t,i,s,a,r,n,o,l,d,h){var c=d;if("None"!=l){var u=c.model._isPieOfPie?ej.ejChart._getPieOfPiePoint(s,i):i._visiblePoints[s],p={startX:a,startY:r};if(!d.model.enable3D)var m=h||c.gDataLabelEle[t];m=c.model.enableCanvasRendering?null:m;var g=e.extend(!0,{},i.marker,u.marker),f={interior:g.dataLabel.fill,opacity:g.dataLabel.opacity,borderColor:g.dataLabel.border.color,borderWidth:g.dataLabel.border.width},_={style:f,gradientName:"symbol",symbolEle:m,width:n,height:o,point:u,location:p,seriesIndex:t,
pointIndex:s,element:g,symbolName:l,id:c.svgObject.id+"_dataLabel_series"+t+"_"+s};this.drawSymbolStyle(_,c)}},drawSymbolStyle:function(t,i){var s,a,r,n=i,o=t.style,l=t.gradientName,d=t.symbolEle,h=t.width,c=(t.dashArray,t.height),u=t.point,p=t.location,m=t.seriesIndex,g=t.visibility,f=t.pointIndex,_=t.element,v=t.symbolName,b=t.trackSymbol,x=n.model.enableCanvasRendering,y="polaraxes"==n.model.AreaType,w=n.model.series[m];null!=o&&(""!=o.borderColor&&(s=o.borderColor?o.borderColor:"transparent"),r=o.opacity,a=o.borderWidth<0?0:o.borderWidth);var C=null;if(o.interior)C=ej.util.isNullOrUndefined(o.interior._gradientStop)?o.interior:o.interior._gradientStop;else if(u.fill)C="array"==jQuery.type(u.fill)?u.fill[0].color:u.fill;else{var S=n.model.pointColors;C="none"!=n.model.AreaType?"waterfall"==w.type.toLowerCase()&&w.positiveFill&&(u.y>0||u.waterfallSum>0)?w.positiveFill:n.model.seriesColors[m]:"array"==jQuery.type(S[f])?S[f][0].color:S[f]}n.symbolColorName=n.svgRenderer.createGradientElement(l+m,C,0,0,0,e(n.svgObject).height(),d);var T={dashArray:t.dashArray,ShapeSize:{width:h,height:c},Style:{BorderColor:s,BorderWidth:a,Opacity:r,Visibility:g,Color:n.symbolColorName},PointIndex:f,SeriesIndex:m,Imageurl:_.imageUrl,Image:_.image,ID:t.id},R=e.extend({},ej.EjSvgRender.commonChartEventArgs);if(R.data={location:p,style:T},n._trigger("symbolRendering",R),!R.cancel)if(x)if(p.startY=n.model.requireInvertedAxes?p.startY:p.startY+(w.yAxis.y?w.yAxis.y-n.canvasY:0),p.startX=n.model.requireInvertedAxes?p.startX:p.startX+(w.xAxis.x?w.xAxis.x-n.canvasX:0),R.data.location.startY=p.startY,ej.util.isNullOrUndefined(b))"cartesianaxes"==n.model.AreaType?(d=n.svgRenderer.ctx,n.svgRenderer.ctx.save(),n.svgRenderer.ctx.beginPath(),n.model.requireInvertedAxes?n.svgRenderer.ctx.rect(w.yAxis.x,w.xAxis.y,w.yAxis.width,w.xAxis.height):n.svgRenderer.ctx.rect(w.xAxis.x,w.yAxis.y,w.xAxis.width,w.yAxis.height),n.svgRenderer.ctx.clip(),ej.EjSvgRender.chartSymbol["_draw"+v](R.data.location,R.data.style,n,d),n.svgRenderer.ctx.restore()):(x&&y&&(n.svgRenderer.ctx.save(),n.svgRenderer.ctx.beginPath(),n.svgRenderer.ctx.arc(n.model.centerX,n.model.centerY,n.model.Radius,0,2*Math.PI,!1),n.svgRenderer.ctx.clip()),ej.EjSvgRender.chartSymbol["_draw"+v](R.data.location,R.data.style,n,d),x&&y&&n.svgRenderer.ctx.restore());else{var k=R.data.style.PointIndex,O=R.data.style.SeriesIndex;n.model.series[O].highlightSettings.enable||0==e("#"+n._id+"_selection_"+O+"_"+k+"_canvas").length&&n.svgRenderer.trackSymbol(R.data.style,R.data.location,v,b,n)}else{var D,k=R.data.style.PointIndex,O=R.data.style.SeriesIndex,I=w.type;if(w.highlightSettings.enable&&b&&!n.model.crosshair.visible){var o=e.extend(!0,R.data.style),j=w.highlightSettings;o.Style.Color="none"==j.pattern.toLowerCase()||""==j.pattern?""!=j.color?j.color:o.Style.Color:"url(#"+j.pattern.toLowerCase()+"_Highlight_2D_"+O+")",o.Style.Opacity=j.opacity,o.Style.BorderColor=j.border.color,o.Style.BorderWidth=j.border.width,D="bubble"==I?e("#"+this.chartObj.svgObject.id+"_Series"+O+"_Point"+k).attr("class"):e("#"+this.chartObj.svgObject.id+"_Series"+O+"_Point"+k+"_symbol").attr("class"),D!="SelectionStyleseries"+O&&ej.EjSvgRender.chartSymbol["_draw"+v](R.data.location,o,n,n.model.enable3D?i.chart3D:d)}else(D="scatter"==I?e("#"+n.svgObject.id+"_Series"+O+"_Point"+k+"_symbol").attr("class"):e("#"+n.svgObject.id+"_Series"+O+"_Point"+k).attr("class"))!="SelectionStyleseries"+O&&ej.EjSvgRender.chartSymbol["_draw"+v](R.data.location,R.data.style,n,n.model.enable3D?i.chart3D:d)}!i.chart3D&&"pieofpie"!=I&&"none"==n.model.AreaType&&e(d).children().not("defs").length>n.model._visibleSeries[m]._visiblePoints.length&&e(d.childNodes[t.pointIndex]).replaceWith(e(d.childNodes[e(d.childNodes).length-1]))},drawSymbol:function(t,i,s,a,r,n,o,l){i.drawType;ej.util.isNullOrUndefined(this.chartObj)&&(this.chartObj=n);var d=i._visiblePoints[s],h=i.type.toLowerCase(),c="boxandwhisker"==h?l:s,u="bubble"==h||"scatter"==h?i.border.dashArray:"",p="None",m=this.changeCrossHairSymbol(d.marker?d.marker:i.marker,o,s,t,i);if("boxandwhisker"==h.toLowerCase())var g=m||e.extend(!0,{},i.outlierSettings,d.outlierSettings,i.border,d.border);else var g=m||e.extend(!0,{},i.marker,d.marker);if(e.each(this.chartObj.model.symbolShape,function(e){g.shape.toLowerCase()==e.toLowerCase()&&(p=e)}),"None"!=p){var f,_,v,b="cartesianaxes"==this.chartObj.model.AreaType?{startX:a+this.chartObj.canvasX,startY:r+this.chartObj.canvasY}:{startX:a,startY:r};if("scatter"==h||"scatter"==i.drawType)f=d.border&&d.border.color?d.border.color:i.border.color,_=d.border&&d.border.width?d.border.width:i.border.width,v={interior:g.fill,opacity:g.opacity,borderColor:f,borderWidth:_};else if("boxandwhisker"==h)f=d.border&&d.border.color?"transparent"==d.border.color?this.chartObj._saturationColor(i.fill,-.6):d.border.color:"transparent"==i.border.color?this.chartObj._saturationColor(i.fill,-.6):i.border.color,_=d.border&&d.border.width?d.border.width:i.border.width,v={interior:i.fill,opacity:i.opacity,borderColor:f,borderWidth:_};else var v={interior:g.fill,opacity:g.opacity,borderColor:g.border.color,borderWidth:g.border.width};var x=o?this.chartObj.gTrackerEle:this.chartObj.gSymbolGroupEle[t],y=o?this.chartObj.svgObject.id+"_trackSymbol_"+t+"_"+c:this.chartObj.svgObject.id+"_Series"+t+"_Point"+c+"_symbol",w=o?"TrackSymbol":"symbol",C=g.size.width,S=g.size.height,T={style:v,gradientName:w,symbolEle:x,width:C,height:S,point:d,location:b,seriesIndex:t,pointIndex:s,element:g,visibility:d.visible?"visible":"hidden",symbolName:p,trackSymbol:o,id:y,dashArray:u};if(!this.chartObj.model.enableCanvasRendering)var R=this.chartObj.gSymbolGroupEle[t].childNodes[s];if(ej.util.isNullOrUndefined(R)||"image"!=p.toLowerCase()?this.drawSymbolStyle(T,this.chartObj,o):(R.setAttribute("width",C),R.setAttribute("height",S)),"scatter"==i.type.toLowerCase()){var k=i.xAxis.x,O=i.yAxis.y;this.chartObj.model.enableCanvasRendering&&(k=0,O=0);var D={X:k+b.startX-S/2,Y:O+b.startY-C/2,Height:S,Width:C};ej.EjSvgRender.utils._addRegion(this.chartObj,D,i,null,s)}}},chartAreaType:"cartesianAxes",requireInvertedAxes:!1,stackingSeries:!1,hiloTypes:!1},ej.ejLineSeries=t(ej.EjSeriesRender),ej.seriesTypes.line=ej.ejLineSeries,ej.ejStepLineSeries=t(ej.EjSeriesRender,{draw:function(e,t){var i,s=this.chartObj=e;t._animationType="path";var a=ej.EjSvgRender.utils._getStringBuilder(),r=t,n=this.setLineSeriesStyle(r);r.sorting&&(r.points=ej.DataManager(r.points,ej.Query().sortBy("xValue")).executeLocal());for(var o,l,d,h,c,u=t._visiblePoints=r.points.length>100||!r.enableSmartLabels?this.improveChartPerformance(r):this._isVisiblePoints(r),p=null,m="M",g=-1,f=0;f<u.length;f++)o=u[f],o.visible?(null!=p&&(u.length>g+1&&(l={xValue:u[g+1].xValue,YValues:[p.YValues[0]]},d=ej.EjSvgRender.utils._getPoint(p,r),h=ej.EjSvgRender.utils._getPoint(l,r),c=ej.EjSvgRender.utils._getPoint(u[g+1],r),s=this.chartObj,a.append(m+" "+(d.X+s.canvasX)+" "+(d.Y+s.canvasY)+" L "+(h.X+s.canvasX)+" "+(h.Y+s.canvasY)+" L "+(c.X+s.canvasX)+" "+(c.Y+s.canvasY)+" ")),m="L"),p=o,g=f):(p=null,m="M");i=a.toString(),this._drawLinePath(r,n,i),this.chartObj.dragPoint?this.chartObj.svgRenderer.append(this.chartObj.gPreviewSeriesGroupEle,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)}}),ej.ejStepAreaSeries=t(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e,t._animationType="path";var s,a=this.chartObj.model.requireInvertedAxes,r=ej.EjSvgRender.utils._getStringBuilder(),n=t,o=this.setAreaSeriesStyle(n);n.sorting&&(n.points=ej.DataManager(n.points,ej.Query().sortBy("xValue")).executeLocal());var l,d=t._visiblePoints=n.points.length>100||!n.enableSmartLabels?this.improveChartPerformance(n):this._calculateVisiblePoints(n).visiblePoints,h=0,c=null;"category"==n.xAxis._valueType.toLowerCase()&&"onticks"!=n.xAxis.labelPlacement.toLowerCase()&&(h=.5);for(var u=ej.EjSeriesRender.prototype.getOrigin(this,n,i),p=null,m=!0,g=this.chartObj,f=0;f<=d.length;f++)if(f<d.length)if(d[f].visible){if(l={xValue:d[f].xValue-h,YValues:[d[f].y]},x=ej.EjSvgRender.utils._getPoint(l,n),!p){p={xValue:d[f].xValue-h,YValues:[u]};var _=ej.EjSvgRender.utils._getPoint(p,n);r.append("M "+(_.X+g.canvasX)+" "+(_.Y+g.canvasY)+" ")}if(null!=c){var v={xValue:l.xValue,YValues:[c.YValues[0]]},b=ej.EjSvgRender.utils._getPoint(v,n);if(m&&(r.append("L "+(y.X+g.canvasX)+" "+(y.Y+g.canvasY)+" "),m=!1),r.append("L "+(b.X+g.canvasX)+" "+(b.Y+g.canvasY)+" L "+(x.X+g.canvasX)+" "+(x.Y+g.canvasY)+" "),0==h&&f==d.length-1||f<d.length-1&&!d[f+1].visible){if(h>0){l={xValue:d[f].xValue+h,YValues:[d[f].y]};var x=ej.EjSvgRender.utils._getPoint(l,n);a?r.append("L "+(x.X+g.canvasX)+" "+(x.Y+g.canvasY)+" L "+(x.Y+g.canvasX)+" "+(_.X+g.canvasY)+" "):r.append("L "+(x.X+g.canvasX)+" "+(x.Y+g.canvasY)+" L "+(x.X+g.canvasX)+" "+(_.Y+g.canvasY)+" ")}else a?r.append("L "+(_.X+g.canvasY)+" "+(x.Y+g.canvasX)+" "):r.append("L "+(x.X+g.canvasX)+" "+(_.Y+g.canvasY)+" ");p=null,c=null,m=!0}}if(p){var y=x;c=l}}else p=null,c=null,m=!0;else if(d[f-1].visible&&h>0){l={xValue:d[f-1].xValue+h,YValues:[d[f-1].y]};var x=ej.EjSvgRender.utils._getPoint(l,n);a?r.append("L "+(x.X+g.canvasX)+" "+(x.Y+g.canvasY)+" L "+(x.Y+g.canvasX)+" "+(_.X+g.canvasY)+" "):r.append("L "+(x.X+g.canvasX)+" "+(x.Y+g.canvasY)+" L "+(x.X+g.canvasX)+" "+(_.Y+g.canvasY)+" ")}s=r.toString(),this.drawAreaPath(n,o,s),this.chartObj.dragPoint?this.chartObj.svgRenderer.append(this.chartObj.gPreviewSeriesGroupEle,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)}}),ej.seriesTypes.steparea=ej.ejStepAreaSeries,ej.seriesTypes.stepline=ej.ejStepLineSeries,ej.ejColumnSeries=t(ej.EjSeriesRender,{draw:function(t,i,s){this.chartObj=t;var a=this.chartObj.model.requireInvertedAxes;i._animationType="rect","cylinder"==i.columnFacet&&(i._animationType="cylinder");var r=i,n=r.cornerRadius,o=e.inArray(r,this.chartObj.model._visibleSeries),l=ej.EjSeriesRender.prototype.getOrigin(this,r,s),d=this.getSideBySideInfo(r,s);r.dragSettings.enable&&(r.sidebysideInfo=d);var h=this._isVisiblePoints(r),c=ej.EjSvgRender.utils._getTransform(r.xAxis,r.yAxis,a),u={id:this.chartObj.svgObject.id+"_SeriesGroup_"+o,transform:"translate("+c.x+","+c.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(u);for(var p=this,m=0;m<h.length;m++){var g=m,f=h[m];h[m].marker;var _=f.YValues[0],v=l;if(f.visible){var b,x=p.calculateSides(f,d),y=x.x1,w=x.x2,C=this.chartObj.setStyle(p,r,o,g),S=p.getRectangle(y,_,w,v,r,t),T=Math.min(0,S.Width),R=Math.min(0,S.Height);if((0==T||0==R)&&S.Width>0){i={id:p.chartObj.svgObject.id+"_Series"+o+"_Point"+g,x:S.X+p.chartObj.canvasX,y:S.Y+p.chartObj.canvasY,width:S.Width,height:S.Height,fill:C.interior,plot:_<0?"negative":"positive","stroke-width":C.borderWidth,opacity:C.opacity,stroke:C.borderColor,"stroke-dasharray":C.dashArray};var k={isColumn:!0,stacking:!1,isLastSeries:!0};if("cylinder"==r.columnFacet)p.chartObj.svgRenderer.drawCylinder(i,p.gSeriesGroupEle,k);else if("object"!=typeof n&&n>0||n.topLeft>0||n.bottomLeft>0||n.topRight>0||n.bottomRight>0){var O=ej.EjSvgRender.utils._calculateroundedCorner(n,i);i.d=O,r._animationType="path",p.chartObj.svgRenderer.drawPath(i,p.gSeriesGroupEle)}else"rectangle"==r.columnFacet&&p.chartObj.svgRenderer.drawRect(i,p.gSeriesGroupEle);var D=ej.EjSvgRender.utils._getSvgXY(S.X,S.Y,r,p.chartObj);b={X:D.X,Y:D.Y,Width:S.Width,Height:S.Height},ej.EjSvgRender.utils._addRegion(p.chartObj,b,r,f,g)}i.plot=_<0?"negative":"positive",f.symbolLocation=a?{X:_<(r.xAxis._crossValue||0)&&!r.yAxis.isInversed||r.yAxis.isInversed&&_>(r.xAxis._crossValue||0)?S.X:S.X+S.Width,Y:S.Y+S.Height/2}:{X:S.X+S.Width/2,Y:_<(r.xAxis._crossValue||0)&&!r.yAxis.isInversed||r.yAxis.isInversed&&_>(r.xAxis._crossValue||0)?S.Y+S.Height:S.Y}}}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},isRegion:!0}),ej.seriesTypes.column=ej.ejColumnSeries,ej.ejStackingColumnSeries=t(ej.EjSeriesRender,{draw:function(t,i,s){this.chartObj=t,i._animationType="rect","cylinder"==i.columnFacet&&(i._animationType="cylinder");var a=this.chartObj.model.requireInvertedAxes,r=i,n=r.cornerRadius,o=e.inArray(r,this.chartObj.model._visibleSeries),l=this.getSideBySideInfo(r,s),d=this._isVisiblePoints(r),h=ej.EjSvgRender.utils._getTransform(r.xAxis,r.yAxis,a),c={id:this.chartObj.svgObject.id+"_SeriesGroup_"+o,transform:"translate("+h.x+","+h.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(c);for(var u=this,p=0;p<d.length;p++){var m=p,g=r._visiblePoints[p],f=r.stackedValue.StartValues[p],_=r.stackedValue.EndValues[p];if(g.visible){var v,b=u.calculateSides(g,l),x=b.x1,y=b.x2,w=this.chartObj.setStyle(u,r,o,m),C=u.getRectangle(x,_,y,f,r,t),S=Math.min(0,C.Width),T=Math.min(0,C.Height),R="stackingcolumn100"==r.type;if((0==S||0==T)&&C.Width>0){i={id:u.chartObj.svgObject.id+"_Series"+o+"_Point"+m,x:C.X+u.chartObj.canvasX,y:C.Y+u.chartObj.canvasY,width:C.Width,height:C.Height,fill:w.interior,"stroke-width":w.borderWidth,plot:_<0?"negative":"positive",opacity:w.opacity,stroke:w.borderColor,"stroke-dasharray":w.dashArray};var k={isColumn:!0,stacking:R,isLastSeries:r.stackedValue.stackedSeries};if("cylinder"==r.columnFacet)u.chartObj.svgRenderer.drawCylinder(i,u.gSeriesGroupEle,k);else if("object"!=typeof n&&n>0||n.topLeft>0||n.bottomLeft>0||n.topRight>0||n.bottomRight>0){var O=ej.EjSvgRender.utils._calculateroundedCorner(n,i);i.d=O,r._animationType="path",u.chartObj.svgRenderer.drawPath(i,u.gSeriesGroupEle)}else"rectangle"==r.columnFacet&&u.chartObj.svgRenderer.drawRect(i,u.gSeriesGroupEle);var D=ej.EjSvgRender.utils._getSvgXY(C.X,C.Y,r,u.chartObj);v={X:D.X,Y:D.Y,Width:C.Width,Height:C.Height};var I=C.Width/2,j=Math.round(C.Height),L=Math.round(I/4);L==j&&(v.Height=C.Height+2*L),ej.EjSvgRender.utils._addRegion(u.chartObj,v,r,g,m)}g.symbolLocation=a?{X:_<(r.xAxis._crossValue||0)&&!r.yAxis.isInversed||r.yAxis.isInversed&&_>(r.xAxis._crossValue||0)?C.X:C.X+C.Width,Y:C.Y+C.Height/2}:{X:C.X+C.Width/2,Y:_<(r.xAxis._crossValue||0)&&!r.yAxis.isInversed||r.yAxis.isInversed&&_>(r.xAxis._crossValue||0)?C.Y+C.Height:C.Y}}}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},stackingSeries:!0,isRegion:!0}),ej.seriesTypes.stackingcolumn=ej.ejStackingColumnSeries,ej.seriesTypes.stackingcolumn100=ej.ejStackingColumnSeries,ej.seriesTypes.rangecolumn=ej.ejRangeColumnSeries,ej.ejRangeColumnSeries=t(ej.EjSeriesRender,{draw:function(t,i,s){this.chartObj=t,i._animationType="rect";var a=this.chartObj.model.requireInvertedAxes,r=i,n=r.cornerRadius,o=e.inArray(r,this.chartObj.model._visibleSeries),l=this.getSideBySideInfo(r,s),d=this._isVisiblePoints(r),h=ej.EjSvgRender.utils._getTransform(r.xAxis,r.yAxis,a),c={id:this.chartObj.svgObject.id+"_SeriesGroup_"+o,transform:"translate("+h.x+","+h.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(c);for(var u=this,p=0;p<d.length;p++){var m=p,g=d[p],f=g.YValues[0],_=g.YValues[1];if(g.visible){var v,b=u.calculateSides(g,l),x=b.x1,y=b.x2,w=this.chartObj.setStyle(u,r,o,m),C=u.getRectangle(x,f,y,_,r,t),S=(u.chartObj.model.m_AreaBounds.Width,Math.min(0,C.Width)),T=Math.min(0,C.Height);if(0==S||0==T){if(i={id:u.chartObj.svgObject.id+"_Series"+o+"_Point"+m,x:C.X+u.chartObj.canvasX,y:C.Y+u.chartObj.canvasY,width:C.Width,height:C.Height,fill:w.interior,"stroke-width":w.borderWidth,opacity:w.opacity,stroke:w.borderColor,"stroke-dasharray":w.dashArray},"object"!=typeof n&&n>0||n.topLeft>0||n.bottomLeft>0||n.topRight>0||n.bottomRight>0){var R=ej.EjSvgRender.utils._calculateroundedCorner(n,i);i.d=R,r._animationType="path",u.chartObj.svgRenderer.drawPath(i,u.gSeriesGroupEle)}else u.chartObj.svgRenderer.drawRect(i,u.gSeriesGroupEle,h.y);u.chartObj.svgRenderer.drawRect(i,u.gSeriesGroupEle,h.y);var k=ej.EjSvgRender.utils._getSvgXY(C.X,C.Y,r,u.chartObj);v={X:k.X,Y:k.Y,Width:C.Width,Height:C.Height},ej.EjSvgRender.utils._addRegion(u.chartObj,v,r,g,m)}"waterfall"==r.type.toLowerCase()&&(f=g.waterfallSum?g.waterfallSum:g.y),g.symbolLocation=a?{X:f<0&&!r.yAxis.isInversed||r.yAxis.isInversed&&f>0?C.X:C.X+C.Width,Y:C.Y+C.Height/2}:{X:C.X+C.Width/2,Y:f<0&&!r.yAxis.isInversed||r.yAxis.isInversed&&f>0?C.Y+C.Height:C.Y}}}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},hiloTypes:!0,isRegion:!0}),ej.seriesTypes.rangecolumn=ej.ejRangeColumnSeries,ej.ejBoxandwhiskerSeries=t(ej.EjSeriesRender,{draw:function(t,i,s){this.chartObj=t;var a=this.chartObj.model.requireInvertedAxes;i._animationType="rect";var r=i,n=e.inArray(r,this.chartObj.model._visibleSeries),o=(ej.EjSeriesRender.prototype.getOrigin(this,r,s),this.getSideBySideInfo(r,s)),l=this._isVisiblePoints(r),d=ej.EjSvgRender.utils._getTransform(r.xAxis,r.yAxis,a),h=0,c={id:this.chartObj.svgObject.id+"_SeriesGroup_"+n,transform:"translate("+d.x+","+d.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(c);for(var u=this,p=0;p<l.length;p++){var m,g,f,_,v,b,x,y,w,C,S,n,T,R,k,O,D,I,j,L,A,E,P=p,M=l[p];if(l[p].marker,m=M.YValues[0],g=u.calculateMean(m,r,P),f=g.UpperQuartile,_=g.LowerQuartile,M.visible){v=u.calculateSides(M,o),b=v.x1,x=v.x2,y=this.chartObj.setStyle(u,r,n,P),w=u.getRectangle(b,f,x,_,r,t),C=Math.min(0,w.Width),S=Math.min(0,w.Height),n=e.inArray(r,this.chartObj.model._visibleSeries),this.chartObj.setStyle(this,r,n,p),ej.EjSvgRender.utils._getStringBuilder(),T={xValue:M.xValue,YValues:g.midvalue},R=ej.EjSvgRender.utils._getPoint(T,r);var F="transparent"==y.borderColor?this.chartObj._saturationColor(y.interior,-.6):y.borderColor;if((0==C||0==S)&&w.Width>0){i={id:u.chartObj.svgObject.id+"_Series"+n+"_Point"+P,x:w.X+u.chartObj.canvasX,y:w.Y+u.chartObj.canvasY,width:w.Width,height:w.Height,fill:y.interior,"stroke-width":y.borderWidth,plot:f<0?"negative":"positive",opacity:y.opacity,stroke:F,"stroke-dasharray":y.dashArray},O={id:this.chartObj.svgObject.id+"_Series"+n+"_Point"+P+"_median",x1:r._isTransposed?R.X+u.chartObj.canvasX:w.X+u.chartObj.canvasX,y1:r._isTransposed?w.Y+u.chartObj.canvasY:R.Y+u.chartObj.canvasY,x2:r._isTransposed?R.X+u.chartObj.canvasX:w.X+w.Width+u.chartObj.canvasX,y2:r._isTransposed?w.Y+w.Height+u.chartObj.canvasY:R.Y+u.chartObj.canvasY,"stroke-width":y.borderWidth,stroke:F},u.chartObj.svgRenderer.drawRect(i,u.gSeriesGroupEle),u.chartObj.svgRenderer.drawLine(O,u.gSeriesGroupEle),D=u.calculateBoxAndWhiskerPath(i,w,O,g,r,M,P),i.d=D.lowerWhisker,i.id=i.id+"_whisker",u.chartObj.svgRenderer.drawPath(i,u.gSeriesGroupEle),i.d=D.upperWhisker,u.chartObj.svgRenderer.drawPath(i,u.gSeriesGroupEle),1==r.showMedian&&(i.d=D.mean,u.chartObj.svgRenderer.drawPath(i,u.gSeriesGroupEle));for(var N=0;N<g.outliers.length;N++)I={xValue:M.xValue,YValues:g.outliers[N]},j=ej.EjSvgRender.utils._getPoint(I,r),j.X=r._isTransposed?j.X:w.X+w.Width/2,j.Y=r._isTransposed?w.Y+w.Height/2:j.Y,this.drawSymbol(n,r,P,j.X,j.Y,null,null,h),h++,L=ej.EjSvgRender.utils._getSvgXY(j.X,j.Y,r,u.chartObj),A={X:L.X-r.outlierSettings.size.width/2,Y:L.Y-r.outlierSettings.size.height/2,Width:r.outlierSettings.size.width,Height:r.outlierSettings.size.height},ej.EjSvgRender.utils._addRegion(u.chartObj,A,r,M,P);E=ej.EjSvgRender.utils._getSvgXY(w.X,w.Y,r,u.chartObj),k={X:E.X,Y:E.Y,Width:w.Width,Height:w.Height},ej.EjSvgRender.utils._addRegion(u.chartObj,k,r,M,P)}}}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},isRegion:!0}),ej.seriesTypes.boxandwhisker=ej.ejBoxandwhiskerSeries,ej.ejWaterfallSeries=t(ej.EjSeriesRender,{draw:function(t,i,s){ej.ejRangeColumnSeries.prototype.draw.call(this,t,i,s),i._animationType="rect";var a=this.chartObj.model.chartRegions,r=[],n=(this.chartObj.model.m_AreaBounds,e.inArray(i,this.chartObj.model._visibleSeries));i.index=n;for(var o=0,l=0;o<a.length;o++)n==a[o].SeriesIndex&&(r[l]=a[o],l+=1);var d={id:this.chartObj.svgObject.id+"_SeriesGroup_waterfallLine_"+n};this.connectorLineGroup=this.chartObj.svgRenderer.createGroup(d);for(var h,c,u,p,m,g,f,_,v,b,x,y,w,C=0;C<r.length-1;C++)h=ej.EjSvgRender.utils._getStringBuilder(),c=r[C].Region.Bounds,u=r[C+1].Region.Bounds,i.isTransposed?(x=Math.ceil(c.X),Math.ceil(c.Width),y=Math.ceil(u.X),Math.ceil(u.Width),f=Math.ceil(c.X+c.Width),_=Math.ceil(u.X+u.Width),b=f==_?c.X+c.Width:x==y?c.X:x==_?c.X:c.X+c.Width,h.append("M "+b+" "+(c.Y+c.Height)+" L "+b+" "+u.Y)):(m=Math.ceil(c.Y),Math.ceil(c.Height),g=Math.ceil(u.Y),Math.ceil(u.Height),f=Math.ceil(c.Y+c.Height),p=m==g?c.Y:f==g?u.Y:u.Y+u.Height,h.append("M "+c.X+" "+p+" L "+(u.X+u.Width)+" "+p)),""!=(w=h.toString())&&c.Height>=0&&(v={id:this.chartObj.svgObject.id+"_waterFall_"+n+"_connectorLine_"+C,fill:"none","stroke-dasharray":i.connectorLine.dashArray,"stroke-width":i.connectorLine.width,stroke:i.connectorLine.color,opacity:i.connectorLine.opacity,d:w},this.chartObj.svgRenderer.drawPath(v,this.connectorLineGroup));this.chartObj.svgRenderer.append(this.connectorLineGroup,this.chartObj.gSeriesEle),i.enableAnimation&&!i._animatedSeries&&this.chartObj.svgRenderer._setAttr(this.connectorLineGroup,{visibility:"hidden"})},hiloTypes:!1,isRegion:!0}),ej.seriesTypes.waterfall=ej.ejWaterfallSeries,ej.ejStackingBarSeries=t(ej.EjSeriesRender,{draw:function(t,i,s){this.chartObj=t,i._animationType="rect","cylinder"==i.columnFacet&&(i._animationType="cylinder");var a=this.chartObj.model.requireInvertedAxes,r=i,n=r.cornerRadius,o=e.inArray(r,this.chartObj.model._visibleSeries),l=this.getSideBySideInfo(r,s),d=this._isVisiblePoints(r),h=ej.EjSvgRender.utils._getTransform(r.xAxis,r.yAxis,a),c={id:this.chartObj.svgObject.id+"_SeriesGroup_"+o,transform:"translate("+h.x+","+h.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(c);for(var u=this,p=0;p<d.length;p++){var m=p,g=d[p],f=r.stackedValue.EndValues[p],_=r.stackedValue.StartValues[p];if(g.visible){var v=u.calculateSides(g,l),b=v.x1,x=v.x2,y=this.chartObj.setStyle(u,r,o,m),w=u.getRectangle(b,f,x,_,r,t),C=Math.min(0,w.Width),S=Math.min(0,w.Height),T="stackingbar100"==r.type;if(0==C||0==S){var R;i={id:u.chartObj.svgObject.id+"_Series"+o+"_Point"+m,x:w.X+u.chartObj.canvasX,y:w.Y+u.chartObj.canvasY,width:w.Width,height:w.Height,fill:y.interior,"stroke-width":y.borderWidth,opacity:y.opacity,stroke:y.borderColor,"stroke-dasharray":y.dashArray};var k={isColumn:!1,stacking:T,isLastSeries:r.stackedValue.stackedSeries};if("cylinder"==r.columnFacet)u.chartObj.svgRenderer.drawCylinder(i,u.gSeriesGroupEle,k);else if("object"!=typeof n&&n>0||n.topLeft>0||n.bottomLeft>0||n.topRight>0||n.bottomRight>0){var O=ej.EjSvgRender.utils._calculateroundedCorner(n,i);i.d=O,r._animationType="path",u.chartObj.svgRenderer.drawPath(i,u.gSeriesGroupEle)}else"rectangle"==r.columnFacet&&u.chartObj.svgRenderer.drawRect(i,u.gSeriesGroupEle);var D=ej.EjSvgRender.utils._getSvgXY(w.X,w.Y,r,u.chartObj);R={X:D.X,Y:D.Y,Width:w.Width,Height:w.Height},ej.EjSvgRender.utils._addRegion(u.chartObj,R,r,g,m)}g.symbolLocation=a?{X:f<(r.yAxis._crossValue||0)&&!r.yAxis.isInversed||r.yAxis.isInversed&&f>(r.yAxis._crossValue||0)?w.X:w.X+w.Width,Y:w.Y+w.Height/2}:{X:w.X+w.Width/2,Y:f<(r.yAxis._crossValue||0)&&!r.yAxis.isInversed||r.yAxis.isInversed&&f>(r.yAxis._crossValue||0)?w.Y+w.Height:w.Y}}}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},stackingSeries:!0,requireInvertedAxes:!0,isRegion:!0}),ej.seriesTypes.stackingbar=ej.ejStackingBarSeries,ej.seriesTypes.stackingbar100=ej.ejStackingBarSeries,ej.ejBarSeries=t(ej.EjSeriesRender,{draw:function(t,i,s){this.chartObj=t,i._animationType="rect","cylinder"==i.columnFacet&&(i._animationType="cylinder");var a=this.chartObj.model.requireInvertedAxes,r=i,n=r.cornerRadius,o=e.inArray(r,this.chartObj.model._visibleSeries),l=ej.EjSeriesRender.prototype.getOrigin(this,r,s),d=(e.extend(!0,{},this.chartObj.model.seriesStyle,r.style),this.getSideBySideInfo(r,s));r.dragSettings.enable&&(r.sidebysideInfo=d);var h=this._isVisiblePoints(r),c=ej.EjSvgRender.utils._getTransform(r.xAxis,r.yAxis,a),u={id:this.chartObj.svgObject.id+"_SeriesGroup_"+o,transform:"translate("+c.x+","+c.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(u);for(var p=this,m=0;m<h.length;m++){var g=m,f=h[m],_=f.YValues[0],v=l;if(f.visible){var b=p.calculateSides(f,d),x=b.x1,y=b.x2,w=this.chartObj.setStyle(p,r,o,g),C=p.getRectangle(x,_,y,v,r,t),S=Math.min(0,C.Width),T=Math.min(0,C.Height);if(0==S||0==T){var R;i={id:p.chartObj.svgObject.id+"_Series"+o+"_Point"+g,x:C.X+p.chartObj.canvasX,y:C.Y+p.chartObj.canvasY,width:C.Width,height:C.Height,fill:w.interior,"stroke-width":w.borderWidth,plot:_<0?"negative":"positive",opacity:w.opacity,stroke:w.borderColor,"stroke-dasharray":w.dashArray};var k={isColumn:!1,stacking:!1,isLastSeries:!0};if("cylinder"==r.columnFacet)p.chartObj.svgRenderer.drawCylinder(i,p.gSeriesGroupEle,k);else if("object"!=typeof n&&n>0||n.topLeft>0||n.bottomLeft>0||n.topRight>0||n.bottomRight>0){var O=ej.EjSvgRender.utils._calculateroundedCorner(n,i);i.d=O,r._animationType="path",p.chartObj.svgRenderer.drawPath(i,p.gSeriesGroupEle)}else"rectangle"==r.columnFacet&&p.chartObj.svgRenderer.drawRect(i,p.gSeriesGroupEle);var D=ej.EjSvgRender.utils._getSvgXY(C.X,C.Y,r,p.chartObj);R={X:D.X,Y:D.Y,Width:C.Width,Height:C.Height},ej.EjSvgRender.utils._addRegion(p.chartObj,R,r,f,g)}f.symbolLocation=a?{X:_<(r.xAxis._crossValue||0)&&!r.yAxis.isInversed||r.yAxis.isInversed&&_>(r.xAxis._crossValue||0)?C.X:C.X+C.Width,Y:C.Y+C.Height/2}:{X:C.X+C.Width/2,Y:_<(r.xAxis._crossValue||0)&&!r.yAxis.isInversed||r.yAxis.isInversed&&_>(r.xAxis._crossValue||0)?C.Y+C.Height:C.Y}}}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},requireInvertedAxes:!0,isRegion:!0}),ej.seriesTypes.bar=ej.ejBarSeries,ej.ejStackingAreaSeries=t(ej.EjSeriesRender,{draw:function(e,t){this.chartObj=e,t._animationType="path";var i,s,a,r=ej.EjSvgRender.utils._getStringBuilder(),n=t,o=this.setAreaSeriesStyle(n),l=this._isVisiblePoints(n),d=Math.max(t.yAxis.visibleRange.min,n.stackedValue.StartValues[0]),h=this.chartObj.canvasX,c=this.chartObj.canvasY,u={xValue:l[0].xValue,YValues:[d]},p=ej.EjSvgRender.utils._getPoint(u,n),m=0,g=n.stackedValue.EndValues.length;r.append("M "+(p.X+h)+" "+(p.Y+c)+" ");for(var f=0;f<=g;f++)if(f!=g&&l[f].visible)s={xValue:l[f].xValue,YValues:[n.stackedValue.EndValues[f]]},l[f].visible&&(a=l[f].location=ej.EjSvgRender.utils._getPoint(s,n),r.append("L "+(a.X+h)+" "+(a.Y+c)+" "),l[f].YValues[0]=s.YValues[0]);else{d=n.stackedValue.StartValues[f+1];for(var _=f-1;_>=m;_--)s={xValue:l[_].xValue,YValues:[n.stackedValue.StartValues[_]]},a=ej.EjSvgRender.utils._getPoint(s,n),r.append("L "+(a.X+h)+" "+(a.Y+c)+" ");if(l[f+1]&&l[f+1].visible){var u={xValue:l[f+1].xValue,YValues:[n.stackedValue.StartValues[f+1]]},p=ej.EjSvgRender.utils._getPoint(u,n);r.append("M "+(p.X+h)+" "+(p.Y+c)+" ")}m=f+1}i=r.toString(),this.drawAreaPath(n,o,i),this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},stackingSeries:!0}),ej.seriesTypes.stackingarea=ej.ejStackingAreaSeries,ej.seriesTypes.stackingarea100=ej.ejStackingAreaSeries,ej.ejAreaSeries=t(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e;var s;t._animationType="path";var a=ej.EjSvgRender.utils._getStringBuilder(),r=t,n=this.setAreaSeriesStyle(r),o=this.chartObj;r.sorting&&(r.points=ej.DataManager(r.points,ej.Query().sortBy("xValue")).executeLocal());var l,d=this.chartObj.dragPoint?r.pointCollection:this._isVisiblePoints(r),h=ej.EjSeriesRender.prototype.getOrigin(this,r,i),c=[];if(c[0]=o.canvasX,c[1]=o.canvasY,d.length>0){for(var u=0;u<d.length;u++)if(d[u].visible)if(d.length>u+1){if(!l){l={xValue:d[u].xValue,YValues:[h]};var p=ej.EjSvgRender.utils._getPoint(l,r);a.append("M "+p.X+" "+p.Y+" ")}var p=ej.EjSvgRender.utils._getPoint(d[u],r);if(a.append("L "+p.X+" "+p.Y+" "),!d[u+1].visible){var m={xValue:d[u].xValue,YValues:[h]},g=ej.EjSvgRender.utils._getPoint(m,r),f=ej.EjSvgRender.utils._getPoint(l,r);a.append("L "+g.X+" "+g.Y+" L "+f.X+" "+f.Y+" "),l=null}}else if(d[u-1]&&d[u-1].visible){var p=ej.EjSvgRender.utils._getPoint(d[u],r);a.append("L "+p.X+" "+p.Y+" ")}var _={xValue:d[d.length-1].xValue,YValues:[h]},v=ej.EjSvgRender.utils._getPoint(_,r);d.length>1&&a.append("L "+v.X+" "+v.Y+" "),s=a.toString(),this.drawAreaPath(r,n,s,c)}this.chartObj.dragPoint?this.chartObj.svgRenderer.append(this.chartObj.gPreviewSeriesGroupEle,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)}}),ej.seriesTypes.area=ej.ejAreaSeries,ej.ejRangeAreaSeries=t(ej.EjSeriesRender,{draw:function(t,i){this.chartObj=t;var s;i._animationType="path";var a=ej.EjSvgRender.utils._getStringBuilder(),r=i,n=this.setAreaSeriesStyle(r),o=e.inArray(r,this.chartObj.model._visibleSeries);r.points=ej.DataManager(r.points,ej.Query().sortBy("xValue")).executeLocal();var l=this._isVisiblePoints(r),d=[];d[0]=this.chartObj.canvasX,d[1]=this.chartObj.canvasY;for(var h,c=[],u=0;u<l.length;u++)if(c[u]={Region:{PointIndex:u},SeriesIndex:o,region:[]},l[u].visible){if(!h){var p=l[u].low;h={xValue:l[u].xValue,YValues:[p]};var m=ej.EjSvgRender.utils._getPoint(h,r);a.append("M "+m.X+" "+m.Y+" ")}var m=ej.EjSvgRender.utils._getPoint(l[u],r);if(a.append("L "+m.X+" "+m.Y+" "),c[u].region.push({X:m.X,Y:m.Y}),0!=u&&c[u-1].region.push({X:m.X,Y:m.Y}),u+1<l.length&&!l[u+1].visible&&u+1!=l.length-1){for(var g=u;g>=0&&l[g].visible;g--){p=l[g].low;var f={xValue:l[g].xValue,YValues:[p]},_=ej.EjSvgRender.utils._getPoint(f,r);a.append("L "+_.X+" "+_.Y+" "),c[g].region.push({X:_.X,Y:_.Y}),0!=g&&c[g-1].region.push({X:_.X,Y:_.Y})}h=null}}for(var u=l.length-1;u>=0;u--)if(l[u].visible){p=l[u].low;var f={xValue:l[u].xValue,YValues:[p]},_=ej.EjSvgRender.utils._getPoint(f,r);a.append("L "+_.X+" "+_.Y+" "),c[u].region.push({X:_.X,Y:_.Y}),0!=u&&c[u-1].region.push({X:_.X,Y:_.Y})}else{if(l.length>u&&l[u].visible){var _=ej.EjSvgRender.utils._getPoint(l[u],r);a.append("L "+_.X+" "+_.Y+" ");break}if(u!=l.length-1){for(var v=0,b=u-1;b>=0;b--)if(l[b].visible)v++;else if(!l[b].visible)break;u-=v}}s=a.toString(),this.chartObj.model.chartRegions.push(c),this.drawAreaPath(r,n,s,d),this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},hiloTypes:!0}),ej.seriesTypes.rangearea=ej.ejRangeAreaSeries,ej.ejSplineRangeAreaSeries=t(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e,(new ej.seriesTypes.splinearea).draw(e,t,i)},chartAreaType:"cartesianAxes",hiloTypes:!0}),ej.seriesTypes.splinerangearea=ej.ejSplineRangeAreaSeries,ej.ejSplineSeries=t(ej.EjSeriesRender,{draw:function(e,t,i){i.seriesCollection||(i.seriesCollection={},t._name=ej.util.isNullOrUndefined(t.name)?"":t.name.replace(/ /g,"")),i.seriesCollection[t._name]||(i.seriesCollection[t._name]={}),this.chartObj=e,t._animationType="path";for(var s=t,a="",r=ej.EjSvgRender.utils._getStringBuilder(),n=this.setLineSeriesStyle(s),o=this.chartObj.dragPoint?s.pointCollection:this._isVisiblePoints(s),l=i.seriesCollection[s._name].naturalSpline||this.naturalSpline(o,s),d=null,h=null,c=-1,u=0,p=i.seriesCollection[s._name].controlPoints||[],m=0;m<o.length;m++){var g=m;if(h=o[m],h.visible){if(null!=d){var f=null,_=null,v=p[u++]||this.getBezierControlPoints(d,h,l[c],l[g],0,s,this);f=v.controlPoint1,_=v.controlPoint2;var b=ej.EjSvgRender.utils._getPoint(d,s),x=ej.EjSvgRender.utils._getPoint(h,s),y=ej.EjSvgRender.utils._getPoint(f,s),w=ej.EjSvgRender.utils._getPoint(_,s),C=this.chartObj;r.append("M "+(b.X+C.canvasX)+" "+(b.Y+C.canvasY)+" C "+(y.X+C.canvasX)+" "+(y.Y+C.canvasY)+" "+(w.X+C.canvasX)+" "+(w.Y+C.canvasY)+" "+(x.X+C.canvasX)+" "+(x.Y+C.canvasY)+" ")}d=h,c=g}else d=null}a=r.toString(),this._drawLinePath(s,n,a),this.chartObj.dragPoint?this.chartObj.svgRenderer.append(this.chartObj.gPreviewSeriesGroupEle,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)}}),ej.seriesTypes.spline=ej.ejSplineSeries,ej.ejSplineAreaSeries=t(ej.EjSeriesRender,{draw:function(t,i,s){s.seriesCollection||(s.seriesCollection={},i._name=ej.util.isNullOrUndefined(i.name)?"":i.name.replace(/ /g,"")),
s.seriesCollection[i._name]||(s.seriesCollection[i._name]={}),this.chartObj=t,i._animationType="path";var a=this.chartObj.model.requireInvertedAxes,r=i,n="",o=ej.EjSvgRender.utils._getStringBuilder(),l=this.setAreaSeriesStyle(r);r.sorting&&(r.points=ej.DataManager(r.points,ej.Query().sortBy("xValue")).executeLocal());var d=this.chartObj.dragPoint?r.pointCollection:this._isVisiblePoints(r),h=s.seriesCollection[r._name].naturalSpline||this.naturalSpline(d,r,0),c=(s.seriesCollection[r._name].naturalSpline1||this.naturalSpline(d,r,1),null),u=null,p=-1,m=[],g=ej.EjSeriesRender.prototype.getOrigin(this,r,s),f=null,_=!0,v=this.chartObj,b=[],x=0,y=s.seriesCollection[r._name].controlPoints||[];b[0]=v.canvasX,b[1]=v.canvasY;var w,C=v.model._seriesIndex,S=null,T=[],R=r.type.toLowerCase(),k=r.emptyPointSettings;v.model._previousSeries=ej.util.isNullOrUndefined(v.model._previousSeries)?null:v.model._previousSeries,r._prevpointIndex=null;for(var O=0;O<d.length;O++){m[O]={Region:{PointIndex:O},SeriesIndex:C,region:[]};var D=O;if(u=d[O],u.YValues[0]=-1!=R.indexOf("stackingsplinearea")?r.stackedValue.EndValues[O]:u.YValues[0],u.visible){if(!f){if(0==C||-1==R.indexOf("stackingsplinearea"))f={xValue:d[O].xValue,YValues:[g]};else{for(var I=e.inArray(i,v.model._visibleSeries),j=I;j>0;j--){var L=v.model.series[j-1];if("hidden"!=L.visibility){S=L.points;break}}f={xValue:d[O].xValue,YValues:[S[O].YValues[0]]}}var A=ej.EjSvgRender.utils._getPoint(f,r)}if("splinerangearea"==R){var E=ej.EjSvgRender.utils._getPoint(d[O],r);m[O].region.push({X:E.X,Y:E.Y}),0!=O&&m[O-1].region.push({X:E.X,Y:E.Y})}if(null!=c){var P=null,M=null;if(-1!=R.indexOf("stackingsplinearea")||"splinerangearea"==R)var F=y[D-1]||this.getBezierControlPoints(c,u,h[p],h[D],0,r,this);else var F=y[x++]||this.getBezierControlPoints(c,u,h[p],h[D],0,r,this);P=F.controlPoint1,M=F.controlPoint2;var N=ej.EjSvgRender.utils._getPoint(c,r),z=ej.EjSvgRender.utils._getPoint(u,r),V=ej.EjSvgRender.utils._getPoint(P,r),B=ej.EjSvgRender.utils._getPoint(M,r);if(_&&(a?o.append("M "+A.X+" "+N.Y+" L "+N.X+" "+N.Y+" "):o.append("M "+N.X+" "+A.Y+" L "+N.X+" "+N.Y+" "),_=!1),o.append("C "+V.X+" "+V.Y+" "+B.X+" "+B.Y+" "+z.X+" "+z.Y+" "),"splinerangearea"==R&&(T[D]=a?"C "+B.low+" "+B.Y+" "+V.low+" "+V.Y+" "+N.low+" "+N.Y+" ":"C "+B.X+" "+B.low+" "+V.X+" "+V.low+" "+N.X+" "+N.low+" "),-1!=R.indexOf("stackingsplinearea")&&(T[D]="C "+B.X+" "+B.Y+" "+V.X+" "+V.Y+" "+N.X+" "+N.Y+" "),(D==d.length-1||D<d.length-1&&!d[O+1].visible)&&((0!=C&&-1!=R.indexOf("stackingsplinearea")||"splinerangearea"==R)&&(f={xValue:d[O].xValue,YValues:"splinerangearea"==R?d[O].YValues:[S[O].YValues[0]]},A=ej.EjSvgRender.utils._getPoint(f,r)),a?o.append("L "+("splinerangearea"==R?z.low:A.X)+" "+z.Y+" "):o.append("L "+z.X+" "+("splinerangearea"==R?A.low:A.Y)+" "),f=null,_=!0,"gap"==k.displayMode.toLowerCase()&&D!=d.length-1&&0!=C&&-1!=R.indexOf("stacking"))){for(var H=ej.util.isNullOrUndefined(r._prevpointIndex)?1:r._prevpointIndex,Y=D;Y>=H&&(d[Y-1].visible&&!ej.util.isNullOrUndefined(v.model._previousSeries));Y--)o.append(v.model._previousSeries[Y]),v.model._previousSeries[Y]="";r._prevpointIndex=D+3}}else-1==R.indexOf("stackingsplinearea")&&-1==R.indexOf("splinerangearea")||D>0&&"gap"==k.displayMode&&this.drawbackCurve(y,r,T,D,u);c=u,p=D}else c=null,(-1!=R.indexOf("stackingsplinearea")||-1!=R.indexOf("splinerangearea"))&&D>0&&"gap"==k.displayMode&&this.drawbackCurve(y,r,T,D,u)}if("splinerangearea"==v.model.series[C].type.toLowerCase())for(var O=d.length-1;O>=0;O--){g=d[O].low;var U={xValue:d[O].xValue,YValues:[g]},W=ej.EjSvgRender.utils._getPoint(U,r);m[O].region.push({X:W.X,Y:W.Y}),0!=O&&m[O-1].region.push({X:W.X,Y:W.Y})}n=o.toString(),-1!=R.indexOf("stackingsplinearea")&&C>0&&(v.model._previousSeries=this._getReversePath(v,C,v.model._previousSeries)),"splinerangearea"==R?(w=this._getReversePath(v,C,T),n=n+w+"Z"):(n=ej.util.isNullOrUndefined(v.model._previousSeries)?n:n+v.model._previousSeries+"Z",v.model._previousSeries=T),"splinerangearea"==R&&this.chartObj.model.chartRegions.push(m),this.drawAreaPath(r,l,n,b),this.chartObj.dragPoint?this.chartObj.svgRenderer.append(this.chartObj.gPreviewSeriesGroupEle,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle),this.chartObj.gSeriesGroupEle=this.gSeriesGroupEle},stackingSeries:!0,_getReversePath:function(e,t,i){var s=e.model.series[t].emptyPointSettings,a="",r=e.model.series[t].points;if(!ej.util.isNullOrUndefined(i)){for(var n=0;n<r.length;n++){var o=n;r[o].visible||r[o].isEmpty&&"gap"!=s.displayMode||(0==o?i[o+1]&&(i[o+1]=""):o==r.length-1?i[o]&&(i[o]=""):(i[o]&&(i[o]=""),i[o+1]&&(i[o+1]="")))}for(var l=i.length-1;l>0;l--)a+=i[l]}return a},drawbackCurve:function(e,t,i,s,a){var r=e[s-1],n=r.controlPoint1,o=r.controlPoint2,l=ej.EjSvgRender.utils._getPoint(t.points[s-1],t),d=(ej.EjSvgRender.utils._getPoint(a,t),ej.EjSvgRender.utils._getPoint(n,t)),h=ej.EjSvgRender.utils._getPoint(o,t);i[s]="C "+h.X+" "+h.Y+" "+d.X+" "+d.Y+" "+l.X+" "+l.Y+" "}}),ej.seriesTypes.splinearea=ej.ejSplineAreaSeries,ej.seriesTypes.stackingsplinearea=ej.ejSplineAreaSeries,ej.seriesTypes.stackingsplinearea100=ej.ejSplineAreaSeries,ej.ejScatterSeries=t(ej.EjSeriesRender,{draw:function(t,i){this.chartObj=t;var s=i;i._animationType="scatter";var a,r,n=e.inArray(i,this.chartObj.model._visibleSeries),o=s.points.length>100||!s.enableSmartLabels?this.improveChartPerformance(s):this._isVisiblePoints(s),l=o.length;i._visiblePoints=o;for(var d=0;d<l;d++){a=o[d];var h=d;r=ej.EjSvgRender.utils._getPoint(a,i),this.drawSymbol(n,i,h,r.X,r.Y)}}}),ej.seriesTypes.scatter=ej.ejScatterSeries,ej.ejBubbleSeries=t(ej.EjSeriesRender,{createBubbleGroup:function(t){var i=e.inArray(t,this.chartObj.model.series),s=this.chartObj.model.m_AreaBounds.X,a=this.chartObj.model.m_AreaBounds.Y,r=t._isTransposed,n=r?s:t.xAxis.x,o=r?a:t.yAxis.y,l={id:this.chartObj.svgObject.id+"_SeriesGroup_"+i,transform:"translate("+n+","+o+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(l)},draw:function(t,i){this.chartObj=t,i._animationType="bubble";var s=i,a=s.cornerRadius;s.points=ej.DataManager(s.points,ej.Query().sortBy("xValue")).executeLocal();var r,n,o,l,d,h,c,u=e.inArray(s,this.chartObj.model._visibleSeries),p=this._isVisiblePoints(s),m=i.bubbleOptions,g=m.radiusMode.toLowerCase(),f=t.model.m_AreaBounds,_=t.model._visibleSeries,v=0,b=Math.max(f.Height,f.Width);if("minmax"==g)c=b/100,r=m.minRadius*c,n=m.maxRadius*c,h=n-r,v=Math.max.apply(0,e.map(p,function(e){return e.YValues[1]}));else{o=b/5/2,r=n=1,h=o*n;for(var x=0;x<_.length;x++)if("bubble"==_[x].type.toLowerCase()&&"visible"==_[x].visibility&&"auto"==_[x].bubbleOptions.radiusMode.toLowerCase()){l=_[x]._visiblePoints;for(var y=0;y<l.length;y++)v=v<l[y].YValues[1]?l[y].YValues[1]:v}}this.createBubbleGroup(s);for(var w=0;w<p.length;w++){var C=p[w],S=w;if(C.visible){v=v||1,d="minmax"==s.bubbleOptions.radiusMode.toLowerCase()?r+h*Math.abs(C.YValues[1]/v):h*Math.abs(C.YValues[1]/v);var T=ej.EjSvgRender.utils._getPoint(C,s),R=this.chartObj.setStyle(this,s,u,S),i={id:this.chartObj.svgObject.id+"_Series"+u+"_Point"+S,cx:T.X+this.chartObj.canvasX,cy:T.Y+this.chartObj.canvasY,r:d,fill:R.interior,cornerRadius:a,"stroke-width":R.borderWidth,"stroke-dasharray":R.dashArray,opacity:R.opacity,stroke:R.borderColor};if("object"!=typeof a&&a>0||a.topLeft>0||a.bottomLeft>0||a.topRight>0||a.bottomRight>0){var k=ej.EjSvgRender.utils.calculateroundedCorner(i);i.d=k,this.chartObj.svgRenderer.drawPath(i,this.gSeriesGroupEle)}else C.radius=d;this.chartObj.svgRenderer.drawCircle(i,this.gSeriesGroupEle);var O,D,I,j,L=T.X,A=T.Y,E=d;D=L-E+(s.isTransposed?this.chartObj.model.m_AreaBounds.X:s.xAxis.x),I=A-E+(s.isTransposed?this.chartObj.model.m_AreaBounds.Y:s.yAxis.y),j=2*E,O=2*E;var P={X:D,Y:I,Width:O,Height:j};ej.EjSvgRender.utils._addRegion(this.chartObj,P,s,null,w)}}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)}}),ej.seriesTypes.bubble=ej.ejBubbleSeries,ej.ejhiloSeries=t(ej.EjSeriesRender,{draw:function(t,i,s){this.chartObj=t,i._animationType="hilo";var a=this.chartObj.model.requireInvertedAxes,r=i;r.points=ej.DataManager(r.points,ej.Query().sortBy("xValue")).executeLocal();var n=this._isVisiblePoints(r),o=this.getSideBySideInfo(r,s),l=null,d=e.inArray(r,this.chartObj.model._visibleSeries),h=ej.EjSvgRender.utils._getTransform(r.xAxis,r.yAxis,a),c={id:this.chartObj.svgObject.id+"_SeriesGroup_"+d,transform:"translate("+h.x+","+h.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(c);for(var u=0;u<n.length;u++){l=n[u];var p=u;if(l.visible){var m="";if(ej.util.isNullOrUndefined(l.YValues[0])||ej.util.isNullOrUndefined(l.YValues[1]))continue;var g=this.chartObj.setStyle(this,r,d,p),f=this.chartObj.setHiloStyle(r,p,d),_={},v={};l.YValues[0]<l.YValues[1]?(_={xValue:l.xValue+o.Median,YValues:[l.YValues[0]]},v={xValue:l.xValue+o.Median,YValues:[l.YValues[1]]}):(_={xValue:l.xValue+o.Median,YValues:[l.YValues[1]]},v={xValue:l.xValue+o.Median,YValues:[l.YValues[0]]});var b=ej.EjSvgRender.utils._getPoint(_,r),x=ej.EjSvgRender.utils._getPoint(v,r);m="M "+(b.X+this.chartObj.canvasX)+" "+(b.Y+this.chartObj.canvasY)+" L "+(x.X+this.chartObj.canvasX)+" "+(x.Y+this.chartObj.canvasY)+" ";var y={point1:b,point2:x};this._drawHiloPath(r,g,f,m,u,y)}}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},hiloTypes:!0}),ej.seriesTypes.hilo=ej.ejhiloSeries,ej.ejhiloopencloseSeries=t(ej.EjSeriesRender,{draw:function(t,i,s){this.chartObj=t;var a=this.chartObj.model.requireInvertedAxes;i._animationType="hilo";var r=i;r.points=ej.DataManager(r.points,ej.Query().sortBy("xValue")).executeLocal();var n=this._isVisiblePoints(r),o=this.getSideBySideInfo(r,s),l=null,d=this.chartObj.model.palette,h=e.inArray(r,this.chartObj.model._visibleSeries),c=ej.EjSvgRender.utils._getTransform(r.xAxis,r.yAxis,a),u={id:this.chartObj.svgObject.id+"_SeriesGroup_"+h,transform:"translate("+c.x+","+c.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(u);for(var p,m=0;m<n.length;m++){var g=m;if(l=n[m],l.visible){var f="",_=!!ej.util.isNullOrUndefined(r.drawMode)||("both"==r.drawMode.toLowerCase()||"open"==r.drawMode.toLowerCase()),v=!!ej.util.isNullOrUndefined(r.drawMode)||("both"==r.drawMode.toLowerCase()||"close"==r.drawMode.toLowerCase()),b={},x={},y={},w={};l.YValues[0]<l.YValues[1]?(b={xValue:l.xValue+o.Median,YValues:[l.YValues[0]]},x={xValue:l.xValue+o.Median,YValues:[l.YValues[1]]},y={xValue:l.xValue,YValues:[l.YValues[2]]},w={xValue:l.xValue,YValues:[l.YValues[3]]}):(b={xValue:l.xValue+o.Median,YValues:[l.YValues[1]]},x={xValue:l.xValue+o.Median,YValues:[l.YValues[0]]},y={xValue:l.xValue,YValues:[l.YValues[2]]},w={xValue:l.xValue,YValues:[l.YValues[3]]}),r.fill=r.isFill?r.fill:null,l.YValues[2]<l.YValues[3]?r.bearFillColor=p=ej.util.isNullOrUndefined(r.bearFillColor)?r.fill?r.fill:d&&d.length>0?d[h]:"#339933":r.bearFillColor:r.bullFillColor=p=ej.util.isNullOrUndefined(r.bullFillColor)?r.fill?r.fill:d&&d.length>0?d[h]:"#E51400":r.bullFillColor;var C=this.chartObj.setStyle(this,r,h,g,p),S=this.chartObj.setHiloStyle(r,g,h,p);l.fill?p="array"==jQuery.type(l.interior)?l.fill[0]:l.fill:l._hiloFill=p;var T=this.chartObj.canvasX,R=this.chartObj.canvasY;if(_){var k={xValue:y.xValue+o.Median,YValues:y.YValues},O=ej.EjSvgRender.utils._getPoint(k,r),D={xValue:y.xValue+o.Start,YValues:y.YValues},I=ej.EjSvgRender.utils._getPoint(D,r);f="M "+(O.X+T)+" "+(O.Y+R)+" L "+(I.X+T)+" "+(I.Y+R)+" ";var j={point1:O,point2:I};this._drawHiloPath(r,C,S,f,m,j),f=""}if(v){var L={xValue:w.xValue+o.Median,YValues:w.YValues},A=ej.EjSvgRender.utils._getPoint(L,r),E={xValue:w.xValue+o.End,YValues:w.YValues},P=ej.EjSvgRender.utils._getPoint(E,r);f="M "+(A.X+T)+" "+(A.Y+R)+" L "+(P.X+T)+" "+(P.Y+R)+" ";var M={point1:A,point2:P};this._drawHiloPath(r,C,S,f,m,M),f=""}var F=ej.EjSvgRender.utils._getPoint(b,r),N=ej.EjSvgRender.utils._getPoint(x,r);f="M "+(F.X+T)+" "+(F.Y+R)+" L "+(N.X+T)+" "+(N.Y+R)+" ";var z={point1:F,point2:N};this._drawHiloPath(r,C,S,f,m,z)}}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},hiloTypes:!0}),ej.seriesTypes.hiloopenclose=ej.ejhiloopencloseSeries,ej.ejCandleSeries=t(ej.EjSeriesRender,{draw:function(t,i,s){this.chartObj=t,i._animationType="hilo";var a=this.chartObj.model.requireInvertedAxes,r=i;r.points=ej.DataManager(r.points,ej.Query().sortBy("xValue")).executeLocal();var n=this._isVisiblePoints(r),o=this.getSideBySideInfo(r,s),l=null,d=this.chartObj.model.palette,h=e.inArray(r,this.chartObj.model._visibleSeries),c=ej.EjSvgRender.utils._getTransform(r.xAxis,r.yAxis,a),u={id:this.chartObj.svgObject.id+"_SeriesGroup_"+h,transform:"translate("+c.x+","+c.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(u);for(var p,m=0;m<n.length;m++){l=n[m];var g=m;if(l.visible){var f="",_={},v={},b={},x={};l.YValues[0]<l.YValues[1]?(_={xValue:l.xValue+o.Median,YValues:[l.YValues[0]]},v={xValue:l.xValue+o.Median,YValues:[l.YValues[1]]},b={xValue:l.xValue,YValues:[l.YValues[2]]},x={xValue:l.xValue,YValues:[l.YValues[3]]}):(_={xValue:l.xValue+o.Median,YValues:[l.YValues[1]]},v={xValue:l.xValue+o.Median,YValues:[l.YValues[0]]},b={xValue:l.xValue,YValues:[l.YValues[2]]},x={xValue:l.xValue,YValues:[l.YValues[3]]}),l.YValues[2]<l.YValues[3]?(b={xValue:l.xValue,YValues:[l.YValues[2]]},x={xValue:l.xValue,YValues:[l.YValues[3]]},r.bearFillColor=p=ej.util.isNullOrUndefined(r.bearFillColor)?d&&d.length>0?d[h]:"#339933":r.bearFillColor):(b={xValue:l.xValue,YValues:[l.YValues[3]]},x={xValue:l.xValue,YValues:[l.YValues[2]]},r.bullFillColor=p=ej.util.isNullOrUndefined(r.bullFillColor)?d&&d.length>0?d[h]:"#E51400":r.bullFillColor);var y=this.chartObj.setStyle(this,r,h,g,p),w=this.chartObj.setHiloStyle(r,g,h,p);l.style&&l.style.interior?p="array"==jQuery.type(l.style.interior)?l.style.interior[0]:l.style.interior:l._hiloFill=w;var C=ej.EjSvgRender.utils._getPoint(_,r),S=ej.EjSvgRender.utils._getPoint({xValue:b.xValue+o.Median,YValues:[b.YValues[0]]},r),T=ej.EjSvgRender.utils._getPoint({xValue:x.xValue+o.Median,YValues:[x.YValues[0]]},r),R=ej.EjSvgRender.utils._getPoint(v,r),k=this.chartObj.canvasX,O=this.chartObj.canvasY;f="M "+(C.X+k)+" "+(C.Y+O)+" L "+(S.X+k)+" "+(S.Y+O)+" M "+(T.X+k)+" "+(T.Y+O)+" L "+(R.X+k)+" "+(R.Y+O)+" ";var D={point1:C,point2:S};this._drawHiloPath(r,y,w,f,m,D);var I={xValue:x.xValue+o.Start,YValues:x.YValues},j=ej.EjSvgRender.utils._getPoint(I,r),L={xValue:b.xValue+o.End,YValues:b.YValues},A=ej.EjSvgRender.utils._getPoint(L,r),E=ej.EjSvgRender.utils._correctRect(j.X,j.Y,A.X,A.Y);b.YValues[0]==x.YValues[0]&&(E.Y=j.Y-.5,E.Height=1);var P={id:this.chartObj.svgObject.id+"_Series"+h+"_Point"+m,x:E.X+this.chartObj.canvasX,y:E.Y+this.chartObj.canvasY,width:E.Width,height:E.Height,fill:y.interior,"stroke-width":y.borderWidth,"stroke-dasharray":y.dashArray,stroke:y.borderColor};this.chartObj.svgRenderer.drawRect(P,this.gSeriesGroupEle);var M=ej.EjSvgRender.utils._getSvgXY(E.X,E.Y,r,this.chartObj),F={X:M.X,Y:M.Y,Width:E.Width,Height:E.Height};ej.EjSvgRender.utils._addRegion(this.chartObj,F,r,l,m)}}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},hiloTypes:!0}),ej.seriesTypes.candle=ej.ejCandleSeries,ej.ejPieOfPieSeries=t(ej.EjSeriesRender,{draw:function(e,t){this.chartObj=e,(new ej.seriesTypes.pie).draw(e,t)},chartAreaType:"None"}),ej.seriesTypes.pieofpie=ej.ejPieOfPieSeries,ej.ejPieSeries=t(ej.EjSeriesRender,{draw:function(t,i){this.chartObj=t;var s=i,a=[],r=i.type.toLowerCase(),n=i.collectionIndex,o=0==n?s.pieCoefficient:s.pieOfPieCoefficient,l=this.chartObj.model.enableCanvasRendering,d=this._calculateVisiblePoints(i,this.chartObj).visiblePoints,h=this.calculatingSliceAngle(s),c=e.inArray(s,this.chartObj.model._visibleSeries),u=(this.chartObj.model._visibleSeries.length,this.chartObj.model._visibleSeries[c]);if(u._pieCoefficient=u.pieCoefficient,this.chartObj.model.circularRadius.length>1){for(var p=c;ej.util.isNullOrUndefined(u.zOrder)?p<this.chartObj.model.circularRadius.length:p>=0;ej.util.isNullOrUndefined(u.zOrder)?p++:p--)if(!ej.util.isNullOrUndefined(this.chartObj.model.circularRadius[p])){this.chartObj.model.circularRadius[c]=this.chartObj.model.circularRadius[p]*u._pieCoefficient;break}}else"pieofpie"==r&&""!=u.splitMode?this.chartObj.model.circularRadius[n]=.25*o*Math.min(h.width,h.height):this.chartObj.model.circularRadius[c]=.5*u._pieCoefficient*Math.min(h.width,h.height);var m=Math.min(h.width,h.height);if(m<0)return m;Math.abs(s.endAngle-s.startAngle)<270&&this.pieDoughnutCenter(s);var g={id:this.chartObj.svgObject.id+"_SeriesGroup_"+c};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(g);var f=s.enableAnimation&&!s._animatedSeries?"hidden":"visible",_={id:this.chartObj.svgObject.id+"_TextGroup_"+c,visibility:f};this.chartObj.gSeriesTextEle||(this.chartObj.gSeriesTextEle=[]),this.chartObj.gSeriesTextEle[c]=1==n?this.chartObj.gSeriesTextEle[0]:this.chartObj.svgRenderer.createGroup(_);var v={id:this.chartObj.svgObject.id+"_symbolGroup_"+c,visibility:f};this.chartObj.gSymbolGroupEle||(this.chartObj.gSymbolGroupEle=[]),this.chartObj.gSymbolGroupEle[c]=this.chartObj.svgRenderer.createGroup(v);var b={id:this.chartObj.svgObject.id+"_connectorGroup_"+c,visibility:f};this.chartObj.gConnectorEle||(this.chartObj.gConnectorEle=[]),this.chartObj.gConnectorEle[c]=this.chartObj.svgRenderer.createGroup(b);var x={id:this.chartObj.svgObject.id+"_DataLabel_"+c,visibility:f};this.chartObj.gDataLabelEle||(this.chartObj.gDataLabelEle=[]),this.chartObj.gDataLabelEle[c]=1==n?this.chartObj.gDataLabelEle[0]:this.chartObj.svgRenderer.createGroup(x);for(var y=0;y<d.length;y++){var w=this.chartObj.model._isPieOfPie?d[y].actualIndex:y;if(!isNaN(s._visiblePoints[y].startAngle)){var C=s._visiblePoints[y];if(C.visible){var S=this._calculateArcData(this.chartObj,w,C,s,c,n),T=S.Direction.split(" "),R=this.chartObj.setStyle(this,s,c,y);if(s.startAngle<s.endAngle)var k=!1;else k=!0;if(!this.chartObj.model._isPieOfPie)for(var O=0;O<s.visiblePoints.length;O++)if(C==s.visiblePoints[O]){w=O;break}i={id:this.chartObj.svgObject.id+"_Series"+c+"_Point"+w,fill:R.interior,"stroke-width":R.borderWidth,stroke:R.borderColor,"stroke-dasharray":R.dashArray,"stroke-linecap":s.lineCap,"stroke-linejoin":s.lineJoin,d:S.Direction,opacity:R.opacity,"data-pointIndex":w};var D={id:this.chartObj.svgObject.id+"_Series"+c+"_Point"+w,fill:R.interior,"stroke-width":R.borderWidth,stroke:R.borderColor,"stroke-dasharray":R.dashArray,"stroke-linecap":s.lineCap,"stroke-linejoin":s.lineJoin,d:S.Direction,opacity:R.opacity,radius:"pieofpie"==r?this.chartObj.model.circularRadius[n]:this.chartObj.model.circularRadius[c],start:C.startAngle-1.57,end:C.endAngle-1.57,"data-pointIndex":w,counterClockWise:k,innerR:0,cx:S.centerX,cy:S.centerY,x:T[12],y:T[13]};l?this.chartObj.svgRenderer.drawPath(D,this.gSeriesGroupEle):this.chartObj.svgRenderer.drawPath(i,this.gSeriesGroupEle),L={PointIndex:w,Index:y,StartAngle:C.startAngle,EndAngle:C.endAngle,StartX:this.chartObj.model.startX[w],StartY:this.chartObj.model.startY[w],PieSeriesIndex:n,SeriesIndex:e.inArray(s,this.chartObj.model._visibleSeries)},a.push(L)}}}var c=this.chartObj.model._isPieOfPie?n:c;if(this.chartObj.model._isPieOfPie&&1==n&&u.pieCollections[0].length>0&&0==u.pieCollections[1].length){var I=this._drawEmptyPieOfPie(this.chartObj);this.chartObj.svgRenderer.drawPath(I,this.gSeriesGroupEle)}var j={Radius:this.chartObj.model.circularRadius[c],CenterX:this.chartObj.model.circleCenterX[c],CenterY:this.chartObj.model.circleCenterY[c]},L={Series:s,SeriesData:j,Region:a,SeriesIndex:e.inArray(s,this.chartObj.model._visibleSeries)};this.chartObj.model.chartRegions.push(L),this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},chartAreaType:"None"}),ej.seriesTypes.pie=ej.ejPieSeries,ej.ejDoughnutSeries=t(ej.EjSeriesRender,{draw:function(t,i){this.chartObj=t;var s=i,a=[],r=this._calculateVisiblePoints(i).visiblePoints,n=this.calculatingSliceAngle(s),o=this.chartObj.model.enableCanvasRendering,l=r.length,d=e.inArray(s,this.chartObj.model._visibleSeries),h=(this.chartObj.model._visibleSeries.length,this.chartObj.model._visibleSeries.length,this.chartObj.model._visibleSeries[d]);if(h._doughnutSize=h.doughnutSize,h._doughnutCoefficient=h.doughnutCoefficient,this.chartObj.model.circularRadius.length>1){for(var c=d;ej.util.isNullOrUndefined(h.zOrder)?c<this.chartObj.model.circularRadius.length:c>=0;ej.util.isNullOrUndefined(h.zOrder)?c++:c--)if(!ej.util.isNullOrUndefined(this.chartObj.model.circularRadius[c])){this.chartObj.model.circularRadius[d]=this.chartObj.model.circularRadius[c]*h._doughnutSize;break}}else this.chartObj.model.circularRadius[d]=.5*h._doughnutSize*Math.min(n.width,n.height);var u=Math.min(n.width,n.height);if(u<0)return u;Math.abs(s.endAngle-s.startAngle)<270&&this.pieDoughnutCenter(s),this.chartObj.model.innerRadius[d]=h._doughnutCoefficient*this.chartObj.model.circularRadius[d];var d=(ej.util.isNullOrUndefined(this.chartObj.model.roundingPlaces)||this.chartObj.model.roundingPlaces,e.inArray(s,this.chartObj.model._visibleSeries)),p={id:this.chartObj.svgObject.id+"_SeriesGroup_"+d};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(p);var m=s.enableAnimation&&!s._animatedSeries?"hidden":"visible",g={id:this.chartObj.svgObject.id+"_TextGroup_"+d,visibility:m};this.chartObj.gSeriesTextEle||(this.chartObj.gSeriesTextEle=[]),this.chartObj.gSeriesTextEle[d]=this.chartObj.svgRenderer.createGroup(g);var f={id:this.chartObj.svgObject.id+"_symbolGroup_"+d,visibility:m};this.chartObj.gSymbolGroupEle||(this.chartObj.gSymbolGroupEle=[]),this.chartObj.gSymbolGroupEle[d]=this.chartObj.svgRenderer.createGroup(f);var _={id:this.chartObj.svgObject.id+"_connectorGroup_"+d,visibility:m};this.chartObj.gConnectorEle||(this.chartObj.gConnectorEle=[]),this.chartObj.gConnectorEle[d]=this.chartObj.svgRenderer.createGroup(_);var v={id:this.chartObj.svgObject.id+"_DataLabel_"+d,visibility:m};if(this.chartObj.gDataLabelEle||(this.chartObj.gDataLabelEle=[]),this.chartObj.gDataLabelEle[d]=this.chartObj.svgRenderer.createGroup(v),s._doughnutSize>0&&h._doughnutCoefficient>=0&&s._doughnutSize<=1&&h._doughnutCoefficient<=1)for(var b=0;b<l;b++){var x=s._visiblePoints[b],y=b;if(x.visible){var w=0,C=0,S=this._calculateArcData(this.chartObj,y,x,s,d);if((x.actualIndex==s.explodeIndex||s.explodeAll)&&!this.chartObj.vmlRendering){var T=-.5*Math.PI,R=x.startAngle+T,k=x.endAngle+T-1e-6,O=(R+k)/2;w=this.chartObj.model.circleCenterX[d]+Math.cos(O)*s.explodeOffset,C=this.chartObj.model.circleCenterY[d]+Math.sin(O)*s.explodeOffset}var D=this.chartObj.setStyle(this,s,d,y);if(s.startAngle<s.endAngle)var I=!1;else I=!0;for(var j=0;j<s.visiblePoints.length;j++)if(x==s.visiblePoints[j]){y=j;break}i={id:this.chartObj.svgObject.id+"_Series"+d+"_Point"+y,fill:D.interior,"stroke-width":D.borderWidth,stroke:D.borderColor,"stroke-dasharray":D.dashArray,"stroke-linecap":s.lineCap,opacity:D.opacity,"stroke-linejoin":s.lineJoin,d:S.Direction,"data-pointIndex":y};var L={id:this.chartObj.svgObject.id+"_Series"+d+"_Point"+y,fill:D.interior,"stroke-width":D.borderWidth,stroke:D.borderColor,"stroke-dasharray":D.dashArray,"stroke-linecap":s.lineCap,opacity:D.opacity,"stroke-linejoin":s.lineJoin,d:S.Direction,start:x.startAngle-1.57,end:x.endAngle-1.57,"data-pointIndex":y,radius:this.chartObj.model.circularRadius[d],innerR:this.chartObj.model.innerRadius[d],counterClockWise:I,x:0!=w?w:this.chartObj.model.circleCenterX[d],y:0!=C?C:this.chartObj.model.circleCenterY[d]};o?this.chartObj.svgRenderer.drawPath(L,this.gSeriesGroupEle):this.chartObj.svgRenderer.drawPath(i,this.gSeriesGroupEle),E={PointIndex:y,Index:b,StartAngle:x.startAngle,EndAngle:x.endAngle,StartX:this.chartObj.model.startX[y],StartY:this.chartObj.model.startY[y],SeriesIndex:e.inArray(s,this.chartObj.model._visibleSeries)},a.push(E)}}var A={Radius:this.chartObj.model.circularRadius[d],DRadius:this.chartObj.model.innerRadius[d],CenterX:this.chartObj.model.circleCenterX[d],CenterY:this.chartObj.model.circleCenterY[d]},E={Series:s,SeriesData:A,Region:a,SeriesIndex:e.inArray(s,this.chartObj.model._visibleSeries)};this.chartObj.model.chartRegions.push(E),this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},chartAreaType:"None"}),ej.seriesTypes.doughnut=ej.ejDoughnutSeries,ej.ejPyramidSeries=t(ej.EjSeriesRender,{draw:function(t,i){this.chartObj=t;var s,a=t.model,r=this,n=a.LegendActualBounds,o=i,l=this._calculateVisiblePoints(o).visiblePoints,d=l.length,h=[],c=[],u=a.legend,p=o.marker.dataLabel,m=u.position.toLowerCase(),g=u.border.width,f=0,_=a.title,v=a.title.subTitle,b=a.border.width,x=!(""==_.text||!_.visible||!_.enableTrim),y=!(""==v.text||!v.visible||!v.enableTrim),w=a.title.text&&a.title.visible?ej.EjSvgRender.utils._measureText(a.title.text,e(this.svgObject).width()-a.margin.left-a.margin.right,a.title.font):0,C=a.title.subTitle.text&&a.title.subTitle.visible?ej.EjSvgRender.utils._measureText(a.title.subTitle.text,e(this.svgObject).width()-a.margin.left-a.margin.right,a.title.subTitle.font):0,S=""!=t.model.title.text&&t.model.title.visible?x&&"wrap"==_.textOverflow?w.height*t.model.titleWrapTextCollection.length:x&&"wrapandtrim"==_.textOverflow?w.height*t.model.titleWrapTextCollection.length:w.height:0,T=""!=t.model.title.subTitle.text&&t.model.title.subTitle.visible?y&&"wrap"==v.textOverflow?C.height*t.model.subTitleWrapTextCollection.length:y&&"wrapandtrim"==v.textOverflow?C.height*t.model.subTitleWrapTextCollection.length:C.height:0,R=a.margin.left+a.elementSpacing+2*b+a.elementSpacing+a.margin.right+("right"===m||"left"===m?n.Width+2*g:0),k=(a.title.text&&a.title.visible?a._titleLocation.Y+S+T:a.elementSpacing)+2*b+a.margin.top+a.elementSpacing+a.elementSpacing+("top"===m||"bottom"===m?n.Height+2*g+a.elementSpacing:0);if(p.visible&&"none"!=p.shape&&"outside"==o.labelPosition&&(R+=p.margin.left+p.margin.right),a.chartRegions=[],a.sumofYValues=0,"outside"===o.labelPosition.toLowerCase()){for(var O=0;O<d;O++){var D=ej.EjSvgRender.utils._measureText(ej.util.isNullOrUndefined(l[O].text)?l[O].y:l[O].text,null,o.marker.dataLabel.font).width;f<D&&(f=D)}a.textSize=f}o._enableSmartLabels?(a.actualWidth=.8*(e(t.svgObject).width()-R),a.resWidth=(e(t.svgObject).width()-R-a.actualWidth)/2):(a.actualWidth=e(t.svgObject).width()-R-f,a.resWidth=0);var I=e.inArray(o,a._visibleSeries);a.actualHeight=e(t.svgObject).height()-k;var j=""==t.model.title.subTitle.text?0:T,L=t.pyrX=("left"===m?n.Width+2*g:0)+a.elementSpacing+a.margin.left,A=t.pyrY=("top"===m?n.Height+2*g:0)+(_.text&&_.visible?a._titleLocation.Y+S+j:a.margin.top+a.elementSpacing);c[0]=L,c[1]=A;for(var E=0;E<d;E++)a.sumofYValues+=l[E].YValues[0];var P={id:t.svgObject.id+"_DataLabel_"+I,transform:"translate("+L+","+A+")"};t.gDataLabelEle=[],t.gDataLabelEle[I]=t.svgRenderer.createGroup(P);var M=(ej.util.isNullOrUndefined(a.roundingPlaces)||a.roundingPlaces,{id:t.svgObject.id+"_SeriesGroup_"+I,transform:"translate("+L+","+A+")"});this.gSeriesGroupEle=t.svgRenderer.createGroup(M);var F={id:t.svgObject.id+"_textGroup_"+I,transform:"translate("+L+","+A+")"};t.gSeriesTextEle=[],t.gSeriesTextEle[I]=t.svgRenderer.createGroup(F);var N={id:t.svgObject.id+"_symbolGroup_"+I,transform:"translate("+L+","+A+")"};t.gSymbolGroupEle=[],t.gSymbolGroupEle[I]=t.svgRenderer.createGroup(N);var z={id:t.svgObject.id+"_connectorGroup_"+I,transform:"translate("+L+","+A+")"};for(t.gConnectorEle=[],t.gConnectorEle[I]=t.svgRenderer.createGroup(z),"linear"==o.pyramidMode.toLowerCase()?this.calculateLinearSegments(o):this.calculateSurfaceSegments(o),E=0;E<d;E++){var V=E;if(s=o._visiblePoints[E],s.visible){var B=this._getPyramidData(o,V),H=t.setStyle(this,o,0,V);i={id:t.svgObject.id+"_Series"+I+"_Point"+V,fill:H.interior,"stroke-width":H.borderWidth,stroke:H.borderColor,"stroke-dasharray":H.dashArray,"stroke-linecap":o.lineCap,"stroke-linejoin":o.lineJoin,opacity:H.opacity,pointIndex:V,d:B.Direction},t.svgRenderer.drawPath(i,this.gSeriesGroupEle,c),o.marker.dataLabel.template&&ej.EjSvgRender.utils._getSeriesTemplateSize(s,V,o,!0,t),s.xLocation=B.PositionX,s.yLocation=B.PositionY,s.connectorLine=B.Connector,s.startX=B.startX,s.startY=B.startY,s.Polygon=B.Polygon,Y={PointIndex:V,Line1:B.Line1,Line2:B.Line2,Line3:B.Line3,Line4:B.Line4,Polygon:B.Polygon},h.push(Y)}}var Y={Series:o,Region:h,SeriesIndex:e.inArray(o,a._visibleSeries)};a.chartRegions.push(Y),this.gSeriesGroupEle&&(e(this.gSeriesGroupEle.childNodes[V]).bind("mousemove",function(e){e.target=r.gSeriesGroupEle.childNodes[V],r.chartObj.chartInteractiveBehavior(e)}),t.svgRenderer.append(this.gSeriesGroupEle,t.gSeriesEle))},_getPyramidData:function(t,i){var s=this.chartObj.model,a=t._visiblePoints[i].marker,r=t._visiblePoints[i].actualIndex,n=t.explodeIndex==r||t.explodeAll?t.explodeOffset:0,o=s.resWidth,l=s.pyramidData[i].CurrY,d=s.pyramidData[i].CurrY+s.pyramidData[i].Height,h=.5*(1-s.pyramidData[i].CurrY),c=.5*(1-d),u=(t.points[i],{x:o+n+h*s.actualWidth,y:l*s.actualHeight}),p={x:o+n+(1-h)*s.actualWidth,y:l*s.actualHeight},m={x:o+n+(1-c)*s.actualWidth,y:d*s.actualHeight},g={x:o+n+c*s.actualWidth,y:d*s.actualHeight},f="M "+u.x+" "+u.y+" L "+p.x+" "+p.y+" L "+m.x+" "+m.y+" L "+g.x+" "+g.y+" z",_=[{x:u.x,y:u.y},{x:p.x,y:p.y},{x:m.x,y:m.y},{x:g.x,y:g.y}];if(a&&a.dataLabel&&a.dataLabel.visible||(!a||!a.dataLabel)&&t.marker.dataLabel.visible){var v,b,x=(p.x+m.x)/2,y=(p.y+m.y)/2;if("outside"===t.labelPosition.toLowerCase()){v=(p.x+m.x)/2,b=(p.y+m.y)/2;var w=("left"==this.chartObj.model.legend.position.toLowerCase()||"right"==this.chartObj.model.legend.position.toLowerCase()?this.chartObj.model.LegendActualBounds.Width:0)+this.chartObj.model.elementSpacing+this.chartObj.model.margin.left;if(ej.util.isNullOrUndefined(t.marker.dataLabel.connectorLine.height))if(t._enableSmartLabels)var C=e(this.chartObj.svgObject).width()-(w+v+o+2*this.chartObj.model.elementSpacing);else var C=e(this.chartObj.svgObject).width()-(w+v+this.chartObj.model.textSize+this.chartObj.model.elementSpacing);else C=t.marker.dataLabel.connectorLine.height;var S=this.getXCordinate(v,C,0),T=this.getYCordinate(b,C,0),R="M "+v+" "+b+" L "+S+" "+T;v=S,b=T}else v=(u.x+p.x)/2,b=(m.y+u.y)/2}return{Direction:f,PositionX:v,PositionY:b,Connector:R,Line1:u,Line2:p,Line3:m,Line4:g,startX:x,startY:y,Polygon:_}},calculateLinearSegments:function(e){var t=0,i=this.chartObj.model;i.pyramidData=[];for(var s=e.gapRatio>=0?e.gapRatio<=1?e.gapRatio:1:0,a=1/(i.sumofYValues*(1+s/(1-s))),r=e._visiblePoints.length,n=0;n<r;n++)if(e._visiblePoints[n].visible||e._visiblePoints[n].gapMode){var o=a*e._visiblePoints[n].YValues[0];i.pyramidData[n]={CurrY:t,Height:o},t+=s/(r-1)+o}},calculateSurfaceSegments:function(e){var t=e._visiblePoints.length,i=this.chartObj.model;i.pyramidData=[];var s=0,a=[],r=[],n=e.gapRatio>=0?e.gapRatio<=1?e.gapRatio:1:0,o=n/(t-1),l=this.getSurfaceHeight(0,i.sumofYValues);for(h=0;h<t;h++)(e._visiblePoints[h].visible||e._visiblePoints[h].gapMode)&&(a[h]=s,r[h]=this.getSurfaceHeight(s,Math.abs(e._visiblePoints[h].YValues[0])),s+=r[h]+o*l);for(var d=1/(s-o*l),h=0;h<t;h++)if(e._visiblePoints[h].visible||e._visiblePoints[h].gapMode){var c=d*a[h];i.pyramidData[h]={CurrY:c,Height:d*r[h]}}},getSurfaceHeight:function(e,t){var i=this.solveQuadraticEquation(1,2*e,-t);return i||0},solveQuadraticEquation:function(e,t,i){var s,a;if(0!=e){var r=t*t-4*e*i;if(r>=0){var n=Math.sqrt(r);return s=(-t-n)/(2*e),a=(-t+n)/(2*e),Math.max(s,a)}}else if(0!=t)return s=-i/t,a=-i/t,Math.max(s,a);return!1},chartAreaType:"None"}),ej.seriesTypes.pyramid=ej.ejPyramidSeries,ej.ejFunnelSeries=t(ej.EjSeriesRender,{draw:function(t,i){this.chartObj=t
;var s,a=t.model,r=a.legend,n=r.position.toLowerCase(),o=a.LegendActualBounds,l=this,d=i,h=this._calculateVisiblePoints(d).visiblePoints,c=h.length,u=[],p=d.marker,m=r.border.width,g=[],f=0,_=""==t.model.title.text?"":a.title,v=""==t.model.title.subTitle.text?"":a.title.subTitle,b=a.border.width,x=!(""==_.text||!_.visible||!_.enableTrim),y=!(""==v.text||!v.visible||!v.enableTrim),w=a.title.text&&a.title.visible?ej.EjSvgRender.utils._measureText(a.title.text,e(this.svgObject).width()-a.margin.left-a.margin.right,a.title.font):0,C=a.title.subTitle.text&&a.title.subTitle.visible?ej.EjSvgRender.utils._measureText(a.title.subTitle.text,e(this.svgObject).width()-a.margin.left-a.margin.right,a.title.subTitle.font):0,S=""!=t.model.title.text&&t.model.title.visible?x&&"wrap"==_.textOverflow?w.height*t.model.titleWrapTextCollection.length:x&&"wrapandtrim"==_.textOverflow?w.height*t.model.titleWrapTextCollection.length:w.height:0,T=""!=t.model.title.subTitle.text&&t.model.title.subTitle.visible?y&&"wrap"==v.textOverflow?C.height*t.model.subTitleWrapTextCollection.length:y&&"wrapandtrim"==v.textOverflow?C.height*t.model.subTitleWrapTextCollection.length:C.height:0,R=a.margin.left+a.elementSpacing+a.elementSpacing+a.margin.right+2*b+("right"===n||"left"===n?o.Width+2*m:0),k=(a.title.text&&a.title.visible?a._titleLocation.Y+S+T:a.elementSpacing)+a.margin.top+2*b+a.elementSpacing+a.elementSpacing+("top"===n||"bottom"===n?o.Height+2*m+a.elementSpacing:0);if(p.visible&&"none"!=p.shape&&"outside"==d.labelPosition&&(R+=p.margin.left+p.margin.right),a.chartRegions=[],a.sumofYValues=0,"outside"===d.labelPosition.toLowerCase()){for(var O=0;O<c;O++){var D=ej.EjSvgRender.utils._measureText(ej.util.isNullOrUndefined(h[O].text)?h[O].y:h[O].text,null,d.marker.dataLabel.font).width;f<D&&(f=D)}a.textSize=f}d._enableSmartLabels?(a.actualWidth=.8*(e(t.svgObject).width()-R),a.resWidth=(e(t.svgObject).width()-R-a.actualWidth)/2):(a.actualWidth=e(t.svgObject).width()-R-f,a.resWidth=0);var I=""==t.model.title.subTitle.text?0:T;a.actualHeight=e(t.svgObject).height()-k;var j=t.pyrX=("left"===n?o.Width+2*m:0)+a.elementSpacing+a.margin.left,L=t.pyrY=("top"===n?o.Height+2*m:0)+(a.title.text&&a.title.visible?a._titleLocation.Y+S+I:a.margin.top+a.elementSpacing);g[0]=j,g[1]=L;for(var A=0;A<c;A++)a.sumofYValues+=h[A].YValues[0];var E=(ej.util.isNullOrUndefined(a.roundingPlaces)||a.roundingPlaces,e.inArray(d,a._visibleSeries)),P={id:t.svgObject.id+"_SeriesGroup_"+E,transform:"translate("+j+","+L+")"};this.gSeriesGroupEle=t.svgRenderer.createGroup(P);var M={id:t.svgObject.id+"_DataLabel_"+E,transform:"translate("+j+","+L+")"};t.gDataLabelEle=[],t.gDataLabelEle[E]=t.svgRenderer.createGroup(M);var F={id:t.svgObject.id+"_textGroup_"+E,transform:"translate("+j+","+L+")"};t.gSeriesTextEle=[],t.gSeriesTextEle[E]=t.svgRenderer.createGroup(F);var N={id:t.svgObject.id+"_symbolGroup_"+E,transform:"translate("+j+","+L+")"};t.gSymbolGroupEle=[],t.gSymbolGroupEle[E]=t.svgRenderer.createGroup(N);var z={id:t.svgObject.id+"_connectorGroup_"+E,transform:"translate("+j+","+L+")"};t.gConnectorEle=[],t.gConnectorEle[E]=t.svgRenderer.createGroup(z);var V=0,B=a;B.funnelData=[];for(var H=d.gapRatio>=0?d.gapRatio<=1?d.gapRatio:1:0,Y=1/(B.sumofYValues*(1+H/(1-H))),U=H/c,O=c-1;O>=0;O--)if(d._visiblePoints[O].visible||d._visiblePoints[O].gapMode){var W=Y*d._visiblePoints[O].YValues[0];B.funnelData[O]={CurrY:V,Height:W},V+=W+U}for(A=0;A<c;A++){var X=A;if(s=d._visiblePoints[A],s.visible){var G=this._getFunnelData(d,X,t),$=t.setStyle(this,d,0,X);i={id:t.svgObject.id+"_Series"+E+"_Point"+X,fill:$.interior,"stroke-width":$.borderWidth,stroke:$.borderColor,"stroke-dasharray":$.dashArray,"stroke-linecap":d.lineCap,"stroke-linejoin":d.lineJoin,opacity:$.opacity,pointIndex:X,d:G.Direction},t.svgRenderer.drawPath(i,this.gSeriesGroupEle,g),d.marker.dataLabel.template&&ej.EjSvgRender.utils._getSeriesTemplateSize(s,X,d,!0,t),s.xLocation=G.PositionX,s.yLocation=G.PositionY,s.connectorLine=G.Connector,s.startX=G.startX,s.startY=G.startY,s.Polygon=G.Polygon,q={PointIndex:X,Line1:G.Line1,Line2:G.Line2,Line3:G.Line3,Line4:G.Line4,Line5:G.Line5,Line6:G.Line6,Polygon:G.Polygon},u.push(q)}}var q={Series:d,Region:u,SeriesIndex:e.inArray(d,a._visibleSeries)};a.chartRegions.push(q),this.gSeriesGroupEle&&e(this.gSeriesGroupEle.childNodes[X]).bind("mousemove",function(e){e.target=l.gSeriesGroupEle.childNodes[X],l.chartObj.chartInteractiveBehavior(e)}),t.svgRenderer.append(this.gSeriesGroupEle,t.gSeriesEle)},_getFunnelData:function(t,i,s){var a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,j,L,A=this.chartObj.model,E=t._visiblePoints[i],P=E.marker,M=t.marker,F=t.funnelWidth,N=t.funnelHeight,z=A.actualHeight,V=A.actualWidth,B=A.elementSpacing,H=A.legend.position.toLowerCase(),Y=E.actualIndex,U=A.resWidth,W=t.explodeIndex==Y||t.explodeAll?t.explodeOffset:0;return j=-1!=N.indexOf("%")?z*(parseInt(N)/100):parseInt(N),L=-1!=F.indexOf("%")?V*(parseInt(F)/100):parseInt(F),g=A.funnelData[i].CurrY*z,_=g+A.funnelData[i].Height*z,I=L+(z-j-g)/(z-j)*(V-L),d=V/2-I/2,u=d+I,I=_>z-j||z==j?L:L+(z-j-_)/(z-j)*(V-L),c=V/2-I/2,m=c+I,g>=z-j?(d=c=h=V/2-L/2,u=m=p=V/2+L/2):_>z-j&&(h=c=V/2-I/2,p=m=h+I,f=z-j),S={x:U+W+d,y:g},T={x:U+W+u,y:g},k={x:U+W+m,y:_},O={x:U+W+c,y:_},R={x:U+W+m,y:_},D={x:U+W+c,y:_},f&&(R={x:U+W+p,y:f},D={x:U+W+h,y:f}),r="M "+S.x+" "+S.y+" L "+T.x+" "+T.y+" L "+R.x+" "+R.y+" L "+k.x+" "+k.y+" L "+O.x+" "+O.y+" L "+D.x+" "+D.y+" z",n=[{x:S.x,y:S.y},{x:T.x,y:T.y},{x:R.x,y:R.y},{x:k.x,y:k.y},{x:O.x,y:O.y},{x:D.x,y:D.y}],(P&&P.dataLabel&&P.dataLabel.visible||(!P||!P.dataLabel)&&M.dataLabel.visible)&&(w=(T.x+R.x)/2,C=(T.y+R.y)/2,"outside"===t.labelPosition.toLowerCase()?(x=(T.x+R.x)/2,y=(T.y+R.y)/2,a=("left"==H||"right"==H?A.LegendActualBounds.Width:0)+B+A.margin.left,o=ej.util.isNullOrUndefined(M.dataLabel.connectorLine.height)?t._enableSmartLabels?e(this.chartObj.svgObject).width()-(a+x+U+2*B):e(this.chartObj.svgObject).width()-(x+A.textSize+B):M.dataLabel.connectorLine.height,v=this.getXCordinate(x,o,0),b=this.getYCordinate(y,o,0),l="M "+x+" "+y+" L "+v+" "+b,x=v,y=b):(x=(S.x+T.x)/2,y=(S.y+k.y)/2)),{Direction:r,PositionX:x,PositionY:y,Connector:l,Line1:S,Line2:T,Line3:R,Line4:k,Line5:O,Line6:D,startX:w,startY:C,Polygon:n}},chartAreaType:"None"}),ej.seriesTypes.funnel=ej.ejFunnelSeries,ej.ejPolarSeries=t(ej.EjSeriesRender,{draw:function(e,t){this.chartObj=e;var i=t,s=(this._isVisiblePoints(i),this.setLineSeriesStyle(i));if("column"==i.drawType.toLowerCase()||"rangecolumn"==i.drawType.toLowerCase()){var a=i.xAxis.visibleRange;a.interval=1;var r="category"==i.xAxis._valueType?a.max:a.max-1;this.chartObj.model.sumofYValues=0;var n=(a.interval,a.min);do{this.chartObj.model.sumofYValues+=a.interval,n+=a.interval}while(n<=r)}var o=this._calculatePolarAxesSegment(i);"area"==i.drawType.toLowerCase()?this.drawAreaPath(i,s,o):"line"==i.drawType.toLowerCase()?this._drawLinePath(i,s,o):"spline"==i.drawType.toLowerCase()&&this._drawLinePath(i,s,o),this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},chartAreaType:"PolarAxes"}),ej.seriesTypes.polar=ej.ejPolarSeries,ej.ejRadarSeries=t(ej.EjSeriesRender,{draw:function(e,t){this.chartObj=e;var i=t,s=(this._isVisiblePoints(i),this.setLineSeriesStyle(i));if("column"==i.drawType.toLowerCase()||"rangecolumn"==i.drawType.toLowerCase()){var a=i.xAxis.visibleRange;a.interval=1;var r="category"==i.xAxis._valueType?a.max:a.max-1;this.chartObj.model.sumofYValues=0;var n=(a.interval,a.min);do{this.chartObj.model.sumofYValues+=a.interval,n+=a.interval}while(n<=r)}var o=this._calculatePolarAxesSegment(i);"area"==i.drawType.toLowerCase()?this.drawAreaPath(i,s,o):"line"==i.drawType.toLowerCase()?this._drawLinePath(i,s,o):"spline"==i.drawType.toLowerCase()&&this._drawLinePath(i,s,o),this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},doAnimation:function(t,i){var s=i.chartObj,a=t.drawType.toLowerCase();t.regionAdded=!0,s.model._radius=s.model.Radius||s.model._radius,s.model.Radius=0;var r=i,n=e.inArray(t,s.model._visibleSeries),o=e(s.gSeriesEle).find("#"+r.gSeriesGroupEle.id)[0].childNodes[0];e(o).animate({Radius:s.model._radius},{duration:1200,queue:!1,step:function(i,n){if(ej.util.isNullOrUndefined(s.model))e(o).stop(!0,!0);else{s.model.Radius=i;var l=r._calculatePolarAxesSegment(t);"column"!=t.drawType.toLowerCase()&&"rangecolumn"!=t.drawType.toLowerCase()&&"scatter"!=a&&s.svgRenderer._setAttr(e(o),{d:l}),s.model.Radius=s.model._radius}},complete:function(){if(!ej.util.isNullOrUndefined(s.model)){t.regionAdded=!1,s.svgRenderer._setAttr(e(s.gSeriesEle).find("#"+s.svgObject.id+"_TextGroup_"+n),{visibility:"visible"}),s.svgRenderer._setAttr(e(s.gSeriesEle).find("#"+s.svgObject.id+"_symbolGroup_"+n),{visibility:"visible"}),s.svgRenderer._setAttr(e(s.gSeriesEle).find("#"+s.svgObject.id+"_DataLabel_"+n),{visibility:"visible"}),s.model.AnimationComplete=!0;var i=e.extend({},ej.EjSvgRender.commonChartEventArgs);i.data={series:t},s._trigger("animationComplete",i)}}})},chartAreaType:"PolarAxes"}),ej.seriesTypes.radar=ej.ejRadarSeries}(jQuery),ej.ejChart={},function($){Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=i.length;return function(a){if("function"==typeof a||"object"==typeof a&&null!==a){var r,n,o=[];for(r in a)e.call(a,r)&&o.push(r);if(t)for(n=0;n<s;n++)e.call(a,i[n])&&o.push(i[n]);return o}}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),void 0===Array.prototype.map&&(Array.prototype.map=function(e){for(var t=[],i=0,s=this.length;i<s;i++)t.push(e(this[i]));return t}),String.prototype.parseTemplate=function(){var str=this,substr,count=0,arabic=/[\u0600-\u06FF]/;for($.each(arguments[0],function(e,t){t.count>0?$.each(t,function(t,i){var s=new RegExp("#"+e+"."+t+"#","gm");if(count++,arabic.test(str)&&2==count){for(var a=str.split(" "),r=0;r<a.length;r++){var n=a[r];arabic.test(n)&&(n+="&lrm;",a[r]=n)}str=a.join(" ")}str=str.replace(s.source,i)}):str=str.replace(new RegExp("\\#"+e+"\\#","gm"),t)});str.indexOf("ej.")>=0;)substr=str.substring(str.indexOf("ej."),str.indexOf(")")+1),str=str.replace(substr,eval(substr));return str},String.prototype.capitalizeFirstString=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var Gradient=function(e){this._gradientStop=[];for(var t=0;t<e.length;t++)this._gradientStop.push(e[t])};ej.ejChart={_renderSfChart:function(){var e=!!window.SVGSVGElement,t=this.model.enableCanvasRendering;return this.isChartElemId=!1,this.element[0].id||this._createChartId(),$("#chartContainer_"+this._id).remove(),e?(this.renderer=new ej.EjSvgRender(this.element),t?(this.svgRenderer=new ej.EjCanvasRender(this.element),this.legendSvgContainer=this.svgRenderer.createLegendCanvas(this.element)):(this.svgRenderer=new ej.EjSvgRender(this.element),this.legendSvgContainer=this.svgRenderer.createLegendSvg(this.element)),this._appendChartElements(),t||this.legendContainer.find("svg").attr("class","e-designerhide"),this._createChart(),$(this.svgObject).appendTo(this.element)):(t=!1,this.svgRenderer=new ej.EjVmlRender(this.element),this.legendSvgContainer=this.svgRenderer.createLegendSvg(this.element),this.renderer=new ej.EjVmlRender(this.element),this._appendChartElements(),this._createChart(),$(this.svgObject).appendTo(this.chartContainer)),!0},_appendChartElements:function(){this.legendContainer=$("<div></div>").attr("id","legend_"+this._id).css("height","0px"),this.scrollerContainer=$("<div></div>").attr("id","legend_Scroller"+this._id).css("height","0px"),this.templateContainer=$("<div></div>").attr("id",this._id+"_container_svg_TrackToolTip").css("height","0px"),this.chartContainer=$("<div></div>").css("position","relative").attr("id","chartContainer_"+this._id),this.axisScroll=$("<div></div>").attr("id","axisScrollbar_"+this._id).css("height","0px"),this.svgRenderer.append(this.legendSvgContainer,this.scrollerContainer),$(this.scrollerContainer).appendTo(this.legendContainer),$(this.axisScroll).appendTo(this.chartContainer),$(this.legendContainer).appendTo(this.chartContainer),$(this.templateContainer).appendTo(this.chartContainer),$(this.chartContainer).appendTo(this.element)},setSvgSize:function(e){var t=e,i=$(t.element).height(),s=450,a=ej.isTouchDevice()?250:600,r=$(t.element).width();$(t.chartContainer).height();if(t.model.size.width){var n=t.model.size.width;a="string"==typeof n&&-1!=n.indexOf("%")?r/100*parseInt(n):parseInt(n)}else r>0&&(a=r);if($(t.svgObject).width(a),t.model.size.height){var o=t.model.size.height;s="string"==typeof o&&-1!=o.indexOf("%")?this.vmlRendering?s:i/100*parseInt(o):parseInt(o)}else i>0?s=i:$(t.svgObject).css("display","block");$(t.svgObject).height(s),$("#"+t._id).css("overflow","hidden"),t.svgObject.setAttribute("width",a),t.svgObject.setAttribute("height",s)},compareExtend:function(e,t,i){if("object"==typeof i&&null!==i)for(var s,a=Object.keys(i),r=a.length,n=0;n<r;n++)s=a[n],t.hasOwnProperty(s)&&null!=t[s]?(Array.isArray(t[s])||"object"==typeof t[s]&&null!==t[s])&&this.compareExtend({},t[s],i[s]):t[s]=i[s];return t},setModelProperties:function(e){if(e||this.setSvgSize(this),this.svgWidth=$(this.svgObject).width(),this.svgHeight=$(this.svgObject).height(),this.chartCross={visible:e?this.chartCross.visible:this.model.crosshair.visible,mArea:this.model.crosshair.type},this.serAnimation=[],this.model.series&&!e){var t,i,s,a,r,n,o=!1;this.model._drawTrendline=!1;for(var l=0;l<this.model.series.length;l++){n=null,ej.util.isNullOrUndefined(this.model.series[l].dataSource)&&ej.util.isNullOrUndefined(this.model.commonSeriesOptions.dataSource)||(n=ej.util.isNullOrUndefined(this.model.series[l].dataSource)?this.model.commonSeriesOptions.dataSource:this.model.series[l].dataSource),this.model.series[l]=ej.copyObject({},this.model.commonSeriesOptions,this.model.series[l]),this.model.series[l].dataSource=n,a=this.model.series[l],this.serAnimation.push(null===a.enableAnimation||void 0===a.enableAnimation?this.model.commonSeriesOptions.enableAnimation:a.enableAnimation),t=a.trendlines,i=t.length;for(var d=0;d<i;d++)if(t[d]=ej.copyObject({},this.model.trendlineDefaults,t[d]),t[d]._visibility=t[d].visibility,"visible"==t[d].visibility.toLowerCase()){if(this.model._drawTrendline=!0,r=t[d].type.toLowerCase(),!ej.util.isNullOrUndefined(a.points))for(var h=0;h<a.points.length;h++)if(s=a.points[h],ej.util.isNullOrUndefined(s.y)||0==s.y){o=!0;break}t[d].isNull=!(!o||"power"!=r&&"exponential"!=r)}}}if(this.model.indicators)for(var c=0;c<this.model.indicators.length;c++)this.model.indicators[c]=ej.copyObject({},this.model.indicatorDefaults,this.model.indicators[c])},_createChart:function(){this.svgObject=this.svgRenderer.svgObj;var e=$.extend({},ej.EjSvgRender.commonChartEventArgs);this._trigger("load",e),this.setTheme(ej.EjSvgRender.themes,this.model.theme);var t=this.model;if(t.series[0]&&t.series[0]._isdesigntime){t.series[0]={},t.series[0].points=[];for(var i=[],s=1;s<=10;s++)i.push({x:s,y:Math.floor(-30*Math.random())+40});t.series[0].points=i}this.vmlRendering=!!this.svgRenderer.vmlNamespace,($(this.element).is(":visible")||"hidden"!=$(this.element).css("visibility")||"none"!=$(this.element).css("display"))&&(this.bindEvents(),this.bindTo())},setTheme:function(e,t){var i=t.toLowerCase();(i.indexOf("azure")>=0||i.indexOf("lime")>=0||i.indexOf("saffron")>=0)&&-1==i.indexOf("gradient")&&-1==i.indexOf("dark")?e[i]=$.extend(!0,{},e.flatlight,e[i]):(i.indexOf("azuredark")>=0||i.indexOf("limedark")>=0||i.indexOf("saffrondark"))>=0&&-1==i.indexOf("gradient")?e[i]=$.extend(!0,{},e.flatdark,e[i]):(i.indexOf("azure")>=0||i.indexOf("lime")>=0||i.indexOf("saffron")>=0)&&i.indexOf("gradient")>=0&&-1==i.indexOf("dark")?e[i]=$.extend(!0,{},e.gradientlight,e[i]):(i.indexOf("azuredark")>=0||i.indexOf("limedark")>=0||i.indexOf("saffrondark")>=0)&&i.indexOf("gradient")>=0?e[i]=$.extend(!0,{},e.gradientdark,e[i]):i.indexOf("high")>=0?e[i]=$.extend(!0,{},e.highcontrast01,e[i]):i.indexOf("material")>=0||i.indexOf("office")>=0?e[i]=$.extend(!0,{},e.material,e[i]):e[i]||(i="flatlight"),this.model._themeChanged?this.model=ej.copyObject({},this.model,e[i]):this.model=this.compareExtend({},this.model,e[i]),this.model.background=ej.util.isNullOrUndefined(this.model.background)?e[i].background:this.model.background},_drawBackInterior:function(){if(this.model.backInterior&&this.model.backInterior._gradientStop){var e={id:this.svgObject.id+"_backGradient",x1:"0%",y1:"0%",x2:"0%",y2:$(this.svgObject).height()+"%"};this.svgRenderer.drawGradient(e,this.model.backInterior._gradientStop)}},_drawBackImage:function(){var e={height:$(this.svgObject).height(),width:$(this.svgObject).width(),href:this.model.backGroundImageUrl,x:0,y:0,id:this.svgObject.id+"_backImage",visibility:"visible",preserveAspectRatio:"none"};this.svgRenderer.drawImage(e,this.svgObject)},_getDataType:function(e){var t=typeof e;return"number"===t||"string"===t?t:"date"==jQuery.type(e)?"date":null==e&&null},addedXYValues:function(e){e=e||!1;var t,i,s,a,r,n,o,l,d,h,c,u,p,m=this.model,g=m.series,f=g[0].type.toLowerCase(),_=ej.util.isNullOrUndefined,v=m.primaryXAxis.valueType,b=!1;if(p=m.AreaType=ej.seriesTypes[f].prototype.chartAreaType,"cartesianAxes"!=p&&"None"!=p&&(p=m.AreaType="polaraxes",m.isPolar="polar"==f),p=m.AreaType=m.AreaType.toLowerCase(),!e){for(s=0;s<g.length;s++)if("visible"==g[s].visibility){if(d=!0,n=!1,g[s].dataSource&&0!=g[s].dataSource.length){l=g[s],l._xAxisValueType=null,t=l.points.length,o=l.points[0].x,null!=o&&(l._xAxisValueType=this._getDataType(o));for(var x=l.points.length,u=l.points,y=0;y<x;y++)"string"==typeof u[y].x&&-1!=u[y].x.indexOf("<br>")&&(u[y].x=u[y].x.replace(/(<br>)+/g,"<br>"))}else{u=g[s].points,g[s].points=null,g[s]=$.extend(!0,{},m.commonSeriesOptions,g[s]),g[s].points=u,l=g[s],"datetime"==v&&(b=!0),t=u.length;for(var r=0;r<t;r++)u[r].YValues=[],h=1==/^-?[0-9]*\.?[0-9]+$/.test(u[r].x),c="category"!=v&&"datetime"!=v&&("string"==typeof u[r].x||u[r].x instanceof String)&&parseFloat(u[r].x),!isNaN(c?u[r].x:parseFloat(u[r].x))&&c&&h&&"category"!=v&&"none"!=p&&(u[r].x=b?new Date(u[r].x):parseFloat(u[r].x)),"string"==typeof u[r].x&&-1!=u[r].x.indexOf("<br>")&&(u[r].x=u[r].x.replace(/(<br>)+/g,"<br>")),u[r].xValue=u[r].x,n||(o=u[r].x,_(o)||(l._xAxisValueType=this._getDataType(o),n=!0)),l._hiloTypes||"rangecolumn"==l.drawType.toLowerCase()?(_(u[r].high)||(u[r].YValues[0]=u[r].high,u[r].y=u[r].high),_(u[r].low)||(u[r].YValues[1]=u[r].low),_(u[r].open)||(u[r].YValues[2]=u[r].open),_(u[r].close)||(u[r].YValues[3]=u[r].close)):(u[r].YValues[0]=l.points[r].y,(d=d&&!_(u[r].size))&&(u[r].YValues[1]=u[r].size))}if("waterfall"==l.type.toLowerCase())this.calculateWaterfallSeriesPoints(l.points);else if(l._previousType&&"waterfall"==l._previousType.toLowerCase())for(i=l.points,a=0;a<i.length;a++)i[a].waterfallSum=void 0,i[a].textOptions=null}this._setInternalValues()}},calculateWaterfallSeriesPoints:function(e){for(var t=0,i=0,s=0,a=0;a<e.length;a++)e[a].isEmpty?(e[a].YValues[1]=0,e[a].YValues[0]=0):(i+=e[a].showIntermediateSum||e[a].showTotalSum?0:e[a].y,e[a].showIntermediateSum?(e[a].YValues[1]=t,e[a].YValues[0]=i,e[a].waterfallSum=i-t,t=i):e[a].showTotalSum?(e[a].YValues[1]=0,e[a].YValues[0]=i,e[a].waterfallSum=i):(e[a].YValues[1]=s,e[a].YValues[0]=s+e[a].y,s=i))},_setInternalValues:function(){for(var e=0;e<this.model.series.length;e++){var t=this.model.series[e];if("cartesianaxes"==this.model.AreaType&&"cartesianAxes"==ej.seriesTypes[t.type.toLowerCase()].prototype.chartAreaType)t._zOrder=t.zOrder?t.zOrder:0,this.model._visibleSeries.push(t);else if("none"==this.model.AreaType&&"None"==ej.seriesTypes[t.type.toLowerCase()].prototype.chartAreaType){t._zOrder=t.zOrder?t.zOrder:0;var i=this.model.series[e].type.toLowerCase();if("funnel"==i||"pyramid"==i){this.model._visibleSeries.push(t);break}this.model._visibleSeries.push(t)}else"polaraxes"==this.model.AreaType&&"PolarAxes"==ej.seriesTypes[t.type.toLowerCase()].prototype.chartAreaType&&(t._zOrder=t.zOrder?t.zOrder:0,this.model._visibleSeries.push(t));if((t._yAxisName||t._xAxisName)&&this.model._axes)for(var s=0;s<this.model._axes.length;s++)t._yAxisName&&t._yAxisName==this.model._axes[s].name&&(this.model._axes[s].orientation=this.model._axes[s].orientation?this.model._axes[s].orientation:this.model.requireInvertedAxes?"horizontal":"vertical"),t._xAxisName&&t._xAxisName==this.model._axes[s].name&&(this.model._axes[s].orientation=this.model._axes[s].orientation?this.model._axes[s].orientation:this.model.requireInvertedAxes?"vertical":"horizontal")}},setHiloStyle:function(e,t,i,s){var a,r=e.points[t];a=r.fill?r.fill:e.fill?e.fill:s;var n=a||this.model.seriesColors[i];return"array"==jQuery.type(n)?n[0].color:n},setStyle:function(e,t,i,s,a,r){var n,o,l,d,h,c,u,p=r||t._visiblePoints,m=p[s],g=m.border,f=t.border;if(t._hiloTypes&&(u=t.isFill?t.fill:null),"cartesianaxes"==e.chartObj.model.AreaType){m.fill?n=m.fill:"waterfall"==t.type.toLowerCase()?((m.showIntermediateSum||m.showTotalSum)&&m.waterfallSum>0||m.y>0&&!m.showIntermediateSum&&!m.showTotalSum)&&(n=t.positiveFill?t.positiveFill:a):n=u||a;var _=n||this.model.seriesColors[i];if(e.chartObj.model.requireInvertedAxes)var v=this.svgRenderer.createGradientElement(e.getSeriesName(t)+"_"+i+s,_,0,0,100,0,e.gSeriesGroupEle);else v=this.svgRenderer.createGradientElement(e.getSeriesName(t)+"_"+i+s,_,0,0,0,100,e.gSeriesGroupEle)}else{var b=this.model.pointColors;n=m.fill?m.fill:"array"==jQuery.type(b[s])?b[s][0].color:b[s];var x=this.svgRenderer.createGradientElement(e.getSeriesName(t)+s,n,0,0,0,$(e.svgObject).height()||parseFloat(this.model.size.height),e.chartObj.gSeriesEle)}return o=g&&g.color?g.color:f.color,l=g&&!ej.util.isNullOrUndefined(g.width)?g.width:f.width,c=m.opacity?m.opacity:t.opacity,h=m.width?m.width:t.width,d=g&&g.dashArray?g.dashArray:f.dashArray,{interior:v||x,borderColor:o,borderWidth:l,width:h,opacity:c,dashArray:d}},colorNameToHex:function(e){var t=e,i={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"[object Array]"==Object.prototype.toString.call(t)?t:void 0!==i[t.toLowerCase()]?i[t.toLowerCase()]:t},_getLocalizedLabels:function(){return ej.getLocalizedConstants(this.sfType,this.model.locale)},_setCulture:function(e){this.culture=ej.preferredCulture(e)},draw:function(e){this.removeMultiRect();var t={};t.axes={},this._drawBackInterior(),this.model.chartRegions=[],this.model.outsideDataRegionPoints=[],this.model.regionCount=null,this.model.circularRadius=[],this.model.circleCenterX=[],this.model.circleCenterY=[],this.model.innerRadius=[],this.model.bounds=[],this.accDataLabelRegion=[],this.model.rightsidebounds=[],this.model.leftsidebounds=[],this.model.excludeDataUpdate=e,this.model.yAxisLabelRegions=[],this.model.xAxisLabelRegions=[],this.model.axisMultiLevelLabelRegions=[],this.model.multiLevelLabelRegions=[],this.model.minhightwidth=!1,this.model._isPieOfPie=!1,e||(this.model._visibleSeries=[]),this.model.stackedValue={},this.model._locale=this.model.locale||"en-US",this._setCulture(this.model._locale),this._localizedLabels=this._getLocalizedLabels();var i,s,a=this.model.series.length;ej.util.isNullOrUndefined(this.model.sideBySideSeriesPlacement)?this.model._sideBySideSeriesPlacement=!this.model.enable3D:this.model._sideBySideSeriesPlacement=this.model.sideBySideSeriesPlacement;for(var r=0;r<a;r++)i=this.model.series[r],s=i.type.toLowerCase(),i._isTransposed=-1==s.indexOf("bar")?i.isTransposed:!i.isTransposed;a>0&&this.addedXYValues(e),this.model.AreaType=this.model.AreaType||"cartesianaxes",this._isEjScroller();var n=$.extend({},ej.EjSvgRender.commonChartEventArgs);n.data={},this._trigger("preRender",n),this.gLegendEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_Legend"}),this.gTitleEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_ChartTitle",cursor:"default"}),this.gSubTitleEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_ChartsubTitle",cursor:"default"}),this._createAxisLabelAndRange();for(var r=0;r<this.model._axes.length;r++)t.axes[this.model._axes[r].name]={};this._initializeSeriesColors(),this._calculateLegendBounds(),this.legendRender=new ej.EjLegendRender(this);var o=$.extend({},ej.EjSvgRender.commonChartEventArgs);o.data={legendBounds:this.model.LegendBounds},this._trigger("legendBoundsCalculate",o);for(var l=0;l<this.model.indicators.length;l++){var d=this.model.indicators[l];if(d._points=[],d.xAxisName=d.xAxisName?d.xAxisName:this.model._axes[0].name,d.yAxisName=d.yAxisName?d.yAxisName:this.model._axes[1].name,d.isIndicator=!0,d.dataSource&&d.dataSource.length>0)d._hiloTypes=!0,this._processJsonData(d.dataSource,d),d._points=d.points;else if(d.points.length>0)for(var r=0;r<d.points.length;r++)d._points=d.points,d._points[r].xValue=d.points[r].x,d._points[r].YValues=[],d._points[r].YValues[0]=d.points[r].close;else if(""!=d.seriesName)for(var h=0;h<this.model._visibleSeries.length;h++){var i=this.model._visibleSeries[h];d.seriesName==i.name&&(d._points=$.extend(!0,[],i.points))}}for(_=0;_<this.model._axes.length;_++)if(this.model._axes[_].valueType&&"category"==this.model._axes[_].valueType.toLowerCase())for(r=0;r<this.model.indicators.length;r++)if(d=this.model.indicators[r],this.model._axes[_].name==d.xAxisName)for(l=0;l<d._points.length;l++)d._points[l].xValue=l;for(this.model.indicatorRange=[],h=0;h<this.model.indicators.length;h++)d=this.model.indicators[h],d._points.length>0&&(w=d.type.toLowerCase(),u=new ej.indicatorTypes[w],u.calculateSegment(d,this));for(var c=0;c<this.model._visibleSeries.length;c++){var u=this.model._visibleSeries[c];for(r=0;r<u.points.length&&("string"==typeof u.points[r].xValue&&-1!=u.points[r].xValue.indexOf("/Date("));r++)u.points[r].xValue=new Date(parseInt(u.points[r].xValue.substr(6)))}this.model.hAxes=[],this.model.vAxes=[];var p=this,m=!1,g=!1;this._arrangeAxis();var f;this.model.crosshairLabelVisibility=!1;for(var _=0;_<this.model._axes.length;_++){var v=this.model._axes[_];this.model.crosshairLabelVisibility=v.crosshairLabel.visible||this.model.crosshairLabelVisibility;var b=[],a=this.model.series.length,x=this.model._axes[_].orientation.toLowerCase(),y=this.model._axes[_].rangePadding.toLowerCase();if(ej.util.isNullOrUndefined(this.model._axes[_]._rangePadding)&&(this.model._axes[_]._rangePadding=this.model._axes[_].rangePadding),"auto"==y){"vertical"==x&&(v.rangePadding=this.model.requireInvertedAxes?"none":"normal"),"horizontal"==x&&(v.rangePadding=this.model.requireInvertedAxes?"normal":"none");for(var l=0;l<a;l++){var w=this.model.series[l].type.toLowerCase();if(-1!=w.indexOf("100")&&v.name==this.model.series[l]._yAxisName){v.rangePadding="round";break}}}for(var C=0;C<v.stripLine.length;C++)v.stripLine[C]=$.extend(!0,{},this.model.stripLineDefault,v.stripLine[C]),"over"==v.stripLine[C].zIndex.toLowerCase()?m=!0:g=!0;var S=v.orientation.toLowerCase(),T=this.model._visibleSeries.length-1;for(l=0;l<this.model._visibleSeries.length;++l){T-=1;var i=this.model._visibleSeries[l];this.model._hasSeriesPoints=i.points.length>0||this.model._hasSeriesPoints,i.xAxisName||(i._xAxisName=p.model._axes[0].name),i.yAxisName||(i._yAxisName=p.model._axes[1].name),i._xAxisName=i._xAxisName?i._xAxisName:i.xAxisName?i.xAxisName:p.model._axes[0].name,i._yAxisName=i._yAxisName?i._yAxisName:i.yAxisName?i.yAxisName:p.model._axes[1].name;var R=i._xAxisName.toLowerCase(),k=i._yAxisName.toLowerCase(),O=v.name.toLowerCase();if((R||k)&&(R==O||k==O)){if(("horizontal"==S||-1!=i.type.toLowerCase().indexOf("bar")&&"vertical"==S)&&v.valueType&&"datetime"==v.valueType.toLowerCase())for(var c=0;c<i.points.length;c++)"string"!=typeof i.points[c].xValue||isNaN(Date.parse(i.points[c].xValue))||(i.points[c].xValue=new Date(Date.parse(i.points[c].xValue)));else"string"!=i._xAxisValueType||v.valueType||(v._valueType="horizontal"!=S||this.model.requireInvertedAxes?"vertical"==S&&this.model.requireInvertedAxes?"category":"double":"category"),"date"!=i._xAxisValueType||v.valueType||(v._valueType="horizontal"!=S||this.model.requireInvertedAxes?"vertical"==S&&this.model.requireInvertedAxes?"datetime":"double":"datetime");"visible"==this.model._visibleSeries[l].visibility.toLowerCase()&&b.push(i)}}if(S==(this.model.requireInvertedAxes?"horizontal":"vertical")){var D=!1,I=!1,a=b.length;v.isStacked100=b.length>0;for(var r=0;r<a;r++){var w=b[r].type.toLowerCase();-1!=w.indexOf("stacking")||"polaraxes"==this.model.AreaType&&("column"==b[r].drawType.toLowerCase()||"area"==b[r].drawType.toLowerCase())&&b[r].isStacking?-1==w.indexOf("100")||D?-1!=w.indexOf("100")||I||(this._calculateStackingValues(b,v,t),I=!0,v.isStacked100=!1):(this._calculateStackingCumulativeValues(b,v,t),D=!0):v.isStacked100=!1}}f=v.scrollbarSettings,!f.visible||null==f.pointsLength&&null==f.range.min&&null==f.range.max||(this.model.isLazyZooming=!0),v._valueType=v._valueType?v._valueType:v.valueType?v.valueType:"double";for(var j=new(ej.axisTypes[v._valueType.toLowerCase()]),L=0;L<b.length;L++)for(var A=0;A<b[L].trendlines.length;A++)if("visible"==b[L].trendlines[A].visibility){this.model._drawTrendline=!0;break}j._calculateRanges(p,v,b,t,e)}
p._chartResize=!1;var E=$.extend({},ej.EjSvgRender.commonChartEventArgs);E.data={axes:this.model._axes},this._trigger("axesLabelsInitialize",E),this.model.isLazyZooming||this._updateScroll();var P,M;if(this.svgHeight==this.model.svgHeight&&this.svgWidth==this.model.svgWidth||(P=ej.util.isNullOrUndefined(this.prevHeight)?this.svgHeight:this.prevHeight,M=ej.util.isNullOrUndefined(this.prevWidth)?this.svgWidth:this.prevWidth,ie=$.extend({},ej.EjSvgRender.commonChartEventArgs),ie.data={currentHeight:P,currentWidth:M,newHeight:this.model.svgHeight,newWidth:this.model.svgWidth},this._trigger("beforeResize",ie),ie.cancel?(this.model.enableCanvasRendering&&(this.svgRenderer.svgObj.width=ie.data.currentWidth,this.svgRenderer.svgObj.height=ie.data.currentHeight),this.model.svgWidth=ie.data.currentWidth,this.model.svgHeight=ie.data.currentHeight,$(this.svgObject).width(ie.data.currentWidth),$(this.svgObject).height(ie.data.currentHeight)):(this.model.enableCanvasRendering&&(this.svgRenderer.svgObj.width=ie.data.newWidth,this.svgRenderer.svgObj.height=ie.data.newHeight),this.model.svgWidth=ie.data.newWidth,this.model.svgHeight=ie.data.newHeight,$(this.svgObject).width(ie.data.newWidth),$(this.svgObject).height(ie.data.newHeight))),this._calculateAreaBounds(t),this.model.enable3D){var F=new ej.Ej3DRender;this.vector=new F.vector3D,this.matrixobj=new F.matrix3D,this.bsptreeobj=new F.BSPTreeBuilder,this.polygon=new F.polygon3D,this.graphics=new F.Graphics3D,this.chart3D=this.svgRenderer.createGroup({id:this.svgObject.id+"_Chart3D"}),ej.Ej3DRender.Polygons=[]}if("none"!=this.model.AreaType){this._calculateAxisSize(t);for(var r=0,N=this.model._axes.length;r<N;r++)this._validateCrossing(this.model._axes[r])&&this._axisCrossing(this.model._axes[r],!1,t);if(t._crossAxisOverlap){for(var r=0,N=this.model._axes.length;r<N;r++)t.axes[this.model._axes[r].name]._validCross&&this._axisCrossing(this.model._axes[r],!0,t);t._crossAxisOverlap=!1}var z=$.extend({},ej.EjSvgRender.commonChartEventArgs);z.data={areaBounds:this.model.m_AreaBounds},this._trigger("chartAreaBoundsCalculate",z),this._drawChartAreaRect(),""!=this.model.title.text&&this.model.title.text&&this.model.title.visible&&this._drawTitle(),this.gXaxisEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxis"}),this.gYaxisEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxis"}),this.gPolarAxisEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_AxisLine"}),this.model.enable3D?($.extend(ej.Ej3DAxisRenderer.prototype,this),this.chartaxis=new ej.Ej3DAxisRenderer(this)):($.extend(ej.EjAxisRenderer.prototype,this),this.chartaxis=new ej.EjAxisRenderer(this));var V=this.chartaxis;if(this.model.xAxisTitleRegion=[],this.model.yAxisTitleRegion=[],this.model.enable3D){for(var B=0;B<this.model._axes.length;B++)V._drawAxes(B,this.model._axes[B],t);ej.Ej3DChart.prototype.update3DWall(this,t)}else for(var B=0;B<this.model._axes.length;B++)V._drawGridLines(B,this.model._axes[B],t);this.model.requireInvertedAxes?(this.svgRenderer.append(this.gYaxisEle,this.svgObject),this.svgRenderer.append(this.gXaxisEle,this.svgObject)):(this.svgRenderer.append(this.gXaxisEle,this.svgObject),this.svgRenderer.append(this.gYaxisEle,this.svgObject));var H="polaraxes"==this.model.AreaType?0:this.model.m_AreaBounds.X,Y="polaraxes"==this.model.AreaType?0:this.model.m_AreaBounds.Y,U="polaraxes"==this.model.AreaType?$(this.svgObject).width():this.model.m_AreaBounds.Width,W="polaraxes"==this.model.AreaType?$(this.svgObject).height():this.model.m_AreaBounds.Height,X={id:this.svgObject.id+"_ChartAreaClipRect",x:H,y:Y,width:U,height:W,fill:"white","stroke-width":1,stroke:"Gray"};this.svgRenderer.drawClipPath(X,this.svgObject),this._setZoomProperties()}else this._drawChartAreaRect(),X={id:this.svgObject.id+"_ChartAreaClipRect",x:0,y:0,width:$(this.svgObject).width(),height:$(this.svgObject).height(),fill:"white","stroke-width":1,stroke:"Gray"},this.svgRenderer.drawClipPath(X,this.svgObject),""!=this.model.title.text&&this.model.title.text&&this.model.title.visible&&this._drawTitle();g&&"cartesianaxes"==this.model.AreaType&&!this.model.enable3D&&(this.gStriplineBehind=this.svgRenderer.createGroup({id:this.svgObject.id+"_StriplineBehind","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"}),this._renderStripline("behind")),this.model.initSeriesRender&&(this.seriesRender(t,e),this.indicatorRender());var G=this.model.annotations.length;$("#annotation_group_"+this._id).empty();for(var q=0;q<G;q++){var Q=this.model.annotations[q];Q.visible&&this.annotationRender(Q,q)}"polaraxes"==this.model.AreaType&&this.model._axes[1].visible&&!this.model.enable3D&&this.chartaxis._drawAxisLine(this.model._axes[1]),"cartesianaxes"===this.model.AreaType&&(this.model.requireInvertedAxes?(this.svgRenderer.append(this.gYaxisEle,this.svgObject),this.svgRenderer.append(this.gXaxisEle,this.svgObject)):(this.svgRenderer.append(this.gXaxisEle,this.svgObject),this.svgRenderer.append(this.gYaxisEle,this.svgObject)),this.gXaxisTickEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisTick"}),this.gYaxisTickEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisTick"})),$.extend(ej.EjAxisRenderer.prototype,this),this.chartaxis=new ej.EjAxisRenderer(this);var V=this.chartaxis;if(m&&"cartesianaxes"==this.model.AreaType&&!this.model.enable3D&&(this.gStriplineOver=this.svgRenderer.createGroup({id:this.svgObject.id+"_StriplineOver","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"}),this._renderStripline("over")),!this.model.enable3D)for(var K="cartesianaxes"==this.model.AreaType.toLowerCase(),Z=this.model._axes,J=this.model.enableCanvasRendering,B=0,N=Z.length;B<N;B++){var v=Z[B],ee=t.axes[v.name]._lineOption,te=t.axes[v.name]._validCross;K&&(V._drawAxes(B,v),ee[0]&&this.svgRenderer.drawLine(ee[0],ee[1]),"horizontal"===v.orientation.toLowerCase()?(V._drawXAxisTickLine(B,v,J?null:ee[1],t),V._drawXAxisMultiLevelLabels(B,v)):(V._drawYAxisTickLine(B,v,J?null:ee[1],te),V._drawYAxisMultiLevelLabels(B,v)),v._crossValue=null)}if(this.resetZooming||!this.model._chartAreaZoom&&!this.panning||this._enableZoomingButtons(),this.resetZooming=!1,this.svgHeight!=this.model.svgHeight||this.svgWidth!=this.model.svgWidth){this.prevHeight=this.model.svgHeight,this.prevWidth=this.model.svgWidth;var ie=$.extend({},ej.EjSvgRender.commonChartEventArgs);ie.data={height:this.prevHeight,width:this.prevWidth,prevHeight:P,prevWidth:M,originalHeight:this.svgHeight,originalWidth:this.svgWidth},this._trigger("afterResize",ie)}var se,b=this.model._visibleSeries;se=$.grep(b,function(e){return"true"==e.selectionSettings.enable.toString()}),0==se.length?(this.model.selectionEnable=!1,this._removeSelection()):this.model.selectionEnable=!0;var ae=this.remove_duplicates(this.model.selectedDataPointIndexes);if(this.model.selectionEnable){this._removeSelection(),this.model._isStateChaged=!0;for(var re,ne,oe=ae.length,r=0;r<oe;r++)re=ae[r],(i=this.model._visibleSeries[re.seriesIndex])&&("series"!=(ne=i.selectionSettings.mode)&&i.points[re.pointIndex]||"series"==ne)&&this.segmentSelection(re.event,re.legendData,re.seriesIndex,re.pointIndex,re.data)}this.chartUpdating=!1,$(document).find("#measureTex").remove();var le=$.extend({},ej.EjSvgRender.commonChartEventArgs);le.data={model:this.model},this._trigger("loaded",le);for(var r=0;r<this.model._axes.length;r++){var v=$.extend(!0,{},this.model._axes[r]);"logarithmic"!=v._valueType.toLowerCase()&&(this.model._axes[r].range=v._initialRange)}},remove_duplicates:function(e){for(var t,i,s=[],a=[],r=e.length,n=this.model._visibleSeries,o=0;o<r;o++)i=n[e[o].seriesIndex],t=i?i.selectionSettings.mode:"","series"==t?(s.indexOf(e[o].seriesIndex)>-1||a.push(e[o]),s.push(e[o].seriesIndex)):"cluster"==t?(s.indexOf(e[o].pointIndex)>-1||a.push(e[o]),s.push(e[o].pointIndex)):(e[o]in s||a.push(e[o]),s.push(e[o]));return a},_setZoomProperties:function(){for(var e,t,i,s,a=0;a<this.model._axes.length;a++)e=this.model._axes[a],s=e.orientation.toLowerCase(),t=e.zoomFactor.toFixed(3),i=e.zoomPosition.toFixed(3),"horizontal"!=s||t==this._xZoomFactor()&&i==this._xZoomPosition()||(this._xZoomFactor(e.zoomFactor.toFixed(3)),this._xZoomPosition(e.zoomPosition.toFixed(3))),"vertical"!=s||t==this._yZoomFactor()&&i==this._yZoomPosition()||(this._yZoomFactor(e.zoomFactor.toFixed(3)),this._yZoomPosition(e.zoomPosition.toFixed(3)))},annotationRender:function(e,t){var i,s,a=this._id,r=!1,n=this.model.series[0],o=n.type.toLowerCase(),l=this.model.m_AreaBounds.X,d=this.model.m_AreaBounds.Y,h=this.model.m_AreaBounds.Width,c=this.model.m_AreaBounds.Height,u=this.model.margin.left,p=this.model.margin.top,m=$.inArray(n,this.model._visibleSeries),g=this.model.circularRadius[m],f=this.model.circleCenterX[m],_=this.model.circleCenterY[m],v=$(document);if(e=$.extend(!0,{},this.model.annotationsDefault,e),0!=$("#annotation_group_"+a).length)var b=$("#annotation_group_"+a);else b=$("<div></div>").attr("id","annotation_group_"+a);b.css({position:"absolute",left:"0px",top:"0px"});var x=e.content;if(y=$("#"+x),"SCRIPT"==y.get(0).tagName)var y=$($("#"+x)[0].innerHTML);var w=y.clone(),C="annotation_"+a+"_"+x+"_"+t;$(w).attr("id",C);var S=$(w);S.css({position:"absolute","z-index":2e3});var T=e.region.toLowerCase(),R=e.coordinateUnit.toLowerCase(),k="string"==typeof e.x||"object"==typeof e.x?Date.parse(e.x):e.x,O=e.y,D=e.horizontalAlignment.toLowerCase(),I=e.verticalAlignment.toLowerCase();if("pixels"==R){if("series"==T){if(h+l+u>k+l&&c+d+p>O+d)var j=k+l,L=O+d}else"chart"==T&&$(this.svgObject).width()>k&&$(this.svgObject).height()>O&&(j=k,L=O);S.css({left:j,top:L}),r=!0}else if("points"==R){var A={x:k,y:O};if("polaraxes"==this.model.AreaType){if(q=this.model._axes[0],Q=this.model._axes[1],k>=q.visibleRange.min&&k<=q.visibleRange.max&&O>=Q.visibleRange.min&&O<=Q.visibleRange.max){var E=this.TransformToVisibleAnnotation(q,Q,k,O,this);S.css({left:E.X,top:E.Y}),r=!0}}else if("pyramid"==o||"funnel"==o){for(var P=0;P<n._visiblePoints.length;P++)if(n._visiblePoints[P].xValue<=k&&k<n._visiblePoints.length||Date.parse(n._visiblePoints[P].xValue)<=k&&k<n._visiblePoints.length){var M=n._visiblePoints[k];S.css({left:M.xLocation+this.pyrX,top:M.yLocation+this.pyrY-M.height/2}),r=!0}}else if("pie"==o||"doughnut"==o||"pieofpie"==o){for(var P=0;P<n._visiblePoints.length;P++)if(n._visiblePoints[P].xValue<=k&&k<n._visiblePoints.length||Date.parse(n._visiblePoints[P].xValue)<=k&&k<n._visiblePoints.length){M=n._visiblePoints[k];var F,N,z=k,V=new ej.seriesTypes[o],B=M?M.currentMidAngle:0;z!=n.explodeIndex&&!n.explodeAll||this.vmlRendering?(F=f,N=_):(F=f+Math.cos(B)*n.explodeOffset,N=_+Math.sin(B)*n.explodeOffset);var H=V.getXCordinate(F,g,B),Y=V.getYCordinate(N,g,B);i=(H+F)/2,s=(Y+N)/2,i=(H+i)/2,s=(Y+s)/2,S.css({left:i,top:s}),r=!0}}else{for(var U=e.xAxisName,W=e.yAxisName,X=this.model._axes.length,G=0;G<X;G++){if(this.model._axes[G].name==U)var q=this.model._axes[G];if(this.model._axes[G].name==W)var Q=this.model._axes[G]}q||(q=this.model._axes[0]),Q||(Q=this.model._axes[1]);var K="string"==typeof q.range.min||"object"==typeof q.range.min?Date.parse(q.range.min):q.range.min,Z="string"==typeof q.range.max||"object"==typeof q.range.max?Date.parse(q.range.max):q.range.max;K<=k&&Z>=k&&(this.model.requireInvertedAxes?(A.x=A.y+(A.y=A.x,0),E=this._getAnnotationPoint(A,Q,q),S.css({left:E.X+l,top:E.Y+q.y})):(E=this._getAnnotationPoint(A,q,Q),S.css({left:E.X+l,top:E.Y+Q.y})),r=!0)}}else{S.css("display","block").appendTo($(b)),$(b).appendTo("#chartContainer_"+a);var J=S.outerWidth(),ee=S.outerHeight();if("chart"==T){switch(D){case"middle":j=$(this.svgObject).width()/2-J/2;break;case"left":j=0;break;case"right":j=$(this.svgObject).width()-J}switch(I){case"middle":L=$(this.svgObject).height()/2-ee/2;break;case"top":L=0;break;case"bottom":L=$(this.svgObject).height()-ee}}else if("pie"==o||"doughnut"==o||"pieofpie"==o){switch(j=f,L=_,D){case"middle":j=f-J/2;break;case"left":j=f-g;break;case"right":j=f+g-J}switch(I){case"middle":L=_-ee/2;break;case"top":L=_-g;break;case"bottom":L=_+g}}else{switch(D){case"middle":j=l+h/2-J/2;break;case"left":j=l;break;case"right":j=l+h-J}switch(I){case"middle":L=d+c/2-ee/2;break;case"top":L=d;break;case"bottom":L=d+c-ee}}"pyramid"!=o&&"funnel"!=o||(j-=u),S.css({left:j,top:L})}if(j=parseFloat(S.css("left")),L=parseFloat(S.css("top")),"none"!=R&&r){switch(S.css("display","block").appendTo($(b)),$(b).appendTo("#chartContainer_"+a),J=S.outerWidth(),ee=S.outerHeight(),D){case"middle":j-=J/2;break;case"left":j-=J}switch(I){case"middle":L-=ee/2;break;case"top":L-=ee}}var te=e.margin;j=j+te.left-te.right,L=L+te.top-te.bottom;var ie=$.extend({},ej.EjSvgRender.commonChartEventArgs);ie.data={content:S.html(),location:{x:j,y:L},opacity:e.opacity,angle:e.angle},this._trigger("annotationRendering",ie),S.html(ie.data.content),S.css({left:ie.data.location.x,top:ie.data.location.y,opacity:ie.data.opacity});var se=ie.data.angle;se&&S.css({"-ms-transform":"rotate("+se+"deg)","-webkit-transform":"rotate("+se+"deg)","-moz-transform":"rotate("+se+"deg)","-o-transform":"rotate("+se+"deg)","-transform":"rotate("+se+"deg)"});var ae=S.attr("id"),re=ce=de=le=0,ne=$("#"+this._id).width(),oe=$("#"+this._id).height();if(!r||0!=se||"series"!=T&&"points"!=R)if(r&&0==se&&"chart"==T){if(ne<j+J){pe=j+J-ne;var le=J-pe}if(j<0){var de=J+j;de=0==de?J:de}if(oe<L+ee)var he=L+ee-oe,ce=ee-he;L<0&&(re=ee+L,re=0==re?ee:re),le=0==le?J:le,ce=0==ce?ee:ce,document.getElementById(ae).style.clip="rect("+re.toString()+"px,"+le.toString()+"px,"+ce.toString()+"px,"+de+"px)"}else if(!r||90!=se||"series"!=T&&"points"!=R){if(r&&90==se&&"chart"==T){var ue=document.getElementById(ae).getBoundingClientRect();j=ue.left-$(this.svgObject).offset().left,L=ue.top-$(this.svgObject).offset().top,oe<L+J&&(pe=L+J-oe,le=J-pe),j<0&&(he=0-j,ce=ee-he,ce=0==ce?ee:ce),L<0&&(de=0-L,de=0==de?J:de),ne<j+ee&&(he=j+ee-ne,re=he),le=0==le?J:le,ce=0==ce?ee:ce,document.getElementById(ae).style.clip="rect("+re.toString()+"px,"+le.toString()+"px,"+ce.toString()+"px,"+de+"px)"}}else{var ue=document.getElementById(ae).getBoundingClientRect();j=ue.left-$(this.svgObject).offset().left+v.scrollLeft(),L=ue.top-$(this.svgObject).offset().top+v.scrollTop(),c+d<L+J&&(pe=L+J-(c+d),le=J-pe),j<l&&(he=l-j,ce=ee-he),L<d&&(de=d-L),h+l<j+ee&&(he=j+ee-(h+l),re=he),le=0==le?J:le,ce=0==ce?ee:ce,document.getElementById(ae).style.clip="rect("+re.toString()+"px,"+le.toString()+"px,"+ce.toString()+"px,"+de+"px)"}else{if(h+l<j+J){var pe=j+J-(h+l);le=J-pe}j<l&&(de=l-j),c+d<L+ee&&(he=L+ee-(c+d),ce=ee-he),L<d&&(re=d-L),le=0==le?J:le,ce=0==ce?ee:ce,document.getElementById(ae).style.clip="rect("+re.toString()+"px,"+le.toString()+"px,"+ce.toString()+"px,"+de+"px)"}},TransformToVisibleAnnotation:function(e,t,i,s,a){i="logarithmic"==e._valueType&&i>0?Math.log(i,e.logBase):i,s="logarithmic"==e._valueType&&s>0?Math.log(s,t.logBase):s;var r=a.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(t,s,this),n=ej.EjSvgRender.utils._valueToVector(e,i);return{X:a.model.centerX+r*n.X,Y:a.model.centerY+r*n.Y}},_getAnnotationPoint:function(e,t,i){var s=(this.model.requireInvertedAxes,e.x),a=e.y,r="logarithmic"==t._valueType?ej.EjSvgRender.utils._logBase(0==s?1:s,t.logBase):s,n="logarithmic"==i._valueType?ej.EjSvgRender.utils._logBase(0==a?1:a,t.logBase):a;return r=ej.EjSvgRender.utils._getPointXY(r,t.visibleRange,t.isInversed)*t.width,n=(1-ej.EjSvgRender.utils._getPointXY(n,i.visibleRange,i.isInversed))*i.height,e.location={X:r,Y:n},e.location},indicatorRender:function(){$(this.svgObject).find("#"+this.svgObject.id+"_IndicatorCollection").length>0&&$(this.svgObject).find("#"+this.svgObject.id+"_IndicatorCollection").remove();var e={id:this.svgObject.id+"_IndicatorCollection","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"};this.gIndicatorEle=this.svgRenderer.createGroup(e);for(var t=0;t<this.model.indicators.length&&this.model.indicators[t].visible&&this.model.indicators[t]._points.length>0;t++){for(var i,s=this.model.indicators[t],a=s.animationDuration,r=0;r<this.model._axes.length;r++){var n=this.model._axes[r];n.name&&"horizontal"==n.orientation.toLowerCase()&&n.name.toLowerCase()==s.xAxisName.toLowerCase()?s.xAxis=n:n.name&&"vertical"==n.orientation.toLowerCase()&&n.name.toLowerCase()==s.yAxisName.toLowerCase()&&(s.yAxis=n)}var o=s.type.toLowerCase();i=new ej.indicatorTypes[o],this.model.enableCanvasRendering?(this.svgRenderer.ctx.save(),this.svgRenderer.ctx.beginPath(),this.svgRenderer.ctx.rect(this.model.m_AreaBounds.X,s.yAxis.y,s.xAxis.width,s.yAxis.height),this.svgRenderer.ctx.clip(),i.draw(s,this),this.svgRenderer.ctx.restore()):i.draw(s,this);var l=i.gIndicatorGroupEle;if(l&&ej.EjSvgRender.utils._drawAxesBoundsClipPath(l,s,this),!this.vmlRendering&&!this.model.enableCanvasRendering&&s.enableAnimation&&(!s._animatedSeries||s.type!=s._previousType)){this.svgRenderer.append(this.gIndicatorEle,this.svgObject);var d=$(this.gIndicatorEle).find("#"+this.svgObject.id+"_indicatorGroup_"+t+"_ClipRect").children();ej.EjSeriesRender.prototype._doLineAnimation(this,d,a),this.model.AnimationComplete=!0,s._animatedSeries=!0,s._previousType=s.type}this.svgRenderer.append(this.gIndicatorEle,this.svgObject)}},doAnimation:function(e){var t,i,s,a,r,n,o,l,d,h,t,c,u,p,m,g,f,_,v,b,x,y=this,w=y.model,C=w.requireInvertedAxes,S=e.type.toLowerCase(),T=$.inArray(e,w._visibleSeries),R=this.svgObject.id+"_SeriesGroup_"+T,k=$(y.gSymbolGroupEle)[T].childNodes,O=k.length,D=$(y.gDataLabelEle)[T].childNodes,I=D.length,j=$(y.gConnectorEle)[T].childNodes,L=j.length,A=void 0==$(y.gErrorBarGroupEle)[T]?void 0:$(y.gErrorBarGroupEle)[T].childNodes,E=ej.util.isNullOrUndefined(A)?0:A.length,P=e._animationType,M=ej.EjSeriesRender.prototype;switch(y.gSeriesGroupEle=$("#"+R)[0],x=y.model.series[T].animationDuration,ej.util.isNullOrUndefined(x)?(f=2e3,_=200,v=500,b=1e3):(f=v=b=parseFloat(x),_=f/10),P){case"rect":if(d=$(this.gSeriesEle).find("#"+R).children("rect"),h=d.length,t=$(y.gSeriesEle).find("#"+R+"_ClipRect").children(),"boxandwhisker"==S){a=$(this.gSeriesEle).find("#"+R).children("line"),r=$(this.gSeriesEle).find("#"+R).children("path"),s=f/r.length;for(var F=0;F<a.length;F++)M._doLineSymbol(a[F],s,F,e,C,y,_),M._doLineSymbol(d[F],s,F,e,C,y,_);for(var g=0;g<r.length;g++)M._doLineSymbol(r[g],s,g,e,C,y,_)}else if(!S.indexOf("stacking")>-1&&"smooth"==e.animationType.toLowerCase())M.animateRect(t,e,C,y,b);else for(m=0;m<h;m++)S.indexOf("stacking")>-1?M.animateStackingRect(d[m],e,C,y,b):M.animateRect(d[m],e,C,y,b);n=o=i=f/4;break;case"path":t=$(y.gSeriesEle).find("#"+R+"_ClipRect").children(),M._doLineAnimation(y,t,f),n=f/O,o=f/I,i=f/E;break;case"scatter":for(m=0;m<O;m++)u=Math.floor(20*Math.random()+0),p=parseInt(50*u),M.animateSymbol(k[m],p,e,C,y,v);break;case"bubble":for(d=$(this.gSeriesGroupEle).children().not("defs"),p=0,m=0;m<d.length;m++)M.animateSymbol(d[m],p,e,C,y,v);for(m=0;m<O;m++)M.animateSymbol(k[m],p,e,C,y,v);for(m=0;m<I;m++)M.animateSymbol(D[m],p,e,C,y,v);for(m=0;m<L;m++)M.animateSymbol(j[m],p,e,C,y,v);break;case"hilo":d=$(this.gSeriesGroupEle).children().not("defs"),h=d.length,c=f/h;for(var m=0;m<h;m++)M._doLineSymbol(d[m],c,m,e,C,y,_);o=f/I;break;case"cylinder":t=$(y.gSeriesEle).find("#"+R+"_ClipRect").children(),M.animateCylinder(y,e,C,t,f),n=o=i=f/4}if("bubble"!=P){for(g=0;g<O;g++)l="rect"==P||"stackingRect"==P?2:g,M._doLineSymbol(k[g],n,l,e,C,y,_);for(g=0;g<I;g++)l="rect"==P||"stackingRect"==P?2:g,M._doLineSymbol(D[g],o,l,e,C,y,_);for(c=f/L,g=0;g<L;g++)l="rect"==P||"stackingRect"==P?2:g,M._doLineSymbol(j[g],c,l,e,C,y,_)}if("visible"==e.errorBar.visibility)for(g=0;g<E;g++)l="rect"==P||"stackingRect"==P?2:g,M._doLineSymbol(A[g],i,l,e,C,y,_)},_animationElements:function(e,t,i){var s=this,a=s.model.series[i].animationDuration,r=ej.util.isNullOrUndefined(a)?2e3:parseFloat(a);if(e._previousType=ej.util.isNullOrUndefined(e._previousType)?e.type:e._previousType,!e.enableAnimation||this.vmlRendering||this.model.enableCanvasRendering||e._animatedSeries&&e.type==e._previousType||(ej.EjSeriesRender.prototype.doCircularAnimation(this,e,t,i,r),e._previousType=e.type,e._animatedSeries=!s.isSplitted),s.isSplitted=!1,this.drawAccDisplayText(t,e,i),e.enableAnimation&&e._visiblePoints.length>0&&e.AnimationComplete&&!this.vmlRendering&&!this.model.enableCanvasRendering){s.svgRenderer._setAttr($(s.gSeriesEle).find("#"+s.gSeriesTextEle[i].id),{visibility:"visible"}),s.gSymbolGroupEle&&s.svgRenderer._setAttr($(s.gSeriesEle).find("#"+s.gSymbolGroupEle[i].id),{visibility:"visible"});var n;if(e.marker.dataLabel.template){n=$(s.element[0].childNodes[0].childNodes);for(var o=0;o<n.length;o++)$(n[o]).css("display","block")}s.gConnectorEle&&s.svgRenderer._setAttr($(s.gSeriesEle).find("#"+s.gConnectorEle[i].id),{visibility:"visible"}),s.gDataLabelEle&&s.svgRenderer._setAttr($(s.gSeriesEle).find("#"+s.gDataLabelEle[i].id),{visibility:"visible"})}},_appendConnectorElements:function(e){var t=ej.DataManager(this.model._visibleSeries,ej.Query().sortBy("_zOrder")).executeLocal(),i=t[e];i.type.toLowerCase();"visible"!=i.visibility||this.model.enable3D||!i.connectorLine||!i.connectorLines&&"none"!=this.model.AreaType||(this.svgRenderer.append(this.gConnectorEle[e],this.gSeriesEle),i.connectorLines=!1)},_appendDataLabelElement:function(e){var t,i;t=this.model._visibleSeries[e],i=ej.util.isNullOrUndefined(t.zOrder)?i:t.zOrder,"visible"!=t.visibility||this.model.enable3D||(this.svgRenderer.append(this.gSymbolGroupEle[e],this.gSeriesEle),this.model.enable3D||this.model.enableCanvasRendering||(this.gDataLabelEle[e].childNodes.length>0&&this.svgRenderer.append(this.gDataLabelEle[e],this.gSeriesEle),this.gSeriesTextEle[e].childNodes.length>0&&this.svgRenderer.append(this.gSeriesTextEle[e],this.gSeriesEle))),this.vmlRendering||"visible"!=t.visibility||this.model.enableCanvasRendering||this.model.enable3D||(this.svgRenderer.append(this.gSeriesEle,this.svgObject),this.svgRenderer.append(this.svgObject,this.element))},_accSeriesDraw:function(e,t,i){var s=this,a=ej.DataManager(this.model._visibleSeries,ej.Query().sortBy("_zOrder")).executeLocal(),r=$.inArray(a[e],this.model._visibleSeries);this.model._visibleSeries[r]=a[e]=$.extend(!0,t,a[e]);var n=$.extend({},ej.EjSvgRender.commonChartEventArgs);n.data={series:t},this._trigger("seriesRendering",n);var o=new(ej.seriesTypes[i.toLowerCase()]);o.draw(s,t)||(this.model.minhightwidth=!0,s._animationElements(t,o,r))},_splitSeries:function(e){var t=[];t[0]=$.extend(!0,[],e._visiblePoints),t[1]=[];for(var i,s=e,a=parseInt(s.splitValue),r=s.splitMode.toLowerCase(),n=t[0].length,o=0,l=0,d=[],h=0,c=0;h!=n;)c+=t[0][h].y,h++;if("position"==r){for(var h=n-1;h>=0&&l!=a;h--)o+=t[0][h].y,t[1][l]=t[0][h],l++,t[0].splice(h,1);t[1].reverse()}else if("value"==r||"percentage"==r)for(var u=0;u<t[0].length;u++)("value"==r?t[0][u].y:Math.round(t[0][u].y/c*100))<a&&(o+=t[0][u].y,t[1][l]=t[0][u],l++,t[0].splice(u,1),u=-1);else if("indexes"==r){var p=JSON.parse("["+s.splitValue+"]");p=p.filter(function(e,t,i){return i.indexOf(e)==t}),p.sort();for(var u=0;u<t[0].length;u++)for(var m=0;m<p.length;m++)u==p[m]&&(o+=t[0][u].y,t[1][l]=t[0][u],l++);for(var h=0;h<p.length;h++){var g=p[h]-h;t[0].splice(g,1)}}t[1].length>0&&(d[0]=o,i=s._xAxisValueType,t[0].unshift({_visibility:"visible",visible:!0,text:"Others",x:"string"==i?"Others":o,xValue:"string"==i?s.points.length:o,y:o,YValues:d,fill:this.model.colors[(s.points.length+1)%this.model.colors.length],isFill:!1,actualIndex:s.points.length})),this.isSplitted=!0,s.pieCollections=t},_calculateGapWidth:function(e){var t,i,s,a=0,r=0,n=.1*Math.min($(this.svgObject).width(),$(this.svgObject).width());ej.EjSeriesRender.prototype._calculateVisiblePoints(e).visiblePoints,this._splitSeries(e),this.chartObj=this;for(var o=0;o<2;o++){t=0==o?e.pieCoefficient:e.pieOfPieCoefficient,e._visiblePoints=e.pieCollections[o],e.collectionIndex=o,s=e.gapWidth;var l=ej.EjSeriesRender.prototype.calculatingSliceAngle(e,this.chartObj),d=l.width<n?.25*t*n:.25*t*Math.min(l.width,l.height);i=this.model.circleCenterX[o],0==o?a=i+d:r=i-d}var h=r-a-s;return this.model.pieGapWidth=h>0?h:0,e.pieCollections[0].length>0&&e.pieCollections[1].length>0&&e.connectorLine.width>0&&this.drawPieofPieConnectors(l,e),e},seriesRender:function(e,t){if(this.model.allPoints=[],this.model.markerRegion=[],this.model.startX=[],this.model.startY=[],this.model.centerCount=0,this.gTrendlinesGroupEle=null,this.model._seriesIndex=null,this.model._previousSeries=null,!e){e={_crossAxisOverlap:!1,axes:{}};for(var i=0;i<this.model._axes.length;i++)e.axes[this.model._axes[i].name]={}}$(this.svgObject).find("#"+this.svgObject.id+"_SeriesCollection").length>0&&$(this.svgObject).find("#"+this.svgObject.id+"_SeriesCollection").remove();var i,s,a,r,n,r,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,j,L,A,E,P,M,F,N,z,V,B,H,Y,U,W,X,G,q,Q=this,K=this.svgObject,Z={id:K.id+"_SeriesCollection","clip-path":"url(#"+K.id+"_ChartAreaClipRect)"},J=this.model.enable3D,ee=this.model.AreaType,te=this.model.enableCanvasRendering,ie=this.model._axes.length,se=ej.DataManager(this.model._visibleSeries,ej.Query().sortBy("_zOrder")).executeLocal(),ae=se.length,re=te,ne=this.svgRenderer,oe=this.model.m_AreaBounds,le=oe.X,de=this.zoomed;for(this.gSeriesEle=ne.createGroup(Z),i=0;i<ae;i++)if("visible"==se[i].visibility)for(ej.util.isNullOrUndefined(this.model.series[i].enableSmartLabels)?this.model.series[i]._enableSmartLabels="none"==ee:this.model.series[i]._enableSmartLabels=this.model.series[i].enableSmartLabels,ej.util.isNullOrUndefined(se[i].xAxis)||(se[i].xAxis=null,se[i].yAxis=null),s=0;s<ie;s++)a=this.model._axes[s],r=i,n=a.orientation.toLowerCase(),a.name&&"horizontal"==n&&a.name.toLowerCase()==se[i]._xAxisName.toLowerCase()?se[i].xAxis=a:a.name&&"vertical"==n&&a.name.toLowerCase()==se[i]._yAxisName.toLowerCase()&&(se[i].yAxis=a),this.model.requireInvertedAxes&&(a.name&&"vertical"==n&&a.name.toLowerCase()==se[i]._xAxisName.toLowerCase()?se[i].xAxis=a:a.name&&"horizontal"==n&&a.name.toLowerCase()==se[i]._yAxisName.toLowerCase()&&(se[i].yAxis=a));if(ae>0)if(c=se[0],H=c.type.toLowerCase(),W=c.visibility.toLowerCase(),"pieofpie"!=H||"visible"!=W||J)for(var U=ae;U>0&&"none"==ee;U--)r=U-1,o=se[U-1],l=o.visibility.toLowerCase(),d=o.type.toLowerCase(),"visible"!==l||J||"pie"!=d&&"doughnut"!=d?"none"!=ee||"visible"!==l||te||ej.Ej3DChart.prototype.renderSeries(this,o,t):this._accSeriesDraw(r,o,d);else{this.model._isPieOfPie=!0,c=this._calculateGapWidth(c);for(var he=0;he<2;he++)c.collectionIndex=he,c._visiblePoints=c.pieCollections[he],this._accSeriesDraw(0,c,H);c._visiblePoints=$.merge(c.pieCollections[0],c.pieCollections[1]),this.model.pieGapWidth=null,c.collectionIndex=0}for(var ce=0;ce<ae;ce++)if(r=ce,o=se[ce],l=o.visibility.toLowerCase(),d=o.type.toLowerCase(),"none"!=ee||"visible"!==l||J||0!==r||"pyramid"!=d&&"funnel"!=d){if("visible"!==l||J||"none"==ee?J||"none"==ee?"cartesianaxes"!=ee||"visible"!==l||te||ej.Ej3DChart.prototype.renderSeries(this,o,e,t):ne.append(K,this.element):(this.model._seriesIndex=ej.util.isNullOrUndefined(this.model._seriesIndex)?0:this.model._seriesIndex+1,this.renderSeries(o,e,t),"cartesianaxes"==ee&&"boxandwhisker"!=this.model.series[ce].type&&this._renderTrendline(Q,o)),!ej.util.isNullOrUndefined(o.xAxis)&&"datetime"==o.xAxis._valueType)for(var i=0;i<o.points.length;i++)o.points[i].xValue instanceof Date==0&&(o.points[i].xValue=new Date(o.points[i].xValue))}else this._accSeriesDraw(r,o,d);if("none"!=ee){for(i=0;i<ae;i++)if(c=this.model.series[i],p=c._visiblePoints,c._enableSmartLabels&&"cartesianaxes"==this.model.AreaType)for(m=c.type.toLowerCase(),"column"==m||"stackingcolumn"==m||"bar"==m||"stackingbar"==m||"waterfall"==m||"stackingbar100"==m||"stackingcolumn100"==m||"rangecolumn"==m?this.cartesianColumnSmartLabels(c,p,i):"boxandwhisker"!=m&&this.cartesianSmartLabels(c,p,i),s=0;s<p.length;s++)u=p[s],u.hide=!ej.util.isNullOrUndefined(u.hide)&&u.hide,g=re?u.xPos-this.canvasX:u.xPos,f=re?u.yPos-this.canvasY:u.yPos,X=c.xAxis.visibleRange,G=c.yAxis.visibleRange,q=-1!=d.indexOf("100")?parseFloat(u.percentage):u.y,(g-u.width/2<0||g+u.width/2>oe.Width||f+u.height/2>oe.Height||f-u.height/2<0||de&&(u.xValue<=X.min||u.xValue>=X.max)||q<=G.min||q>=G.max)&&(u.hide=!(c.marker.dataLabel.showEdgeLabels&&!u.hide));for(i=0;i<ae;i++)if(c=se[i],Y=!c._dataLabels||(c.marker.dataLabel.visible||c._dataLabels>0),"visible"==c.visibility&&Y)for(y=c._visiblePoints.length,b=0;b<y;b++)u=c._visiblePoints[b],x=u.marker&&u.marker.dataLabel&&u.marker.dataLabel.visible,(c.marker.dataLabel.visible||x)&&(!u.connectorFlag&&!u.newConnectorFlag||u.hide||""==u.drawText||"visible"!=c.visibility||ej.util.isNullOrUndefined(u.textOptions)||(c.connectorLine=!0,te?(ne.ctx.save(),Q.model.requireInvertedAxes?ne.ctx.rect(le+c.yAxis.plotOffset,c.xAxis.y,c.yAxis.width,c.xAxis.height):ne.ctx.rect(le,c.yAxis.y,c.xAxis.width,c.yAxis.height),ne.ctx.clip(),this.drawConnectorLines(i,b,u),ne.ctx.restore()):c._enableSmartLabels&&this.drawConnectorLines(i,b,u)),u.newConnectorFlag=!1);for(i=0;i<ae;i++)if(c=se[i],d=c.type.toLowerCase(),Y=!c._dataLabels||(c.marker.dataLabel.visible||c._dataLabels>0),"visible"==c.visibility&&Y&&!this.model.enable3D)for(y=c._visiblePoints.length,b=0;b<y;b++)if(u=c._visiblePoints[b],_=u.marker&&u.marker.dataLabel&&u.marker.dataLabel.visible,(c.marker.dataLabel.visible||_)&&!u.hide&&!u.dataLabeltemplate&&"visible"==c.visibility&&!ej.util.isNullOrUndefined(u.textOptions)&&!u.hide){if(ej.util.isNullOrUndefined(u.textOptions.angle)||(u.textOptions.transform="rotate("+u.textOptions.angle+","+u.xPos+","+u.yPos+")"),te){if(u.textOptions.labelRotation=u.textOptions.angle,ne.ctx.save(),Q.model.requireInvertedAxes?Q.svgRenderer.ctx.rect(le+c.yAxis.plotOffset,c.xAxis.y,c.yAxis.width,c.xAxis.height):ne.ctx.rect(le,c.yAxis.y,c.xAxis.width,c.yAxis.height),Q.svgRenderer.ctx.save(),Q.svgRenderer.ctx.clip(),"boxandwhisker"==d.toLowerCase()){1==c.showMedian&&""!=u.textOptionsBoxValues&&(ej.util.isNullOrUndefined(u.textOptionsBoxValues[0].angle)||(u.textOptionsBoxValues[0].labelRotation=u.textOptionsBoxValues[0].angle,u.textOptionsBoxValues[0].transform="rotate("+u.textOptionsBoxValues[0].angle+","+u.textOptionsBoxValues[0].xPos+","+u.textOptionsBoxValues[0].yPos+")"),ej.EjSeriesRender.prototype.dataLabelSymbol(i,c,b,u.textOptionsBoxValues[0].xPos,u.textOptionsBoxValues[0].yPos,u.textOptionsBoxValues[0].width,u.textOptionsBoxValues[0].height,u.textOptionsBoxValues[0].symbolName,this),delete u.textOptionsBoxValues[0].angle,this.svgRenderer.drawText(u.textOptionsBoxValues[0],u.textOptionsBoxValues[0].drawText,this.gSeriesTextEle[i]));for(var v=1;v<u.textOptionsBoxValues.length;v++)ej.util.isNullOrUndefined(u.textOptionsBoxValues[v].angle)||(u.textOptionsBoxValues[v].labelRotation=u.textOptionsBoxValues[v].angle,u.textOptionsBoxValues[v].transform="rotate("+u.textOptionsBoxValues[v].angle+","+u.textOptionsBoxValues[v].xPos+","+u.textOptionsBoxValues[v].yPos+")"),ej.EjSeriesRender.prototype.dataLabelSymbol(i,c,b,u.textOptionsBoxValues[v].xPos,u.textOptionsBoxValues[v].yPos,u.textOptionsBoxValues[v].width,u.textOptionsBoxValues[v].height,u.textOptionsBoxValues[v].symbolName,this),delete u.textOptionsBoxValues[v].angle,this.svgRenderer.drawText(u.textOptionsBoxValues[v],u.textOptionsBoxValues[v].drawText,this.gSeriesTextEle[i])}else ej.EjSeriesRender.prototype.dataLabelSymbol(i,c,b,u.xPos,u.yPos,u.width,u.height,u.symbolName,this),delete u.textOptions.angle,this.svgRenderer.drawText(u.textOptions,u.drawText,this.gSeriesTextEle);Q.svgRenderer.ctx.restore()}else ej.EjSeriesRender.prototype.dataLabelSymbol(i,c,b,u.xPos,u.yPos,u.width,u.height,u.symbolName,this,this.gDataLabelEle[i]),delete u.textOptions.angle,ne.drawText(u.textOptions,u.drawText,this.gSeriesTextEle[i]);if("rangecolumn"==d||"rangearea"==d||"splinerangearea"==d)u.textOptionsLow.transform="rotate("+u.textOptionsLow.angle+","+u.xPosLow+","+u.yPosLow+")",te?(u.textOptionsLow.labelRotation=u.textOptionsLow.angle,ne.ctx.save(),
Q.model.requireInvertedAxes?ne.ctx.rect(le+c.yAxis.plotOffset,c.xAxis.y,c.yAxis.width,c.xAxis.height):ne.ctx.rect(le,c.yAxis.y,c.xAxis.width,c.yAxis.height),ne.ctx.clip(),ej.EjSeriesRender.prototype.dataLabelSymbol(i,c,b,u.xPosLow,u.yPosLow,u.widthLow,u.heightLow,u.symbolName,this),delete u.textOptionsLow.angle,ne.drawText(u.textOptionsLow,u.drawTextLow,this.gSeriesTextEle),ne.ctx.restore()):(ej.EjSeriesRender.prototype.dataLabelSymbol(i,c,b,u.xPosLow,u.yPosLow,u.widthLow,u.heightLow,u.symbolName,this,this.gDataLabelEle[i]),delete u.textOptionsLow.angle,ne.drawText(u.textOptionsLow,u.drawTextLow,this.gSeriesTextEle[i]));else if("boxandwhisker"==d.toLowerCase()){1==c.showMedian&&""!=u.textOptionsBoxValues&&(ej.util.isNullOrUndefined(u.textOptionsBoxValues[0].angle)||(u.textOptionsBoxValues[0].transform="rotate("+u.textOptionsBoxValues[0].angle+","+u.textOptionsBoxValues[0].xPos+","+u.textOptionsBoxValues[0].yPos+")"),ej.EjSeriesRender.prototype.dataLabelSymbol(i,c,b,u.textOptionsBoxValues[0].xPos,u.textOptionsBoxValues[0].yPos,u.textOptionsBoxValues[0].width,u.textOptionsBoxValues[0].height,u.textOptionsBoxValues[0].symbolName,this),delete u.textOptionsBoxValues[0].angle,this.svgRenderer.drawText(u.textOptionsBoxValues[0],u.textOptionsBoxValues[0].drawText,this.gSeriesTextEle[i]));for(var v=1;v<u.textOptionsBoxValues.length;v++)ej.util.isNullOrUndefined(u.textOptionsBoxValues[v].angle)||(u.textOptionsBoxValues[v].transform="rotate("+u.textOptionsBoxValues[v].angle+","+u.textOptionsBoxValues[v].xPos+","+u.textOptionsBoxValues[v].yPos+")"),ej.EjSeriesRender.prototype.dataLabelSymbol(i,c,b,u.textOptionsBoxValues[v].xPos,u.textOptionsBoxValues[v].yPos,u.textOptionsBoxValues[v].width,u.textOptionsBoxValues[v].height,u.textOptionsBoxValues[v].symbolName,this),delete u.textOptionsBoxValues[v].angle,this.svgRenderer.drawText(u.textOptionsBoxValues[v],u.textOptionsBoxValues[v].drawText,this.gSeriesTextEle[i])}}if("none"!=ee){for(i=0;i<ae;i++)this._appendConnectorElements(i);for(C=this.model._visibleSeries.length,i=0;i<C;i++)this._appendDataLabelElement(i)}}else{for(w=ae-1;w>=0;w--)c=this.model._visibleSeries[w],"pie"!=(d=c.type.toLowerCase())&&"doughnut"!=d||!this.model.minhightwidth||this._appendConnectorElements(w);if((C=this.model._visibleSeries.length)>0&&"pieofpie"==d)this._appendDataLabelElement(0);else for(w=ae-1;w>=0;w--)c=this.model._visibleSeries[w],"pie"!=(d=c.type.toLowerCase())&&"doughnut"!=d||!this.model.minhightwidth||this._appendDataLabelElement(w)}for(C=this.model._visibleSeries.length,S=0;S<C;S++)A=this.model._visibleSeries[S],D=A.drawType,d=A.type.toLowerCase(),A._previousType=ej.util.isNullOrUndefined(A._previousType)?A.type:A._previousType,this.vmlRendering||"visible"!=A.visibility||te||J||"none"==ee||(this.renderer.append(this.gSeriesEle,this.svgObject),this.renderer.append(this.svgObject,this.element),T=new(ej.seriesTypes[A.type.toLowerCase()]),T.chartObj=Q,T.gSeriesGroupEle="scatter"==D?$("#"+this.svgObject.id+"_symbolGroup_"+S)[0]:$("#"+this.svgObject.id+"_SeriesGroup_"+S)[0],!A.enableAnimation||A._animatedSeries&&A._previousType==A.type||"none"==this.model.AreaType||(A._animatedSeries=!0,A._previousType=A.type,R=$("#template_group_"+this._id),k=A.marker.dataLabel,0!=R.children().length&&k.visible&&k.template&&T.animateLabelTemplate(A),"polar"==d||"radar"==d?ej.ejRadarSeries.prototype.doAnimation(A,T):this.doAnimation(A)));if(se=this.model._visibleSeries,C=se.length,!te&&!J)for(he=0;he<C;he++)"visible"==se[he].visibility.toLowerCase()&&this.gTrendlinesGroupEle&&this.gTrendlinesGroupEle[he]&&0!=this.gTrendlinesGroupEle[he].childElementCount&&this.renderer.append(this.gTrendlinesGroupEle[he],K);for(i=0;i<C;i++)for(c=this.model._visibleSeries[i],I=c.trendlines,E=c.trendlines.length,P=c.animationDuration,s=0;s<E;s++)j=I[s],j.visibility&&(L=j.type.toLowerCase(),A=new ej.trendlineTypes[L],!("visible"===j.visibility.toLowerCase()&&j.points&&j.points.length>1&&c.enableAnimation)||this.vmlRendering||c._animatedTrendline&&j._previousType==j.type||(j._previousType=j.type,O=$(this.svgObject).find("#"+this.svgObject.id+"_TrendGroup_"+i+"_"+s+"_ClipRect").children(),ej.EjSeriesRender.prototype._doLineAnimation(this,O,P),c._animatedTrendline=E-1==i));for(C=this.model._visibleSeries.length,N=K.id,i=0;i<C;i++)M=$("#"+N+"_SeriesGroup_"+i),z=$("#"+N+"_SeriesGroup_waterfallLine_"+i),F=$("#"+N+"_symbolGroup_"+i),M.length>0&&F.length>0&&F.insertAfter(M),M.length>0&&z.length>0&&z.insertAfter(M);this.model.AnimationComplete=!0,h=$.extend({},ej.EjSvgRender.commonChartEventArgs),h.data={series:A},this._trigger("animationComplete",h),te&&(ne.append(K,this.element),this.panning&&$("#"+this._id+"_canvas").css({cursor:"pointer"})),J&&!te&&(ne.append(this.chart3D,K),V={Width:$(K).width(),Height:$(K).height()},this.graphics.prepareView(this.model.perspectiveAngle,this.model.depth,this.model.rotation,this.model.tilt,V,this),this.graphics.view(K,this),ne.append(K,this.element)),ne.vmlNamespace&&ne.append(this.gSeriesEle,K),"polaraxes"==ee&&ne.append(this.gPolarAxisEle,K),$(K).find("#"+K.id+"_StriplineOver").length>0&&(B=$(K).find("#"+K.id+"_StriplineOver").detach(),B.appendTo(K)),this._renderScrollbar(),this.legendRender.drawLegend(e),Q.model.initSeriesRender=!0},_calculateZoomValue:function(e,t,i,s){var a,r,n,o,l,d=(this.model,i.scrollbarSettings.range);"datetime"==i._valueType.toLowerCase()?(o=Date.parse(ej.util.isNullOrUndefined(d.min)?e:new Date(d.min)),l=Date.parse(ej.util.isNullOrUndefined(d.max)?t:new Date(d.max))):(o=parseFloat(ej.util.isNullOrUndefined(d.min)?e:d.min),l=parseFloat(ej.util.isNullOrUndefined(d.max)?t:d.max)),o=Math.min(o,e),l=Math.max(l,t),a=l-o,s.isRTL?(r=(l-t)/a,n=(t-e)/a):(r=(e-o)/a,n=(t-e)/a),s.scrollRange={min:o,max:l,delta:l-o},s._previousStart=e,s._previousEnd=t,s.zoomPosition=r,s.zoomFactor=n},_renderScrollbar:function(){var e,t,e,i,s,a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b=this.model,x=b.scrollerSize,y=$("#"+this._id).offset(),w=$(this.svgObject).offset().left-y.left,C=b._axes,S=C.length,T=b.zooming.enableScrollbar,R=b.AreaType;b.scrollObj=b.scrollObj?b.scrollObj:[];for(var k=0;k<S;k++)if(i=C[k],_=i._valueType,c=i.scrollbarSettings,h=c.range,d=i.isInversed,v="cartesianaxes"==R&&!b.enable3D,l=i._opposed,u=c.pointsLength,f=i.orientation.toLowerCase(),n=i.zoomFactor,p=$("#scrollbar_"+this.axisScroll[0].id+k).length,o=i.zoomPosition,v&&(i._isScroll&&b.isLazyZooming||(n<1||o>0)&&T)){e=i.x+("vertical"==f?-x+(l?x:0):0)+(w<=0?0:w),t=i.y+("horizontal"==f?i.height+(l?-x:0):0),s=t-("horizontal"==f?0:i.plotOffset),a=i.plotOffset+("horizontal"==f?i.width:i.height),g=b.scrollObj,r=null!=h.min||null!=h.max?!!g[k]&&(g[k].actualRange.min!=h.min||g[k].actualRange.max!=h.max):!!g[k]&&g[k].actualRange!=c.pointsLength,this.scrollDraw=g[k]?g[k].x!=e||g[k].y!=t||g[k].width!=a:this.scrollDraw;var O={orientation:i.orientation,index:k,width:a,x:e,y:s,opposed:l,isRTL:d,parent:this.axisScroll,enableResize:c.canResize};b.isLazyZooming?(0==p||this.scrollDraw||r)&&($("#scrollbar_"+this.axisScroll[0].id+k).remove(),null!=h.min||null!=h.max?(m=g[k]&&g[k].scrollRange?g[k].scrollRange:i.visibleRange,!this.scrollDraw||r?(g[k]={isVirtual:!0,valueType:_,scrollRange:m},g[k].actualRange=$.extend(g[k].actualRange,c.range),$.extend(g[k],O),"datetime"==_?(g[k].startDateTime=new Date(i.visibleRange.min),g[k].endDateTime=new Date(i.visibleRange.max)):(g[k].startValue=i.visibleRange.min,g[k].endValue=i.visibleRange.max),this._calculateZoomValue(i.visibleRange.min,i.visibleRange.max,i,this.model.scrollObj[k])):(g[k].width=a,g[k].x=e,g[k].y=s)):u>=i.maxPointLength&&(n=i.maxPointLength/u,o=d?1-i.zoomPosition:i.zoomPosition,!this.scrollDraw||r?(g[k]={isVirtual:!0,zoomPosition:o,zoomFactor:n,scrollRange:{min:0,max:u-1,delta:u-1},valueType:"double"},g[k].actualRange=c.pointsLength,$.extend(g[k],O),g[k].startValue=0,g[k].endValue=i.maxPointLength):(g[k].width=a,g[k].x=e,g[k].y=s)),this.model.scrollObj[k]&&(this.scrollbarContainer=new ej.EjSvgScrollbarRender(this.axisScroll,this.model.scrollObj[k]),this.scrollbarContainer._initializeScrollbarVariables(this.model.scrollObj[k]),this.scrollbarContainer._renderScrollbar.call(this,this.model.scrollObj[k]))):c.visible&&(g=b.scrollObj,(0==p||this.scrollDraw)&&($("#scrollbar_"+this.axisScroll[0].id+k).remove(),g[k]={zoomPosition:o,zoomFactor:n,valueType:_,scrollRange:i.actualRange,isZooming:!0},$.extend(g[k],O),"datetime"==g[k].valueType?(g[k].startDateTime=new Date(g[k].scrollRange.min),g[k].endDateTime=new Date(g[k].scrollRange.max)):(g[k].startValue=g[k].scrollRange.min,g[k].endValue=g[k].scrollRange.max),this.scrollbarContainer=new ej.EjSvgScrollbarRender(this.axisScroll,this.model.scrollObj[k]),this.scrollbarContainer._initializeScrollbarVariables(this.model.scrollObj[k]),this.scrollbarContainer._renderScrollbar.call(this,this.model.scrollObj[k])))}else p>0&&$("#scrollbar_"+this.axisScroll[0].id+k).remove();this.scrollDraw=!1},_renderTrendline:function(e,t){var i,s,a,r,n,o,l,d,h,c,u,p,m,g,f,_=$.inArray(t,e.model.series),v=e.model.requireInvertedAxes?t.yAxis.x:t.xAxis.x,b=e.model.requireInvertedAxes?t.xAxis.y:t.yAxis.y,x="translate("+v+","+b+")",y={id:e.svgObject.id+"_TrendlinesGroup_"+_,"clip-path":"url(#"+e.svgObject.id+"_TrendlinesGroup_"+_+"_ClipRect)"},w=t.trendlines,C="",S=w.length;for(e.gTrendlinesGroupEle||(e.gTrendlinesGroupEle=[]),e.gTrendlinesGroupEle[_]=e.svgRenderer.createGroup(y),l=0;l<S;l++)if(o=w[l],o.seriesIndex=_,o.isTrendLine=!0,o.trendlineIndex=l,"visible"===o.visibility.toLowerCase()&&!o.isNull&&o.points){switch(u={id:e.svgObject.id+"_TrendGroup_"+_+"_"+l,transform:x,"clip-path":"url(#"+e.svgObject.id+"_TrendGroup_"+_+"_"+l+"_ClipRect)"},t.gTrendGroupEle=null,t.gTrendGroupEle=e.svgRenderer.createGroup(u),p=o.type.toLowerCase(),n=new ej.trendlineTypes[p],d=o.slope,h=o._intercept,p){case"linear":C="y = "+d.toFixed(4)+"x + "+h.toFixed(4);break;case"exponential":C="y = "+h.toFixed(3)+"e^"+d.toFixed(4)+"x";break;case"logarithmic":C="y = "+d.toFixed(3)+"ln(x) + "+h.toFixed(4);break;case"power":C="y = "+h.toFixed(3)+"x^"+d.toFixed(4);break;case"polynomial":for(a=o.polynomialSlopes,r=a.length,C="y = ",i=r-1;i>=0;i--)c=a[i],C+=c>0?"+"+c:"-"+Math.abs(c),0!=i&&(C+="x^"+i+" ")}o.equation=C,m=$.extend({},ej.EjSvgRender.commonChartEventArgs),g=o.points[0],f=o.points[o.points.length-1],m.data={series:t,trendline:o,forwardForecastPoints:f,backwardForecastPoints:g},this._trigger("trendlineRendering",m),e.model.enableCanvasRendering?(this.svgRenderer.ctx.save(),this.svgRenderer.ctx.beginPath(),this.svgRenderer.ctx.rect(e.model.m_AreaBounds.X,t.yAxis.y,t.xAxis.width,t.yAxis.height),this.svgRenderer.ctx.clip(),this.svgRenderer.ctx.beginPath(),n.draw(o,t,e),this.svgRenderer.ctx.restore()):(n.draw(o,t,e),(s=t.gTrendGroupEle)&&ej.EjSvgRender.utils._drawAxesBoundsClipPath(s,t,this))}},_renderStripline:function(e){$.extend(ej.EjStripline.prototype,this),this.chartstripline=new ej.EjStripline(this);var t=this.chartstripline;this.model._stripeline=!1;for(var i=0;i<this.model._axes.length;i++)for(var s=this.model._axes[i],a=0;a<s.stripLine.length;a++)s.stripLine[a].zIndex.toLowerCase()==e&&t._drawStripline(s,s.stripLine[a],i,a);"over"==e&&this.model._stripeline?this.svgRenderer.append(this.gStriplineOver,this.svgObject):this.model._stripeline&&this.svgRenderer.append(this.gStriplineBehind,this.svgObject)},renderSeries:function(e,t,i){for(var s,a=e.drawType,r=$.inArray(e,this.model._visibleSeries),n=0;n<e.points.length&&("string"==typeof e.points[n].x&&-1!=e.points[n].x.indexOf("/Date("));n++)e.points[n].x=new Date(parseInt(e.points[n].x.substr(6)));e.xAxis=null===e.xAxis||void 0===e.xAxis?this.model._axes[0]:e.xAxis,e.yAxis=null===e.yAxis||void 0===e.yAxis?this.model._axes[1]:e.yAxis;var o,l,d=e.type.toLowerCase(),h=e.drawType.toLowerCase(),c=null;if("cartesianaxes"==this.model.AreaType){var u=ej.EjSvgRender.utils._getTransform(e.xAxis,e.yAxis,this.model.requireInvertedAxes),c="translate("+u.x+","+u.y+")";l="visible"}else l=e.enableAnimation&&!e._animatedSeries?"hidden":"visible";var p={id:this.svgObject.id+"_TextGroup_"+r,transform:c,visibility:l},m={id:this.svgObject.id+"_DataLabel_"+r,transform:c,visibility:l};o="scatter"!=d?{id:this.svgObject.id+"_symbolGroup_"+r,transform:c,visibility:l}:{id:this.svgObject.id+"_SeriesGroup_"+r,transform:c};var g={id:this.svgObject.id+"_ConnectorGroup_"+r,transform:c,visibility:l};this.gSymbolGroupEle||(this.gSymbolGroupEle=[]),this.gSymbolGroupEle[r]=this.svgRenderer.createGroup(o),this.gSeriesTextEle||(this.gSeriesTextEle=[]),this.gSeriesTextEle[r]=this.svgRenderer.createGroup(p),this.gConnectorEle||(this.gConnectorEle=[]),this.gConnectorEle[r]=this.svgRenderer.createGroup(g),this.gDataLabelEle||(this.gDataLabelEle=[]),this.gDataLabelEle[r]=this.svgRenderer.createGroup(m);var f=$.extend({},ej.EjSvgRender.commonChartEventArgs);f.data={series:e},this._trigger("seriesRendering",f);var _=new ej.seriesTypes[d];if(this.model.enableCanvasRendering&&"none"!=this.model.AreaType){if(this.svgRenderer.ctx.save(),this.svgRenderer.ctx.beginPath(),this.model.requireInvertedAxes){var c=ej.EjSvgRender.utils._getTransform(e.xAxis,e.yAxis,this.model.requireInvertedAxes);this.canvasX=c.x,this.canvasY=c.y,this.svgRenderer.ctx.rect(e.yAxis.x,e.xAxis.y,e.yAxis.width,e.xAxis.height)}else this.canvasX=e.xAxis.x,this.canvasY=e.yAxis.y,this.svgRenderer.ctx.rect(e.xAxis.x,e.yAxis.y,e.xAxis.width,e.yAxis.height);this.svgRenderer.ctx.clip(),_.draw(this,e,t,i),this.svgRenderer.ctx.restore()}else this.model.enableCanvasRendering&&"polaraxes"==this.model.AreaType?(this.svgRenderer.ctx.save(),this.svgRenderer.ctx.beginPath(),this.svgRenderer.ctx.arc(this.model.centerX,this.model.centerY,this.model.Radius,0,2*Math.PI,!1),this.svgRenderer.ctx.clip(),this.canvasX=this.canvasY=0,_.draw(this,e,i),this.svgRenderer.ctx.restore()):(this.canvasX=this.canvasY=0,"cartesianaxes"==this.model.AreaType?_.draw(this,e,t):"polaraxes"==this.model.AreaType&&e._xAxisName==this.model._axes[0].name&&e._yAxisName==this.model._axes[1].name&&_.draw(this,e,i));var v=this.model.series[r].errorBar,b=this.model.AreaType;"visible"==v.visibility&&"cartesianaxes"==b&&"boxandwhisker"!=this.model.series[r].type&&this.renderErrorBar(v,e),"splinerangearea"==d&&(_.gSeriesGroupEle=this.gSeriesGroupEle);var x=_.gSeriesGroupEle;if(x&&ej.EjSvgRender.utils._drawAxesBoundsClipPath(x,e,this),"candle"!=d&&"hilo"!=d&&"hiloopenclose"!=d&&"boxandwhisker"!=d){var y,w=this,C=w.model.AreaType.toLowerCase(),S=ej.seriesTypes[d].prototype.isRegion;s=!e._pointMarker||(e.marker.visible||e._pointMarker),"scatter"!=d&&s&&$.each(e._visiblePoints,function(t,i){if(!1!==i.visible&&""!==i.x&&(i.marker&&i.marker.visible||e.marker.visible)){if(y="polaraxes"==C&&"column"==h||S?i.symbolLocation:"polaraxes"!=C?ej.EjSvgRender.utils._getPoint(i,e):ej.EjSvgRender.utils.TransformToVisible(e,i.xValue,i.y,w),"polaraxes"==C){var s=e.yAxis.labelFormat?e.yAxis.labelFormat:"",n=i.text?i.text:i.y+s.substring(s.indexOf("}")+1);ej.EjSvgRender.utils._measureText(n,null,e.marker.dataLabel.font)}("polaraxes"!=C||e._xAxisName!=w.model._axes[0].name||e._yAxisName!=w.model._axes[1].name||"polar"!=d.toLowerCase()&&"radar"!=d.toLowerCase()||"scatter"==a)&&"cartesianaxes"!=C||_.drawSymbol(r,e,t,y.X,y.Y)}}),"scatter"!=d?(e.marker.visible&&"scatter"!=a&&(x=this.gSymbolGroupEle[r],ej.EjSvgRender.utils._drawAxesBoundsClipPath(x,e,this)),e.marker.dataLabel.visible&&(x=this.gSeriesTextEle[r],ej.EjSvgRender.utils._drawAxesBoundsClipPath(x,e,this),x=this.gDataLabelEle[r],ej.EjSvgRender.utils._drawAxesBoundsClipPath(x,e,this)),!ej.util.isNullOrUndefined(this.gConnectorEle)&&this.gConnectorEle.length>0&&(x=this.gConnectorEle[r],ej.EjSvgRender.utils._drawAxesBoundsClipPath(x,e,this))):(x=this.gSymbolGroupEle[r],ej.EjSvgRender.utils._drawAxesBoundsClipPath(x,e,this),this.svgRenderer.append(x,this.gSeriesEle),(e.tooltip.visible||"scatter"==d)&&(this.vmlRendering?(this.cloneSeriesEle=$(this.gSeriesEle).clone(),this.cloneobj=$(this.element).clone(),this.svgclone=$(this.svgObject).clone(),$(document.body).append(this.cloneobj),this.svgRenderer.append(this.cloneSeriesEle,this.svgclone),this.svgRenderer.append(this.svgclone,this.cloneobj)):(this.svgRenderer.append(this.gSeriesEle,this.svgObject),this.svgRenderer.append(this.svgObject,this.element)),this.vmlRendering&&($(this.cloneobj).remove(),$(this.svgclone).remove())))}s=!e._dataLabels||(e.marker.dataLabel.visible||e._dataLabels>0),(e.marker.dataLabel.visible||s)&&this.drawDisplayText(_,e,t)},renderErrorBar:function(e,t){var i,s,a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,j,L,A,E,P,M,F,N,z,V,B,H,Y,U,W,X,G,q,Q,K,Z,J,ee,te,ie,se,ae,re,ne,oe,le,de,he,ce,ue,pe,me,ge,fe,_e=this,ve=_e.model,be=t,xe=be._visiblePoints,ye=xe.length,we=_e.canvasX,Ce=_e.canvasY,Se=$.inArray(be,ve._visibleSeries),Te=null,Re=ej.EjSvgRender.utils._getTransform(be.xAxis,be.yAxis,ve.requireInvertedAxes),ke=ve.requireInvertedAxes,Oe=_e.svgObject.id,De=_e.model.m_AreaBounds,Te="translate("+Re.x+","+Re.y+")";for(_={id:Oe+"_ErrorBarGroup_"+Se,transform:Te,"clip-path":"url(#"+Oe+"_ChartAreaClipRect)"},ej.util.isNullOrUndefined(_e.gErrorBarGroupEle)&&(_e.gErrorBarGroupEle=[]),f=_e.gErrorBarGroupEle[Se]=_e.svgRenderer.createGroup(_),ge=$.extend({},ej.EjSvgRender.commonChartEventArgs),ge.data={errorBar:e},this._trigger("errorBarRendering",ge),v=ge.data.errorBar,i=v.type,s=v.mode,a=v.direction,r=v.fill,n=v.cap,o=v.cap.fill,l=v.cap.width,v.cap.length,h=v.verticalErrorValue,c=v.horizontalErrorValue,u=v.verticalPositiveErrorValue,p=v.verticalNegativeErrorValue,m=v.horizontalPositiveErrorValue,g=v.horizontalNegativeErrorValue,d=0;d<ye;d++)if(!0!==xe[d].isEmpty&&1==xe[d].visible){switch(b={id:_e.svgObject.id+"_ErrorBarGroup_"+Se+"_Point"+d},fe=_e.svgRenderer.createGroup(b),x=d,y=xe[d],w=y.YValues[0],C=y.xValue,S=xe[d].YValues[0],T=xe[d].xValue,R=i.indexOf("column")||i.indexOf("bar")>-1?y.symbolLocation:y.location,ej.util.isNullOrUndefined(R)&&(R=ej.EjSvgRender.utils._getPoint(y,be)),M=R.X,F=R.Y,i){case"fixedValue":oe=y,"vertical"!=s&&"both"!=s||(oe.YValues[0]=w+h,k=ej.EjSvgRender.utils._getPoint(oe,be),oe.YValues[0]=w-h,O=ej.EjSvgRender.utils._getPoint(oe,be),ke?k.Y=O.Y=R.Y:k.X=O.X=R.X),"horizontal"!=s&&"both"!=s||(oe.YValues[0]=w,oe.xValue=C,oe.xValue=C+c,D=ej.EjSvgRender.utils._getPoint(oe,be),oe.xValue=C-c,I=ej.EjSvgRender.utils._getPoint(oe,be)),oe.YValues[0]=w,oe.xValue=C;break;case"percentage":le=y,de=h/100*w,he=c/100*C,"vertical"!=s&&"both"!=s||(le.YValues[0]=w+de,k=ej.EjSvgRender.utils._getPoint(le,be),le.YValues[0]=w-de,O=ej.EjSvgRender.utils._getPoint(le,be),ke?k.Y=O.Y=R.Y:k.X=O.X=R.X),"horizontal"!=s&&"both"!=s||(le.YValues[0]=w,le.xValue=C,le.xValue=C+he,D=ej.EjSvgRender.utils._getPoint(le,be),le.xValue=C-he,I=ej.EjSvgRender.utils._getPoint(le,be)),le.YValues[0]=w,le.xValue=C;break;case"standardDeviation":ce=y,j=_e.meanCalculation(s,xe),L=j.verMean,A=j.horMean,E=j.verStandSquareRoot,P=j.horStandSquareRoot,"vertical"!=s&&"both"!=s||(N=h*E,ce.YValues[0]=L,V=ej.EjSvgRender.utils._getPoint(ce,be),w=ce.YValues[0],ce.YValues[0]=w+N,k=ej.EjSvgRender.utils._getPoint(ce,be),ce.YValues[0]=w-N,O=ej.EjSvgRender.utils._getPoint(ce,be),ke?V.Y=k.Y=O.Y=R.Y:V.X=k.X=O.X=R.X,V.X=V.X+we,V.Y=V.Y+Ce),"horizontal"!=s&&"both"!=s||(z=c*P,ce.xValue=A,B=ej.EjSvgRender.utils._getPoint(ce,be),ke?B.X=R.X:B.Y=R.Y,ce.YValues[0]=S,C=ce.xValue,ce.xValue=C+z,D=ej.EjSvgRender.utils._getPoint(ce,be),ce.xValue=C-z,I=ej.EjSvgRender.utils._getPoint(ce,be),B.X=B.X+we,B.Y=B.Y+Ce),ce.YValues[0]=S,ce.xValue=T;break;case"standardError":ue=y,j=_e.meanCalculation(s,xe),E=j.verStandSquareRoot,P=j.horStandSquareRoot,"vertical"!=s&&"both"!=s||(N=h*E,H=N/Math.sqrt(ye),ue.YValues[0]=w+H,k=ej.EjSvgRender.utils._getPoint(ue,be),ue.YValues[0]=w-H,O=ej.EjSvgRender.utils._getPoint(ue,be),ke?k.Y=O.Y=R.Y:k.X=O.X=R.X),"horizontal"!=s&&"both"!=s||(z=c*P,Y=z/Math.sqrt(ye),ue.YValues[0]=w,ue.xValue=C,ue.xValue=C+Y,D=ej.EjSvgRender.utils._getPoint(ue,be),ue.xValue=C-Y,I=ej.EjSvgRender.utils._getPoint(ue,be)),ue.YValues[0]=w,ue.xValue=C,d=x;break;case"custom":pe=y,"vertical"!=s&&"both"!=s||(pe.YValues[0]=w+u,k=ej.EjSvgRender.utils._getPoint(pe,be),pe.YValues[0]=w-p,O=ej.EjSvgRender.utils._getPoint(pe,be),ke?k.Y=O.Y=R.Y:k.X=O.X=R.X),"horizontal"!=s&&"both"!=s||(pe.YValues[0]=w,pe.xValue=C,pe.xValue=C+m,D=ej.EjSvgRender.utils._getPoint(pe,be),pe.xValue=C-g,I=ej.EjSvgRender.utils._getPoint(pe,be)),pe.YValues[0]=w,pe.xValue=C}if(1==n.visible&&("vertical"!=s&&"both"!=s||(U={verHighvalue:k,verLowvalue:O}),"horizontal"!=s&&"both"!=s||(W={horHighvalue:D,horLowvalue:I}),me=_e.renderCap(n,s,U,W,ke),X=me.verHighCapX1,G=me.verHighCapX2,q=me.verLowCapX1,Q=me.verLowCapX2,K=me.horHighCapY1,Z=me.horHighCapY2,J=me.horLowCapY1,ee=me.horLowCapY2),M+=we,F+=Ce,"vertical"!=s&&"both"!=s||(k.X=k.X+we,k.Y=k.Y+Ce,O.X=O.X+we,O.Y=O.Y+Ce),"horizontal"!=s&&"both"!=s||(D.X=D.X+we,D.Y=D.Y+Ce,I.X=I.X+we,I.Y=I.Y+Ce),"both"==a)"vertical"!=s&&"both"!=s||("standardDeviation"!=i?te="M "+M+" "+F+" L "+k.X+" "+k.Y+" M "+M+" "+F+" L "+O.X+" "+O.Y+" ":"standardDeviation"==i&&(te="M "+V.X+" "+V.Y+" L "+k.X+" "+k.Y+" M "+V.X+" "+V.Y+" L "+O.X+" "+O.Y+" "),ie=ke?n.visible?"M "+k.X+" "+k.Y+" L "+k.X+" "+X+" M "+k.X+" "+k.Y+" L "+k.X+" "+G+" M "+O.X+" "+O.Y+" L "+O.X+" "+q+" M "+O.X+" "+O.Y+" L "+O.X+" "+Q+" ":"":n.visible?"M "+k.X+" "+k.Y+" L "+X+" "+k.Y+" M "+k.X+" "+k.Y+" L "+G+" "+k.Y+" M "+O.X+" "+O.Y+" L "+q+" "+O.Y+" M "+O.X+" "+O.Y+" L "+Q+" "+O.Y+" ":"",re=te,ne=ie),"horizontal"!=s&&"both"!=s||("standardDeviation"!=i?se="M "+M+" "+F+" L "+D.X+" "+D.Y+" M "+M+" "+F+" L "+I.X+" "+I.Y+" ":"standardDeviation"==i&&(se="M "+B.X+" "+B.Y+" L "+D.X+" "+D.Y+" M "+B.X+" "+B.Y+" L "+I.X+" "+I.Y+" "),ae=ke?n.visible?"M "+D.X+" "+D.Y+" L "+K+" "+D.Y+" M "+D.X+" "+D.Y+" L "+Z+" "+D.Y+" M "+I.X+" "+I.Y+" L "+J+" "+I.Y+" M "+I.X+" "+I.Y+" L "+ee+" "+I.Y+" ":"":n.visible?"M "+D.X+" "+D.Y+" L "+D.X+" "+K+" M "+D.X+" "+D.Y+" L "+D.X+" "+Z+" M "+I.X+" "+I.Y+" L "+I.X+" "+J+" M "+I.X+" "+I.Y+" L "+I.X+" "+ee+" ":"",re=se,ne=ae),"both"==s&&(se+=te,ae+=ie,re=se,ne=ae);else if("plus"==a){if("vertical"==s||"both"==s){"standardDeviation"!=i?te="M "+M+" "+F+" L "+k.X+" "+k.Y+" ":"standardDeviation"==i&&(te="M "+V.X+" "+V.Y+" L "+k.X+" "+k.Y+" "),ie=ke?n.visible?"M "+k.X+" "+k.Y+" L "+k.X+" "+X+" M "+k.X+" "+k.Y+" L "+k.X+" "+G+" ":"":n.visible?"M "+k.X+" "+k.Y+" L "+X+" "+k.Y+" M "+k.X+" "+k.Y+" L "+G+" "+k.Y+" ":"";var re=te,ne=ie}"horizontal"!=s&&"both"!=s||("standardDeviation"!=i?se="M "+M+" "+F+" L "+D.X+" "+D.Y+" ":"standardDeviation"==i&&(se="M "+B.X+" "+B.Y+" L "+D.X+" "+D.Y+" "),ae=ke?n.visible?"M "+D.X+" "+D.Y+" L "+K+" "+D.Y+" M "+D.X+" "+D.Y+" L "+Z+" "+D.Y+" ":"":n.visible?"M "+D.X+" "+D.Y+" L "+D.X+" "+K+" M "+D.X+" "+D.Y+" L "+D.X+" "+Z+" ":"",re=se,ne=ae),"both"==s&&(se+=te,ae+=ie,re=se,ne=ae)}else{if("vertical"==s||"both"==s){"standardDeviation"!=i?te="M "+M+" "+F+" L "+O.X+" "+O.Y+" ":"standardDeviation"==i&&(te="M "+V.X+" "+V.Y+" L "+O.X+" "+O.Y+" "),ie=ke?n.visible?"M "+O.X+" "+O.Y+" L "+O.X+" "+q+" M "+O.X+" "+O.Y+" L "+O.X+" "+Q+" ":"":n.visible?"M "+O.X+" "+O.Y+" L "+q+" "+O.Y+" M "+O.X+" "+O.Y+" L "+Q+" "+O.Y+" ":"";var re=te,ne=ie}"horizontal"!=s&&"both"!=s||("standardDeviation"!=i?se="M "+M+" "+F+" L "+I.X+" "+I.Y+" ":"standardDeviation"==i&&(se="M "+B.X+" "+B.Y+" L "+I.X+" "+I.Y+" "),ae=ke?n.visible?"M "+I.X+" "+I.Y+" L "+J+" "+I.Y+" M "+I.X+" "+I.Y+" L "+ee+" "+I.Y+" ":"":n.visible?"M "+I.X+" "+I.Y+" L "+I.X+" "+J+" M "+I.X+" "+I.Y+" L "+I.X+" "+ee+" ":"",re=se,ne=ae),"both"==s&&(se+=te,ae+=ie,re=se,ne=ae)}var Ie={id:_e.svgObject.id+"_ErrorBar_"+Se+"_Point"+x,d:re,stroke:r,"stroke-width":e.width,opacity:e.opacity},je={id:_e.svgObject.id+"_ErrorBarCap_"+Se+"_Point"+x,d:ne,stroke:o,"stroke-width":l};_e.model.enableCanvasRendering?(this.svgRenderer.ctx.rect(De.X,De.Y,De.Width,De.Height),this.svgRenderer.ctx.clip(),_e.svgRenderer.drawPath(Ie,null),_e.svgRenderer.drawPath(je,null)):(_e.svgRenderer.drawPath(Ie,fe),_e.svgRenderer.drawPath(je,fe),_e.svgRenderer.append(fe,f))}_e.svgRenderer.append(f,_e.gSeriesEle),ej.EjSvgRender.utils._drawAxesBoundsClipPath(f,be,_e)},meanCalculation:function(e,t){var i,s,a,r,n,o,l,d,h,c,u,p,m,g,f,f,_,v,b,x,y,w=0,C=0,S=t.length;for(l=0;l<S;l++)"vertical"==e?(i=w+t[l].y,w=i):"horizontal"==e?(i=C+t[l].xValue,C=i):(s=w+t[l].y,w=s,a=C+t[l].xValue,C=a);for(r=w/S,n=C/S,o=S-1,l=0;l<S;l++)"vertical"==e?(d=t[l].y-r,h=Math.pow(d,2),c=w+h,w=c):"horizontal"==e?(d=t[l].xValue-n,h=Math.pow(d,2),c=C+h,C=c):(u=t[l].y-r,m=Math.pow(u,2),g=w+m,w=g,p=t[l].xValue-n,x=Math.pow(p,2),f=C+x,C=f);return _=w/o,b=Math.sqrt(_),v=C/o,y=Math.sqrt(v),{verStandSquareRoot:b,horStandSquareRoot:y,verMean:r,horMean:n}},renderCap:function(e,t,i,s,a){var r,n,o,l,d,h,c,u,p,m,g,f,_,v,b;return r=this.canvasX,n=this.canvasY,o=e.length/2,"vertical"!=t&&"both"!=t||(l=i.verHighvalue,d=i.verLowvalue),"horizontal"!=t&&"both"!=t||(h=s.horHighvalue,c=s.horLowvalue),"vertical"!=t&&"both"!=t||(a?(u=l.Y+n+o,p=l.Y+n-o,m=d.Y+n+o,g=d.Y+n-o):(u=l.X+r-o,p=l.X+r+o,m=d.X+r-o,g=d.X+r+o)),"horizontal"!=t&&"both"!=t||(a?(f=h.X+r+o,_=h.X+r-o,v=c.X+r+o,b=c.X+r-o):(f=h.Y+n-o,_=h.Y+n+o,v=c.Y+n-o,b=c.Y+n+o)),{verHighCapX1:u,verHighCapX2:p,verLowCapX1:m,verLowCapX2:g,horHighCapY1:f,horHighCapY2:_,horLowCapY1:v,horLowCapY2:b}},drawDisplayText:function(e,t,i){var s,a,r=this,n=t.type.toLowerCase(),o=r.model.AreaType.toLowerCase(),l=ej.seriesTypes[n].prototype.isRegion,d=t.drawType.toLowerCase(),h=!1,c=$.inArray(t,r.model._visibleSeries);ej.util.isNullOrUndefined(r.model.regionCount)&&(r.model.regionCount=-1);var u,p,m=r.model.enableCanvasRendering,g="polaraxes"==r.model.AreaType.toLowerCase(),f=0,_={};for(u=r.model.series.length;f<u;f++)_[p=r.model.series[f].stackingGroup]={length:_[p]?_[p].length+1:1,seriesIndex:f};i.stackingGroup=_,$.each(t._visiblePoints,function(n,u){var p=r.model.series[c].type.toLowerCase();if(t._visiblePoints[n].textOptionsBoxValues=[],a=u.marker,s="polaraxes"==o&&"column"==d||l||"rangecolumn"==d?"boxandwhisker"==p.toLowerCase()?u.dataLabelLocation:u.symbolLocation:"polaraxes"!=o?ej.EjSvgRender.utils._getPoint(u,t):ej.EjSvgRender.utils.TransformToVisible(t,u.xValue,u.y,r),!1!==u.visible&&(a&&a.dataLabel&&a.dataLabel.visible||(!a||!a.dataLabel)&&t.marker.dataLabel.visible)){l&&r.model.regionCount++;var p=r.model.series[c].type.toLowerCase();for(_=0;_<r.model._axes.length;_++)if(r.model._axes[_].zoomFactor<1||r.model._axes[_].zoomPosition>0){h=!0;break}if(!(r.zoomed||t.xAxis._isScroll||h)||"column"!=p&&"stackingcolumn"!=p&&"stackingcolumn100"!=p)if(m&&"cartesianaxes"==r.model.AreaType){if(r.svgRenderer.ctx.save(),r.svgRenderer.ctx.beginPath(),r.model.requireInvertedAxes?r.svgRenderer.ctx.rect(t.yAxis.x,t.xAxis.y,t.yAxis.width,t.xAxis.height):r.svgRenderer.ctx.rect(t.xAxis.x,t.yAxis.y,t.xAxis.width,t.yAxis.height),r.svgRenderer.ctx.clip(),r.model.chartRegions[r.model.regionCount]||-1==p.indexOf("column")&&-1==p.indexOf("bar")&&-1==p.indexOf("waterfall")){if("boxandwhisker"==p.toLowerCase())for(var f=0;f<s.length;f++)u.y=u.boxPlotLocation[f].YValues,e.drawDataLabel(t,n,u,s[f].X,s[f].Y,r.model.regionCount,i,s[f].outlier);else e.drawDataLabel(t,n,u,s.X,s.Y,r.model.regionCount,i);"rangecolumn"!=p&&"rangearea"!=p&&"splinerangearea"!=p||(u.y=u.low,e.drawDataLabel(t,n,u,s.X,s.Y,r.model.regionCount,i),u.y=u.high)}r.svgRenderer.ctx.restore()}else{if(m&&g&&(r.svgRenderer.ctx.save(),r.svgRenderer.ctx.beginPath(),r.svgRenderer.ctx.arc(r.model.centerX,r.model.centerY,r.model.Radius,0,2*Math.PI,!1),r.svgRenderer.ctx.clip(),s.X-=r.canvasX,s.Y-=r.canvasY),"column"==p||"stackingcolumn"==p||"stackingcolumn100"==p)r.model.chartRegions[r.model.regionCount]&&e.drawDataLabel(t,n,u,s.X,s.Y,r.model.regionCount,i);else if("boxandwhisker"==p.toLowerCase())for(var f=0;f<s.length;f++)u.y=u.boxPlotLocation[f].YValues,e.drawDataLabel(t,n,u,s[f].X,s[f].Y,r.model.regionCount,i,s[f].outlier);else e.drawDataLabel(t,n,u,s.X,s.Y,r.model.regionCount,i);"rangecolumn"!=p&&"rangearea"!=p&&"splinerangearea"!=p||(u.y=u.low,e.drawDataLabel(t,n,u,s.X,s.Y,r.model.regionCount,i),u.y=u.high),m&&g&&r.svgRenderer.ctx.restore()}else for(var _=0;_<r.model.chartRegions.length;_++)c==r.model.chartRegions[_].SeriesIndex&&n==r.model.chartRegions[_].Region.PointIndex&&(m&&"cartesianaxes"==r.model.AreaType?(r.svgRenderer.ctx.save(),r.svgRenderer.ctx.beginPath(),r.model.requireInvertedAxes?r.svgRenderer.ctx.rect(t.yAxis.x,t.xAxis.y,t.yAxis.width,t.xAxis.height):r.svgRenderer.ctx.rect(t.xAxis.x,t.yAxis.y,t.xAxis.width,t.yAxis.height),r.svgRenderer.ctx.clip(),e.drawDataLabel(t,n,u,s.X,s.Y,_,i),r.svgRenderer.ctx.restore()):e.drawDataLabel(t,n,u,s.X,s.Y,_,i))}})},cartesianSmartLabels:function(e,t,i){var s=t.length;this.connectorFlag=!1,this.processCount=1,this.posObj={top:[],rightTop:[],left:[],leftTop:[],right:[],rightTop:[],rightBottom:[],leftBottom:[],bottom:[]};var a,r,n,o,l,d,h,c,u,p,m,g,f,_;for(o=0;o<this.model.series.length;o++)if(a=this.model.series[o].marker.size.width,r=this.model.series[o].marker.size.height,_=this.model.series[o].type.toLowerCase(),f=ej.seriesTypes[_].prototype.isRegion,"hidden"!=this.model.series[o].visibility&&this.model.series[o].marker.visible&&!f)for(l=0;l<this.model.series[o]._visiblePoints.length;l++)d=this.model.series[o]._visiblePoints[l],h=d.location,this.model.markerRegion[this.model.markerRegion.length]={seriesIndex:o,xPos:h.X+this.canvasX,yPos:h.Y+this.canvasY,width:a,height:r};var d,v,b,x,y,w,C,S=this.model.m_AreaBounds;for(v=0;v<s;v++)d=t[v],d.hide=!1,w=d.xPos,C=d.yPos,x=d.width,y=d.height,w-x/2<0&&w>-x/2&&(b=w-x/2,d.textOptions.x=d.xPos=w+Math.abs(b)+10,d.newConnectorFlag=!0),w+x/2>S.Width&&w+x/2<=S.Width+x/2&&(b=w-x/2,d.textOptions.x=d.xPos=S.Width-x/2-10,d.newConnectorFlag=!0),C+x/2>S.Height&&C+y/2<=S.Height+y/2&&(b=C+y/2-S.Height,d.yPos=C-b-10,d.textOptions.y=d.yPos+5,d.newConnectorFlag=!0),C-y/2<0&&C>-y/2&&(b=C-y/2,d.yPos=d.yPos+Math.abs(b)+10,d.textOptions.y=d.yPos+5,d.newConnectorFlag=!0);for(n=0;n<s;n++)ej.util.isNullOrUndefined(t[n].yPos)||(this.model.allPoints[this.model.allPoints.length]=t[n],this.connectorFlag=!1,this.compareDataLabels(n,t,0,this.processCount),d=t[n],d.connectorFlag=this.connectorFlag,t[n].dataLabeltemplate&&(p=$("#"+t[n].id),m=t[n].xPos,g=this.model.enableCanvasRendering?t[n].yPos+this.model.m_AreaBounds.Y:t[n].yPos,p.css("left",m).css("top",g),"cartesianaxes"==this.model.AreaType&&(S=this.model.m_AreaBounds,c=S.X+(this.model.requireInvertedAxes?e.yAxis.plotOffset:e.xAxis.plotOffset),u=e.yAxis.y,x=t[n].width,y=t[n].height,(m>c+S.Width||m+x<c||g+y<u||g+y>S.Y+S.Height||this.zoomed&&(m<c||g<u||m>c+S.Width||g>u+S.Height))&&p.remove())),this.storeDataLabelPositions(d))},storeDataLabelPositions:function(e){var t=e.position,i=this.posObj;switch(t){case"top":i.top[this.processCount-1]=e,this.processCount=1;break;case"rightTop":i.rightTop[this.processCount-1]=e,this.processCount=1;break;case"right":i.right[this.processCount-1]=e,this.processCount=1;break;case"rightBottom":i.rightBottom[this.processCount-1]=e,this.processCount=1;break;case"bottom":i.bottom[this.processCount-1]=e,this.processCount=1;break;case"left":i.left[this.processCount-1]=e,this.processCount=1;break;case"leftBottom":i.leftBottom[this.processCount-1]=e,this.processCount=1;break;case"leftTop":i.leftTop[this.processCount-1]=e}},cartesianColumnSmartLabels:function(e,t,i){var s,a,r,n,o,l,d,h=t.length;this.connectorFlag=!1,this.processCount=1;var c,u;for(this.model.outsideLabels=[],c=0;c<h;c++)if(!ej.util.isNullOrUndefined(t[c].yPos)&&!isNaN(t[c].yPos)&&(this.model.allPoints[this.model.allPoints.length]=t[c],e._enableSmartLabels&&(this.connectorFlag=!1,this.compareColumnDataLabels(e,c,t,0,this.processCount)),e._visiblePoints[c],t[c].dataLabeltemplate)){u=$("#"+t[c].id),u.css("left",t[c].xPos).css("top",t[c].yPos),s=t[c].xPos,a=t[c].yPos,t.height=u.outerHeight();var p=this.model.m_AreaBounds.X,m=this.model.m_AreaBounds.Y,g=this.model.m_AreaBounds.Width,f=this.model.m_AreaBounds.Height;t.width=u.outerWidth(),n=u.width()/2,o=u.height();var _,v,b;_=v=b=0;var x=0,y=this.model.m_AreaBounds
;if(l=y.X+(this.model.requireInvertedAxes?e.yAxis.plotOffset:e.xAxis.plotOffset),d=e.yAxis.y,r=s-n,e.marker.dataLabel.showEdgeLabels&&(s>l+y.Width||a+o>y.Y+y.Height||s<l||a<d||s>l+y.Width||a>d+y.Height||r>y.Width+y.X)){if(n=u.outerWidth(),s<p&&(v=p-s),f+m<a+o){var w=a+o-(f+m);x=o-w}if(a<m&&(_=m-a),g+p<s+n){var C=s+n-(g+p);b=n-C}b=0==b?n:b,x=0==x?o:x,document.getElementById(u[0].id).style.clip="rect("+_+"px,"+b+"px,"+x+"px,"+v+"px)"}}},compareColumnDataLabels:function(e,t,i,s,a){var r,n,o,l,d,h,c,u,p,m,g=this.model.allPoints.length-1,f=this.model.m_AreaBounds,_=e.marker.dataLabel.enableContrastColor,v=[],b=e.type.toLowerCase(),x=new(ej.seriesTypes[e.type.toLowerCase()]);this.firstPoints=[];for(var y=0;y<g;y++)if(u=this.model.allPoints[y],p=this.model.allPoints[this.model.allPoints.length-1],this.currentCollideLabel=u,m=5,o=e.marker.dataLabel,l=o.textPosition.toLowerCase(),rotation=o.angle,chartObj=this,n=this.isCollide(u,p,null,null,chartObj,rotation),n.state){if("column"==b||"stackingcolumn"==b||"rangecolumn"==b||"waterfall"==b){if(o.showEdgeLabels?p.textOptions.y=p.yPos=p.yPos+n.height+m:p.textOptions.y=p.yPos="top"==l||"middle"==l?p.yPos+n.height+m:p.yPos-n.height-m,p.textOptions.y=p.textOptions.y+m+p.margin.top/2-p.margin.bottom/2,p.textOptions.y>f.Height){p.hide=!0;break}}else p.textOptions.x=p.xPos="top"==l||"middle"==l?u.xPos-u.width/2-p.width/2-m:u.xPos+u.width/2+p.width/2+m;for(this.compareColumnDataLabels(e,t,i,s,this.processCount),r=this.checkOutsideLabels(this.model,p,f),h=0;h<this.model.allPoints.length;h++)0==h?this.firstPoints.push(this.model.allPoints[0]):this.firstPoints[this.firstPoints.length-1].x!=this.model.allPoints[h].x&&this.firstPoints.push(this.model.allPoints[h]);if(r||this.zoomed){for(c=0;c<=this.model.allPoints.length-1;c++)this._positionOutsideLabels(p,this.model.allPoints,c,b);this.model.outsideLabels.push(p)}if(_&&b.indexOf("stacking")>-1){var w=this.model.chartRegions;for(h=0;h<this.model.chartRegions.length;h++)w[h].Region.PointIndex==t&&(n=this.isCollide(w[h],p,0,_,this)),n.state&&v.push(w[h]);if(v.length>5)break;v.length>=1&&(d="array"==jQuery.type(this.model.seriesColors[v[0].SeriesIndex])?this.model.seriesColors[v[0].SeriesIndex][0].color:this.model.seriesColors[v[0].SeriesIndex],p.textOptions.fill=x._applySaturation(this,d))}}},_positionOutsideLabels:function(e,t,i,s){var a=t[i];if(0==i){var r=this.isCollide(a,e);if(!s||"column"!=s&&"stackingcolumn"!=s&&"rangecolumn"!=s&&"waterfall"!=s)e.textOptions.x=e.xPos=this.model.outsideLabels.length>0?this.model.outsideLabels[this.model.outsideLabels.length-1].xPos:t[0].xPos+a.width/2+e.width/2+5;else{if(this.model.outsideLabels.length>0&&e.x==this.model.outsideLabels[this.model.outsideLabels.length-1].x)e.textOptions.y=e.yPos=this.model.outsideLabels[this.model.outsideLabels.length-1].yPos-r.height;else for(i=0;i<this.firstPoints.length;i++)e.x==this.firstPoints[i].x&&r.state?e.textOptions.y=e.yPos=this.firstPoints[i].yPos-r.height:t.length>1&&i<t.length-1&&(e.textOptions.y=e.yPos=t[i+1].yPos);e.textOptions.y=e.textOptions.y+5+e.margin.top/2-e.margin.bottom/2}}var r=this.isCollide(a,e);r.state&&("column"==s||"stackingcolumn"==s||"rangecolumn"==s||"waterfall"==s?(e.textOptions.y=e.yPos=e.yPos-r.height-5,e.textOptions.y=e.textOptions.y+5+e.margin.top/2-e.margin.bottom/2):e.textOptions.x=e.xPos=e.xPos+a.width/2+e.width/2+5)},compareDataLabels:function(e,t,i,s){var a,r,n,o,l,d,h=this.model.allPoints.length,c=this.model.m_AreaBounds,u=this.posObj;for(this.breakLoop=!1,a=0;a<h;a++)if(this.model.series[this.model.allPoints[a].seriesIndex].type.toLowerCase(),n=this.model.allPoints[a],o=this.model.allPoints[h-1],this.currentCollideLabel=n,r=10,l=this.isCollide(n,o,a),l.state||l.marker)switch(this.connectorFlag=!0,i){case 0:if(this.processCount>1&&this.resetValues(o),l.marker?(this.prevLabel=l.markerRegion,this.processCount=1):ej.util.isNullOrUndefined(this.prevLabel)?(this.prevLabel=n,this.processCount=1):(d=this.isCollide(this.prevLabel,o),d.state||(this.prevLabel=n,this.processCount=1)),this.resetValues(o),s>1&&u.right[this.processCount-2]?(n=u.right[this.processCount-2],o.textOptions.x=o.xPos=n.xPos+(n.width/2+o.width/2+r)):o.textOptions.x=o.xPos=this.prevLabel.xPos+(this.prevLabel.width/2+o.width/2+r),i+=1,o.position="right",this.breakLoop)break;if(!this.checkOutsideLabels(this.model,o,c)){this.compareDataLabels(e,t,i,this.processCount);break}case 1:if(this.resetValues(o),o.textOptions.x=o.xPos=this.prevLabel.xPos+this.prevLabel.width/2+o.width/2+r,s>1&&u.rightBottom[this.processCount-2]?(n=u.rightBottom[this.processCount-2],o.textOptions.y=o.yPos=n.yPos+this.canvasY+n.height+r):o.textOptions.y=o.yPos=o.location.Y+this.canvasY+o.height+r/2,o.textOptions.y=o.textOptions.y+r/2+o.margin.top/2-o.margin.bottom/2,o.position="rightBottom",i+=1,this.breakLoop)break;if(!this.checkOutsideLabels(this.model,o,c)){this.compareDataLabels(e,t,i,this.processCount);break}case 2:if(this.resetValues(o),o.textOptions.y=o.yPos=o.location.Y+this.canvasY+o.height+r/2,s>1&&u.bottom[this.processCount-2]?(n=u.bottom[this.processCount-2],o.textOptions.y=o.yPos=n.yPos+o.height+r):o.textOptions.y=o.yPos=o.location.Y+this.canvasY+o.height+r/2,o.textOptions.y=o.textOptions.y+r/2+o.margin.top/2-o.margin.bottom/2,o.position="bottom",i+=1,this.breakLoop)break;if(!this.checkOutsideLabels(this.model,o,c)){this.compareDataLabels(e,t,i,this.processCount);break}case 3:if(this.resetValues(o),o.textOptions.x=o.xPos=this.prevLabel.xPos-this.prevLabel.width/2-o.width/2-r,s>1&&u.leftBottom[this.processCount-2]?(n=u.leftBottom[this.processCount-2],o.textOptions.y=o.yPos=n.yPos+this.canvasY+n.height+r):o.textOptions.y=o.yPos=o.location.Y+this.canvasY+o.height+r/2,o.textOptions.y=o.textOptions.y+r/2+o.margin.top/2-o.margin.bottom/2,o.position="leftBottom",i+=1,this.breakLoop)break;if(!this.checkOutsideLabels(this.model,o,c)){this.compareDataLabels(e,t,i,this.processCount);break}case 4:if(this.resetValues(o),s>1&&u.left[this.processCount-2]?(n=u.left[this.processCount-2],o.textOptions.x=o.xPos=n.xPos-n.width/2-o.width/2-r):o.textOptions.x=o.xPos=this.prevLabel.xPos-this.prevLabel.width/2-o.width/2-r,o.position="left",i+=1,this.breakLoop)break;if(!this.checkOutsideLabels(this.model,o,c)){this.compareDataLabels(e,t,i,this.processCount);break}case 5:if(this.resetValues(o),o.textOptions.x=o.xPos=this.prevLabel.xPos-this.prevLabel.width/2-o.width/2-r,s>1&&u.leftTop[this.processCount-2]?(n=u.leftTop[this.processCount-2],o.textOptions.y=o.yPos=n.yPos-(o.height+r)):o.textOptions.y=o.yPos=this.prevLabel.yPos-o.height-r,o.textOptions.y=o.textOptions.y+r/2+o.margin.top/2-o.margin.bottom/2,o.position="leftTop",i+=1,this.breakLoop)break;if(!this.checkOutsideLabels(this.model,o,c)){this.compareDataLabels(e,t,i,this.processCount);break}case 6:if(this.resetValues(o),s>1&&u.top[s-2]?(n=u.top[s-2],o.textOptions.y=o.yPos=n.yPos-(o.height+r)):o.textOptions.y=o.yPos=this.prevLabel.yPos-this.processCount*(o.height+r),o.textOptions.y=o.textOptions.y+r/2+o.margin.top/2-o.margin.bottom/2,i+=1,o.position="top",this.breakLoop)break;if(!this.checkOutsideLabels(this.model,o,c)){this.compareDataLabels(e,t,i,this.processCount);break}case 7:if(this.resetValues(o),o.textOptions.x=o.xPos=this.prevLabel.xPos+this.prevLabel.width/2+o.width/2+r,s>1&&u.rightTop[this.processCount-2]?(n=u.rightTop[this.processCount-2],o.textOptions.y=o.yPos=n.yPos-o.height-r):o.textOptions.y=o.yPos=this.prevLabel.yPos-o.height-r,o.textOptions.y=o.textOptions.y+r/2+o.margin.top/2-o.margin.bottom/2,o.position="rightTop",i+=1,this.breakLoop)break;if(!this.checkOutsideLabels(this.model,o,c)){this.compareDataLabels(e,t,i,this.processCount);break}case 8:if(i=0,this.processCount+=1,e==this.processCount)i=9;else if(!this.checkOutsideLabels(this.model,o,c)){this.compareDataLabels(e,t,i,this.processCount);break}case 9:(e==this.processCount||this.processCount>h)&&(this.processCount-=1,i=i<0||8==i?0:i-1,this.breakLoop=!0)}},checkOutsideLabels:function(e,t,i){var s,a,r,n,o=e.enableCanvasRendering,l=t.dataLabeltemplate;if(e.series[t.seriesIndex].marker.dataLabel.showEdgeLabels&&(r=o?t.xPos-this.canvasX:t.xPos,n=o?t.yPos-this.canvasY:t.yPos,s=l?i.Height+i.Y:i.Height,a=l?i.Width+i.X:i.width,r-t.width/2<0||r+t.width/2>a||n+t.height/2>s||n-t.height/2<0))return!0},drawPieofPieConnectors:function(e,t){var i=t.enableAnimation&&!t._animatedSeries?"hidden":"visible";this.model.enableCanvasRendering||(this.gConnectorLinesGroup?this.gConnectorLinesGroup.childNodes.length:this.gConnectorLinesGroup=this.svgRenderer.createGroup({id:this.svgObject.id+"_connectorLineGroup",visibility:i}),$(this.gConnectorLinesGroup.childNodes).remove());for(var s,a,r=[],n=[],o=[],l=[],d=-.5*Math.PI,h=0;h<2;h++){if(a=t.pieCollections[h],s=0==h?t.pieCoefficient:t.pieOfPieCoefficient,r[h]=.25*s*Math.min(e.width,e.height),n[h]=this.model.circleCenterX[h],n[h]=0==h?n[h]+this.model.pieGapWidth/2:n[h]-this.model.pieGapWidth/2,o[h]=this.model.circleCenterY[h],a[0].start>0&&a[0].end<Math.PI&&0==h)var c=a[0].start+d,u=a[0].end+d-1e-6,p=n[h]+r[h]*Math.cos(c),m=o[h]+r[h]*Math.sin(c),g=n[h]+r[h]*Math.cos(u),f=o[h]+r[h]*Math.sin(u);else p=n[h]+r[h]*Math.cos(d),m=o[h]+r[h]*Math.sin(d),g=p,f=m+2*r[h];l.push({X1:p,Y1:m,X2:g,Y2:f})}for(var _=t.connectorLine,v=0;v<2;v++){var b={id:this.svgObject.id+"_connectorLine"+v,x1:0==v?l[v].X1:l[v-1].X2,y1:0==v?l[v].Y1:l[v-1].Y2,x2:0==v?l[v+1].X1:l[v].X2,y2:0==v?l[v+1].Y1:l[v].Y2,stroke:_.color,"stroke-width":_.width,opacity:_.opacity,"stroke-dasharray":_.dashArray};this.svgRenderer.drawLine(b,this.gConnectorLinesGroup)}this.svgRenderer.append(this.gConnectorLinesGroup,this.gSeriesEle)},drawConnectorLines:function(e,t,i){var s=!0,a=i.xPos,r=i.yPos,n=this.model.m_AreaBounds,o=this.model.series[e].marker.dataLabel,l=i.location?i.location:i.symbolLocation;if(l.Y>i.textOptions.y)var d=i.textOptions.y;else!0,d=i.textOptions.y-i.height/2;if(i.dataLabeltemplate?(d=i.yPos-this.model.m_AreaBounds.Y+i.height,i.textOptions.x=i.textOptions.x-this.model.m_AreaBounds.X+i.width/4+this.canvasX):(a>n.Width||a+i.width<0||r-i.height>n.Height||r+i.height<0)&&!o.showEdgeLabels&&(s=!1),s){var h="M "+(l.X+this.canvasX)+" "+(l.Y+this.canvasY)+" L "+i.textOptions.x+" "+d,c=this.model.series[e].marker.dataLabel.connectorLine,u=ej.util.isNullOrUndefined(c.color)?this.model.series[e].fill:c.color,p={id:this.svgObject.id+"_dataLabelConnectorLine_series"+e+"_"+t,stroke:u,"stroke-width":c.width,d:h};this.model.series[e].connectorLines=!0,this.svgRenderer.drawPath(p,this.gConnectorEle[e])}},resetValues:function(e){e.textOptions.y=e.dataLabel.textY,e.yPos=e.dataLabel.y,e.textOptions.x=e.dataLabel.textX,e.xPos=e.dataLabel.x},isCollide:function(e,t,i,s,a,r){var n,o,l,d,h,c,u,p=0,m=0,g=!1,f=!1;if(s)n=e.Region.Bounds,o=a.model.m_AreaBounds,l={X:n.X-o.X,Y:n.Y-o.Y,Width:n.Width,Height:n.Height},"None"!=t.symbolName?(d=t.xPos,h=t.xPos+t.width,c=t.yPos-t.height/2,u=t.yPos+t.height/2):(d=t.textOptions.x-t.width/2,h=t.textOptions.x+t.width/2,c=t.textOptions.y-(90==t.textOptions.angle||-90==t.textOptions.angle?t.height/2:t.height),u=t.textOptions.y+(90==t.textOptions.angle||-90==t.textOptions.angle?t.height/2:0)),g=l.X<h&&l.X+l.Width>d&&l.Y<u&&l.Y+l.Height>c;else{var _=e.seriesIndex?this.model.series[e.seriesIndex].marker.dataLabel.border.width:0;_+=t.seriesIndex?this.model.series[t.seriesIndex].marker.dataLabel.border.width:0;var v=this.model.series,b=v[e.seriesIndex],x=v[t.seriesIndex],y=e.xPos,w=e.yPos,C=t.xPos,S=t.yPos;e.xPos+=b.xAxis.x,e.yPos+=b.yAxis.y,t.xPos+=x.xAxis.x,t.yPos+=x.yAxis.y;var T=e.height,R=e.width,k=t.height,O=t.width;if(r){var D=r>360?r-360:r<-360?r+360:r;90!=D&&-90!=D||(T=e.width,R=e.height,k=t.width,O=t.height)}if(e!=t&&(g=!(e.yPos+T<t.yPos||e.yPos>t.yPos+k||e.xPos+R/2+_<=t.xPos-O/2||e.xPos-R/2>=t.xPos+O/2),g&&(m=e.yPos+T-t.yPos,p=e.xPos+R-t.xPos),e.xPos=y,e.yPos=w),!g)for(var I=0;I<this.model.markerRegion.length&&(e=this.model.markerRegion[I],b=v[e.seriesIndex],y=e.xPos,w=e.yPos,e.xPos+=b.xAxis.x,t.yPos+=b.yAxis.y,!(f=!(e.yPos+T<t.yPos-k/2||e.yPos>t.yPos+k||e.xPos+R<t.xPos||e.xPos>t.xPos+O)));I++);e.xPos=y,e.yPos=w,t.xPos=C,t.yPos=S}return{state:g,marker:f,markerRegion:e,width:p,height:m}},drawAccDisplayText:function(e,t,i){var s=this,a=t._visiblePoints.length;s.firstStartAngle=[];var r=t.type.toLowerCase();if("pyramid"!=r&&"funnel"!=r&&"pieofpie"!=r&&(t.leftsidePoints.length>0||t.rightsidePoints.length>0)){for(var n=t.rightsidePoints.length,o=t.leftsidePoints.length,l=0;l<n;l++)t.rightsidePoints[l].index=l,e.drawDataLabelAcc(s,t,t.rightsidePoints[l].pointIndex,t.rightsidePoints[l],i);for(var d=o-1;d>=0;d--)t.leftsidePoints[d].index=d,e.drawDataLabelAcc(s,t,t.leftsidePoints[d].pointIndex,t.leftsidePoints[d],i)}else for(var l=0;l<a;l++){t._visiblePoints[l].index=l;var h="pieofpie"==r?t._visiblePoints[l].actualIndex:l;t._visiblePoints[l].start!=t._visiblePoints[l].startAngle&&(t._visiblePoints[l].startAngle=t._visiblePoints[l].start),isNaN(t._visiblePoints[l].startAngle)&&"pie"==t.type.toLowerCase()&&"pieofpie"==t.type.toLowerCase||e.drawDataLabelAcc(s,t,h,t._visiblePoints[l],i,t.collectionIndex)}"pyramid"!=t.type.toLowerCase()&&"funnel"!=t.type.toLowerCase()||(this.svgRenderer.append(this.gConnectorEle,this.gSeriesEle),this.svgRenderer.append(this.gSymbolGroupEle,this.gSeriesEle),this.svgRenderer.append(this.gDataLabelEle,this.gSeriesEle),this.svgRenderer.append(this.gSeriesTextEle,this.gSeriesEle),this.svgRenderer.append(this.gSeriesEle,this.svgObject),this.vmlRendering||this.svgRenderer.append(this.svgObject,this.element))},_processOData:function(e){var t=this,i=e.type.toLowerCase(),s=e.dataSource.executeQuery(e.query);s.done(function(s){t._processJsonData(s.result,e),e.visibility="visible",$(t.svgObject).empty(),$(t.legendSvgContainer).empty(),t.model.enableCanvasRendering&&(t.svgRenderer.ctx.clearRect(0,0,t.svgObject.width,t.svgObject.height),$("#canvas_trackSymbol").remove());for(var a=!0,r="pie"!=i||"doughnut"!=i?0:t.model.series.length-1,n=r;"pie"!=i||"doughnut"!=i?n<t.model.series.length:n>=0;"pie"!=i||"doughnut"!=i?n++:n--)if(t.model.series[n].dataSource&&"hidden"==t.model.series[n].visibility){a=!1;break}a&&t.draw()}),s.fail(function(i){e.visibility="visible",$(t.svgObject).empty(),$(t.legendSvgContainer).empty();for(var s=!0,a=0;a<t.model.series.length;a++)if(t.model.series[a].dataSource&&"hidden"==t.model.series[a].visibility){s=!1;break}s&&t.draw()})},_findDatatype:function(e,t){var i;if(null==e.xAxisName)i=null!=t.model.primaryXAxis.valueType&&"datetime"==t.model.primaryXAxis.valueType.toLowerCase();else for(var s=0;s<t.model._axes.length;s++){var a=t.model._axes[s];i=a.name==e.xAxisName&&null!=a.valueType&&"datetime"==a.valueType.toLowerCase()}return i},_processJsonData:function(e,t){var i,s,a=t.xName,r=t.yName,n=t.pointColorMappingName,o=t.marker&&t.marker.dataLabel&&t.marker.dataLabel.textMappingName,l=t.type.toLowerCase(),d=document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg")?e.length:void 0===e[e.length-1]?e.length-1:e.length,h=(r.length,"bubble"==l),c=!!e[0][a].indexOf||(t._hiloTypes?e[0][t.high]&&e[0][t.high].indexOf:!!(0==e[0][r]?0:e[0][r]||e[0][t.size]||0).indexOf),u=c&&e[0][a].indexOf&&-1!=e[0][a].indexOf("/Date("),p=0,m=this.model._hiddenPointIndex;if(t.points=new Array(d),c)"boxandwhisker"!=l&&this._processStringData(e,t,a,r,u,d);else for(;p<d;)i=e[p][a],t._hiloTypes||(s="string"==typeof e[p][r]?parseFloat(e[p][r]):e[p][r]),t.points[p++]={x:i,xValue:i,y:s,YValues:[s]};return"boxandwhisker"==l&&this._processBoxandWhiskerData(e,t,a,r,u),(h||n.length>0||o.length>0||m.length>0)&&this._processBubbleSize(e,t,c,n,o,m,h,d),t._hiloTypes&&this._processHiLoValues(e,t,c,l,d),0},_processBoxandWhiskerData:function(e,t,i,s,a){for(var r,n,o=0,l=e.length,d=e[0][i].indexOf&&-1!=e[0][i].indexOf("/Date(");o<l;)r=e[o][i],a&&(r=new Date(d?parseInt(r.substr(6)):r)),n=e[o][s],t.points[o++]={x:r,xValue:r,y:n,YValues:[n]}},_processStringData:function(e,t,i,s,a,r){for(var n,o,l=0,d=e[0][i].indexOf&&-1!=e[0][i].indexOf("/Date(");l<r;)n=e[l][i],a&&!(n instanceof Date)&&(n=new Date(d?parseInt(n.substr(6)):n)),o=parseFloat(e[l][s]),t.points[l++]={x:n,xValue:n,y:o,YValues:[o]}},_processBubbleSize:function(e,t,i,s,a,r,n,o){for(var l,d=0;d<o;d++)l=t.points[d],l.YValues[0]=i?parseFloat(e[d][t.yName]):e[d][t.yName],n&&(l.size=l.YValues[1]=i?parseFloat(e[d][t.size]):e[d][t.size]),s.length>0&&(l.fill=e[d][s]),a.length>0&&(l.text=e[d][a]),r.length>0&&d==r[d]&&(l.visibility="hidden")},_processHiLoValues:function(e,t,i,s,a){for(var r,n,o=0;o<a;o++)r=t.points[o],n=e[o],r.y=r.high=r.YValues[0]=i?this.tryParseFloat(n[t.high]):n[t.high],r.low=r.YValues[1]=i?this.tryParseFloat(n[t.low]):n[t.low],"hilo"!=s&&"rangecolumn"!=s&&"waterfall"!=s&&(r.open=r.YValues[2]=i?this.tryParseFloat(n[t.open]):n[t.open],r.close=r.YValues[3]=i?this.tryParseFloat(n[t.close]):n[t.close],t.volume&&(r.volume=r.YValues[4]=i?this.tryParseFloat(n[t.volume]):n[t.volume]))},tryParseFloat:function(e){return e&&e.length>0?parseFloat(e):e},bindTo:function(e){var t=this.model,i=t.series;$("#"+this.svgObject.id+"_CrosshairVertical").remove(),$("#"+this.svgObject.id+"_CrosshairHorizontal").remove(),$.finish?($(".ejTooltip"+this._id).finish(),$(".tooltipDiv"+this._id).finish()):($(".ejTooltip"+this._id).stop(!0,!0),$(".tooltipDiv"+this._id).stop(!0,!0)),$(document).find('[id*="_TrackToolTip"]').remove(),$("#template_group_"+this._id).remove(),this.isChartElemId&&this.createElementsId(),t.primaryXAxis._valueType=null,t.primaryXAxis.position=null,t.primaryYAxis._valueType=null,t.primaryYAxis.position=null,t.requireInvertedAxes=!1,t._hiddenPointIndex=[];for(var s,a=i.length,r=t.axes.length,n=0;n<r;n++)s=t.axes[n],s._valueType=null,s.position=null;if(t._axes){r=t._axes.length;for(var o=0;o<r;o++)s=t._axes[o],s._valueType=null,s.position=null,s.zoomFactor=s._pointsLength&&s._pointsLength!=s.scrollbarSettings.pointsLength?1:s.zoomFactor}for(var n=0;n<a;n++){var l=i[n],d=["y","high","low","open","close"];if(!ej.isNullOrUndefined(l.points))for(var o=0;o<l.points.length;o++)d.map(function(e,t){var i=l.points[o][e];ej.isNullOrUndefined(i)||(l.points[o][e]="string"==typeof i?parseFloat(i):i)});l.position=null,l.fill&&this.model.seriesColors&&l.fill!=this.model.seriesColors[n]&&(i[n].isFill=!0)}if(t.AreaType&&"none"==t.AreaType)for(var h,l=i[0],n=0;l.points&&n<l.points.length;n++)h=l.points[n],"hidden"==h._visibility&&"none"==t.AreaType&&1==i.length&&(this.model._hiddenPointIndex[n]=n),h.isFill=h.fill&&t.pointColors&&h.fill!=t.pointColors[n]||h.isFill,h.fill=h.isFill?h.fill:null;if(t.enable3D&&(ej.Ej3DRender.transform=null),i){if(this.setModelProperties(e),!e)for(var n=0;n<i.length;n++){var l=i[n];null!=l.visibility&&void 0!=l.visibility||(l.visibility="visible"),l.type&&(l._hiloTypes="polar"==l.type.toLowerCase()||"radar"==l.type.toLowerCase()?ej.seriesTypes[l.drawType.toLowerCase()].prototype.hiloTypes:ej.seriesTypes[l.type.toLowerCase()].prototype.hiloTypes),l.points||(l.points=[]),l.dataSource&&(l.dataSource instanceof ej.DataManager?(l.visibility="hidden",!ej.isNullOrUndefined(l.query)&&l.query instanceof ej.Query||(l.query=ej.Query()),this._processOData(l)):l.dataSource.length>0&&(("string"==typeof l.dataSource||l.dataSource.toLowerCase)&&(l.dataSource=JSON.parse(l.dataSource.replace(/'''/g,'"'))),this._processJsonData(l.dataSource,l)))}$(this.svgObject).width()>0&&this.draw(e)}},_createChartId:function(){var e=!1,t=0,i=$(this.element)[0].className.split(" ")[0];do{$("#"+i+"_"+t).length||($(this).attr("_id",i+"_"+t),$(this.element).attr("id",i+"_"+t),e=!0),t++}while(!e);this.isChartElemId=!0},createElementsId:function(){this.legendContainer.attr("id","legend_"+this._id),this.scrollerContainer.attr("id","legend_Scroller"+this._id),this.chartContainer.attr("id","chartContainer_"+this._id),this.axisScroll.attr("id","axisScrollbar_"+this._id),$(this.svgObject).attr("id",this._id+(this.model.enableCanvasRendering?"_canvas":"_svg"))},calculateHeight:function(e){var t=$(e.svgObject),i=e.model.size.height,s=$(e.element).height(),a=s/100*parseInt(i);return t.height(a),a},calculateWidth:function(e){var t=$(e.svgObject),i=e.model.size.width,s=$(e.element).width(),a=s/100*parseInt(i);return t.width(a),a},selectedStyle:function(e){for(var t=$("#"+e._id).find('[class*="Selection"]'),i=[],s=0;s<t.length;s++)i[s]=[],i[s].id=t[s].id,i[s].className=$("#"+i[s].id).attr("class");return $("[id $= Def ]").length>0&&(i.pattern=$("[id $= Def ]")),i},chartResize:function(){var e=this,t=$(e.svgObject),i=this.selectedStyle(e);if(this.removeMultiRect(),this._chartResize=!0,this.model.enableCanvasRendering){$("[id*="+this._id+"_Selection_]").remove(),$("#canvas_trackSymbol").remove();if(e.svgObject.getContext("2d").clearRect(0,0,this.svgRenderer.svgObj.width,this.svgRenderer.svgObj.height),"string"==typeof e.model.size.width&&-1!=e.model.size.width.indexOf("%")){var s=e.calculateWidth(e);this.svgRenderer.svgObj.width=s}else this.svgRenderer.svgObj.width=$("#"+this._id).width();if("string"==typeof e.model.size.height&&-1!=e.model.size.height.indexOf("%")){var a=e.calculateHeight(e);this.svgRenderer.svgObj.height=a}else this.svgRenderer.svgObj.height=ej.util.isNullOrUndefined(this.model.size.height)?"450":parseInt($(e.element).height())}this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout(function(){if(!ej.util.isNullOrUndefined(e.model)&&("string"==typeof e.model.size.width&&-1!=e.model.size.width.indexOf("%")?e.calculateWidth(e):t.width($(e.element).width()),"string"==typeof e.model.size.height&&-1!=e.model.size.height.indexOf("%")?e.calculateHeight(e):t.height(e.model.size.height),$(e.svgObject).width()>0)){$(e.svgObject).empty(),$(e.legendSvgContainer).empty(),$("#template_group_"+e._id).remove(),$("#annotation_group_"+e._id).remove(),e.disableAnimation();for(var s=0;s<e.model.series.length;s++)e.model.series[s].regionAdded=!1;e.draw();for(var a=0;a<i.length;a++)$("#"+i[a].id).attr("class",i[a].className);i.pattern&&e.svgRenderer.append(i.pattern,e.svgObject),e.zoomed&&!e.vmlRendering&&e._enableZoomingButtons(),e.enableAnimation()}},500)},isDevice:function(){return/mobile|tablet|android|kindle/i.test(navigator.userAgent.toLowerCase())},isWindows:function(){if(!(ej.getBooleanVal($("head"),"data-ej-android")||ej.getBooleanVal($("head"),"data-ej-ios")||ej.getBooleanVal($("head"),"data-ej-ios7")||ej.getBooleanVal($("head"),"data-ej-flat")))return this._windows()},_windows:function(){return/trident|windows phone/i.test(navigator.userAgent.toLowerCase())||!0===ej.getBooleanVal($("head"),"data-ej-windows",!1)},bindResizeEvents:function(){if(this.model._resizeEventRegistered)return 0;ej.isTouchDevice()&&this._isOrientationSupported()?this._on($(window),"orientationchange",this.chartResize):this._on($(window),"resize",this.chartResize),this.model._resizeEventRegistered=!0},removeResizeEvents:function(){this.model._resizeEventRegistered&&(ej.isTouchDevice()&&this._isOrientationSupported()?this._off($(window),"orientationchange",this.chartResize):this._off($(window),"resize",this.chartResize),this.model._resizeEventRegistered=!1)},_isOrientationSupported:function(){return"orientation"in window&&"onorientationchange"in window},_calculatePinchZoomPosition:function(e){var t,i,s,a,r,n=this.model.m_AreaBounds,o=this.model._axes,l=e.originalEvent.touches&&e.originalEvent.touches.length>0?e.originalEvent.touches[0]:e.originalEvent,d=l.pageX,h=l.pageY,c=this.previousPanTouch,u=0,p=o.length;if(d>n.X&&d<n.X+n.Width&&h>n.Y&&h<n.Y+n.Height){if(c||(c=this.previousPanTouch={pageX:d,pageY:h}),ej.isTouchDevice()||this.model.zooming.enableDeferredZoom)return this.oPreviousCoords={x:this.previousPanTouch.pageX,y:this.previousPanTouch.pageY},this.chartMouseMove(e);for(;u<p;u++)i=o[u],a="horizontal"==i.orientation.toLowerCase(),r=a?(c.pageX-d)/i.width*i.zoomFactor:(c.pageY-h)/i.height*i.zoomFactor,t=i.zoomPosition,i.zoomPosition=this._ensureValueInMinMax(a?t+r:t-r,0,1-i.zoomFactor),s=s||t!=i.zoomPosition;this.previousPanTouch={pageX:d,pageY:h},s&&!this.chartUpdating&&(this.redraw(!0,s,e.target),this._enableZoomingButtons())}},_calculateTouchDistance:function(e,t){for(var i=[],s=0,a=t.length;s<a;s++)null==e[s]&&(e[s]=t[s]),i[s]={},s>0&&(i[s].scaleX=e[0].pageX!=e[1].pageX&&(t[0].pageX-t[1].pageX)/(e[0].pageX-e[1].pageX),i[s].scaleY=e[0].pageY!=e[1].pageY&&(t[0].pageY-t[1].pageY)/(e[0].pageY-e[1].pageY),i[s].center={x:(e[0].pageX+t[0].pageX)/2,y:(e[1].pageY+t[1].pageY)/2});return i},_ensureValueInMinMax:function(e,t,i){return e<t?t:e>i?i:e},_calculatePinchZoomFactor:function(e,t,i){var s,a,r,n,o,l,d,h,c,u=this.model,p=u._axes,m=!0,g=u.m_AreaBounds,f=0,_=p.length;if(t="x"==t?"horizontal":"y"==t?"vertical":null,null!=this.previousScale){for(;f<_;f++)if(!t||p[f].orientation===t){if(l=p[f],!(a="horizontal"==l.orientation?e[1].scaleX:e[1].scaleY))break;c="horizontal"==l.orientation?this.previousScale[1].scaleX:this.previousScale[1].scaleY,d=l.zoomFactor,h=l.zoomPosition,o=this._ensureValueInMinMax(1/l.zoomFactor,1,1e4),n=this._ensureValueInMinMax(o+o*(a-c)/c,1,1e4),r="horizontal"==l.orientation?e[1].center.x/g.Width:1-e[1].center.y/g.Height,l.zoomFactor=this._ensureValueInMinMax(1/n,1e-4,1),l.zoomPosition=this._ensureValueInMinMax(h+(d-l.zoomFactor)*r,0,1-l.zoomFactor),s=s||d!=l.zoomFactor,m=m&&1==l.zoomFactor}!s||m||this.chartUpdating?m&&this.zoomed&&!this.chartUpdating&&(this.redraw(!0,!0,i),this.zoomed=!1,this._removeZoomkit()):(this.zoomed=!0,this.redraw(!0,!0,i),this._enableZoomingButtons())}this.previousScale=e},_addTouchPointer:function(e,t,i,s){for(s=e.length;s--;)if(t.pointerId==e[s].pointerId)return i&&(e[s]=t),0;e.push(t)},_removeTouchPointer:function(e,t,i){for(i=e&&e.length;i--;)if(t.pointerId==e[i].pointerId)return e.splice(i,1),0},_copyTouches:function(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]={pageX:e[i].pageX,pageY:e[i].pageY};return t},_initEventParams:function(){return{touches:[],movements:[]}},_pointerPinchStart:function(e){var t,i=e.originalEvent,s=this.model,a=s.m_AreaBounds,r=$(this.element).offset(),n=this.eventParams||(this.eventParams=this._initEventParams()),o=(i.pageX||i.changedTouches[0].pageX)-r.left,l=(i.pageY||i.changedTouches[0].pageY)-r.top;this.model.selectionEnable&&(this.cancelEvent(e),i.preventDefault()),!s.enable3D&&"cartesianaxes"==s.AreaType&&"mouse"!=i.pointerType&&4!=i.pointerType&&s.zooming.enable&&s.zooming.enablePinching&&(i.touches||i.pointerId)?(t=e.target.id,-1!=t.indexOf("ResetZoom")?this.resetZoom(e):-1!=t.indexOf("panIcon")?this.startPan(e):-1!=t.indexOf("ZoomIcon")?this.startZoom(e):-1!=t.indexOf("ZoomOut")||-1!=t.indexOf("ZoomIn")?this.startZoomInOut(e):o>a.X&&o<a.X+a.Width&&l>a.Y&&l<a.Y+a.Height?(i.touches?n.touches=this._copyTouches(i.touches):this._addTouchPointer(n.touches,{pageX:o,pageY:l,pointerId:i.pointerId}),n.touches.length<2&&this.chartMouseDown(e)):this.chartMouseDown(e)):this.chartMouseDown(e)},_removeInteractions:function(){$("[id*=_TrackSymbol]").remove(),this._removeTrackBall(),this._removeHighlight(),$("#"+this.svgObject.id+"_TrackToolTip").hide(),$("#"+this._id+"_tooltip").remove()},_pinchGestureMove:function(e){var t=e.originalEvent.changedTouches[0],i=e.originalEvent.touches,s=this.model,a=$(this.element).offset(),r=s.m_AreaBounds,n=t.pageX-a.left,o=t.pageY-a.top;this.eventParams=this.eventParams||this._initEventParams(s,t),!s.enable3D&&"cartesianaxes"==s.AreaType&&"mouse"!=t.pointerType&&4!=t.pointerType&&s.zooming.enable&&s.zooming.enablePinching&&i&&n>r.X&&n<r.X+r.Width&&o>r.Y&&o<r.Y+r.Height?(this._removeInteractions(),i.length>1?this._calculatePinchZoomFactor(this._calculateTouchDistance(this.eventParams.touches,i),s.zooming.type,e.target):this.doPan||this.panning?this._calculatePinchZoomPosition(e):this.chartMouseMove(e)):this.chartMouseMove(e)},_pointerPinchMove:function(e){var t,i,s=0,a=e.originalEvent,r=$(this.element).offset(),n=a.pageX-r.left,o=a.pageY-r.top,l=this.model,d=this.eventParams||this._initEventParams(l,a),h=d.touches,c=this.previousPointerMove,u=h.length,i=d.movements;if(null!=c&&c.pageX==a.pagex&&c.pageY==a.pageY&&c.pointerId==e.pointerId)return!1;if(!l.enable3D&&"cartesianaxes"==l.AreaType&&"mouse"!=a.pointerType&&4!=a.pointerType&&l.zooming.enable&&l.zooming.enablePinching){if(t=l.m_AreaBounds,n>t.X&&n<t.X+t.Width&&o>t.Y&&o<t.Y+t.Height)if(this._addTouchPointer(h,{pageX:n,pageY:o,pointerId:a.pointerId}),h&&h.length>1){for(;s<u;s++)this._addTouchPointer(i,h[s],!1);this._addTouchPointer(i,{pageX:n,pageY:o,pointerId:a.pointerId},!0),i[0].pageX==h[0].pageX&&i[1].pageX==h[1].pageX&&i[0].pageY==h[0].pageY&&i[1].pageY==i[1].pageY||this._calculatePinchZoomFactor(this._calculateTouchDistance(h,i),this.model.zooming.type,e.target)}else this.doPan||this.panning?this._calculatePinchZoomPosition(e):this.chartMouseMove(e);else h.length>0&&this._removeTouchPointer(h,e),i.length>0&&this._removeTouchPointer(i,e),this.chartMouseMove(e);this.previousPointerMove={pageX:n,pageY:o,pointerId:a.pointerId}}else this.chartMouseMove(e)},_pointerPinchEnd:function(e){var t=this.model,i=e.originalEvent,s=this.eventParams||(this.eventParams=this._initEventParams(t,i)),a=-1!=i.type.indexOf("leave")||-1!=i.type.indexOf("out")||-1!=i.type.indexOf("Out");!t.enable3D&&"cartesianaxes"==t.AreaType&&"mouse"!=i.pointerType&&4!=i.pointerType&&t.zooming.enable&&t.zooming.enablePinching&&(i.touches||i.pointerId)?(null!=this.continuePinching&&this.svgObject.removeChild(this.svgObject.firstChild),this.continuePinching=this.previousPanTouch=this.previousScale=null,i.touches?(this.eventParams=null,this.chartMouseUp(e),a&&this.chartMouseLeave(e)):(this._removeTouchPointer(s.touches,{pointerId:i.pointerId}),s.movements.length>0&&this._removeTouchPointer(s.movements,{pointerId:i.pointerId}),0==s.touches.length&&(this.chartMouseUp(e),a&&this.chartMouseLeave(e),this.eventParams=null))):(this.chartMouseUp(e),a&&this.chartMouseLeave(e))},_appendStyle:function(e){var t="#"+e+".e-canvas * {touch-action:none; -ms-touch-action:none}",i=document.head||document.body,s=document.createElement("style");s.type="text/css",s.appendChild(document.createTextNode(t)),i.appendChild(s)},bindEvents:function(){var e=jQuery.uaMatch(navigator.userAgent),t=ej.EjSvgRender.utils.browserInfo(),i=t.isMSPointerEnabled,s=t.pointerEnabled,a=i?s?"pointerdown":"MSPointerDown":"touchstart mousedown",r=i?s?"pointerup":"MSPointerUp":"touchend mouseup",n=i?s?"pointermove":"MSPointerMove":"touchmove mousemove",o=i?s?"pointerleave":"MSPointerOut":"touchleave mouseleave";this.model.browserInfo=t,window.navigator.maxTouchPoints>1&&window.PointerEvent||window.PointerEventsPolyfill?(this._on(this.element,"pointerup pointerleave",this._pointerPinchEnd),this._on(this.element,"pointerdown",this._pointerPinchStart),this._on(this.element,"pointermove",this._pointerPinchMove),this._appendStyle(this.element[0].id)):window.TouchEvent?(this._on(this.element,"touchstart",this._pointerPinchStart),this._on(this.element,"touchmove",this._pinchGestureMove),this._on(this.element,"touchend",this._pointerPinchEnd),this._on($(this.element),"mousedown",this.chartMouseDown),this._on($(this.element),"mousemove",this.chartMouseMove),this._on(this.element,"mouseleave",this.chartMouseLeave),this._on($(document),"mouseup",this.chartMouseUp),this._appendStyle(this.element[0].id)):window.navigator.msMaxTouchPoints&&window.navigator.msPointerEnabled?(this._on(this.element,"MSPointerUp",this._pointerPinchEnd),this._on(this.element,"mouseleave",this.chartMouseLeave),this._on(this.element,"MSPointerDown",this._pointerPinchStart),this._on(this.element,"MSPointerMove",this._pointerPinchMove),this._appendStyle(this.element[0].id)):(this._on(this.element,n,this.chartMouseMove),this._on(this.element,o,this.chartMouseLeave),this._on($(document),r,this.chartMouseUp),this._on($(this.element),a,this.chartMouseDown)),this._isSafari=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),1!=(this.isDevice()&&this._isSafari)&&this._on($(this.element),"click",this.chartMouseClick),this._on($(this.element),"contextmenu",this.chartRightClick),
this._on($(this.element),"dblclick",this.chartMouseDoubleClick),(this.model.canResize||this.model.isResponsive)&&this.bindResizeEvents();var l=this.model.zooming.enable||this.model.commonSeriesOptions.dragSettings.enable?"none":"pan-y";$(this.element).css({"ms-touch-action":l,"touch-action":l,"content-zooming":"none"}),$(this.element).css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"});var d="mozilla"==e.browser.toLowerCase()?s?"mousewheel":"DOMMouseScroll":"mousewheel";this._on(this.element,d,this.chartMouseWheel)},calZoomFactors:function(e,t,i,s){var a,r;return 1==e?(a=1,r=0):(a=ej.EjSvgRender.utils._minMax(1/e,0,1),r=s+(i-a)*t),{zoomMFactor:a,zoomMPosition:r}},doMouseWheelZoom:function(e,t,i){if(e>=1){var s=this.calZoomFactors(e,t,i.zoomFactor,i.zoomPosition);if(i.zoomPosition!=s.zoomMPosition||i.zoomFactor!=s.zoomMFactor)return this.zoomed=!0,i.zoomPosition=s.zoomMPosition,i.zoomFactor=s.zoomMPosition+s.zoomMFactor>1?1-s.zoomMPosition:s.zoomMFactor,!0}return!1},enableAnimation:function(){for(var e=0;e<this.model.series.length;e++){this.model.series[e].enableAnimation=this.serAnimation[e]}},disableAnimation:function(){for(var e=this,t=0;t<e.model.series.length;t++)e.model.series[t].enableAnimation=!1;for(var i=0;i<e.model.indicators.length;i++)e.model.indicators[i].enableAnimation=!1},_removeTrackBall:function(){var e="#"+this.svgObject.id;if($("#"+this.svgObject.id+"_trackSymbol").remove(),$(document).find("#measureTex").remove(),this.chartCross.visible){var t=$(this.svgObject).find(e+"_AxisCrossToolTip");this.svgRenderer._setAttr($(t),{visibility:"hidden"}),t=$(this.svgObject).find(e+"_CrosshairVertical"),this.svgRenderer._setAttr($(t),{d:"M 0 0"}),t=$(this.svgObject).find(e+"_CrosshairHorizontal"),this.svgRenderer._setAttr($(t),{d:"M 0 0"}),t=$(this.svgObject).find(e+"_TrackAxisToolTip"),this.svgRenderer._setAttr($(t),{visibility:"hidden"}),t=$(this.svgObject).find(e+"_Tracker"),this.svgRenderer._setAttr($(t),{d:"M 0 0"}),t=$(this.svgObject).find('[id*="_TrackToolTip"]'),this.svgRenderer._setAttr($(t),{visibility:"hidden"}),t=$(this.svgObject).find('[id*="_TrackToolTip"]').children(),this.svgRenderer._setAttr($(t),{visibility:"hidden"}),$(t).css("visibility","hidden"),t=$(this.svgObject).find('[id*="_trackSymbol_"]'),this.svgRenderer._setAttr($(t),{visibility:"hidden"}),$(document).find('[id*="_TrackToolTipTemplate_"]').attr("visibility","hidden"),$(document).find('[id*="_TrackToolTipTemplate_"]').css("display","none"),$(e+"_CrosshairVertical").css("display","none"),$(e+"_CrosshairHorizontal").css("display","none"),$("#"+this._id).find('[id*="canvas_AxisToolTipRect"]').css("visibility","hidden"),$("#"+this._id).find('[id*="canvas_Tracker"]').remove(),$("#"+this._id).find('[id*="canvas_trackSymbol"]').css("visibility","hidden"),$("#"+this._id).find('[id*="_gTooltip_"]').remove(),$("#secondCanvas").remove(),$(document).find('[id*="TrackGroupToolTipTemplate"]').remove(),$(document).find('[id*="_TrackToolTipTemplate_"]').remove(),$("#"+this._id).find('[id*="_trackball_grouping_tooltip"]').remove()}},enableTrackBall:function(){this.model.crosshair.visible=this.chartCross.visible,this.model.crosshair.type=this.chartCross.mArea},disableTrackBall:function(){this.model.crosshair.visible=!1,this._removeTrackBall()},_enableZoomingButtons:function(){var e=this.svgObject.id;if("cartesianaxes"!=this.model.AreaType&&($("#"+e+"_ResetZoom").remove(),$("#"+e+"_PanBtn").remove(),$("#"+e+"_ZoomBtn").remove(),$("#"+e+"_ZoomInBtn").remove(),$("#"+e+"_ZoomOutBtn").remove()),"cartesianaxes"==this.model.AreaType){this._removeZoomkit();var t=this.model.zooming.isReversed;this.toolbarItems||(this.toolbarItems=$.extend(!0,[],this.model.zooming.toolbarItems),this.toolbarItems.reverse());for(var i,s,a=t?this.toolbarItems:this.model.zooming.toolbarItems,r=a.length,n=r-1;n>=0;n--)switch(i=a[n],s=r-n,i){case"reset":this.resetZoomButton(s);break;case"pan":this.panButton(s);break;case"zoom":case"zoomIn":case"zoomOut":this.zoomButton(s,i);break;default:r-=1}}},chartMouseWheel:function(e){if($("#"+this.svgObject.id+"_TrackToolTip").hide(),$(document).find('[id*="TrackGroupToolTipTemplate"]').remove(),$(document).find('[id*="_TrackToolTipTemplate_"]').remove(),$(this.svgObject).find('[id*="_trackSymbol_"]').remove(),this.model.zooming.enableMouseWheel&&"cartesianaxes"==this.model.AreaType&&!this.model.enable3D&&!this.vmlRendering&&ej.util.isNullOrUndefined(this.model.isLazyZooming)){var t,i=this;this.zoomed=!1;for(var s=!1,a="#"+i.svgObject.id,r=jQuery.uaMatch(navigator.userAgent),n=!!navigator.userAgent.match(/Trident\/7\./),o=e.originalEvent.wheelDelta,l="mozilla"==r.browser.toLowerCase()?n?o/120>0?1:-1:-e.originalEvent.detail/3>0?1:-1:o/120>0?1:-1,d=0;d<this.model._axes.length;d++){var h=this.model._axes[d];if("vertical"==h.orientation.toLowerCase()&&("y"==i.model.zooming.type.toLowerCase()||"x,y"==i.model.zooming.type.trim().toLowerCase())||"horizontal"==h.orientation.toLowerCase()&&("x"==i.model.zooming.type.toLowerCase()||"x,y"==i.model.zooming.type.trim().toLowerCase())){var c=Math.max(1/ej.EjSvgRender.utils._minMax(h.zoomFactor,0,1),1),u=Math.max(c+.25*l,1);s|=i.doMouseWheelZoom(u,.5,h)}1!=h.zoomFactor&&0!=h.zoomPosition&&(t=!0),this.resetZooming=1==h.zoomFactor&&0==h.zoomPosition}this._updateScroll(),this.disableAnimation(),this.disableTrackBall(),s&&(this.model.legendCollapsed=!1,this.zoomed=!0,i.redraw(!0)),this.model._chartAreaZoom=!0,this._enableZoomingButtons(),this.mouseWheelCoords={x:e.originalEvent.pageX,y:e.originalEvent.pageY},t||($(a+"_ResetZoom").remove(),$(a+"_PanBtn").remove(),$(a+"_ZoomBtn").remove(),$(a+"_ZoomInBtn").remove(),$(a+"_ZoomOutBtn").remove(),this.enableAnimation(),this.panning=!1);var r=jQuery.uaMatch(navigator.userAgent);e.preventDefault&&"chrome"==r.browser&&this.model.zooming.enable&&e.preventDefault(),e.returnValue=!1}$(".tooltipDiv"+this._id).remove()},getAxisMultiLevelLabelsData:function(e){var t,i,s,a,r,n,o=this.calMousePosition(e),l=this.model.multiLevelLabelRegions.length;for(this.mousemoveX=o.X,this.mousemoveY=o.Y,n=0;n<l;n++)if(t=this.model.multiLevelLabelRegions[n],i=t.bounds.x,s=t.bounds.y,a=t.bounds.height,r=t.bounds.width,this.mousemoveX>=i&&this.mousemoveX<=i+r&&this.mousemoveY<=s+a&&this.mousemoveY>=s)return{location:{x:this.mousemoveX,y:this.mousemoveY},axis:this.model._axes[t.axisIndex],multiLevelLabel:t.multiLevelLabel}},getAxisLabelData:function(e){var t,i,s,a,r,n,o=this.calMousePosition(e),l=e.target.id,d=this.model._axes.length;if(this.mousemoveX=o.X,this.mousemoveY=o.Y,"cartesianaxes"==this.model.AreaType||"polaraxes"==this.model.AreaType)if(this.model.enable3D){if(l.indexOf("horizontal")>=0||l.indexOf("vertical")>=0)for(var h=0;h<d;h++){n=this.model._axes[h].visibleLabels.length;for(var c=0;c<n;c++)if(l==this.svgObject.id+this.model._axes[h].orientation+c)return{location:{x:this.mousemoveX,y:this.mousemoveY},index:c,axis:this.model._axes[h],text:this.model._axes[h].visibleLabels[c].Text}}}else for(var h=0;h<d;h++)if(n=this.model._axes[h].visibleLabels.length,this.model._axes[h].visible)for(var c=0;c<n;c++)if(t=this.model._axes[h].visibleLabels[c].region,!ej.util.isNullOrUndefined(t)&&(i=t.bounds.x,s=t.bounds.y,a=t.bounds.width,r=t.bounds.height,i=this.vmlRendering&&l.indexOf("_YLabel_")>=0?this.model._axes[h].opposedPosition?i:i+a:i,this.mousemoveX>=i&&this.mousemoveX<=i+a&&(this.vmlRendering?this.mousemoveY<=s+r&&this.mousemoveY>=s:this.mousemoveY>=s-r&&this.mousemoveY<=s)))return{location:{x:this.mousemoveX,y:this.mousemoveY},index:c,axis:this.model._axes[h],text:t.labelText}},getLegendData:function(e){var t=this.calMousePosition(e),i=this.model.legend.isReversed;t.X=i&&($("#legend_"+this._id).find('[class*="e-vscrollbar"]').length||"scroll"==$("#legend_"+this._id)[0].style.overflowY)?t.X-18:t.X,t.X-=parseFloat($(this.element).css("padding-left")),t.Y-=parseFloat($(this.element).css("padding-top"));var s=this.model.legend._ejScroller,a=0,r=0;a=s?$("#legend_"+this._id).ejScroller("instance").model.scrollTop:$("#legend_"+this._id).scrollTop(),r=s?$("#legend_"+this._id).ejScroller("instance").model.scrollLeft:$("#legend_"+this._id).scrollLeft(),i&&s&&(r=0==r?$("#legend_"+this._id).ejScroller("instance")._rtlScrollLeftValue:$("#legend_"+this._id).ejScroller("instance").model.scrollLeft==$("#legend_"+this._id).ejScroller("instance")._rtlScrollLeftValue?0:$("#legend_"+this._id).ejScroller("instance")._rtlScrollLeftValue-$("#legend_"+this._id).ejScroller("instance").model.scrollLeft),this.scrolltop=a||0,this.scrollleft=r||0,this.mousemoveX=t.X+r,this.mousemoveY=t.Y+a;var n,o=e.target.id,l=this.mousemoveX,d=this.mousemoveY,h=this._id;return!(!(!ej.util.isNullOrUndefined(o)&&this.svgRenderer._getAttrVal($(e.target).parents(":eq(1)"),"id")==this.svgObject.id+"_Legend"||this.model.enableCanvasRendering&&o=="legend_"+h+"_canvas"||this.vmlRendering)||($.each(this.model.legendRegion,function(e,t){l>=t.Bounds.LegendBound.X+t.Bounds.ItemBound.X&&l<=t.Bounds.LegendBound.X+t.Bounds.ItemBound.X+t.Bounds.ItemBound._Width&&(d>=t.Bounds.LegendBound.Y+t.Bounds.ItemBound.Y-t.Bounds.ItemBound.Height/4&&d<=t.Bounds.LegendBound.Y+t.Bounds.ItemBound.Y+t.Bounds.ItemBound.Height?(n=t,$("#legend_"+h+"_canvas").css("cursor","pointer")):$("#legend_"+h+"_canvas").css("cursor","default"))}),ej.util.isNullOrUndefined(n)))&&{legendItem:n,series:this.model._visibleSeries[n.LegendItem.SeriesIndex]}},get3DSeriesPoint:function(e){var t,i,s,a=this.mousemoveX,r=this.mousemoveY,n="polaraxes"==this.model.AreaType?0:this.model.m_AreaBounds.X,o="polaraxes"==this.model.AreaType?0:this.model.m_AreaBounds.Y,l="polaraxes"==this.model.AreaType?$(this.svgObject).width():this.model.m_AreaBounds.Width,d="polaraxes"==this.model.AreaType?$(this.svgObject).height():this.model.m_AreaBounds.Height;if(a>n&&a<n+l&&r>o&&r<o+d){var h=$(e.target)[0].nodeName;if(("path"==h||"shape"==h)&&$(e.target)[0].id.indexOf("Region")>1){t=$(e.target)[0].id.match(/(\d+)/g),i=parseInt(t[t.length-1]),s=parseInt(t[t.length-2]);var c={};c.Region={},c.Region.PointIndex=i,c.SeriesIndex=s;var u={};return u.pointIndex=i,{region:c,pointData:u,location:{x:a,y:r}}}}},GetSeriesPoint:function(e){for(var t,i,s=this.mousemoveX,a=this.mousemoveY,r=this,n=r.model.indicators,o=r.model._visibleSeries,l=0;l<n.length&&n[l].segment;l++)o=o.concat(n[l].segment);if(r.model.enable3D)return this.get3DSeriesPoint(e);var d="polaraxes"==this.model.AreaType?0:this.model.m_AreaBounds.X,h="polaraxes"==this.model.AreaType?0:this.model.m_AreaBounds.Y,c="polaraxes"==this.model.AreaType?$(this.svgObject).width():this.model.m_AreaBounds.Width,u="polaraxes"==this.model.AreaType?$(this.svgObject).height():this.model.m_AreaBounds.Height;if("cartesianaxes"==this.model.AreaType||"polaraxes"==this.model.AreaType){if(s>d&&s<d+c&&a>h&&a<h+u&&$.each(this.model.chartRegions,function(n,l){if(ej.util.isNullOrUndefined(l.SeriesIndex)){g=r.model.chartRegions;var d;if(!l.isStripLine){for(var h=l.length,c=r.model.requireInvertedAxes,u=c?r.model.series[l[h-1].SeriesIndex]._xAxisName:r.model.series[l[h-1].SeriesIndex]._yAxisName,m=0;m<r.model._axes.length;m++)if(u==r.model._axes[m].name){d=r.model._axes[m];break}for(var f=0;f<g.length;f++)for(var _=0;_<g[f].length;_++){var v=[],b=g[f][_].region;b[0]&&v.push({x:b[0].X+d.x,y:b[0].Y+d.y}),b[1]&&v.push({x:b[1].X+d.x,y:b[1].Y+d.y}),b[2]&&v.push({x:b[2].X+d.x,y:b[2].Y+d.y}),b[3]&&v.push({x:b[3].X+d.x,y:b[3].Y+d.y});var x={x:s,y:a},S=r.isPointInPolygon(v,x);S&&(t=g[f][_])}}}else{var T=o[l.SeriesIndex];if("polaraxes"==r.model.AreaType&&"column"==T.drawType.toLowerCase()&&e.target||"rangecolumn"==T.drawType.toLowerCase())if(r.model.enableCanvasRendering){if("polar"==T.type.toLowerCase()){var R,k,O=l.Region.Bounds,D=-.5*Math.PI,I=O.innerRadius||O.DRadius;R=s-O.CenterX,k=a-O.CenterY;var j=r.model._visibleSeries[l.SeriesIndex],L=j.startAngle,A=(j.endAngle,L?2*Math.PI*(r.model.itemCurrentXPos<0?1+r.model.itemCurrentXPos:r.model.itemCurrentXPos):0),E=(Math.atan2(k,R)-D-A)%(2*Math.PI);E<0&&0!=O.PointIndex&&(E=2*Math.PI+E);var P=parseFloat(O.StartAngle.toFixed(14)),M=parseFloat(O.EndAngle.toFixed(14));if(P-=A,M-=A,E>=P&&E<=M&&(n=O.PointIndex,(p=Math.sqrt(Math.pow(Math.abs(R),2)+Math.pow(Math.abs(k),2)))<=O.Radius&&p>I)){var F={Region:{PointIndex:n},SeriesIndex:l.SeriesIndex,type:l.type};t=F}}else if("radar"==T.type.toLowerCase()){var O=l.Region.Bounds;if(O.Line1){b=O.Line1,y=O.Line2,w=O.Line3,C=O.Line4;var v=[{x:b.x,y:b.y},{x:y.x,y:y.y},{x:w.x,y:w.y}],x={x:s,y:a},S=!1;if("column"==T.drawType.toLowerCase())for(var N=!1,f=-1,z=v.length,_=z-1;++f<z;_=f)(v[f].y<=x.y&&x.y<v[_].y||v[_].y<=x.y&&x.y<v[f].y)&&x.x<(v[_].x-v[f].x)*(x.y-v[f].y)/(v[_].y-v[f].y)+v[f].x&&(N=!N);else{var V=[{x:b.x,y:b.y},{x:y.x,y:y.y},{x:w.x,y:w.y},{x:C.x,y:C.y}],f=0;_=2;for(var N=!1,B=0;B<V.length;B++){(V[f].y<=x.y&&x.y<V[_].y||V[_].y<=x.y&&x.y<V[f].y)&&x.x<(V[_].x-V[f].x)*(x.y-V[f].y)/(V[_].y-V[f].y)+V[f].x&&(N=!N);var m;m=f,f=_,_=++m,2==B&&(_=0)}}if(S=N){n=O.PointIndex;var F={Region:{PointIndex:n},SeriesIndex:l.SeriesIndex,type:l.type};t=F}}}}else{var H=$(e.target)[0].nodeName;if(("path"==H||"shape"==H)&&$($(e.target).parent())[0].id==r.svgObject.id+"_SeriesGroup_"+l.SeriesIndex)return n=$(e.target)[0].id.match(/(\d+)/g),i=parseInt(n[n.length-1]),l={Region:{PointIndex:i},SeriesIndex:l.SeriesIndex,type:l.type},t=l,!1}else s>=l.Region.Bounds.X&&s<=l.Region.Bounds.X+l.Region.Bounds.Width&&a>l.Region.Bounds.Y&&a<l.Region.Bounds.Y+l.Region.Bounds.Height&&(t=l)}}),t)return{region:t,location:{x:s,y:a}}}else{var p,m,g,r=this,f=r.model.chartRegions;if(!(f.length>0)||"pyramid"!=f[0].Series.type.toLowerCase()&&"funnel"!=f[0].Series.type.toLowerCase())return $.each(r.model.chartRegions,function(e,i){var n,o,l=-.5*Math.PI,d=i.SeriesData,h=i.Region,c="doughnut"==r.model._visibleSeries[i.SeriesIndex].type.toLowerCase()?d.DRadius:0;n=s-d.CenterX,o=a-d.CenterY;var u=r.model._visibleSeries[i.SeriesIndex],m=u.startAngle,g=u.endAngle;if(m=m<0?m+360:m,g=g<0?g+360:g,u.endAngle-u.startAngle<0){g/=360;var f=g?2*Math.PI*(g<0?1+g:g):0,_=(Math.atan2(o,n)-l-f)%(2*Math.PI);_<0&&(_=2*Math.PI+_),v=[];for(var b=0;b<h.length;b++){var x=parseFloat(h[b].StartAngle.toFixed(14)),y=parseFloat(h[b].EndAngle.toFixed(14));if(x=x<0?2*Math.PI+x:x,y=y<0?2*Math.PI+y:y,x-=f,y-=f,x=parseFloat(x.toFixed(14)),y=parseFloat(y.toFixed(14)),u.startAngle>=0&&u.endAngle<=0&&(x=x<=0?2*Math.PI+x:x,y=y<0?2*Math.PI+y:y),_<=x&&_>=y){v.push(h[b]);break}}}else{var f=m?2*Math.PI*(r.model.itemCurrentXPos<0?1+r.model.itemCurrentXPos:r.model.itemCurrentXPos):0,_=(Math.atan2(o,n)-l-f)%(2*Math.PI);_<0&&(_=r.model._isPieOfPie?_:2*Math.PI+_),v=[];for(var b=0;b<h.length;b++){var x=parseFloat(h[b].StartAngle.toFixed(14)),y=parseFloat(h[b].EndAngle.toFixed(14));if(x=x<0?r.model._isPieOfPie?x:2*Math.PI+x:x,y=y<0?2*Math.PI+y:y,x-=f,y-=f,x=parseFloat(x.toFixed(14)),y=parseFloat(y.toFixed(14)),u.startAngle<0&&(u.endAngle>-1||null==u.endAngle)&&(x=x<0?2*Math.PI+x:x,y=y<=0?2*Math.PI+y:y),_+2*Math.PI<y&&"pieofpie"==u.type&&(_+=2*Math.PI),_>=x&&_<=y){v.push(h[b]);break}}}if(v.length>0){if(u.explodeAll||u.explodeIndex==v[0].PointIndex){var w=s-v[0].StartX,C=a-v[0].StartY;v.length>0&&(p=Math.sqrt(Math.pow(Math.abs(w),2)+Math.pow(Math.abs(C),2)))<=d.Radius&&p>c&&(h.PointIndex=v[0].PointIndex,h.Index=v[0].Index,h.SeriesIndex=v[0].SeriesIndex,t={region:i,pointData:v,location:{x:s,y:a}})}else(p=Math.sqrt(Math.pow(Math.abs(n),2)+Math.pow(Math.abs(o),2)))<=d.Radius&&p>c&&(h.PointIndex=v[0].PointIndex,h.Index=v[0].Index,h.SeriesIndex=v[0].SeriesIndex,t={region:i,pointData:v,location:{x:s,y:a}})}}),t;var _=$(e.target)[0].nodeName;if(("path"==_||"shape"==_)&&$($(e.target).parent())[0].id==r.svgObject.id+"_SeriesGroup_"+f[0].SeriesIndex){g=r.model.chartRegions[0],m=$(e.target)[0].id.match(/(\d+)/g),m=parseInt(m[m.length-1]),g.Region.PointIndex=m;var v={};return v.pointIndex=m,t={region:g,pointData:v,location:{x:s,y:a}}}g=f[0];for(var b,x,y,w,C,S,T,R=this.pyrX,k=this.pyrY,v={},l=0;l<g.Region.length;l++){x=g.Region[l].Line1,y=g.Region[l].Line2,w=g.Region[l].Line3,C=g.Region[l].Line4,"pyramid"==f[0].Series.type.toLowerCase()?b=[{x:x.x+R,y:x.y+k},{x:y.x+R,y:y.y+k},{x:w.x+R,y:w.y+k},{x:C.x+R,y:C.y+k}]:(S=g.Region[l].Line5,T=g.Region[l].Line6,b=[{x:x.x+R,y:x.y+k},{x:y.x+R,y:y.y+k},{x:w.x+R,y:w.y+k},{x:C.x+R,y:C.y+k},{x:S.x+R,y:S.y+k},{x:T.x+R,y:T.y+k}]);var O={x:s,y:a};if(this.isPointInPolygon(b,O))return v.pointIndex=g.Region[l].PointIndex,g.Region.PointIndex=v.pointIndex,t={region:g,pointData:v,location:{x:s,y:a}}}}},isPointInPolygon:function(e,t){for(var i=!1,s=-1,a=e.length,r=a-1;++s<a;r=s)(e[s].y<=t.y&&t.y<e[r].y||e[r].y<=t.y&&t.y<e[s].y)&&t.x<(e[r].x-e[s].x)*(t.y-e[s].y)/(e[r].y-e[s].y)+e[s].x&&(i=!i);return i},mousePosition:function(e){return!ej.util.isNullOrUndefined(e.pageX)&&e.pageX>0?{x:e.pageX,y:e.pageY}:e.originalEvent&&!ej.util.isNullOrUndefined(e.originalEvent.pageX)&&e.originalEvent.pageX>0?{x:e.originalEvent.pageX,y:e.originalEvent.pageY}:e.originalEvent&&void 0!=e.originalEvent.changedTouches?!ej.util.isNullOrUndefined(e.originalEvent.changedTouches[0].pageX)&&e.originalEvent.changedTouches[0].pageX>0?{x:e.originalEvent.changedTouches[0].pageX,y:e.originalEvent.changedTouches[0].pageY}:void 0:{x:0,y:0}},calMousePosition:function(e){var t=jQuery.uaMatch(navigator.userAgent),i=this.mousePosition(e);e.pageX=i.x,e.pageY=i.y;var s,a;t.browser.toLowerCase();return s=e.pageX-$(this.svgObject).offset().left,a=e.pageY-$(this.svgObject).offset().top,{X:s,Y:a}},calTouchPosition:function(e){var t,i,s=jQuery.uaMatch(navigator.userAgent);if("mozilla"==s.browser.toLowerCase()||"webkit"==s.browser.toLowerCase()){var a=e.originalEvent.touches[0];t=a.pageX-$(this.svgObject).parent().offset().left,i=a.pageY-$(this.svgObject).parent().offset().top,this.leftPadding=$(this.svgObject).offset().left,this.grabPadding=0}else if("msie"==s.browser.toLowerCase())t=e.originalEvent.pageX-$(this.svgObject).offset().left,i=e.originalEvent.pageY-$(this.svgObject).offset().top,this.leftPadding=$(this.svgObject).offset().left;else{var a=e.originalEvent.touches[0];t=a.pageX-$(this.svgObject).offset().left,i=a.pageY-$(this.svgObject).offset().top,this.leftPadding=$(this.svgObject).offset().left}return{X:t,Y:i}},cancelEvent:function(e){return e.stopPropagation(),"chrome"==jQuery.uaMatch(navigator.userAgent).browser&&(this.model.zooming.enable||this.model.crosshair.visible)&&e.preventDefault(),this.model.enable3D&&(e.preventDefault(),e.stopPropagation()),e.returnValue=!1,e.cancelBubble=!0,!1},resetZoom:function(){var e=this,t="#"+this.svgObject.id;$(".tooltipDiv"+this._id).remove(),$(".zoom"+this._id).remove(),e.zoomed&&($.each(this.model._axes,function(e,t){t.zoomed=!1,t.zoomFactor=1,t.zoomPosition=0}),e.model.primaryXAxis.zoomFactor=1,e.model.primaryYAxis.zoomFactor=1,e.model.primaryXAxis.zoomPosition=0,e.model.primaryYAxis.zoomPosition=0,$("#"+e._id+"_canvas").css({cursor:"default"}),$(t+"_ResetZoom").remove(),$(t+"_PanBtn").remove(),$(t+"_ZoomBtn").remove(),$(t+"_ZoomInBtn").remove(),$(t+"_ZoomOutBtn").remove(),e.zoomed=!1,e.zooming=!1,e.panning=!1,e.model._chartAreaZoom=!1,e.resetZooming=!0,e.enableTrackBall(),e.redraw(!0),e.enableAnimation(),e.svgRenderer._setAttr($(e.svgObject).find(t+"_XAxis,"+t+"_ChartArea,"+t+"_YAxis,"+t+"_SeriesCollection"),{cursor:"default"}))},startZoomInOut:function(e){var t=e.target.id.indexOf("ZoomIn")>-1?"zoomIn":"zoomOut";this.drag=!1,this.zoomed=!0;for(var i,s,a,r,n=this.model.zooming.type.toLowerCase(),o="zoomIn"==t?.2:-.2,l=!0,d=0;d<this.model._axes.length;d++)i=this.model._axes[d],s=i.zoomFactor,a=i.zoomPosition,"horizontal"==i.orientation.toLowerCase()?(i.zoomFactor="y"!=n?s-o:i.zoomFactor,i.zoomPosition="y"!=n?a+o:i.zoomPosition):(i.zoomFactor="x"!=n?s-o:i.zoomFactor,i.zoomPosition="x"!=n?a+o:i.zoomPosition),parseFloat(i.zoomFactor.toFixed(3))<=.001&&(i.zoomFactor=s,i.zoomPosition=a),parseFloat(i.zoomFactor.toFixed(3))>=1&&(i.zoomFactor=1,i.zoomPosition=0),l=l&&1==i.zoomFactor,this.resetZooming=1==i.zoomFactor&&0==i.zoomPosition;r=this._getZoomedData(this);var h=$.extend({},ej.EjSvgRender.commonChartEventArgs);h.data={},h.data.series=r,this._trigger("zoomed",h),this._updateScroll(),this.redraw(!0),l?(this._removeZoomkit(),this.resetZooming=!0,this.zoomed=this.panning=!1,this.model._chartAreaZoom=!1):this._enableZoomingButtons()},startZoom:function(){var e=this,t="#"+this.svgObject.id;$(".tooltipDiv"+this._id).remove();var i=this.model.theme.toLowerCase().indexOf("dark")>=0?"#000000":" #FFFFFF";e.svgRenderer._setAttr($(t+"_ZoomBtn"),{selected:"true"}),e.svgRenderer._setAttr($(t+"_ZoomPath"),{fill:"#14B9FF"}),e.svgRenderer._setAttr($(t+"_ZoomIcon"),{fill:"#FFFFFF"}),e.svgRenderer._setAttr($(t+"_PanPath"),{fill:"#B7B7B7"}),e.svgRenderer._setAttr($(t+"_panIcon"),{fill:i}),$(t+"_ZoomBtn").css({"border-color":"#14B9FF","background-color":"#14B9FF"}),$(t+"_PanBtn").css({"border-color":"#B7B7B7","background-color":"#B7B7B7"}),$("#"+e._id+"_canvas").css({cursor:"default"}),this._cursorToDefault(),e.panning=!1,e.enableTrackBall()},startPan:function(){var e=this,t="#"+this.svgObject.id;$(".tooltipDiv"+this._id).remove();var i=this.model.theme.toLowerCase().indexOf("dark")>=0?"#000000":" #FFFFFF";e.svgRenderer._setAttr($(t+"_ZoomBtn"),{selected:"false"}),e.svgRenderer._setAttr($(t+"_PanBtn"),{selected:"true"}),e.svgRenderer._setAttr($(t+"_ZoomPath"),{fill:"#B7B7B7"}),e.svgRenderer._setAttr($(t+"_ZoomIcon"),{fill:i}),e.svgRenderer._setAttr($(t+"_PanPath"),{fill:"#14B9FF"}),e.svgRenderer._setAttr($(t+"_panIcon"),{fill:"#FFFFFF"}),$(t+"_ZoomBtn").css({"border-color":"#B7B7B7","background-color":"#B7B7B7"}),$(t+"_PanBtn").css({"border-color":"#14B9FF","background-color":"#14B9FF"}),$("#"+e._id+"_canvas").css({cursor:"pointer"}),this._cursorToPointer(),e.panning=!0,e.disableTrackBall()},zoomButton:function(e,t){if("zoom"==t)var i="_Zoom";else i="zoomIn"==t?"_ZoomIn":"_ZoomOut";var s=5*e+5,a={left:0,top:0},r=this.model.m_AreaBounds.X+(this.model.m_AreaBounds.Width-32*e-s),n=this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height+(this.model.elementSpacing-this.model.m_AreaBounds.Height),o=this.model.theme.toLowerCase().indexOf("dark")>=0?"#000000":" #FFFFFF",l={id:this.svgObject.id+i+"Path",d:"M32,27c0,2.75-2.25,5-5,5H5c-2.75,0-5-2.25-5-5V5c0-2.75,2.25-5,5-5h22c2.75,0,5,2.25,5,5V27z",fill:this.panning||"zoomIn"==t||"zoomOut"==t?"#b7b7b7":"#14B9FF",zoomId:this._id+i+"Btn",width:26,height:26,left:r+a.left,top:n+a.top,iconColor:o};ej.EjCanvasRender.prototype.zoomButton(l,t,this),"zoom"==t?this._on($("#"+this.svgObject.id+i+"Btn"),"touchstart click",this.startZoom):this._on($("#"+this.svgObject.id+i+"Btn"),"touchstart click",this.startZoomInOut)},panButton:function(e){var t=5*e+5,i={left:0,top:0},s=this.model.m_AreaBounds.X+(this.model.m_AreaBounds.Width-32*e-t),a=this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height+(this.model.elementSpacing-this.model.m_AreaBounds.Height),r=this.model.theme.toLowerCase().indexOf("dark")>=0?"#000000":" #FFFFFF",n={id:this.svgObject.id+"_PanPath",d:"M 32 27 c 0 2.75 -2.25 5 -5 5 H 5 c -2.75 0 -5 -2.25 -5 -5 V 5 c 0 -2.75 2.25 -5 5 -5 h 22 c 2.75 0 5 2.25 5 5 V 27 Z",fill:this.panning?"#14B9FF":"#b7b7b7",panId:this._id+"_PanBtn",width:26,height:26,left:s+i.left,top:a+i.top,iconColor:r};ej.EjCanvasRender.prototype.panButton(n,this),this._on($("#"+this.svgObject.id+"_PanBtn"),"touchstart click",this.startPan)},resetZoomButton:function(e){var t=5*e+5,i={left:0,top:0},s=this.model.m_AreaBounds.X+(this.model.m_AreaBounds.Width-(32*e+t)),a=this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height+(this.model.elementSpacing-this.model.m_AreaBounds.Height),r=this.model.theme.toLowerCase().indexOf("dark")>=0?"#000000":" #FFFFFF",n={id:this.svgObject.id+"_ResetZoomPath",d:"M 32 27 c 0 2.75 -2.25 5 -5 5 H 5 c -2.75 0 -5 -2.25 -5 -5 V 5 c 0 -2.75 2.25 -5 5 -5 h 22 c 2.75 0 5 2.25 5 5 V 27 Z",fill:"#b7b7b7",resetZoomId:this._id+"_ResetZoom",width:26,height:26,left:s+i.left,top:a+i.top,iconColor:r};ej.EjCanvasRender.prototype.resetZoom(n,this);var o=(window.TouchEvent?"touchstart":window.PointerEvent?"pointerdown":window.MSPointerEvent?"MSPointerDown":"click")+" click";this._on($("#"+this.svgObject.id+"_ResetZoom"),o,this.resetZoom)},doZoom:function(e,t,i){var s,a=this;if(this.model._chartAreaZoom=!0,this.scrollDraw=!0,$(".tooltipDiv"+this._id).remove(),a.model.enableCanvasRendering)var r=$("#"+this.svgObject.id+"_ZoomArea")[0].getClientRects()[0],n=$("#"+this.svgObject.id)[0].getClientRects()[0],o=r.left-n.left-$(document).scrollLeft(),l=r.top-n.top-$(document).scrollTop();else var o=parseFloat(a.svgRenderer._getAttrVal($(e),"x")),l=parseFloat(a.svgRenderer._getAttrVal($(e),"y"));$("#"+this.svgObject.id+"_ZoomArea").remove(),this.drag=!1,this.zoomed=!0;for(var d=0;d<this.model._axes.length;d++){var h=this.model._axes[d],c=h.zoomFactor,u=h.zoomPosition;"horizontal"==h.orientation.toLowerCase()?(h.zoomFactor="y"!=a.model.zooming.type.toLowerCase()?c*(t/a.model.m_AreaBounds.Width):h.zoomFactor,h.zoomPosition="y"!=a.model.zooming.type.toLowerCase()?u+Math.abs((o-a.model.m_AreaBounds.X)/a.model.m_AreaBounds.Width)*c:h.zoomPosition):(h.zoomFactor="x"!=a.model.zooming.type.toLowerCase()?c*i/a.model.m_AreaBounds.Height:h.zoomFactor,h.zoomPosition="x"!=a.model.zooming.type.toLowerCase()?u+(1-Math.abs((i+(l-a.model.m_AreaBounds.Y))/a.model.m_AreaBounds.Height))*c:h.zoomPosition)}s=this._getZoomedData(a);var p=$.extend({},ej.EjSvgRender.commonChartEventArgs);p.data={},p.data.series=s,this._trigger("zoomed",p),this.disableAnimation(),this.model.legendCollapsed=!1,this.redraw(!0),this._enableZoomingButtons()},_getZoomedData:function(e){for(var t,i,s,a,r,n=this.model._visibleSeries,o=n.length,l=[],d=[],h=[],c=0;c<o;c++){if("visible"==n[c].visibility){h=n[c].points,r=h.length,t=n[c].type.toLowerCase(),i=new(ej.axisTypes[n[c].xAxis._valueType.toLowerCase()]),i._calculateVisibleRange(n[c].xAxis,e),i=new(ej.axisTypes[n[c].yAxis._valueType.toLowerCase()]),i._calculateVisibleRange(n[c].yAxis,e),s=n[c].xAxis.visibleRange,a=n[c].yAxis.visibleRange;for(var u=0;u<r;u++)s.min<=h[u].xValue&&s.max>=h[u].xValue&&a.min<=h[u].y&&a.max>=h[u].y&&(n[c]._hiloTypes?"rangearea"==t||"rangecolumn"==t||"waterfall"==t||"hilo"==t?l.push({XValue:h[u].x,High:h[u].high,Low:h[u].low}):l.push({XValue:h[u].x,High:h[u].high,Low:h[u].low,Open:h[u].open,Close:h[u].close}):l.push({XValue:h[u].x,YValue:h[u].y}))}0!=l.length&&d.push({selectedData:l}),l=[]}return d},_cursorToDefault:function(){var e="#"+this.svgObject.id;this.svgRenderer._setAttr($(this.svgObject).find(e+"_XAxis,"+e+"_ChartArea,"+e+"_YAxis,"+e+"_SeriesCollection,"+e+"_StriplineBehind,"+e+"_StriplineOver"),{cursor:"default"})},_cursorToPointer:function(){var e="#"+this.svgObject.id;this.svgRenderer._setAttr($(this.svgObject).find(e+"_XAxis,"+e+"_ChartArea,"+e+"_YAxis,"+e+"_SeriesCollection,"+e+"_StriplineBehind,"+e+"_StriplineOver"),{cursor:"pointer"})},removeMultiRect:function(){$(this.parentgEle).empty(),this.model.selectedDataCollection=[]},multiSelectDataCalculation:function(){for(var e,t,i,s,a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y=[],w=this.selectedRectIndex,C=this.oldRectX[w],S=this.oldRectY[w],T=this.oldRectWidth[w],R=this.oldRectHeight[w],k=1,O=this.model.series,D=O.length,I=this.multiAxis,j=I.length,L=this.multiSelectType,A=(this.model.AreaType.toLowerCase(),0);A<D;A++){x=O[A],p=x.xAxis.visibleRange,m=x.yAxis.visibleRange;var E=I.some(function(e){return e.name.toLowerCase()==x._xAxisName.toLowerCase()}),P=I.some(function(e){return e.name.toLowerCase()==x._yAxisName.toLowerCase()});if(b=x.selectionSettings,E&&P&&"visible"==x.visibility.toLowerCase()){for(var M=0;M<j;M++)e=I[M],t=k,i=0,"horizontal"==e.orientation.toLowerCase()?(this.selectFactor="y"!=b.rangeType.toLowerCase()?t*(T/this.multiAxis[M].width):k,this.selectPosition="y"!=b.rangeType.toLowerCase()?i+Math.abs((C-this.multiAxis[M].x)/this.multiAxis[M].width)*t:0,parseFloat(k.toFixed(3))<=.001&&(this.selectFactor=t,this.selectPosition=i)):(this.selectFactor="x"!=b.rangeType.toLowerCase()?t*R/this.multiAxis[M].height:k,this.selectPosition="x"!=b.rangeType.toLowerCase()?i+(1-Math.abs((R+(S-this.multiAxis[M].y))/this.multiAxis[M].height))*t:0,parseFloat(k.toFixed(3))<=.001&&(this.selectFactor=t,this.selectPosition=i)),e.visibleRange=$.extend(!0,{},e.actualRange),(this.selectFactor<1||this.selectPosition>0)&&(d="logarithmic"==e.valueType?e.visibleRange:e.actualRange,this.selectFactor=this.selectFactor>1?1:this.selectFactor<0?0:this.selectFactor,this.selectPosition=this.selectPosition<0?0:this.selectPosition>1?1:this.selectPosition,e.isInversed?(h=e.actualRange.max-this.selectPosition*e.actualRange.delta,c=h-this.selectFactor*e.actualRange.delta,!0):(h=e.actualRange.min+this.selectPosition*e.actualRange.delta,c=h+this.selectFactor*e.actualRange.delta),h<d.min&&(c+=d.min-h,h=d.min),c>d.max&&(h-=c-d.max,c=d.max),"logarithmic"==e.valueType&&(h=Math.pow(10,h),c=Math.pow(10,c)),e.visibleRange.min=Math.min(h,c),e.visibleRange.max=Math.max(h,c));if(o=x._visiblePoints,l=x.type.toLowerCase(),v=x.isTransposed,s=x.xAxis.visibleRange.min,a=x.xAxis.visibleRange.max,r=x.yAxis.visibleRange.min,n=x.yAxis.visibleRange.max,ej.util.isNullOrUndefined(y)&&(y=[]),x.selectionSettings.enable)switch(L){case"x":for(var M=0;M<o.length;M++)o[M].seriesIndex=A,u=o[M].isEmpty,g=o[M].xValue,f=o[M].y,x.xAxis.isInversed||x.yAxis.isInversed?l.indexOf("bar")>=0?l.indexOf("stacking")>=0?(_=x.stackedValue.EndValues[M],!u&&n>=_&&r<=_&&y.push(o[M])):"waterfall"==l&&!u&&n>=o[M].YValues[0]&&r<=o[M].YValues[0]?y.push(o[M]):!u&&n>=f&&r<=f&&y.push(o[M]):!u&&a>=g&&s<=g&&y.push(o[M]):v&&l.indexOf("bar")>=0?!u&&s<=g&&a>=g&&y.push(o[M]):l.indexOf("bar")>=0||x.isTransposed&&!(l.indexOf("bar")>=0)?l.indexOf("stacking")>=0?(_=x.stackedValue.EndValues[M],!u&&r<=_&&n>=_&&y.push(o[M])):"waterfall"==l&&!u&&r<=o[M].YValues[0]&&n>=o[M].YValues[0]?y.push(o[M]):!u&&r<=f&&n>=f&&y.push(o[M]):!u&&Math.round(s)<=g&&a>=g&&y.push(o[M]);break;case"y":for(var M=0;M<o.length;M++)o[M].seriesIndex=A,u=o[M].isEmpty,g=o[M].xValue,f=o[M].y,x.xAxis.isInversed||x.yAxis.isInversed?l.indexOf("bar")>=0?!u&&a>=g&&s<=g&&y.push(o[M]):l.indexOf("stacking")>=0?(_=x.stackedValue.EndValues[M],!u&&r<=_&&n>=_&&y.push(o[M])):"waterfall"==l&&!u&&n>=o[M].YValues[0]&&r<=o[M].YValues[0]?y.push(o[M]):!u&&n>=f&&r<=f&&y.push(o[M]):v&&l.indexOf("bar")>=0?l.indexOf("stacking")>=0?(_=x.stackedValue.EndValues[M],!u&&r<=_&&n>=_&&y.push(o[M])):"waterfall"==l&&!u&&r<=o[M].YValues[0]&&n>=o[M].YValues[0]?y.push(o[M]):!u&&r<=f&&n>=f&&y.push(o[M]):l.indexOf("bar")>=0||x.isTransposed&&!(l.indexOf("bar")>=0)?!u&&s<=g&&a>=g&&y.push(o[M]):l.indexOf("stacking")>=0?(_=x.stackedValue.EndValues[M],!u&&r<=_&&n>=_&&y.push(o[M])):"waterfall"==l&&!u&&r<=o[M].YValues[0]&&n>=o[M].YValues[0]?y.push(o[M]):!u&&r<=f&&n>=f&&y.push(o[M]);break;case"xy":for(var M=0;M<o.length;M++)o[M].seriesIndex=A,u=o[M].isEmpty,g=o[M].xValue,f=o[M].y,l.indexOf("stacking")>=0?(_=x.stackedValue.EndValues[M],!u&&a>=g&&s<=g&&r<=_&&n>=_&&y.push(o[M])):"waterfall"==l&&!u&&a>=g&&s<=g&&r<=o[M].YValues[0]&&n>=o[M].YValues[0]?y.push(o[M]):!u&&a>=g&&Math.round(s)<=g&&r<=f&&n>=f&&y.push(o[M])}}x.xAxis.visibleRange=p,x.yAxis.visibleRange=m}var F=this.currentIndex;(ej.util.isNullOrUndefined(this.model.selectedDataCollection)||0==$("#"+this.svgObject.id+"_rectSelectionGroup").length)&&(this.model.selectedDataCollection=[]),this.removeRect?this.model.selectedDataCollection.splice(F,1):this.rectPan||this.resize?(this.model.selectedDataCollection[F]=0,this.model.selectedDataCollection[F]=y):this.model.selectedDataCollection[this.model.selectedDataCollection.length]=y;var N=$.extend({},ej.EjSvgRender.commonChartEventArgs);N.data={},N.data.selectedData=y,N.data.selectedDataCollection=this.model.selectedDataCollection,this._trigger("rangeSelected",N)},multiSelectMouseUp:function(e){if(this._isMultiSelect&&"range"==this.multiSelectMode){
var t,i,s,a,r,n,o,l=this.svgObject.id,d=this.selectedRectIndex,h="#"+l+"_selectRect",t=parseInt($(h+d).attr("width")),i=parseInt($(h+d).attr("height")),s=parseInt($(h+d).attr("x")),a=parseInt($(h+d).attr("y"));if((this.multiSelectDraw||!this.removeRect||!this.resize||!this.rectPan)&&t>0&&i>0){var c={id:l+"_resize_rightRect"+d,x:s+t-5,y:a+10,width:10,height:i-20>0?i-20:0,fill:"transparent",stroke:"transparent","stroke-width":2,cursor:"e-resize"};this.svgRenderer.drawRect(c,this.gEle);var u={id:l+"_resize_bottomRect"+d,x:s,y:a+i-5,width:t-10>0?t-10:0,height:10,fill:"transparent",stroke:"transparent","stroke-width":2,cursor:"s-resize"};this.svgRenderer.drawRect(u,this.gEle);var p={id:l+"_resize_leftRect"+d,x:s-5,y:a,width:10,height:i,fill:"transparent",stroke:"transparent","stroke-width":2,cursor:"w-resize"};this.svgRenderer.drawRect(p,this.gEle);var m={id:l+"_resize_topRect"+d,x:s,y:a-5,width:t-10>0?t-10:0,height:10,fill:"transparent",stroke:"transparent","stroke-width":2,cursor:"n-resize"};this.svgRenderer.drawRect(m,this.gEle);var g={id:l+"_resize_bottomRightCornerCircle"+d,cx:s+t,cy:a+i,r:10,fill:"transparent",stroke:"transparent","stroke-width":2,cursor:"se-resize"};this.svgRenderer.drawCircle(g,this.gEle);var f={id:l+"_closeTopRightCornerCircle"+d,cx:s+t,cy:a,r:10,fill:"white",stroke:"#2988d6","stroke-width":2,cursor:"pointer"};this.svgRenderer.drawCircle(f,this.gEle);var _={id:l+"_closePath"+d,x1:s+t-4,y1:a-4,x2:s+t+4,y2:a+4,stroke:"#2988d6","stroke-width":2,cursor:"pointer"};this.svgRenderer.drawLine(_,this.gEle);var v={id:l+"_closePathOpposite"+d,x1:s+t+4,y1:a-4,x2:s+t-4,y2:a+4,stroke:"#2988d6","stroke-width":2,cursor:"pointer"};this.svgRenderer.drawLine(v,this.gEle),r=[16,10,4,10,4,4],n=[4,4,4,10,10,16],o=["a","b","c","d","e","f"];for(var b=0;b<6;b++){var x={id:l+"_gripCircle_"+o[b]+d,cx:s+t-r[b],cy:a+i-n[b],r:.4,stroke:"#5B5B5B","stroke-width":2};this.svgRenderer.drawCircle(x,this.gripCollection)}null!=this.gripCollection&&$(this.gripCollection).appendTo(this.gEle),$("#"+l+"_gripCollection"+d).css({visibility:"hidden"})}ej.util.isNullOrUndefined(this.oldRectX)&&(this.oldRectX=[],this.oldRectY=[],this.oldRectWidth=[],this.oldRectHeight=[],this.oldReRightRectX=[],this.oldReTopRectY=[],this.oldReBottomRectY=[]),this.oldRectX[d]=parseInt($(h+d).attr("x")),this.oldRectY[d]=parseInt($(h+d).attr("y")),this.oldRectWidth[d]=parseInt($(h+d).attr("width")),this.oldRectHeight[d]=parseInt($(h+d).attr("height")),this.oldReRightRectX[d]=parseInt($("#"+l+"_resize_rightRect"+d).attr("x")),this.oldReTopRectY[d]=parseInt($("#"+l+"_resize_topRect"+d).attr("y")),this.oldReBottomRectY[d]=parseInt($("#"+l+"_resize_bottomRect"+d).attr("y")),this.oldMultiSelectType=this.multiSelectType,(this.resize||this.rectPan)&&(this.resize&&$("#"+this.svgObject.id+"_gripCollection"+d).attr({transform:""}),$("#"+l+"_closeTopRightCornerCircle"+d).css({display:"inline"}),$("#"+l+"_closePath"+d).css({display:"inline"}),$("#"+l+"_closePathOpposite"+d).css({display:"inline"}),$("#"+l+"_resize_rightRect"+d).css({cursor:"e-resize"}),$("#"+l+"_resize_leftRect"+d).css({cursor:"w-resize"}),$("#"+l+"_resize_bottomRect"+d).css({cursor:"s-resize"}),$("#"+l+"_resize_topRect"+d).css({cursor:"n-resize"})),this.drag=!1,this.removeRect&&($("#"+l+"_selectedRectGroup"+d).remove(),this.parentgEle.childNodes.length<=0&&$(this.parentgEle).remove()),(this.multiSelectDraw||this.removeRect||this.resize||this.rectPan)&&t>0&&i>0&&(this.multiSelectDraw=!1,this.multiSelectDataCalculation(e)),this.resize&&(this.resize=!1),this.rectPan&&(this.rectPan=!1),this.removeRect=!1,this.enableTrackBall()}},chartMouseUp:function(e){if(this.isTouch(e)&&(this.model.touchCross=!1,this.chartMouseUpTouch(e)),!this.currentPageX&&this.panning){var t=this.calMousePosition(e);this.currentPageX=t.X,this.currentPageY=t.Y}var i=this,s=this.model;if(this.mousedownPointX=this.mousedownPointY=null,$("[id*=_PreviewSeries]").remove(),$("[id*=_Marker]").remove(),i.dragPoint){var a=this.dragIndex.seriesIndex,r=s._visibleSeries[a];this.model.enableCanvasRendering||this.gPreviewSeriesGroupEle&&($(this.svgObject).find("#"+this.svgObject.id+"_PreviewSeriesGroup_"+a).remove(),this.gPreviewSeriesGroupEle.childNodes.length>0&&this.gPreviewSeriesGroupEle.removeChild(this.gPreviewSeriesGroupEle.childNodes[0]));var n,o,l;this.dragPoint=r.dragPoint=!1;var d=this._getDraggedPoint(r,this.mousemoveX,this.mousemoveY),h=d.X,c=d.Y;o=r.data.seriesIndex,l=r.data.pointIndex;var u={X:this.commonDragEventArgs.data.oldValue.X,Y:this.commonDragEventArgs.data.oldValue.Y},p={X:h,Y:c};n=$.extend({},this.commonDragEventArgs),n.data={series:r,seriesIndex:o,pointIndex:l,oldValue:u,newValue:p},this._trigger("dragEnd",n),i.commonDragEventArgs=n,i._changeDraggingPoints(r,l,n.data.newValue.X,n.data.newValue.Y),r.region=null,this.redraw()}"cartesianaxes"!=this.multiSelectAreaType||s.zooming.enable||s.enableCanvasRendering||this.multiSelectMouseUp(e);var i=this;if(s.zooming.enable&&"cartesianaxes"==s.AreaType){var m=$("#"+this.svgObject.id+"_ZoomArea");if(m[0])if(s.enableCanvasRendering)var g=m[0].getClientRects()[0],f=g.width,_=g.height;else var v=$(m),f=parseFloat(this.svgRenderer._getAttrVal(v,"width")),_=parseFloat(this.svgRenderer._getAttrVal(v,"height"));f>0&&_>0?i.doZoom(m,f,_):this.drag=!1,i.panning||this.enableTrackBall()}var b=this.svgObject.id,x=ej.util.isNullOrUndefined(e.target.parentNode)?"":e.target.parentNode.id;if(x!=b+"_ResetZoom"&&x!=b+"_ZoomBtn"&&e.target.id!=b+"_ResetZoom"&&e.target.id!=b+"_ZoomBtn"||(this.panning=!1,this.model._chartAreaZoom=!1),(ej.isTouchDevice()||s.zooming.enableDeferredZoom)&&this.panning&&this.doPan&&"cartesianaxes"==s.AreaType){var y,w,C,S;y={x:this.oPreviousCoords.x-this.currentPageX,y:this.oPreviousCoords.y-this.currentPageY},this.oPreviousCoords={x:this.currentPageX,y:this.currentPageY},$.each(s._axes,function(e,t){var s=Math.max(1/ej.EjSvgRender.utils._minMax(t.zoomFactor,0,1),1);i.translate(t,y.x,y.y,s)}),this.model.legendCollapsed=!1,C=w=$.extend({},ej.EjSvgRender.commonChartEventArgs),S=this,w.data={model:this.model},this._trigger("panStart",w),window.setTimeout(function(){S.redraw(!0,!0,e.target),S._cursorToPointer(),S._enableZoomingButtons(),C=$.extend({},ej.EjSvgRender.commonChartEventArgs),C.data={model:S.model},S._trigger("panEnd",C)},10)}this.doPan&&(this.doPan=!1),this.rotateActivate=!1},multiSelectMouseDown:function(evt){this.multiSelectAreaType=this.model.AreaType.toLowerCase();var model=this.model,chartX=model.m_AreaBounds.X,chartWidth=model.m_AreaBounds.Width,chartY=model.m_AreaBounds.Y,chartHeight=model.m_AreaBounds.Height,mouseDownCords=this.calMousePosition(evt);if("cartesianaxes"==this.multiSelectAreaType&&!model.zooming.enable&&!model.enableCanvasRendering&&mouseDownCords.X>=chartX&&mouseDownCords.X<chartX+chartWidth&&mouseDownCords.Y<chartY+chartHeight&&mouseDownCords.Y>=chartY){var seriesCollection=this.model.series,seriesCollectionLength=seriesCollection.length,id,mouseDownCords,matchStr,containerSvg=this.svgObject.id,selectMode=seriesCollection.some(function(e){return"range"==e.selectionSettings.mode.toLowerCase()});this._isMultiSelect=seriesCollection.some(function(e){return 1==e.selectionSettings.enable&&"range"==e.selectionSettings.mode.toLowerCase()}),selectMode&&(this.multiSelectMode="range");for(var i=0;i<seriesCollectionLength;i++)1==seriesCollection[i].selectionSettings.enable&&"range"==seriesCollection[i].selectionSettings.mode.toLowerCase()&&(this.multiSelectType=seriesCollection[i].selectionSettings.rangeType.toLowerCase());if(this._isMultiSelect&&"range"==this.multiSelectMode){this.disableTrackBall(),mouseDownCords=this.calMousePosition(evt),this.mouseDownX=mouseDownCords.X,this.mouseDownY=mouseDownCords.Y,this.drag=!0,$(this.parentgEle).find("g").length<1?this.selectedRectIndex=0:(id=$(this.parentgEle).find("g").last().attr("id"),matchStr=containerSvg+"_gripCollection",id=parseInt(id.substr(matchStr.length)),this.selectedRectIndex=id+1),0==$(this.parentgEle).find("g").length&&(this.parentgEle=this.svgRenderer.createGroup({id:containerSvg+"_rectSelectionGroup"})),this.gEle=this.svgRenderer.createGroup({id:containerSvg+"_selectedRectGroup"+this.selectedRectIndex}),0==$(this.gripCollection).find("g").length&&(this.gripCollection=this.svgRenderer.createGroup({id:containerSvg+"_gripCollection"+this.selectedRectIndex})),evt.target.id.indexOf("resize")>=0&&(id=evt.target.id.split("resize")[1].match(/\d+/)[0],this.selectedRectIndex=eval(id)),evt.target.id.indexOf("close")>=0&&(id=evt.target.id.split("close")[1].match(/\d+/)[0],this.selectedRectIndex=eval(id)),evt.target.id.indexOf(this.svgObject.id+"_selectRect")>=0&&(matchStr=this.svgObject.id+"_selectRect",this.selectedRectIndex=parseInt(evt.target.id.substr(matchStr.length))),this.currentIndex=$(evt.target.parentNode).index();var axes=this.model._axes,axesLength=axes.length,axis,mouseMoveCords=this.calMousePosition(evt),mouseMoveX=mouseMoveCords.X,mouseMoveY=mouseMoveCords.Y;this.multiAxis=[];for(var k=0;k<axesLength;k++)axis=axes[k],mouseMoveX>axis.Location.X1&&mouseMoveX<axis.Location.X2&&this.multiAxis.push(axis),mouseMoveY<axis.Location.Y1&&mouseMoveY>axis.Location.Y2&&this.multiAxis.push(axis)}}},_grab:function(e,t,i,s,a){var r=$.extend({},ej.EjSvgRender.commonChartEventArgs);r.data={seriesIndex:i,pointIndex:s,currentPoint:a},t._trigger("dragStart",r),e.data=r.data,this.commonDragEventArgs=r,this.mousedownPointX=this.mousedownPointY=null},_enableDragging:function(e,t,i){var s,a,r=this,n=e.type.toLowerCase(),o=r.model.AreaType,l=e.visibility.toLowerCase();if(this.mousedownPointX&&this.mousedownPointY&&"cartesianaxes"==o&&!this.model.enable3D&&"visible"==l&&("line"==n||"spline"==n||"area"==n||"stepline"==n||"steparea"==n||"splinearea"==n||"column"==n||"bar"==n||"bubble"==n||"scatter"==n)){var d=[],h=[];if(s=this.getClosesPointXY(h,d,e,this.mousedownPointX,this.mousedownPointY,i),this.mousemoveX=this.mousedownPointX,this.mousemoveY=this.mousedownPointY,a=this.GetSeriesPoint(i),!ej.util.isNullOrUndefined(s.point)){this.dragPoint=e.dragPoint=!0,s.seriesIndex=t,e.pointData=s;var c={xValue:s.point.xValue,yValue:s.point.YValues};r._grab(e,r,t,s.index,c),this.dragIndex={pointIndex:s.index,seriesIndex:t}}if(!ej.util.isNullOrUndefined(a)){var u=a.region;if(t==u.SeriesIndex){e.region=a.region,this.dragPoint=e.dragPoint=!0;var p=e._visiblePoints[u.Region.PointIndex].xValue,m=e._visiblePoints[u.Region.PointIndex].YValues,c={xValue:p,yValue:m};r._grab(e,r,u.SeriesIndex,u.Region.PointIndex,c),this.dragIndex={pointIndex:u.Region.PointIndex,seriesIndex:u.SeriesIndex}}}}},chartMouseDown:function(e){var model=this.model,matchStr=this._id+"_scrollbar_",parentNodeId=e.target.parentNode&&e.target.parentNode.id?e.target.parentNode.id:"",selectionIndex=parentNodeId.indexOf(matchStr)>-1?parseInt(parentNodeId.substr(matchStr.length)):NaN,isZoom=this.isZoomButtonHovered(e.target),axes=model._axes,chart=this,id,mouseDownCords=this.calMousePosition(e),browserInfo=this.model.browserInfo;if(this.mousedownPointX=mouseDownCords.X,this.mousedownPointY=mouseDownCords.Y,"which"in e?this.chartRightClick=3==e.which:"button"in e&&(this.chartRightClick=2==e.button),isNaN(selectionIndex)||ej.util.isNullOrUndefined(selectionIndex)||(axes[selectionIndex].previousRange=$.extend(!0,{},model._axes[selectionIndex].visibleRange)),this.mousemoveX=this.mouseDownX=mouseDownCords.X,this.mousemoveY=this.mouseDownY=mouseDownCords.Y,this.isTouch(e)&&(this.model.event=e,this.model.touchCross=!0,$.finish?$(this.model.trackerElement).finish():$(this.model.trackerElement).stop(!0,!0),this.model.tapNum=this.model.tapNum||0,isZoom||this.doubleTap(e),chart.model.crosshair.visible&&!isZoom))var timer=setTimeout(function(){var t=$("#"+chart.svgObject.id).find("#"+chart.svgObject.id+"_ZoomArea"),i=chart.model.elementSpacing/2,s=chart.getEvent(chart.model.event),a=s.pageX,r=s.pageY;chart.model.touchCross&&!chart.panning&&Math.abs(a-chart.model.cachedX)<i&&Math.abs(r-chart.model.cachedY)<i&&(0==t.length||0==parseFloat($(t).attr("width"))||0==parseFloat($(t).attr("height")))&&(chart.chartInteractiveBehavior(e),chart.model.crosshairMoved=!0,chart.drag=!1)},500);if(this.model.enable3D&&this.model.enableRotation&&(this.rotateActivate=!0),!this.svgRenderer.vmlNamespace){this.oPreviousCoords={},e.target.id.indexOf("resize")>=0&&(id=e.target.id.split("resize")[1].match(/\d+/)[0],this.selectedRectIndex=eval(id),this.multiSelectMouseDownId=e.target.id,this.resize=!0),e.target.id.indexOf("close")>=0&&(id=e.target.id.split("close")[1].match(/\d+/)[0],this.selectedRectIndex=eval(id),this.removeRect=!0),e.target.id.indexOf(this.svgObject.id+"_selectRect")>=0&&(matchStr=this.svgObject.id+"_selectRect",this.selectedRectIndex=parseInt(e.target.id.substr(matchStr.length))),e.target.id==this.svgObject.id+"_selectRect"+this.selectedRectIndex&&(this.rectPan=!0,this.PreviousCoords={X:e.pageX,Y:e.pageY}),this.isTouch(e)||this.multiSelectMouseDown(e);var parent=this.svgRenderer._getAttrVal($(e.target).parent(),"id"),isZoomToolkit=parent!=this.svgObject.id+"_ZoomBtn"&&parent!=this.svgObject.id+"_ZoomInBtn"&&parent!=this.svgObject.id+"_ZoomOutBtn"&&parent!=this.svgObject.id+"_ResetZoom"&&parent!=this.svgObject.id+"_PanBtn";if(isZoomToolkit&&this.model.zooming.enable&&!this.model.isLazyZooming&&!this.panning&&"cartesianaxes"==this.model.AreaType)this.mouseDownX>=this.model.m_AreaBounds.X&&this.mouseDownX<model.m_AreaBounds.X+model.m_AreaBounds.Width&&this.mouseDownY<model.m_AreaBounds.Y+model.m_AreaBounds.Height&&this.mouseDownY>=model.m_AreaBounds.Y&&!this.isTouch(e)&&((isNaN(selectionIndex)||ej.util.isNullOrUndefined(selectionIndex))&&(this.drag=!0),this.disableTrackBall());else if(isZoomToolkit&&this.panning||"e-hhandle e-box"==$(e.target)[0].className){var mousePanCords=this.calMousePosition(e);this.mousePanX=mousePanCords.X,this.mousePanY=mousePanCords.Y,this.mousePanX>=model.m_AreaBounds.X&&this.mousePanX<model.m_AreaBounds.X+model.m_AreaBounds.Width&&this.mousePanY<model.m_AreaBounds.Y+model.m_AreaBounds.Height+18&&this.mousePanY>=model.m_AreaBounds.Y&&(this.doPan=!0)}(this.rotateActivate||this.doPan)&&(this.oPreviousCoords={x:e.pageX,y:e.pageY})}},chartMouseLeave:function(e){this.cancelEvent(e),this.isTouch(e)||($("[id*=_TrackSymbol]").remove(),this._removeHighlight(),this._removeTrackBall(),$("#"+this.svgObject.id+"_TrackToolTip").hide(),$("#"+this._id+"_tooltip").remove(),$(".tooltipDiv"+this._id).hasClass(this.svgObject.id)&&$(".tooltipDiv"+this._id).remove());var t=$.extend({},ej.EjSvgRender.commonChartEventArgs);t.data={location:{x:this.mousemoveX,y:this.mousemoveY},size:{height:this.model.svgHeight,width:this.model.svgWidth},id:e.target.id,pageX:e.pageX,pageY:e.pageY},this._trigger("chartMouseLeave",t)},_doClick:function(e){this.drag=!1,this.model.crosshairMoved||this._removeHighlight(),this.model.selectedDataPointIndexes||(this.model.selectedDataPointIndexes=[]),this.model.clusterPoints=[],this.model._isStateChaged=!1;var t,i,s,a,r=this.getEvent(e),n=r.pageX,o=r.pageY,l=(e.target.id,this.svgObject.id,this.model._visibleSeries),d=this.isZoomButtonHovered(e.target),h=e.target.id;l.length;var c,u,p,m;if(a=this.GetSeriesPoint(e),a?(t=a.region.SeriesIndex,i=a.region.Region.PointIndex):this.model.selectionEnable&&(this.model.enable3D||-1!=e.target.id.indexOf("LegendItem")||"none"==this.model.AreaType||(p=e.target.id,m=p.match(/(\d+)/g),!m||-1==p.indexOf("symbol")&&-1==p.indexOf("Series")||-1!=p.indexOf("Text")?!m||-1==p.indexOf("Text")&&-1==p.indexOf("dataLabel")||(t=parseInt(m[0].charAt(1)),i=isNaN(parseInt(m[0].charAt(0)))?parseInt(m[0].charAt(1)):parseInt(m[0].charAt(0))):(t=parseInt(m[0]),i=isNaN(parseInt(m[1]))?0:parseInt(m[1])))),!d||this.model.enableCanvasRendering){for(var g=0;g<this.model._visibleSeries.length;g++){s=this.model._visibleSeries[g];var f=s.type.toLowerCase();if("cartesianaxes"==this.model.AreaType&&"visible"==s.visibility.toLowerCase()&&"scatter"!==f&&"bubble"!==f&&"column"!==f&&-1==f.indexOf("bar")&&"stackingcolumn"!==f&&"stackingcolumn100"!==f&&!s._hiloTypes){var _=[],v=[],b=this.calMousePosition(e);this.mousemoveX=b.X,this.mousemoveY=b.Y;var x=this.getClosesPointXY(v,_,s,this.mousemoveX,this.mousemoveY,e);if(!ej.util.isNullOrUndefined(x.point)){t=g,i=x.index;var y=$.extend({},ej.EjSvgRender.commonChartEventArgs);y.data={location:{x:this.mousemoveX,y:this.mousemoveY},region:{SeriesIndex:g,Region:{PointIndex:x.index}}},this._trigger("pointRegionClick",y)}}}!a||d&&!this.model.enableCanvasRendering||(u=$.extend({},ej.EjSvgRender.commonChartEventArgs),u.data=a,this._trigger("pointRegionClick",u))}if("none"==this.model.AreaType&&this.model.enable3D&&"path"==$(e.target)[0].nodeName&&(!this.isTouch(e)||Math.abs(n-this.model.cachedX)<10&&Math.abs(o-this.model.cachedY)<10)){H=$(e.target)[0].id.match(/(\d+)/g),t=parseInt(H[H.length-2]),i=parseInt(H[H.length-1]);var w=this.model._visibleSeries[t].explodeIndex,C=this.model._visibleSeries[t]._visiblePoints[i].actualIndex;if(this.model._visibleSeries[t].explodeIndex=w==C?null:C,!this.vmlRendering&&!this.model.enableCanvasRendering)var S=this.selectedStyle(this);if($(this.svgObject).empty(),$(this.legendSvgContainer).empty(),this.draw(),"none"==this.model.AreaType){this.model._isStateChaged=!1;for(var T,R=S.length,k="_Region_Series_"+t+"_Point_"+i,O=$(this.svgObject).find("[id$="+k+"],[id*="+k+"back],[id*="+k+"front]"),D=O.length,I=0;I<R;I++)for(var g=0;g<D;g++)S[I].id==O[g].id&&(T=S[I].className,T.indexOf("SelectionStyle")<0&&T.indexOf("SelectionundefinedStyle")<0&&$("[id="+O[g].id+"]").attr("class",T));S.pattern&&this.svgRenderer.append(S.pattern,this.svgObject)}else $("[id*="+this.svgObject.id+"_LegendItemShape],[id*=_Region_Series_]").each(function(){$(this).attr("class","")})}var j=!1;if(j){$("#template_group_"+this._id).remove();var u=$.extend({},ej.EjSvgRender.commonChartEventArgs);u.data=j,this._trigger("legendItemClick",u);var t=j.legendItem.LegendItem.SeriesIndex;if(!this.model.legend.toggleSeriesVisibility&&j.series.selectionSettings.enable&&(this.model._isStateChaged=!1,this.legendSelection(this,j,e,a)),!u.cancel&&this.model.legend.toggleSeriesVisibility){$("[id*="+this._id+"_Selection_]").remove();var L=this.model._visibleSeries.length;if("none"!=this.model.AreaType||"none"==this.model.AreaType&&"pieofpie"!=f&&"pyramid"!=f&&"funnel"!=f&&L>1){var t=j.legendItem.LegendItem.SeriesIndex,A=j.legendItem.LegendItem.TrendLineIndex;if(ej.util.isNullOrUndefined(A))j.series.visibility="visible"===j.series.visibility.toLowerCase()?"hidden":"visible",this.model.series[t].visibility=j.series.visibility,this._notifyArrayChange&&this._notifyArrayChange("series["+t+"]visibility",j.series.visibility);else{var E=j.series.trendlines[A].visibility.toLowerCase();E="visible"===E?"hidden":"visible",this.model.series[t].trendlines[A].visibility=E,this._notifyArrayChange&&this._notifyArrayChange("series["+t+"].trendlines["+A+"].visibility",E)}}else{if(this.model._isPieOfPie)var P=this._getPieOfPiePoint(j.legendItem.LegendItem.ActualIndex,j.series,j)._visibility,i=j.legendItem.LegendItem.ActualIndex;else var P=j.series.visiblePoints[j.legendItem.LegendItem.PointIndex]._visibility,i=j.series.visiblePoints[j.legendItem.LegendItem.PointIndex].actualIndex;j.series.points[i]._visibility="visible"===P?"hidden":"visible"}if(this.model.enableCanvasRendering){var M=document.getElementById(this._id).getClientRects()[0];this.svgRenderer.ctx.clearRect(0,0,M.width,M.height),$("#"+this._id).find('[id*="canvas_symbol"]').remove()}$(this.svgObject).empty(),$(this.legendSvgContainer).empty();for(var F=0;F<this.model.series.length;F++)this.model.series[F].regionAdded=!1;this.model.legendCollapsed=!0,this.disableAnimation(),this.draw(),this.enableAnimation(),"none"!=this.model.AreaType&&this.zoomed&&this._enableZoomingButtons()}}var N=this.getAxisLabelData(e);if(N){var u=$.extend({},ej.EjSvgRender.commonChartEventArgs);u.data=N,this._trigger("axisLabelClick",u)}var z=this.getAxisMultiLevelLabelsData(e);if(z){var u=$.extend({},ej.EjSvgRender.commonChartEventArgs);u.data=z,this._trigger("multiLevelLabelClick",u)}if(h.indexOf("annotation_")>=0){var V=h.lastIndexOf("_"),B=h.substr(V+1,h.length),H=parseInt(B),u=$.extend({},ej.EjSvgRender.commonChartEventArgs);u.data={location:{x:this.mousemoveX,y:this.mousemoveY},contentData:this.model.annotations[H],pageX:e.pageX,pageY:e.pageY},this._trigger("annotationClick",u)}var Y=!ej.isNullOrUndefined(t)&&this.model._visibleSeries[t].selectionSettings.enable;ej.isNullOrUndefined(t)||j||!Y||this.isTouch(e)&&!(!this.model.crosshairMoved&&Math.abs(n-this.model.cachedX)<10&&Math.abs(o-this.model.cachedY)<10)||("multiple"==l[t].selectionSettings.type.toLowerCase(),c=l[t].selectionSettings.mode,"range"!=c.toLowerCase()&&this.segmentSelection(e,j,t,i,a,l)),this.model.crosshairMoved=!1;var u=$.extend({},ej.EjSvgRender.commonChartEventArgs);u.data={location:{x:this.mousemoveX,y:this.mousemoveY},size:{height:this.model.svgHeight,width:this.model.svgWidth},id:h,pageX:e.pageX,pageY:e.pageY},this._trigger("chartClick",u)},getTargetId:function(e,t,i){var s,a=this.model._visibleSeries[e].type.toLowerCase(),r=-1!=a.indexOf("area")||-1!=a.indexOf("line")||-1!=a.indexOf("scatter");return this.model.enable3D?$("[id*=_Region_Series_"+e+"_Point_"+t+"]").each(function(){s=this.id}):"series"!=i||"none"==this.model.AreaType?r?$("[id*="+this.svgObject.id+"_Series"+e+"_Point"+t+"_symbol]").each(function(){s=this.id}):$("[id$="+this.svgObject.id+"_Series"+e+"_Point"+t+"]").each(function(){s=this.id}):$("[id*="+this.svgObject.id+"_Series"+e+"]").each(function(){s=this.id}),s},findCanvasSelection:function(e,t,i){return 1==("point"==i?$("#"+this._id+"_Selection_series"+e+"_point_"+t+"_canvas").length:"series"==i?$("#"+this._id+"_Selection_series"+e+"_canvas").length:$("#"+this._id+"_Selection_Cluster_point_"+t+"_canvas").length)},segmentSelection:function(e,t,i,s,a){var r=this.model._visibleSeries,n=r[i];if(ej.isNullOrUndefined(n))return 0;var o,l,d,h,c,a,u,p,m,g,f,_,v,b=n.selectionSettings,x=(b.enable,"multiple"==b.type.toLowerCase()),y=b.mode,w=!1,C=this;if(this.model.isSelected=!0,!ej.isNullOrUndefined(s)&&"cluster"==y){for(var S,T,R=[],k=r[i]._visiblePoints[s].xValue,O=0,D=r.length;O<D;O++){S=r[O].points,T=S.length;for(var I=0;I<T;I++)k==S[I].xValue&&0==S[I].isEmpty&&1==S[I].visible&&(R[R.length]={seriesIndex:O,pointIndex:I})}this.model.clusterPoints=R}if(!this.model.enableCanvasRendering&&(o=this.getTargetId(i,s,y))){l=$("#"+o)[0].parentNode.id;null!=$("#"+l)[0]&&l&&(l.indexOf(this.svgObject.id+"_TextGroup_")>=0||l.indexOf(this.svgObject.id+"_symbolGroup")>=0,l.indexOf(this.svgObject.id+"_TrackSymbol_")>=0&&(!0,w=!0))}if(this.model.enableCanvasRendering?d=this.findCanvasSelection(i,s,y):(v=$("#"+o).attr("class")?$("#"+o).attr("class"):"",d=-1!=v.indexOf("Selection"),this.model.enable3D&&(v=$("[id*=_Region_Series_"+i+"_Point_"+s+"]").attr("class")?$("[id*=_Region_Series_"+i+"_Point_"+s+"]").attr("class"):"",d=-1!=v.indexOf("Selection"))),(d||!x||x)&&(this.removeSelection(i,s,r,y,x,t,d),a=this.model.selectedDataPointIndexes,(u=a.length)>0&&!this.model._isStateChaged))if(x){if(d)for(var j=0;j<u;j++)h=a[j].seriesIndex,c=a[j].pointIndex,p="series"==y&&h==i,g=("point"==y||"none"==this.model.AreaType)&&h==i&&c==s,f="cluster"==y&&c==s,((p||f)&&"none"!=this.model.AreaType||g)&&(a.splice(j,1),u=a.length,j=-1)}else for(var j=0;j<u;j++)h=a[j].seriesIndex,c=a[j].pointIndex,p="series"==y&&(h==i&&c==s||h!=i||c!=s),g=("point"==y||"none"==this.model.AreaType)&&h==i&&c==s,f="cluster"==y&&c==s,(p||g||f)&&(a.splice(j,1),u=a.length,j=-1);if(!d&&(this.model.enableCanvasRendering?this.canvasSelection(this,e,n,t,i,s,a,b):this.selection(C,e,n,w,t,i,s,l,o,a),a=this.model.selectedDataPointIndexes,u=a.length,!this.model._isStateChaged))if(u>0)if(x)a.push({legendData:t,seriesIndex:i,pointIndex:s});else{for(var j=0;j<u;j++)h=a[j].seriesIndex,c=a[j].pointIndex,_=!("series"!=y&&"cluster"!=y&&"none"!=this.model.AreaType||a[j].SeriesIndex==i&&a[j].PointIndex==s),m="point"==y&&a[j].SeriesIndex==i,(_||m)&&(a.splice(j,1),u=this.model.selectedDataPointIndexes.length,j=-1);a.push({legendData:t,seriesIndex:i,pointIndex:s})}else a.push({legendData:t,seriesIndex:i,pointIndex:s});var L={selectedData:this.model.selectedDataPointIndexes};this._trigger("seriesRegionClick",L)},legendSelection:function(e,t,i,s){var a=this.model.selectedDataPointIndexes?this.model.selectedDataPointIndexes:[],r=this.model._visibleSeries.length,n="none"==e.model.AreaType&&1==r?t.legendItem.LegendItem.PointIndex:t.legendItem.LegendItem.SeriesIndex,o=t.legendItem.LegendItem.SeriesIndex,l=n,d=e.svgObject.id+"_LegendItemShape"+n,h=$("#"+d).attr("class")?$("#"+d).attr("class"):"";if(1==$("#"+e._id+"_Selection_Legend"+n+"_canvas").length||-1!=h.indexOf("Selection")){$("#"+e._id+"_Selection_Legend"+n+"_canvas").remove(),$("[id*="+e._id+"_Selection_series"+n+"]").remove(),$("#"+this._id+"_Selection_series"+o+"_point_"+l+"_canvas").remove(),$("#"+d).attr("class",""),$("[id*="+e.svgObject.id+"_Series"+o+"]").attr("class",""),$("[id*=_Region_Series_"+o+"]").attr("class","");for(var c=0;c<a.length;c++)if(a[c].seriesIndex==n||"none"==this.model.AreaType&&a[c].pointIndex==n){a.splice(c,1);break}}else e.segmentSelection(i,t,o,l,s)},chartMouseClick:function(e){this.cancelEvent(e),window.navigator.msPointerEnabled&&(e=e.originalEvent),this._doClick(e)},chartMouseDoubleClick:function(e){window.navigator.msPointerEnabled&&(e=e.originalEvent);var t=$.extend({},ej.EjSvgRender.commonChartEventArgs);t.data={location:{x:this.mousemoveX,y:this.mousemoveY},size:{height:this.model.svgHeight,width:this.model.svgWidth},id:e.target.id,pageX:e.pageX,pageY:e.pageY},this._trigger("chartDoubleClick",t)},drawTrackerSymbol:function(e,t,i,s,a,r,n){var o,l,d=e.type.toLowerCase(),h=new ej.seriesTypes[d],c="boxandwhisker"==e.type.toLowerCase()?n:i,u=ej.EjSvgRender.utils._getTransform(e.xAxis,e.yAxis,this.model.requireInvertedAxes);o=e.isTransposed?e.yAxis.plotOffset:e.xAxis.plotOffset,l=e.isTransposed?e.xAxis.plotOffset:e.yAxis.plotOffset;var p={id:this.svgObject.id+"_ClipRectTrack_"+t,x:-o,y:-l,width:u.width+2*o,height:u.height+2*l,fill:"white","stroke-width":1,stroke:"Gray"};if("none"!=this.model.AreaType){if("cartesianaxes"==this.model.AreaType&&a.X+u.x<=u.x+u.width&&(a.X+u.x>=u.x||0==a.X)&&(a.Y+u.y>=u.y||0==a.Y))if(this.model.crosshair.visible||"bubble"==d||"scatter"==d){if(!e.trackerRemoved){var m=this.svgObject.id+"_TrackSymbol_"+t;m="boxandwhisker"==d?m+c:m,$("#"+this._id).find("[id*="+m+"]").remove();var m="canvas_trackSymbol_"+t;m="boxandwhisker"==d?m+c:m,$("#"+this._id).find("[id*="+m+"]").remove()}var g={"clip-path":"url(#"+this.svgObject.id+"_ClipRectTrack_"+t+")",class:"Tracker",id:this.svgObject.id+"_TrackSymbol_"+t+"_"+c,transform:"translate("+u.x+","+u.y+")"};this.gTrackerEle=this.svgRenderer.createGroup(g)}else this.gTrackerEle=null;else{$("#"+this.svgObject.id+"_TrackSymbol_"+t+"_"+c).remove();var g={id:this.svgObject.id+"_TrackSymbol_"+t+"_"+c};this.gTrackerEle=this.svgRenderer.createGroup(g),this.model.enableCanvasRendering||("polaraxes"==this.model.AreaType?this.gTrackerEle.setAttribute("clip-path","url(#"+this.svgObject.id+"_SeriesGroup_"+t+"_ClipRect)"):(this.gTrackerEle.setAttribute("clip-path","url(#"+this.svgObject.id+"_ClipRectTrack_"+t+")"),this.gTrackerEle.setAttribute("transform","translate("+u.x+","+u.y+")")))}if(0==$("#"+this.svgObject.id+"_CrosshairGroup").length){var f={id:this.svgObject.id+"_CrosshairGroup",visibility:"visible"};this.gTrackball=this.svgRenderer.createGroup(f),this.svgRenderer.append(this.gTrackball,this.svgObject)}this.model.crosshair.marker.visible&&!e.isIndicator&&e._visiblePoints[i].visible&&(h.drawSymbol(t,e,i,a.X,a.Y,this,s,n),a.low&&h.drawSymbol(t,e,i,this.model.requireInvertedAxes?a.low:a.X,this.model.requireInvertedAxes?a.Y:a.low,this,s)),this.gTrackerEle&&$("#"+this.gTrackerEle.id).length<1&&this.svgRenderer.append(this.gTrackerEle,this.gTrackball)}0!=$(this.svgObject).find("#"+this.svgObject.id+"_ClipRectTrack_"+t).length||this.vmlRendering||this.svgRenderer.drawClipPath(p,$("#"+this.svgObject.id+"_CrosshairGroup"))},getClosesPointXY:function(e,t,i,s,a,r){var n,o,l,d,h,c,u,p,m=ej.EjSvgRender.utils._getTransform(i.xAxis,i.yAxis,this.model.requireInvertedAxes),g=this.isTouch(r),f=i._visiblePoints?i._visiblePoints.length:0,_=i.marker?$.extend(!0,{},i.marker.size):{height:6,width:6};if(_.height=g&&_.height<20?_.height+10:_.height,_.width=g&&_.width<20?_.width+10:_.width,a<=m.y+m.height&&m.y<=a&&m.x<=s&&s<=m.x+m.width)for(var v=0;v<f;v++){if(d=i._visiblePoints[v],h=d.location,c=!1,v,u=null,p=null,"boxandwhisker"==i.type&&!this.model.enable3D&&!ej.util.isNullOrUndefined(d.boxPlotLocation))for(var b=0;b<d.boxPlotLocation.length;b++){var x={X:d.boxPlotLocation[b].X,Y:d.boxPlotLocation[b].Y};1==d.boxPlotLocation[b].outlier&&s>x.X+m.x-_.width&&s<x.X+m.x+_.width&&(u=d.x,ej.util.isNullOrUndefined(u)&&(c=d.visible),a>x.Y+m.y-_.height&&a<x.Y+m.y+_.height+10&&(p=d.boxPlotValues.outliers[b],o={X:x.X,Y:x.Y}),ej.util.isNullOrUndefined(o)||(n=d,l=v))}h&&(s>h.X+m.x-_.width/2&&s<h.X+m.x+_.width/2&&(u=d.x,ej.util.isNullOrUndefined(u)&&(c=d.visible)),a>h.Y+m.y-_.height/2&&a<h.Y+m.y+_.height/2&&(p=d.YValues[0]),ej.util.isNullOrUndefined(u)&&!c||ej.util.isNullOrUndefined(p)||(n=d,l=v))}return{point:n,index:l,outlierPosition:o}},getClosestPointX:function(e,t,i,s){var a=[],r=ej.EjSvgRender.utils._getTransform(t.xAxis,t.yAxis,this.model.requireInvertedAxes);this.model.requireInvertedAxes?(i=Math.abs(s-(r.y+r.height)),s=Math.abs(i-r.x)):(i=Math.abs(i-r.x),s=Math.abs(s-(r.y+r.height)));var n=ej.EjSvgRender.utils._getValuebyPoint(i,s,t,this.model.requireInvertedAxes),o=(this.model.requireInvertedAxes,n.PointX),l=[];$.each(t.points,function(t,i){e.push(i.xValue)});var d=this.getClosest(e,o);return ej.util.isNullOrUndefined(d)||("number"==typeof d?$.each(t._visiblePoints,function(e,t){t.xValue==d&&(a.push(t),l.push(e))}):(d=d.getTime(),$.each(t._visiblePoints,function(e,t){("number"==typeof t.xValue?t.xValue==d:t.xValue.getTime()==d)&&(a.push(t),l.push(e))}))),{point:a,index:l}},getClosest:function(e,t){var i=null;this._beforeMin=!1,this._afterMax=!1;var s=Math.min.apply(null,e),a=Math.max.apply(null,e);if(t>=s-.5&&t<=a+.5){var r;for(r=0;r<e.length;r++)(null==i||Math.abs(e[r]-t)<Math.abs(i-t))&&(i=e[r]);this._closest=null}else t>a?(i=e[e.length-1],this._closest=ej.util.isNullOrUndefined(this._closest)?i:i>this._closest?i:this._closest,this._afterMax=!0):(i=e[0],this._closest=ej.util.isNullOrUndefined(this._closest)?i:i<this._closest?i:this._closest,this._beforeMin=!0);return i},createTooltip:function(e,t,i){i||(i=this.model._visibleSeries[e.SeriesIndex]);var s="pieofpie"==i.type?this._getPieOfPiePoint(e.Region.PointIndex,i):"pie"!=i.type&&"doughnut"!=i.type||this.model.enable3D?i._visiblePoints[e.Region.PointIndex]:i._visiblePoints[e.Region.Index],a=this.dragPoint?i.pointCollection[e.Region.PointIndex]:$.extend(!0,{},s),r=i.tooltip.isReversed;if(!1!==a.visible){var n=i.tooltip.format;if("boxandwhisker"==i.type){var o=this.calMousePosition(t);this.mousemoveX=o.X,this.mousemoveY=o.Y;if(!!e.Region.Bounds)if(e.Region.Bounds.Width==i.outlierSettings.size.width){for(var l=0;l<a.boxPlotLocation.length;l++)if(1==a.boxPlotLocation[l].outlier&&a.boxPlotLocation[l].X+i.outlierSettings.size.width/2>this.mousemoveX-i.xAxis.x&&a.boxPlotLocation[l].X-i.outlierSettings.size.width/2<this.mousemoveX-i.xAxis.x&&a.boxPlotLocation[l].Y+i.outlierSettings.size.height/2>this.mousemoveY-i.yAxis.y&&a.boxPlotLocation[l].Y-i.outlierSettings.size.height/2<this.mousemoveY-i.yAxis.y){var d=this.getTooltipFormat(a,i,e.SeriesIndex,e.Region.PointIndex,n,a.boxPlotLocation[l]);a.x=d.data.x,a.y=d.text}}else{var d=this.getTooltipFormat(a,i,e.SeriesIndex,e.Region.PointIndex,n,a.boxPlotLocation[0]);a.x=d.data.x,a.y=d.text}}else{var d=this.getTooltipFormat(a,i,e.SeriesIndex,e.Region.PointIndex,n);a.x=d.data.x,a.y=d.data.y}var h=$.extend({},ej.EjSvgRender.commonChartEventArgs);h.data={currentText:null,seriesIndex:e.SeriesIndex,
pointIndex:e.Region.PointIndex,series:i},this._trigger("toolTipInitialize",h);var c=$(".tooltipDiv"+this._id);if($("#"+this.svgObject.id).find("#"+this.svgObject.id+"_TrackToolTip").attr("visibility","hidden"),$("#"+this.svgObject.id+"_TrackToolTip").attr("visibility","hidden").hide(),0==$(".tooltipDiv"+this._id).length?(this.tooltipFirst=!0,c=$("<div></div>").attr("class","tooltipDiv"+this._id).css({position:"absolute","z-index":"13000",display:"block"}),$(document.body).append(c),$(".tooltipDiv"+this._id).addClass(this.svgObject.id)):($(".tooltipDiv"+this._id).css("display","block"),this.tooltipFirst=!1),null!=i.tooltip.template){var u=$("#"+i.tooltip.template).clone();$(".tooltipDiv"+this._id)[0].innerHTML="",$(u).css("display","block").appendTo(c),i.count=1,a.count=1;var p=this.getSeriesColor(a,e.SeriesIndex,i);p?$(c).css("background-color","array"==jQuery.type(p)?p[0].color:p):$(c).css("background-color",this.model.pointColors[e.Region.PointIndex]);var m={series:i,point:a};ej.util.isNullOrUndefined(h.data.currentText)?$(c).html($(c).html().parseTemplate(m)):$(c).html($(u).html(h.data.currentText))}else $(c).html(h.data.ToolTip);var g=this.model.m_AreaBounds,f=t.pageX+10,_=t.pageY+10,v=$(c).width(),b=$(c).height(),x=document.getElementById(this.svgObject.id).getClientRects()[0];void 0!==f&&null!==f||(f=t.pageX+10),void 0!==_&&null!==_||(_=t.pageY+10);var y=f,w=_;if(f-$(this.svgObject).offset().left+v>g.X+g.Width){var C=f-(v+20);y=C+$(document).scrollLeft()}if(_-$(this.svgObject).offset().top+b>g.Y+g.Height){var C=_+b-(g.Y+g.Height+x.top);w=_-C+$(document).scrollTop()}if(y<0){var S=$("#"+this._id)[0].getBoundingClientRect();t.pageX<S.width/2?y=f:($(c).css("width",f-20),y=0)}$(c).css("left",y),$(c).css("top",w);var T=i.tooltip;T.enableAnimation&&$(c).css({"transition-property":"left,top","-moz-transition-property":"left,top","-webkit-transition-property":"left,top","-o-transition-property":"left,top","transition-duration":T.duration,"-moz-transition-duration":T.duration,"-webkit-transition-duration":this.tooltipFirst?"0s":T.duration,"-o-transition-duration":T.duration});$(c)[0].getBoundingClientRect().top<g.Y+x.top&&$(c).css("top",g.Y+x.top+$(document).scrollTop()),r&&($(c).css("left",f-(v+20)),f-(v+20)<i.xAxis.x&&$(c).css("left",f))}},translate:function(e,t,i,s){var a="horizontal"==e.orientation.toLowerCase()?t/e.width/s:i/e.height/s;e.zoomPosition="horizontal"==e.orientation.toLowerCase()?ej.EjSvgRender.utils._minMax(e.zoomPosition+a,0,1-e.zoomFactor):ej.EjSvgRender.utils._minMax(e.zoomPosition-a,0,1-e.zoomFactor)},highlightFill:function(e,t,i,s,a){var r=t.model.seriesColors,n=t.model.pointColors,o=e.color,l=this.model._visibleSeries.length;a&&"none"==t.model.AreaType&&(1==l?s=a.legendItem.LegendItem.PointIndex:i=a.legendItem.LegendItem.SeriesIndex);var d=a?r[i]:s&&t.model.series[i].points[s]?t.model.series[i].points[s].fill:null,h=""!=o?o:"none"==t.model.AreaType?n[s]:a?r[i]:d||r[i];return"[object Array]"===Object.prototype.toString.call(h)&&(h=h[1].color),h},canvasHighlight:function(e,t,i,s){var a,r,n,o=i.highlightSettings,l=i.data,d=o.color,h=o.opacity,c=o.border.color,u=o.border.width,p=o.pattern.toLowerCase(),m=e.model.legend.visible,g=o.mode,f=i.seriesIndex,_=i.pointIndex,v=i.type.toLowerCase(),b=document.getElementById(e._id+"_canvas").getBoundingClientRect(),x=[],y=[],w=[],C=this.model._visibleSeries.length,S=this.highlightFill(o,e,f,_,s);if("none"!=e.model.AreaType||"none"==e.model.AreaType&&C>1&&("series"==g||s))for(var T=0,R=e.model.chartRegions.length;T<R;T++)"series"!=g&&!s||f!=e.model.chartRegions[T].SeriesIndex||x.push(e.model.chartRegions[T].Region);else for(var T=0,R=e.model.chartRegions.length;T<R;T++)f==e.model.chartRegions[T].SeriesIndex&&_==e.model.chartRegions[T].Region.PointIndex&&x.push(e.model._isPieOfPie?e._getPieOfPiePoint(e.model.chartRegions[T].Region.PointIndex,i):e.model.chartRegions[T].Region[_]);if("cluster"==g&&"none"!=e.model.Areatype&&void 0!==_)for(var k=e.model._visibleSeries[f]._visiblePoints[_].xValue,T=0,R=e.model._visibleSeries.length;T<R;T++)for(var O=0;O<e.model._visibleSeries[T]._visiblePoints.length;O++)k==e.model._visibleSeries[T]._visiblePoints[O].xValue&&(w[w.length]={seriesIndex:T,pointIndex:O});for(var D=0;D<w.length;D++){a=w[D].seriesIndex,r=w[D].pointIndex;for(var I=0;I<e.model.chartRegions.length;I++)a==e.model.chartRegions[I].SeriesIndex&&r==e.model.chartRegions[I].Region.PointIndex&&("cluster"!=g?x.push(e.model.chartRegions[I].Region):x.push(e.model.chartRegions[I]))}var j="none"==e.model.AreaType&&1==C?_:f;if("series"!=g&&!s||0!=$("#"+e._id+"_Selection_series"+j+"_canvas").length||0!=$("#"+e._id+"_Selection_Cluster_point_"+_+"_canvas").length||0!=$("#"+e._id+"_Selection_"+f+"_point_"+_+"_canvas").length)if("cluster"==g&&0==$("#"+e._id+"_Selection_Cluster_point_"+_+"_canvas").length&&"none"!=this.model.AreaType&&0==$("#"+e._id+"_Selection_"+f+"_point_"+_+"_canvas").length&&0==$("#"+e._id+"_Selection_series"+f+"_canvas").length){for(var T=0,R=this.model._visibleSeries.length;T<R;T++){var i=this.model._visibleSeries[T];i.seriesIndex=T,y.push(i._visiblePoints[_])}var L=[],A=[];n=this.createCanvasElement(e._id+"_Highlight__Cluster_point_"+_+"_canvas",e.svgWidth,e.svgHeight,b),this.createRect(e,n);for(var T=0,R=this.model._visibleSeries.length;T<R;T++){L=[],o=e.model._visibleSeries[T].highlightSettings,d=o.color,h=o.opacity,c=o.border.color,u=o.border.width,p=o.pattern.toLowerCase(),S=this.highlightFill(o,e,T,_,j,s),d="none"==p||""==p?S:this.canvasPattern(n,e,t,S,o),A.push(d);for(var E=0,P=x.length;E<P;E++)x[E].SeriesIndex==T&&L.push(x[E].Region);if(-1!=v.indexOf("column")||-1!=v.indexOf("waterfall")||-1!=v.indexOf("bar"))for(var M=0==$("#"+e._id+"_Selection_"+T+"_point_"+_+"_canvas").length,E=0,P=L.length;E<P;E++)this.canvasSeriesRect(L[E],h,c,u,d,M,i);else"bubble"==v?this.canvasBubbleHighlight(o,L,e,T,d,u,h,c):"scatter"==v&&this.canvasScatterHighlight(L,d,u,h,c)}}else("cluster"==g&&"none"==this.model.AreaType||"point"==g&&0==$("#"+e._id+"_Selection_"+f+"_point_"+_+"_canvas").length&&0==$("#"+e._id+"_Selection_series"+f+"_canvas").length&&0==$("#"+e._id+"_Selection_Cluster_point_"+_+"_canvas").length)&&(y[0]=this.model._isPieOfPie?this._getPieOfPiePoint(_,i):i._visiblePoints[_],n=this.createCanvasElement(e._id+"_Highlight_"+f+"_point_"+_+"_canvas",e.svgWidth,e.svgHeight,b),this.createRect(e,n),d="none"==p||""==p?S:this.canvasPattern(n,e,t,S,o),-1!=v.indexOf("column")||-1!=v.indexOf("waterfall")||-1!=v.indexOf("bar")?(x=[],x[0]=l.region.Region,this.canvasSeriesRect(x[0],h,c,u,d,!0,i)):"pie"==v||"doughnut"==v||"pieofpie"==v?(x=[],x[0]=l.pointData[0],this.canvasHighlightCircle(e,o,_,h,c,u,d,x,v,n)):"pyramid"==v||"funnel"==v?this.canvasHighlightPyramid(e,x[0],o,n,h,c,u,d,v):"bubble"==v?(x=[],x[0]=l.region.Region,this.canvasBubbleHighlight(o,x,e,f,d,u,h,c)):"scatter"==v&&(x=[],x[0]=l.region.Region,this.canvasScatterHighlight(x,d,u,h,c)));else if(y=i._visiblePoints,n=this.createCanvasElement(e._id+"_Highlight_series"+f+"_canvas",e.svgWidth,e.svgHeight,b),d="none"==p||""==p?S:this.canvasPattern(n,e,t,S,o),this.createRect(e,n),-1!=v.indexOf("column")||-1!=v.indexOf("waterfall")||-1!=v.indexOf("bar"))for(T=0;T<x.length;T++){var M=0==$("#"+e._id+"_Selection_"+f+"_point_"+T+"_canvas").length;this.canvasSeriesRect(x[T],h,c,u,d,M,i)}else"pie"==v||"doughnut"==v||"pieofpie"==v?(x=1==C?x:x[0],this.canvasHighlightCircle(e,o,_,h,c,u,d,x,v,n)):"pyramid"==v||"funnel"==v?this.canvasHighlightPyramid(e,x[0],o,n,h,c,u,d,v):"bubble"==v?this.canvasBubbleHighlight(o,x,e,f,d,u,h,c):"scatter"==v&&this.canvasScatterHighlight(x,d,u,h,c);if(m&&0==$("#"+e._id+"_Selection_Legend"+j+"_canvas").length)if("cluster"!=g||s||"none"==this.model.AreaType)this.canvasHighlightLegend(e,i,o,"Highlight",b,d);else for(var F,N,T=0,R=w.length;T<R;T++)F=w[T].seriesIndex,N=this.model._visibleSeries[F],this.canvasHighlightLegend(e,N,o,"Highlight",b,A[F]);"visible"===i.visibility&&1==i.marker.visible&&"none"!=this.model.AreaType&&this.canvasHighlightMarker(e,i,y,o,n,t,A)},canvasSeriesRect:function(e,t,i,s,a,r,n){var o={opacity:t,stroke:i,"stroke-width":s,fill:a},l=n.cornerRadius;if(e&&(o.x=e.Bounds.X,o.y=e.Bounds.Y,o.width=e.Bounds.Width,o.height=e.Bounds.Height,r))if("object"!=typeof l&&l>0||l.topLeft>0||l.bottomLeft>0||l.topRight>0||l.bottomRight>0){var d=ej.EjSvgRender.utils._calculateroundedCorner(l,o);o.d=d,ej.EjCanvasRender.prototype.drawPath(o,void 0)}else this.drawRect(o,void 0)},canvasSelection:function(e,t,i,s,a,r,n,o){i.seriesIndex=a,i.pointIndex=r;var l,d,h,c,u,p=this.model._visibleSeries,m=o.color,g=o.opacity,f=o.border.color,_=o.border.width,v=o.pattern.toLowerCase(),b=e.model.legend.visible,x=o.mode,y=i.type.toLowerCase(),w=document.getElementById(e._id+"_canvas").getBoundingClientRect(),C=[],S=[],T=this.model._visibleSeries.length,R=e.model.chartRegions,k=this.model.clusterPoints,O="none"==e.model.AreaType&&1==T?r:a,D=this.highlightFill(o,e,a,r,s,n);if(l=R.length,"none"!=e.model.AreaType||"none"==e.model.AreaType&&T>1)for(var I=0;I<l;I++)(("series"==x||s)&&a==R[I].SeriesIndex||("point"==x||s)&&a==R[I].SeriesIndex&&r==R[I].Region.PointIndex)&&("none"!=e.model.AreaType||"point"!=x||s?C.push(R[I].Region):C.push(R[I].Region[r]));else if(l>0){if(this.model._isPieOfPie){if(s)for(var j=0;j<i.pieCollections.length;j++)for(var L=i.pieCollections[j],A=0;A<L.length;A++)if(L[A].actualIndex==s.legendItem.LegendItem.PointIndex){var E=j;break}var P=i.data?i.data.pointData[0].PieSeriesIndex:E,M=R[P]}else var M=R[0];d=M.Region.length;for(var I=0;I<d;I++)r==M.Region[I].PointIndex&&C.push(M.Region[I])}if(("series"==x||s)&&("none"!=this.model.AreaType||"none"==this.model.AreaType&&T>1))if(S=i._visiblePoints,u=this.createCanvasElement(e._id+"_Selection_series"+O+"_canvas",e.svgWidth,e.svgHeight,w),m="none"==v||""==v?D:this.canvasPattern(u,e,t,D,o),this.createRect(e,u),-1!=y.indexOf("column")||-1!=y.indexOf("waterfall")||-1!=y.indexOf("bar"))for(I=0;I<C.length;I++)this.canvasSeriesRect(C[I],g,f,_,m,!0,i);else"pie"==y||"doughnut"==y||"pieofpie"==y?this.canvasHighlightCircle(e,o,r,g,f,_,m,C[0],y,u):"bubble"==y?this.canvasBubbleHighlight(o,C,e,a,m,_,g,f):"scatter"==y&&this.canvasScatterHighlight(C,m,_,g,f);else if("cluster"==x&&"none"!=this.model.AreaType&&0==$("#"+e._id+"_Selection_Cluster_point_"+r+"_canvas").length){for(var F,N,z,V,B=k.length,H=0;H<B;H++)F=k[H].seriesIndex,N=k[H].pointIndex,z=$.grep(R,function(e){return e.SeriesIndex==F&&e.Region.PointIndex==N}),V=z.length,V>0?(C.push(z[0]),S.push(p[z[0].SeriesIndex]._visiblePoints[r])):S.push(p[H]._visiblePoints[r]);this.selectedPoint=r;var Y=[],U=[];for(u=this.createCanvasElement(e._id+"_Selection_Cluster_point_"+r+"_canvas",e.svgWidth,e.svgHeight,w),this.createRect(e,u),I=0,h=p.length;I<h;I++){Y=[],c=p[I].selectionSettings,m=c.color,g=c.opacity,f=c.border.color,_=c.border.width,v=c.pattern.toLowerCase(),D=this.highlightFill(c,e,I,r,s),m="none"==v||""==v?D:this.canvasPattern(u,e,t,D,c),U.push(m);for(var W=0,X=C.length;W<X;W++)C[W].SeriesIndex==I&&Y.push(C[W].Region);if(-1!=y.indexOf("column")||-1!=y.indexOf("waterfall")||-1!=y.indexOf("bar"))for(var G=0,q=Y.length;G<q;G++)this.canvasSeriesRect(Y[G],g,f,_,m,!0,i);else"bubble"==y?this.canvasBubbleHighlight(c,Y,e,I,m,_,g,f):"scatter"==y&&this.canvasScatterHighlight(Y,m,_,g,f);!s&&"none"!=this.model.AreaType&&b&&(i=p[I],i.seriesIndex=I,this.canvasHighlightLegend(e,i,o,"Selection_Cluster",w,m))}}else("point"==x&&0==$("#"+e._id+"_Selection_"+a+"_point_"+r+"_canvas").length||"none"==this.model.AreaType)&&(this.selectedPoint=r,S[0]=this.model._isPieOfPie?this._getPieOfPiePoint(r,i):i._visiblePoints[r],u=this.createCanvasElement(e._id+"_Selection_series"+a+"_point_"+r+"_canvas",e.svgWidth,e.svgHeight,w),this.createRect(e,u),m="none"==v||""==v?D:this.canvasPattern(u,e,t,D,o),-1!=y.indexOf("column")||-1!=y.indexOf("waterfall")||-1!=y.indexOf("bar")?this.canvasSeriesRect(C[0],g,f,_,m,!0,i):"pie"==y||"doughnut"==y||"pieofpie"==y?this.canvasHighlightCircle(e,o,r,g,f,_,m,C,y,u):"pyramid"==y||"funnel"==y?this.canvasHighlightPyramid(e,C[0],o,u,g,f,_,m,y):"bubble"==y?this.canvasBubbleHighlight(o,C,e,a,m,_,g,f):"scatter"==y&&this.canvasScatterHighlight(C,m,_,g,f));b&&("cluster"!=x||s)&&this.canvasHighlightLegend(e,i,o,"Selection",w,m),1==i.marker.visible&&"none"!=this.model.AreaType&&this.canvasHighlightMarker(e,i,S,o,u,t,U)},createRect:function(e,t){"none"!=e.model.AreaType&&(t.lineWidth=0,t.strokeStyle="transparent",t.rect(e.model.m_AreaBounds.X,e.model.m_AreaBounds.Y,e.model.m_AreaBounds.Width,e.model.m_AreaBounds.Height),t.clip(),t.stroke(),t.save())},canvasHighlightPyramid:function(e,t,i,s,a,r,n,o,l){var d=(""!=i.color?i.color:e.model.pointColors[t.PointIndex],e.model.title.text?ej.EjSvgRender.utils._measureText(e.model.title.text,$(this.svgObject).width()-e.model.margin.left-e.model.margin.right,e.model.title.font):0),h=e.pyrX=("left"===e.model.legend.position.toLowerCase()?e.model.LegendViewerBounds.Width:0)+e.model.elementSpacing+e.model.margin.left,c=e.pyrY=("top"===e.model.legend.position.toLowerCase()?e.model.LegendViewerBounds.Height:0)+(e.model.title.text?e.model._titleLocation.Y+d.height:e.model.margin.top+e.model.elementSpacing),u={opacity:a,stroke:r,"stroke-width":n,fill:o,type:l,d:"M "+(h+t.Line1.x)+" "+(c+t.Line1.y)+" L "+(h+t.Line2.x)+" "+(c+t.Line2.y)+" L "+(h+t.Line3.x)+" "+(c+t.Line3.y)+" L "+(h+t.Line4.x)+" "+(c+t.Line4.y)+" z"};"funnel"==l&&(u.d="M "+(h+t.Line1.x)+" "+(c+t.Line1.y)+" L "+(h+t.Line2.x)+" "+(c+t.Line2.y)+" L "+(h+t.Line3.x)+" "+(c+t.Line3.y)+" L "+(h+t.Line4.x)+" "+(c+t.Line4.y)+" L "+(h+t.Line5.x)+" "+(c+t.Line5.y)+" L "+(h+t.Line6.x)+" "+(c+t.Line6.y)+" z"),ej.EjCanvasRender.prototype.drawPath(u,s)},canvasScatterHighlight:function(e,t,i,s,a){for(var r,n={},o={},l=0;l<e.length;l++)r={startX:e[l].Bounds.X+e[l].Bounds.Height/2,startY:e[l].Bounds.Y+e[l].Bounds.Width/2},o.height=e[l].Bounds.Height,o.width=e[l].Bounds.Width,n={},n.ShapeSize=o,n.cx=r.startX,n.cy=r.startY,n.Style={},n.Style.BorderColor=a,n.Style.Color=t,n.Style.Opacity=s,n.Style.BorderWidth=i,ej.EjSvgRender.chartSymbol._drawCircle(r,n,this,void 0)},canvasBubbleHighlight:function(e,t,i,s,a,r,n,o){for(var l,d={},h=0;h<t.length;h++)l=t[h].Bounds.Height/2,""!=e.color?e.color:i.model.seriesColors[s],d={cx:t[h].Bounds.X-this.model.series[s].xAxis.x+l+this.canvasX,cy:t[h].Bounds.Y-this.model.series[s].yAxis.y+l+this.canvasY,r:l,fill:a,"stroke-width":r,opacity:n,stroke:o},ej.EjCanvasRender.prototype.drawCircle(d,void 0)},canvasHighlightCircle:function(e,t,i,s,a,r,n,o,l,d){for(var h=0;h<o.length;h++){var c=(""!=t.color?t.color:"series"==t.mode&&e.model._visibleSeries.length>1?e.model.pointColors[h]:e.model.pointColors[i],{opacity:s,stroke:a,lineWidth:r,color:n,x:o[h].StartX,y:o[h].StartY,radius:e.model._isPieOfPie?e.model.circularRadius[o[h].PieSeriesIndex]:e.model.circularRadius[o[h].SeriesIndex],innerRadius:e.model.innerRadius[o[h].SeriesIndex],startAngle:o[h].StartAngle,endAngle:o[h].EndAngle,type:l});this.highlightSegment(d,c)}},canvasHighlightMarker:function(e,t,i,s,a,r,n){var o,l=s,d=l.pattern.toLowerCase(),h=t.type.toLowerCase(),c={},u=""!=l.color?l.color:e.model.seriesColors[t.seriesIndex];o="none"==d||""==d?u:this.canvasPattern(a,e,r,u,l),c.Style={},c.Style.BorderColor=l.border.color,c.Style.Opacity=l.opacity,c.Style.BorderWidth=l.border.width;for(var p,m,g,f,_=0;_<i.length;_++)p=i[_].symbolLocation,(p=-1!=h.indexOf("line")||-1!=h.indexOf("area")?i[_].location:i[_].symbolLocation)&&(m="cartesianaxes"==this.model.AreaType?{startX:p.X+this.canvasX,startY:p.Y+this.canvasY}:{startX:p.X,startY:p.Y},g=t.marker,$.each(e.model.symbolShape,function(e){g.shape.toLowerCase()==e.toLowerCase()&&(f=e)}),c.ShapeSize=g.size,c.r=Math.sqrt(g.size.height*g.size.height+g.size.width*g.size.width)/2,c.cx=m.startX,c.cy=m.startY,c.Style.Color=n?n[_]:o,ej.EjSvgRender.chartSymbol["_draw"+f](m,c,e,a))},canvasHighlightLegend:function(e,t,i,s,a,r){var n,o,l=this.model._visibleSeries.length,d="none"==e.model.AreaType&&1==l?t.pointIndex:t.seriesIndex,h=e._id+"_"+s+"_Legend"+d+"_canvas";if(0==$("#"+h).length&&d<t.points.length){n=this.createCanvasElement(e._id+"_"+s+"_Legend"+d+"_canvas",e.svgWidth,e.svgHeight,a),o="none"!=e.model.AreaType||"none"==e.model.AreaType&&l>1?e.model.legendRegion[t.seriesIndex]:e.model.legendRegion[t.pointIndex];var c={startX:o.Bounds.LegendBound.X+o.Location.startX,startY:o.Bounds.LegendBound.Y+o.Location.startY},u={svgRenderer:e.svgRenderer,svgObject:e.svgObject},p={SeriesIndex:d,Style:{Color:r,Opacity:i.opacity,Visibility:!0,BorderWidth:0,BorderColor:r},context:!0,ShapeSize:o.Style.ShapeSize};"seriestype"==o.SymbolShape.toLowerCase()?(e.legendItem=o.LegendItem,ej.EjSvgRender.chartSymbol["_draw"+o.SymbolShape](c,p,e)):ej.EjSvgRender.chartSymbol["_draw"+o.SymbolShape](c,p,u,n)}},createCanvasElement:function(e,t,i,s){var a,r,n=document.createElement("canvas");jQuery(this.element).attr("id");n.setAttribute("id",e),n.height=i,n.width=t,n.style["touch-action"]&&(n.style["touch-action"]="none"),n.style["-ms-touch-action"]&&(n.style["-ms-touch-action"]="none"),this.svgRenderer.append(n,this.element);var o=document.getElementById(e);return o.style.left=s.left+$(document).scrollLeft()+"px",o.style.top=s.top+$(document).scrollTop()+"px",o.style.position="absolute",a=$("#"+this._id+"_canvas").offset(),r=$(o).offset(),a.left<r.left&&(o.style.left=s.left-Math.abs(a.left-r.left)+$(document).scrollLeft()+"px"),a.top<r.top&&(o.style.top=s.top-Math.abs(a.top-r.top)+$(document).scrollTop()+"px"),n.getContext("2d")},highlightSegment:function(e,t){e.save(),e.beginPath(),"pie"==t.type||"pieofpie"==t.type?(e.moveTo(t.x,t.y),e.arc(t.x,t.y,t.radius,t.startAngle-1.57,t.endAngle-1.57,!1)):(e.arc(t.x,t.y,t.radius,t.startAngle-1.57,t.endAngle-1.57,!1),e.arc(t.x,t.y,t.innerRadius,t.endAngle-1.57,t.startAngle-1.57,!0)),e.fillStyle=t.color,e.globalAlpha=t.opacity,e.fill(),e.lineWidth=t.lineWidth,e.strokeStyle=t.stroke,e.clip(),e.stroke(),e.closePath(),e.restore()},canvasPattern:function(e,t,i,s,a){var r=a,n=(r.name,r.pattern.toLowerCase()),o=s,l=r.opacity,d=(r.border.color,r.border.width,document.createElement("canvas")),h=d.getContext("2d"),c=[];switch(n){case"chessboard":c[0]={x:0,y:0,width:10,height:10,fill:"white",stroke:"white",opacity:l,name:"rect"},c[1]={x:0,y:0,width:5,height:5,fill:o,opacity:l,name:"rect"},c[2]={x:5,y:5,width:5,height:5,fill:o,opacity:l,name:"rect"},d.width=10,d.height=10,this.loadPattern(t,c,"",h);break;case"pacman":c[0]={name:"rect",x:0,y:0,width:18,height:18,transform:"translate(0,0)",fill:"white",opacity:l},c[1]={name:"path",d:"M 9.081 9.194 L 14.887 6.114 C 14.075000000000001 4.618 12.484 3.0620000000000007 10.596 3.0620000000000007 L 8.835 3.0620000000000007 C 6.138 3.063 3 6.151 3 8.723 L 3 10.402000000000001 C 3 12.974 6.138 16.063000000000002 8.835 16.063000000000002 L 10.596 16.063000000000002 C 12.681000000000001 16.063000000000002 14.431000000000001 14.303000000000003 15.131 12.549000000000003 L 9.081 9.194 z","stroke-width":1,stroke:o,fill:o},d.width=18,d.height=18,this.loadPattern(t,c,"",h);break;case"crosshatch":c[0]={x:0,y:0,width:8,height:8,fill:"white",stroke:s,opacity:l,name:"rect"},c[1]={d:"M 0 0 L 8 8 Z","stroke-width":1,stroke:o,name:"path"},c[2]={d:"M 8 0 L 0 8 Z","stroke-width":1,stroke:o,name:"path"},d.width=8,d.height=8,this.loadPattern(t,c,"",h);break;case"dots":c[0]={x:0,y:0,width:7,height:7,transform:"translate(0,0)",fill:"white",opacity:l,name:"rect"},c[1]={cx:3,cy:3,r:2,"stroke-width":1,fill:o,name:"circle"},d.width=7,d.height=7,this.loadPattern(t,c,"",h);break;case"diagonalforward":c[0]={x:0,y:0,width:6,height:6,fill:"white",stroke:s,opacity:l,name:"rect"},c[1]={d:"M 3 -3 L 9 3 M 6 6 L 0 0 M 3 9 L -3 3","stroke-width":2,stroke:o,name:"path"},d.width=6,d.height=6,this.loadPattern(t,c,"",h);break;case"diagonalbackward":c[0]={x:0,y:0,width:6,height:6,"stroke-width":2,fill:"white",stroke:s,opacity:l,name:"rect"},c[1]={d:"M 3 -3 L -3 3 M 0 6 L 6 0 M 9 3 L 3 9","stroke-width":2,stroke:o,name:"path"},d.width=6,d.height=6,this.loadPattern(t,c,"",h);break;case"grid":c[0]={name:"rect",x:0,y:0,width:6,height:6,transform:"translate(0,0)",fill:"white",opacity:l},c[1]={name:"path",d:"M 1 3.5 L 11 3.5 M 0 3.5 L 11 3.5 M 0 7.5 L 11 7.5 M 0 11.5 L 11 11.5 M 5.5 0 L 5.5 12 M 11.5 0 L 11.5 12 Z","stroke-width":1,stroke:o},d.width=6,d.height=6,this.loadPattern(t,c,"",h);break;case"turquoise":c[0]={name:"rect",x:0,y:0,width:17,height:17,transform:"translate(0,0)",fill:"white",opacity:l},c[1]={name:"path",d:"M 2.697 0.5319999999999996 C 3.8695005238907747 0.5319999999999996 4.82 1.4771268931071944 4.82 2.643 C 4.82 3.808873106892805 3.8695005238907747 4.754 2.697 4.754 C 1.5244994761092252 4.754 0.5739999999999998 3.808873106892805 0.5739999999999998 2.643 C 0.5739999999999998 1.4771268931071944 1.5244994761092252 0.5319999999999996 2.697 0.5319999999999996 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},c[2]={name:"path",d:"M 13.928 0.5319999999999996 C 15.100500523890776 0.5319999999999996 16.051000000000002 1.4771268931071944 16.051000000000002 2.643 C 16.051000000000002 3.808873106892805 15.100500523890776 4.754 13.928 4.754 C 12.755499476109225 4.754 11.805 3.808873106892805 11.805 2.643 C 11.805 1.4771268931071944 12.755499476109225 0.5319999999999996 13.928 0.5319999999999996 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},c[3]={name:"path",d:"M 8.313 0.5319999999999996 C 9.485500523890776 0.5319999999999996 10.436 1.4771268931071944 10.436 2.643 C 10.436 3.808873106892805 9.485500523890776 4.754 8.313 4.754 C 7.140499476109226 4.754 6.19 3.808873106892805 6.19 2.643 C 6.19 1.4771268931071944 7.140499476109226 0.5319999999999996 8.313 0.5319999999999996 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},c[4]={name:"path",d:"M 13.928 6.16 C 15.100500523890776 6.16 16.051000000000002 7.105126893107196 16.051000000000002 8.271 C 16.051000000000002 9.436873106892806 15.100500523890776 10.382000000000001 13.928 10.382000000000001 C 12.755499476109225 10.382000000000001 11.805 9.436873106892806 11.805 8.271 C 11.805 7.105126893107196 12.755499476109225 6.16 13.928 6.16 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},c[5]={name:"path",d:"M 8.313 6.16 C 9.485500523890776 6.16 10.436 7.105126893107196 10.436 8.271 C 10.436 9.436873106892806 9.485500523890776 10.382000000000001 8.313 10.382000000000001 C 7.140499476109226 10.382000000000001 6.19 9.436873106892806 6.19 8.271 C 6.19 7.105126893107196 7.140499476109226 6.16 8.313 6.16 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},c[6]={name:"path",d:"M 13.928 11.787999999999998 C 15.100500523890776 11.787999999999998 16.051000000000002 12.733126893107194 16.051000000000002 13.899 C 16.051000000000002 15.064873106892804 15.100500523890776 16.009999999999998 13.928 16.009999999999998 C 12.755499476109225 16.009999999999998 11.805 15.064873106892804 11.805 13.899 C 11.805 12.733126893107194 12.755499476109225 11.787999999999998 13.928 11.787999999999998 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},c[7]={name:"path",d:"M 8.313 11.787999999999998 C 9.485500523890776 11.787999999999998 10.436 12.733126893107194 10.436 13.899 C 10.436 15.064873106892804 9.485500523890776 16.009999999999998 8.313 16.009999999999998 C 7.140499476109226 16.009999999999998 6.19 15.064873106892804 6.19 13.899 C 6.19 12.733126893107194 7.140499476109226 11.787999999999998 8.313 11.787999999999998 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},d.width=17,d.height=17,this.loadPattern(t,c,"",h);break;case"star":c[0]={name:"rect",x:0,y:0,width:21,height:21,transform:"translate(0,0)",fill:"white",opacity:l},c[1]={name:"path",d:"M 15.913 18.59 L 10.762 12.842 L 5.613 18.75 L 8.291 11.422 L 0.325 9.91 L 8.154 8.33 L 5.337 0.91 L 10.488 6.658 L 15.637 0.75 L 12.959 8.078 L 20.925 9.59 L 13.096 11.17 z","stroke-width":1,stroke:o,fill:o},d.width=21,d.height=21,this.loadPattern(t,c,"",h);break;case"triangle":c[0]={name:"rect",x:0,y:0,width:10,height:10,fill:"white",opacity:l},c[1]={name:"path",d:"M 4.987 0 L 7.48 4.847 L 9.974 9.694 L 4.987 9.694 L 0 9.694 L 2.493 4.847 z","stroke-width":1,stroke:o,fill:o},d.width=10,d.height=10,this.loadPattern(t,c,"",h);break;case"circle":c[0]={name:"rect",x:0,y:0,width:9,height:9,transform:"translate(0,0)",fill:"white",opacity:l},c[1]={name:"circle",cx:5.125,cy:3.875,r:3.625,"stroke-width":1,fill:o},d.width=9,d.height=9,this.loadPattern(t,c,"",h);break;case"tile":c[0]={name:"rect",x:0,y:0,width:18,height:18,transform:"translate(0,0)",fill:"white",opacity:l},c[1]={name:"path",d:"M 0 9 L 0 0 L 9 0 z","stroke-width":1,stroke:o,fill:o},c[2]={name:"path",d:"M 9 9 L 9 0 L 18 0 z","stroke-width":1,stroke:o,fill:o},c[3]={name:"path",d:"M 0 18 L 0 9 L 9 9 z","stroke-width":1,stroke:o,fill:o},c[4]={name:"path",d:"M 9 18 L 9 9 L 18 9 z","stroke-width":1,stroke:o,fill:o},d.width=18,d.height=18,this.loadPattern(t,c,"",h);break;case"horizontaldash":c[0]={name:"rect",x:0,y:0,width:12,height:12,transform:"translate(0,0)",fill:"white",opacity:l},c[1]={name:"path",d:"M 0 1.5 L 10 1.5 M 0 5.5 L 10 5.5 M 0 9.5 L 10 9.5 z","stroke-width":1,stroke:o,fill:o},d.width=12,d.height=12,this.loadPattern(t,c,"",h);break;case"verticaldash":c[0]={name:"rect",x:0,y:0,width:12,height:12,transform:"translate(0,0)",fill:"white",opacity:l},c[1]={name:"path",d:"M 1.5 0 L 1.5 10 M 5.5 0 L 5.5 10 M 9.5 0 L 9.5 10 z","stroke-width":1,stroke:o,fill:o},d.width=12,d.height=12,this.loadPattern(t,c,"",h);break;case"rectangle":c[0]={x:0,y:0,name:"rect",width:12,height:12,fill:"white",opacity:l},c[1]={name:"rect",x:1,y:2,width:4,height:9,fill:o,opacity:l},c[2]={name:"rect",x:7,y:2,width:4,height:9,fill:o,opacity:l},d.width=12,d.height=12,this.loadPattern(t,c,"",h);break;case"box":c[0]={x:0,y:0,name:"rect",width:13,height:13,fill:"white",opacity:l},c[1]={name:"rect",x:1.5,y:1.5,width:10,height:9,fill:o,opacity:l},d.width=10,d.height=10,this.loadPattern(t,c,"",h);break;case"horizontalstripe":c[0]={name:"rect",x:0,y:0,width:10,height:12,transform:"translate(0,0)",fill:"white",opacity:l},c[1]={name:"path",d:"M 0 0.5 L 10 0.5 M 0 4.5 L 10 4.5 M 0 8.5 L 10 8.5 z","stroke-width":1,stroke:o,fill:o},d.width=10,d.height=12,this.loadPattern(t,c,"",h);break;case"verticalstripe":c[0]={name:"rect",x:0,y:0,width:12,height:10,transform:"translate(0,0)",fill:"white",opacity:l},c[1]={name:"path",d:"M 0.5 0 L 0.5 10 M 4.5 0 L 4.5 10 M 8.5 0 L 8.5 10 z","stroke-width":1,stroke:o,fill:o},d.width=12,d.height=10,this.loadPattern(t,c,"",h);break;case"bubble":c[0]={name:"rect",x:0,y:0,width:20,height:20,transform:"translate(0,0)",fill:"#ffffff",opacity:l},c[1]={name:"circle",cx:5.217,cy:11.325,r:3.429,"stroke-width":1,fill:"#D0A6D1"},c[2]={name:"circle",cx:13.328,cy:6.24,r:4.884,"stroke-width":1,fill:o},c[3]={name:"circle",cx:13.277,cy:14.66,r:3.018,"stroke-width":1,fill:"#D0A6D1"},d.width=20,d.height=20,this.loadPattern(t,c,"",h);break;case"custom":d=document.getElementById(r.customPattern)}return e.createPattern(d,"repeat")},foundClasses:function(e){var t=[];return $("[id*="+e+"]").each(function(){var e=$(this).attr("class")?$(this).attr("class"):"";e.indexOf("Selection")>=0&&t.push(e)}),t},selection:function(e,t,i,s,a,r,n,o,l,d){var h,c=this.model.clusterPoints,u=(c&&c.length,this.model._visibleSeries),p=u.length,m="none"==this.model.AreaType&&1==p?n:r,g=i.selectionSettings,f=(this.model._visibleSeries[r].selectionSettings.type.toLowerCase(),"series"+r),_=!1,v=($("#"+l).attr("name"),g.pattern.toLowerCase()),b=g.mode;if(o&&(h=o.indexOf(this.svgObject.id+"_SeriesGroup_")>=0||o.indexOf(this.svgObject.id+"_Chart3D")>=0),("none"!=this.model.AreaType||"none"==this.model.AreaType&&"series"==b&&p>1)&&$("style").each(function(){$(this).html().indexOf("."+e._id+"SelectionStyle"+f)>-1&&(_=!0)}),!e.vmlRendering&&this.model.enable3D)"series"!=b&&!a||"none"==this.model.AreaType&&("none"!=this.model.AreaType||1==p)?"cluster"==b&&"none"!=e.model.AreaType?this.highlightCluster(e,r,n,"Selection",f,g,t,d):"none"==this.model.AreaType?(this.highlightPoint(e,r,n,"Selection",f+m,g,t,d),$("#"+this.svgObject.id+"_LegendItemShape"+m).attr("class","Selection"+f+m+"Style"+f+m+"1")):(this.highlightPoint(e,r,n,"Selection",f,g,t,d),$("#"+this.svgObject.id+"_LegendItemShape"+m).attr("class","Selection"+f+"Style"+f+"1")):(this.highlightSeries(e,r,n,"Selection",f,g,t,a,d),$("#"+this.svgObject.id+"_LegendItemShape"+m).attr("class","Selection"+f+"Style"+f+"1"));else{if("cluster"!=b||a||"none"==e.model.AreaType){var x={};x.name="2D",x.index="none"==this.model.AreaType?m:r,x.api="Selection",x.color=""!=g.color?g.color:a?"none"==this.model.AreaType?this.model.pointColors[m]:this.model.seriesColors[m]:"none"!=$("#"+l).attr("fill")?$("#"+l).attr("fill"):$("#"+l).attr("stroke"),"[object Array]"===Object.prototype.toString.call(x.color)&&(x.color=x.color[1].color);var y="none"==v||e.vmlRendering||""==v?g.color:this.pattern(e,t,x,g),w=g.opacity,C=g.border.color,S=g.border.width;_||("none"==this.model.AreaType&&(("series"==b||a)&&1==p||"series"!=b&&!a)?($("style").each(function(){$(this).html().indexOf(".SelectionStyle"+f+"Point"+m)>-1&&(_=!0)}),_||(this.createStyle(e,e._id+"Selection",f+"Point"+m,w,y,C,S),this.createStyle(e,e._id+"SelectionLegend",f+"Point"+m,w,y,"transparent",0))):("none"==this.model.AreaType&&p>1||"none"!=this.model.AreaType)&&(this.createStyle(e,e._id+"Selection",f,w,y,C,S),this.createStyle(e,e._id+"SelectionLegend",f,w,y,"transparent",0)))}if(("series"==b||a)&&("none"==e.model.AreaType&&p>1||"none"!=e.model.AreaType)){if(!h)for(var T=$("#"+o).childNodes?$("#"+o).childNodes:[],R=0;R<T.length;R++)$("#"+T[R].id).attr("class",e._id+"SelectionStyle");$("[id*="+this.svgObject.id+"_Series"+m+"]").each(function(){if(this.parentNode.id==e.svgObject.id+"_SeriesGroup_"+m||this.parentNode.id==e.svgObject.id+"_symbolGroup_"+m){var t=$(this).attr("name")?e._id+"SelectionPathStyle"+f:e._id+"SelectionStyle"+f;$(this).attr("class",t)}}),$("#"+this.svgObject.id+"_LegendItemShape"+m).attr("class",e._id+"SelectionLegendStyle"+f),s&&$("#"+o).remove()}else if("cluster"!=b||"none"==e.model.AreaType||ej.util.isNullOrUndefined(l)){if($("#"+l).attr("name")||l==e.svgObject.id+"_Series"+m||"none"==e.model.AreaType)$("#"+l).attr("class",e._id+"SelectionStyle"+f+"Point"+m),$("#"+this.svgObject.id+"_LegendItemShape"+m).attr("class",e._id+"SelectionLegendStyle"+f+"Point"+m),s&&$("#"+o).remove();else{if($("#"+l).attr("class",e._id+"SelectionStyle"+f),"cylinder"==this.model.commonSeriesOptions.columnFacet||"cylinder"==i.columnFacet)for(R=0;R<2;R++)$("#"+l.replace(/2$/,R)).attr("class",e._id+"SelectionStyle"+f);$("#"+this.svgObject.id+"_LegendItemShape"+m).attr("class",e._id+"SelectionLegendStyle"+f),$("#"+l+"_symbol").attr("class",e._id+"SelectionStyle"+f),s&&($("#"+l+"_symbol").attr("class",e._id+"SelectionStyle"+f),$("#"+o).remove())}var k=$("#"+l).attr("name");void 0!=k&&("candle"==k||k.indexOf("hilo")>=0)&&($("[id$="+l+"]").attr("class",e._id+"SelectionStyle"+f),$("#"+this.svgObject.id+"_LegendItemShape"+m).attr("class",e._id+"SelectionLegendStyle"+f))}else{var O,x,w,C,y,S;O=this.svgObject.id+"_Series";var c=e.model.clusterPoints;if(m=l.match(/(\d+)/g),n=parseInt(m[m.length-1]),l.indexOf("SeriesText")>=0){var D=this.GetSeriesPoint(t);n=D.region.Region.PointIndex}for(var I,j,L=0;L<c.length;L++){j=c[L].seriesIndex,f="ClusterSeries"+j,x={},x.index=j,x.name="2D",x.api="Selection"+f,g=u[j].selectionSettings,x.color=""!=g.color?g.color:this.model.seriesColors[j],"[object Array]"===Object.prototype.toString.call(x.color)&&(x.color=x.color[1].color),w=g.opacity;var C=g.border.color,S=g.border.width,y="none"==v||e.vmlRendering||""==v?x.color:this.pattern(e,t,x,g);$("style").each(function(){$(this).html().indexOf("."+e._id+"SelectionStyle"+f)>-1&&(I=!0)}),I||(this.createStyle(e,e._id+"Selection",f,w,y,C,S),this.createStyle(e,e._id+"SelectionLegend",f,w,y,"transparent",0));var A=$("#"+O+c[L].seriesIndex+"_Point"+c[L].pointIndex).attr("name")?e._id+"SelectionPathStyle"+f:e._id+"SelectionStyle"+f
;$("#"+O+c[L].seriesIndex+"_Point"+c[L].pointIndex).attr("class",A),$("#"+O+c[L].seriesIndex+"_Point"+c[L].pointIndex+"_symbol").attr("class",A),"hidden"!=e.model._visibleSeries[j].visibility&&$("#"+this.svgObject.id+"_LegendItemShape"+j).not("[class*='Highlight']").attr("class",e._id+"SelectionLegendStyle"+f);var k=$("#"+l).attr("name");void 0!=k&&("candle"==k||k.indexOf("hilo")>=0)&&$("[id$="+O+c[L].seriesIndex+"_Point"+c[L].pointIndex+"]").attr("class","HighlightStyle"+f)}s&&($("#"+this.svgObject.id+"_Series"+j+"_Point"+n).attr("class",e._id+"SelectionStyle"+f),$("#"+this.svgObject.id+"_Series"+j+"_Point"+n+"_symbol").attr("class",e._id+"SelectionStyle"+f),$("#"+o).remove())}}},removeSelection:function(e,t,i,s,a,r,n){var o,l,d=i.length,h=this.model.clusterPoints,c=h?h.length:0;if(("series"==s||r)&&("none"!=this.model.AreaType||"none"==this.model.AreaType&&d>1))for(var u=0;u<d;u++)l=i[u].selectionSettings,"point"!=l.mode&&"single"==l.type.toLowerCase()||r&&"single"==l.type.toLowerCase()?($(this.svgObject).find("[id*="+this.svgObject.id+"_SeriesGroup_"+u+"],[id*="+this.svgObject.id+"_symbolGroup_"+u+"],[id*=_Region_Series_"+u+"_]").each(function(){$(this).find("*").attr("class",""),$(this).attr("class","")}),$("#"+this._id+"_Selection_Legend"+u+"_canvas").remove(),$("#"+this._id+"_Selection_series"+u+"_canvas").remove(),$("[id*=_Region_Series_"+u+"]").attr("class",""),$("#"+this.svgObject.id+"_LegendItemShape"+u).attr("class","")):n&&"multiple"==l.type.toLowerCase()&&($("#"+this._id+"_Selection_series"+e+"_canvas").remove(),$("#"+this._id+"_Selection_Legend"+e+"_canvas").remove(),$("[id*=_Region_Series_"+e+"]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+e+"]").attr("class",""),$("#"+this.svgObject.id+"_LegendItemShape"+e).attr("class",""));if("cluster"==s&&"none"!=this.model.AreaType&&!r)if(a)if(this.model.enableCanvasRendering)$("[id*="+this._id+"_Selection_Cluster_point_"+t+"]").remove(),0==$("[id*="+this._id+"_Selection_Cluster]").length&&$("[id*="+this._id+"_SelectionCluster_Legend]").remove();else{for(var p=0;p<c;p++)$("[id*=_Region_Series_"+h[p].seriesIndex+"_Point_"+h[p].pointIndex+"]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+h[p].seriesIndex+"_Point"+h[p].pointIndex+"]").attr("class","");o=this.model.enable3D?this.foundClasses("_Region_Series_"+e):this.foundClasses(this.svgObject.id+"_Series"+e),0==o.length&&$("[id*="+this.svgObject.id+"_LegendItemShape]").attr("class","")}else if(this.model.enableCanvasRendering)$("[id*="+this._id+"_Selection_Cluster]").remove(),$("[id*="+this._id+"_SelectionCluster_Legend]").remove(),this.selectedPoint=null;else for(var p=0;p<c;p++)$("[id*=_Region_Series_"+h[p].seriesIndex+"_Point_]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+h[p].seriesIndex+"_Point]").attr("class",""),$("#"+this.svgObject.id+"_LegendItemShape"+h[p].seriesIndex).attr("class","");"point"!=s||"none"==this.model.AreaType||r||(a?($("#"+this._id+"_Selection_series"+e+"_point_"+t+"_canvas").remove(),$("[id*=_Region_Series_"+e+"_Point_"+t+"]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+e+"_Point"+t+"]").attr("class",""),0==$("[id*="+this._id+"_Selection_series"+e+"]").length&&$("#"+this._id+"_Selection_Legend"+e+"_canvas").remove(),o=this.model.enable3D?this.foundClasses("_Region_Series_"+e):this.foundClasses(this.svgObject.id+"_Series"+e),0==o.length&&$("#"+this.svgObject.id+"_LegendItemShape"+e).attr("class","")):($("[id*="+this._id+"_Selection_series"+e+"_point_]").remove(),$("[id*="+this._id+"_Selection_Legend"+e+"]").remove(),$("[id*=_Region_Series_"+e+"_Point_]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+e+"_Point]").attr("class",""),$("#"+this.svgObject.id+"_LegendItemShape"+e).attr("class",""))),("point"==s||"cluster"==s||"series"==s&&1==this.model._visibleSeries.length&&"none"==this.model.AreaType&&!r)&&(a?($("#"+this._id+"_Selection_series"+e+"_point_"+t+"_canvas").remove(),$("[id*=_Region_Series_"+e+"_Point_"+t+"]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+e+"_Point"+t+"]").attr("class",""),this.model._visibleSeries.length>1?$("#"+this.svgObject.id+"_LegendItemShape"+e).attr("class",""):$("#"+this.svgObject.id+"_LegendItemShape"+t).attr("class",""),this.model._visibleSeries.length>1?$("#"+this._id+"_Selection_Legend"+e+"_canvas").remove():$("#"+this._id+"_Selection_Legend"+t+"_canvas").remove()):($("[id*="+this._id+"_Selection_series]").remove(),$("[id*="+this._id+"_Selection_Legend]").remove(),$("[id*=_Region_Series_"+e+"_Point_]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+e+"_Point]").attr("class",""),this.model._visibleSeries.length>1?$("[id*="+this.svgObject.id+"_LegendItemShape"+e+"]").attr("class",""):$("[id*="+this.svgObject.id+"_LegendItemShape]").attr("class","")))},createStyle:function(e,t,i,s,a,r,n,o){if(e.vmlRendering){var l=document.createElement("style");l.id=t+"Segment",s*=100;var d="."+t+"Style"+i+" {filter: alpha(opacity="+s+");}."+t+"PathStyle"+i+"  {filter: alpha(opacity="+s+");}";if(l.setAttribute("type","text/css"),l.styleSheet)l.styleSheet.cssText=d;else{var h=document.createTextNode(d);l.appendChild(h)}document.getElementsByTagName("head")[0].appendChild(l)}else $("<style id="+t+"Segment"+i+" type='text/css'> ."+t+"Style"+i+"{ fill:"+a+";opacity:"+s+";stroke:"+r+";stroke-width:"+n+";stroke-opacity:"+o+"}</style>").appendTo("body"),$("<style id="+t+"Path"+i+" type='text/css'> ."+t+"PathStyle"+i+"{ opacity:"+s+";stroke:"+r+";stroke-width:"+n+";stroke-opacity:"+o+"}</style>").appendTo("body")},highlightPoint:function(e,t,i,s,a,r,n){for(var o="_Region_Series_"+t+"_Point_"+i,l=$(this.svgObject).find("[id$="+o+"],[id*="+o+"back],[id*="+o+"front]"),d=0;d<l.length;d++){var h=[];h.api=s+a,h.seriesName=a,h.name=$("[id="+l[d].id+"]").attr("name"),h.index=d;var c=this.highlightFill(r,e,t,i),u=$("#"+l[d].id).attr("class");u=u||"",u.indexOf("Selection")<0&&$("[id="+l[d].id+"]").attr("class",this.dStyle(h,c,e,n,r))}},highlightCluster:function(e,t,i,s,a,r,n){if("none"!=e.model.AreaType){for(var a,o,l,d,h,c,u=[],p=e.model._visibleSeries[t]._visiblePoints[i].x,m=0,g=e.model._visibleSeries.length;m<g;m++)for(var f=0;f<e.model._visibleSeries[m]._visiblePoints.length;f++)p==e.model._visibleSeries[m]._visiblePoints[f].x&&(u[u.length]={seriesIndex:m,pointIndex:f});for(var _=0;_<u.length;_++){a="series"+_,o="_Region_Series_"+u[_].seriesIndex+"_Point_"+u[_].pointIndex,l=$(this.svgObject).find("[id$="+o+"],[id*="+o+"back],[id*="+o+"front]");for(var f=0;f<l.length;f++)d=[],d.api=s+a,d.seriesName="series"+_,d.name=$("[id="+l[f].id+"]").attr("name"),d.index=f,t=_,r="Highlight"==s?e.model._visibleSeries[_].highlightSettings:e.model._visibleSeries[_].selectionSettings,h=this.highlightFill(r,e,t,i),c=$("#"+l[f].id).attr("class"),c=c||"",c.indexOf("Selection"+a+"Style")<0&&c.indexOf("SelectionStyle")<0&&$("[id="+l[f].id+"]").attr("class",this.dStyle(d,h,e,n,r));"Highlight"==s?$("#"+this.svgObject.id+"_LegendItemShape"+_).not("[class*='Selection']").attr("class","Highlight"+a+"Style"+a+"1"):$("#"+this.svgObject.id+"_LegendItemShape"+_).attr("class","Selection"+a+"Style"+a+"1")}}},highlightSeries:function(e,t,i,s,a,r,n,o){var l,d,t=t,h=i,c=e.model._visibleSeries.length,u="none"==e.model.AreaType&&1==c?"_Region_Series_"+t+"_Point_"+i:"_Region_Series_"+t+"_Point_",p=$(this.svgObject).find("[id*="+u+"]"),m=o?$("#"+this.svgObject.id+"_LegendItemShape"+i).attr("class"):n?$("#"+n.target.id).attr("class"):"";if(m=m||"",m.indexOf("SelectionStyle")<0||o)for(var g=0;g<p.length;g++)l=[],l.api=s+a,l.seriesName=a,l.name=$("[id="+p[g].id+"]").attr("name"),l.index=g,d=this.highlightFill(r,e,t,h,o),m=$("#"+p[g].id).attr("class"),m=m||"",m.indexOf("SelectionStyle")<0&&m.indexOf("Selection"+a+"Style")<0&&$("[id="+p[g].id+"]").attr("class",this.dStyle(l,d,e,n,r))},highlight:function(e,t,i,s,a,r,n,o){var l,d,h=i.highlightSettings,c=$.inArray(i,e.model._visibleSeries),u="series"+c,p=!1,m=c,g=n||t.target.id,f=jQuery.uaMatch(navigator.userAgent);!o&&this.isTouch(t)&&"chrome"==f.browser&&(l=t.originalEvent.changedTouches[0],g=document.elementFromPoint(l.clientX,l.clientY).id),r=r||t.target.parentNode.id;var _=r.indexOf(this.svgObject.id+"_SeriesGroup_")>=0||r.indexOf(this.svgObject.id+"_Chart3D")>=0,v=($("#"+g).attr("name"),h.pattern.toLowerCase()),b=e.model._visibleSeries.length;if("none"==e.model.AreaType&&1==b)if(e.model.enable3D)m=s?s.legendItem.LegendItem.PointIndex:a.region.Region.PointIndex;else{var x=s?this.svgObject.id+"_LegendItemShape":this.svgObject.id+"_Series"+c+"_Point",y=s?this.svgObject.id+"_LegendItemShape"+s.legendItem.LegendItem.PointIndex:g;d=y.substr(x.length),m=d}if($("style").each(function(){$(this).html().indexOf(".HighlightStyle"+u)>-1&&(p=!0)}),e.model.enable3D&&!e.vmlRendering)"series"!=h.mode&&!s||("none"!=e.model.AreaType||1==b)&&"none"==e.model.AreaType?"cluster"==h.mode&&"none"!=e.model.AreaType?this.highlightCluster(e,c,a.pointData.pointIndex,"Highlight",u,h,t):(d=a?a.pointData.pointIndex:m,this.highlightPoint(e,c,d,"Highlight",u+d,h,t),$("#"+this.svgObject.id+"_LegendItemShape"+m).not("[class*='Selection']").attr("class","Highlight"+u+d+"Style"+u+d+"1")):(this.highlightSeries(e,c,m,"Highlight",u,h,t,s),$("#"+this.svgObject.id+"_LegendItemShape"+m).not("[class*='Selection']").attr("class","Highlight"+u+"Style"+u+"1"));else{if(h.mode||"none"==this.model.AreaType){var w={};w.name="2D",w.index=c,w.api="Highlight",w.color=""!=h.color?h.color:s?"none"==this.model.AreaType?this.model.pointColors[m]:this.model.seriesColors[m]:$("#"+g).attr("fill"),"[object Array]"===Object.prototype.toString.call(w.color)&&(w.color=w.color[1].color);var C="none"==v||e.vmlRendering||""==v?h.color:this.pattern(e,t,w,h),S=o?1:h.opacity,T=o?-1==i.type.toLowerCase().indexOf("hilo")?e.model.highlightColor:C:h.border.color,R=o?3.5:h.border.width,k=o&&-1==i.type.toLowerCase().indexOf("hilo")?.5:1;p||(this.createStyle(e,"Highlight",u,S,C,T,R,k),this.createStyle(e,"HighlightLegend",u,S,C,"transparent",0,k))}var O=s?$("#"+this.svgObject.id+"_LegendItemShape"+m).attr("class"):$("#"+g).attr("class");if(O=O||"",-1==O.indexOf("Selection"))if(("series"==h.mode&&!o||s)&&("none"==e.model.AreaType&&1!=b||"none"!=e.model.AreaType))$("[id*="+this.svgObject.id+"_Series"+m+"]").each(function(){if(this.parentNode.id==e.svgObject.id+"_SeriesGroup_"+m||this.parentNode.id==e.svgObject.id+"_symbolGroup_"+m){var t=$(this).attr("class"),i=$(this).attr("name")?"HighlightPathStyle"+u:"HighlightStyle"+u;(void 0==t||-1==t.indexOf("SelectionStyle"))&&t!="SelectionStyle"+u&&t!="SelectionStyleClusterSeries"+c&&t!="SelectionPathStyle"+u&&r.indexOf(e.svgObject.id+"_symbolGroup_"+m)<=0&&$(this).attr("class",i)}}),$("#"+this.svgObject.id+"_LegendItemShape"+m).not("[class*='Selection']").attr("class","HighlightLegendStyle"+u);else if("cluster"!=h.mode||"none"==e.model.AreaType||o){if(!$("#"+g).attr("name")&&g!=e.svgObject.id+"_Series"+m){if(z=$("#"+g).attr("class")?$("#"+g).attr("class"):"",0!=z.indexOf("Selection")&&r.indexOf(e.svgObject.id+"_symbolGroup_"+m)<=0&&(a||s)){if(_&&($("#"+g).attr("class","HighlightStyle"+u),"cylinder"==this.model.commonSeriesOptions.columnFacet||"cylinder"==i.columnFacet))for(P=0;P<2;P++)$("#"+g.replace(/2$/,P)).attr("class","HighlightStyle"+u);$("#"+g+"_symbol").attr("class","HighlightStyle"+u),$("#"+this.svgObject.id+"_Series"+c+"_Point"+d).not("[class*='Selection']").attr("class","HighlightStyle"+u),$("#"+this.svgObject.id+"_LegendItemShape"+m).not("[class*='Selection']").attr("class","HighlightLegendStyle"+u)}g.indexOf("symbol")>-1&&$("#"+g).attr("class","HighlightStyle"+u)}var D=$("#"+g).attr("name");void 0!=D&&("candle"==D||D.indexOf("hilo")>=0)&&($("[id$="+g+"]").attr("class","HighlightStyle"+u),$("#"+this.svgObject.id+"_LegendItemShape"+m).not("[class*='Selection']").attr("class","HighlightLegendStyle"+u))}else{var I,j=this.svgObject.id+"_Series",L=[];if((m=g.match(/(\d+)/g))&&g.toLowerCase().indexOf("point")>0){d=parseInt(m[m.length-1]);for(var A,E=e.model._visibleSeries[c]._visiblePoints[d].xValue,P=0,M=e.model._visibleSeries.length;P<M;P++)for(var F=0;F<e.model._visibleSeries[P]._visiblePoints.length;F++)A=e.model._visibleSeries[P]._visiblePoints[F],E==A.xValue&&0==A.isEmpty&&1==A.visible&&(L[L.length]={seriesIndex:P,pointIndex:F})}for(var N=0;N<L.length;N++){I=L[N].seriesIndex,u="series"+I,w={},w.name="2D",w.api="Highlight"+u,h=e.model._visibleSeries[I].highlightSettings,w.color=""!=h.color?h.color:this.model.seriesColors[I],"[object Array]"===Object.prototype.toString.call(w.color)&&(w.color=w.color[1].color),S=h.opacity,T=h.border.color,R=h.border.width,C="none"==v||e.vmlRendering||""==v?w.color:this.pattern(e,t,w,h),p||(this.createStyle(e,"Highlight",u,S,C,T,R),this.createStyle(e,"HighlightLegend",u,S,C,"transparent",0));var z=$("#"+j+L[N].seriesIndex+"_Point"+L[N].pointIndex).attr("class"),O=($("#"+j+L[N].seriesIndex+"_Point"+L[N].pointIndex+"_symbol").attr("class"),$("#"+j+L[N].seriesIndex+"_Point"+L[N].pointIndex).attr("name")?"HighlightPathStyle"+u:"HighlightStyle"+u);(void 0==z||-1==z.indexOf("SelectionStyleseries"+N))&&z!="SelectionStyleseries"+N&&z!="SelectionPathStyle"+u&&r.indexOf(e.svgObject.id+"_symbolGroup_"+N)<=0&&($("#"+j+L[N].seriesIndex+"_Point"+L[N].pointIndex).attr("class",O),$("#"+j+L[N].seriesIndex+"_Point"+L[N].pointIndex+"_symbol").attr("class",O)),"hidden"!=e.model._visibleSeries[I].visibility&&$("#"+this.svgObject.id+"_LegendItemShape"+I).not("[class*='Selection']").attr("class","HighlightLegendStyle"+u);var D=$("#"+g).attr("name");void 0!=D&&("candle"==D||D.indexOf("hilo")>=0)&&$("[id$="+j+L[N].seriesIndex+"_Point"+L[N].pointIndex+"]").attr("class","HighlightStyle"+u)}}}},dStyle:function(e,t,i,s,a){var r=ej.Ej3DRender.prototype.polygon3D.prototype,n=a,o=e.api,l=e.seriesName,d=n.opacity;t=i.colorNameToHex(t),t="XLight"==e.name?r.applyXLight(t,i):"ZLight"==e.name?r.applyZLight(t,i):t;var h={};if(h.name=e.name,h.color=t,h.api=o,t="none"==n.pattern?t:this.pattern(i,s,h,n),document.getElementById(o+"Segment"+l)){var c=document.getElementById(o+"Segment"+l);c.innerHTML=c.innerHTML+"."+o+"Style"+l+e.index+" { fill:"+t+";opacity:"+d+" }"}else{var c=document.createElement("style");c.id=o+"Segment"+l,c.type="text/css",c.innerHTML="."+o+"Style"+l+e.index+" { fill:"+t+";opacity:"+d+" }",document.getElementsByTagName("head")[0].appendChild(c)}return o+"Style"+l+e.index},pattern:function(e,t,i,s){var a=s,r=i.api,n=a.pattern.toLowerCase(),o=i.color,l=""!=a.opacity?a.opacity:$("#"+t.target.id).attr("opacity"),d="#ffffff";if(document.getElementById(r+"Def"))var h=$("#"+r+"Def")[0];else{var c={id:r+"Def"},h=e.svgRenderer.createPattern(c,"svg");e.svgRenderer.append(h,e.svgObject)}e.model.enable3D&&(d="XLight"==i.name?"#595959":"ZLight"==i.name?"#737373":"#808080"),"#"+n+"_"+r+"_"+i.name+"_"+i.index&&$("#"+n+"_"+r+"_"+i.name+"_"+i.index).remove();var u=[];switch(n){case"chessboard":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",x:0,y:0,width:10,height:10},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={x:0,y:0,width:10,height:10,fill:d,opacity:l,name:"rect"},u[1]={x:0,y:0,width:5,height:5,fill:o,opacity:l,name:"rect"},u[2]={x:5,y:5,width:5,height:5,fill:o,opacity:l,name:"rect"},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"pacman":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"17.917",height:"18.384"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",x:0,y:0,width:17.917,height:18.384,transform:"translate(0,0)",fill:d,opacity:l},u[1]={name:"path",d:"M9.081,9.194l5.806-3.08c-0.812-1.496-2.403-3.052-4.291-3.052H8.835C6.138,3.063,3,6.151,3,8.723v1.679   c0,2.572,3.138,5.661,5.835,5.661h1.761c2.085,0,3.835-1.76,4.535-3.514L9.081,9.194z","stroke-width":1,stroke:o,fill:o},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"crosshatch":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"8",height:"8"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={x:0,y:0,width:8,height:8,transform:"translate(0,0)",fill:d,opacity:l,name:"rect"},u[1]={d:"M0 0L8 8ZM8 0L0 8Z","stroke-width":1,stroke:o,name:"path"},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"dots":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"6",height:"6"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={x:0,y:0,width:7,height:7,transform:"translate(0,0)",fill:d,opacity:l,name:"rect"},u[1]={cx:3,cy:3,r:2,"stroke-width":1,fill:o,name:"circle"},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"diagonalforward":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"6",height:"6"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={x:0,y:0,width:6,height:6,transform:"translate(0,0)",fill:d,opacity:l,name:"rect"},u[1]={d:"M 3 -3 L 9 3 M 6 6 L 0 0 M 3 9 L -3 3","stroke-width":2,stroke:o,name:"path"},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"diagonalbackward":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"6",height:"6"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={x:0,y:0,width:6,height:6,transform:"translate(0,0)",fill:d,opacity:l,name:"rect"},u[1]={d:"M 3 -3 L -3 3 M 0 6 L 6 0 M 9 3 L 3 9","stroke-width":2,stroke:o,name:"path"},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"grid":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"6",height:"6"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",x:0,y:0,width:6,height:6,transform:"translate(0,0)",fill:d,opacity:l},u[1]={name:"path",d:"M1 3.5L11 3.5 M0 3.5L11 3.5 M0 7.5L11 7.5 M0 11.5L11 11.5 M5.5 0L5.5 12 M11.5 0L11.5 12Z","stroke-width":1,stroke:o},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"turquoise":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"17",height:"17"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",x:0,y:0,width:17,height:17,transform:"translate(0,0)",fill:d,opacity:l},u[1]={name:"path",d:"M0.5739999999999998,2.643a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},u[2]={name:"path",d:"M11.805,2.643a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},u[3]={name:"path",d:"M6.19,2.643a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},u[4]={name:"path",d:"M11.805,8.217a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},u[5]={name:"path",d:"M6.19,8.217a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},u[6]={name:"path",d:"M11.805,13.899a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},u[7]={name:"path",d:"M6.19,13.899a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"star":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"21",height:"21"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",x:0,y:0,width:21,height:21,transform:"translate(0,0)",fill:d,opacity:l},u[1]={name:"path",d:"M15.913,18.59L10.762 12.842 5.613 18.75 8.291 11.422 0.325 9.91 8.154 8.33 5.337 0.91 10.488 6.658 15.637 0.75 12.959 8.078 20.925 9.59 13.096 11.17 z","stroke-width":1,stroke:o,fill:o},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"triangle":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"10",height:"10"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",x:0,y:0,width:10,height:10,transform:"translate(0,0)",fill:d,opacity:l},u[1]={name:"path",d:"M4.987,0L7.48 4.847 9.974 9.694 4.987 9.694 0 9.694 2.493 4.847 z","stroke-width":1,stroke:o,fill:o},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"circle":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"9",height:"9"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",x:0,y:0,width:9,height:9,transform:"translate(0,0)",fill:d,opacity:l},u[1]={name:"circle",cx:5.125,cy:3.875,r:3.625,"stroke-width":1,fill:o},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"tile":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"18",height:"18"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",x:0,y:0,width:18,height:18,transform:"translate(0,0)",fill:d,opacity:l},u[1]={name:"path",d:"M0,9L0 0 9 0 z","stroke-width":1,stroke:o,fill:o},u[2]={name:"path",d:"M9,9L9 0 18 0 z","stroke-width":1,stroke:o,fill:o},u[3]={name:"path",d:"M0,18L0 9 9 9 z","stroke-width":1,stroke:o,fill:o},u[4]={name:"path",d:"M9,18L9 9 18 9 z","stroke-width":1,stroke:o,fill:o},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"horizontaldash":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"12",height:"12"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",x:0,y:0,width:12,height:12,transform:"translate(0,0)",fill:d,opacity:l},u[1]={name:"path",d:"M0,1.5 L10 1.5 M0,5.5 L10 5.5 M0,9.5 L10 9.5 z","stroke-width":1,stroke:o,fill:o},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"verticaldash":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"12",height:"12"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",x:0,y:0,width:12,height:12,transform:"translate(0,0)",fill:d,opacity:l},u[1]={name:"path",d:"M1.5,0 L1.5 10 M5.5,0 L5.5 10 M9.5,0 L9.5 10 z","stroke-width":1,stroke:o,fill:o},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"rectangle":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",x:0,y:0,width:12,height:12},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",width:12,height:12,fill:d,opacity:l},u[1]={name:"rect",x:1,y:2,width:4,height:9,fill:o,opacity:l},u[2]={name:"rect",x:7,y:2,width:4,height:9,fill:o,opacity:l},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"box":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",x:0,y:0,width:10,height:10},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",width:13,height:13,fill:d,opacity:l},u[1]={name:"rect",x:1.5,y:1.5,width:10,height:9,fill:o,opacity:l},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"horizontalstripe":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"10",height:"12"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",x:0,y:0,width:10,height:12,transform:"translate(0,0)",fill:d,opacity:l},u[1]={name:"path",d:"M0,0.5 L10 0.5 M0,4.5 L10 4.5 M0,8.5 L10 8.5 z","stroke-width":1,stroke:o,fill:o},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"verticalstripe":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"12",height:"10"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",x:0,y:0,width:12,height:10,transform:"translate(0,0)",fill:d,opacity:l},u[1]={name:"path",d:"M0.5,0 L0.5 10 M4.5,0 L4.5 10 M8.5,0 L8.5 10 z","stroke-width":1,stroke:o,fill:o},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"bubble":var p={id:n+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"20",height:"20"},m=e.svgRenderer.createPattern(p,"pattern");return u[0]={name:"rect",x:0,y:0,width:20,height:20,transform:"translate(0,0)",fill:d,opacity:l},u[1]={name:"circle",cx:5.217,cy:11.325,r:3.429,"stroke-width":1,fill:"#D0A6D1"},u[2]={name:"circle",cx:13.328,cy:6.24,r:4.884,"stroke-width":1,fill:o},u[3]={name:"circle",cx:13.277,cy:14.66,r:3.018,"stroke-width":1,fill:"#D0A6D1"},this.loadPattern(e,u,m),h.appendChild(m),"url(#"+n+"_"+r+"_"+i.name+"_"+i.index+")";case"custom":return"url(#"+a.customPattern+")"}},loadPattern:function(e,t,i,s){for(var a,r=0;r<t.length;r++)s?"rect"==t[r].name?(t[r].stroke="transparent",this.drawRect(t[r],s)):"path"==t[r].name?ej.EjCanvasRender.prototype.drawPath(t[r],s):"circle"==t[r].name&&(t[r].stroke="transparent",ej.EjCanvasRender.prototype.drawCircle(t[r],s)):(a=e.svgRenderer.createPattern(t[r],t[r].name),i.appendChild(a))},drawRect:function(e,t){t.save(),t.beginPath(),t.globalAlpha=e.opacity,t.lineWidth=e["stroke-width"],t.strokeStyle=e.stroke,t.rect(e.x,e.y,e.width,e.height),"none"==e.fill&&(e.fill="transparent"),t.fillStyle=e.fill,e.transform&&t.translate(e.transform[0],e.transform[1]),t.rotate(e.rotate*Math.PI/180),t.fillRect(e.x,e.y,e.width,e.height),t.clip(),t.stroke(),t.restore()},chartRightClick:function(e){if(this.chartRightClick=!0,this.isTouch(e)&&this.model.crosshair.visible)return event.preventDefault(),event.stopPropagation(),!1},chartMouseUpTouch:function(e){var t=this,i=(jQuery.uaMatch(navigator.userAgent),this.calMousePosition(e));this.model.browserInfo;return this.mousemoveX=i.X,this.mousemoveY=i.Y,this.enableTrackBall(),clearTimeout(this.model.doubleTapTimer),this.drag||(this.model.doubleTapTimer=setTimeout(function(){(t.model.tapNum<2||t.model.crosshair.visible)&&t.singleTap(e),t.model.tapNum=0,t.model.cachedX=0,t.model.cachedY=0},200)),2==t.model.tapNum&&(t.model.doubleTapped=!1),!0},getEvent:function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0]:e},doubleTap:function(e){var t,i=this.getEvent(e),s=i.pageX,a=i.pageY,r=this.model,n=r.m_AreaBounds;this.model.cachedX=this.model.cachedX||s,this.model.cachedY=this.model.cachedY||a;(new Date).getTime();this.mouseDownX>=n.X&&this.mouseDownX<n.X+n.Width&&this.mouseDownY<n.Y+n.Height&&this.mouseDownY>=n.Y&&Math.abs(s-this.model.cachedX)<200&&Math.abs(a-this.model.cachedY)<200&&this.model.tapNum++,2==this.model.tapNum&&(this.model.doubleTapped=!0,this.multiSelectMouseDown(e),this.drag=this.model.zooming.enable||this._isMultiSelect,(t=this.model.trackerElement)&&($(t).finish(),t=null))},singleTap:function(e){var t,i=this,s=e.target.id,a=(this.model._visibleSeries,this.getEvent(e)),r=a.pageX,n=a.pageY;if(!this.panning&&!this.isZoomButtonHovered(e.target)){if(this.cancelEvent(e),i.model.trackerElement&&($.finish?$(i.model.trackerElement).finish():$(i.model.trackerElement).stop(!0,!0),i.model.trackerElement=null),$(".ejTooltip"+this._id).remove(),(!i.model.crosshair.visible||"cartesianaxes"!=i.model.AreaType)&&Math.abs(r-i.model.cachedX)<10&&Math.abs(n-i.model.cachedY)<10)this.chartInteractiveBehavior(e);else{i.model.element=$(document).find("#"+this.svgObject.id+"_CrosshairGroup"),i.model.trackerElement=$(i.model.element).children().not(".Tracker").not("defs"),$(i.model.trackerElement).length>0&&$(i.model.trackerElement).fadeOut(1e3,function(){$(i.model.element).find('[id*="trackSymbol"]').attr("visibility","hidden"),i.model.trackerElement=null,i._removeHighlight()});var o=$(document).find('[id*="_trackball_grouping_tooltip"]');$(o).length>0&&$(o).fadeOut(1e3,function(){$(o).remove()})}this.axisTooltip(e,s),this.showTitleTooltip(e,s),this.model.enableCanvasRendering&&(this._textTooltip(e,this.model.xAxisLabelRegions),this._textTooltip(e,this.model.yAxisLabelRegions));for(var l=0,d=this.model.series.length;l<d;l++){var h=this.model.series[l],c=h.marker.dataLabel;if(h._enableSmartLabels&&!this.model.enable3D&&!c.enableWrap){var u=c.template,p=c.font;"none"==this.model.AreaType&&ej.util.isNullOrUndefined(u)&&this.datalabelTooltip(e,l,p)}}$(".ejTooltip"+this._id).length>0&&(t=$(".ejTooltip"+this._id)),$(".tooltipDiv"+this._id).length>0&&(t=$(".tooltipDiv"+this._id)),window.clearTimeout(i.model.timer),i.model.trackerElement=t,i.model.timer=setTimeout(function(){var e=i.model.prevPoint;if(i.model.trackerElement)i.model.trackerElement.fadeOut(500,function(){if(e){if("polaraxes"!=i.model.AreaType){var t=ej.EjSvgRender.utils._getPoint(e.point,e.series);i.drawTrackerSymbol(e.series,e.seriesIndex,e.pointIndex,null,t)}$("#canvas_trackSymbol").remove()}$("[id*=_TrackSymbol]").remove()});else{if(e&&"polaraxes"!=i.model.AreaType){var t=ej.EjSvgRender.utils._getPoint(e.point,e.series);i.drawTrackerSymbol(e.series,e.seriesIndex,e.pointIndex,null,t)}i.model.crosshair.visible||($("#canvas_trackSymbol").remove(),$("[id*=_TrackSymbol]").remove())}},1200)}e.originalEvent.pointerType||this.panning||!(this.model.selectionEnable||this.isDevice()&&this._isSafari)||this._doClick(e)},_getPieOfPiePoint:function(e,t,i){for(var s=i?t.points:t._visiblePoints,a=s.length,r=0;r<a;r++)if(e==s[r].actualIndex)var n=s[r];return n},tooltip:function(e,t){var i,s,a=!1,r=this.GetSeriesPoint(t);if($("#canvas_trackSymbol").remove(),ej.util.isNullOrUndefined(r)&&!this.dragPoint&&$("#"+e.svgObject.id+"_TrackToolTip").remove(),this.model.crosshair.visible||"cartesianaxes"!=this.model.AreaType)$("#"+this.svgObject.id).find("#"+this.svgObject.id+"_TrackToolTip").hide(),ej.util.isNullOrUndefined(r)&&(clearTimeout(this.removeTooltip),e.removeTooltip=setTimeout(function(){$(".tooltipDiv"+e._id).remove()},1e3));else{var n,o,l,d,h=this.model.indicators,c=this.model._visibleSeries,u=c.length,p=0;for(l=0;l<u;l++)for(d=c[l].trendlines,o=0;o<d.length;o++)"visible"!=d[o].visibility.toLowerCase()||d[o].isNull||"boxandwhisker"==this.model.series[0].type||(d[o]._visiblePoints=d[o].points,c=c.concat(d[o]));for(var m=0;m<h.length&&h[m].segment;m++)n=h[m],n.visible&&(c=c.concat(n.segment));for(var g=c.length,f=0;f<g;f++){i=c[f],s=f;var _=i.type.toLowerCase();if("visible"!=i.visibility.toLowerCase()||"scatter"===_||"bubble"===_||"column"===_||-1!=_.indexOf("bar")||"stackingcolumn"===_||"stackingcolumn100"===_||i._hiloTypes)ej.util.isNullOrUndefined(r)&&!this.dragPoint&&$(".tooltipDiv"+this._id).hasClass(this.svgObject.id)&&(clearTimeout(this.removeTooltip),e.removeTooltip=setTimeout(function(){$(".tooltipDiv"+e._id).remove()},1e3));else{$("#"+e.svgObject.id+"_TrackToolTipTemplate_"+s).remove(),$(".tooltipDiv"+this._id).hasClass(e.svgObject.id)||$(".tooltipDiv"+this._id).remove(),$("#"+e.svgObject.id).find("#"+e.svgObject.id+"_TrackSymbol_"+s).remove(),$("#"+e.svgObject.id+"_TrackSymbol_"+s).remove();var v=[],b=[];M=null;var x=e.getClosesPointXY(b,v,i,e.mousemoveX,e.mousemoveY,t);if(ej.util.isNullOrUndefined(x.point)&&(!this.model.prevPoint||this.model.prevPoint.seriesIndex&&!this.model.series[this.model.prevPoint.seriesIndex].tooltip.visible)&&!this.dragPoint&&$(".tooltipDiv"+this._id).hasClass(this.svgObject.id)&&(clearTimeout(this.removeTooltip),e.removeTooltip=setTimeout(function(){$(".tooltipDiv"+e._id).remove()},1e3)),x.point){"boxandwhisker"==i.type.toLowerCase()?(p++,M=x.outlierPosition):M=ej.EjSvgRender.utils._getPoint(x.point,i);var y=$.extend({},ej.EjSvgRender.commonChartEventArgs);y.data={location:{x:this.mousemoveX,y:this.mousemoveX},region:{SeriesIndex:f,Region:{PointIndex:x.index}}},e._trigger("pointRegionMouseMove",y)}var w=this.model.prevPoint;if(w&&w.seriesIndex==f&&!x.point){if("boxandwhisker"==i.type.toLowerCase())p++,C=w.outlierPosition;else var C=ej.EjSvgRender.utils._getPoint(w.point,w.series);e.model.enableCanvasRendering||e.drawTrackerSymbol(w.series,w.seriesIndex,w.pointIndex,null,C),this.model.prevPoint=null}if(!i.isIndicator&&!i.isTrendLine&&!i.selectionSettings.enable&&!i.highlightSettings.enable&&(i.marker.visible||"boxandwhisker"==i.type.toLowerCase())&&x.point&&!y.cancel){
if(ej.util.isNullOrUndefined(x.point.marker)||ej.util.isNullOrUndefined(x.point.marker.visible)||x.point.marker&&x.point.marker.visible?e.drawTrackerSymbol(i,s,x.index,!1,M):"boxandwhisker"!=i.type||x.point.marker||e.drawTrackerSymbol(i,s,x.index,!1,M),w&&x.point!=w.point){if("boxandwhisker"==i.type.toLowerCase())p++,S=w.outlierPosition;else var S=ej.EjSvgRender.utils._getPoint(w.point,w.series);e.drawTrackerSymbol(w.series,w.seriesIndex,w.pointIndex,null,S,H,p)}(ej.util.isNullOrUndefined(x.point.marker)||ej.util.isNullOrUndefined(x.point.marker.visible)||x.point.marker&&x.point.marker.visible)&&(this.model.prevPoint={point:x.point,pointIndex:x.index,series:i,seriesIndex:s,outlierPosition:x.outlierPosition})}if(i.tooltip.visible&&x.point&&(!r||f>r.region.SeriesIndex&&!(i._zOrder<this.model._visibleSeries[r.region.SeriesIndex]._zOrder))&&(F=ej.EjSvgRender.utils._getTransform(i.xAxis,i.yAxis,e.model.requireInvertedAxes),M.X+F.x<=F.x+F.width&&(M.X+F.x>=F.x||0==M.X)&&Math.abs(M.Y-(F.y+F.height))<=F.y+F.height&&(Math.abs(M.Y-(F.y+F.height))>=F.y||0==M.Y)&&!y.cancel)){if(0==$(e.svgObject).find("#"+e.svgObject.id+"_TrackToolTip").length){var T={id:e.svgObject.id+"_TrackToolTip",transform:"translate("+F.x+","+F.y+")"};e.gTransToolEle=e.svgRenderer.createGroup(T)}if(e.svgRenderer._setAttr($(e.svgObject).find("#"+e.svgObject.id+"_TrackToolTip"),{transform:"translate("+F.x+","+F.y+")",visibility:"visible"}),ej.util.isNullOrUndefined(i.tooltip.template))a=!0,$(".tooltipDiv"+this._id).remove(),e.displayShowTooltip(M,x.point,i,x.index);else{a=!0,$("#"+e.svgObject.id).find("#"+e.svgObject.id+"_TrackToolTip").attr("visibility","hidden");var R={SeriesIndex:s,Region:{PointIndex:x.index}};e.createTooltip(R,t,i)}}}}}if($(".tooltipDiv"+this._id).hasClass(this.svgObject.id)||$(".tooltipDiv"+this._id).remove(),r&&ej.util.isNullOrUndefined(r.region.isStripLine)){var k=this.model._visibleSeries[r.region.SeriesIndex].type.toLowerCase();if("pie"!=k&&"pieofpie"!=k&&"doughnut"!=k||!this.model._visibleSeries[r.region.SeriesIndex].explode||(this.model._visibleSeries[r.region.SeriesIndex].enableAnimation?(this.model.AnimationComplete||this.model.enableCanvasRendering)&&this.pieExplosion(r,t):this.model.enable3D||this.pieExplosion(r,t)),r.region.isIndicator){A=this.model.indicators[r.region.SeriesIndex];var O=A.segment[0]._visiblePoints[r.region.Region.PointIndex];A.fill=A.segment[0].fill}else if(A=this.model._visibleSeries[r.region.SeriesIndex],"pieofpie"!=A.type||this.model.enable3D){if("pie"!=A.type&&"doughnut"!=A.type||this.model.enable3D)var O=this.model._visibleSeries[r.region.SeriesIndex]._visiblePoints[r.region.Region.PointIndex];else for(var D=0;D<A._visiblePoints.length;D++)if(r.region.Region.length==A._visiblePoints.length){if(r.region.Region.PointIndex==A._visiblePoints[D].actualIndex){var O=this.model._visibleSeries[r.region.SeriesIndex]._visiblePoints[D];break}}else if(r.region.Region.Index==D){var O=this.model._visibleSeries[r.region.SeriesIndex]._visiblePoints[D];break}}else var O=this._getPieOfPiePoint(r.region.Region.PointIndex,A);if(O&&"polaraxes"==this.model.AreaType){for(var f=0;f<this.model._visibleSeries.length;f++){$("[id*=_TrackSymbol]").remove();var I="canvas_trackSymbol_"+f;$("#"+this._id).find("[id*="+I+"]").remove()}var j="polaraxes"!=this.model.AreaType?ej.EjSvgRender.utils._getPoint(O,A):ej.EjSvgRender.utils.TransformToVisible(A,O.xValue,O.y,this),L=this.model.prevPoint;if(!ej.util.isNullOrUndefined(L)&&L!=r&&A.marker.visible){var A=this.model._visibleSeries[L.region.SeriesIndex],E=this.model._visibleSeries[L.region.SeriesIndex]._visiblePoints[L.region.Region.PointIndex],P=ej.EjSvgRender.utils.TransformToVisible(A,E.xValue,E.y,this);this.drawTrackerSymbol(A,L.region.SeriesIndex,L.region.Region.PointIndex,null,P),this.model.prevPoint=null}A.marker.visible&&"column"!=A.drawType&&"rangecolumn"!=A.drawType.toLowerCase()&&(this.drawTrackerSymbol(A,r.region.SeriesIndex,r.region.Region.PointIndex,!0,j),this.model.prevPoint=r)}if(A.tooltip.visible&&!a&&"visible"==A.visibility.toLowerCase())if(ej.util.isNullOrUndefined(A.tooltip.template)){var M;if("cartesianaxes"==this.model.AreaType){var F=ej.EjSvgRender.utils._getTransform(A.xAxis,A.yAxis,this.model.requireInvertedAxes);if(0==$(this.svgObject).find("#"+this.svgObject.id+"_TrackToolTip").length){var N={id:this.svgObject.id+"_TrackToolTip",transform:"translate("+F.x+","+F.y+")"};this.gTransToolEle=this.svgRenderer.createGroup(N)}this.svgRenderer._setAttr($(this.svgObject).find("#"+this.svgObject.id+"_TrackToolTip"),{transform:"translate("+F.x+","+F.y+")"}),$("#"+this.svgObject.id+"_TrackToolTip").attr("visibility","visible"),M={X:r.location.x-this.model.m_AreaBounds.X,Y:Math.abs(r.location.y-this.model.m_AreaBounds.Y)}}else{if(0==$(this.svgObject).find("#"+this.svgObject.id+"_TrackToolTip").length){var z={id:this.svgObject.id+"_TrackToolTip"};this.gTransToolEle=this.svgRenderer.createGroup(z)}M={X:r.location.x,Y:Math.abs(r.location.y)}}$(".tooltipDiv"+this._id).remove(),this.displayShowTooltip(M,O,A,r.region.Region.PointIndex)}else $("#"+e.svgObject.id).find("#"+e.svgObject.id+"_TrackToolTip").attr("visibility","hidden"),this.createTooltip(r.region,t);var V=$.extend({},ej.EjSvgRender.commonChartEventArgs);V.data=r,this._trigger("pointRegionMouseMove",V)}else if(ej.util.isNullOrUndefined(this.model.prevPoint)||"polaraxes"!=this.model.AreaType){if(!ej.util.isNullOrUndefined(this.model.explodeValue)){var B,H,_=this.model.series[this.model.explodeValue.SeriesIndex].type.toLowerCase(),A=this.model._visibleSeries[this.model.explodeValue.SeriesIndex],k=new ej.seriesTypes[_],s=(A.labelPosition.toLowerCase(),this.model.explodeValue.SeriesIndex),Y=this.model._isPieOfPie?this._getPieOfPiePoint(this.model.explodeValue.PointIndex,A):A._visiblePoints[this.model.explodeValue.Index],U=k._calculateArcData(this,this.model.explodeValue.PointIndex,Y,A,s,this.model.explodeValue.PieSeriesIndex);if(this.model.enableCanvasRendering){this.model.series[s].explodeIndex=null;var W=document.getElementById(this.svgObject.id).getClientRects()[0];this.svgRenderer.ctx.clearRect(W.left,W.top,W.width,W.height),$("#"+this._id).ejChart("redraw")}H=this.svgObject.id+"_SeriesGroup_"+s,B=1==this.model.explodeValue.PieSeriesIndex?$(this.gSeriesEle).children("#"+H)[1]:$(this.gSeriesEle).children("#"+H)[0];for(var X=$(B).children(),f=0;f<X.length;f++){var G=X[f],q=this.svgRenderer._getAttrVal($(G)[0],"data-pointIndex");if(parseInt(q)==this.model.explodeValue.PointIndex){this.svgRenderer._setAttr($(G),{d:U.Direction});break}}k.drawDataLabelAcc(this,A,this.model.explodeValue.Index,Y,s,this.model.explodeValue.PieSeriesIndex),this.model.explodeValue=null,this.model.explode=!1}}else{var L=this.model.prevPoint;A=this.model._visibleSeries[L.region.SeriesIndex],O=this.model._visibleSeries[L.region.SeriesIndex]._visiblePoints[L.region.Region.PointIndex],j=ej.EjSvgRender.utils.TransformToVisible(A,O.xValue,O.y,this),this.drawTrackerSymbol(A,L.region.SeriesIndex,L.region.Region.PointIndex,null,j),this.model.prevPoint=null}},chartTrackball:function(e,t,i){this.crosshairLinePath=[];var s,a,r,n,o,l,n,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k=e.model.requireInvertedAxes,O=[],D=[],I=this.model.indicators,j=this.model._visibleSeries,L=!1,A=[],E=[],P=[],M=[],F=this.model.enableCanvasRendering,N=0,z=0,V=0,B=$("#"+this._id).offset(),H=[],Y=[],U=[],W=this.model.crosshair.trackballTooltipSettings.mode.toLowerCase(),X=e._id+"_trackball_grouping_tooltip",G=this.model.locale,q=0,Q=0;if(!this.model.enable3D&&this.model.crosshair.visible&&"trackball"==this.model.crosshair.type.toLowerCase()){if(0==$("#"+this.svgObject.id+"_CrosshairGroup").length){var K={id:e.svgObject.id+"_CrosshairGroup",visibility:"visible"};F?(K.position="absolute",e.svgRenderer.drawCrosshairLine(K,"#chartContainer_"+this._id)):(e.gTrackball=e.svgRenderer.createGroup(K),e.svgRenderer.append(e.gTrackball,e.svgObject))}else e.model.trackerElement&&($.finish?$(e.model.trackerElement).finish():$(e.model.trackerElement).stop(!0,!0),e.model.trackerElement=null);this.model.enableCanvasRendering||($("[class*=HighlightStyle]").attr("class",""),$("[class*=HighlightLegendStyle]").attr("class",""),$("[class*=HighlightLegendPathStyle]").attr("class",""),$("[class*=HighlightPathStyle]").attr("class",""),$("[class*=Highlightseries]").attr("class",""),$("[id*="+this._id+"_Highlight_]").remove()),$("#secondCanvas").remove(),$("#"+this._id).find('[id*="_gTooltip_"]').remove(),$("#"+X).children().remove(),$(document).find('[id*="TrackGroupToolTipTemplate"]').remove(),$(document).find('[id*="TrackToolTipTemplate"]').remove(),F&&$("#"+this._id).find('[id*="canvas_trackSymbol"]').css("visibility","hidden");for(var Z=j.length,J=0;J<I.length&&I[J].segment;J++)j=j.concat(I[J].segment);m=j.length;for(var ee=0;ee<m;ee++)if("visible"==j[ee].visibility&&j[ee].enableTrackTooltip&&(n=ee,d=[],h=k?e.mousemoveY+j[ee].xAxis.plotOffset>j[ee].xAxis.y&&e.mousemoveY<j[ee].xAxis.y+j[ee].xAxis.height+j[ee].xAxis.plotOffset:e.mousemoveX+j[ee].xAxis.plotOffset>j[ee].xAxis.x&&e.mousemoveX<j[ee].xAxis.x+j[ee].xAxis.width+j[ee].xAxis.plotOffset,F&&(this.canvasX=j[ee].xAxis.x),c=e.getClosestPointX(d,j[ee],e.mousemoveX,e.mousemoveY),u=j[ee].xAxis.visibleRange,""!=c.point)){var te="boxandwhisker"==j[ee].type.toLowerCase()?c.point[0].boxPlotLocation[0].YValues:c.point[0].YValues[0];if(""!=c.point&&(te>=j[ee].yAxis.visibleRange.min||"grouping"==W)&&c.point[0].xValue>=u.min&&c.point[0].xValue<=u.max&&h)for(var ie=0;ie<c.point.length;ie++)c.point[ie].visible&&(j[ee].isIndicator||N++)}for(var ee=0;ee<m;ee++){n=ee,o=j[ee];var se=[];if("visible"==o.visibility.toLowerCase()&&o.enableTrackTooltip){d=[],h=k?e.mousemoveY+j[ee].xAxis.plotOffset>o.xAxis.y&&e.mousemoveY<o.xAxis.y+o.xAxis.height+j[ee].xAxis.plotOffset:e.mousemoveX+j[ee].xAxis.plotOffset>o.xAxis.x&&e.mousemoveX<o.xAxis.x+o.xAxis.width+j[ee].xAxis.plotOffset,F&&(this.canvasX=o.xAxis.x),c=e.getClosestPointX(d,o,e.mousemoveX,e.mousemoveY),u=o.xAxis.visibleRange;var ae;if(""!=c.point){var te="boxandwhisker"==j[ee].type.toLowerCase()?c.point[0].boxPlotValues.midvalue:c.point[0].YValues[0];if((te>=j[ee].yAxis.visibleRange.min||"grouping"==W)&&c.point[0].xValue>=u.min&&c.point[0].xValue<=u.max)if(h)for(var r=c.point.length,ie=0;ie<r;ie++)if(c.point[ie].visible){if(!o.isIndicator){if("boxandwhisker"==o.type){q++;var re={xValue:c.point[ie].xValue,YValues:c.point[ie].boxPlotLocation[0].YValues};s=ej.EjSvgRender.utils._getPoint(re,o),s.YValues=re.YValues,se.push(s);for(var ne=0;ne<c.point[ie].boxPlotLocation.length;ne++)1==c.point[ie].boxPlotLocation[ne].outlier&&(ae={X:c.point[ie].boxPlotLocation[ne].X,Y:c.point[ie].boxPlotLocation[ne].Y,YValues:c.point[ie].boxPlotLocation[ne].YValues,outlier:c.point[ie].boxPlotLocation[ne].outlier},se.push(ae))}else s=ej.EjSvgRender.utils._getPoint(c.point[ie],o);if(this.model.financial=1==Z&&1==r&&o._hiloTypes||!1,k){if(this.model.financial){var oe=s.X>s.low?s.X:s.low,le=s.X<s.low?s.X:s.low;l="M "+o.yAxis.x+" "+(s.Y+o.xAxis.y)+" L "+(le+o.yAxis.x)+" "+(s.Y+o.xAxis.y)+" M "+(o.yAxis.x+oe)+" "+(s.Y+o.xAxis.y)+" L "+(o.yAxis.x+o.yAxis.width)+" "+(s.Y+o.xAxis.y)}else l="M "+o.yAxis.x+" "+(s.Y+o.xAxis.y)+" L "+(o.yAxis.x+o.yAxis.width)+" "+(s.Y+o.xAxis.y);if("boxandwhisker"==o.type)for(var de=0;de<se.length;de++)E.push({X:se[de].X,Y:se[de].Y,YValues:se[de].YValues,outlier:se[de].outlier});else E.push({X:c.point[ie].location.X+o.yAxis.x,Y:c.point[ie].location.Y+o.xAxis.y})}else{if(this.model.financial){var oe=s.Y<s.low?s.Y:s.low,le=s.Y>s.low?s.Y:s.low;l="M "+(s.X+o.xAxis.x)+" "+e.model.m_AreaBounds.Y+" L "+(s.X+o.xAxis.x)+" "+(oe+o.yAxis.y)+" M "+(s.X+o.xAxis.x)+" "+(le+o.yAxis.y)+" L "+(s.X+o.xAxis.x)+" "+(e.model.m_AreaBounds.Y+e.model.m_AreaBounds.Height)}else l="M "+(s.X+o.xAxis.x)+" "+e.model.m_AreaBounds.Y+" L "+(s.X+o.xAxis.x)+" "+(e.model.m_AreaBounds.Y+e.model.m_AreaBounds.Height);if("boxandwhisker"==o.type)for(var de=0;de<se.length;de++)E.push({X:se[de].X,Y:se[de].Y,YValues:se[de].YValues,outlier:se[de].outlier});else E.push({X:c.point[ie].location.X+o.xAxis.x,Y:c.point[ie].location.Y+o.yAxis.y})}if({left:B.left,top:B.top},p={id:e.svgObject.id+"_Tracker",fill:"none","stroke-width":e.model.crosshair.line.width,"clip-path":"url(#"+e.svgObject.id+"_ChartAreaClipRect)",stroke:e.model.crosshair.line.color,d:l},this.crosshairLinePath.push(p),0==$("#"+e.svgObject.id+"_Tracker").length){if(F){var he=this.svgRenderer.createCrosshairCanvas();he.ctx=he.getContext("2d")}else var he=this.svgRenderer,ce=e.gTrackball;e.svgRenderer.drawPath.call(he,p,ce),L=!0}else{if(L=!0,ej.util.isNullOrUndefined(this._closest)?e.svgRenderer._setAttr($(e.svgObject).find("#"+e.svgObject.id+"_Tracker"),{d:l,visibility:"visible"}):this._beforeMin?this._closest>=c.point[ie].xValue&&e.svgRenderer._setAttr($(e.svgObject).find("#"+e.svgObject.id+"_Tracker"),{d:l,visibility:"visible"}):this._afterMax&&this._closest<=c.point[ie].xValue&&e.svgRenderer._setAttr($(e.svgObject).find("#"+e.svgObject.id+"_Tracker"),{d:l,visibility:"visible"}),$("#"+e.svgObject.id+"_Tracker").css({display:"block"}),F){var he=this.svgRenderer.createCrosshairCanvas();he.ctx=he.getContext("2d"),e.svgRenderer.drawPath.call(he,p,e.gTrackball)}$("#"+this._id).find('[id*="canvas_Tracker"]').css("visibility","visible")}if(f=ej.EjSvgRender.utils._getTransform(o.xAxis,o.yAxis,k),_={transform:"translate("+f.x+","+f.y+")",id:e.svgObject.id+"_TrackToolTip_"+n},e.gTransToolEle=e.svgRenderer.createGroup(_),v=this.model.prePoint,ej.util.isNullOrUndefined(v)||v.pointIndex[0]!=c.index[0]||!$("#"+e.svgObject.id+"_trackSymbol_"+n+"_"+c.index)){ej.util.isNullOrUndefined(b)&&(e.gTransToolEle&&e.gTrackerEle&&($(this.svgObject).find('[id*="_TrackSymbol_"],[id*="_TrackToolTip"]').attr("visibility","hidden"),$("#"+this._id).find('[id*="canvas_trackSymbol"]').css("visibility","hidden")),b=c);var ue=o.type.toLowerCase(),pe=0;if((!o._hiloTypes||ue.indexOf("rangearea")>-1)&&("grouping"!=W||"grouping"==W&&ue.indexOf("column")<0&&ue.indexOf("bar")<0))if("boxandwhisker"==o.type)for(var me=0;me<se.length;me++)e.drawTrackerSymbol(o,n,c.index[ie],!0,se[me],null,pe),pe++;else e.drawTrackerSymbol(o,n,c.index[ie],!0,s);if(o.trackerRemoved=!0,e.model.crosshair.trackballTooltipSettings.tooltipTemplate)"grouping"===W?(c=e.getClosestPointX(d,o,e.mousemoveX,e.mousemoveY),a=this.getSeriesColor(c.point[ie],n,o),D.push({seriesColor:a}),r=c.point.length,fe=this.getTooltipFormat(c.point[ie],o,n,c.index[ie],ve),fe.text="&nbsp"+fe.text+"&nbsp",H.push({text:fe.text,seriesIndex:n,pointIndex:c.index[ie]}),O.push({point:c.point[ie]}),A.push({series:o}),(o._hiloTypes&&"rangearea"!=ue||ue.indexOf("column")>-1||ue.indexOf("bar")>-1)&&(g={region:{Region:{PointIndex:c.index[ie]},SeriesIndex:n}},this.highlightStart(i,g,this._id+"_svg_SeriesGroup_"+n,this._id+"_svg_Series"+n+"_Point"+c.index[ie],!0)),N===H.length&&(T=document.getElementById(this.svgRenderer.svgObj.id).getClientRects()[0],e.displayGroupingTemplate(C,S,s,O,A,n,c.index[ie],T,D))):(T=document.getElementById(this.svgRenderer.svgObj.id).getClientRects()[0],e.displayTemplateTooltip(C,S,s,c.point[ie],o,n,c.index[ie],T));else{var w=E.length-1,Q=se.length;if("grouping"==W){var ge,fe,_e,a=this.getSeriesColor(c.point[ie],n,o),ve=o.tooltip.format,be=[];if("boxandwhisker"==o.type)for(var de=0;de<Q;de++)_e=this.getTooltipFormat(c.point[ie],o,n,c.index[ie],ve,se[de]),be.push(_e),fe=null;else fe=this.getTooltipFormat(c.point[ie],o,n,c.index[ie],ve);var xe=o.tooltip.font&&o.tooltip.font.color?o.tooltip.font.color:a,ye=o.tooltip.font?$.extend(!1,o.font,{},o.tooltip.font):o.font;if("object"==typeof xe&&(xe=a[1].color),"boxandwhisker"==o.type)for(var we=0;we<be.length;we++)H.push({text:be[we].text,seriesIndex:n,pointIndex:c.index[ie]});else fe.text="&nbsp"+fe.text+"&nbsp",H.push({text:fe.text,seriesIndex:n,pointIndex:c.index[ie]});if((o._hiloTypes&&"rangearea"!=ue||ue.indexOf("column")>-1||ue.indexOf("bar")>-1)&&(g={region:{Region:{PointIndex:c.index[ie]},SeriesIndex:n}},this.highlightStart(i,g,this._id+"_svg_SeriesGroup_"+n,this._id+"_svg_Series"+n+"_Point"+c.index[ie],!0)),"boxandwhisker"==o.type)for(var we=0;we<be.length;we++)U.push(e._id+"_grouping_text_"+n+"_"+c.index[ie]+we);else U.push(e._id+"_grouping_text_"+n+"_"+c.index[ie]);if(ge={color:xe,"font-size":ye.size,"font-family":ye.fontFamily,"font-style":ye.fontStyle,"font-weight":ye.fontWeight},"boxandwhisker"==o.type)for(var we=0;we<be.length;we++)Y.push(ge);else Y.push(ge);q==N&&"boxandwhisker"==o.type?e.displayTooltip(!0,{point:c.point[ie],series:o,textCollection:H,textOptionsCollection:Y,groupingTextId:U}):N==H.length&&"boxandwhisker"!=o.type&&e.displayTooltip(!0,{point:c.point[ie],series:o,textCollection:H,textOptionsCollection:Y,groupingTextId:U})}else{var Ce,x=this.getTooltipFormat(c.point[ie],o,n,ee,o.tooltip.format,ee),Se=o.tooltip,ye=Se.font?$.extend(!1,o.font,{},Se.font):o.font,y=ej.EjSvgRender.utils._measureText(x.text,null,ye),V=k?y.height:y.width,z=z>V?z:V,Te=Math.ceil(x.text.toString().split("<br/>").length/2);if(this.model.tooltipPadding=Number(ye.size.toString().replace(/px/i,""))/3,Ce=this.model.tooltipPadding+2*o.tooltip.border.width,k)P.push({Start:E[w].X-Ce-y.width/2,End:E[w].X+Ce+y.width/2}),M.push({Point:E[w],ClosestPoint:c.point[ie],Series:o,ClosestPointIndex:c.index[ie],Tgap:0,StEnd:P[w],TextArea:y,ReqInvertAxis:k});else if("boxandwhisker"==o.type)for(var de=0;de<Q;de++)P.push({Start:se[de].Y-Ce*Te-y.height/2,End:se[de].Y+Ce*Te+y.height/2}),M.push({Point:se[de],ClosestPoint:c.point[ie],Series:o,ClosestPointIndex:c.index[ie],Tgap:0,StEnd:P[de],TextArea:y,ReqInvertAxis:k});else P.push({Start:E[w].Y-Ce*Te-y.height/2,End:E[w].Y+Ce*Te+y.height/2}),M.push({Point:E[w],ClosestPoint:c.point[ie],Series:o,ClosestPointIndex:c.index[ie],Tgap:0,StEnd:P[w],TextArea:y,ReqInvertAxis:k});if("boxandwhisker"==o.type&&q==N){z+=2*Ce,M=k?M.sort(function(e,t){return e.Point.X-t.Point.X}):M.sort(function(e,t){return e.Point.Y-t.Point.Y}),this.SmartTooltipPosition(M);var Re=M.length;e.displayTooltip(!1,M,z);for(var ee=0;ee<Re;ee++){var n=$.inArray(M[ee].Series,this.model._visibleSeries);M[ee].Series._hiloTypes&&(g={region:{Region:{PointIndex:M[ee].ClosestPointIndex},SeriesIndex:n}},this.highlightStart(i,g,this._id+"_svg_SeriesGroup_"+n,this._id+"_svg_Series"+n+"_Point"+M[ee].ClosestPointIndex,!0))}}else if(M.length==N&&"boxandwhisker"!=o.type){z+=2*Ce,M=k?M.sort(function(e,t){return e.Point.X-t.Point.X}):M.sort(function(e,t){return e.Point.Y-t.Point.Y}),this.SmartTooltipPosition(M);var Re=M.length;e.displayTooltip(!1,M,z);for(var ee=0;ee<Re;ee++){var n=$.inArray(M[ee].Series,this.model._visibleSeries);M[ee].Series._hiloTypes&&(g={region:{Region:{PointIndex:M[ee].ClosestPointIndex},SeriesIndex:n}},this.highlightStart(i,g,this._id+"_svg_SeriesGroup_"+n,this._id+"_svg_Series"+n+"_Point"+M[ee].ClosestPointIndex,!0))}}}}}else R=$(this.svgObject).find('[id*="_TrackSymbol_"],[id*="_TrackToolTip"]'),this.svgRenderer._setAttr($(R),{visibility:"visible"}),$("#"+this._id).find('[id*="canvas_trackSymbol"]').css("visibility","visible"),R=$(this.svgObject).find('[id*="_TrackToolTip"]').children(),this.svgRenderer._setAttr($(R),{visibility:"visible"}),R=$(this.svgObject).find('[id*="_trackSymbol_"]'),this.svgRenderer._setAttr($(R),{visibility:"visible"}),$(e.svgObject).find('[id*="_TrackAxisToolTip"]').attr("visibility","visible"),null!=this.model.crosshair.trackballTooltipSettings.tooltipTemplate&&("grouping"===W?(R=$(document).find('[id*="TrackGroupToolTipTemplate"]'),this.svgRenderer._setAttr($(R),{visibility:"visible"})):(R=$(document).find('[id*="_TrackToolTipTemplate_"]'),this.svgRenderer._setAttr($(R),{visibility:"visible"})))}}else $("#"+this.svgObject.id+"_TrackSymbol_"+n).remove();else this._removeTrackBall()}else{L||$(e.svgObject).find('[id*="_Tracker"]').remove();var ke=($("#"+e.svgObject.id+"_TrackSymbol_"+ee),this.svgObject.id+"_TrackSymbol_"+n);$("#"+this._id).find("[id*="+ke+"]").remove(),$("#"+e._id).find("[id*=_canvas_trackSymbol_"+ee+"]").css("visibility","hidden"),this.model.enableCanvasRendering||($("[class*=HighlightStyle]").attr("class",""),$("[class*=HighlightLegendStyle]").attr("class",""),$("[class*=HighlightLegendPathStyle]").attr("class",""),$("[class*=HighlightPathStyle]").attr("class",""),$("[class*=Highlightseries]").attr("class",""),$("[id*="+this._id+"_Highlight_]").remove())}}o.trackerRemoved=!1}if(null!=this.model.closestPoint&&(this.model.prePoint={point:c.point,pointIndex:c.index,series:o,seriesIndex:n}),0==$("#"+this.svgObject.id+"_TrackAxisToolTip").length&&this.model.crosshairLabelVisibility){var Oe={id:e.svgObject.id+"_TrackAxisToolTip",visibility:"visible"};e.gTrackAxisEle=e.svgRenderer.createGroup(Oe),e.svgRenderer.append(e.gTrackAxisEle,e.gTrackball)}else $("#"+this.svgObject.id+"_TrackAxisToolTip").css("display","block");if(s){var De=c.point[0];F?$(e.svgObject.parentElement).find('[id*="AxisToolTipRect"]').css({visibility:"hidden",display:"none"}):$(e.svgObject).find('[id*="_TrackAxisToolTip"]').attr("visibility","visible").children().attr({display:"none"}),$.each(e.model._axes,function(i,a){var r=a.x,n=a._opposed;if(k){if("vertical"==a.orientation.toLowerCase()&&a.crosshairLabel.visible&&e.mousemoveY<=a.y+a.height&&a.y<=e.mousemoveY){var o=a._valueType.toLowerCase(),l=De.xValue,d=[];"logarithmic"==o&&(l=Math.pow(a.logBase,l).toFixed(2).replace(new RegExp("\\.0{2}"),"")),"datetime"==o&&(l=ej.format(new Date(Math.floor(l)),ej.util.isNullOrUndefined(a.labelFormat)?ej.EjSvgRender.utils._dateTimeLabelFormat(a._intervalType,a):a.labelFormat,G)),"category"==o&&(l=ej.EjSvgRender.utils._getLabelContent(l,a,G)),d={X:a.x,Y:s.Y+a.y},e.displayAxisTooltip(d,l,a,i,t)}}else if("horizontal"==a.orientation.toLowerCase()&&a.crosshairLabel.visible&&s.X+r<=a.x+a.width&&a.x<=E[E.length-1].X){var h,c,o=a._valueType.toLowerCase();h=(s.X/a.width*a.visibleRange.delta+a.visibleRange.min).toFixed(2).replace(new RegExp("\\.0{2}"),""),"logarithmic"==o&&(h=Math.pow(a.logBase,h)),"datetime"==o&&(h=ej.format(new Date(Math.floor(h)),ej.util.isNullOrUndefined(a.labelFormat)?ej.EjSvgRender.utils._dateTimeLabelFormat(a._intervalType,a):a.labelFormat,G)),"category"!=o&&"datetimecategory"!=o||("object"!=typeof De.x&&(h=De.xValue),h="category"!=o&&ej.util.isNullOrUndefined(a.labelFormat)?ej.format(new Date(a.labels[Math.floor(h)]),ej.EjSvgRender.utils._dateTimeLabelFormat(a.intervalType,a),G):ej.EjSvgRender.utils._getLabelContent(Math.floor(h),a,G),h=h||"undefined"),c={X:E[E.length-1].X,Y:n?a.y+a.height-a.majorTickLines.size:a.y+a.height+a.majorTickLines.size+10},e.displayAxisTooltip(c,h,a,i,t,!0)}})}if("grouping"!==W&&e.model.crosshair.trackballTooltipSettings.tooltipTemplate)for(var Ie=$(document).find('[id*="_TrackToolTipTemplate_"]'),ee=0;ee<Ie.length;ee++)$(Ie[ee]).appendTo(this.templateContainer),$(this.templateContainer).appendTo(this.chartContainer)}},chartCrossHair:function(e,t){var i=ej.util.isNullOrUndefined(this.model.primaryYAxis.roundingPlaces)?2:this.model.primaryYAxis.roundingPlaces,s=e.model.enableCanvasRendering,a=this.model.locale;if(!this.model.enable3D&&this.model.crosshair.visible&&"crosshair"==this.model.crosshair.type.toLowerCase()){if(0==$("#"+this.svgObject.id+"_CrosshairGroup").length){var r={id:this.svgObject.id+"_CrosshairGroup",visibility:"visible"};s?(r.position="absolute",e.svgRenderer.drawCrosshairLine(r,"#chartContainer_"+this._id)):(this.gCrosshair=this.svgRenderer.createGroup(r),this.svgRenderer.append(this.gCrosshair,this.svgObject))}else $("#"+this.svgObject.id+"_CrosshairGroup").css("display","block");e.model.trackerElement&&($.finish?$(this.model.trackerElement).finish():$(this.model.trackerElement).stop(!0,!0),this.model.trackerElement=null);var n=this.getScaleValues(this),o=$.extend(!0,{},t);mouseX=o.x/n.x,mouseY=o.y/n.y;for(var l,d,h,c,u=0;u<this.model._axes.length;u++){var p=this.model._axes[u];"vertical"==p.orientation.toLowerCase()?mouseY>=p.y&&mouseY<=p.y+p.height&&(p.x<mouseX?l=Math.min(l||p.x,p.x):d=Math.max(d||p.x,p.x)):mouseX>=p.x&&mouseX<=p.x+p.width&&(p.y<mouseY?h=Math.min(h||p.y,p.y):c=Math.max(c||p.y,p.y))}var m=l||this.model.m_AreaBounds.X,g=d?d-m:this.model.m_AreaBounds.X+this.model.m_AreaBounds.Width-m,f=h||this.model.m_AreaBounds.Y,_=c?c-f:this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height-f;this.mousemoveX=this.mousemoveX/n.x,this.mousemoveY=this.mousemoveY/n.y;var v,b,x="M "+this.mousemoveX+" "+f+" L "+this.mousemoveX+" "+(f+_),y="M "+m+" "+this.mousemoveY+" L "+(m+g)+" "+this.mousemoveY,w=$("#"+this._id).offset(),C=e.svgObject,S={left:C.offsetLeft>w.left?C.offsetLeft:w.left,top:C.offsetTop>w.top?C.offsetTop:w.top};if(0==$("#"+e.svgObject.id+"_CrosshairVertical").length?(v={id:e.svgObject.id+"_CrosshairVertical",fill:"none","stroke-width":e.model.crosshair.line.width,stroke:e.model.crosshair.line.color,"clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)",d:x},s?(v.width=0,v.height=_,v.top=f,v.left=m,v.position="absolute",v.style="solid",v.opacity=.5,e.svgRenderer.drawCrosshairLine(v,"#"+this.svgObject.id+"_CrosshairGroup")):e.svgRenderer.drawPath(v,e.gCrosshair)):(e.svgRenderer._setAttr($(e.svgObject).find("#"+e.svgObject.id+"_CrosshairVertical"),{d:x}),s&&($("#secondCanvas").remove(),$("#"+e.svgObject.id+"_CrosshairVertical").css("left",this.mousemoveX).css({top:f,height:_,display:"block"})),$("#"+e.svgObject.id+"_CrosshairVertical").attr("visibility","visible").css("display","block")),0==$("#"+e.svgObject.id+"_CrosshairHorizontal").length?(b={id:e.svgObject.id+"_CrosshairHorizontal",fill:"none","stroke-width":e.model.crosshair.line.width,stroke:e.model.crosshair.line.color,"clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)",d:y},s?(b.top=f+S.top,b.left=m+S.left,b.width=g,b.height=0,b.position="absolute",b.style="solid",b.opacity=.5,e.svgRenderer.drawCrosshairLine(b,"#"+this.svgObject.id+"_CrosshairGroup")):e.svgRenderer.drawPath(b,e.gCrosshair)):(e.svgRenderer._setAttr($(e.svgObject).find("#"+e.svgObject.id+"_CrosshairHorizontal"),{d:y}),$("#"+e.svgObject.id+"_CrosshairHorizontal").attr("visibility","visible").css("display","block"),s&&$("#"+e.svgObject.id+"_CrosshairHorizontal").css("top",this.mousemoveY).css({left:m,width:g,display:"block"})),0==$("#"+e.svgObject.id+"_AxisCrossToolTip").length){var T={id:e.svgObject.id+"_AxisCrossToolTip",visibility:"visible"};e.gTrackAxisEle=e.svgRenderer.createGroup(T),e.svgRenderer.append(e.gTrackAxisEle,e.gCrosshair)}else this.svgRenderer._setAttr($(e.gTrackAxisEle),{visibility:"visible"}),$(e.gTrackAxisEle).css("display","block");$.each(e.model._axes,function(s,r){var n=r._valueType.toLowerCase();if("horizontal"==r.orientation.toLowerCase()&&r.crosshairLabel.visible)if(e.mousemoveX<=r.x+r.width&&r.x<=e.mousemoveX){var o="category"==r._valueType&&"betweenticks"==r.labelPlacement.toLowerCase()?.5:0,l=(Math.abs(e.mousemoveX-(r.isInversed?r.x+r.width:r.x))/r.width*r.visibleRange.delta+r.visibleRange.min+o).toFixed(2).replace(new RegExp("\\.0{2}"),"");"logarithmic"==n&&(l=Math.pow(r.logBase,l).toFixed(2).replace(new RegExp("\\.0{2}"),"")),"datetime"==n&&(l=ej.format(new Date(Math.floor(l)),ej.util.isNullOrUndefined(r.labelFormat)?ej.EjSvgRender.utils._dateTimeLabelFormat(r._intervalType,r):r.labelFormat,a)),"category"!=n&&"datetimecategory"!=n||("category"!=n&&ej.util.isNullOrUndefined(r.labelFormat)?(l=l<0?0:l,l=ej.format(new Date(r.labels[Math.floor(l)]),ej.EjSvgRender.utils._dateTimeLabelFormat(r.intervalType,r),a)):l=ej.EjSvgRender.utils._getLabelContent(l,r,a));var d={X:e.mousemoveX,Y:r.y};e.displayAxisTooltip(d,l,r,s,t),$("#"+e.svgObject.id+"_AxisToolTipText_"+s).show(),$("#"+e.svgObject.id+"_AxisToolTipRect_"+s).show()}else $("#"+e.svgObject.id+"_AxisToolTipText_"+s).hide(),$("#"+e.svgObject.id+"_AxisToolTipRect_"+s).hide();else if("vertical"==r.orientation.toLowerCase()&&r.crosshairLabel.visible)if(e.mousemoveY<=r.y+r.height&&r.y<=e.mousemoveY){var h=(Math.abs(1-Math.abs(e.mousemoveY-(r.isInversed?r.y+r.height:r.y))/r.width/r.height)*r.visibleRange.delta+r.visibleRange.min).toFixed(i).replace(new RegExp("\\.0{"+i+"}"),"");"logarithmic"==n&&(h=Math.pow(r.logBase,h).toFixed(2).replace(new RegExp("\\.0{2}"),"")),"datetime"==n&&(h=ej.format(new Date(Math.floor(h)),ej.util.isNullOrUndefined(r.labelFormat)?ej.EjSvgRender.utils._dateTimeLabelFormat(r._intervalType,r):r.labelFormat,a)),"category"!=n&&"datetimecategory"!=n||(h="category"==n||ej.util.isNullOrUndefined(r.labelFormat)?ej.EjSvgRender.utils._getLabelContent(h,r,a):ej.format(new Date(r.labels[Math.floor(h)]),ej.EjSvgRender.utils._dateTimeLabelFormat(r.intervalType,r),a));var c={X:r.x,Y:e.mousemoveY};e.displayAxisTooltip(c,h,r,s,t),$("#"+e.svgObject.id+"_AxisToolTipText_"+s).show(),$("#"+e.svgObject.id+"_AxisToolTipRect_"+s).show()}else $("#"+e.svgObject.id+"_AxisToolTipText_"+s).hide(),$("#"+e.svgObject.id+"_AxisToolTipRect_"+s).hide()})}},chartTouchMove:function(e){this.cancelEvent(e),e=e.originalEvent.touches[0],this.chartInteractiveBehavior(e)},isZoomButtonHovered:function(e){if(null!=e.parentNode){var t=e.parentNode.id,i=e.id;if(-1==i.indexOf("_ZoomInBtn ")&&-1==i.indexOf("ZoomOutBtn")&&-1==i.indexOf("_ZoomBtn")&&-1==i.indexOf("_ResetZoom")&&-1==i.indexOf("_PanBtn")&&t&&-1==t.indexOf("_ZoomInBtn")&&-1==t.indexOf("_ZoomOutBtn")&&-1==t.indexOf("_ZoomBtn")&&-1==t.indexOf("_ResetZoom")&&-1==t.indexOf("_PanBtn"))return!1}return!0},showTooltipOnDrag:function(e,t){$("#"+e.svgObject.id).find("#"+e.svgObject.id+"_TrackToolTip").attr("visibility","visible"),$("#"+e.svgObject.id+"_TrackToolTip").show(),$(".tooltipDiv").css("display","block")},getScaleValues:function(e){for(var t,i,s,a=document.getElementById(e.element[0].id),r=1,n=1;"HTML"!=a.tagName;)i=window.getComputedStyle(a,""),s=i.getPropertyValue("transform"),"none"!=s&&(t=s.replace("matrix(","").replace(")","").split(","),r=parseFloat(t[0]),n=parseFloat(t[3])),a=a.parentNode;return{x:r,y:n}},chartInteractiveBehavior:function(e){var t=this.calMousePosition(e);this.mousemoveX=t.X,this.mousemoveY=t.Y;var i=this.getScaleValues(this),s=$.extend(!0,{},this.model.m_AreaBounds),a=s.X*i.x,r=s.Y*i.y,n=s.Width*i.x,o=s.Height*i.y,l="#"+this.svgObject.id;if(this.mouseWheelCoords){var d=Math.abs(this.mouseWheelCoords.x-e.pageX),h=Math.abs(this.mouseWheelCoords.y-e.pageY);(d>0||h>0)&&!this.panning?this.enableTrackBall():this.disableTrackBall()}var c=this,u=e.target.id;if("cartesianaxes"==c.model.AreaType&&this.mousemoveX>=a&&this.mousemoveX<a+n&&this.mousemoveY<r+o&&this.mousemoveY>=r&&this.model.initSeriesRender){var p={x:c.mousemoveX,y:c.mousemoveY},u=c.svgRenderer._getAttrVal($(e.target).parent(),"id");void 0==u||u!=c.svgRenderer._getAttrVal($(this.svgObject).find(l+"_ZoomBtn"),"id")&&u!=c.svgRenderer._getAttrVal($(this.svgObject).find(l+"_ResetZoom"),"id")&&u!=c.svgRenderer._getAttrVal($(this.svgObject).find(l+"_PanBtn"),"id")?this.enableTrackBall():this.disableTrackBall(),this.model.crosshair.visible||this.isZoomButtonHovered(e.target)?this.dragPoint?this.showTooltipOnDrag(c,e):this.closestXyPoint||($("#"+c.svgObject.id).find("#"+c.svgObject.id+"_TrackToolTip").attr("visibility","hidden"),$("#"+c.svgObject.id+"_TrackToolTip").hide(),$(".tooltipDiv"+this._id).css("display","none")):this.tooltip(c,e),this.model.enable3D||(this.chartTrackball(c,p,e),this.chartCrossHair(c,p))}else{"none"!=c.model.AreaType&&"polaraxes"!=c.model.AreaType||this.isZoomButtonHovered(e.target)?this.dragPoint?this.showTooltipOnDrag(c,e):this.closestXyPoint||($("#"+c.svgObject.id).find("#"+c.svgObject.id+"_TrackToolTip").attr("visibility","hidden"),$("#"+c.svgObject.id+"_TrackToolTip").hide(),$(".tooltipDiv"+this._id).css("display","none"),this._removeTrackBall(),this._removeHighlight()):this.tooltip(c,e);var m=this.model.prevPoint;if(m&&m.point){if(this.model.enableCanvasRendering)$("#canvas_trackSymbol").remove();else{if("boxandwhisker"==m.series.type)var g=m.outlierPosition;else var g=ej.EjSvgRender.utils._getPoint(m.point,m.series);c.drawTrackerSymbol(m.series,m.seriesIndex,m.pointIndex,null,g)}this.model.prevPoint=null}}},
highlightSvg:function(e,t,i,s,a,r,n){if(void 0!=t){var o=this.svgObject.id+"_SeriesGroup_",l=t.substr(o.length);t.indexOf(this.svgObject.id+"_symbolGroup_")>=0&&(o=this.svgObject.id+"_symbolGroup_",l=t.substr(o.length))}l=void 0!=a?a.region.SeriesIndex:l;var d=this.model.series[l];i&&d&&(d.highlightSettings.enable||n)&&this.highlight(e,s,d,null,a,t,r,n)},highlightCanvas:function(e,t,i){for(var s=0;s<this.model._visibleSeries.length;s++){var a;s,a=this.model._visibleSeries[s];var r=a.type.toLowerCase();if("cartesianaxes"==this.model.AreaType&&"visible"==a.visibility.toLowerCase()&&"scatter"!==r&&"bubble"!==r&&"column"!==r&&-1==r.indexOf("bar")&&"stackingcolumn"!==r&&"stackingcolumn100"!==r&&!a._hiloTypes){var n=[],o=[],l=this.calMousePosition(t);this.mousemoveX=l.X,this.mousemoveY=l.Y;var d=this.getClosesPointXY(o,n,a,this.mousemoveX,this.mousemoveY,t);if(!ej.util.isNullOrUndefined(d.point)){var h=$.extend({},ej.EjSvgRender.commonChartEventArgs);h.data={location:{x:this.mousemoveX,y:this.mousemoveY},region:{SeriesIndex:s,Region:{PointIndex:d.index}}}}}}var i=h?h.data:i;if(i&&this.model.series[i.region.SeriesIndex].highlightSettings.enable){var c=$.extend({},this.model.series[i.region.SeriesIndex]);c.pointIndex=i.region.Region.PointIndex,c.seriesIndex=i.region.SeriesIndex,c.data=i,0==$("#"+this._id+"_Selection_series"+c.seriesIndex+"_canvas").length&&($("[id*="+this._id+"_Highlight_]").remove(),this.findCanvasSelection(c.seriesIndex,c.pointIndex,c.selectionSettings.mode.toLowerCase())||this.canvasHighlight(this,t,c))}},resizeCursor:function(e,t,i,s,a,r,n){var o=this.selectedRectIndex;t<=s||i<=a||t>=r+s||i>=n+a?($("#"+e+"_resize_rightRect"+o).css({cursor:"default"}),$("#"+e+"_resize_leftRect"+o).css({cursor:"default"}),$("#"+e+"_resize_bottomRect"+o).css({cursor:"default"}),$("#"+e+"_resize_topRect"+o).css({cursor:"default"}),$("#"+e+"_resize_bottomRightCornerCircle"+o).css({cursor:"default"})):(t>=s||i>=a||t<=r+s||i<=n+a)&&($("#"+e+"_resize_rightRect"+o).css({cursor:"e-resize"}),$("#"+e+"_resize_leftRect"+o).css({cursor:"w-resize"}),$("#"+e+"_resize_bottomRect"+o).css({cursor:"s-resize"}),$("#"+e+"_resize_topRect"+o).css({cursor:"n-resize"}),$("#"+e+"_resize_bottomRightCornerCircle"+o).css({cursor:"se-resize"}))},multiSelectMouseMove:function(evt){if(this._isMultiSelect&&"range"==this.multiSelectMode&&!this.dragPoint){for(var mouseMoveCords=this.calMousePosition(evt),mouseMoveX=mouseMoveCords.X,mouseMoveY=mouseMoveCords.Y,gripMouseMoveX,gripMouseMoveY,translate,selectionSettingsType=this.multiSelectType,width,height,x,y,rectX,rectY,rectWidth,rectHeight,id,x1,x2,y1,y2,xPlotOffset,yPlotOffset,modifiedX,modifiedY,mouseDownX=this.mouseDownX,mouseDownY=this.mouseDownY,selectedRectIndex=this.selectedRectIndex,containerSvg=this.svgObject.id,chartArea="#"+containerSvg+"_ChartArea",chartAreaX=parseInt($(chartArea).attr("x")),chartAreaY=parseInt($(chartArea).attr("y")),chartAreaWidth=parseInt($(chartArea).attr("width")),chartAreaHeight=parseInt($(chartArea).attr("height")),multiSelectMouseDownId=this.multiSelectMouseDownId,selctRectId="#"+containerSvg+"_selectRect",multiAxis=this.multiAxis,q=0;q<multiAxis.length;q++)"horizontal"==multiAxis[q].orientation.toLowerCase()?(x1=multiAxis[q].Location.X1,x2=multiAxis[q].Location.X2,xPlotOffset=multiAxis[q].plotOffset):(y1=multiAxis[q].Location.Y1,y2=multiAxis[q].Location.Y2,yPlotOffset=multiAxis[q].plotOffset);if(this.drag&&!this.resize&&!this.rectPan&&!this.removeRect){var currentX=mouseMoveX,currentY=mouseMoveY,areaBounds=this.model.m_AreaBounds;switch(this.multiSelectDraw=!0,mouseMoveX<areaBounds.X?currentX=areaBounds.X:mouseMoveX>areaBounds.X+areaBounds.Width&&(currentX=areaBounds.X+areaBounds.Width),currentY=mouseMoveY<areaBounds.Y?areaBounds.Y:mouseMoveY>areaBounds.Y+areaBounds.Height?areaBounds.Y+areaBounds.Height:mouseMoveY,selectionSettingsType){case"x":width=Math.abs(currentX-mouseDownX),height=y1-y2+yPlotOffset+yPlotOffset,x=currentX>mouseDownX?mouseDownX:currentX,y=y2-yPlotOffset;break;case"y":width=x2-x1+xPlotOffset+xPlotOffset,height=Math.abs(currentY-mouseDownY),x=x1-xPlotOffset,y=currentY>mouseDownY?mouseDownY:currentY;break;case"xy":width=Math.abs(currentX-mouseDownX),height=Math.abs(currentY-mouseDownY),x=currentX>mouseDownX?mouseDownX:currentX,y=currentY>mouseDownY?mouseDownY:currentY}if(width>0&&height>0){var rectOptions={id:this.svgObject.id+"_selectRect"+this.selectedRectIndex,x:x,y:y,width:width,height:height,fill:"rgba(41,136,214,0.2)","stroke-width":2,stroke:"rgba(41,136,214,0.5)",cursor:"pointer","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"};x>=x1+xPlotOffset&&mouseMoveX<=x2-xPlotOffset&&mouseMoveY<=y1+yPlotOffset&&y>=y2-yPlotOffset&&this.svgRenderer.drawRect(rectOptions,this.gEle),null!=this.gEle&&($(this.gEle).appendTo(this.parentgEle),0==this.selectedRectIndex&&(this.model.gCurrentEle=this.gEle),$(this.parentgEle).appendTo(this.svgObject))}}if(rectX=parseInt($(selctRectId+selectedRectIndex).attr("x")),rectY=parseInt($(selctRectId+selectedRectIndex).attr("y")),rectWidth=parseInt($(selctRectId+selectedRectIndex).attr("width")),rectHeight=parseInt($(selctRectId+selectedRectIndex).attr("height")),!this.drag&&(evt.target.id.indexOf("selectRect")>=0||evt.target.id.indexOf("resize")>=0)){evt.target.parentNode.id.indexOf("selectedRect")>=0&&(id=evt.target.parentNode.id.split("selectedRect")[1].match(/\d+/)[0],this.gripIndex=eval(id));var selectRectId="#"+containerSvg+"_selectRect",selectRectWidth=parseInt($(selectRectId+this.gripIndex).attr("width")),selectRectHeight=parseInt($(selectRectId+this.gripIndex).attr("height")),selectRectX=parseInt($(selectRectId+this.gripIndex).attr("x")),selectRectY=parseInt($(selectRectId+this.gripIndex).attr("y"));if($("#"+containerSvg+"_gripCollection"+selectedRectIndex).css({visibility:"hidden"}),(selectRectX+selectRectWidth-16>=selectRectX||selectRectY+selectRectHeight-16>=selectRectY)&&$("#"+this.svgObject.id+"_gripCollection"+this.gripIndex).attr({transform:""}),selectRectX+selectRectWidth-16<selectRectX||selectRectY+selectRectHeight-16<selectRectY){var translate="translate(15,15)";$("#"+this.svgObject.id+"_gripCollection"+this.gripIndex).attr({transform:translate})}this.oldId!=evt.target.id&&$("#"+containerSvg+"_gripCollection"+this.oldGripIndex).css({visibility:"hidden"}),$("#"+containerSvg+"_gripCollection"+this.gripIndex).css({visibility:"visible"}),this.oldId=evt.target.id,this.oldGripIndex=this.gripIndex}if(evt.target.id.indexOf("selectRect")<0&&evt.target.id.indexOf("resize")<0&&$("#"+containerSvg+"_gripCollection"+this.gripIndex).css({visibility:"hidden"}),this.resize){$("#"+containerSvg+"_closeTopRightCornerCircle"+selectedRectIndex).hide(),$("#"+containerSvg+"_closePath"+selectedRectIndex).hide(),$("#"+containerSvg+"_closePathOpposite"+selectedRectIndex).hide(),$("#"+containerSvg+"_gripCollection"+selectedRectIndex).css({visibility:"hidden"});var oldRectX=this.oldRectX[selectedRectIndex],oldRectY=this.oldRectY[selectedRectIndex],oldRectHeight=this.oldRectHeight[selectedRectIndex],oldRectWidth=this.oldRectWidth[selectedRectIndex],oldReBottomRectY=this.oldReBottomRectY[selectedRectIndex],oldReRightRectX=this.oldReRightRectX[selectedRectIndex];switch(selectionSettingsType){case"x":multiSelectMouseDownId==containerSvg+"_resize_rightRect"+selectedRectIndex?(rectWidth=mouseMoveX-oldRectX,$("#"+containerSvg+"_resize_rightRect"+selectedRectIndex).attr("x",mouseMoveX-5),mouseMoveX<oldRectX?(rectX=mouseMoveX,rectWidth=oldRectX-mouseMoveX):mouseMoveX>=oldRectX&&(rectX=oldRectX)):multiSelectMouseDownId==containerSvg+"_resize_leftRect"+selectedRectIndex&&(rectX=mouseMoveX,rectWidth=oldRectWidth+oldRectX-mouseMoveX,$("#"+containerSvg+"_resize_leftRect"+selectedRectIndex).attr("x",mouseMoveX-5),mouseMoveX>oldReRightRectX+5&&(rectX=oldReRightRectX+5,rectWidth=mouseMoveX-oldRectX-oldRectWidth)),this.resizeCursor(containerSvg,mouseMoveX,mouseMoveY,chartAreaX,chartAreaY,chartAreaWidth,chartAreaHeight);break;case"y":multiSelectMouseDownId==containerSvg+"_resize_topRect"+selectedRectIndex?(rectHeight=oldRectHeight+oldRectY-mouseMoveY,rectY=mouseMoveY,$("#"+containerSvg+"_resize_topRect"+selectedRectIndex).attr("y",mouseMoveY-5),mouseMoveY>oldReBottomRectY+5&&(rectY=oldReBottomRectY+5,rectHeight=mouseMoveY-oldRectY-oldRectHeight)):multiSelectMouseDownId==containerSvg+"_resize_bottomRect"+selectedRectIndex&&(rectHeight=mouseMoveY-oldRectY,$("#"+containerSvg+"_resize_bottomRect"+selectedRectIndex).attr("y",mouseMoveY-5),mouseMoveY<oldRectY?(rectY=mouseMoveY,rectHeight=oldRectY-mouseMoveY):mouseMoveY>=oldRectY&&(rectY=oldRectY)),this.resizeCursor(containerSvg,mouseMoveX,mouseMoveY,chartAreaX,chartAreaY,chartAreaWidth,chartAreaHeight);break;case"xy":multiSelectMouseDownId==containerSvg+"_resize_rightRect"+selectedRectIndex?(rectWidth=mouseMoveX-oldRectX,$("#"+containerSvg+"_resize_rightRect"+selectedRectIndex).attr("x",mouseMoveX-5),mouseMoveX<oldRectX?(rectX=mouseMoveX,rectWidth=oldRectX-mouseMoveX):mouseMoveX>=oldRectX&&(rectX=oldRectX)):multiSelectMouseDownId==containerSvg+"_resize_leftRect"+selectedRectIndex?(rectX=mouseMoveX,rectWidth=oldRectWidth+oldRectX-mouseMoveX,$("#"+containerSvg+"_resize_leftRect"+selectedRectIndex).attr("x",mouseMoveX-5),mouseMoveX>oldReRightRectX+5&&(rectX=oldReRightRectX+5,rectWidth=mouseMoveX-oldRectX-oldRectWidth)):multiSelectMouseDownId==containerSvg+"_resize_topRect"+selectedRectIndex?(rectHeight=oldRectHeight+oldRectY-mouseMoveY,rectY=mouseMoveY,$("#"+containerSvg+"_resize_topRect"+selectedRectIndex).attr("y",mouseMoveY-5),mouseMoveY>oldReBottomRectY+5&&(rectY=oldReBottomRectY+5,rectHeight=mouseMoveY-oldRectY-oldRectHeight)):multiSelectMouseDownId==containerSvg+"_resize_bottomRect"+selectedRectIndex?(rectHeight=mouseMoveY-oldRectY,$("#"+containerSvg+"_resize_bottomRect"+selectedRectIndex).attr("y",mouseMoveY-5),mouseMoveY<oldRectY?(rectY=mouseMoveY,rectHeight=oldRectY-mouseMoveY):mouseMoveY>=oldRectY&&(rectY=oldRectY)):multiSelectMouseDownId==containerSvg+"_resize_bottomRightCornerCircle"+selectedRectIndex&&(rectWidth=mouseMoveX-oldRectX,rectHeight=mouseMoveY-oldRectY,$("#"+containerSvg+"_resize_bottomRightCornerCircle"+selectedRectIndex).attr({cx:mouseMoveX,cy:mouseMoveY}),mouseMoveX<oldRectX&&mouseMoveY<oldRectY?(rectX=mouseMoveX,rectY=mouseMoveY,rectWidth=oldRectX-mouseMoveX,rectHeight=oldRectY-mouseMoveY):mouseMoveX<oldRectX?(rectX=mouseMoveX,rectWidth=oldRectX-mouseMoveX):mouseMoveY<oldRectY?(rectY=mouseMoveY,rectHeight=oldRectY-mouseMoveY):mouseMoveX>=oldRectX&&mouseMoveY>=oldRectY&&(rectX=oldRectX,rectY=oldRectY)),this.resizeCursor(containerSvg,mouseMoveX,mouseMoveY,chartAreaX,chartAreaY,chartAreaWidth,chartAreaHeight)}switch(selectionSettingsType){case"x":rectX>=x1-xPlotOffset&&rectWidth+rectX-x1<=x2-x1-xPlotOffset&&$(selctRectId+selectedRectIndex).attr({x:rectX,width:rectWidth});break;case"y":rectHeight+rectY-y2<=y1-y2+yPlotOffset&&rectY>=y2-yPlotOffset&&$(selctRectId+selectedRectIndex).attr({y:rectY,height:rectHeight});break;case"xy":rectX>=x1-xPlotOffset&&rectWidth+rectX-x1<=x2-x1-xPlotOffset&&rectHeight+rectY-y2<=y1-y2+yPlotOffset&&rectY>=y2-yPlotOffset&&$(selctRectId+selectedRectIndex).attr({x:rectX,y:rectY,width:rectWidth,height:rectHeight})}}if(this.rectPan)switch($("#"+containerSvg+"_closeTopRightCornerCircle"+selectedRectIndex).hide(),$("#"+containerSvg+"_closePath"+selectedRectIndex).hide(),$("#"+containerSvg+"_closePathOpposite"+selectedRectIndex).hide(),$("#"+containerSvg+"_gripCollection"+selectedRectIndex).css({visibility:"hidden"}),(mouseMoveX<=chartAreaX||mouseMoveY<=chartAreaY||mouseMoveX>=chartAreaX+chartAreaWidth||mouseMoveY>=chartAreaY+chartAreaHeight)&&this.multiSelectMouseUp(evt),modifiedX=this.PreviousCoords.X-evt.pageX,modifiedY=this.PreviousCoords.Y-evt.pageY,rectX-=modifiedX,rectY-=modifiedY,this.PreviousCoords.X=evt.pageX,this.PreviousCoords.Y=evt.pageY,selectionSettingsType){case"x":rectX>=x1-xPlotOffset&&rectWidth+rectX-x1<=x2-x1-xPlotOffset&&$(selctRectId+selectedRectIndex).attr({x:rectX});break;case"y":rectHeight+rectY-y2<=y1-y2+yPlotOffset&&rectY>=y2-yPlotOffset&&$(selctRectId+selectedRectIndex).attr({y:rectY});break;case"xy":rectX>=x1-xPlotOffset&&rectWidth+rectX-x1<=x2-x1-xPlotOffset&&rectHeight+rectY-y2<=y1-y2+yPlotOffset&&rectY>=y2-yPlotOffset&&$(selctRectId+selectedRectIndex).attr({x:rectX,y:rectY})}}},isTouch:function(e){var t=(this.model.browserInfo,e.originalEvent?e.originalEvent:e);return"touch"==t.pointerType||2==t.pointerType||t.type.indexOf("touch")>-1},highlightStart:function(e,t,i,s,a){if(null!=e.target.parentNode)var i=i||e.target.parentNode.id,r=i.indexOf(this.svgObject.id+"_SeriesGroup_")>=0||i.indexOf(this.svgObject.id+"_symbolGroup_")>=0||i.indexOf(this.svgObject.id+"_TrackSymbol_")>=0||i.indexOf(this.svgObject.id+"_Chart3D")>=0;this.model.enableCanvasRendering?this.highlightCanvas(this,e,t):this.highlightSvg(this,i,r,e,t,s,a)},_changeDraggingPoints:function(e,t,i,s){i="datetime"==e.xAxis._valueType?new Date(i):i,s="datetime"==e.yAxis._valueType?new Date(s):s;var a=e.dragSettings.type.toLowerCase();"x"!=a&&"xy"!=a||"category"==e.xAxis._valueType||(this.dragPoint?(e.pointCollection[t].x=i,e.pointCollection[t].xValue="datetime"==e.xAxis._valueType&&"object"!=typeof i?new Date(i):i):(e._visiblePoints[t].x=e.points[t].x=i,e._visiblePoints[t].xValue=e.points[t].xValue="datetime"==e.xAxis._valueType&&"object"==typeof i?Date.parse(i):i),ej.util.isNullOrUndefined(e.dataSource)||(e.dataSource[t][e.xName]=i)),"y"!=a&&"xy"!=a||(this.dragPoint?(e.pointCollection[t].y=s,e.pointCollection[t].YValues[0]="datetime"==e.yAxis._valueType&&"object"!=typeof s?new Date(s):s):(e._visiblePoints[t].y=e.points[t].y=s,e._visiblePoints[t].YValues[0]=e.points[t].YValues[0]="datetime"==e.yAxis._valueType&&"object"==typeof s?Date.parse(s):s),ej.util.isNullOrUndefined(e.dataSource)||(e.dataSource[t][e.yName]=s))},_dragDelta:function(e,t,i,s,a,r){var n={X:i,Y:s},o={X:e,Y:t},l=$.extend({},this.commonDragEventArgs);l.data={seriesIndex:a,pointIndex:r,oldValue:n,newValue:o},this._trigger("dragging",l),this.commonDragEventArgs=l},_getDraggedPoint:function(e,t,i){var s,a,r,n,o,l=ej.EjSvgRender.utils._getTransform(e.xAxis,e.yAxis,this.model.requireInvertedAxes);return this.model.requireInvertedAxes?(n=l.y+l.height-i,o=t-l.x):(n=t-l.x,o=l.y+l.height-i),s=ej.EjSvgRender.utils._getValuebyPoint(n,o,e,this.model.requireInvertedAxes),a=parseFloat(s.PointX.toFixed(2)),r=parseFloat(s.PointY.toFixed(2)),{X:a,Y:r}},_pointDragandDrop:function(e,t,i){var s,a=e.data.seriesIndex,r=[],n=null,o=e.type.toLowerCase(),l={};l.axes={};for(var d=0;d<this.model._axes.length;d++)l.axes[this.model._axes[d].name]={};$("[id*=_Marker]").remove();var h=this._getDraggedPoint(e,this.mousemoveX,this.mousemoveY),c=h.X,u=h.Y,p=this.commonDragEventArgs.data.currentPoint?this.commonDragEventArgs.data.currentPoint.xValue:this.commonDragEventArgs.data.oldValue.X,m=this.commonDragEventArgs.data.currentPoint?this.commonDragEventArgs.data.currentPoint.yValue[0]:this.commonDragEventArgs.data.oldValue.Y;if(e.region){var g=e.region;i._dragDelta(c,u,p,m,g.SeriesIndex,g.Region.PointIndex)}else{var f=e.pointData;i._dragDelta(c,u,p,m,f.seriesIndex,f.index)}if(this.model.enableCanvasRendering){if(this.canvasElement&&this.canvasElement.clearRect(0,0,i.svgWidth,i.svgHeight),0==$("#"+i._id+"_PreviewSeries"+a+"_canvas").length){var _=document.getElementById(i._id+"_canvas").getBoundingClientRect();s=this.createCanvasElement(i._id+"_PreviewSeries"+a+"_canvas",i.svgWidth,i.svgHeight,_),this.createRect(i,s),this.canvasElement=s}}else{e.xAxis=null===e.xAxis||void 0===e.xAxis?this.model._axes[0]:e.xAxis,e.yAxis=null===e.yAxis||void 0===e.yAxis?this.model._axes[1]:e.yAxis;var v=ej.EjSvgRender.utils._getTransform(e.xAxis,e.yAxis,this.model.requireInvertedAxes),n="translate("+v.x+","+v.y+")",b={id:this.svgObject.id+"_PreviewSeriesGroup",transform:n,cursor:"default",visibility:"visible"};$("#"+this.svgObject.id+"_PreviewSeriesGroup").attr("transform",n),this.gPreviewSeriesGroupEle||(this.chartObj=i,this.chartObj.gPreviewSeriesGroupEle=this.gPreviewSeriesGroupEle=this.svgRenderer.createGroup(b)),this.gPreviewSeriesGroupEle.childNodes.length>0&&this.gPreviewSeriesGroupEle.removeChild(this.gPreviewSeriesGroupEle.childNodes[0])}r=$.extend(!0,{},e._visiblePoints),e.pointCollection=r,r.length=e._visiblePoints.length;var x=i.commonDragEventArgs.data,y=x.pointIndex,w=x.seriesIndex;i._changeDraggingPoints(e,y,x.newValue.X,x.newValue.Y);var C=new ej.seriesTypes[o],S=e.pointCollection[y];if("bubble"==o){var T=ej.EjSvgRender.utils._getPoint(S,e),R={id:this.svgObject.id+"_PreviewSeries"+w+"_Point"+y,cx:T.X+this.canvasX,cy:T.Y+this.canvasY,r:S.radius,fill:e.fill,"stroke-width":2,visibility:"visible","stroke-dasharray":"",opacity:.6,stroke:"transparent"};this.model.enableCanvasRendering?ej.EjCanvasRender.prototype.drawCircle(R,s):this.svgRenderer.drawCircle(R,this.gPreviewSeriesGroupEle),this.svgRenderer.append(this.gPreviewSeriesGroupEle,this.gSeriesEle)}else if("scatter"==o){var T=ej.EjSvgRender.utils._getPoint(S,e),k=e.marker.shape.capitalizeFirstString(),T={startX:T.X+this.canvasX,startY:T.Y+this.canvasY},O={ShapeSize:{width:e.marker.size.width,height:e.marker.size.height},ID:this.svgObject.id+"_PreviewSeries"+w+"_Point"+y,Style:{Color:e.fill,BorderWidth:e.marker.border.width,BorderColor:"transparent",Opacity:.6,Visibility:"visible"}};this.model.enableCanvasRendering?ej.EjSvgRender.chartSymbol["_draw"+k](T,O,this,s):ej.EjSvgRender.chartSymbol["_draw"+k](T,O,this,this.gPreviewSeriesGroupEle),this.svgRenderer.append(this.gPreviewSeriesGroupEle,this.gSeriesEle)}else if("column"==o||"bar"==o){S.xValue="object"==typeof S.xValue?Date.parse(S.xValue):S.xValue;var D=ej.EjSeriesRender.prototype.getOrigin(i,e,l),I=e.sidebysideInfo,j=S.YValues[0],L=D,A=ej.EjSeriesRender.prototype.calculateSides(S,I),E=A.x1,P=A.x2,M=ej.EjSeriesRender.prototype.getRectangle(E,j,P,L,e,i);R={id:this.svgObject.id+"_PreviewSeries"+w+"_Point"+y,x:M.X+this.canvasX,y:M.Y+this.canvasY,width:M.Width,height:M.Height,cornerRadius:e.cornerRadius,fill:e.fill,"stroke-width":2,plot:j<0?"negative":"positive",opacity:.6,stroke:"transparent","stroke-dasharray":""},this.model.enableCanvasRendering?ej.EjCanvasRender.prototype.drawRect(R,s):(this.svgRenderer.drawRect(R,this.gPreviewSeriesGroupEle),this.svgRenderer.append(this.gPreviewSeriesGroupEle,this.gSeriesEle))}else"spline"!=o&&"splinearea"!=o||(S.xValue="object"==typeof S.xValue?Date.parse(S.xValue):S.xValue),C.draw(this,e,l);var T=ej.EjSvgRender.utils._getPoint(S,e);if(e.tooltip.visible)if(ej.util.isNullOrUndefined(e.tooltip.template))$(".tooltipDiv"+this._id).remove(),i.displayShowTooltip(T,S,e,S.actualIndex);else{$("#"+i.svgObject.id).find("#"+i.svgObject.id+"_TrackToolTip").attr("visibility","hidden");var g={SeriesIndex:w,Region:{PointIndex:S.actualIndex}};i.createTooltip(g,t,e)}},_dragPointMarker:function(e,t,i,s,a){var r,n=null,o=e.seriesIndex;if(n=ej.EjSvgRender.utils._getPoint(a.point,e),this.model.enableCanvasRendering){if(0==$("#"+this.svgObject.id+"_Marker").length){var l=document.getElementById(this.svgObject.id).getBoundingClientRect();r=this.createCanvasElement(this.svgObject.id+"_Marker",this.svgWidth,this.svgHeight,l)}}else{var d={id:this.svgObject.id+"_markerGroup_"+o};this.gMarkerGroupEle||(this.gMarkerGroupEle=this.svgRenderer.createGroup(d))}var h={id:this.svgObject.id+"_Series"+o+"_Point"+a.index+"_Marker",cx:n.X+this.model.m_AreaBounds.X,cy:n.Y+this.model.m_AreaBounds.Y,r:7,fill:e.fill,"stroke-width":3,opacity:1,stroke:"white",visibility:"visible"};this.model.enableCanvasRendering?ej.EjCanvasRender.prototype.drawCircle(h,r):(this.svgRenderer.drawCircle(h,this.gMarkerGroupEle),this.svgRenderer.append(this.gMarkerGroupEle,this.gSeriesEle))},_dragPointGripper:function(e){var t,i=e.region.type.toLowerCase(),s=this.model._visibleSeries[e.region.SeriesIndex],a=(s._visiblePoints[e.region.Region.PointIndex],s.isTransposed),r=s.yAxis.isInversed;if("column"==i||"bar"==i){if(this.model.enableCanvasRendering){var n=document.getElementById(this.svgObject.id).getBoundingClientRect();t=this.createCanvasElement(this.svgObject.id+"_Marker",this.svgWidth,this.svgHeight,n),document.getElementById(t.canvas.id).style.zIndex=1}else{var o={id:this.svgObject.id+"_markerGroup_"+e.region.SeriesIndex};this.gMarkerGroupEle||(this.gMarkerGroupEle=this.svgRenderer.createGroup(o))}var l,d,h,c,u,p,m=e.region.Region.Bounds;(a&&"bar"==i||"column"==i&&!a)&&(l=m.Width,d=m.X),(!a&&"bar"==i||"column"==i&&a)&&(l=m.Height,d=m.Y),h=l<75?l-l/3:50,c=l>75?l-75:0,u=(h-6)/6,p=c/2+d+h/6+u/2;for(var g=1;g<=3;g++){var f={id:this.svgObject.id+"_Series"+e.region.SeriesIndex+"_Point"+e.region.Region.PointIndex+"_Marker"+g,fill:"white",opacity:1,stroke:"white",visibility:"visible"};p+=1==g?u:2*u+3,f.r=Math.abs(u),(a&&"bar"==i||"column"==i&&!a)&&(f.cx=p,f.cy=r?m.Y+m.Height-u-5:m.Y+u+5),(!a&&"bar"==i||"column"==i&&a)&&(f.cx=r?m.X+u+5:m.X+m.Width-u-5,f.cy=p),this.model.enableCanvasRendering?ej.EjCanvasRender.prototype.drawCircle(f,t):this.svgRenderer.drawCircle(f,this.gMarkerGroupEle)}this.svgRenderer.append(this.gMarkerGroupEle,this.gSeriesEle)}},chartMouseMove:function(e){function t(t){var i=x._id;if($("#"+i+"_tooltip").length<=0){var s=$("<div></div>").attr({id:i+"_tooltip",class:"zoom"+i});$(s).html("&nbsp"+t+"&nbsp"),$(document.body).append(s),$(s).css({left:e.pageX+10,top:e.pageY+10,display:"block",position:"absolute","z-index":"13000",cursor:"default","font-family":"Segoe UI",color:"#707070","font-size":"12px","background-color":"#FFFFFF",border:"1px solid #707070"})}else $("#"+i+"_tooltip").css({left:e.pageX+10,top:e.pageY+10})}var i=this.GetSeriesPoint(e),s=this.svgObject,a=this.model,r=a.zooming.enable,n=a.enableCanvasRendering;a.event=e,clearTimeout(this.removeTooltip),this.doPan&&e.target.id.indexOf(this._id+"_scrollbar")>-1&&(this.doPan=!1);var o=(e.target.classList,{left:0,top:0});if("cartesianaxes"!=this.multiSelectAreaType||r||n||this.multiSelectMouseMove(e),this.rotateActivate&&this.oPreviousCoords){var l=this.oPreviousCoords.Y-this.mousemoveY,d=this.oPreviousCoords.X-this.mousemoveX;if(d||l){if(a.tilt-=l,a.rotation+=d,this.model.isSelected)var h=this.selectedStyle(this);this.isTouch(e)||$(this.chart3D).empty(),$("#template_group_"+this._id).empty();var c={Width:$(s).width(),Height:$(s).height()};if(this.graphics.view(s,this,a.rotation,a.tilt,c,a.perspectiveAngle,a.depth),this.svgRenderer.append(this.chart3D,s),this.model.isSelected)for(var u=0;u<h.length;u++)$("#"+h[u].id).attr("class",h[u].className)}this.oPreviousCoords.Y=this.mousemoveY,this.oPreviousCoords.X=this.mousemoveX}var p=(e.target.id,s.id),m=this.isZoomButtonHovered(e.target),g=a._visibleSeries,f=g.length;$("[id*=_Marker]").remove();for(var u=f-1;u>=0;u--){var _=g[u];if(y=_.type.toLowerCase(),_.dragSettings.enable&&!a.enable3D){if(this._enableDragging(_,u,e),this.dragPoint)break;Z=this.calMousePosition(e),this.mousemoveX=Z.X,this.mousemoveY=Z.Y;var v=this.GetSeriesPoint(e);if(!_.marker.visible&&"bubble"!=y&&"scatter"!=y&&"column"!=y&&"bar"!=y){var b=this.getClosesPointXY(w,C,_,this.mousemoveX,this.mousemoveY,e);if(b.point){_.seriesIndex=u,this._dragPointMarker(_,this.mousemoveX,this.mousemoveY,e,b),this.closestXyPoint=b;break}}if(v&&v.region.SeriesIndex==u){this._dragPointGripper(v);break}}}var x=this;if(this.dragPoint){var y,w=[],C=[];$(document).keyup(function(e){27==e.keyCode&&($(".tooltipDiv"+this._id).remove(),$("#"+p+"_TrackToolTip").remove(),x.dragPoint=!1,g[x.commonDragEventArgs.data.seriesIndex].pointCollection=null,x.chartMouseUp(e))});var S=this.dragIndex.seriesIndex;x._pointDragandDrop(g[S],e,x)}if(this.calMousePosition(e),$("#"+this._id+"_tooltip").remove(),!this.dragPoint&&(this.drag||m||(this.isTouch(e)||a.doubleTapped)&&!a.crosshairMoved)||this.chartInteractiveBehavior(e),a.crosshair.visible&&"cartesianaxes"==a.AreaType||(n&&i||($("[class*=HighlightStyle]").attr("class",""),$("[class*=HighlightLegendStyle]").attr("class",""),$("[class*=HighlightLegendPathStyle]").attr("class",""),$("[class*=HighlightPathStyle]").attr("class",""),$("[class*=Highlightseries]").attr("class",""),$("[id*="+this._id+"_Highlight_]").remove()),this.highlightStart(e,i)),!this.panning){var T="#"+p;if(r&&"cartesianaxes"==a.AreaType&&!a.enable3D&&this.drag&&!this.dragPoint&&!this.chartRightClick){this.disableTrackBall(),$("#"+p+"_ZoomArea").remove();var R,k,O,D,I=this.mousemoveX,j=this.mousemoveY,L=a.m_AreaBounds;this.mousemoveX<L.X?I=L.X:this.mousemoveX>L.X+L.Width&&(I=L.X+L.Width),j=this.mousemoveY<L.Y?L.Y:this.mousemoveY>L.Y+L.Height?L.Y+L.Height:this.mousemoveY;var A=a.zooming.type.toLowerCase();"x"==A?(R=Math.abs(I-this.mouseDownX),k=L.Height,O=I>this.mouseDownX?this.mouseDownX:I,D=L.Y):"y"==A?(R=L.Width,k=Math.abs(j-this.mouseDownY),O=L.X,D=j>this.mouseDownY?this.mouseDownY:j):(R=Math.abs(I-this.mouseDownX),k=Math.abs(j-this.mouseDownY),O=I>this.mouseDownX?this.mouseDownX:I,D=j>this.mouseDownY?this.mouseDownY:j),$(s).css({"-moz-user-select":"-moz-none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}),this.zooming=!0;var E={id:p+"_ZoomArea",x:O+o.left,y:D+o.top,width:R,height:k,fill:"rgba(69,114,167,0.25)","stroke-width":1,stroke:"rgba(69,114,167,0.25)","clip-path":"url(#"+p+"_ChartAreaClipRect)"};n?this.svgRenderer.drawZoomRect(E,this):this.svgRenderer.drawRect(E,s)}}var P=a.zooming.enableDeferredZoom;if(this.panning&&this.doPan&&"cartesianaxes"==a.AreaType&&!this.dragPoint)if(this.currentPageX=e.pageX,this.currentPageY=e.pageY,$("#secondCanvas").remove(),$("#"+this._id+"_canvas").css({cursor:"pointer"}),ej.isTouchDevice()||P){if(ej.isTouchDevice()||P){for(var M=0;M<g.length;M++){var F=a.series[M],N=ej.EjSvgRender.utils._getTransform(F.xAxis,F.yAxis,a.requireInvertedAxes),z=e.pageX-this.oPreviousCoords.x+N.x,V=e.pageY-this.oPreviousCoords.y+N.y,B="translate("+z+","+V+")";$("#"+p+"_SeriesGroup_"+M).attr("transform",B),$("#"+p+"_symbolGroup_"+M).attr("transform",B),$("#"+p+"_TextGroup_"+M).attr("transform",B)}for(var S=0;S<a.indicators.length&&a.indicators[S]._points.length>0;S++){var H=a.indicators[S];N=ej.EjSvgRender.utils._getTransform(H.xAxis,H.yAxis,a.requireInvertedAxes),z=e.pageX-this.oPreviousCoords.x+N.x,V=e.pageY-this.oPreviousCoords.y+N.y,B="translate("+z+","+V+")",$("#"+p+"_indicatorGroup_"+S).attr("transform",B)}}}else{var Y;Y={x:this.oPreviousCoords.x-e.pageX,y:this.oPreviousCoords.y-e.pageY},this.oPreviousCoords={x:e.pageX,y:e.pageY},$.each(a._axes,function(e,t){var i=Math.max(1/ej.EjSvgRender.utils._minMax(t.zoomFactor,0,1),1);x.translate(t,Y.x,Y.y,i)}),this._updateScroll(),this.redraw(!0,null,e.target,this.isTouch(e)),this._cursorToPointer(),this._enableZoomingButtons()}var U=e.target.id;""!=U||ej.util.isNullOrUndefined(e.target.parentNode)||(U=e.target.parentNode.id.indexOf("_XLabel_")>=0||e.target.parentNode.id.indexOf("_YLabel_")>=0?e.target.parentNode.id:U);var T=this._id,W=ej.util.isNullOrUndefined(e.target.parentNode)?"":e.target.parentNode.id;r&&(W==T+"_svg_ResetZoom"?t(this._localizedLabels.reset):W==T+"_svg_PanBtn"?t(this._localizedLabels.pan):W==T+"_svg_ZoomBtn"?t(this._localizedLabels.zoom):W==T+"_svg_ZoomInBtn"?t(this._localizedLabels.zoomIn):W==T+"_svg_ZoomOutBtn"&&t(this._localizedLabels.zoomOut));var X=this.getAxisLabelData(e);if(X){var G=$.extend({},ej.EjSvgRender.commonChartEventArgs);G.data=X,this._trigger("axisLabelMouseMove",G)}if(!this.isTouch(e)){this.axisTooltip(e,U),a.title.enableTrim&&this.showTitleTooltip(e,U);for(var u=0,f=a.series.length;u<f;u++){var F=a.series[u],q=F.marker&&F.marker.dataLabel;if(F._enableSmartLabels&&!this.model.enable3D&&!q.enableWrap){var Q=q.template,K=q.font;"none"==a.AreaType&&ej.util.isNullOrUndefined(Q)&&this.datalabelTooltip(e,u,K)}}}$(s).find(T+"_ResetZoom,"+T+"_PanBtn,"+T+"_ZoomBtn").length>0&&$(s).find(T+"_ResetZoom,"+T+"_PanBtn,"+T+"_ZoomBtn").appendTo(s);var K,F,S,Z;n&&$(this.legendContainer).children().css("cursor","default"),n&&(-1!=U.indexOf("_ResetZoom")||-1!=W.indexOf("_ResetZoom")?t(this._localizedLabels.reset):-1!=U.indexOf("_PanBtn")||-1!=W.indexOf("_PanBtn")?t(this._localizedLabels.pan):-1!=U.indexOf("_ZoomBtn")||-1!=W.indexOf("_ZoomBtn")?t(this._localizedLabels.zoom):-1!=U.indexOf("_ZoomInBtn")||-1!=W.indexOf("_ZoomInBtn")?t(this._localizedLabels.zoomIn):-1==U.indexOf("_ZoomOutBtn")&&-1==W.indexOf("_ZoomOutBtn")||t(this._localizedLabels.zoomOut),this.isTouch(e)||(this._textTooltip(e,a.xAxisLabelRegions),this._textTooltip(e,a.yAxisLabelRegions)));var J=this;if(a.xAxisTitleRegion){var I=this.mousemoveX,j=this.mousemoveY,ee=this.model.primaryXAxis.title.isReversed,te=this.model.primaryXAxis.font;$.each(a.xAxisTitleRegion,function(t,i){I>=i.Bounds.X&&I<=i.Bounds.X+i.Bounds.Width&&j>=i.Bounds.Y-i.Bounds.Height&&j<=i.Bounds.Y&&i.trimText!=i.labelText&&J.showAxisTooltip(e.pageX,e.pageY,i.labelText,i.trimText,ee,te)})}if(a.yAxisTitleRegion){var I=this.mousemoveX,j=this.mousemoveY,ee=this.model.primaryXAxis.title.isReversed,te=this.model.primaryXAxis.font;$.each(a.yAxisTitleRegion,function(t,i){I>=i.Bounds.X&&I<=i.Bounds.X+i.Bounds.Width&&j>=i.Bounds.Y-i.Bounds.Height&&j<=i.Bounds.Y&&i.trimText!=i.labelText&&J.showAxisTooltip(e.pageX,e.pageY,i.labelText,i.trimText,ee,te)})}if(a.axisMultiLevelLabelRegions){var I=this.mousemoveX,j=this.mousemoveY;$.each(a.axisMultiLevelLabelRegions,function(t,i){I>=i.Bounds.X&&I<=i.Bounds.X+i.Bounds.Width&&j>=i.Bounds.Y-i.Bounds.Height&&j<=i.Bounds.Y&&i.trimText!=i.labelText&&J.showAxisTooltip(e.pageX,e.pageY,i.labelText)})}var G=$.extend({},ej.EjSvgRender.commonChartEventArgs);G.data={location:{x:this.mousemoveX,y:this.mousemoveY},size:{height:a.svgHeight,width:a.svgWidth},id:e.target.id,pageX:e.pageX,pageY:e.pageY},this._trigger("chartMouseMove",G)},axisTooltip:function(e,t){var i=this.svgObject.id,s=this.model.hAxes,a=this.model.vAxes;if(t.indexOf("svghorizontal")>-1){var r=s[0],n=t.replace(this._id,"").replace("_svghorizontal",""),o=r.visibleLabels[parseInt(n)];if(o.Text=o.Text.toString(),o.Text.indexOf("...")>-1){var l=o.Text==o.originalText?"":o.originalText;this.showAxisTooltip(e.pageX,e.pageY,l)}}if(t.indexOf("_YLabel_")>=0){for(var r,d=0;d<a.length;d++)if(t.indexOf(i+"_"+a[d].name+"_YLabel_")>=0){r=a[d];break}if(r&&r.enableTrim){c=r.visibleLabels.length;for(var h=0;h<c&&"cartesianaxes"==this.model.AreaType;h++)if(t==i+"_"+a[d].name+"_YLabel_"+h){var o=r.visibleLabels[h],l=o.Text==o.displayText?"":r.labelFormat?r.labelFormat.replace("{value}",o.Text):o.Text;if(""==l)break;"inside"==r.labelPosition.toLowerCase()&&(this._hideTooltip(),this._removeTrackBall()),this.showAxisTooltip(e.pageX,e.pageY,l,o.displayText)}}}if(t.indexOf("_XLabel_")>=0){for(var r,c,d=0;d<s.length;d++)if(t.indexOf(i+"_"+s[d].name+"_XLabel_")>=0){r=s[d];break}if(r&&(r.enableTrim||"trim"==r.labelIntersectAction.toLowerCase()||"wrapbyword"==r.labelIntersectAction.toLowerCase())){c=r.visibleLabels.length;for(var u=r.isInversed,p=r.font,h=0;h<c&&"cartesianaxes"==this.model.AreaType;h++)if(t==i+"_"+s[d].name+"_XLabel_"+h){var o=r.visibleLabels[h],l=o.Text==o.displayText?"":o.Text;if(""==l)break;"inside"==r.labelPosition.toLowerCase()&&(this._hideTooltip(),this._removeTrackBall()),this.showAxisTooltip(e.pageX,e.pageY,l,o.displayText,u,p)}}}},showTitleTooltip:function(e,t){var i,s=(ej.EjSvgRender.utils._measureText(this.model.title.text,$(this.svgObject).width()-this.model.margin.left-this.model.margin.right,this.model.title.font),this.model),a=s._titleLocation,r=s._subTitleLocation,n=s.title.enableTrim,o=s.elementSpacing,l=this.mousemoveX,d=this.mousemoveY,h=(s.title.textOverflow.toLowerCase(),s.title.subTitle.enableTrim),c=(s.title.subTitle.textOverflow.toLowerCase(),s.title.text),u=s.title.subTitle.text,p=s.title.isReversed;n&&this.model.trimTooltip&&(i=ej.EjSvgRender.utils._trimText(c,s.title.maximumWidth,s.title.font),
t.indexOf("ChartTitleText")>=0?this.showAxisTooltip(e.pageX,e.pageY,c,i,p,s.title.font):this.model.enableCanvasRendering&&l>=a.X-o&&l<=a.X-o+a.size.width&&d>=a.Y-a._height&&d<=a.Y+a.size.height&&this.showAxisTooltip(e.pageX,e.pageY,c,i,p,s.title.font)),h&&s.subTitleTooltip&&(i=ej.EjSvgRender.utils._trimText(u,s.title.subTitle.maximumWidth,s.title.subTitle.font),t.indexOf("ChartSubTitleText")>=0?this.showAxisTooltip(e.pageX,e.pageY,u,i,p,s.title.subTitle.font):s.enableCanvasRendering&&l>=r.X&&l<=r.X+r.size.width&&d>=r.Y&&d<=r.Y+r.size.height&&this.showAxisTooltip(e.pageX,e.pageY,u,i,p,s.title.subTitle.font))},_updateScroll:function(){for(var e,t=this.model.scrollObj,i=t?t.length:0,s=this.model._axes,a=this.scrollbarContainer,r=0;r<i;r++)t[r]&&(e=t[r],e.zoomPosition==s[r].zoomPosition&&e.zoomFactor==s[r].zoomFactor||(e.zoomPosition=s[r].zoomPosition,e.zoomFactor=s[r].zoomFactor,a._initializeScrollbarVariables(e),a._scrollbarUpdate.call(this,e),a._setScrollPosition.call(this,e.startX,e.startX+e.rectWidth,e)))},_hideTooltip:function(){$("#"+this.svgObject.id).find("#"+this.svgObject.id+"_TrackToolTip").attr("visibility","hidden"),$("#"+this.svgObject.id+"_TrackToolTip").attr("visibility","hidden").hide(),$(".tooltipDiv"+this._id).css("display","none")},_removeHighlight:function(){if($("[id*=HighlightSegment]").remove(),$("[id*=HighlightPath]").remove(),$("[id*=HighlightLegendSegment]").remove(),$("[id*=HighlightLegendPath]").remove(),$("[id*=HighlightDef]").remove(),$("[id*=Highlightseries]").remove(),$("[id*="+this._id+"_Highlight_]").remove(),!this.model.enableCanvasRendering&&!this.vmlRendering){var e=this.svgObject.querySelector("[class^='Highlight']");if(null!==e&&null==e.length)e.removeAttribute("class");else for(var t=e&&e.length;t--;)e.removeAttribute("class")}},_removeSelection:function(){$("[id*="+this._id+"_SelectionCluster_Legend]").remove(),$("[id*="+this._id+"_Selection_series]").remove(),$("[id*="+this._id+"_Selection_Cluster]").remove(),$("[id*="+this._id+"SelectionSegment]").remove(),$("[id*="+this._id+"SelectionPath]").remove(),$("[id*="+this._id+"SelectionLegend]").remove(),$("[id*="+this._id+"SelectionDef]").remove(),$("[id*="+this._id+"Selectionseries]").remove(),$("[id*="+this._id+"_Selection_]").remove()},datalabelTooltip:function(e,t,i){var s=this.calMousePosition(e);this.mousemoveX=s.X,this.mousemoveY=s.Y;var a,r,n,o,l,d,h,c,u=this._id,p=this.mousemoveX,m=this.mousemoveY,g=this.vmlRendering,f=this.model.elementSpacing,_=this;ej.util.isNullOrUndefined(this.accDataLabelRegion[t])||$.each(this.accDataLabelRegion[t],function(t,s){a=s.bounds.minX,r=s.bounds.minY,n=s.bounds.maxX,o=s.bounds.maxY,g&&(a=s.bounds.minX+s.bounds.width/2,n=s.bounds.maxX+s.bounds.width/2,r=s.bounds.minY,o=s.bounds.maxY),p>=a&&p<=n&&m>=r&&m<=o&&($("#"+u+"_tooltip").remove(),l=$("<div></div>").attr({id:u+"_tooltip",class:"ejTooltip"+u}),s.trimmedText!=s.text&&($("#"+_.svgObject.id+"_TrackToolTip").hide(),$(l).html(s.text),$(document.body).append(l),d=ej.EjSvgRender.utils._measureText(s.text,s.text.length,s.font).width,$(l).css({top:e.pageY+f,display:"block",position:"absolute","z-index":"13000",cursor:"default",color:"#000000","font-size":i.size,"background-color":"#FFFFFF",border:"1px solid #707070","white-space":"nowrap",padding:"5px"}),"pyramid"!=s.type&&"funnel"!=s.type||(h=_.model.m_AreaBounds.Width+_.model.m_AreaBounds.X-e.pageX,h>d?$(l).css({left:e.pageX+f}):(c=e.pageX-d+2*f,$(l).css({left:c}))),"pie"!=s.type&&"doughnut"!=s.type&&"pieofpie"!=s.type||(a>s.bounds.centerX?(h=_.svgWidth-_.model.margin.left-_.model.margin.right-p,h<d?(c=e.pageX-d,$(l).css({left:c+f})):$(l).css({left:e.pageX+f})):(h=p,h<d?$(l).css({left:e.pageX+f}):(c=e.pageX-d,$(l).css({left:c-2*f}))))))})},showAxisTooltip:function(e,t,i,s,a,r){var n=this._id,o=$("<div></div>").attr({id:n+"_tooltip",class:"ejTooltip"+n});if($(o).html(i),a&&!ej.util.isNullOrUndefined(r))var l=ej.EjSvgRender.utils._measureText(i,null,r).width,d=ej.EjSvgRender.utils._measureText(s,null,r).width,h=d<=l?l:d;$(document.body).append(o),$(o).css({left:a?e-h:e+10,top:t+10,display:"block",position:"absolute","padding-left":"3px","padding-right":"3px","z-index":"13000",cursor:"default","font-family":"Segoe UI",color:"#707070","font-size":"12px","background-color":"#FFFFFF",border:"1px solid #707070"})},_textTooltip:function(e,t,i,s){var a,r,n=this,o=this.calMousePosition(e),l=this.model.legend._ejScroller,d=0,h=0,c=i&&($("#legend_"+this._id).find('[class*="e-vscrollbar"]').length||"scroll"==$("#legend_"+this._id)[0].style.overflowY)?o.X-18:o.X,u=o.Y,p=c,m=u,g=this._id,f=n.model,_=f.legend,v=_.enableScrollbar;_.textOverflow.toLowerCase();h=l?$("#legend_"+this._id).ejScroller("instance").model.scrollTop:$("#legend_"+this._id).scrollTop(),d=l?$("#legend_"+this._id).ejScroller("instance").model.scrollLeft:$("#legend_"+this._id).scrollLeft(),i&&l&&(d=0==d?$("#legend_"+this._id).ejScroller("instance")._rtlScrollLeftValue:$("#legend_"+this._id).ejScroller("instance").model.scrollLeft==$("#legend_"+this._id).ejScroller("instance")._rtlScrollLeftValue?0:$("#legend_"+this._id).ejScroller("instance")._rtlScrollLeftValue-$("#legend_"+this._id).ejScroller("instance").model.scrollLeft),(v||l)&&(p=c+(d||0),m=u+(h||0)),$.each(t,function(t,n){if(p>=n.bounds.x&&p<=n.bounds.x+n.bounds.width&&(m>=n.bounds.y&&m<=n.bounds.y+n.bounds.height||m>=n.bounds.y-n.bounds.height/3&&m<=n.bounds.y)&&($("#"+g+"_tooltip").remove(),r=$("<div></div>").attr({id:g+"_tooltip",class:"ejTooltip"+g}),(a="array"==jQuery.type(n.trimText)?n.trimText.join(" "):n.trimText)!=n.labelText)){if($(r).html(n.labelText),i&&!ej.util.isNullOrUndefined(s))var o=ej.EjSvgRender.utils._measureText(n.labelText,null,s).width;$(document.body).append(r),$(r).css({left:i?e.pageX-o-15:e.pageX+10,top:e.pageY+10,display:"block",position:"absolute","padding-left":"3px","padding-right":"3px","z-index":"13000",cursor:"default","font-family":"Segoe UI",color:"#707070","font-size":"12px","background-color":"#FFFFFF",border:"1px solid #707070"})}})},pieExplosion:function(e){this.model.explode=!0;var t,i,s,a=e,r=a.region.Series,n=a.region.SeriesIndex,o=new(ej.seriesTypes[r.type.toLowerCase()]),l=r.explodeIndex,d=(r.labelPosition.toLowerCase(),{SeriesIndex:a.pointData[0].SeriesIndex,PointIndex:a.pointData[0].Index}),h=this.model._isPieOfPie?a.pointData[0].PointIndex:a.region.Series._visiblePoints[a.pointData[0].Index].actualIndex;if(l!=h&&!a.region.Series.explodeAll){if(r.explodeIndex=h,s=a.pointData[0].PieSeriesIndex,!ej.util.isNullOrUndefined(this.model.explodeValue)&&this.model.explodeValue!=d){this.model.explodeValue.SeriesIndex!=a.region.SeriesIndex&&(r=this.model._visibleSeries[this.model.explodeValue.SeriesIndex]);var c=this.model._isPieOfPie?this._getPieOfPiePoint(this.model.explodeValue.PointIndex,r):r._visiblePoints[this.model.explodeValue.Index],u=o._calculateArcData(this,this.model.explodeValue.PointIndex,c,r,this.model.explodeValue.SeriesIndex,this.model.explodeValue.PieSeriesIndex);t=this.svgObject.id+"_SeriesGroup_"+this.model.explodeValue.SeriesIndex,i=1==this.model.explodeValue.PieSeriesIndex?$(this.gSeriesEle).children("#"+t)[1]:$(this.gSeriesEle).children("#"+t)[0];for(var p=$(i).children(),m=0;m<p.length;m++){var g=p[m],f=this.svgRenderer._getAttrVal($(g)[0],"data-pointIndex");if(parseInt(f)==this.model.explodeValue.PointIndex){this.svgRenderer._setAttr($(g),{d:u.Direction});break}}o.drawDataLabelAcc(this,r,this.model.explodeValue.Index,c,this.model.explodeValue.SeriesIndex,this.model.explodeValue.PieSeriesIndex)}var _=this.model._isPieOfPie?this._getPieOfPiePoint(e.region.Region.PointIndex,r):r._visiblePoints[a.pointData[0].Index];u=o._calculateArcData(this,a.pointData[0].PointIndex,_,a.region.Series,n,s),t=this.svgObject.id+"_SeriesGroup_"+a.region.SeriesIndex,i=1==s?$(this.gSeriesEle).children("#"+t)[1]:$(this.gSeriesEle).children("#"+t)[0];for(var p=$(i).children(),m=0;m<p.length;m++){var g=p[m],f=this.svgRenderer._getAttrVal($(g)[0],"data-pointIndex");if(parseInt(f)==a.pointData[0].PointIndex){this.svgRenderer._setAttr($(g),{d:u.Direction});break}}if(this.model.enableCanvasRendering){var v=document.getElementById(this.svgObject.id).getClientRects()[0];this.svgRenderer.ctx.clearRect(v.left,v.top,v.width,v.height),$("#"+this._id).ejChart("redraw")}o.drawDataLabelAcc(this,r,a.pointData[0].Index,_,n,s),this.model.explodeValue={SeriesIndex:a.pointData[0].SeriesIndex,PointIndex:a.pointData[0].PointIndex,Index:a.pointData[0].Index,PieSeriesIndex:a.pointData[0].PieSeriesIndex}}a.region.Series.explodeIndex=l},displayGroupingTemplate:function(e,t,i,s,a,r,n,o,l){var d,h,c,u,p,m,g,f,_,v=[],b=[],x=[],y=[];b=$.extend(!0,{},l),y=$.extend(!0,{},a),d=Object.keys(y).length,v=$.extend(!0,{},s),h=5;for(var w=0;w<d;w++){c=y[w].series.isTransposed,v[w].point.x=v[w].point.x,"datetime"==y[w].series.xAxis._valueType.toLowerCase()&&(v[w].point.x=ej.format(new Date(v[w].point.x),ej.EjSvgRender.utils._dateTimeLabelFormat(y[w].series.xAxis.intervalType,y[w].series.xAxis))),"category"==y[w].series.xAxis._valueType.toLowerCase()&&(v[w].point.x=ej.EjSvgRender.utils._getLabelContent(n,y[w].series.xAxis)),e=ej.util.isNullOrUndefined(e)?0:e,t=ej.util.isNullOrUndefined(t)?0:t,u=this.model.m_AreaBounds.X,p=this.model.m_AreaBounds.Y,m=c||this.model.requireInvertedAxes?y[w].series.yAxis.y:i.X+e+u+this.model.crosshair.marker.size.width+h,g=c||this.model.requireInvertedAxes?y[w].series.xAxis.x+i.Y:this.model.m_AreaBounds.Height/2+p,f=$("#"+this.model.crosshair.trackballTooltipSettings.tooltipTemplate).clone(),$(f).css("background-color",b[w].seriesColor),$(f).css("display","block"),v[w].point.count=1,a.count=void 0;var C={series:a,point:v[w].point};x.push($(f).html($(f).html().parseTemplate(C)))}0==$("#"+this.svgObject.id+"_TrackGroupToolTipTemplate").length&&(_=$("<div id ="+this.svgObject.id+"TrackGroupToolTipTemplate style='pointer-events:none; position: absolute; z-index: 13000; display: block;'></div>"),$(_).appendTo(this.chartContainer)),$(_).append(x);var S=this.model.crosshair.trackballTooltipSettings.border;$(_).css("border",S.width+"px solid "+S.color);var T=parseFloat($(_).css("height")),R=parseFloat($(_).css("width"));g=c||this.model.requireInvertedAxes?g:g-T/2,1!=d||c||(g=i.Y+p+T/2),1==d&&(c||this.model.requireInvertedAxes)&&(m=i.X+e+u+this.model.crosshair.marker.size.width+h-R/2,g=i.Y+p-T-this.model.crosshair.marker.size.height-h),g+T<this.model.m_AreaBounds.Y?g=this.model.m_AreaBounds.Y:g+T/2>this.model.m_AreaBounds.Height&&(g-=T),m+R>u+this.model.m_AreaBounds.Width&&!c&&(m=i.X+e+u-this.model.crosshair.marker.size.width-h-R),$(_).css("left",m),$(_).css("top",g)},displayTemplateTooltip:function(e,t,i,s,a,r,n,o){var l=$.extend(!0,{},s);l.x=l.x,"datetime"==a.xAxis._valueType.toLowerCase()&&(l.x=ej.format(new Date(l.x),ej.EjSvgRender.utils._dateTimeLabelFormat(a.xAxis.intervalType,a.xAxis))),"category"==a.xAxis._valueType.toLowerCase()&&(l.x=ej.EjSvgRender.utils._getLabelContent(n,a.xAxis)),e=ej.util.isNullOrUndefined(e)?0:e,t=ej.util.isNullOrUndefined(t)?0:t;for(var d,h,c=this.model.m_AreaBounds.X,u=this.model._axes,p=a._xAxisName,m=a._yAxisName,g=0,f=u.length;g<f;g++)p==u[g].name?a._isTransposed?d=u[g].Location.Y2:h=u[g].Location.X1:m==u[g].name&&(a._isTransposed?h=u[g].Location.X1:d=u[g].Location.Y2);var _,v=i.X+this.model.crosshair.marker.size.width+h,b=i.Y+t+d;if(0==$("#"+this.svgObject.id+"_TrackToolTipTemplate_"+r).length&&(_=$("<div id="+this.svgObject.id+"_TrackToolTipTemplate_"+r+" style='pointer-events:none;position: absolute; z-index: 13000; display: block;'></div>"),$(document.body).append(_)),null!=this.model.crosshair.trackballTooltipSettings.tooltipTemplate){var x=document.getElementById(this.model.crosshair.trackballTooltipSettings.tooltipTemplate).cloneNode(!0);$(x).css("display","block").appendTo(_),a.count=1,l.count=1;var y=this.getSeriesColor(l,r,a);$(_).css("background-color","array"==jQuery.type(y)?y[0].color:y);var w={series:a,point:l};$(_).html($(_).html().parseTemplate(w))}b-=parseFloat($(_).css("height"))/2;var C=parseFloat($(_).css("height")),S=parseFloat($(_).css("width"));(a.isTransposed||this.model.requireInvertedAxes)&&(b=i.Y+this.model.m_AreaBounds.Y-C-5-this.model.crosshair.marker.size.height,v=i.X+c-S/2),b+C<this.model.m_AreaBounds.Y&&(a.isTransposed||this.model.requireInvertedAxes)&&(b+=C+this.model.crosshair.marker.size.height+5+o.top),v+S>c+this.model.m_AreaBounds.Width&&(v-=S+10+this.model.crosshair.marker.size.width),$(_).css("left",v),$(_).css("top",b)},displayAxisTooltip:function(e,t,i,s,a,r){if("double"==i._valueType.toLowerCase()){var n=i.labelFormat?i.labelFormat.match("{value}"):null;t=i.labelFormat?null!=n?"${value}"==i.labelFormat?i.labelFormat.replace("{value}","$"+Number(t)):i.labelFormat.replace("{value}",Number(t)):ej.format(Number(t),i.labelFormat,this.model.locale):t}for(var o,l=0,d=i.orientation.toLowerCase(),h=0,c=0,u=i._opposed,p=this.model.enableCanvasRendering,m=u?l+10+(i.x+i.width):i.x+i.width,g=0;g<this.model._axes.length;g++)this.model._axes[g].majorTickLines.size>l&&(l=this.model._axes[g].majorTickLines.size);if(e.X>=0&&e.X<=m){var f=e.X,_=e.Y,v=$.extend({},ej.EjSvgRender.commonChartEventArgs);v.data={axisIndex:s,chartAxis:i,currentTrackText:t,location:a},this._trigger("trackAxisToolTip",v);var b=v.data.currentTrackText,x=ej.EjSvgRender.utils._measureText(b,null,i.crosshairLabel.font);"horizontal"==d&&(f-=x.width/2,"inside"==i.labelPosition||(u?a.y<i.y:a.y>i.y)?(0==u&&(_=i.y-x.height+l-(i._isScroll?this.model.scrollerSize:0),o="top"),1==u&&(_=i.y+x.height-l,o="bottom")):(1==u&&(_=i.y-x.height/2-5-l,o="bottom"),0==u&&(_=i.y+x.height-5+l,o="top")),h=5,_+=i._isScroll?i.opposedPosition?-this.model.scrollerSize:this.model.scrollerSize:0),!u&&f+x.width>this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X&&(f=this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X-x.width+5+this.model.elementSpacing),"vertical"==d&&(_=e.Y+x.height/4,"inside"==i.labelPosition||!u&&a.x<i.x?(1==u&&(f=i.x-x.width+5-l,o="left"),0==u&&(f=i.x+10+(i._isScroll?this.model.scrollerSize:0),o="right")):(1==u&&(f=x.width+i.x>$(this.svgObject).width()-5?$(this.svgObject).width()-x.width-5:i.x+15,o="left"),0==u&&(f=x.width>i.x?10:i.x-x.width-l,o="right")),f+=i._isScroll?i.opposedPosition?this.model.scrollerSize:-this.model.scrollerSize:0,c=5);var y={id:this.svgObject.id+"_AxisToolTipText_"+s,x:f-c,y:_+h,fill:i.crosshairLabel.font.color,"font-size":i.crosshairLabel.font.size,"font-family":i.crosshairLabel.font.fontFamily,"font-style":i.crosshairLabel.font.fontStyle,"font-weight":i.crosshairLabel.font.fontWeight,"text-anchor":"start",opacity:i.crosshairLabel.font.opacity},w=ej.EjSvgRender.utils._measureText(v.data.currentTrackText,this.model.m_AreaBounds.Width,i.crosshairLabel.font),C=i.crosshairLabel,f=f-5,_=_-w.height,S=w.width+10,T=2*w.height-10,R={x:f-c,y:_+h,width:S,height:T,rx:C.rx*(p?2:1),ry:C.ry*(p?2:1)},k=ej.EjSvgRender.utils._calculateroundedCorner(null,R,!0,o,0,r);R={id:this.svgObject.id+"_AxisToolTipRect_"+s,d:k,fill:C.fill,"stroke-width":C.border.width,stroke:C.border.color};var O=this.model._axes[s];if(a.y<O.y+O.height&&a.y>O.y||a.x<O.x+O.width&&a.x>O.x?(this.svgRenderer._setAttr($("#"+this.svgObject.id+"_AxisToolTipRect_"+s),{display:"block"}),this.svgRenderer._setAttr($("#"+this.svgObject.id+"_AxisToolTipText_"+s),{display:"block"}),R.display="block"):(this.svgRenderer._setAttr($("#"+this.svgObject.id+"_AxisToolTipRect_"+s),{display:"none"}),this.svgRenderer._setAttr($("#"+this.svgObject.id+"_AxisToolTipText_"+s),{display:"none"}),R.display="none"),p){var D=this.svgRenderer.createCrosshairCanvas();D.ctx=D.getContext("2d")}else var D=this.svgRenderer;this.svgRenderer.drawPath.call(D,R,this.gTrackAxisEle),this.svgRenderer.drawText.call(D,y,v.data.currentTrackText,this.gTrackAxisEle)}},maxWdithArrayCollection:function(e,t){for(var i,s=0,a=0,r=0,n=ej.EjSvgRender.utils._measureText,o=0,l=e.length;o<l;o++)i=n(e[o],0,t),a=i.width,r+=i.height,s=0==s?a:s<a?a:s;return{maxTextWidth:s,totalHeight:r}},displayTooltip:function(e,t,i){var s=this.model.crosshair,a=s.trackballTooltipSettings,r=a.rx,n=a.ry,o=a.border,l=this.model.m_AreaBounds,d=this.model.crosshair.isReversed;if(e){var h,c,u,p,m=t.series,g=document.getElementById(this._id),f=($(g).offset(),m.tooltip),_=f.font?$.extend(!1,m.font,{},f.font):m.font,v="boxandwhisker"==m.type?t.point.boxPlotLocation[3]:t.point.location,b=m.marker.size.width/2+m.marker.border.width+o.width+5,x=m._isTransposed?m.xAxis.y+b:m.yAxis.y,y=m._isTransposed?m.yAxis.x:m.xAxis.x+b,w={X:y+v.X,Y:x+v.Y},C=t.textCollection,S=t.textOptionsCollection,T=t.groupingTextId,R={X:w.X,Y:w.Y},k=document.getElementById(this._id+"_trackball_grouping_tooltip");if(this._trigger("trackToolTip",{data:{currentText:C,location:R}}),!ej.util.isNullOrUndefined(this.model.trackToolTip)&&""!=this.model.trackToolTip)for(var O=0,D=C.length;O<D-1;O++)""==C[O].text&&(C.splice(O,1),S.splice(O,1),T.splice(O,1));ej.util.isNullOrUndefined(k)?(k=document.createElement("div"),u={left:R.X,top:R.Y,border:parseInt(o.width?o.width:1)+"px solid "+(o.color?o.color:"#000000"),background:a.fill?a.fill:"#ffffff",opacity:a.opacity,position:"absolute",height:"auto",width:"auto","border-radius":r+"px "+n+"px","pointer-events":"none"},k.setAttribute("id",this._id+"_trackball_grouping_tooltip")):u={left:R.X,top:R.Y};for(var O=0,D=C.length;O<D;O++){p=document.createElement("span"),p.setAttribute("id",T[O]);var I=C[O].text;$(p).html(I+"</br>"),$(p).css(S[O]),k.appendChild(p)}var j=C.map(function(e){return e.text});h=this.maxWdithArrayCollection(j,_),i=h.maxTextWidth,c=h.totalHeight,u.top=m._isTransposed?u.top:u.top-.5*c,u.left=m._isTransposed?u.left-.5*i:u.left,C.length>1&&(u.top=m._isTransposed?u.top:x+(.5*l.Height-.5*c),u.left=m._isTransposed?l.Width/2+l.X-.5*i:u.left),m._isTransposed?c+u.top>l.Y+l.Height&&(u.top-=c+2*b):u.left+i>=l.X+l.Width&&(u.left-=i+2*(b+o.width)),u.left=R.X==w.X?u.left:R.X,u.top=R.Y==w.Y?u.top:R.Y,$(k).css(u),$(k).appendTo(this.chartContainer)}else for(var L=0,A=t.length;L<A;L++){for(var w=t[L].Point,v=t[L].ClosestPoint,m=t[L].Series,E=t[L].ClosestPointIndex,P=t[L].Tgap,M=$.inArray(m,this.model._visibleSeries),F={X1:l.X,Y1:l.Y+l.Height,X2:l.X+l.Width,Y2:l.Y},N=this.model._axes,z=m._xAxisName,V=m._yAxisName,B=0,D=N.length;B<D;B++)z==N[B].name?m._isTransposed?(F.Y1=N[B].Location.Y1,F.Y2=N[B].Location.Y2):(F.X1=N[B].Location.X1,F.X2=N[B].Location.X2):V==N[B].name&&(m._isTransposed?(F.X1=N[B].Location.X1,F.X2=N[B].Location.X2):(F.Y1=N[B].Location.Y1,F.Y2=N[B].Location.Y2));if(w.X="boxandwhisker"==m.type?w.X+F.X1:w.X,w.Y="boxandwhisker"==m.type?w.Y+F.Y2:w.Y,w.X>=F.X1&&w.X<=F.X2&&w.Y>=F.Y2&&w.Y<=F.Y1||e){var O,H,Y=this.model.requireInvertedAxes,U=w.X+(m.isIndicator?0:ej.util.isNullOrUndefined(m._trackMarker)?m.marker.size.width:m._trackMarker.size.width)+ee+1,W=w.Y,X=m.tooltip.format,G=ej.util.isNullOrUndefined(m.yAxis.roundingPlaces)?2:m.yAxis.roundingPlaces;if("boxandwhisker"==t[L].Series.type&&w.outlier)var q=this.getTooltipFormat(v,m,M,E,X,w);else var q=this.getTooltipFormat(v,m,M,E,X,G);var Q,K,Z=(m.name&&m.name.replace(" ",""),$.extend({},ej.EjSvgRender.commonChartEventArgs));if(Z.data={Location:{X:U,Y:W},Series:m,serIndex:M,pointIndex:E,currentText:q.text},this._trigger("trackToolTip",Z),!Z.cancel){U=Z.data.Location.X,W=Z.data.Location.Y;var J,ee=this.model.tooltipPadding,te=P,f=m.tooltip,_=f.font?$.extend(!1,m.font,{},f.font):m.font,ie=ej.EjSvgRender.utils._measureText(Z.data.currentText,m.xAxis.width,_),se=this.getSeriesColor(v,M,m),ae=this.getTooltipOptions(se,m),re=(ae.rectBColor,ae.rectFColor,ae.rectTextColor,ie.width+2*ee),ne=ie.height+2*ee,oe=Y?m.yAxis.width:m.xAxis.width,le=Y?P+w.X-re/2:P+w.Y-ne/2,de=Y?P+w.X+re/2:P+w.Y+ne/2,he=Y?l.X:l.Y,ce=Y?l.X+l.Width:l.Y+l.Height,ue=[],pe=3+s.marker.border.width+(Y?s.marker.size.height:s.marker.size.width)/2,me=this.model.financial?0:pe+5,ge=m.type.toLowerCase(),fe=0==ge.indexOf("rangearea")?this.model.crosshair.marker.size.height/2:0;if(le>=he&&de<=ce||this.model.financial){Y?w.Y-me-i<l.Y?(Q={x:w.X-re/2+te,y:w.Y+me,width:re,height:ne,rx:r,ry:n},ue.push({X:w.X-re/2+ee+te,Y:w.Y+me+ne/2-ee}),J="top"):(this.model.financial?(U=w.X-re/2+te,W=w.Y+ee+fe,O=U+ee,H=W+2*ee,J="top"):(U=w.X-re/2+te,W=w.Y-me-ne,O=w.X-re/2+ee+te,H=w.Y-me-ne/2-ee,J="bottom"),Q={x:U,y:W,width:re,height:ne,rx:r,ry:n},ue.push({X:O,Y:H})):w.X+me+i-l.X>=oe||d?(this.model.financial?(U=w.X-re/2,W=w.Y-ne-ee-fe,O=U+ee,H=W+te+ne,J="bottom"):w.X-i<=this.model.m_AreaBounds.X&&d?(U=w.X+me,W=w.Y-ne/2+te,O=U+ee,H=w.Y+te+ne/2,J="left"):(U=w.X-me-re,W=w.Y-ne/2+te,O=U+ee,H=w.Y+te+ne/2,J="right"),Q={x:U,y:W,width:re,height:ne,rx:r,ry:n},ue.push({X:O,Y:H})):(this.model.financial?(U=w.X-re/2,W=w.Y-fe-ne-2*ee,O=U+ee,H=W+te+ne,J="bottom"):(U=w.X+me,W=w.Y-ne/2+te,O=U+ee,H=w.Y+te+ne/2,J="left"),Q={x:U,y:W,width:re,height:ne,rx:r,ry:n},ue.push({X:O,Y:H}));var _e=se;"object"==typeof _e&&(_e=se[1].color);var D,ve=Z.data.currentText,be=ej.EjSvgRender.utils._measureText(ve,m.xAxis.width,_).height;if(Z.data.currentText.indexOf("<br/>")>=0){if(ve=Z.data.currentText.split("<br/>"),ve[0],Y)w.Y-me-i<l.Y?ue.push({X:w.X-re/2+ee+te,Y:w.Y+me+be/ve.length}):(this.model.financial?(O=w.X-re/2+ee+te,H=w.Y+4*ee+fe):(O=w.X-re/2+ee+te,H=w.Y-me-ne+be/ve.length),ue.push({X:O,Y:H}));else{var xe=ge.indexOf("candle")>=0||ge.indexOf("hiloopenclose")>=0||!1;w.X+me+i-l.X>=oe?(this.model.financial?(O=w.X-re/2+ee,H=w.Y+te-ne-fe+(xe?0:2*ee),Q.y-=xe?3*ee:ee,Q.height+=xe?2*ee:ee):(O=w.X-re-me+ee,H=w.Y+te-ne/2+be/ve.length),ue.push({X:O,Y:H})):(this.model.financial?(O=w.X-re/2+ee,H=w.Y+te-ne-fe+(xe?0:ee),Q.y-=xe?2*ee:ee,Q.height+=xe?2*ee:ee):(O=w.X+me+ee,H=w.Y+te-ne/2+be/ve.length),ue.push({X:O,Y:H}))}be=0}D=ue.length-1,be=Y?be:-be;var ye="boxandwhisker"==m.type?L:E,we={id:this.svgObject.id+"_ToolTipText_"+M+"_"+ye,x:ue[D].X,y:ue[D].Y+be/2,fill:f.font&&f.font.color?f.font.color:"#ffffff","font-size":_.size,"font-family":_.fontFamily,"font-style":_.fontStyle,"font-weight":_.fontWeight,"text-anchor":"start",isTrackball:!0,padding:this.model.tooltipPadding};K=ej.EjSvgRender.utils._calculateroundedCorner(null,Q,!0,J,te);var Ce={id:this.svgObject.id+"_gTooltip_"+M+"_"+ye,d:K,fill:a.fill?a.fill:_e,"stroke-width":parseInt(a.border.width?a.border.width:0)+"px",stroke:a.border.color?a.border.color:"transparent","fill-opacity":a.opacity};if(this.model.enableCanvasRendering){var Se=this.svgRenderer.createCrosshairCanvas();Se.ctx=Se.getContext("2d")}else var Se=this.svgRenderer;var Te=this.svgRenderer.createGroup({id:this.svgObject.id+"_gTooltip_"+M+"_"+ye});this.svgRenderer.drawPath.call(Se,Ce,Te),this.svgRenderer.drawText.call(Se,we,ve,Te,_)}}0==$("#"+this.svgObject.id+"_TrackToolTip_"+M).length&&this.svgRenderer.append($(Te),this.gTrackball)}}},SmartTooltipPosition:function(e){for(var t=[[],[]],i=e.length,s=[],a=e[0].Series._isTransposed?this.model.m_AreaBounds.Width:this.model.m_AreaBounds.Height,r=this.model.tooltipPadding,n=-r,o=0;o<i;o++)t[0][o]=$.extend({},e[o].StEnd),t[1][o]={yAxis:e[o].Series._yAxisName,xAxis:e[o].Series._xAxisName,isTransposed:e[o].Series._isTransposed},e[o].ReqInvertAxis?s[o]=e[o].Point.X:s[o]=e[o].Point.Y,n+=e[o].StEnd.End-e[o].StEnd.Start+r;this.ContinousOverlappingPoints(t[0],s),n<a&&this.verticalArrangeMents(t);for(var o=0;o<i;o++)e[o].Tgap=this.model.financial?0:t[0][o].Start-e[o].StEnd.Start},verticalArrangeMents:function(e){for(var t,i,s,a,r,n,o,l,d=e[0],h=e[1],c=(this.model.m_AreaBounds,this.model.tooltipPadding),u=this.model._axes,p=d.length,m=p-1,g=0,f=0,_=u.length;m>=0;m--){for(t=h[m].isTransposed,a=h[m].yAxis,f=0;f<_;f++)a==u[f].name&&(t?(i=u[f].Location.X2,s=u[f].Location.X1):(i=u[f].Location.Y1,s=u[f].Location.Y2));if(r=d[m],l=r.End-r.Start,i<r.End)for(r.End=i-2,r.Start=r.End-l,g=m-1;g>=0;g--)n=d[g],o=n.End-n.Start,n.End>d[g+1].Start&&d[g+1].Start>s&&d[g+1].End<i&&(n.End=d[g+1].Start-c,n.Start=n.End-o)}for(m=0;m<p;m++){for(t=h[m].isTransposed,a=h[m].yAxis,f=0;f<_;f++)a==u[f].name&&(t?(i=u[f].Location.X2,s=u[f].Location.X1):(i=u[f].Location.Y1,s=u[f].Location.Y2));if(r=d[m],l=r.End-r.Start,r.Start<s)for(r.Start=s+1,r.End=r.Start+l,g=m+1;g<=p-1;g++)n=d[g],o=n.End-n.Start,n.Start<d[g-1].End&&d[g-1].Start>s&&d[g-1].End<i&&(n.Start=d[g-1].End+c,n.End=n.Start+o)}},ContinousOverlappingPoints:function(e,t){var i,s,a,r,n=this.model.tooltipPadding,o=0,l=0,d=0,h=0,c=e.length-1,u=e[0].End-e[0].Start+n;o=e[0].Start+u,d=e[0].Start;for(var p=0;p<c;p++)if(o>=e[p+1].Start){if(u=e[p+1].End-e[p+1].Start+n,o+=u,++l-1==c-1||p==c-1){i=(o-d)/2,s=(t[h]+t[p+1])/2,a=e[h].End-e[h].Start,e[h].Start=s-i,e[h].End=e[h].Start+a;for(var m=h;m>0&&e[m].Start<=e[m-1].End+n;m--)r=e[m-1].End-e[m-1].Start,e[m-1].Start=e[m].Start-r-n,e[m-1].End=e[m-1].Start+r;for(var g=h+1;g<=h+l;g++)a=e[g].End-e[g].Start,e[g].Start=e[g-1].End+n,e[g].End=e[g].Start+a}}else{if((l=p>0?l:0)>0){i=(o-d)/2,s=(t[h]+t[p])/2,a=e[h].End-e[h].Start,e[h].Start=s-i,e[h].End=e[h].Start+a;for(var m=h;m>0&&e[m].Start<=e[m-1].End+n;m--)r=e[m-1].End-e[m-1].Start,e[m-1].Start=e[m].Start-r-n,e[m-1].End=e[m-1].Start+r;for(var g=h+1;g<=h+l;g++)a=e[g].End-e[g].Start,e[g].Start=e[g-1].End+n,e[g].End=e[g].Start+a;l=0}u=e[p+1].End-e[p+1].Start+n,o=e[p+1].Start+u,d=e[p+1].Start,h=p+1}},getTooltipOptions:function(e,t){var i,s,a,r,n;if(this.model.theme.indexOf("gradient")>=0)i="array"==jQuery.type(e)?e[0].color:e,s="white",n="#333333",a=5,r=5;else{var o=t.type.toLowerCase();-1==o.indexOf("column")&&-1==o.indexOf("waterfall")&&-1==o.indexOf("bar")&&-1==o.indexOf("box")&&"rangearea"!=o&&"none"!=this.model.AreaType?(s="array"==jQuery.type(e)?e[0].color:e,i="transparent",n="white"):(i="#333333",s="white",n="#333333"),a=0,r=0}return{rectBColor:i,rectFColor:s,rectTextColor:n,rectX:a,rectY:r}},getSeriesColor:function(e,t,i){return!i||i.isIndicator||i.isTrendLine?i.fill:e._hiloFill?e._hiloFill._gradientStop?e._hiloFill._gradientStop[0].color:e._hiloFill:e.fill?e.fill._gradientStop?e.fill._gradientStop[0].color:e.fill:"waterfall"==i.type.toLowerCase()&&i.positiveFill&&(e.y>0&&!e.showIntermediateSum&&!e.showTotalSum||e.waterfallSum>0)?i.positiveFill:this.model.seriesColors[t]},getFormat:function(e,t){if(!e.tooltip.format){var i=e.type.toLowerCase(),s="boxandwhisker"!=e.type?"null":t.outlier;return i.indexOf("range")>-1||i.indexOf("hilo")>-1&&-1==i.indexOf("open")?"#point.x# <br/> High : #point.high# <br/> Low : #point.low#":i.indexOf("candle")>-1||i.indexOf("open")>-1?"#point.x# <br/> High : #point.high# <br/> Low : #point.low# <br/> Open : #point.open# <br/> Close : #point.close#":i.indexOf("bubble")>-1?"#point.x# : #point.y# : #point.size#":i.indexOf("box")>-1&&s?"X : #boxPlotPoints.xValue#  Y : #boxPlotPoints.YValues#":i.indexOf("box")>-1?"Minimum : #boxPlotPoints.Minimum# <br/> Upper Quartile : #boxPlotPoints.UpperQuartile# <br/> Median : #boxPlotPoints.midvalue# <br/> Lower Quartile : #boxPlotPoints.LowerQuartile# <br/> Maximum : #boxPlotPoints.Maximum#  ":"#point.x# : #point.y#"}return e.tooltip.format},getTooltipFormat:function(e,t,i,s,a,r){var n,o,l,d,h,c,u,p,m=$.extend(!0,{},e),g=this.model.AreaType,f=this.model.locale,_=t.xAxis,v=t.yAxis,b=_._valueType.toLowerCase(),x=ej.util.isNullOrUndefined,y=_.labelFormat,w=v.labelFormat,C=ej.EjSvgRender.utils._dateTimeLabelFormat,S=(ej.EjSvgRender.utils._decimalPlaces,!1),T=!1;for(t.count=1,m.count=1,a=this.getFormat(t,r);a.indexOf("ej.format(")>=0;){h=a.substring(a.indexOf("ej.format("),a.indexOf(")")+1);var R=h.substring(h.indexOf("(")+1,h.indexOf(","));"#point.x#"==R?(S=!0,n=h.substring(h.indexOf(",")+1,h.indexOf(")"))):"#point.y#"==R?(T=!0,o=h.substring(h.indexOf(",")+1,h.indexOf(")"))):(c=h.substring(h.indexOf(",")+1,h.indexOf(")")),u=R.substring(R.indexOf("#")+1),p=u.substring(u.indexOf(".")+1,u.indexOf("#")),m.hasOwnProperty(p)&&m[p]&&(m[p]=ej.format(m[p],c,f))),a=a.replace(h,R)}if("cartesianaxes"==g?"datetime"==b.toLowerCase()?(m.x=ej.format(new Date(m.xValue),x(y)?C(_._intervalType,_):t.xAxis.labelFormat,f),m.x=S?ej.format(new Date(m.xValue),n,f):m.x):"datetimecategory"==b.toLowerCase()?(m.x=ej.format(new Date(m.x),x(y)?C(_.intervalType,_):_.labelFormat,f),m.x=S?ej.format(new Date(m.x),n,f):m.x):"category"==b.toLowerCase()?this.model.primaryXAxis.isIndexed?m.x=m.x?m.x:"undefined":m.x=ej.EjSvgRender.utils._getLabelContent(m.xValue,t.xAxis,f):(!S||0!=n.indexOf("e")&&0!=n.indexOf("E")?m.x=S?ej.format(m.x,n,f):m.x:m.x=this.convertExponential(void 0,6,20,m.x,n),l=y?y.match("{value}"):null,m.x=y?null!=l?"${value}"==y?y.replace("{value}","$"+m.x):y.replace("{value}",m.x):S||0==y.indexOf("e")||0==y.indexOf("E")?m.x:ej.format(Number(m.x),y,f):m.x):"date"==b&&(m.x=ej.format(new Date(m.xValue),C("days"),f),m.x=S?ej.format(new Date(m.xValue),n,f):m.x),!T||0!=o.indexOf("e")&&0!=o.indexOf("E")?(m.y=m.waterfallSum?m.waterfallSum:m.y,m.y=T?ej.format(m.y,o,f):m.y):m.y=this.convertExponential(void 0,6,20,m.y,o),l=w?w.match("{value}"):null,m.y=w?null!=l?"${value}"==w?w.replace("{value}","$"+m.y):w.replace("{value}",m.y):T||0==w.indexOf("e")||0==w.indexOf("E")?m.y:ej.format(Number(m.y),w,f):m.y,"none"!=g&&"polaraxes"!=g||!S||0!=n.indexOf("e")&&0!=n.indexOf("E")||(m.x=this.convertExponential(void 0,6,20,m.x,n)),!t.isStacking||"area"!=t.drawType||"polar"!=t.type&&"radar"!=t.type||(m.y=t.stackedValue.EndValues[s]-t.stackedValue.StartValues[s]),"boxandwhisker"==t.type.toLowerCase()){var k;if(k=t._visiblePoints[s].boxPlotValues,1==r.outlier)for(var O=0;O<k.outliers.length;O++)r.YValues==k.outliers[O]&&(r.YValues=w?null!=l?"${value}"==w?w.replace("{value}","$"+r.YValues):w.replace("{value}",r.YValues):T||0==w.indexOf("e")||0==w.indexOf("E")?r.YValues:ej.format(Number(r.YValues),w,f):r.YValues);else r.YValues==k.Minimum?k.Minimum=w?null!=l?"${value}"==w?w.replace("{value}","$"+k.Minimum):w.replace("{value}",k.Minimum):T||0==w.indexOf("e")||0==w.indexOf("E")?k.Minimum:ej.format(Number(k.Minimum),w,f):k.Minimum:r.YValues==k.Maximum?k.Maximum=w?null!=l?"${value}"==w?w.replace("{value}","$"+k.Maximum):w.replace("{value}",k.Maximum):T||0==w.indexOf("e")||0==w.indexOf("E")?k.Maximum:ej.format(Number(k.Maximum),w,f):k.Maximum:r.YValues==k.UpperQuartile?k.UpperQuartile=w?null!=l?"${value}"==w?w.replace("{value}","$"+k.UpperQuartile):w.replace("{value}",k.UpperQuartile):T||0==w.indexOf("e")||0==w.indexOf("E")?k.UpperQuartile:ej.format(Number(k.UpperQuartile),w,f):k.UpperQuartile:r.YValues==k.LowerQuartile?k.LowerQuartile=w?null!=l?"${value}"==w?w.replace("{value}","$"+k.LowerQuartile):w.replace("{value}",k.LowerQuartile):T||0==w.indexOf("e")||0==w.indexOf("E")?k.LowerQuartile:ej.format(Number(k.LowerQuartile),w,f):k.LowerQuartile:r.YValues==k.midvalue&&(k.midvalue=w?null!=l?"${value}"==w?w.replace("{value}","$"+k.midvalue):w.replace("{value}",k.midvalue):T||0==w.indexOf("e")||0==w.indexOf("E")?k.midvalue:ej.format(Number(k.midvalue),w,f):k.midvalue);k.count=t.count,k.xValue=m.x,k.YValues=r.YValues,d={boxPlotPoints:k}}else d={series:t,point:m};return a=a.parseTemplate(d),{data:m,text:a}},convertExponential:function(e,t,i,s,a){return e=a.match(/(\d+)/g),e=null==e?t:e>i?i:e,s=s.toExponential(e)},displayShowTooltip:function(e,t,i,s){var a=this.model.requireInvertedAxes,r=i.tooltip.isReversed;if(!1!==t.visible){$(".ejTooltip"+this._id).not("#"+this.svgObject.id+"_TrackToolTip").remove(),$.finish?$(".ejTooltip"+this._id).finish():$(".ejTooltip"+this._id).stop(!0,!0);var n,o,l,d,h,c,u=i.isIndicator||i.isTrendLine?0:$.inArray(i,this.model._visibleSeries),p=7,m=i.tooltip.format,g=document.getElementById(this.svgObject.id).getClientRects()[0],f=this.model.m_AreaBounds,_=i.type.toLowerCase();switch(this.model.AreaType){case"cartesianaxes":
d=r?e.X-(i.isIndicator||i.isTrendLine?0:ej.util.isNullOrUndefined(i._trackMarker)?"bubble"==_?t.radius+15:i.marker.size.width:i._trackMarker.size.width)+("column"==_||"bar"==_||"stackingbar"==_||"stackingcolumn"==_||"waterfall"==_||"rangecolumn"==_?f.X:a?i.yAxis.x:i.xAxis.x):e.X+(i.isIndicator||i.isTrendLine?0:ej.util.isNullOrUndefined(i._trackMarker)?"bubble"==_?t.radius+15:i.marker.size.width:i._trackMarker.size.width)+("column"==_||"bar"==_||"stackingbar"==_||"stackingcolumn"==_||"waterfall"==_||"rangecolumn"==_?f.X:a?i.yAxis.x:i.xAxis.x),h=e.Y+(-1!=_.indexOf("column")||-1!=_.indexOf("waterfall")||-1!=_.indexOf("bar")||-1!=_.indexOf("rangearea")||"scatter"==_||"bubble"==_?this.dragPoint?a?i.xAxis.y:i.yAxis.y:f.Y:a?i.xAxis.y:i.yAxis.y),this.dragPoint&&(d=d>i.xAxis.x?d:i.xAxis.x,h=h<i.yAxis.height+i.yAxis.y?h:i.yAxis.height+i.yAxis.y),l=this.getSeriesColor(t,u,i);break;case"polaraxes":d=r?e.X-p+(ej.util.isNullOrUndefined(i._trackMarker)?i.marker.size.width:i._trackMarker.size.width):e.X+p+(ej.util.isNullOrUndefined(i._trackMarker)?i.marker.size.width:i._trackMarker.size.width),h=e.Y,l=this.getSeriesColor(t,u,i);break;case"none":d=r?e.X-i.marker.size.width+p:e.X+i.marker.size.width+p,h=e.Y,l=this.model.pointColors[s]}if("boxandwhisker"==i.type.toLowerCase())for(var v=0;v<i._visiblePoints[s].boxPlotLocation.length;v++){var b=i._visiblePoints[s].boxPlotLocation[v],x=b.outlier;x?b.X+i.outlierSettings.size.width/2>e.X&&b.X-i.outlierSettings.size.width/2<e.X&&b.Y+i.outlierSettings.size.height/2>e.Y&&b.Y-i.outlierSettings.size.height/2<e.Y&&(c=this.getTooltipFormat(t,i,u,s,m,b),ej.EjSvgRender.utils._measureText(c.text)):(c=this.getTooltipFormat(t,i,u,s,m,b),ej.EjSvgRender.utils._measureText(c.text))}else c=this.getTooltipFormat(t,i,u,s,m),ej.EjSvgRender.utils._measureText(c.text);var y,w=this.getTooltipOptions(l,i),C=w.rectBColor,S=w.rectFColor,T=w.rectTextColor,R=w.rectX,k=w.rectY,O=i.tooltip,p=5;y=null==document.getElementById(this.svgObject.id+"_TrackToolTip")?$("<div></div>").attr({id:this.svgObject.id+"_TrackToolTip",class:"ejTooltip"+this._id}):$("#"+this.svgObject.id+"_TrackToolTip");var D=!!navigator.userAgent.match(/Trident\/7\./);!ej.isTouchDevice()||D||this.vmlRendering?this._on(y,"mousemove",this.chartTooltipHover):window.navigator.msPointerEnabled?this._on(y,"MSPointerMove",this.chartTooltipHover):this._on(y,"touchmove",this.chartTooltipHover),$("#"+this.svgObject.id+"_TrackToolTip").show(),o=$("#"+this._id).parent()[0].style.zIndex;var O={top:h+$(document).scrollTop(),left:d+$(document).scrollLeft(),"background-color":O.fill?O.fill:S,"border-style":"solid",position:"absolute","border-color":O.border.color?O.border.color:C,"border-width":O.border.width||0==O.border.width?O.border.width:1,opacity:O.opacity,"z-index":o+1e6,"border-radius":(O.rx?O.rx:R).toString()+"px "+(O.ry?O.ry:k).toString()+"px","padding-left":"5px","padding-right":"5px","padding-top":"2px","padding-bottom":"2px"};$(y).css(O);var I=$.extend({},ej.EjSvgRender.commonChartEventArgs);if(I.data={seriesIndex:u,pointIndex:s,currentText:c.text,isTrendLine:i.isTrendLine,trendlineIndex:i.trendlineIndex},this._trigger("toolTipInitialize",I),!I.cancel){var j=i.tooltip,L=j.font?$.extend(!1,i.font,{},j.font):i.font,A={top:h+$(document).scrollTop(),left:d+$(document).scrollLeft(),color:j.font&&j.font.color?L.color:T,"font-size":L.size,"font-family":L.fontFamily,"font-style":L.fontStyle,"font-weight":L.fontWeight,"align-self":"baseline"};$(y).css(A),null==document.getElementById(this.svgObject.id+"_TrackToolTip")&&$(document.body).append(y[0]);var E=n=I.data.currentText;$("#"+this.svgObject.id+"_TrackToolTip").html(E);var P=0,M=0;E=E.replace(/<br >/g,"<br/>").replace(/<br \/>/g,"<br/>").replace(/<br>/g,"<br/>"),E=E.split("<br/>");for(var F=0;F<E.length;F++){var N=E[F];N=N.split("</tr>");for(var z=0;z<N.length;z++){var V=N[z];V=this.RemoveTableAttr(V),V=V.replace(/&nbsp;/g," "),P+=ej.EjSvgRender.utils._measureText(V,null,L).height;var B=ej.EjSvgRender.utils._measureText(V,null,L).width;M<B&&(M=B)}}"cartesianaxes"==this.model.AreaType?ej.EjSvgRender.utils._measureText(n,i.xAxis.width,L).height:ej.EjSvgRender.utils._measureText(E,null,L).height;var H="cartesianaxes"==this.model.AreaType?this.model.requireInvertedAxes?i.yAxis.width:i.xAxis.width:$(this.svgObject).width()-("right"==this.model.legend.position.toLowerCase()?this.model.LegendViewerBounds.Width+2*this.model.elementSpacing:0),Y="cartesianaxes"==this.model.AreaType?this.model.requireInvertedAxes?i.xAxis.height:i.yAxis.height:$(this.svgObject).height()-("bottom"==this.model.legend.position.toLowerCase()?this.model.LegendViewerBounds.Height+this.model.elementSpacing:0),U=$("#"+this.svgObject.id+"_TrackToolTip")[0].getBoundingClientRect();if($("#"+this.svgObject.id+"_TrackToolTip").css("top",$(document).scrollTop()+U.top+g.top-(P+4)/2),$("#"+this.svgObject.id+"_TrackToolTip").css("left",$(document).scrollLeft()+U.left+g.left+(U.left-d)),d+(M+p)>=H+i.xAxis.x&&!r){var W=document.getElementById(this.svgObject.id).getClientRects()[0],X=d-(M+2*p+(i.isIndicator||i.isTrendLine?0:ej.util.isNullOrUndefined(i._trackMarker)?i.marker.visible?i.marker.size.width:"bubble"==_?t.radius+15:0:i._trackMarker.size.width)+2*p);$("#"+this.svgObject.id+"_TrackToolTip").css("left",X+W.left-p+$(document).scrollLeft())}if(U=$("#"+this.svgObject.id+"_TrackToolTip")[0].getBoundingClientRect(),U.bottom>=i.yAxis.y+Y+g.top||U.bottom>=i.xAxis.y+Y+g.top){var G=h-(U.bottom-U.top+(i.isIndicator||i.isTrendLine?0:ej.util.isNullOrUndefined(i._trackMarker)?i.marker.visible?i.marker.size.height:0:i._trackMarker.size.height))+p+g.top;$("#"+this.svgObject.id+"_TrackToolTip").css("top",G+$(document).scrollTop())}if(U=$("#"+this.svgObject.id+"_TrackToolTip")[0].getBoundingClientRect(),U.left<0){var W=document.getElementById(this.svgObject.id).getClientRects()[0],q=f.Width/2;e.X<q?$("#"+this.svgObject.id+"_TrackToolTip").css("left",d+g.left):($("#"+this.svgObject.id+"_TrackToolTip").css("width",U.right-2*p),$("#"+this.svgObject.id+"_TrackToolTip").css("left",0))}if((U.top<g.top||U.top<0)&&$("#"+this.svgObject.id+"_TrackToolTip").css("top",(g.top<0?$(document).scrollTop():g.top)+"px"),r){var Q=U.right-U.left;if($("#"+this.svgObject.id+"_TrackToolTip").css("left",U.x-Q),U.x<i.xAxis.x){var X=M+2*p+(i.isIndicator||i.isTrendLine?0:ej.util.isNullOrUndefined(i._trackMarker)?i.marker.visible?i.marker.size.width:"bubble"==_?t.radius+15:0:i._trackMarker.size.width)+2*p;$("#"+this.svgObject.id+"_TrackToolTip").css("left",U.x+X)}}$("#"+this.svgObject.id+"_TrackToolTip").show()}}},RemoveTableAttr:function(e){for(-1==e.indexOf("<table>")&&-1==e.indexOf("</table>")&&-1==e.indexOf("<td>")&&-1==e.indexOf("</td>")&&-1==e.indexOf("<tr>")||(e=e.replace(/\//g,"").replace(/<table>/g,"").replace(/<th>/g,"").replace(/<tr>/g,"").replace(/<td>/g,""));e.search(/<td/i)>-1;)if(e.search(/<tr/)>-1)e=e.slice(e.search(/<td/i));else if(e.search(/<td/)>-1&&e.indexOf(">")>e.search(/<td/)){e=e.slice(e.indexOf(">")+1);for(var t=e.split("<td"),i=0;i<t.length;i++){var s=t[i];t[i]=s.indexOf(">")>-1?s.slice(s.indexOf(">")+1):s}e=t.join("")}return e},chartTooltipHover:function(e){var t=$("#"+e.target.id)[0].getBoundingClientRect(),i=e.clientX-t.left;$("#"+e.target.id).css("left",t.left+i+5),t=$("#"+e.target.id)[0].getBoundingClientRect();var s=document.getElementById(this.svgObject.id).getClientRects()[0];t.right>s.right+5&&$("#"+e.target.id).css("left",e.clientX-(t.right-t.left)-5)},_initializeSeriesColors:function(){var e=this,t=e.model.palette?e.model.palette:e.model.colors,i=t.length,s=e.model.AreaType;e.model.seriesColors=[],e.model.seriesBorderColors=[],e.model.pointColors=[],e.model.pointBorderColors=[];var a,r,n,o,l,d=e.model._visibleSeries.length;e.model._visibleSeries;if("none"!=s)a=e.model._visibleSeries,r=e.model.seriesColors,n=e.model.seriesBorderColors;else{for(var h,c=0,u=0;u<d;u++){var p=e.model._visibleSeries[u].type.toLowerCase();if(e.model._visibleSeries[u].points.length>c){var c=e.model._visibleSeries[u].points.length;h=e.model._visibleSeries[u].points}else e.model._visibleSeries[u].points.length==c&&"funnel"!=p&&"pieofpie"!=p&&"pyramid"!=p&&(h=e.model._visibleSeries[u].points)}a=h||[],r=e.model.pointColors,n=e.model.pointBorderColors}if("none"==s&&d>1)for(var m=0;m<d;m++)e.model.seriesColors[m]=t[m%i];for(var u=0;u<a.length;u++)o=a[u],l=o.trendlines,o.isFill=void 0==o.isFill?!(!o.fill||""==o.fill):o.isFill,o.isFill?r[u]=o.fill:(r[u]=t[u%i],o._hiloTypes||(o.fill=r[u])),"none"!=s&&l.length>0&&this._initializeTrendlinesColors(l,r[u]),ej.util.isNullOrUndefined(o.border)||ej.util.isNullOrUndefined(o.border.color)||""==o.border.color?(n[u]=e.model.seriesBorderDefaultColors[u%10],"none"!=s&&(o.border.color=n[u])):n[u]=o.border.color,o.dataPoint=o.points,o.trendLine=o.trendlines},_initializeTrendlinesColors:function(e,t){for(var i in e)(ej.util.isNullOrUndefined(e[i].fill)||""==e[i].fill)&&(e[i].fill=t)},_createAxisLabelAndRange:function(){for(var e,t,i,s,a,r=0,n=this.model,o=n.series,l=o.length,d=n.primaryXAxis,h=n.primaryYAxis,c=0;c<l;c++)t=o[c],t._isTransposed&&"polaraxes"!=this.model.AreaType&&r++;l&&(r==l?n.requireInvertedAxes=!0:(t=o[0],t._isTransposed&&"polaraxes"!=this.model.AreaType&&(n.requireInvertedAxes=!0))),n.requireInvertedAxes?(h.orientation="horizontal",d.orientation="vertical",h.labelPlacement=h.labelPlacement?h.labelPlacement:ej.datavisualization.Chart.LabelPlacement.OnTicks):(h.orientation="vertical",d.orientation="horizontal"),h.name=ej.util.isNullOrUndefined(h.name)?"SecondaryAxis":h.name,d.name=ej.util.isNullOrUndefined(d.name)?"PrimaryAxis":d.name,n._axes=[],n._axes[0]=d,n._axes[1]=h,a=n.axes.length,e=n.indicators;for(var c=0;c<a;c++)if(s=n.axes[c],s.name){for(var u=0;u<l;u++){var p=o[u].type.toLowerCase();if(o[u].xAxisName==s.name){s.orientation=-1!=p.indexOf("bar")?o[u].isTransposed?"horizontal":"vertical":o[u].isTransposed?"vertical":"horizontal";break}if(o[u].yAxisName==s.name){s.orientation=-1!=p.indexOf("bar")?o[u].isTransposed?"vertical":"horizontal":o[u].isTransposed?"horizontal":"vertical";break}}for(var m=0;m<e.length;m++){if(e[m].xAxisName==s.name){s.orientation="horizontal";break}if(e[m].yAxisName==s.name){s.orientation="vertical";break}}if(!s.orientation)continue;"horizontal"==s.orientation.toLowerCase()?n.axes[c]=$.extend(!0,{},n.secondaryX,s):n.axes[c]=$.extend(!0,{},n.secondaryY,s),n._axes.push(n.axes[c])}for(var m=0;m<n._axes.length;m++){var s=this.model._axes[m],g=s.scrollbarSettings,i=g.range;s.orientation.toLowerCase();s.visibleLabels=[],s.range=null==s.range.min&&null==s.range.max&&null==s.range.interval?null:s.range,s.setRange=!!s.range&&(!!ej.util.isNullOrUndefined(s.setRange)||s.setRange),s.setRange=!(!s.actual_Range&&0==s.setRange),s.actualRange=s.actualRange?s.actualRange:null==s.range?{}:$.extend(!0,{},s.range),s.visibleRange=s.visibleRange?s.visibleRange:null==s.range?{}:s.range,s.name=s.name?s.name:m.toString(),s._isScroll=g.visible&&(null!=g.pointsLength||null!=i.min||null!=i.max)||n.zooming.enableScrollbar&&g.visible&&(s.zoomFactor<1||s.zoomPosition>0),s._pointsLength=g.pointsLength,"string"==typeof i.min&&-1!=i.min.indexOf("/Date(")&&(i.min=new Date(parseInt(i.min.substr(6)))),"string"==typeof i.max&&-1!=i.max.indexOf("/Date(")&&(i.max=new Date(parseInt(i.max.substr(6))))}},_drawTitle:function(){var e,t=this.model.title,i=this.model.margin,s=$(this.svgObject).width(),a=ej.EjSvgRender.utils._measureText(t.text,s-i.left-i.right,t.font),r=this.model.elementSpacing,n=""!=t.text&&t.visible?a.height+r:0,i=i,o=this.model.m_AreaBounds,l=this.model.AreaType,d="left"==this.model.legend.position.toLowerCase()?this.model.LegendViewerBounds.Width/2:"right"==this.model.legend.position.toLowerCase()?-this.model.LegendViewerBounds.Width/2:0,h=i.left+r+this.model.border.width,c=i.right+r+this.model.border.width,u=this.model.titleWrapTextCollection,p=parseInt(t.font.size),m=1.2*parseInt(t.font.size),g=t.enableTrim,f=t.maximumWidth,_=(t.textAlignment.toLowerCase(),t.textOverflow.toLowerCase()),v=t.text,b=t.isReversed,x=!(!g||"wrap"!=_&&"wrapandtrim"!=_||!(u.length>1));"auto"==f.toString()||""==f.toString()?(f=.75*o.Width,this.model.titleMaxWidth=f):f=parseInt(f);var y=a.width>f;g&&y&&"trim"==_&&(v=ej.EjSvgRender.utils._trimText(v,f,t.font),this.model.titleTrim=a=ej.EjSvgRender.utils._measureText(v,s-i.left-i.right,t.font),this.model.trimTooltip=!0),this.model.trimTooltip&&"wrap"==_&&(this.model.trimTooltip=!1);var w={width:this.model.trimTooltip&&x||u.length>1?this.model.titleMaxWidth:a.width,height:a.height*(u.length>0?u.length-1:1)};if(""!=t.text&&null!=t.text){e="transparent"==t.border.color&&"transparent"==t.background?i.top+n/2+r:i.top+m/2+r+p/4;var C=("cartesianaxes"!=l?(s-i.left-i.right)/2+(i.left+d):h+(s-c)/2)-w.width/2;"near"==this.model.title.textAlignment.toLowerCase()?C=b?s-c-a.width:h:"far"==this.model.title.textAlignment.toLowerCase()&&(C=b?h:s-c-w.width);var S=$.extend({},ej.EjSvgRender.commonChartEventArgs);S.data={title:v,location:{x:C,y:e},size:a},this._trigger("titleRendering",S);var T={id:this.svgObject.id+"_ChartTitleText",x:S.data.location.x,y:S.data.location.y,fill:t.font.color,"font-size":t.font.size,"font-family":t.font.fontFamily,"font-style":t.font.fontStyle,"font-weight":t.font.fontWeight,opacity:t.font.opacity,"text-anchor":"start"},R={id:this.svgObject.id+"_ChartTitleBorder",x:S.data.location.x-r,y:S.data.location.y-m+m/4,rx:t.border.cornerRadius,ry:t.border.cornerRadius,width:x&&y?this.model.titleMaxWidth+2*r:a.width+2*r,height:x&&y?a.height*u.length:m,fill:t.background,"stroke-width":t.border.width,stroke:t.border.color,opacity:t.border.opacity,class:"e-titleborder"};if(this.svgRenderer.drawRect(R,this.gTitleEle),x&&y)for(var k=0;k<u.length;k++)T.id=this.svgObject.id+"_ChartTitleText_"+k,0!=k&&(T.y=T.y+a.height),this.svgRenderer.drawText(T,u[k],this.gTitleEle);else this.svgRenderer.drawText(T,S.data.title,this.gTitleEle);this.model._titleLocation={X:S.data.location.x,Y:S.data.location.y,size:w,_height:a.height},this.svgRenderer.append(this.gTitleEle,this.svgObject),""!=t.subTitle.text&&t.subTitle.text&&t.subTitle.visible&&this._drawSubTitle()}},_getLegendSize:function(e){var t=this.model.legend,i=t.itemStyle,s=ej.EjSvgRender.utils._measureText(e.Text,null,e.Font);return{Width:i.width+10+s.width,Height:Math.max(i.height,s.height)}},_getYValues:function(e){for(var t=[],i=e.length,s=0;s<i;s++)t.push(e[s].y);return t},_getXValues:function(e){for(var t=[],i=e.length,s=0;s<i;s++)t.push(e[s].xValue);return t},_drawSubTitle:function(){var e,t,i,s,a=this.model.title,r=a.isReversed,n=a.subTitle,o=$(this.svgObject).width(),l=ej.EjSvgRender.utils._measureText(a.text,o-this.model.margin.left-this.model.margin.right,a.font),d=ej.EjSvgRender.utils._measureText(n.text,o-this.model.margin.left-this.model.margin.right,n.font),h="middle",c=this.model.elementSpacing,u=parseInt(n.font.size),p=this.model.m_AreaBounds.Width,m=1.2*parseInt(a.font.size),g=1.2*parseInt(n.font.size),f=""!=n.text&&n.visible?d.height+c:0,_=n.enableTrim,v=n.maximumWidth,b=a.maximumWidth,x=n.textOverflow.toLowerCase(),y=(a.textAlignment.toLowerCase(),n.textAlignment.toLowerCase()),w=a.text,C=a.enableTrim,S=a.textOverflow.toLowerCase(),T=n.text,R=!(!C||"wrap"!=S&&"wrapandtrim"!=S),k=!(!_||"wrap"!=x&&"wrapandtrim"!=x);b="auto"==b.toString()||""==b.toString()?.75*p:parseInt(b),v="auto"==v.toString()||""==v.toString()?.75*p:parseInt(v);var l=ej.EjSvgRender.utils._measureText(a.text,o-this.model.margin.left-this.model.margin.right,a.font);l.width;if(_&&d.width>v&&"trim"==x&&(w=C&&"trim"==S?ej.EjSvgRender.utils._trimText(w,b,a.font):w,T=ej.EjSvgRender.utils._trimText(T,v,n.font),l=ej.EjSvgRender.utils._measureText(w,$(this.svgObject).width()-this.model.margin.left-this.model.margin.right,a.font),d=ej.EjSvgRender.utils._measureText(T,$(this.svgObject).width()-this.model.margin.left-this.model.margin.right,n.font),this.model.subTitleTooltip=!0),s=l.width>b,""!=T&&null!=T){e="transparent"==this.model.title.border.color&&"transparent"==this.model.title.background||"transparent"==this.model.title.subTitle.border.color&&"transparent"==this.model.title.subTitle.background?f/2+c+this.model._titleLocation.Y+this.model._titleLocation._height*(this.model.titleWrapTextCollection?this.model.titleWrapTextCollection.length-1:0):g/2+10+c+(R&&s?l.height*this.model.titleWrapTextCollection.length:m)+10+u/3;var t=this.model._titleLocation.X+this.model._titleLocation.size.width/2;"near"==y?(t=i=r?this.model._titleLocation.X+this.model._titleLocation.size.width:this.model._titleLocation.X,h=r?"end":"start"):"far"==y&&(t=r?this.model._titleLocation.X:this.model._titleLocation.X+this.model._titleLocation.size.width,h=r?"start":"end");var O=$.extend({},ej.EjSvgRender.commonChartEventArgs);O.data={subTitle:T,location:{x:t,y:e},size:d},this._trigger("subTitleRendering",O);var D,I,j="transparent"==a.border.color&&"transparent"==a.background||"transparent"==a.subTitle.border.color&&"transparent"==a.subTitle.background?O.data.location.y:O.data.location.y-c/2,L={id:this.svgObject.id+"_ChartSubTitleText",x:O.data.location.x,y:j,fill:n.font.color,"font-size":n.font.size,"font-family":n.font.fontFamily,"font-style":n.font.fontStyle,"font-weight":n.font.fontWeight,opacity:n.font.opacity,"text-anchor":h},A=O.data.location.x;D="start"==h?A-c:"end"==h?k?A-c-this.model.subTitleMaxWidth:A-c-d.width:k?A-c-this.model.subTitleMaxWidth/2:A-c-d.width/2,I="transparent"==a.border.color&&"transparent"==a.background||"transparent"==n.border.color&&"transparent"==n.background?O.data.location.y-g+g/4:O.data.location.y-g+g/4-c/2;var E={id:this.svgObject.id+"_ChartSubTitleBorder",x:D,y:I,rx:n.border.cornerRadius,ry:n.border.cornerRadius,width:k?this.model.subTitleMaxWidth+2*c:d.width+2*c,height:k?d.height*this.model.subTitleWrapTextCollection.length:g,fill:n.background,"stroke-width":n.border.width,stroke:n.border.color,opacity:n.border.opacity,class:"e-subtitleborder"};if(this.svgRenderer.drawRect(E,this.gSubTitleEle),k&&d.width>v)for(var P=0;P<this.model.subTitleWrapTextCollection.length;P++)L.id=this.svgObject.id+"_ChartSubTitleText_"+P,0!=P&&(L.y=L.y+d.height),this.svgRenderer.drawText(L,this.model.subTitleWrapTextCollection[P],this.gSubTitleEle);else this.svgRenderer.drawText(L,O.data.subTitle,this.gSubTitleEle);var M={width:this.model.subTitleTooltip?v:d.width,height:d.height*this.model.subTitleWrapTextCollection.length};"middle"==h?i=t-M.width/2:"end"==h&&(i=t-M.width),this.model._subTitleLocation={X:i,Y:O.data.location.y-d.height/2,size:M},this.svgRenderer.append(this.gSubTitleEle,this.gTitleEle)}},_calculateStackingValues:function(e,t,i){var s=this.model;s.stackedValue[t.name]=[];var a=s.stackedValue[t.name];a.min=0,a.max=0;for(var r,n,o,l,d,h,c,u,p,m=s.requireInvertedAxes?s.vAxes:s.hAxes,g=m.length,f=(e.length,ej.util.isNullOrUndefined),_=0;_<g;_++){S=0;for(var v,b,d=[],h=[],x=[],y=[],w=0,C=0;C<e.length;C++)if(e[C]._xAxisName==m[_].name&&(-1!=e[C].type.toLowerCase().indexOf("stacking")||e[C].isStacking)){c={},c.StartValues=[],c.EndValues=[],o=e[C].stackingGroup,o&&"stackingarea"!=e[C].type.toLowerCase()?f(d[o])&&(d[o]=[],h[o]=[],x[o]=[],y[o]=[]):(o="",f(d[o])&&(d[o]=[],h[o]=[],x[o]=[],y[o]=[])),v=e[C],w=this._getXCrossValue(v,m[_],i),"number"!=typeof w&&(w=0),l=ej.EjSeriesRender.prototype._isVisiblePoints(v),n=this._getYValues(v._visiblePoints),r=l.length;for(var S=0;S<r;S++){var u=0,T=0,p=n[S];f(d[o][v._visiblePoints[S].xValue])&&(d[o][v._visiblePoints[S].xValue]=w),f(h[o][v._visiblePoints[S].xValue])&&(h[o][v._visiblePoints[S].xValue]=w),c.StartValues.length<=S&&(c.StartValues.push(0),c.EndValues.push(0)),p>=0?(x[o][S]=null==x[o][S],p-=x[o][S]&&w,u=-1!=v.type.toLowerCase().indexOf("stacking")||p>0?d[o][v._visiblePoints[S].xValue]:0,d[o][v._visiblePoints[S].xValue]+=p,T=u<w?w-u:0,c.StartValues[S]=u+T,c.EndValues[S]=p+u):(y[o][S]=null==y[o][S],p-=y[o][S]&&w,u=h[o][v._visiblePoints[S].xValue],h[o][v._visiblePoints[S].xValue]+=p,c.StartValues[S]=u,c.EndValues[S]=p+u,w<c.EndValues[S]&&(h[o][v._visiblePoints[S].xValue]=c.StartValues[S],d[o][v._visiblePoints[S].xValue]=c.EndValues[S],x[o][S]=null==x[o][S])),b=l[S].actualIndex,v.points[b].YValues=[c.EndValues[S]]}c.stackedSeries=!0,a.push(c),a.min>Math.min.apply(0,c.StartValues)&&(a.min=Math.min.apply(0,c.StartValues)),a.max<Math.max.apply(0,c.EndValues)&&(a.max=Math.max.apply(0,c.EndValues)),v.stackedValue=c}}},_calculateStackingCumulativeValues:function(e,t,i){this.model.stackedValue[t.name]=[],this.model.stackedValue[t.name].min=0,this.model.stackedValue[t.name].max=0;for(var s,a=this.model.requireInvertedAxes?this.model.vAxes:this.model.hAxes,r=e.length,n=a.length,o=0;o<n;o++){for(var l=[],d=[],h=[],c=" ",u=[],p=[],m=0,g=[],f=0;f<r;f++){ej.EjSeriesRender.prototype._isVisiblePoints(e[f]);if(c=e[f].stackingGroup,-1!=e[f].type.toLowerCase().indexOf("100")&&e[f]._xAxisName==a[o].name){e[f].stackingGroup&&" stackingarea100 "!=e[f].type.toLowerCase()?l[c]||(h[c]=[],l[c]=[],d[c]=[],u[c]=[],p[c]=[]):(e[f].stackingGroup="",c=e[f].stackingGroup,l[c]||(h[c]=[],l[c]=[],d[c]=[],u[c]=[],p[c]=[])),g[c]=f;for(var _=this._getYValues(e[f]._visiblePoints),v=_.length,b=0;b<v;b++){var x=_[b];h[c][e[f].points[b].xValue]||(h[c][e[f].points[b].xValue]=0),h[c][e[f].points[b].xValue]+=Math.abs(x)}}}for(var f=0;f<r;f++)if(c=e[f].stackingGroup,-1!=e[f].type.toLowerCase().indexOf("100")){var y=!1;if(e[f]._xAxisName==a[o].name){var w={};w.StartValues=[],w.EndValues=[];var C=e[f];m=this._getXCrossValue(C,a[o],i),"number"!=typeof m&&(m=0);for(var _=this._getYValues(C._visiblePoints),v=_.length,b=0;b<v;b++){var S,T=0,R=_[b];if(s=R/h[c][C.points[b].xValue]*100,R=isNaN(s)?0:s,C.points[b].percentage=R.toFixed(2),l[c][C.points[b].xValue]||(l[c][C.points[b].xValue]=m),d[c][C.points[b].xValue]||(d[c][C.points[b].xValue]=m),w.StartValues.length<=b&&(w.StartValues.push(0),w.EndValues.push(0)),R>=0){var k=l[c][C.points[b].xValue];u[c][b]=null==u[c][b],R-=u[c][b]&&m,T=k<m?m-k:0,S=k,l[c][C.points[b].xValue]+=R}else{var O=d[c][C.points[b].xValue];p[c][b]=null==p[c][b],R-=p[c][b]&&m,T=O>m?m-O:0,S=O,d[c][C.points[b].xValue]+=R}w.StartValues[b]=S+T,w.EndValues[b]=S+R,w.EndValues[b]>100&&(w.EndValues[b]=100),C.points[b].YValues=[w.EndValues[b]],y=g[c]!=f||y}w.stackedSeries=y,this.model.stackedValue[t.name].push(w),this.model.stackedValue[t.name].min>Math.min.apply(0,w.StartValues)&&(this.model.stackedValue[t.name].min=Math.min.apply(0,w.StartValues)),this.model.stackedValue[t.name].max<Math.max.apply(0,w.EndValues)&&(this.model.stackedValue[t.name].max=Math.max.apply(0,w.EndValues)),this.model.stackedValue[t.name].min>Math.min.apply(0,w.EndValues)&&(this.model.stackedValue[t.name].min=-100),C.stackedValue=w}}}},_legendItemBounds:function(e,t,i){var s,a,r,n=this.model.legend,o=n.position.toLowerCase(),l=(n.itemPadding,0),d=0;return ej.util.isNullOrUndefined(n.columnCount)&&n.rowCount?(a=n.rowCount,r=Math.ceil(e/a),l=t*r,d=i*a):ej.util.isNullOrUndefined(n.rowCount)&&n.columnCount?(a=Math.ceil(e/n.columnCount),s=n.columnCount,l=t*s,d=i*a):n.rowCount&&n.columnCount&&(n.columnCount<n.rowCount?(a=n.rowCount,r=Math.ceil(e/a),l=t*r,d=i*a):n.columnCount>n.rowCount?"top"===o||"bottom"===o||"custom"===o?(a=Math.ceil(e/n.columnCount),s=n.columnCount,l=t*s,d=i*a):(a=Math.ceil(e/n.columnCount),r=Math.ceil(e/a),l=t*r,d=i*a):"top"===o||"bottom"===o||"custom"===o?(a=Math.ceil(e/n.columnCount),s=Math.ceil(e/n.rowCount),l=t*n.columnCount,d=i*s):(a=n.rowCount,r=Math.ceil(e/a),l=t*r,d=i*a)),d+=this.model.elementSpacing,{LegendWidth:l,LegendHeight:d}},_isEjScroller:function(){var e=this,t=e.model,i=$(e.legendContainer),s=t.legend;ej.util.isNullOrUndefined($("#"+i[0].id).ejScroller)?s._ejScroller=!1:s._ejScroller=s.enableScrollbar},_rowsCalculation:function(e,t,i){for(var s,a,r,n=this,o=n.model,l=(o.legend,[]),d=e.legendItem?e.legendItem.Text.toString():e.text,h=d.split(" "),c=t,u=e.legendItem?e.legendItem.LegendStyle.Font:e.font,p=h.length,m=0,g=0;g<p;g++)if(s=h[g],(a=ej.EjSvgRender.utils._measureText(s,null,u).width)<=c){for(;g<p;){if(a=ej.EjSvgRender.utils._measureText(s,null,u).width,r=h[g+1]?ej.EjSvgRender.utils._measureText(h[g+1],null,u).width:0,!(a+r<=c&&r>0)){m=Math.max(m,a);break}s=s.concat(" "+h[g+1]),g++}l.push(s)}else"wrapandtrim"==i?(s=ej.EjSvgRender.utils._trimText(s,c,u),l.push(s),this.model._legendMaxWidth=c,m=Math.max(m,c),e.legendItem||(this.model.trimTooltip=!0)):(l.push(s),e.legendItem?this.model._legendMaxWidth=Math.max(this.model._legendMaxWidth,a):m=Math.max(m,a));return this.model._legendMaxHeight=Math.max(this.model._legendMaxHeight,l.length),{textCollection:l,wordMax:m}},_triggerLegendEvent:function(e,t,i){var s,a,r,n,o=this,l=o.model,d=l.legend,h=l.AreaType,c=d.itemStyle,u=c.border,p=l.elementSpacing,m=d.textWidth,g=ej.EjSvgRender,f=o.svgRenderer,_=l._visibleSeries.length,v=o.svgObject,b=l.enableCanvasRendering,p=l.elementSpacing,x=d.textOverflow.toLowerCase(),y={BorderColor:u.color,BorderWidth:u.width,Opacity:d.opacity,Color:t,Font:$.extend(!0,{},d.font)};return n=$.extend({},g.commonChartEventArgs),n.data={svgRenderer:f,svgObject:v,symbolShape:d.shape,legendItem:{Text:e,Shape:d.shape,LegendStyle:y,SeriesIndex:"none"==h&&1==_?0:i},style:{ShapeSize:c,ElementSpace:p,Style:y,ID:o.svgObject.id+"_LegendItemShape"+i,SeriesIndex:"none"==h&&1==_?0:i},gLegendItemEle:o.gLegendItemEle},b&&(n.data.style.context=!0),o._trigger("legendItemRendering",n),s=n.data.legendItem.Text,a=n.data.legendItem.LegendStyle.Font,r=ej.EjSvgRender.utils._measureText(s,null,a).width,"trim"==x?r>m&&(s=ej.EjSvgRender.utils._trimText(s,m,a),o.model._legendMaxWidth=m):"wrap"!=x&&"wrapandtrim"!=x||(s=o._rowsCalculation(n.data,m,this.model.legend.textOverflow.toLowerCase()).textCollection),{commonEventArgs:n,legendItem:s}},_calculateLegendBounds:function(){this.model.legendCollection=[],this.model.legendTextRegion=[],this.model.legendRegion=[],this.model.svgHeight=$(this.svgObject).height(),this.model.svgWidth=$(this.svgObject).width(),this.model._legendMaxWidth=0,this.model._legendMaxHeight=0;var e,t,i,s,a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k=this,O=k.model,D=Math,I=D.max,j=D.min,L=D.abs,A=O.legend,E=A.size.height,P=A.size.width,M=A.isReversed,F=A.itemPadding>0?A.itemPadding:0,N=A.position.toLowerCase(),z=0,V=0,B=O.svgHeight,H=O.svgWidth,Y=0,U=0,W=0,X=0,G=1,q={},Q=[],K=O.AreaType,Z=O._visibleSeries,J=A.rowCount,ee=A.columnCount,te=O.elementSpacing,ie=ej.EjSvgRender.utils._measureText(A.title.text,null,A.title.font),se=0,ae=0,re=O.border.width,ne=A.border.width,oe=A.textOverflow.toLowerCase(),le=B-(4*te+2*re+2*A.border.width),de=H-(4*te+2*re+2*ne);if(Z&&A.visible&&0!=Z.length){if(C=Z[0].type.toLowerCase(),"none"==K&&1==Z.length||"pieofpie"==C||"pyramid"==C||"funnel"==C)for(p=Z[0],u=ej.EjSeriesRender.prototype._calculateVisiblePoints(p).legendPoints,m=u.length,d=!M||"top"!=N&&"bottom"!=N?0:m-1;!M||"top"!=N&&"bottom"!=N?d<m:d>=0;!M||"top"!=N&&"bottom"!=N?d++:d--)g=A.fill?A.fill._gradientStop?A.fill._gradientStop:A.fill:O.pointColors[u[d].actualIndex],c=u[d],f=ej.util.isNullOrUndefined(c.x)?"series"+d:c.x,w=c.visibleOnLegend?c.visibleOnLegend:"visible",c.isEmpty||"visible"!=w.toLowerCase()||"visible"!=p.visibleOnLegend.toLowerCase()||(S=this._triggerLegendEvent(f,g,d),T=S.commonEventArgs.data.legendItem.LegendStyle,q={Text:S.legendItem,displayText:S.commonEventArgs.data.legendItem.Text,Font:T.Font,SeriesIndex:0,PointIndex:d,ActualIndex:c.actualIndex,fill:T.Color,visibility:!1!==c.visible?"visible":"hidden",Shape:S.commonEventArgs.data.legendItem.Shape,LegendStyle:T,CommonEventArgs:{cancel:S.commonEventArgs.cancel,data:S.commonEventArgs.data}},Q.push(q));else for(m=Z.length,d=!M||"top"!=N&&"bottom"!=N?0:m-1;!M||"top"!=N&&"bottom"!=N?d<m:d>=0;!M||"top"!=N&&"bottom"!=N?d++:d--){g=A.fill?A.fill._gradientStop?A.fill._gradientStop:A.fill:ej.util.isNullOrUndefined(O.seriesColors[d])?O.pointColors[d]:O.seriesColors[d],p=Z[d],f=p.name?p.name:"series"+d,"visible"==p.visibleOnLegend.toLowerCase()&&(S=this._triggerLegendEvent(f,g,d),T=S.commonEventArgs.data.legendItem.LegendStyle,q={Text:S.legendItem,displayText:S.commonEventArgs.data.legendItem.Text,Font:T.Font,SeriesIndex:d,fill:T.Color,visibility:p.visibility,Shape:S.commonEventArgs.data.legendItem.Shape,LegendStyle:T,CommonEventArgs:{cancel:S.commonEventArgs.cancel,data:S.commonEventArgs.data}},Q.push(q)),o=p.trendlines,n=o.length;for(var he=0;he<n;he++)l=o[he],g=A.fill?A.fill._gradientStop?A.fill._gradientStop:A.fill:l.fill,f=l.name?l.name:"series"+d,""!=l.visibility&&"visible"==l.visibleOnLegend.toLowerCase()&&(S=this._triggerLegendEvent(f,g,d),T=S.commonEventArgs.data.legendItem.LegendStyle,q={Text:S.legendItem,displayText:S.commonEventArgs.data.legendItem.Text,Font:T.Font,SeriesIndex:d,trendLineIndex:he,fill:T.Color,isTrendLine:!0,visibility:"visible"==p.visibility.toLowerCase()?l.visibility:"hidden",Shape:S.commonEventArgs.data.legendItem.Shape,LegendStyle:T,CommonEventArgs:{cancel:S.commonEventArgs.cancel,data:S.commonEventArgs.data}},Q.push(q))}_=Q.length;for(var d=0;d<_;d++)e=Q[d],R=e.CommonEventArgs.data.style.ShapeSize.width,x=k._getLegendSize(e),Y=I(this.model._legendMaxWidth>0?this.model._legendMaxWidth+F+R:x.Width,Y),U=I("wrap"==oe||"wrapandtrim"==oe?x.Height*this.model._legendMaxHeight:x.Height,U);X=U+2*te,W=Y,(ee||J)&&(s=k._legendItemBounds(Q.length,Y+F,U+F),W=s.LegendWidth,X=s.LegendHeight,"top"===N||"bottom"===N||"custom"===N?X=X-F+te:W-=F);for(var ce=0;ce<_;ce++)e=Q[ce],t=e.SeriesIndex,p=O.series[t],x=k._getLegendSize(e),"wrap"!=oe&&"wrapandtrim"!=oe||(x.Width=Y,x.Height=U),J||ee||("top"==N||"bottom"==N||"custom"==N?(z+=x.Width+F,z>de&&0!=ce?(z-=x.Width+F,W=I(W,z),z=x.Width+F,G++,X+=U+F):W=I(W,z),V=I(V,U)):(V+=x.Height+F,V>le?(V-=x.Height+F,X=I(X,V),V=x.Height+F,W+=Y+F):X=I(X,V),z=I(z,Y))),y="visible"==e.visibility.toLowerCase()?k.svgRenderer.createGradientElement("legend"+ce,Q[ce].fill,0,0,0,le,k.gLegendEle):"gray",e.CommonEventArgs.data.legendItem.LegendStyle.Color=y,i=J||ee?{Width:Y,Height:U}:x,i._Width=x.Width,e.isTrendLine&&(e.TrendLineIndex=e.trendLineIndex,h=p.trendlines[e.trendLineIndex].type.toLowerCase(),e.CommonEventArgs.data.legendItem.drawType=e.drawType="linear"==h||"movingaverage"==h?"line":"spline"),Q[ce].Bounds=i,O.legendCollection.push(e);"top"===N||"bottom"===N||"custom"===N?(W=ie.width>W-F?ie.width+20+F:W+20,z+=10,V+=20,O.LegendBounds={Width:I(W,z)-F,Height:I(X,V),Rows:G}):(W=ie.width>W?ie.width+20:W+20,z+=10,V+=10,O.LegendBounds={Width:I(W,z),Height:I(X,V)+10-F,Columns:G}),O.LegendViewerBounds={Width:"0",Height:"0"},""==E||null==E?(a=L("left"==N||"right"==N||"custom"==N?B:B/100*parseInt("20%")),O.LegendViewerBounds.Height=j(a,O.LegendBounds.Height)):-1!=E.indexOf("%")?O.LegendViewerBounds.Height=L(B/100*parseInt(E)):O.LegendViewerBounds.Height=parseInt(E),""==P||null==P?(r=L("top"==N||"bottom"==N||"custom"==N?H:H/100*parseInt("20%")),O.LegendViewerBounds.Width=j(r,O.LegendBounds.Width)):-1!=P.indexOf("%")?O.LegendViewerBounds.Width=L(H/100*parseInt(P)):O.LegendViewerBounds.Width=parseInt(P)}else O.LegendBounds={Width:0,Height:0},O.LegendViewerBounds={Width:0,Height:0};v=$(k.legendContainer),b=$(k.legendSvgContainer),A.enableScrollbar?(O.LegendActualBounds=O.LegendViewerBounds,v.removeAttr("style"),v.css({visibility:"hidden",width:O.LegendViewerBounds.Width,height:O.LegendViewerBounds.Height}),b.css({height:O.LegendBounds.Height,width:O.LegendBounds.Width}),A._ejScroller?(A._ejScroller&&M&&v.addClass("e-rtl"),$("#"+v[0].id).ejScroller({width:O.LegendViewerBounds.Width,height:O.LegendViewerBounds.Height})):(v.css({overflow:"scroll"}),v.hasClass("e-rtl")&&v.removeClass("e-rtl")),O.LegendBounds.Width>O.LegendViewerBounds.Width&&O.LegendBounds.Height>O.LegendViewerBounds.Height?A._ejScroller?(ae=$(".e-hscrollbar").height()||0,se=$(".e-vscrollbar").width()||0):(v.css({overflow:"scroll"}),ae=v[0].offsetHeight-2*ne-v[0].clientHeight,se=v[0].offsetWidth-2*ne-v[0].clientWidth):O.LegendBounds.Width>O.LegendViewerBounds.Width?A._ejScroller?(ae=$(".e-hscrollbar").height()||0,se=0):(v[0].style.overflowX="scroll",
v[0].style.overflowY="hidden",ae=v[0].offsetHeight-2*ne-v[0].clientHeight,se=0):O.LegendBounds.Height>O.LegendViewerBounds.Height&&(A._ejScroller?(ae=0,se=$(".e-vscrollbar").width()):(v[0].style.overflowY="scroll",v[0].style.overflowX="hidden",ae=0,se=v[0].offsetWidth-2*ne-v[0].clientWidth))):(O.LegendActualBounds=O.LegendBounds,""!=P&&null!=P&&(O.LegendActualBounds.Width=parseInt(P)),""!=E&&null!=E&&(O.LegendActualBounds.Height=parseInt(E))),O.LegendActualBounds.Height+=Math.abs(ae),O.LegendActualBounds.Width+=Math.abs(se),O.LegendActualBounds.hScrollSize=ae,O.LegendActualBounds.vScrollSize=se},GetPointXYOrgin:function(e,t,i,s){return{X:(e-i)/(this.model.axes.PrimaryXaxis.visibleRange.max-i)*this.model.m_AreaBounds.Width,Y:(t-s)/(this.model.axes.PrimaryYaxis.visibleRange.max-s)*(this.model.m_AreaBounds.Height-this.GetPointXY(this.model.axes.PrimaryXaxis.visibleRange.min,Math.max(this.model.axes.PrimaryYaxis.visibleRange.min,0)).Y)}},_wrap:function(e,t,i,s,a,r){var n,o=i,l=r.width,d=[],h=[],c=o.length,u=0,p=0,m=i.split(" "),g=m.length;if("wrap"==s){if(l>t)for(var f=1;f<=o.length;f++)if(i=o.substring(0,f),(l=ej.EjSvgRender.utils._measureText(i,null,a).width)>t){u+=1,i=o.substring(0,f-1),d[p]=i,o=o.slice(f-1,c),n=o.split(" "),o=m.indexOf(n[0])>-1?o:"-"+o;var _=ej.EjSvgRender.utils._measureText(i,null,a).width;p++,f=0}d[p]=i}else if("wrapandtrim"==s)for(var v,b,x,y=0,p=0;p<g;p++)if(v=m[p],(b=ej.EjSvgRender.utils._measureText(v,null,a).width)<t&&l>t){for(;p<g;){if(b=ej.EjSvgRender.utils._measureText(v,null,a).width,x=m[p+1]?ej.EjSvgRender.utils._measureText(m[p+1],null,a).width:0,!(b+x<=t&&x>0)){y=Math.max(y,b);break}v=v.concat(" "+m[p+1]),p++}d.push(v)}else{if(!(l>t)){d.push(i);break}h.push(v),v=ej.EjSvgRender.utils._trimText(v,t,a),_=ej.EjSvgRender.utils._measureText(v,null,a).width,y=Math.max(y,_),d.push(v)}return{text:d,unTrimmedText:h}},getMultiLevelLabelSize:function(e){var t=0;e._multiLevelLabelHeight=0;var i,s,a,r,n,o,l,d,h,c,u,p,m,g=[],f=[],_=[],v=e.multiLevelLabels.length,b=e.visibleRange,x=e.orientation.toLowerCase(),y=[];for(c="vertical"==x?e.length:e.width?e.width:this.model.primaryYAxis.AxisMaxWidth?e.length-this.model.primaryYAxis.AxisMaxWidth:e.length,a=0;a<v;a++)i=e.multiLevelLabels[a]=g[a]=$.extend(!0,{},this.model.multiLevelLabelsDefault,e.multiLevelLabels[a]),u=i.border.type.toLowerCase(),s=i.level,!i.visible||""==i.text||ej.util.isNullOrUndefined(i.start)||ej.util.isNullOrUndefined(i.end)||(r=Math.ceil(ej.EjSvgRender.utils._getPointXY(i.start,b,e.isInversed)*c),n=Math.ceil(ej.EjSvgRender.utils._getPointXY(i.end,b,e.isInversed)*c),o=ej.EjSvgRender.utils._measureText(i.text,null,i.font),m=i.textOverflow.toLowerCase(),l=ej.util.isNullOrUndefined(i.maximumTextWidth)?n-r:i.maximumTextWidth,d="vertical"==x?i.maximumTextWidth?i.maximumTextWidth:o.width:o.height,d+=2*i.border.width,o.width>l-10&&("wrap"==m||"wrapandtrim"==m)&&(h=this._wrap(e,l-10,i.text,m,i.font,o),h=h.text,d="vertical"==x?l-10:d*h.length),ej.util.isNullOrUndefined(f[s])?f[s]=d:f[s]=f[s]<d?d:f[s]);g.sort(function(e,t){return parseFloat(e.level)-parseFloat(t.level)}),e.multiLevelLabels.sort(function(e,t){return parseFloat(e.level)-parseFloat(t.level)});for(var w=0;w<g.length;w++)0==w?(e.multiLevelLabels[w]._level=g[w]._level=0,p=0):g[w].level>p+1?(e.multiLevelLabels[w]._level=g[w]._level=p+1,p=g[w]._level):(e.multiLevelLabels[w]._level=g[w]._level=g[w].level,p=g[w].level>p?g[w].level:p),"curlybrace"==u&&(y[e.multiLevelLabels[w]._level]=!0);for(var a=0;a<f.length;a++)_[a]=t,ej.util.isNullOrUndefined(f[a])?(f.splice(a,1),a--):(t="brace"==u?t+f[a]:t+f[a]+5,y[a]&&(t+=10,f[a]+=10));return e._multiLevelLabelHeight=t,e.multiLevelLabelHeight=f,e.prevHeight=_,t},_saturationColor:function(e,t){e=this.colorNameToHex(e),e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var i,s,a="#";for(s=0;s<3;s++)i=parseInt(e.substr(2*s,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),a+=("00"+i).substr(i.length);return a},_drawChartAreaRect:function(){var e=this.model.background&&this.model.background._gradientStop?"url(#"+this.svgObject.id+"_backGradient)":this.model.background;this.model.backGroundImageUrl&&(e="transparent");var t=this.model.border,i={id:this.svgObject.id+"_SvgRect",x:t.width/2,y:t.width/2,width:$(this.svgObject).width()-2*t.width,height:$(this.svgObject).height()-2*t.width,fill:e,opacity:t.opacity,"stroke-width":t.width,stroke:t.color,class:"e-chartborder"};if(this.svgRenderer.drawRect(i,this.svgObject),this.model.backGroundImageUrl&&this._drawBackImage(),"cartesianaxes"==this.model.AreaType&&!this.model.enable3D){var s={id:this.svgObject.id+"_ChartArea",x:this.model.m_AreaBounds.X,y:this.model.m_AreaBounds.Y,width:this.model.m_AreaBounds.Width,height:this.model.m_AreaBounds.Height,fill:this.model.chartArea.background,"stroke-width":this.model.chartArea.border.width,opacity:this.model.chartArea.border.opacity,stroke:this.model.chartArea.border.color,class:"e-chartareaborder"};this.svgRenderer.drawRect(s,this.svgObject)}},axesIndexCount:function(e,t){for(var i=[],s=0;s<e.length;s++){var a=e[s];"vertical"==a.orientation.toLowerCase()?a.rowIndex==t&&i.push(a):a.columnIndex==t&&i.push(a)}return i},axesCount:function(e){var t=[],i=[],s=0,a=this.model;$.each(e,function(e,i){"vertical"==i.orientation.toLowerCase()?(s=a.rowDefinitions?a.rowDefinitions.length:0,0==e?t.push({axis:i,index:i.rowIndex}):i.rowIndex!=t[t.length-1].axis.rowIndex&&t.push({axis:i,index:i.rowIndex})):(s=a.columnDefinitions?a.columnDefinitions.length:0,0==e?t.push({axis:i,index:i.columnIndex}):i.columnIndex!=t[t.length-1].axis.columnIndex&&t.push({axis:i,index:i.columnIndex}))});var r=t.length;if(s>r){r=s;for(var n=0;n<s;n++)i.push(n)}else for(var o=0;o<r;o++)i.push(t[o].index);return{length:r,indexValue:i}},_calRowSize:function(){var e=0,t=[],i=0,s=this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height;if(null!=this.model._rowDefinitions[0].rowDefinitions)for(var a=0,r=this.model._rowDefinitions.length;a<r;a++){var n=this.model._rowDefinitions[a].rowDefinitions;n.rowHeight=Math.abs(n.rowHeight);var o=0;if("percentage"==n.unit.toLowerCase()){var l=this._axisRowDefinitionSize(this.model.rowDefinitions);o=Math.floor(this.model.m_AreaBounds.Height*(n.rowHeight/l))}else o=n.rowHeight;0==a&&t.push(s),t.push(s-o-i),i+=o}else{var d=Math.floor(this.model.m_AreaBounds.Height/this.model._rowDefinitions.length);for(e=s;e>=this.model.m_AreaBounds.Y;e-=d)t.push(e)}return t},_calColumnSize:function(){var e=[],t=this.model.m_AreaBounds.X,i=this.model.m_AreaBounds.Width,s=0,a=this.model._columnDefinitions;if(null!=a[0].columnDefinitions)for(var r=0,n=a.length;r<n;r++){var o=a[r].columnDefinitions;o.columnWidth=Math.abs(o.columnWidth);var l;if("percentage"==o.unit.toLowerCase()){var d=this._axisColumnDefinitionSize(this.model.columnDefinitions);l=Math.floor(i*(o.columnWidth/d))}else l=o.columnWidth;0==r&&e.push(t),e.push(t+l+s),s+=l}else for(var h=Math.floor(i/a.length),c=t,u=t+i;c<=u;c+=h)e.push(c);return e},_calculateAxisSize:function(e){for(var t=!0,i=!0,s=this._calColumnSize(),a=this.model._columnDefinitions,r=0,n=a.length;r<n;r++)for(var o=s[r],l=s[r+1],d=0,h=0,c=!0,u=!0,p=this.model.m_AreaBounds.Y,m=p+this.model.m_AreaBounds.Height,g=0,f=a[r].axis.length;g<f;g++){var _=a[r].axis[g],v=0,b=0,x=_._opposed;if(e.axes[_.name]._validCross||(x?!u||!i&&0!=h?(b=a.farSizes[h],v=p-=b,h++):(v=p,u=!1):!c||!t&&0!=d?(b=a.nearSizes[d],v=m+=b,d++):(v=m,c=!1)),_.columnSpan){if(a[r].index!=_.columnIndex)continue;var y=n>=r+_.columnSpan?r+_.columnSpan:r+1;l=s[y],x||0!=d||(t=c),x&&0==h&&(i=u)}else l=s[r+1],t=!0,i=!0;_.Location={},_.Location.X1=o+_.plotOffset,_.Location.Y1=v,_.Location.X2=l-_.plotOffset,_.Location.Y2=v,_.x=_.Location.X1,_.y=_.Location.Y1,_.width=_.Location.X2-_.Location.X1,_.height=_.Location.Y2-_.Location.Y1}t=!0,i=!0;for(var w=this._calRowSize(),C=this.model._rowDefinitions,r=0,S=C.length;r<S;r++)for(var T=w[r],R=w[r+1],k=0,O=0,D=!0,I=!0,j=this.model.m_AreaBounds.X,L=j,A=j+this.model.m_AreaBounds.Width,g=0,E=C[r].axis.length;g<E;g++){var P=0,M=0,F=C[r].axis[g],x=F._opposed;if(e.axes[F.name]._validCross||(x?!I||!i&&0!=i?(P=C.farSizes[O],M=A+=P,O++):(M=A,I=!1):!D||!t&&0!=k?(P=C.nearSizes[k],M=L-=P,k++):(M=j,D=!1)),F.rowSpan){if(C[r].index!=F.rowIndex)continue;var N=S>=r+F.rowSpan?r+F.rowSpan:r+1;R=w[N],x||0!=k||(t=D),x&&0==O&&(i=I)}else R=w[r+1],t=!0,i=!0;F.Location={},F.Location.X1=M,F.Location.Y1=T-F.plotOffset,F.Location.X2=M,F.Location.Y2=R+F.plotOffset,F.x=F.Location.X1,F.y=F.Location.Y2,F.height=F.Location.Y1-F.Location.Y2,F.width=F.axisLine.width}},_validateCrossing:function(e){if(e._opposedPosition=!1,null!=e.crossesAt){var t=this._getCrossAxis(this.model._axes,"horizontal"==e.orientation.toLowerCase(),e.crossesInAxis);return e._crossValue=this._getCrossValue(e,t,t._valueType),((t.isInversed?!e.opposedPosition:e.opposedPosition)?e._crossValue<=t.visibleRange.min:e._crossValue>=t.visibleRange.max)&&(e._opposedPosition=!0),t.visibleRange.min<e._crossValue&&t.visibleRange.max>e._crossValue}return!1},_axisCrossing:function(e,t,i){var s="horizontal"==e.orientation.toLowerCase(),a=this._getCrossAxis(this.model._axes,s,e.crossesInAxis),r=e._crossValue,n=Math.abs((a.isInversed?a.visibleRange.max:a.visibleRange.min)-r);this._locateAxis(e,a,s,n),t||(i._crossAxisOverlap=this._avoidOverlapping(e,this.model.m_AreaBounds,s,e.opposedPosition,i)||i._crossAxisOverlap)},_locateAxis:function(e,t,i,s){var a=(i?t.height:t.width)*s/t.visibleRange.delta;i?e.y=t.y+t.height-a:e.x=t.x+a},_avoidOverlapping:function(e,t,i,s,a){var r=0,n=e.showNextToAxisLine?a.axes[e.name]._bounds:0;if(i){if(!s&&e.y+n>t.Y+t.Height)return t.Height-=r=e.y+n-t.Y-t.Height,this._recalculateSpace(e,i,s,r),!0;if(s&&e.y-n<t.Y)return t.Y+=r=n-(e.y-t.Y),t.Height-=r,this._recalculateSpace(e,i,s,r),!0}else{if(!s&&e.x-n<t.X)return t.X+=r=n-(e.x-t.X),t.Width-=r,this._recalculateSpace(e,i,s,r),!0;if(s&&e.x+n>t.X+t.Width)return t.Width-=r=e.x+n-t.X-t.Width,this._recalculateSpace(e,i,s,r),!0;if("inside"==e.labelPosition&&e.x+n>t.X+t.Width)return t.Width-=r=e.x+n-t.X-t.Width,this._recalculateSpace(e,i,s,r,e.showNextToAxisLine),!0}},_recalculateSpace:function(e,t,i,s,a){if(t){for(var r=this.model._rowDefinitions,n=i?r.length-1:0,o=0,l=r[n].axis.length;o<l;o++)r[n].axis[o].height-=s,r[n].axis[o].Location.Y2-=s,i&&(r[n].axis[o].Location.Y1=r[n].axis[o].y+=s);var d=e.columnIndex;r=this.model._columnDefinitions;for(var o=0,l=r.length;o<l;o++)if(o!==d)for(var h=0,c=r[o].axis.length;h<c;h++)r[o].axis[h]._opposed===i&&(r[o].axis[h].Location.Y1=r[o].axis[h].Location.Y2=r[o].axis[h].y+=(i?1:-1)*s)}else{for(var r=this.model._columnDefinitions,n=i?r.length-1:0,o=0,l=r[n].axis.length;o<l;o++)r[n].axis[o].width-=s,a||(i?r[n].axis[o].Location.X2-=s:r[n].axis[o].Location.X1=r[n].axis[o].x+=s);var u=e.rowIndex;r=this.model._rowDefinitions;for(var o=0,l=r.length;o<l;o++)if(o!==u)for(var h=0,c=r[o].axis.length;h<c;h++)r[o].axis[h]._opposed===i&&(r[o].axis[h].Location.X1=r[o].axis[h].Location.X2=r[o].axis[h].x+=(i?-1:1)*s)}},_getCrossValue:function(e,t,i){switch(i.toLowerCase()){case"category":return-1!=t.labels.indexOf(e.crossesAt)?t.labels.indexOf(e.crossesAt):e.crossesAt;case"datetime":return isNaN(Date.parse(e.crossesAt))?null:Date.parse(e.crossesAt);case"logarithmic":return Math.log(e.crossesAt)/Math.log(t.logBase)}return e.crossesAt},_getXCrossValue:function(e,t,i){var s=t.crossesInAxis,a=e._yAxisName;return(i.axes[t.name]._validCross||null==i.axes[t.name]._validCross)&&t.crossesAt&&(!s&&a===this.model.primaryYAxis.name||s&&this._getCrossAxis(this.model._axes,!0,s).name===a)?t.crossesAt:0},_getAxisByName:function(e,t,i){if(i)for(var s=0,a=e.length;s<a;s++)if(e[s].name===i&&(t?"vertical"==e[s].orientation:"horizontal"==e[s].orientation))return e[s]},_getCrossAxis:function(e,t,i){return this._getAxisByName(e,t,i)||(this.model.requireInvertedAxes?t?this.model.primaryXAxis:this.model.primaryYAxis:t?this.model.primaryYAxis:this.model.primaryXAxis)},_arrangeAxis:function(){for(var e,t,i=this,s=0;s<this.model._axes.length;s++)e=this.model._axes[s],"horizontal"==e.orientation.toLowerCase()?(i.model.hAxes.push(e),e.columnIndex=ej.util.isNullOrUndefined(e.columnIndex)?0:e.columnIndex,i.model.hAxes[i.model.hAxes.length-1].columnIndex=e.columnIndex):"vertical"==e.orientation.toLowerCase()&&(i.model.vAxes.push(e),e.rowIndex=ej.util.isNullOrUndefined(e.rowIndex)?0:e.rowIndex,i.model.vAxes[i.model.vAxes.length-1].rowIndex=e.rowIndex,(t=ej.util.isNullOrUndefined(i.model.rowDefinitions)?null:i.model.rowDefinitions[e.rowIndex])&&(e.axisBottomLine={},e.axisBottomLine.visible=!0,e.axisBottomLine.lineWidth=t.lineWidth,e.axisBottomLine.color=t.lineColor));this.model.hAxes=ej.DataManager(this.model.hAxes,ej.Query().sortBy("columnIndex")).executeLocal(),this.model.vAxes=ej.DataManager(this.model.vAxes,ej.Query().sortBy("rowIndex")).executeLocal();var a=this.axesCount(i.model.vAxes);if(i.model._rowDefinitions=[],i.model.vAxes.length>0)for(var r=0;r<a.length;r++){var n=i.model.rowDefinitions,o=n?n[r]?n[r]:n[0]:null;i.model._rowDefinitions.push({axis:this.axesIndexCount(i.model.vAxes,a.indexValue[r]),index:a.indexValue[r],rowDefinitions:o})}var l=i.model._rowDefinitions,d=this._axisFilter(l,"rowSpan");this._SpanningAxes(l,d,!0);var h=this.axesCount(i.model.hAxes);if(i.model._columnDefinitions=[],i.model.hAxes.length>0)for(var c=0;c<h.length;c++){var u=i.model.columnDefinitions,p=u?u[c]?u[c]:u[0]:null;i.model._columnDefinitions.push({axis:this.axesIndexCount(i.model.hAxes,h.indexValue[c]),index:h.indexValue[c],columnDefinitions:p})}var m=i.model._columnDefinitions,g=this._axisFilter(m,"columnSpan");this._SpanningAxes(m,g,!1),this._axisSize()},_SpanningAxes:function(e,t,i){for(var s=0,a=t.length;s<a;s++){var r=t[s];if(null==r)break;var n=i?r.rowSpan:r.columnSpan,o=i?r.rowIndex:r.columnIndex;if(void 0!=e[o])for(var l=e[o].axis.indexOf(r),d=1,h=o+1;d<n&&h<e.length;d++,h++)e[h].axis.length>=l&&e[h].axis.splice(l,0,r)}},_axisFilter:function(e,t){var i=[];return e.filter(function(e){for(var s=ej.DataManager(e.axis,ej.Query().where(t,">",1)).executeLocal(),a=0,r=s.length;a<r;a++)i.push(s[a])}),i},_axisSize:function(){for(var e=this._getLegendSpace(),t=$(this.svgObject).width()-this.model.margin.left-this.model.margin.right-2*this.model.elementSpacing-e.leftLegendWidth-e.rightLegendWidth,i=Math.floor(t/this.axesCount(this.model.hAxes).length),s=$(this.svgObject).height()-this.model.margin.top-this.model.margin.bottom-2*this.model.elementSpacing-e.topLegendHeight-e.bottomLegendHeight-e.modelTitleHeight-e.modelsubTitleHeight,a=Math.floor(s/this.axesCount(this.model.vAxes).length),r=0;r<this.model._axes.length;r++){var n=this.model._axes[r];if("horizontal"==n.orientation.toLowerCase())if("polaraxes"!=this.model.AreaType){var o=ej.util.isNullOrUndefined(this.model.columnDefinitions)?[]:this.model.columnDefinitions[n.columnIndex],l=i;if(o)if(o.unit=void 0==o.unit?"percentage":o.unit,o.columnWidth=void 0==o.columnWidth?100:o.columnWidth,"percentage"==o.unit.toLowerCase()){var d=this._axisColumnDefinitionSize(this.model.columnDefinitions);l=Math.floor(i*(o.columnWidth/d))}else l=o.columnWidth;n.length=n.columnSpan?n.columnSpan*l:l}else n.length=t>2*s?t-s:t;else if("vertical"==n.orientation.toLowerCase())if("polaraxes"!=this.model.AreaType){var h=ej.util.isNullOrUndefined(this.model.rowDefinitions)?[]:this.model.rowDefinitions[n.rowIndex],c=a;if(h)if(h.unit=void 0==h.unit?"percentage":h.unit,h.rowHeight=void 0==h.rowHeight?100:h.rowHeight,"percentage"==h.unit.toLowerCase()){var d=this._axisRowDefinitionSize(this.model.rowDefinitions);c=Math.floor(a*(h.rowHeight/d))}else c=h.rowHeight;n.length=n.rowSpan?n.rowSpan*c:c}else n.length=s/2}},_axisRowDefinitionSize:function(e){var t=0;if(e)for(var i=0;i<e.length;i++)t+=e[i].rowHeight;return t=t>100?t:100},_axisColumnDefinitionSize:function(e){var t=0;if(e)for(var i=0;i<e.length;i++)t+=e[i].columnWidth;return t=t>100?t:100},_axisMeasure:function(e,t,i,s){var a=0,r=0,n=0;e.axisLine.width=e.axisLine.width<0?0:e.axisLine.width,e.majorTickLines.size=e.visible?e.majorTickLines.size<0?0:e.majorTickLines.size:0;var o=!this.model.enable3D&&e.visible&&e.axisLine.visible&&e.axisLine.width,l=ej.EjSvgRender.utils._measureText(e.title.text,t,e.title.font),d=e.visible?this.model.elementSpacing:0;"vertical"==i?(r=e._LableMaxWidth.width,a=""!=e.title.text&&e.title.visible&&e.visible?8===document.documentMode?l.width:l.height+2*d:0):(r=e._LableMaxWidth.height,a=""!=e.title.text&&e.title.visible&&e.visible?l.height+d:0),a="inside"==e.title.position.toLowerCase()?0:a,n=this.getMultiLevelLabelSize(e);return 0==s&&"inside"==e.tickLinesPosition&&"inside"==e.labelPosition?e.AxisMaxWidth=a+n+o+d:0==s&&"inside"==e.tickLinesPosition&&"inside"!=e.labelPosition?e.AxisMaxWidth=a+n+o+d+r:0==s&&"inside"!=e.tickLinesPosition&&"inside"==e.labelPosition?e.AxisMaxWidth=a+n+o+d+e.majorTickLines.size:e.AxisMaxWidth=a+n+o+d+e.majorTickLines.size+r,e.AxisMaxWidth+=e._isScroll?18:0,e.AxisMaxWidth},_arraySum:function(e){for(var t=0,i=0;i<e.length;i++)t+=parseFloat(e[i])||0;return t},_calSpace:function(e,t,i,s){for(var a,r,n,o=[],l=[],d=0;d<t.length;d++)for(var h=0,c=0,u=0;u<t[d].axis.length;u++){var p=t[d].axis[u];a=s.axes[p.name]._bounds=this._axisMeasure(p,e,i,u),r=s.axes[p.name]._validCross=this._validateCrossing(p),n=r?0:a,p._opposed=p.opposedPosition?!p._opposedPosition:p._opposedPosition||p.opposedPosiiton||!1,r&&t[d].axis[u].showNextToAxisLine||(p.showNextToAxisLine||(n="inside"==p.labelPosition?a-p._multiLevelLabelHeight:a),p._opposed?(l.length<=c?l.push(n):l[c]<n&&(l[c]=n),c++):(o.length<=h?o.push(n):o[h]<n&&(o[h]=n),h++))}return{nearSizes:o,farSizes:l}},_getLegendSpace:function(){var e,t,i,s=this.model,a=s.legend,r=a.position.toLowerCase(),n=s.LegendActualBounds,o=ej.EjSvgRender.utils._measureText,l=s.title,d=l.subTitle,h=s.elementSpacing,c=s.margin,u=s.svgWidth,p=a.border.width,m=0,g=0,f=0,_=0,v=0,b=0,x=(l.text.split(" "),l.enableTrim),y=l.maximumWidth,y="auto"==y.toString()||""==y.toString()?.75*u:parseInt(y),w=l.textOverflow.toLowerCase(),C=l.text,S=l.visible,T=ej.EjSvgRender.utils._measureText(l.text,$(this.svgObject).width()-this.model.margin.left-this.model.margin.right,l.font),R=(d.text.split(" "),d.enableTrim),k=d.maximumWidth,k="auto"==k.toString()||""==k.toString()?.75*u:parseInt(k),O=d.textOverflow.toLowerCase(),D=d.text,I=d.visible,j=ej.EjSvgRender.utils._measureText(d.text,$(this.svgObject).width()-this.model.margin.left-this.model.margin.right,d.font),L=!!(S&&x&&T.width>y),A=!!(I&&R&&j.width>k),E="wrap"==w||"wrapandtrim"==w,P="wrap"==O||"wrapandtrim"==O;this.model.titleWrapTextCollection=[],this.model.subTitleWrapTextCollection=[],this.model.trimTooltip=!1,this.model.subTitleTooltip=!1,a.visible&&(g=n.Width+5+h+2*p,f="left"==r?g:0,_="right"==r?g:0,a.title.text&&(m=o(a.title,null,a.title.font).height),v="top"==r?n.Height+m+2*p:0,b="bottom"==r?n.Height+m+2*p:0),L&&"wrap"==w?(i={text:C,font:l.font},e=this._rowsCalculation(i,y,w)):L&&"wrapandtrim"==w?(i={text:C,font:l.font},e=this._rowsCalculation(i,y,w)):"wrapandtrim"!=w&&"wrap"!=w||(i={text:C,font:l.font},e=this._rowsCalculation(i,ej.EjSvgRender.utils._measureText(C,null,l.font).width,w)),this.model.titleWrapTextCollection=e?e.textCollection:"",this.model.titleMaxWidth=e?e.wordMax:y,A&&"wrap"==O?(i={text:D,font:d.font},t=this._rowsCalculation(i,k,O)):A&&"wrapandtrim"==O?(i={text:D,font:d.font},t=this._rowsCalculation(i,k,O),this.model.subTitleTooltip=this.model.trimTooltip):"wrapandtrim"!=O&&"wrap"!=O||(i={text:D,font:d.font},t=this._rowsCalculation(i,k,O)),this.model.subTitleWrapTextCollection=t?t.textCollection:"",this.model.subTitleMaxWidth=t?t.wordMax:k;var M=o(l.text,u-c.left-c.right,l.font).height,F=o(d.text,u-c.left-c.right,d.font).height;return{leftLegendWidth:f,rightLegendWidth:_,topLegendHeight:v,bottomLegendHeight:b,modelTitleHeight:""!=l.text&&l.visible?x&&E&&T.width>y?M*this.model.titleWrapTextCollection.length+h:M+h:0,modelsubTitleHeight:""!=d.text&&d.visible&&l.visible?R&&P&&j.width>k?F*this.model.subTitleWrapTextCollection.length+h:F+h:0}},_arraySome:function(e,t){for(var i,s,a=!1,r=this.model.zooming.enableScrollbar,n=e.length,o=0;o<n;o++)i=e[o].scrollbarSettings.enableScrollbar,s=e[o].scrollbarSettings.pointsLength,a=a||(e[o]._isScroll&&e[o].maxPointLength<s||e[o].zoomFactor<1&&i&&r)&&e[o].orientation.toLowerCase()==t;return a},_calculateAreaBounds:function(e){var t=this,i=$(this.svgObject).width()-this.model.margin.left-this.model.margin.right,s=t.model.border.width;this.model._axes[0],this.model.zooming.enableScrollbar,this.model.zooming.type.toLowerCase();t.model.scrollerSize=18,this.model._yScroll=this._arraySome(this.model._axes,"vertical"),this.model._xScroll=this._arraySome(this.model._axes,"horizontal");var a=this._calSpace(i,t.model._rowDefinitions,"vertical",e);t.model._rowDefinitions.nearSizes=a.nearSizes,t.model._rowDefinitions.farSizes=a.farSizes;var r=this._arraySum(a.nearSizes),n=this._arraySum(a.farSizes),o=this._getLegendSpace(),l=r+o.leftLegendWidth+t.model.margin.left+s,d=n+o.rightLegendWidth+t.model.margin.right+t.model.margin.left+2*s,h=$(this.svgObject).width(),c=h-(l+d);if((c=Math.round(c)<=0?0:c)<=0&&"cartesianaxes"==this.model.AreaType)$(this.svgObject).width(h-c+1),this._calculateAreaBounds(e);else{var u=this._calSpace(i,t.model._columnDefinitions,"horizontal",e);t.model._columnDefinitions.nearSizes=u.nearSizes,t.model._columnDefinitions.farSizes=u.farSizes;var p=this._arraySum(u.nearSizes),m=this._arraySum(u.farSizes),g=p||m?this.model.elementSpacing:0,f=m+this.model.margin.top+g+o.modelTitleHeight+o.modelsubTitleHeight+o.topLegendHeight+s,_=p+this.model.margin.bottom+o.bottomLegendHeight+2*s,v=Math.abs($(this.svgObject).height()-(f+_));v=0==v?1:v,this.model.m_AreaBounds={X:l,Y:f,Width:c,Height:v},this.model.m_Spacing={Left:l,Top:f,Right:d,Bottom:_},this.model.enableCanvasRendering?(this.canvasX=l,this.canvasY=f,this.canvasWidth=c,this.canvasHeight=v):this.canvasX=this.canvasY=this.canvasHeight=this.canvasWidth=0}}},jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}}(jQuery),function(e,t){t.widget("ejChart","ej.datavisualization.Chart",{element:null,model:null,validTags:["div"],defaults:{border:{color:"transparent",width:0,opacity:.3},chartArea:{border:{color:"Gray",width:.5,opacity:.3},background:"transparent"},highlightColor:null,primaryXAxis:{rotateOn:"middle",crossesAt:null,crossesInAxis:null,isIndexed:!1,multiLevelLabelsColor:null,multiLevelLabelsFontColor:null,alignment:"center",labelPlacement:"",scrollbarSettings:{visible:!0,canResize:!0,range:{min:null,max:null},pointsLength:null},range:{min:null,max:null,interval:null},labelPosition:"outside",tickLinesPosition:"outside",alternateGridBand:{odd:{fill:"transparent",opacity:1},even:{fill:"transparent",opacity:1}},enableAutoIntervalOnZooming:!0,majorGridLines:{color:null,width:1,dashArray:"",visible:!0,opacity:1},majorTickLines:{color:null,width:1,size:5,visible:!0},minorGridLines:{color:null,width:1,dashArray:"",visible:!0},minorTickLines:{color:null,width:1,size:5,visible:!0},labelBorder:{color:null,width:0},multiLevelLabels:[{visible:!1,text:"",textAlignment:"center",start:null,end:null,level:0,maximumTextWidth:null,textOverflow:"trim",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",fontWeight:"Regular",opacity:1},border:{type:"rectangle",width:1}}],minorTicksPerInterval:null,columnIndex:null,columnSpan:null,labelRotation:null,valueType:null,name:null,labelFormat:null,desiredIntervals:null,intervalType:null,roundingPlaces:null,logBase:10,plotOffset:0,labels:[],stripLine:[{visible:!1,startFromAxis:!1,text:"",width:0,textAlignment:"middlecenter",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",fontWeight:"Regular",color:"black",opacity:1},start:null,end:null,isRepeat:!1,repeatEvery:null,repeatUntil:null,sizeType:"auto",color:"gray",borderColor:"black",zIndex:"over"}],title:{text:"",visible:!0,enableTrim:!1,offset:0,alignment:"center",isReversed:!1,position:"outside",maximumTitleWidth:null,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"14px",opacity:1,fontWeight:"regular",color:null}},rangePadding:"Auto",additionalPadding:[1,1],orientation:"Horizontal",maximumLabels:3,opposedPosition:!1,showNextToAxisLine:!0,axisLine:{visible:!0,width:1,dashArray:"",offset:0,color:null},labelIntersectAction:"none",maximumLabelWidth:34,enableTrim:!1,edgeLabelPlacement:"none",isInversed:!1,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"11px",color:null,fontWeight:"regular",opacity:1},visible:!0,crosshairLabel:{rx:3,ry:3,border:{color:null,width:1},fill:null,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:null},visible:!1},zoomFactor:1,zoomPosition:0},primaryYAxis:{rotateOn:"middle",crossesAt:null,crossesInAxis:null,showNextToAxisLine:!0,alignment:"center",startFromZero:!0,range:{min:null,max:null,interval:null},scrollbarSettings:{visible:!0,canResize:!0,range:{min:null,max:null},pointsLength:null},labelPlacement:"",labelPosition:"outside",tickLinesPosition:"outside",multiLevelLabelsColor:null,multiLevelLabelsFontColor:null,alternateGridBand:{odd:{fill:"transparent",opacity:1},even:{fill:"transparent",opacity:1}},enableAutoIntervalOnZooming:!0,majorGridLines:{color:null,width:1,dashArray:"",visible:!0,opacity:1},majorTickLines:{color:null,width:1,size:5,visible:!0},minorGridLines:{color:null,width:1,dashArray:"",visible:!0},minorTickLines:{color:null,width:1,size:5,visible:!0},labelBorder:{color:null,width:0},multiLevelLabels:[{visible:!1,text:"",textAlignment:"center",start:null,end:null,level:0,maximumTextWidth:null,textOverflow:"trim",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",fontWeight:"Regular",opacity:1},border:{type:"rectangle",width:1}}],minorTicksPerInterval:null,rowIndex:null,rowSpan:null,valueType:null,name:null,labelFormat:null,desiredIntervals:null,intervalType:null,roundingPlaces:null,labels:[],title:{text:"",visible:!0,enableTrim:!1,offset:0,alignment:"center",isReversed:!1,position:"outside",maximumTitleWidth:null,font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal",opacity:1,size:"14px",fontWeight:"regular"}},rangePadding:"Auto",stripLine:[{visible:!1,startFromAxis:!1,width:0,text:"",textAlignment:"middlecenter",font:{fontFamily:"Segoe UI",fontWeight:"Regular",fontStyle:"Normal",size:"12px",color:"black",opacity:1},start:null,end:null,isRepeat:!1,repeatEvery:null,repeatUntil:null,sizeType:"auto",color:"gray",borderColor:"black",zIndex:"over"}],logBase:10,plotOffset:0,orientation:"Vertical",maximumLabels:3,labelIntersectAction:"none",maximumLabelWidth:34,enableTrim:!1,edgeLabelPlacement:"none",isInversed:!1,crosshairLabel:{rx:3,ry:3,border:{color:null,width:1},fill:null,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:null},visible:!1},visible:!0,opposedPosition:!1,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"11px",opacity:1,fontWeight:"regular",color:null},axisLine:{visible:!0,width:1,dashArray:"",offset:0,color:null},zoomFactor:1,zoomPosition:0},axes:[],secondaryX:{rotateOn:"middle",crossesAt:null,crossesInAxis:null,showNextToAxisLine:!0,alignment:"center",multiLevelLabelsColor:null,multiLevelLabelsFontColor:null,range:{min:null,max:null,interval:null},scrollbarSettings:{visible:!0,canResize:!0,range:{min:null,max:null},pointsLength:null},tickLinesPosition:"outside",labelPosition:"outside",majorGridLines:{color:null,width:1,dashArray:"",visible:!0},alternateGridBand:{odd:{fill:"transparent",opacity:1},even:{fill:"transparent",opacity:1}},enableAutoIntervalOnZooming:!0,majorTickLines:{color:null,width:1,size:5,visible:!0},minorGridLines:{color:null,width:1,dashArray:"",visible:!0},minorTickLines:{color:null,width:1,size:5,visible:!0},labelBorder:{color:null,width:0},multiLevelLabels:[{visible:!1,text:"",textAlignment:"center",start:null,end:null,level:0,maximumTextWidth:null,textOverflow:"trim",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",fontWeight:"Regular",opacity:1},border:{type:"rectangle",width:1}}],minorTicksPerInterval:null,columnIndex:null,columnSpan:null,labelRotation:null,valueType:null,name:null,labelFormat:null,labelPlacement:"",desiredIntervals:null,intervalType:null,roundingPlaces:null,logBase:10,plotOffset:0,labels:[],stripLine:[{visible:!1,startFromAxis:!1,text:"",textAlignment:"middlecenter",font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"regular",size:"12px",color:"black",opacity:1},start:null,end:null,isRepeat:!1,repeatEvery:null,repeatUntil:null,sizeType:"auto",color:"gray",borderColor:"black",zIndex:"over"}],title:{text:"",visible:!0,enableTrim:!1,offset:0,alignment:"center",isReversed:!1,position:"outside",maximumTitleWidth:null,font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal",size:"14px",opacity:1,fontWeight:"regular"}},rangePadding:"Auto",additionalPadding:[1,1],orientation:"Horizontal",maximumLabels:3,opposedPosition:!1,axisLine:{visible:!0,width:1,dashArray:"",offset:0,color:null},labelIntersectAction:"none",edgeLabelPlacement:"none",font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal",size:"11px",fontWeight:"regular",opacity:1},visible:!0,crosshairLabel:{rx:3,ry:3,border:{color:null,width:1},fill:null,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:null},visible:!1},zoomFactor:1,zoomPosition:0},secondaryY:{rotateOn:"middle",crossesAt:null,crossesInAxis:null,showNextToAxisLine:!0,alignment:"center",startFromZero:!0,multiLevelLabelsColor:null,multiLevelLabelsFontColor:null,range:{min:null,max:null,interval:null},scrollbarSettings:{visible:!0,canResize:!0,range:{min:null,max:null},pointsLength:null},tickLinesPosition:"outside",labelPosition:"outside",majorGridLines:{color:null,width:1,dashArray:"",visible:!0},alternateGridBand:{odd:{fill:"transparent",opacity:1},even:{fill:"transparent",opacity:1}},enableAutoIntervalOnZooming:!0,majorTickLines:{color:null,width:1,size:5,visible:!0},minorGridLines:{color:null,width:1,dashArray:"",visible:!0},minorTickLines:{color:null,width:1,size:5,visible:!0},labelBorder:{color:null,width:0},multiLevelLabels:[{visible:!1,text:"",textAlignment:"center",start:null,end:null,level:0,maximumTextWidth:null,textOverflow:"trim",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",fontWeight:"Regular",opacity:1},border:{type:"rectangle",width:1}}],minorTicksPerInterval:null,rowIndex:null,rowSpan:null,valueType:null,name:null,labelFormat:null,desiredIntervals:null,intervalType:null,roundingPlaces:null,labels:[],title:{text:"",visible:!0,enableTrim:!1,offset:0,alignment:"center",isReversed:!1,position:"outside",maximumTitleWidth:null,font:{fontFamily:"Segoe UI",fontStyle:"Normal",opacity:1,size:"14px",fontWeight:"regular",color:null}},rangePadding:"Auto",stripLine:[{visible:!1,startFromAxis:!1,text:"",textAlignment:"middlecenter",font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"regular",size:"12px",color:"black",opacity:1},start:null,end:null,isRepeat:!1,repeatEvery:null,repeatUntil:null,sizeType:"auto",color:"gray",borderColor:"black",zIndex:"over"}],logBase:10,plotOffset:0,orientation:"Vertical",maximumLabels:3,labelIntersectAction:"none",labelPlacement:"",edgeLabelPlacement:"none",crosshairLabel:{rx:3,ry:3,border:{color:null,width:1},fill:null,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:null},visible:!1},visible:!0,opposedPosition:!1,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"11px",opacity:1,fontWeight:"regular"},axisLine:{color:null,visible:!0,width:1,dashArray:"",offset:0},zoomFactor:1,zoomPosition:0},trendlineDefaults:{type:"linear",visibility:"",visibleOnLegend:"visible",name:"Trendline",fill:"",width:1,opacity:1,
dashArray:"",forwardForecast:0,backwardForecast:0,polynomialOrder:2,period:2,intercept:null,tooltip:{visible:!1,format:null,fill:null,border:{width:1,color:null},duration:"500ms",enableAnimation:!0,opacity:.95,font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",opacity:1}}},indicatorDefaults:{visible:!0,points:[],tooltip:{visible:!1,format:null,fill:null,border:{width:1,color:null},duration:"500ms",enableAnimation:!0,opacity:.95},seriesName:"",font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",color:"#707070",opacity:1},type:"SMA",period:14,standardDeviations:2,kPeriod:3,dPeriod:3,periodLine:{fill:"blue",width:2},lowerLine:{fill:"#008000",width:2},upperLine:{fill:"#ff0000",width:2},macdLine:{fill:"#ff9933",width:2},histogram:{fill:"#ccccff",opacity:1,border:{color:"#9999ff",width:1}},fill:"#00008B",width:2,xAxisName:"",yAxisName:"",visibility:"visible",macdType:"line",shortPeriod:12,longPeriod:26,trigger:9,enableAnimation:!1,animationDuration:null},annotationsDefault:{visible:!1,content:"",coordinateUnit:"none",verticalAlignment:"middle",horizontalAlignment:"middle",region:"chart",x:0,y:0,opacity:1,angle:0,xAxisName:"",yAxisName:"",margin:{left:0,right:0,bottom:0,top:0}},multiLevelLabelsDefault:{visible:!1,text:"",textAlignment:"center",start:null,end:null,level:0,maximumTextWidth:null,textOverflow:"trim",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",fontWeight:"Regular",opacity:1},border:{type:"rectangle",width:1}},stripLineDefault:{visible:!1,startFromAxis:!1,width:0,text:"",textAlignment:"middlecenter",font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",color:"black",opacity:1},start:null,end:null,isRepeat:!1,repeatEvery:null,repeatUntil:null,sizeType:"auto",color:"gray",borderColor:"black",zIndex:"over",borderWidth:1},rowDefinitions:null,columnDefinitions:null,title:{text:"",enableTrim:!1,visible:!0,isReversed:!1,maximumWidth:"auto",textOverflow:"trim",textAlignment:"center",background:"transparent",border:{color:"transparent",width:1,opacity:.8,cornerRadius:.8},font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal",size:"16px",opacity:1,fontWeight:"regular"},subTitle:{text:"",enableTrim:!1,visible:!0,maximumWidth:"auto",textOverflow:"trim",textAlignment:"far",background:"transparent",border:{color:"transparent",width:1,opacity:.8,cornerRadius:.8},font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",opacity:1,fontWeight:"regular"}}},lineCap:{butt:"butt",round:"round",square:"square"},lineJoin:{round:"round",bevel:"bevel",miter:"miter"},legendAlignment:{near:"near",center:"center",far:"far"},legendPosition:{top:"top",bottom:"bottom",right:"right",left:"left",custom:"custom"},enableAnimation:!0,legend:{title:{text:"",textAlignment:"center",font:{color:null,size:"12px",fontFamily:"Segoe UI",fontStyle:"normal",fontWeight:"regular"}},border:{color:"transparent",width:1},visible:!0,isReversed:!1,textOverflow:"none",textWidth:34,toggleSeriesVisibility:!0,enableScrollbar:!0,itemPadding:10,shape:"None",alignment:"Center",position:"Bottom",location:{x:0,y:0},itemStyle:{height:9,width:9,border:{color:"transparent",width:1}},rowCount:null,columnCount:null,opacity:1,fill:null,background:null,font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px"},size:{height:null,width:null}},indicators:[{points:[],tooltip:{visible:!1,format:null,fill:null,border:{width:1,color:null},duration:"500ms",enableAnimation:!0,opacity:.95},seriesName:"",animationDuration:null,type:"SMA",period:14,standardDeviations:2,kPeriod:3,dPeriod:3,periodLine:{fill:"blue",width:2},lowerLine:{fill:"#008000",width:2},upperLine:{fill:"#ff0000",width:2},macdLine:{fill:"#ff9933",width:2},histogram:{fill:"#ccccff",opacity:1,border:{color:"#9999ff",width:1}},fill:"#00008B",visible:!0,font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",color:"#707070",opacity:1},width:2,xAxisName:"",yAxisName:"",macdType:"line",shortPeriod:12,longPeriod:26,trigger:9,visibility:"visible",enableAnimation:!1}],background:null,backGroundImageUrl:null,annotations:[{visible:!1,content:"",coordinateUnit:"none",verticalAlignment:"middle",horizontalAlignment:"middle",region:"chart",x:0,y:0,opacity:1,angle:0,xAxisName:"",yAxisName:"",margin:{left:0,right:0,bottom:0,top:0}}],series:[{dragSettings:{enable:!1,type:"xy"},type:"column",enableTrackTooltip:!0,splitMode:"value",splitValue:null,splineType:"natural",cardinalSplineTension:.5,gapWidth:50,pieOfPieCoefficient:.6,visibleOnLegend:"visible",enableAnimation:!1,animationDuration:null,animationType:"linear",isClosed:!0,isTransposed:!1,isStacking:!0,columnSpacing:0,columnWidth:.7,columnFacet:"rectangle",drawType:"line",doughnutCoefficient:.4,explodeOffset:25,pyramidMode:"linear",boxPlotMode:"exclusive",funnelWidth:"11.6%",funnelHeight:"32.7%",positiveFill:null,showMedian:!0,outlierSettings:{shape:"circle",size:{width:6,height:6}},cornerRadius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},connectorLine:{width:1,opacity:1,dashArray:null},errorBar:{visibility:"hidden",mode:"vertical",type:"fixedValue",horizontalErrorValue:1,verticalErrorValue:3,horizontalPositiveErrorValue:1,horizontalNegativeErrorValue:1,verticalPositiveErrorValue:5,verticalNegativeErrorValue:5,direction:"both",cap:{visible:!0,width:1,length:20},width:1,opacity:1},highlightSettings:{enable:!1,mode:"series",color:"",opacity:.6,border:{color:"",width:2},pattern:"none",customPattern:""},selectionSettings:{type:"Single",enable:!1,mode:"series",rangeType:"xy",color:"",opacity:.6,border:{color:"",width:2},pattern:"none",customPattern:""},emptyPointSettings:{visible:!0,style:{color:"",border:{color:"",width:1}},displayMode:"gap"},labelPosition:"inside",gapRatio:0,points:null,pieCoefficient:.8,doughnutSize:.8,dataSource:null,high:"",low:"",open:"",close:"",bullFillColor:null,bearFillColor:null,query:null,xName:"",yName:"",pointColorMappingName:"",visibility:"visible",startAngle:null,endAngle:null,xAxisName:null,yAxisName:null,explodeAll:null,explode:!1,explodeIndex:null,enableSmartLabels:null,tooltip:{visible:!1,isReversed:!1,format:null,template:null,fill:null,border:{width:1,color:null},enableAnimation:!0,duration:"500ms",opacity:.95},fill:null,opacity:1,lineCap:"butt",lineJoin:"round",dashArray:"",border:{width:1,color:"transparent",dashArray:""},width:2,marker:{shape:"circle",imageUrl:"",size:{width:6,height:6},visible:!1,opacity:1,fill:null,border:{color:"white",width:3},dataLabel:{visible:!1,isReversed:!1,angle:0,showEdgeLabels:!1,enableContrastColor:!1,textMappingName:"",verticalTextAlignment:"center",horizontalTextAlignment:"center",textPosition:"top",textAnchor:"middle",shape:"none",opacity:1,fill:null,border:{color:"white",width:.1},maximumLabelWidth:null,enableWrap:!1,connectorLine:{width:.5,type:"line",color:null},offset:{x:0,y:0},font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",color:null,size:"11px",opacity:1},margin:{left:5,top:5,bottom:5,right:5}}},bubbleOptions:{radiusMode:"minmax",minRadius:1,maxRadius:3},trendlines:[{visibility:"",visibleOnLegend:"visible",type:"linear",name:"Trendline",fill:"",width:1,opacity:1,dashArray:"",forwardForecast:0,backwardForecast:0,polynomialOrder:2,period:2,intercept:null,tooltip:{visible:!1,format:null,fill:null,border:{width:1,color:null},duration:"500ms",enableAnimation:!0,opacity:.95,font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",color:null,size:"12px",opacity:1}}}],font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",color:"#707070",opacity:1},_isdesigntime:!0}],commonSeriesOptions:{dragSettings:{enable:!1,type:"xy"},type:"column",enableTrackTooltip:!0,splitMode:"value",splitValue:null,splineType:"natural",cardinalSplineTension:.5,gapWidth:50,pieOfPieCoefficient:.6,visibleOnLegend:"visible",enableAnimation:!1,animationDuration:null,animationType:"linear",isClosed:!0,isTransposed:!1,isStacking:!1,columnWidth:.7,columnSpacing:0,columnFacet:"rectangle",drawType:"line",doughnutCoefficient:.4,explodeOffset:25,pyramidMode:"linear",boxPlotMode:"exclusive",funnelWidth:"11.6%",funnelHeight:"32.7%",positiveFill:null,showMedian:!0,outlierSettings:{shape:"circle",size:{width:6,height:6}},cornerRadius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},connectorLine:{width:1,opacity:1,dashArray:null},errorBar:{visibility:"hidden",mode:"vertical",type:"fixedValue",horizontalErrorValue:1,verticalErrorValue:3,horizontalPositiveErrorValue:1,horizontalNegativeErrorValue:1,verticalPositiveErrorValue:5,verticalNegativeErrorValue:5,direction:"both",cap:{visible:!0,width:1,length:20},width:1,opacity:1},highlightSettings:{enable:!1,mode:"series",color:"",opacity:.6,border:{color:"",width:2},pattern:"none",customPattern:""},selectionSettings:{type:"Single",enable:!1,mode:"series",rangeType:"xy",color:"",opacity:.6,border:{color:"",width:2},pattern:"none",customPattern:""},emptyPointSettings:{visible:!0,style:{color:"",border:{color:"",width:1}},displayMode:"gap"},labelPosition:"inside",gapRatio:0,pieCoefficient:.8,doughnutSize:.8,dataSource:null,xName:"",yName:"",pointColorMappingName:"",high:"",low:"",open:"",close:"",startAngle:null,endAngle:null,xAxisName:null,yAxisName:null,explodeAll:!1,explode:!1,explodeIndex:null,enableSmartLabels:null,tooltip:{visible:!1,isReversed:!1,format:null,template:null,fill:null,border:{color:null,width:1},enableAnimation:!0,duration:"500ms",opacity:.95},fill:null,opacity:1,lineCap:"butt",lineJoin:"round",dashArray:"",border:{color:"transparent",width:1,dashArray:""},width:2,marker:{shape:"circle",imageUrl:"",size:{width:6,height:6},visible:!1,opacity:1,fill:null,border:{color:"white",width:3},dataLabel:{visible:!1,isReversed:!1,angle:0,enableContrastColor:!1,showEdgeLabels:!1,textMappingName:"",verticalTextAlignment:"center",horizontalTextAlignment:"center",textPosition:"top",textAnchor:"middle",shape:"none",maximumLabelWidth:null,enableWrap:!1,opacity:1,fill:null,border:{color:"white",width:.1},offset:{x:0,y:0},connectorLine:{width:.5,type:"line",height:null},font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"11px",color:null,opacity:1},margin:{left:5,top:5,bottom:5,right:5}}},bubbleOptions:{radiusMode:"minmax",minRadius:1,maxRadius:3},trendlines:[{visibility:"",visibleOnLegend:"visible",type:"linear",name:"Trendline",fill:"",width:1,opacity:1,dashArray:"",forwardForecast:0,backwardForecast:0,polynomialOrder:2,period:2,intercept:null,tooltip:{visible:!1,format:null,fill:null,border:{width:1,color:null},duration:"500ms",enableAnimation:!0,opacity:.95,font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",color:null,size:"12px",opacity:1}}}],font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",color:"#707070",opacity:1}},crosshair:{line:{width:1},marker:{visible:!0,size:{width:10,height:10},opacity:1,border:{width:3}},visible:!1,isReversed:!1,type:"crosshair",trackballTooltipSettings:{fill:null,mode:"float",border:{width:null,color:null},rx:3,ry:3,opacity:1,tooltipTemplate:null}},pointStyle:{lineCap:"butt",lineJoin:"round",opacity:1,interior:null,borderColor:null,borderWidth:1},textStyle:{marker:{textAlignment:"center",textPosition:"top"},font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",color:"#707070",opacity:1}},symbolShape:{None:0,LeftArrow:1,RightArrow:2,Circle:3,Cross:4,HorizLine:5,VertLine:6,Diamond:7,Rectangle:8,Triangle:9,InvertedTriangle:10,Hexagon:11,Pentagon:12,Star:13,Ellipse:14,Wedge:15,Trapezoid:16,UpArrow:17,DownArrow:18,Image:19,SeriesType:20},initSeriesRender:!0,theme:"flatlight",canResize:!1,isResponsive:!1,enable3D:!1,enableRotation:!1,sideBySideSeriesPlacement:null,perspectiveAngle:90,rotation:0,tilt:0,wallSize:2,depth:100,enableCanvasRendering:!1,selectedDataPointIndexes:[],exportSettings:{type:"png",fileName:"Chart",orientation:"portrait",angle:0,mode:"client",action:"",multipleExport:!1},zooming:{enable:!1,isReversed:!1,enableScrollbar:!1,type:"x,y",enablePinching:!0,enableMouseWheel:!1,enableDeferredZoom:!1,toolbarItems:["zoomIn","zoomOut","zoom","pan","reset"]},type:"x,y",locale:null,xZoomFactor:1,yZoomFactor:1,xZoomPosition:0,yZoomPosition:0,load:"",axesLabelRendering:"",axesRangeCalculate:"",axesTitleRendering:"",dragStart:"",dragging:"",dragEnd:"",chartAreaBoundsCalculate:"",legendItemRendering:"",legendBoundsCalculate:"",preRender:"",seriesRendering:"",trendlineRendering:"",symbolRendering:"",titleRendering:"",subtitleRendering:"",axesLabelsInitialize:"",pointRegionClick:"",seriesRegionClick:"",annotationClick:"",axisLabelClick:"",chartClick:"",scrollStart:"",scrollEnd:"",scrollChanged:"",chartDoubleClick:"",pointRegionMouseMove:"",legendItemClick:"",axisLabelMouseMove:"",chartMouseMove:"",legendItemMouseMove:"",chartMouseLeave:"",displayTextRendering:"",toolTipInitialize:"",trackAxisToolTip:"",trackToolTip:"",animationComplete:"",zoomed:"",destroy:"",create:"",beforeResize:"",afterResize:"",rangeSelected:"",multiLevelLabelClick:"",multiLevelLabelRendering:"",margin:{left:10,right:10,top:10,bottom:10},size:{width:null,height:null},elementSpacing:10,dateStart:25568.791666666668},dataTypes:{commonSeriesOptions:{dataSource:"data"},axes:"array",series:"array",annotations:"array",indicators:"array",seriesColors:"array",palette:"array",rowDefinitions:"array",columnDefinitions:"array",seriesBorderColors:"array",pointColors:"array",pointBorderColors:"array",initSeriesRender:"boolean",theme:"enum",canResize:"boolean",isResponsive:"boolean",elementSpacing:"number",primaryXAxis:{labels:"array",multiLevelLabels:"array",stripLine:"array",orientation:"enum",rangePadding:"enum",labelPlacement:"enum",tickLinesPosition:"enum",labelPosition:"enum",opposedPosition:"boolean",zoomFactor:"number",zoomPosition:"number",showNextToAxisLine:"boolean"},primaryYAxis:{labels:"array",multiLevelLabels:"array",stripLine:"array",orientation:"enum",rangePadding:"enum",labelPlacement:"enum",opposedPosition:"boolean",zoomFactor:"number",zoomPosition:"number"},legend:{textOverflow:"enum",shape:"enum",alignment:"enum",position:"enum",itemPadding:"number"},exportSettings:{type:"string",fileName:"string",orientation:"enum",angle:"number",mode:"enum",action:"string",multipleExport:"boolean"},zooming:{enable:"boolean",type:"string",enableMouseWheel:"boolean",toolbarItems:"array",enableScrollbar:"boolean"},size:{width:"string",height:"string"}},observables:["xZoomFactor","yZoomFactor","xZoomPosition","yZoomPosition"],_tags:[{tag:"series",attr:["xAxisName","yAxisName","zOrder","endAngle","startAngle","explodeIndex","labelPosition","xName","yName","pointColorMappingName","pyramidMode","boxPlotMode","showMedian","pieCoefficient","explodeAll","explodeOffset","funnelWidth","columnFacet","funnelHeight","gapRatio","isClosed","isTransposed","enableTrackTooltip","isStacking","bearFillColor","bullFillColor","dataSource","enableAnimation","animationDuration","doughnutCoefficient","doughnutSize","enableSmartLabels","drawType","dashArray","visibleOnLegend","columnSpacing","columnWidth","drawType","positiveFill","explodeIndex","cornerRadius","lineCap","lineJoin","highlightSettings.enable","highlightSettings.mode","highlightSettings.pattern","highlightSettings.color","highlightSettings.opacity","highlightSettings.customPattern","highlightSettings.border.color","highlightSettings.border.width","selectionSettings.enable","selectionSettings.mode","selectionSettings.pattern","selectionSettings.color","selectionSettings.opacity","selectionSettings.customPattern","selectionSettings.type","selectionSettings.rangeType","selectionSettings.border.width","selectionSettings.border.color","dragSettings.enable","dragSettings.type","connectorLine.width","connectorLine.opacity","connectorLine.dashArray","cornerRadius.topLeft","cornerRadius.topRight","cornerRadius.bottomLeft","cornerRadius.bottomRight","errorBar.visibility","errorBar.mode","errorBar.type","errorBar.horizontalErrorValue","errorBar.verticalErrorValue","errorBar.horizontalPositiveErrorValue","errorBar.horizontalNegativeErrorValue","errorBar.verticalPositiveErrorValue","errorBar.verticalNegativeErrorValue","errorBar.direction","errorBar.cap.visible","errorBar.cap.width","errorBar.cap.length","errorBar.width","errorBar.opacity","emptyPointSettings.visible","emptyPointSettings.style.color","emptyPointSettings.style.border.color","emptyPointSettings.style.border.width","emptyPointSettings.displayMode","bubbleOptions.minRadius","bubbleOptions.maxRadius","bubbleOptions.radiusMode","tooltip.visible","tooltip.format","tooltip.template","tooltip.fill","tooltip.border.width","tooltip.border.color","tooltip.enableAnimation","tooltip.duration","tooltip.opacity","tooltip.font.size","tooltip.font.opacity","tooltip.font.fontFamily","tooltip.font.fontStyle","tooltip.font.fontWeight","tooltip.font.color","border.width","border.color","border.dashArray","marker.shape","marker.imageUrl","marker.size.width","marker.size.height","marker.visible","marker.opacity","marker.fill","marker.border.color","marker.border.width","marker.dataLabel.visible","marker.dataLabel.angle","marker.dataLabel.template","marker.dataLabel.textMappingName","marker.dataLabel.verticalTextAlignment","marker.dataLabel.horizontalTextAlignment","marker.dataLabel.textPosition","marker.dataLabel.textAnchor","marker.dataLabel.shape","marker.dataLabel.opacity","marker.dataLabel.fill","marker.dataLabel.border.color","marker.dataLabel.border.width","marker.dataLabel.maximumLabelWidth","marker.dataLabel.enableWrap","marker.dataLabel.connectorLine.width","marker.dataLabel.connectorLine.type","marker.dataLabel.connectorLine.color","marker.dataLabel.offset","marker.dataLabel.offset.x","marker.dataLabel.offset.y","marker.dataLabel.font.size","marker.dataLabel.font.color","marker.dataLabel.enableContrastColor","marker.dataLabel.showEdgeLabels","marker.dataLabel.font.opacity","marker.dataLabel.font.fontFamily","marker.dataLabel.font.fontStyle","marker.dataLabel.font.fontWeight","marker.dataLabel.margin","marker.dataLabel.margin.left","marker.dataLabel.margin.top","marker.dataLabel.margin.bottom","marker.dataLabel.margin.right","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","font.color","splineType","cardinalSplineTension",[{tag:"trendlines",attr:["visibility","visibilityOnLegend","dashArray","forewardForecast","backwardForecast","polynomialOrder","tooltip.visible","tooltip.format","tooltip.fill","tooltip.border.width","tooltip.border.color","tooltip.enableAnimation","tooltip.duration","tooltip.opacity","tooltip.font.size","tooltip.font.opacity","tooltip.font.fontFamily","tooltip.font.fontStyle","tooltip.font.fontWeight","tooltip.font.color"],singular:"trendline"}],[{tag:"points",attr:["x","y","text","textMappingName","isEmpty","fill","visible"],singular:"points"}]],singular:"series"},{tag:"axes",attr:["columnIndex","rowIndex","desiredIntervals","multiLevelLabelsColor","multiLevelLabelsFontColor","isIndexed","labelPlacement","edgeLabelPlacement","intervalType","labelFormat","labelPosition","labelRotation","logBase","labelIntersectAction","opposedPosition","plotOffset","rangePadding","roundingPlaces","valueType","zoomFactor","zoomPosition","orientation","crossesAt","crossesInAxis","scrollbarSettings.visible","scrollbarSettings.canResize","scrollbarSettings.range.min","scrollbarSettings.range.max","scrollbarSettings.pointsLength","range.min","range.max","range.interval","tickLinesPosition","alternateGridBand.odd.fill","alternateGridBand.odd.opacity","alternateGridBand.even.fill","alternateGridBand.even.opacity","enableAutoIntervalOnZooming","majorGridLines.width","majorGridLines.color","majorGridLines.dashArray","majorGridLines.visible","majorGridLines.opacity","majorTickLines.color","majorTickLines.width","majorTickLines.size","majorTickLines.visible","minorGridLines.width","minorGridLines.dashArray","minorGridLines.color","minorGridLines.visible","minorTickLines.color","minorTickLines.width","minorTickLines.size","minorTickLines.visible","labelBorder.color","labelBorder.width","minorTicksPerInterval","columnSpan","crosshairLabel.visible","crosshairLabel.rx","crosshairLabel.ry","crosshairLabel.border.color","crosshairLabel.border.width","crosshairLabel.fill","crosshairLabel.font.fontFamily","crosshairLabel.font.fontStyle","crosshairLabel.font.size","crosshairLabel.font.fontWeight","crosshairLabel.font.opacity","crosshairLabel.font.color","font.size","font.color","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","isInversed","enableTrim","maximumLabelWidth","axisLine.visible","axisLine.width","axisLine.color","axisLine.dashArray","axisLine.offset","maximumLabels","title.text","title.visible","title.enableTrim","title.offset","title.alignment","title.position","title.maximumTitleWidth","title.font.size","title.font.color","title.font.opacity","title.font.fontFamily","title.font.fontStyle","title.font.fontWeight","additionalPadding","showNextToAxisLine",[{tag:"stripLine",attr:["borderColor","startFromAxis","zIndex","textAlignment","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","font.color"],singular:"stripLine"}],[{tag:"multiLevelLabels",attr:["textOverflow","maximumTextWidth","textAlignment","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","border.type","border.width"],singular:"multiLevelLabel"}]],singular:"axis"},{tag:"primaryXAxis.stripLine",attr:["borderColor","startFromAxis","zIndex","textAlignment","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","font.color"],singular:"primaryXAxis.stripLine"},{tag:"primaryYAxis.stripLine",attr:["borderColor","startFromAxis","zIndex","textAlignment","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","font.color"],singular:"primaryYAxis.stripLine"},{tag:"primaryXAxis.multiLevelLabels",attr:["textOverflow","maximumTextWidth","textAlignment","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","border.type","border.width"],singular:"primaryXAxis.multiLevelLabel"},{tag:"primaryYAxis.multiLevelLabels",attr:["textOverflow","maximumTextWidth","textAlignment","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","border.type","border.width"],singular:"primaryYAxis.multiLevelLabel"},{tag:"indicators",attr:["seriesName","xName","xAxisName","macdType","shortPeriod","longPeriod","enableAnimation","animationDuration","yAxisName","standardDeviations","kPeriod","dPeriod","periodLine.fill","periodLine.width","lowerLine.fill","lowerLine.width","upperLine.fill","upperLine.width","macdLine.fill","macdLine.width","histogram.fill","histogram.opacity","histogram.border.color","histogram.border.width","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","font.color","tooltip.visible","tooltip.format","tooltip.fill","tooltip.border.width","tooltip.border.color","tooltip.enableAnimation","tooltip.duration","tooltip.opacity",[{tag:"points",attr:[]}]],singular:"indicator"},{tag:"annotations",attr:["coordinateUnit","verticalAlignment","horizontalAlignment","xAxisName","yAxisName","margin.left","margin.right","margin.top","margin.bottom"],singular:"annotation"},{tag:"rowDefinitions",attr:["rowHeight","lineColor","lineWidth","unit"],singular:"rowDefinition"},{tag:"columnDefinitions",attr:["columnWidth","lineColor","lineWidth","unit"],singular:"columnDefinition"}],_xZoomFactor:t.util.valueFunction("xZoomFactor"),_yZoomFactor:t.util.valueFunction("yZoomFactor"),_xZoomPosition:t.util.valueFunction("xZoomPosition"),_yZoomPosition:t.util.valueFunction("yZoomPosition"),_init:function(){this._renderSfChart()},_destroy:function(){e("#template_group_"+this._id).remove(),e("#annotation_group_"+this._id).remove(),e(this.element).removeClass("e-chart e-js").find("#"+this.svgObject.id).remove(),e(this.element).removeClass("e-chart e-js").find("#legend_"+this.svgObject.id).remove()},_series:function(e,t,i,s){this.redraw(),this._trigger("refresh")},_series_points:function(e,t,i,s){this.redraw(),this._trigger("refresh")},_primaryXAxis_stripLine:function(e,t,i,s){this.redraw(),this._trigger("refresh")},_primaryYAxis_stripLine:function(e,t,i,s){this.redraw(),this._trigger("refresh")},_axes:function(e,t,i,s){this.redraw(),this._trigger("refresh")},_axes_stripLine:function(e,t,i,s){this.redraw(),this._trigger("refresh")},_ignoreOnExport:["dataSource"],_removeZoomkit:function(){this.model.zooming.enable&&(e("[id^="+this._id+"_][id$=_ResetZoom]").remove(),e("[id^="+this._id+"_][id$=_PanBtn]").remove(),e("[id^="+this._id+"_][id$=_ZoomBtn]").remove(),e("[id^="+this._id+"_][id$=_ZoomInBtn]").remove(),e("[id^="+this._id+"_][id$=_ZoomOutBtn]").remove())},getCanvasElement:function(t){var i,s=(e("#"+t),document.createElement("canvas")),a=s.getContext("2d"),r=e("#"+t+"_canvas").width(),n=e("#"+t+"_canvas").height();return s.setAttribute("width",r),s.setAttribute("height",n),i=e("#"+t+"_canvas")[0],a.drawImage(i,0,0,r,n),{canvasContainer:s,canvasArea:a,width:r,height:n}},getSVGElement:function(t){var i=e("#"+t+"_svg").width(),s=e("#"+t+"_svg").height(),a=document.getElementById(t+"_svg"),r=e("<div>").append(e(a).clone()).html(),n=document.getElementById("legend_"+t+"_svg"),o=e("#legend_"+t).position();e("#"+t+"_svg_Legend").attr("transform","translate("+o.left+","+o.top+")");return{chartSVG:r,legendChartSVG:e("<div>").append(e(n).clone()).html(),width:i,height:s}},print:function(){for(var t,i,s,a,r,n,o,l,d,h=[],c=[],u=this.model.series.length,p="",m=0,g=0;g<arguments.length;g++)if(n=e("#"+arguments[g]),i=arguments[g],n.hasClass("e-datavisualization-chart")){r=n.ejChart("instance"),t="<html> <div style='position:relative; left:0px; top:"+m+"px'>",d="",s=r.svgObject.id,m=e("#"+s).height()+50,e("#axisScrollbar_"+i)[0]&&(d=e("#axisScrollbar_"+i)[0].innerHTML);for(var f,_=["ResetZoom","PanBtn","ZoomBtn","ZoomOutBtn","ZoomInBtn"],v=[],b=0;b<5;b++)f="#"+s+"_"+_[b],e(f)[0]&&(v.push(e(f)),e(f).remove());if(1==r.model.enableCanvasRendering){a=this.getCanvasElement(i),r.model.LegendBounds,p=document.createElement("img"),p.setAttribute("src",e("#legend_"+i+"_canvas")[0].toDataURL()),e("#legend_Scroller"+i).prepend(p),t+=document.getElementById("chartContainer_"+i).outerHTML,e(p).remove(),p="";for(var x,y=0;y<u;y++)if(x=r.model.series[y].selectionSettings.mode.toLowerCase(),"none"!=r.model.AreaType)if("series"==x)e(n).find("#"+i+"_Selection_series"+y+"_canvas").length>0&&(o=e("#"+i+"_Selection_series"+y+"_canvas")[0],a.canvasArea.drawImage(o,0,0,a.width,a.height)),e(n).find("#"+i+"_Selection_Legend"+y+"_canvas").length>0&&(l=e("#"+i+"_Selection_Legend"+y+"_canvas")[0],p="<img style='position:absolute;left:0px;' src='"+l.toDataURL()+"'/>");else if("point"==x){for(var w=r.model.selectedDataPointIndexes,b=0;b<w.length;b++)w[b].seriesIndex==y&&e(n).find("#"+i+"_Selection_series"+y+"_point_"+w[b].pointIndex+"_canvas").length>0&&(o=e("#"+i+"_Selection_series"+y+"_point_"+w[b].pointIndex+"_canvas")[0],a.canvasArea.drawImage(o,0,0,a.width,a.height));e(n).find("#"+i+"_Selection_Legend"+y+"_canvas").length>0&&(l=e("#"+i+"_Selection_Legend"+y+"_canvas")[0],p="<img style='position:absolute;left:0px;' src='"+l.toDataURL()+"'/>")}else{for(var w=r.model.selectedDataPointIndexes,b=0;b<w.length;b++)w[b].seriesIndex==y&&e(n).find("#"+i+"_Selection_Cluster_point_"+w[b].pointIndex+"_canvas").length>0&&(o=e("#"+i+"_Selection_Cluster_point_"+w[b].pointIndex+"_canvas")[0],a.canvasArea.drawImage(o,0,0,a.width,a.height));e(n).find("#"+i+"_SelectionCluster_Legend"+y+"_canvas").length>0&&(l=e("#"+i+"_SelectionCluster_Legend"+y+"_canvas")[0],p="<img style='position:absolute;left:0px;' src='"+l.toDataURL()+"'/>")}else for(var w=r.model.selectedDataPointIndexes,b=0;b<w.length;b++)w[b].seriesIndex==y&&e("#"+i+"_Selection_series"+y+"_point_"+w[b].pointIndex+"_canvas").length>0&&(o=document.getElementById(i+"_Selection_series"+y+"_point_"+w[b].pointIndex+"_canvas"),a.canvasArea.drawImage(o,0,0,a.width,a.height),e("#"+i+"_Selection_Legend"+w[b].pointIndex+"_canvas").length>0&&(l=document.getElementById(i+"_Selection_Legend"+w[b].pointIndex+"_canvas"),p="<img style='position:absolute;left:0px;' src='"+l.toDataURL()+"'/>"));a.canvasArea.save(),h.push(a.canvasContainer)}else{var C=this.getSVGElement(i);if(e("#"+i+"_svg_Legend").removeAttr("transform"),t+=e("#chartContainer_"+i)[0].outerHTML,t=this._getSelectionContentInSVG(r,i,t,"print"),null!=r.model.backGroundImageUrl){var S=new Image;S.src=r.model.backGroundImageUrl;var T=document.createElement("canvas"),R=T.getContext("2d");T.setAttribute("width",C.width),T.setAttribute("height",C.height),R.drawImage(S,0,0,C.width,C.height),t+="<img src='"+T.toDataURL()+"'/>"}t+='<svg xmlns="http://www.w3.org/2000/svg" style="left:0px; top:0px; position:absolute;" width="'+C.width+'" height="'+C.height+'" >',t+=C.chartSVG.toString()+" </svg>",t+=d+"</div></html>",c.push(t)}for(var b=0;b<v.length;b++)e("#chartContainer_"+i).append(v[b])}else t="<html>",t+=document.getElementById(arguments[g]).innerHTML,t+="</html>",c.push(t);for(var k=window.open(),O=0;O<c.length;O++)k.document.write(c[O]);if(h.length>0){for(var S=new Image,D=0;D<h.length;D++)t+="<img src='"+h[D].toDataURL()+"'/>",S.src=h[D].toDataURL();t+=p,t+=d+"</div></html>",S.onload=function(){k.document.write(t),t="",k.document.close(),k.focus(),k.print(),k.close()}}else c.length>0&&(t="",k.document.close(),k.focus(),k.print(),k.close())},redraw:function(i,s,a,r){if(this.model.enableCanvasRendering)if(this.model.zooming.enable&&this.svgRenderer.ctx)this.svgRenderer.ctx.clearRect(0,0,e("#"+this._id).width(),e("#"+this._id).height()),e(this.axisScroll).empty();else{e(this.svgObject).remove();var n=this.svgWidth;e("#canvas_trackSymbol").remove(),e("#"+this._id+"_canvas_Tracker").remove(),e("#secondCanvas").remove(),this.svgRenderer=new t.EjCanvasRender(this.element),this.svgRenderer.svgObj.height=t.util.isNullOrUndefined(this.model.size.height)?"450":this.model.size.height,this.svgRenderer.svgObj.width=t.util.isNullOrUndefined(this.model.size.width)?n:this.model.size.width,this.svgObject=this.svgRenderer.svgObj;this.svgRenderer.svgObj.getContext("2d");e(this.scrollerContainer).remove(),e(this.legendSvgContainer).remove(),e(this.legendContainer).remove(),this.legendContainer=e("<div></div>").attr("id","legend_"+this._id).css("height","0px"),this.scrollerContainer=e("<div></div>").attr("id","legend_Scroller"+this._id).css("height","0px"),this.legendSvgContainer=this.svgRenderer.createLegendCanvas(this.element),this.svgRenderer.append(this.legendSvgContainer,this.scrollerContainer),e(this.scrollerContainer).appendTo(this.legendContainer),e(this.legendContainer).appendTo(this.chartContainer)}else if(-1!=this.svgObject.id.indexOf("_canvas"))this._removeZoomkit(),e(this.svgObject).remove(),this.svgRenderer=new t.EjSvgRender(this.element),this.svgObject=this.svgRenderer.svgObj,this.canvasX=this.canvasY=0,e(this.scrollerContainer).remove(),e(this.legendSvgContainer).remove(),e(this.legendContainer).remove(),this.legendContainer=e("<div></div>").attr("id","legend_"+this._id).css("height","0px"),this.scrollerContainer=e("<div></div>").attr("id","legend_Scroller"+this._id).css("height","0px"),this.legendSvgContainer=this.svgRenderer.createLegendSvg(this.element),this.svgRenderer.append(this.legendSvgContainer,this.scrollerContainer),e(this.scrollerContainer).appendTo(this.legendContainer),e(this.legendContainer).appendTo(this.chartContainer);else if(!this.dragPoint||!s&&(!this.panning||!a||this.scrollbarUpdate||r||this.panning&&"chrome"!=this.model.browserInfo.name)||this.model.enable3D)e(this.svgObject).empty(),e(this.legendSvgContainer).empty(),e(this.axisScroll).empty();else{var o=this.svgObject;for(this.chartUpdating=!0,!this.continuePinching&&a&&(a.id="",a.setAttribute("opacity",0),o.appendChild(a),this.continuePinching=!1);o.childNodes.length>1;)o.removeChild(o.firstChild);e(this.legendSvgContainer).empty()}
this.model._chartAreaZoom&&(this.zoomed=this.model._chartAreaZoom=this.model._axes.some(function(e){return e.zoomFactor<1||e.zoomPosition>0})),this._removeZoomkit(),e("#annotation_group_"+this._id).remove(),i||(this.model.canResize||this.model.isResponsive?this.bindResizeEvents():this.removeResizeEvents()),this.bindTo(i)},export:function(e,i,s){var a,r=this.model.exportSettings,e=t.util.isNullOrUndefined(e)?r.type:e.toLowerCase(),i=t.util.isNullOrUndefined(i)?r.action:i.toLowerCase();return"xlsx"==e?this._getExportModel(e,i,s):a="svg"!=e&&this.model.enableCanvasRendering?this.imageExport():this.svgExport(),a},_getExportModel:function(i,s,a){var r,n=e.extend(!0,{},this.model),o=this.model.exportSettings,a=t.util.isNullOrUndefined(i)?o.multipleExport:a,l=(this.svgHeight,this.svgWidth,n.size.height),d=n.size.width,h={action:s,method:"post"},c=t.buildTag("form","",null,h),u=this;if(n.event=null,n.primaryXAxis.range=n.primaryXAxis.actualRange,n.primaryYAxis.range=n.primaryYAxis.actualRange,delete n.chartRegions,this._ignoreOnExport){r=n.series;for(var p=0;p<r.length;p++)delete r[p].dataSource,delete r[p].query,r[p].fill="array"==jQuery.type(r[p].fill)?r[p].fill[0].color:r[p].fill}for(var p=0;p<r.length;p++){if(!r[p].dataPoint){r[p].dataPoint=r[p].points;for(var m=0;m<r[p].dataPoint.length;m++)!r[p].dataPoint[m].fill&&n.pointColors.length>m&&(r[p].dataPoint[m].fill=n.pointColors[m])}r[p].trendLine||(r[p].trendLine=r[p].trendlines)}if(t.raiseWebFormsServerEvents)this.raiseWebServerEvents(JSON.stringify(n),"excelExporting"),this.raiseWebServerEvents(JSON.stringify(n));else{if(n.size.height&&-1!=n.size.height.indexOf("%")&&(n.size.height=e(this.svgObject).height().toString()),n.size.width&&-1!=n.size.width.indexOf("%")&&(n.size.width=e(this.svgObject).width().toString()),a){var g={};e("body").find(".e-datavisualization-chart").each(function(i,s){var a=e(s).data("ejChart");if(!t.isNullOrUndefined(a)){a.model.event=null;var n=JSON.parse(JSON.stringify(a.model));if(u._ignoreOnExport){r=n.series;for(var o=0;o<r.length;o++)delete r[o].dataSource,delete r[o].query,r[o].fill="array"==jQuery.type(r[o].fill)?r[o].fill[0].color:r[o].fill;g[i]=JSON.stringify(n);var l={name:"ChartModel",type:"hidden",value:JSON.stringify(n)},d=t.buildTag("input","",null,l);c.append(d)}}})}else{r=n.series;for(var p=0;p<r.length;p++)delete r[p]._visiblePoints,delete r[p].points;var f={name:"ChartModel",type:"hidden",value:JSON.stringify(n)},_=t.buildTag("input","",null,f);c.append(_),c.append(this)}e("body").append(c),c.submit(),n.size={width:d,height:l}}return n},imageExport:function(){var i=e.extend(!0,{},this.model);i.primaryXAxis.range=i.primaryXAxis.actualRange,i.primaryYAxis.range=i.primaryYAxis.actualRange,i.event=null;var s,a,r,n,o,l,d,h=this._id,c=e("[id*="+h+"_Selection_]"),u=e("#legend_"+h+"_canvas")[0],p=this.model.exportSettings,m=p.angle,g=this.model.LegendBounds,f=this.getCanvasElement(h);for(s=f.canvasContainer,a=f.canvasArea,r=f.width,n=f.height,o=e("#"+h+"_canvas")[0],s.setAttribute("id","Export_"+h),0==m?(g=this.model.LegendBounds,g.X&&0!=g.Width&&0!=g.Height&&a.drawImage(u,g.X,g.Y)):90==m||-90==m?(s.setAttribute("width",n),s.setAttribute("height",r),a.save(),a.translate(n/2,r/2),a.rotate(m*Math.PI/180),a.drawImage(o,-r/2,-n/2),a.restore(),g.X&&(a.save(),90==m?a.translate(n-g.Y-g.Height/2,r-g.X-g.Width/2):a.translate(g.Y+g.Height/2,g.X+g.Width/2),a.rotate(m*Math.PI/180),a.drawImage(u,-g.Width/2,-g.Height/2),a.restore())):(s.setAttribute("width",r),s.setAttribute("height",n),a.save(),a.translate(r,n),a.rotate(180*Math.PI/180),a.drawImage(o,0,0),a.restore(),g.X&&(a.save(),a.translate(g.X+g.Width/2,n-g.Y-g.Height/2),a.rotate(m*Math.PI/180),a.drawImage(u,-g.Width/2,-g.Height/2),a.restore())),l=0;l<c.length;l++)document.getElementById(c[l].id).getBoundingClientRect(),0==m?a.drawImage(c[l],0,0):90==m||-90==m?(a.save(),a.translate(n/2,r/2),a.rotate(m*Math.PI/180),a.drawImage(c[l],-r/2,-n/2),a.restore(),90==m&&c[l].id.indexOf(h+"_Selection_Legend")>=0?(a.save(),a.translate(n-g.Y-g.Height/2,r-g.X-g.Width/2),a.rotate(m*Math.PI/180),a.drawImage(c[l],-g.Width/2,-g.Height/2),a.restore()):-90==m&&c[l].id.indexOf(h+"_Selection_Legend")>=0&&(a.save(),a.translate(g.X+g.Width/2,n-g.Y-g.Height/2),a.rotate(m*Math.PI/180),a.drawImage(c[l],-g.Width/2,-g.Height/2),a.restore())):180==m&&(a.save(),a.translate(r,n),a.rotate(180*Math.PI/180),a.drawImage(c[l],0,0),a.restore(),180==m&&c[l].id.indexOf(h+"_Selection_Legend")>=0&&(a.save(),a.translate(g.X+g.Width/2,n-g.Y-g.Height/2),a.rotate(m*Math.PI/180),a.drawImage(c[l],-g.Width/2,-g.Height/2),a.restore()));if(d="jpg"==p.type?s.toDataURL("image/jpeg"):s.toDataURL(),"client"==p.mode)return s;if(t.raiseWebFormsServerEvents)this.raiseWebServerEvents(d);else if("server"==p.mode){var _,v,b,x,y,w;_={action:p.action,method:"post"},v=t.buildTag("form","",null,_),b={name:"ChartModel",type:"hidden",value:JSON.stringify(i)},x=t.buildTag("input","",null,b),y={name:"Data",type:"hidden",value:d},w=t.buildTag("input","",null,y),v.append(x).append(w).append(this),e("body").append(v),v.submit()}},svgExport:function(){for(var i=this.svgObject.id,s=e.extend(!0,{},this.model),a=0;a<this.model._axes.length;a++)s._axes[a].range=s._axes[a].actual_Range;s.event=null;var r,n=this._id,o=this.getSVGElement(n),l=this.model.exportSettings,d=l.angle,h=o.height,c=o.chartSVG,u=o.legendChartSVG,p=o.width,m='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">';if(m=0==d?m+c.toString()+u.toString()+"</svg>":90==d?m+'<g transform="translate('+h+',0) rotate(90 0 0)">'+c.toString()+u.toString()+"</g></svg>":-90==d?m+'<g transform="translate(0,'+p+') rotate(-90 0 0)">'+c.toString()+u.toString()+"</g></svg>":m+'<g transform="translate('+p+","+h+') rotate(180 0 0)">'+c.toString()+u.toString()+"</g></svg>",r=this._getSelectionContentInSVG(this,n,m,"export"),m=e("#"+n).find('[class*="Selection"]').length>0?r:m,m=encodeURIComponent(m),e("#"+i+"_Legend").removeAttr("transform"),"client"==l.mode)return m;if(t.raiseWebFormsServerEvents)this.raiseWebServerEvents(m);else if("server"==l.mode){var g,f,_,v,b,x;g={action:l.action,method:"post"},f=t.buildTag("form","",null,g),x={name:"ChartModel",type:"hidden",value:JSON.stringify(s)},b=t.buildTag("input","",null,x),_={name:"Data",type:"hidden",value:m},v=t.buildTag("input","",null,_),f.append(v).append(b).append(this),e("body").append(f),f.submit()}},_getSelectionContentInSVG:function(i,s,a,r){var n,o,l,d,h,c,u=this.model.series.length;if(i.model.enable3D){c="";for(var p=0;p<u;p++)e("#Selectionseries"+p+"Segmentseries"+p).length>0&&(c+=e("#Selectionseries"+p+"Segmentseries"+p)[0].outerHTML);a+=c}else{for(var m,p=0;p<u;p++)if(m=i.model.series[p].selectionSettings.mode.toLowerCase(),"none"!=i.model.AreaType)"cluster"!=m?e("#"+s+"SelectionSegmentseries"+p).length>0&&(o=document.getElementById(s+"SelectionSegmentseries"+p),l=e("<div>").append(e(o).clone()).html(),d=document.getElementById(s+"SelectionLegendSegmentseries"+p),h=e("<div>").append(e(d).clone()).html(),"export"===r?(n=a.slice(0,a.length-6),n+="<svg>"+l.toString()+h.toString()+"</svg></svg>"):a+=l.toString()+h.toString()):e("#"+s+"SelectionSegmentClusterSeries"+p).length>0&&(o=document.getElementById(s+"SelectionSegmentClusterSeries"+p),l=e("<div>").append(e(o).clone()).html(),d=document.getElementById(s+"SelectionLegendSegmentClusterSeries"+p),h=e("<div>").append(e(d).clone()).html(),"export"===r?(n=t.util.isNullOrUndefined(n)?a.slice(0,a.length-6):n,n+="<svg >"+l.toString()+h.toString()+"</svg>"):a+=l.toString()+h.toString());else for(var g=i.model.selectedDataPointIndexes,f=0;f<g.length;f++)g[f].seriesIndex==p&&e("#"+s+"SelectionSegmentseries"+p+"Point"+g[f].pointIndex).length>0&&(o=document.getElementById(s+"SelectionSegmentseries"+p+"Point"+g[f].pointIndex),l=e("<div>").append(e(o).clone()).html(),d=document.getElementById(s+"SelectionLegendSegmentseries"+p+"Point"+g[f].pointIndex),h=e("<div>").append(e(d).clone()).html(),"export"===r?(n=a.slice(0,a.length-6),n+="<svg>"+l.toString()+h.toString()+"</svg></svg>"):a+=l.toString()+h.toString());"cluster"==m&&"export"===r&&(n+="</svg>")}return"export"===r?n:a},raiseWebServerEvents:function(i,s){var a,r,n=e.extend(!0,{},this.model),o=this.model.exportSettings,s=t.util.isNullOrUndefined(s)?"exporting":s;this.model.size._width=e(this.svgObject).width(),this.model.size._height=e(this.svgObject).height(),a={model:n,originalEventType:s},r={Data:i,Format:o.type,Orientation:o.orientation,FileName:o.fileName},t.raiseWebFormsServerEvents(s,a,r)},animate:function(e){if(e)if(e.constructor===Array)for(var t=0;t<e.length;t++)e[t]._animatedSeries=!1,e[t]._animatedTrendline=!1,e[t].AnimationComplete=!1;else e._animatedSeries=!1,e._animatedTrendline=!1,e.AnimationComplete=!1;else{for(var i=this.model.series,t=0;t<i.length;t++)i[t]._animatedSeries=!1,i[t]._animatedTrendline=!1,i[t].AnimationComplete=!1;for(var s=this.model.indicators,a=0;a<s.length;a++)s[a]._animatedSeries=!1,s[a]._animatedTrendline=!1}this.redraw()},_setModel:function(i){var s,a;for(var r in i)switch(this.disableAnimation(),r){case"theme":this.model._themeChanged=!0,this.model.theme=i[r],this.setTheme(t.EjSvgRender.themes,this.model.theme),e.extend(!0,this.model.primaryXAxis,t.EjSvgRender.themes[this.model.theme].primaryXAxis),e.extend(!0,this.model.primaryYAxis,t.EjSvgRender.themes[this.model.theme].primaryYAxis);for(var n=0;n<this.model.axes.length;n++)this.model.axes[n].orientation&&"horizontal"==this.model.axes[n].orientation.toLowerCase()?e.extend(!0,this.model.axes[n],t.EjSvgRender.themes[this.model.theme].secondaryX):e.extend(!0,this.model.axes[n],t.EjSvgRender.themes[this.model.theme].secondaryY);for(var o=0;o<this.model.series.length;o++)e.extend(!0,this.model.series[o],t.EjSvgRender.themes[this.model.theme].commonSeriesOptions);break;case"commonSeriesOptions":for(var l=0;l<this.model.series.length;l++)i[r].dataSource&&(this.model.series[l].dataSource=null),e.extend(!0,this.model.series[l],{},i[r]);break;case"series":i[r].length<this.model.series.length&&(this.model.series=this.model.series.slice(0,i[r].length)),s=this.model.series;for(var l=0;l<s.length;l++)i[r][l].dataSource&&(s[l].dataSource=null);e.extend(!0,s,{},i[r]);for(var l=0,d=s.length;l<d;l++)s[l].enableAnimation&&(s[l]._animatedSeries=!1),i[r][l]&&i[r][l].dataSource instanceof t.DataManager&&(s[l].dataSource=i[r][l].dataSource),i[r][l]&&i[r][l].query instanceof t.Query&&(s[l].query=i[r][l].query);break;case"legend":e.extend(!0,this.model.legend,{},i[r]);break;case"axes":e.extend(!0,this.model.axes,{},i[r]);break;case"primaryXAxis":this.model.primaryXAxis.setRange=!!i[r].range,this.model.primaryXAxis.setAxisInterval=!(!i[r].range||!i[r].range.interval)||this.model.primaryXAxis.setAxisInterval,this.model.primaryXAxis.actual_Range=this.model._axes[0].setRange?null:this.model._axes[0].actual_Range,e.extend(!0,this.model.primaryXAxis,{},i[r]);break;case"primaryYAxis":this.model.primaryYAxis.setRange=!!i[r].range,this.model.primaryYAxis.log_Range=i[r].range?i[r].range:this.model.primaryYAxis.log_Range,this.model.primaryYAxis.actual_Range=!this.model._axes||this.model._axes[1].setRange?null:this.model._axes[1].actual_Range,e.extend(!0,this.model.primaryYAxis,{},i[r]);break;case"xZoomFactor":this.model.primaryXAxis.zoomFactor=this._xZoomFactor(),a=this.model.axes;for(var l=0;l<a.length;l++)"horizontal"==a[l].orientation.toLowerCase()&&(a[l].zoomFactor=this._xZoomFactor());break;case"yZoomFactor":this.model.primaryYAxis.zoomFactor=this._yZoomFactor(),a=this.model.axes;for(var l=0;l<a.length;l++)"vertical"==a[l].orientation.toLowerCase()&&(a[l].zoomFactor=this._yZoomFactor());break;case"xZoomPosition":this.model.primaryXAxis.zoomPosition=this._xZoomPosition(),a=this.model.axes;for(var l=0;l<a.length;l++)"horizontal"==a[l].orientation.toLowerCase()&&(a[l].zoomPosition=this._xZoomPosition());break;case"yZoomPosition":this.model.primaryYAxis.zoomPosition=this._yZoomPosition(),a=this.model.axes;for(var l=0;l<a.length;l++)"vertical"==a[l].orientation.toLowerCase()&&(a[l].zoomPosition=this._yZoomPosition());break;case"drilldown":this.model.series=[],this.model.explodeValue=null,e.extend(!0,this.model,{},i[r]);break;case"datasource":for(var l=0;l<this.model.series.length;l++)this.model.series[l].dataSource=null,this.model.series[l].points=null;e.extend(!0,this.model,{},i[r]);break;case"chartArea":e.extend(!0,this.model.chartArea,{},i[r]);break;default:e.extend(!0,this.model,{},i[r]),s=this.model.series;for(var l=0,d=s.length;l<d;l++)s[l].enableAnimation&&(s[l]._animatedSeries=!1)}this.model.canResize||this.model.isResponsive?this.bindResizeEvents():this.removeResizeEvents(),e("#annotation_group_"+this._id).remove(),this.model.enableCanvasRendering?(e(this.svgObject).remove(),e("#canvas_trackSymbol").remove(),e("#"+this._id+"_canvas_Tracker").remove(),e("#secondCanvas").remove(),this.svgRenderer=new t.EjCanvasRender(this.element),this.svgRenderer.svgObj.height=t.util.isNullOrUndefined(this.model.size.height)?"450":this.model.size.height,this.svgRenderer.svgObj.width=t.util.isNullOrUndefined(this.model.size.width)?e("#"+this._id).width():this.model.size.width,this.svgObject=this.svgRenderer.svgObj,e(this.legendSvgContainer).remove(),this.legendSvgContainer=this.svgRenderer.createLegendCanvas(this.element),this.svgRenderer.append(this.legendSvgContainer,this.legendContainer)):-1!=this.svgObject.id.indexOf("_canvas")?(this._removeZoomkit(),e(this.svgObject).remove(),this.svgRenderer=new t.EjSvgRender(this.element),this.svgObject=this.svgRenderer.svgObj,this.canvasX=this.canvasY=0,e(this.legendSvgContainer).remove(),this.legendSvgContainer=this.svgRenderer.createLegendSvg(this.element),this.svgRenderer.append(this.legendSvgContainer,this.legendContainer)):this.chartUpdating||(e(this.svgObject).empty(),e(this.legendSvgContainer).empty()),this.bindTo()}}),t.datavisualization.Chart.Locale=t.datavisualization.Chart.Locale||{},t.datavisualization.Chart.Locale.default=t.datavisualization.Chart.Locale["en-US"]={zoomIn:"Zoom In",zoomOut:"Zoom Out",zoom:"Zoom",pan:"Pan",reset:"Reset"},t.datavisualization.Chart.CrosshairType={Crosshair:"crosshair",TrackBall:"trackBall"},t.datavisualization.Chart.TrackballDisplayMode={Float:"float",Grouping:"grouping"},t.datavisualization.Chart.VisibleOnLegend={Visible:"visible",Hidden:"hidden"},t.datavisualization.Chart.ExportingType={PNG:"png",JPG:"jpg",PDF:"pdf",SVG:"svg",DOCX:"docx",XLSX:"xlsx"},t.datavisualization.Chart.ExportingMode={Client:"client",Server:"server"},t.datavisualization.Chart.ExportingOrientation={Portrait:"portrait",Landscape:"landscape"},t.datavisualization.Chart.ValueType={Double:"double",DateTime:"datetime",Category:"category",Logarithmic:"logarithmic",DateTimeCategory:"datetimecategory"},t.datavisualization.Chart.TextOverflow={None:"none",Wrap:"wrap",Trim:"trim",WrapAndTrim:"wrapandtrim"},t.datavisualization.Chart.Type={Line:"line",Spline:"spline",Column:"column",Doughnut:"doughnut",Area:"area",SplineArea:"splinearea",StepLine:"stepline",StepArea:"steparea",Pie:"pie",PieOfPie:"pieofpie",Hilo:"hilo",HiloOpenClose:"hiloopenclose",Candle:"candle",Bubble:"bubble",Scatter:"scatter",Bar:"bar",StackingArea:"stackingarea",StackingArea100:"stackingarea100",RangeColumn:"rangecolumn",StackingColumn:"stackingcolumn",StackingColumn100:"stackingcolumn100",StackingBar:"stackingbar",StackingBar100:"stackingbar100",Pyramid:"pyramid",Funnel:"funnel",Polar:"polar",Radar:"radar",RangeArea:"rangearea",SplineRangeArea:"splinerangearea",Waterfall:"waterfall",BoxAndWhishker:"boxandwhisker",StackingSplineArea:"stackingsplinearea",StackingSplineArea100:"stackingsplinearea100"},t.datavisualization.Chart.SplitMode={Position:"position",Value:"value",Percentage:"percentage",Indexes:"indexes"},t.datavisualization.Chart.SplineType={Natural:"natural",Monotonic:"monotonic",Cardinal:"cardinal",Clamped:"clamped"},t.datavisualization.Chart.DragType={XY:"xy",X:"x",Y:"y"},t.datavisualization.Chart.LabelPlacement={BetweenTicks:"betweenTicks",OnTicks:"onTicks"},t.datavisualization.Chart.TrendlinesType={Linear:"linear",Exponential:"exponential",Logarithmic:"logarithmic",Power:"power",Polynomial:"polynomial"},t.datavisualization.Chart.ErrorBarType={FixedValue:"fixedValue",Percentage:"percentage",StandardDeviation:"standardDeviation",StandardError:"standardError",Custom:"custom"},t.datavisualization.Chart.ErrorBarMode={Both:"both",Vertical:"vertical",Horizontal:"horizontal"},t.datavisualization.Chart.ErrorBarDirection={Both:"both",Plus:"plus",Minus:"minus"},t.datavisualization.Chart.LabelIntersectAction={None:"none",Rotate90:"rotate90",Rotate45:"rotate45",Wrap:"wrap",WrapByword:"wrapByWord",Trim:"trim",Hide:"hide",MultipleRows:"multipleRows"},t.datavisualization.Chart.EdgeLabelPlacement={None:"none",Shift:"shift",Hide:"hide"},t.datavisualization.Chart.roundedCorner={Both:"both",Start:"start",End:"end"},t.datavisualization.Chart.Theme={Azure:"azure",FlatLight:"flatlight",Azuredark:"azuredark",Lime:"lime",LimeDark:"limedark",Saffron:"saffron",SaffronDark:"saffrondark",GradientLight:"gradientlight",GradientDark:"gradientdark",HighContrast01:"highcontrast01",HighContrast02:"highcontrast02",Material:"material",Office365:"office365",Bootstrap:"bootstrap"},t.datavisualization.Chart.FontStyle={Normal:"normal",Italic:"italic"},t.datavisualization.Chart.FontWeight={Regular:"regular",Bold:"bold",Lighter:"lighter"},t.datavisualization.Chart.IntervalType={Auto:"auto",Days:"days",Hours:"hours",Seconds:"seconds",Milliseconds:"milliseconds",Minutes:"minutes",Months:"months",Years:"years"},t.datavisualization.Chart.RangePadding={Additional:"additional",Normal:"normal",None:"none",Round:"round",Auto:"auto"},t.datavisualization.Chart.TextAlignment={MiddleTop:"middletop",MiddleCenter:"middlecenter",MiddleBottom:"middlebottom"},t.datavisualization.Chart.LabelPosition={Inside:"inside",Outside:"outside"},t.datavisualization.Chart.ZIndex={Over:"over",Behind:"behind"},t.datavisualization.Chart.Unit={percentage:"percentage",pixel:"pixel"},t.datavisualization.Chart.PyramidMode={Linear:"linear",Surface:"Surface"},t.datavisualization.Chart.DrawType={Line:"line",Column:"column",Area:"area",RangeColumn:"rangecolumn",Scatter:"scatter",Spline:"spline"},t.datavisualization.Chart.AnimationType={Linear:"linear",Smooth:"smooth"},t.datavisualization.Chart.columnFacet={Rectangle:"rectangle",Cylinder:"cylinder"},t.datavisualization.Chart.EmptyPointMode={Gap:"gap",Zero:"zero",Average:"average"},t.datavisualization.Chart.Pattern={None:"none",Chessboard:"chessboard",Crosshatch:"crosshatch",Dots:"dots",Pacman:"pacman",DiagonalBackward:"diagonalBackward",DiagonalForward:"diagonalForward",Grid:"grid",Turquoise:"turquoise",Star:"star",Triangle:"triangle",Circle:"circle",Tile:"tile",HorizontalDash:"horizontalDash",VerticalDash:"verticalDash",Rectangle:"rectangle",Box:"box",VerticalStripe:"verticalStripe",HorizontalStripe:"horizontalStripe",Bubble:"bubble",Custom:"custom"},t.datavisualization.Chart.Mode={Series:"series",Point:"point",Cluster:"cluster",Range:"range"},t.datavisualization.Chart.SelectionType={Single:"single",Multiple:"multiple"},t.datavisualization.Chart.Shape={None:"none",LeftArrow:"leftarrow",RightArrow:"rightarrow",Circle:"circle",Cross:"cross",HorizLine:"horizline",VertLine:"vertLine",Diamond:"diamond",Rectangle:"rectangle",Triangle:"triangle",InvertedTriangle:"invertedtriangle",Hexagon:"hexagon",Pentagon:"pentagon",Star:"star",Ellipse:"ellipse",Wedge:"wedge",Trapezoid:"trapezoid",UpArrow:"uparrow",DownArrow:"downarrow",Image:"image"},t.datavisualization.Chart.DrawMode={Both:"both",Open:"open",Close:"close"},t.datavisualization.Chart.LineCap={Butt:"butt",Round:"round",Square:"square"},t.datavisualization.Chart.LineJoin={Round:"round",Bevel:"bevel",Miter:"miter"},t.datavisualization.Chart.Position={Top:"top",Middle:"middle",Bottom:"bottom"},t.datavisualization.Chart.Alignment={Center:"center",Near:"near",Far:"far"},t.datavisualization.Chart.RotateOn={Start:"start",Middle:"middle",End:"end"},t.datavisualization.Chart.TextAnchor={Start:"start",Middle:"middle",End:"end"},t.datavisualization.Chart.TickLinesPosition={Inside:"inside",Outside:"outside"},t.datavisualization.Chart.CoordinateUnit={None:"none",Pixels:"pixels",Points:"points"},t.datavisualization.Chart.HorizontalAlignment={Left:"left",Right:"right",Middle:"middle"},t.datavisualization.Chart.VerticalAlignment={Top:"top",Bottom:"bottom",Middle:"middle"},t.datavisualization.Chart.Region={Chart:"chart",Series:"series"},t.datavisualization.Chart.ConnectorLineType={Line:"line",Bezier:"bezier"},t.datavisualization.Chart.HorizontalTextAlignment={Near:"near",Far:"far",Center:"center"},t.datavisualization.Chart.VerticalTextAlignment={Near:"near",Far:"far",Center:"center"},t.datavisualization.Chart.multiLevelLabelsBorderType={None:"none",Rectangle:"rectangle",WithoutTopAndBottom:"withouttopandbottom",Brace:"brace",CurlyBrace:"curlybrace"},t.datavisualization.Chart.MACDType={Line:"line",Histogram:"histogram",Both:"both"},t.datavisualization.Chart.IndicatorsType={RSI:"rsi",Momentum:"momentum",Bollingerband:"bollingerband",Accumulationdistribution:"accumulationdistribution",EMA:"ema",SMA:"sma",Stochastic:"stochastic",ATR:"atr",MACD:"macd",TMA:"tma"},t.datavisualization.Chart.BoxPlotMode={Normal:"normal",Exclusive:"exclusive",Inclusive:"inclusive"},t.datavisualization.Chart.BubbleRadiusMode={MinMax:"minmax",Auto:"auto"},t.datavisualization.Chart.SizeType={Auto:"auto",Pixel:"pixel",Years:"years",Months:"months",Days:"days",Hours:"hours",Minutes:"minutes",Seconds:"seconds"},e.extend(t.datavisualization.Chart.prototype,t.ejChart)}(jQuery,Syncfusion),ej.EjCanvasRender=function(e){this.svgObj=document.createElement("canvas"),this._rootId=jQuery(e).attr("id"),this.svgObj.setAttribute("id",this._rootId+"_canvas"),this.ctx=this.svgObj.getContext("2d")},function(e){ej.EjCanvasRender.prototype={drawPath:function(e,t,i){var s=!!e.hasStackingInnerRadius&&e.hasStackingInnerRadius,a=e.d,r=a.split(" "),n=e["stroke-width"];if(e.lgndCtx){var o=this.lgndCtx;this.lgndCtx=void 0!=t?t:this.lgndCtx,this.lgndCtx.save(),this.lgndCtx.beginPath(),i&&this.lgndCtx.translate(i[0],i[1]),this.lgndCtx.globalAlpha=e.opacity?e.opacity:e["fill-opacity"],this.lgndCtx.lineWidth=e["stroke-width"],this.lgndCtx.strokeStyle=e.stroke;for(var l=0;l<r.length;l+=3){var d=parseFloat(r[l+1]),h=parseFloat(r[l+2]);switch(r[l]){case"M":this.lgndCtx.moveTo(d,h);break;case"L":this.lgndCtx.lineTo(d,h);break;case"C":this.lgndCtx.bezierCurveTo(d,h,parseFloat(r[l+3]),parseFloat(r[l+4]),parseFloat(r[l+5]),parseFloat(r[l+6])),l+=4;break;case"A":this.lgndCtx.arc(parseFloat(r[l-5]),parseFloat(r[l-4]),d,0,2*Math.PI,!1),l+=5;break;case"a":this.lgndCtx.beginPath();var c=parseFloat(r[l-2])+d,u=r[l-1];this.lgndCtx.arc(c,u,d,0,2*Math.PI,!1),l+=5;break;case"Z":this.lgndCtx.fillStyle=e.fill,this.lgndCtx.fill(),l-=2;break;case"Q":this.lgndCtx.quadraticCurveTo(d,h,parseFloat(r[l+3]),parseFloat(r[l+4])),l+=2}}"none"!=e.fill&&void 0!=e.fill&&(this.lgndCtx.fillStyle=e.fill,this.lgndCtx.fill()),this.lgndCtx.stroke(),this.lgndCtx.restore(),this.lgndCtx=o}else{var p=this.ctx;this.ctx=void 0!=t?t:this.ctx,this.ctx.save(),this.ctx.beginPath(),i&&this.ctx.translate(i[0],i[1]),this.ctx.globalAlpha=e.opacity?e.opacity:e["fill-opacity"];var m=!0;this.ctx.lineWidth=n;var g=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(",");g&&this.ctx.setLineDash(g),this.ctx.strokeStyle=e.stroke;for(var l=0;l<r.length;l+=3){var d=parseFloat(r[l+1]),h=parseFloat(r[l+2]);switch(r[l]){case"M":e.innerR&&!s||e.cx||this.ctx.moveTo(d,h);break;case"L":e.innerR&&!s||this.ctx.lineTo(d,h);break;case"C":this.ctx.bezierCurveTo(d,h,parseFloat(r[l+3]),parseFloat(r[l+4]),parseFloat(r[l+5]),parseFloat(r[l+6])),l+=4;break;case"A":e.innerR?m&&(this.ctx.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),this.ctx.arc(e.x,e.y,e.innerR,e.end,e.start,!e.counterClockWise),m=!1):e.cx?this.ctx.arc(e.cx,e.cy,e.radius,0,2*Math.PI,e.counterClockWise):(this.ctx.moveTo(e.x,e.y),this.ctx.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),this.ctx.lineTo(e.x,e.y)),l+=5;break;case"Q":this.ctx.bezierCurveTo(d,h,parseFloat(r[l+1]),parseFloat(r[l+2]),parseFloat(r[l+3]),parseFloat(r[l+4])),l+=2;break;case"z":this.ctx.closePath()}}"none"!=e.fill&&void 0!=e.fill&&(this.ctx.fillStyle=e.fill,this.ctx.fill()),n>0&&this.ctx.stroke(),this.ctx.restore(),this.ctx=p}},_setLinePathStyle:function(e,t){var i,s=e["stroke-width"];t&&this.ctx.translate(t[0],t[1]),this.ctx.globalAlpha=e.opacity?e.opacity:e["fill-opacity"],this.ctx.lineWidth=s,i=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(","),i&&this.ctx.setLineDash(i),this.ctx.strokeStyle=e.stroke,"none"!=e.fill&&void 0!=e.fill&&(this.ctx.fillStyle=e.fill,this.ctx.fill())},drawRect:function(e,t){var i=this.ctx,s=e.rx;this.ctx=t&&t.canvas?t:this.ctx,this.ctx.save(),this.ctx.beginPath(),this.ctx.globalAlpha=e.opacity,this.ctx.lineWidth=e["stroke-width"];var a=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(",");a&&this.ctx.setLineDash(a),this.ctx.strokeStyle=e.stroke,this.ctx.rect(e.x,e.y,e.width,e.height),null!=s&&s>=0?this.drawCornerRadius(e):("none"==e.fill&&(e.fill="transparent"),this.ctx.fillStyle=e.fill,this.ctx.fillRect(e.x,e.y,e.width,e.height),this.ctx.stroke()),e.id.indexOf("Series")>=0&&this.ctx.clip(),this.ctx.restore(),this.ctx=i},drawCylinder:function(e,t,i){var s=this.ctx;this.ctx=t&&t.canvas?t:this.ctx,this.ctx.save();var a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D=ej.datavisualization.Chart.prototype.colorNameToHex(e.fill),I={svgRenderer:ej.EjSvgRender.prototype},j=Math.PI,L=2*j+.1,A=e.x,E=e.y,P=e.width,M=e.height,F=L;this.ctx.fillStyle=ej.Ej3DRender.prototype.polygon3D.prototype.applyZLight(D,I),this.ctx.lineWidth=0,this.ctx.strokeStyle=ej.Ej3DRender.prototype.polygon3D.prototype.applyZLight(D,I),this.ctx.globalAlpha=e.opacity,1==i.isColumn?(C=A,T=P+A,R=S=0,o=P/2,l=o/4,h=d=A+o,f=c=E-l,m=A,p=A+P,u=g=E+M-l,w=0,y=j,k=-o,O=l,(i.stacking=!0)&&(i.isLastSeries||(f=c=E+l))):(C=T=0,S=M+E,R=E,l=M/2,o=l/4,m=d=A+o,p=h=A+P+o,g=E+M,f=E,u=c=E+l,w=j/2,y=1.5*j,(i.stacking=!0)&&(i.isLastSeries||(p=h=A+P-o)),l=-l,o=-o,k=o,O=-l);var N=ej.Ej3DRender.prototype.polygon3D.prototype.applyXLight(D,I),z=this.ctx.createLinearGradient(C,R,T,S);z.addColorStop(0,D),z.addColorStop(.3,N),z.addColorStop(.7,N),z.addColorStop(1,D);for(var V=1;V<=4;V++){var a=0;for(V<4&&this.ctx.beginPath(),V%2==0?(_=h,v=u,b=m,x=f):(_=d,v=c,b=p,x=g),4==V&&(o=k,l=O,this.ctx.fillStyle=z),V>2&&(a=w,F=y);a<=F;a+=.1)r=_-o*Math.cos(a),n=v+l*Math.sin(a),0===a?this.ctx.moveTo(r,n):this.ctx.lineTo(r,n);V>2&&this.ctx.lineTo(b,x),3!=V&&(this.ctx.stroke(),this.ctx.fill())}e.id.indexOf("Series")>=0&&this.ctx.clip(),this.ctx.restore(),this.ctx=s},drawCornerRadius:function(e){var t=e.rx,i=e.x,s=e.y,a=e.width,r=e.height;"none"==e.fill&&(e.fill="transparent"),this.ctx.fillStyle=e.fill,a<2*t&&(t=a/2),r<2*t&&(t=r/2),this.ctx.beginPath(),this.ctx.moveTo(i+a-t,s),this.ctx.arcTo(i+a,s,i+a,s+r,t),this.ctx.arcTo(i+a,s+r,i,s+r,t),this.ctx.arcTo(i,s+r,i,s,t),this.ctx.arcTo(i,s,i+a,s,t),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()},createGradientElement:function(e,t){var i,s=this.ctx;if("[object Array]"==Object.prototype.toString.call(t)){for(var a=s.createLinearGradient(0,0,0,this.svgObj.height),r=0;r<=t.length-1;r++){var n=t[r].color,o=t[r].colorStop.slice(0,-1);o=parseInt(o)/100,a.addColorStop(o,n)}i=a}else i=t;return i},drawLine:function(e){this.ctx.save(),this.ctx.beginPath(),this.ctx.lineWidth=e["stroke-width"],this.ctx.strokeStyle=e.stroke,this.ctx.moveTo(e.x1,e.y1),this.ctx.lineTo(e.x2,e.y2),this.ctx.stroke(),this.ctx.restore()},drawText:function(t,i,s){ej.util.isNullOrUndefined(t["font-weight"])||"regular"!=t["font-weight"].toLowerCase()||(t["font-weight"]="normal");var a=t["font-style"].toLowerCase()+" "+t["font-weight"]+" "+t["font-size"]+" "+t["font-family"],r=t["text-anchor"],n=void 0!==t.opacity?t.opacity:1;if("middle"==r&&(r="center"),t.lgndCtx)this.lgndCtx.save(),this.lgndCtx.fillStyle=t.fill,this.lgndCtx.font=a,this.lgndCtx.textAlign=r,this.lgndCtx.globalAlpha=n,"middle"==t["dominant-baseline"]&&(this.lgndCtx.textBaseline="center"),t.labelRotation?(this.lgndCtx.translate(t.x,t.y),this.lgndCtx.rotate(t.labelRotation*Math.PI/180),this.lgndCtx.fillText(i,0,0)):this.lgndCtx.fillText(i,t.x,t.y),this.lgndCtx.restore();else{if(this.ctx.save(),this.ctx.fillStyle=t.fill,this.ctx.font=a,this.ctx.textAlign=r,this.ctx.globalAlpha=n,t.baseline&&(this.ctx.textBaseline=t.baseline),t.labelRotation){var o=0,l=t.labelRotation;if(!l||-1==t.id.indexOf("XLabel")&&-1==t.id.indexOf("YLabel"))this.ctx.translate(t.x,t.y),this.ctx.rotate(t.labelRotation*Math.PI/180),this.ctx.fillText(i,0,0);else{var d="rotate("+t.labelRotation.toString()+"deg)";e(t).attr("rotateAngle",d);var h=s||i,c=ej.EjSvgRender.utils._measureText(h,null,a).height,u=this.createText(t,h);e(document.body).append(u);var p=u.getBoundingClientRect();e(u).remove(),o=p.height,l<0&&(l=360+l);var m=t.transform.split(",");r=void 0!=r?r:"center";var g=parseFloat(m[1]),f=parseFloat(m[2]),_=o/2;if("outside"==t.labelPosition?"start"==r?this.ctx.translate(g,f+_-(l<0&&l>-180||l>180?o/2:(o-c)/2)):"end"==r?this.ctx.translate(g,f+_-(l<0&&l>-180||l>180?o/2:-(o-c)/2)):this.ctx.translate(g,f+_):"start"==r?this.ctx.translate(g,f-_-(l<0&&l>-180||l>180?o/2:(o-c)/2)):"end"==r?this.ctx.translate(g,f-_-(l<0&&l>-180||l>180?o/2:-(o-c)/2)):this.ctx.translate(g,f-_),this.ctx.textAlign=r,this.ctx.rotate(l*(Math.PI/180)),"object"==typeof i)for(var v=i.length,b=0;b<v;b++){var x=ej.EjSvgRender.utils._measureText(i[b],null,a).height;this.ctx.fillText(i[b],0,b*x)}else this.ctx.fillText(i,0,0)}}else if("object"==typeof i||t.isTrackball)if(t.isTrackball&&"string"==typeof i)this.ctx.fillText(i,t.x,t.y);else for(var v=i.length,b=0;b<v;b++){var y=ej.util.isNullOrUndefined(t.padding)?0:t.padding,x=ej.EjSvgRender.utils._measureText(i[b],null,a).height,w=t.isTrackball?Number(parseInt(t["font-size"])):x;this.ctx.fillText(i[b],t.x,t.y+(w+y)*b)}else this.ctx.fillText(i,t.x,t.y);this.ctx.restore()}},drawZoomRect:function(t,i){var s,a,r,n,o={left:0,top:0},l=e("<div id="+t.id+"></div>"),d=i.model.m_AreaBounds;t.x<d.X||t.x+o.left+t.width>o.left+e(this.svgObj).width()-20?(s=this.prevWidth,r=this.prevX):(s=this.prevWidth=t.width,r=this.prevX=t.x+o.left),t.y<d.Y||t.y+o.top+t.height>o.top+d.Y+d.Height?(a=this.prevHeight,n=this.prevY):(a=this.prevHeight=t.height,n=this.prevY=t.y+o.top),e(l).css({width:s,height:a,top:n,left:r,"background-color":t.fill,"border-style":"solid",position:"absolute","border-color":t.stroke,"border-width":t["stroke-width"]}),document.getElementById("chartContainer_"+this._rootId).appendChild(l[0])},zoomButton:function(t,i,s){var a=s.svgObj?s.svgObj:s.svgObject,r=s._rootId?s._rootId:s._id;if("zoom"==i)var n="_Zoom";else n="zoomIn"==i?"_ZoomIn":"_ZoomOut";var o={left:0,top:0};if(e("#"+t.zoomId).length<=0){var l=e("<div id="+a.id+n+"Btn></div>");e(l).css({width:t.width,height:t.height,top:t.top+o.top,left:t.left+o.left,"background-color":t.fill,"border-style":"solid",position:"absolute","border-radius":"0.4em","border-color":t.fill,"box-sizing":"content-box","z-index":2e3});var d="http://www.w3.org/2000/svg",h=document.createElementNS(d,"svg");if(h.setAttribute("id",t.zoomId),h.setAttribute("width",25),h.setAttribute("height",25),
"zoom"==i)var c="M26.101,22.893l-6.605-6.174c1.414-2.781,0.897-6.267-1.496-8.504c-2.901-2.711-7.448-2.56-10.161,0.341    c-2.712,2.9-2.56,7.45,0.341,10.163c2.426,2.266,6,2.523,8.694,0.853l6.579,6.151L26.101,22.893z M10.186,16.571    c-1.715-1.604-1.805-4.293-0.203-6.009c1.605-1.715,4.295-1.805,6.009-0.201c1.715,1.603,1.805,4.293,0.202,6.007    C14.59,18.084,11.901,18.175,10.186,16.571",u="translate(-3,-3)";else"zoomIn"==i?(c="M9.0983096,4.2999878L9.0983096,9.3999634 3.9983783,9.3999634 3.9983783,12.699951 9.0983096,12.699951 9.0983096,17.799988 12.398249,17.799988 12.398249,12.699951 17.49818,12.699951 17.49818,9.5 12.398249,9.5 12.398249,4.2999878z M10.998276,0C14.298215,0 17.49818,1.3999634 19.69813,4.1999512 22.79809,8.0999756 22.79809,13.5 19.998144,17.399963L28.597992,28.299988 23.898081,32 15.398205,21.199951C10.898271,23.099976 5.5983606,21.899963 2.3983956,17.899963 -1.4015366,13.099976 -0.60156059,6.0999756 4.1983567,2.3999634 6.1983276,0.79998779 8.5983163,0 10.998276,0z",u="translate(4,4) scale(0.6)"):(c="M3.9983433,9.5L3.9983433,12.799988 17.598165,12.799988 17.598165,9.5z M10.998234,0C14.298169,0 17.498131,1.3999634 19.698108,4.1999512 22.798034,8.0999756 22.798034,13.5 19.998092,17.399963L28.597994,28.299988 23.898054,32 15.398188,21.199951C10.898259,23.099976 5.5983546,21.899963 2.398393,17.899963 -1.4015351,13.099976 -0.60155994,6.0999756 4.1983522,2.3999634 6.1983207,0.79998779 8.5983074,0 10.998234,0z",u="translate(4,4) scale(0.6)");var p={id:n+"Path",fill:t.iconColor,transform:u,d:c},m=document.createElementNS(d,"path");e(m).attr(p).appendTo(h),l[0].appendChild(h),document.getElementById("chartContainer_"+r).appendChild(l[0])}else{var l=document.getElementById(a.id+n+"Btn");e(l).css({top:t.top+o.top,left:t.left+o.left})}},panButton:function(t,i){var s=i.svgObj?i.svgObj:i.svgObject,a=i._rootId?i._rootId:i._id,r={left:0,top:0};if(e("#"+t.panId).length<=0){var n=e("<div id="+s.id+"_PanBtn></div>");e(n).css({width:t.width,height:t.height,top:t.top+r.top,left:t.left+r.left,"background-color":t.fill,"border-style":"solid",position:"absolute","border-radius":"0.4em","border-color":t.fill,"box-sizing":"content-box","z-index":2e3});var o="http://www.w3.org/2000/svg",l=document.createElementNS(o,"svg");l.setAttribute("id",t.panId),l.setAttribute("width",25),l.setAttribute("height",25);var d={id:"panPath",fill:t.iconColor,transform:"translate(-3,-3)"};d.points="26.105,16 21.053,12.211 21.053,14.737 17.263,14.737 17.263,10.947 19.834,10.947 16.044,5.895 12.255,10.947 14.737,10.947 14.737,14.737 10.947,14.737 10.947,12.211 5.895,16 10.947,19.789 10.947,17.263 14.737,17.263 14.737,21.053 12.255,21.053 16.044,26.105 19.834,21.053 17.263,21.053 17.263,17.263 21.053,17.263 21.053,19.789";var h=document.createElementNS(o,"polygon");e(h).attr(d).appendTo(l),n[0].appendChild(l),document.getElementById("chartContainer_"+a).appendChild(n[0])}else{var n=document.getElementById(s.id+"_PanBtn");e(n).css({top:t.top+r.top,left:t.left+r.left})}},resetZoom:function(t,i){var s=i.svgObj?i.svgObj:i.svgObject,a=i._rootId?i._rootId:i._id,r={left:0,top:0};if(e("#"+t.resetZoomId).length<=0){var n=e("<div id="+s.id+"_ResetZoom></div>");e(n).css({width:t.width,height:t.height,top:t.top+r.top,left:t.left+r.left,"background-color":t.fill,"border-style":"solid","border-radius":"0.4em",position:"absolute","border-color":t.fill,"box-sizing":"content-box","z-index":2e3});var o="http://www.w3.org/2000/svg",l=document.createElementNS(o,"svg");l.setAttribute("id",t.resetZoomId),l.setAttribute("width",25),l.setAttribute("height",25);var d={id:"p1",fill:t.iconColor,transform:"translate(-3,-3)"};d.points="11.895,18.398 8.061,22.23 5.796,19.967 5.796,26.283 12.112,26.283 9.848,24.018 13.682,20.186";var h=document.createElementNS(o,"polygon");e(h).attr(d).appendTo(l);var c={id:"p2",fill:t.iconColor,transform:"translate(-3,-3)"};c.points="19.691,6.072 21.955,8.337 18.121,12.172 19.908,13.959 23.742,10.123 26.007,12.389 26.007,6.072";var u=document.createElementNS(o,"polygon");e(u).attr(c).appendTo(l);var p={id:"p3",fill:t.iconColor,transform:"translate(-3,-3)"};p.points="11.895,13.958 13.682,12.172 9.848,8.337 12.112,6.072 5.796,6.072 5.796,12.389 8.061,10.123";var m=document.createElementNS(o,"polygon");e(m).attr(p).appendTo(l);var g={id:"p4",fill:t.iconColor,transform:"translate(-3,-3)"};g.points="19.908,18.396 18.121,20.186 21.955,24.018 19.691,26.283 26.007,26.283 26.007,19.967 23.741,22.23";var f=document.createElementNS(o,"polygon");e(f).attr(g).appendTo(l),n[0].appendChild(l),document.getElementById("chartContainer_"+a).appendChild(n[0])}else{var n=document.getElementById(s.id+"_ResetZoom");e(n).css({top:t.top+r.top,left:t.left+r.left})}},drawCrosshairLine:function(t,i){var s=e("<div id="+t.id+"></div>");e(s).css({width:t.width,height:t.height,left:t.left,top:t.top,"border-style":t.style,opacity:t.opacity,visibility:"visible","border-color":t.stroke,"border-width":t["stroke-width"],position:t.position}),e(i).append(s[0])},drawCrosshairlabel:function(t,i,s){var a=(e("#"+this._rootId).offset(),{left:0,top:0});if(e("#"+t.id).length>0){var r=document.getElementById(t.id);e(r).css({width:t.width-5,height:t.height-5,left:i.x+a.left-5,top:i.y+a.top-15,visibility:"visible",display:t.display}),document.getElementById(t.id).textContent=s}else{var r=e("<div id="+t.id+" style='position: absolute; z-index: 13000;'></div>");e(r).css({color:i.fill,"font-family":i["font-family"],"font-size":i["font-size"],"font-weight":i["font-weight"],"font-style":i["font-style"],"background-color":t.fill,"border-style":"solid","border-color":t.stroke,"border-width":t["stroke-width"],opacity:t["fill-opacity"],"text-align":"center"}),document.getElementById(this._rootId).appendChild(r[0])}},createCrosshairCanvas:function(){var t,i=document.getElementById(this._rootId+"_canvas"),s=(e("#"+this._rootId).offset(),{left:0,top:0});return e("#secondCanvas").length?t=document.getElementById("secondCanvas"):(t=document.createElement("canvas"),e(document).find("#"+this.svgObj.id+"_CrosshairGroup").append(t),e(t).attr({id:"secondCanvas",width:i.width,height:i.height,top:s.top,left:s.left}),e(t).css({width:i.width,height:i.height,top:s.top,left:s.left})),t},drawTrackToolTip:function(t,i,s,a){var r={left:this.svgObj.offsetLeft,top:this.svgObj.offsetTop};if(e("#"+t.id).length>0){var n=document.getElementById(t.id);if(e(n).css({left:t.x+r.left,top:t.y+r.top,visibility:"visible","border-box":"content-box","background-color":t.fill,color:i.fill,"border-color":t.stroke,"border-width":t["stroke-width"]}),"array"==jQuery.type(s)){for(var o="",l=0;l<s.length;l++)o=o+s[l]+"</br>";e("#"+t.id).html(o)}else e("#"+t.id).html(s)}else{var n=e("<div id="+t.id+" style='position: absolute; z-index: 13000;'></div>");e(n).css({color:i.fill,"font-family":i["font-family"],"font-size":i["font-size"],"font-weight":i["font-weight"],"font-style":i["font-style"],width:t.width,height:t.height-a-2*t["stroke-width"],"background-color":t.fill,"border-style":"solid","text-align":"center",padding:"0px","padding-top":a/2+"px","padding-bottom":a/2+"px","border-color":t.stroke,"border-width":t["stroke-width"],opacity:t["fill-opacity"]}),document.getElementById(this._rootId).appendChild(n[0])}},trackSymbol:function(t,i,s,a,r){var n,o=r.model.m_AreaBounds;e("#"+this._rootId).offset();if(i.startX>=o.X&&i.startX<=o.X+o.Width&&i.startY>=o.Y&&i.startY<=o.Y+o.Height){var l,d=t.SeriesIndex,h=t.PointIndex;if("bubble"==r.model.series[d].type.toLowerCase()){l=2*r.model.series[d]._visiblePoints[h].radius+5,t.Style.BorderColor=t.Style.Color}if("scatter"==r.model.series[d].type.toLowerCase()&&ej.util.isNullOrUndefined(a)){var c={cx:i.startX-2,cy:i.startY-2,r:t.ShapeSize.width/2,fill:t.Style.Color,opacity:t.Style.Opacity,stroke:t.Style.BorderColor};this.drawCircle(c,null)}else{if(e("#canvas_trackSymbol").length>0){var u=e("#canvas_trackSymbol");e(u).css({visibility:"visible",display:"block"})}else u=e("<div id=canvas_trackSymbol></div>");var p={left:i.startX,top:i.startY},m=e("<div id="+t.ID+"></div>"),g=p.left-(l||t.ShapeSize.width),f=p.top-(l||t.ShapeSize.height);e(m).css({left:g,top:f,"box-sizing":"content-box",position:"absolute",visibility:"visible",opacity:t.Style.Opacity,"z-index":200});var _=t.ShapeSize;t.symbol=m;var v={};switch(s.toLowerCase()){case"circle":e(m).css({width:l||t.ShapeSize.width+"px",height:l||t.ShapeSize.height+"px",left:l?g+l/2:g+t.ShapeSize.width/2-t.Style.BorderWidth+"px",top:l?f+l/2:f+t.ShapeSize.height/2-t.Style.BorderWidth+"px","border-style":"solid","background-color":t.Style.Color,"border-color":t.Style.BorderColor,"border-width":t.Style.BorderWidth,"border-radius":"100%"});break;case"rectangle":e(m).css({width:t.ShapeSize.width,height:t.ShapeSize.height,left:g+t.ShapeSize.width/2-t.Style.BorderWidth/2,top:f+t.Style.BorderWidth/2,"border-style":"solid","background-color":t.Style.Color,"border-color":t.Style.BorderColor,"border-width":t.Style.BorderWidth});break;case"diamond":var b="M "+(i.startX+-_.width/2)+" "+i.startY+" L "+i.startX+" "+(i.startY+-t.ShapeSize.height/2)+" L "+(i.startX+t.ShapeSize.width/2)+" "+i.startY+" L "+i.startX+" "+(i.startY+t.ShapeSize.height/2)+" L "+(i.startX+-t.ShapeSize.width/2)+" "+i.startY+"z";v.direction=b,this.drawSvgShape(t,v);break;case"triangle":var b="M "+(i.startX+-_.width/2)+" "+(i.startY+_.height/2)+" L "+i.startX+" "+(i.startY+-_.height/2)+" L "+(i.startX+_.width/2)+" "+(i.startY+_.height/2)+" L "+(i.startX+-_.width/2)+" "+(i.startY+_.height/2)+"z";v.direction=b,this.drawSvgShape(t,v);break;case"invertedtriangle":var b="M "+(i.startX+-_.width/2)+" "+(i.startY+_.height/2)+" L "+i.startX+" "+(i.startY+-_.height/2)+" L "+(i.startX+_.width/2)+" "+(i.startY+_.height/2)+" L "+(i.startX+-_.width/2)+" "+(i.startY+_.height/2)+"z",x=i.startX,y=i.startY,w="rotate(180,"+x+","+y+")";v.direction=b,v.rotate=w,this.drawSvgShape(t,v);break;case"cross":var b="M "+(i.startX+-_.width/2)+" "+i.startY+" L "+(i.startX+_.width/2)+" "+i.startY+" M "+i.startX+" "+(i.startY+_.height/2)+" L "+i.startX+" "+(i.startY+-_.height/2)+"z";v.direction=b,this.drawSvgShape(t,v);break;case"star":var b="M "+(i.startX+_.width/3)+" "+(i.startY+-_.height/2)+" L "+(i.startX+-_.width/2)+" "+(i.startY+_.height/6)+" L "+(i.startX+_.width/2)+" "+(i.startY+_.height/6)+" L "+(i.startX+-_.width/3)+" "+(i.startY+-_.height/2)+" L "+i.startX+" "+(i.startY+_.height/2)+" L "+(i.startX+_.width/3)+" "+(i.startY+-_.height/2)+"z";v.direction=b,this.drawSvgShape(t,v);break;case"hexagon":var b="M "+(i.startX+-_.width/2)+" "+i.startY+" L "+(i.startX+-_.width/4)+" "+(i.startY+-_.height/2)+" L "+(i.startX+_.width/4)+" "+(i.startY+-_.height/2)+" L "+(i.startX+_.width/2)+" "+i.startY+" L "+(i.startX+_.width/4)+" "+(i.startY+_.height/2)+" L "+(i.startX+-_.width/4)+" "+(i.startY+_.height/2)+" L "+(i.startX+-_.width/2)+" "+i.startY+"z";v.direction=b,this.drawSvgShape(t,v);break;case"wedge":var b="M "+(i.startX-_.width)+" "+i.startY+" L "+(i.startX+_.width)+" "+(i.startY+-_.height/2)+" L "+(i.startX+_.width/4*3)+" "+i.startY+" L "+(i.startX+_.width)+" "+(i.startY+_.height/2)+" L "+(i.startX-_.width)+" "+i.startY+"z";v.direction=b,this.drawSvgShape(t,v);break;case"trapezoid":var b="M "+(i.startX+-_.width/2)+" "+i.startY+" L "+(i.startX+-_.width/2)+" "+(i.startY+-_.height/4)+" L "+(i.startX+-_.width/2+_.width)+" "+(i.startY+-_.height/2)+" L "+(i.startX+-_.width/2+_.width)+" "+(i.startY+_.height/2)+" L "+(i.startX+-_.width/2)+" "+(i.startY+_.height/4)+" L "+(i.startX+-_.width/2)+" "+i.startY+"z";v.direction=b,this.drawSvgShape(t,v);break;case"uparrow":var b="M "+(i.startX-_.width/2+_.width/4)+" "+(i.startY-_.height/2+_.height)+" L "+(i.startX-_.width/2+_.width/4)+" "+(i.startY-_.height/2+_.height/2)+" L "+(i.startX-_.width/2)+" "+(i.startY-_.height/2+_.height/2)+" L "+i.startX+" "+(i.startY-_.height/2)+" L "+(i.startX+_.width/2)+" "+(i.startY-_.height/2+_.height/2)+" L "+(i.startX+_.width/2-_.width/4)+" "+(i.startY-_.height/2+_.height/2)+" L "+(i.startX+_.width/2-_.width/4)+" "+(i.startY-_.height/2+_.height)+" L "+(i.startX-_.width/2+_.width/4)+" "+(i.startY-_.height/2+_.height)+"z";v.direction=b,this.drawSvgShape(t,v);break;case"downarrow":var b="M "+(i.startX-_.width/2+_.width/4)+" "+(i.startY-_.height/2)+" L "+(i.startX+_.width/2-_.width/4)+" "+(i.startY-_.height/2)+" L "+(i.startX+_.width/2-_.width/4)+" "+(i.startY-_.height/2+_.height/2)+" L "+(i.startX+_.width/2)+" "+(i.startY-_.height/2+_.height/2)+" L "+i.startX+" "+(i.startY-_.height/2+_.height)+" L "+(i.startX-_.width/2)+" "+(i.startY-_.height/2+_.height/2)+" L "+(i.startX-_.width/2+_.width/4)+" "+(i.startY-_.height/2+_.height/2)+" L "+(i.startX-_.width/2+_.width/4)+" "+(i.startY-_.height/2)+"z";v.direction=b,this.drawSvgShape(t,v);break;case"leftarrow":var b="M "+(i.startX-_.width/2+_.width)+" "+(i.startY+_.height/4)+" L "+(i.startX-_.width/2+_.width)+" "+(i.startY+-_.height/4)+" L "+(i.startX-_.width/2+_.width/2)+" "+(i.startY+-_.height/4)+" L "+(i.startX-_.width/2+_.width/2)+" "+(i.startY+-_.height/2)+" L "+(i.startX-_.width/2)+" "+i.startY+" L "+(i.startX-_.width/2+_.width/2)+" "+(i.startY+_.height/2)+" L "+(i.startX-_.width/2+_.width/2)+" "+(i.startY+_.height/4)+" L "+(i.startX-_.width/2+_.width)+" "+(i.startY+_.height/4)+"z";v.direction=b,this.drawSvgShape(t,v);break;case"rightarrow":var b="M "+(i.startX-_.width/2)+" "+(i.startY+_.height/4)+" L "+(i.startX-_.width/2)+" "+(i.startY+-_.height/4)+" L "+(i.startX-_.width/2+_.width/2)+" "+(i.startY+-_.height/4)+" L "+(i.startX-_.width/2+_.width/2)+" "+(i.startY+-_.height/2)+" L "+(i.startX-_.width/2+_.width)+" "+i.startY+" L "+(i.startX-_.width/2+_.width/2)+" "+(i.startY+_.height/2)+" L "+(i.startX-_.width/2+_.width/2)+" "+(i.startY+_.height/4)+" L "+(i.startX-_.width/2)+" "+(i.startY+_.height/4)+"z";v.direction=b,this.drawSvgShape(t,v);break;case"pentagon":for(var l=Math.sqrt(_.height*_.height+_.width*_.width)/2,C=ej.EjSvgRender.utils._getStringBuilder(),S=0;S<=5;S++){var T=72*S,R=Math.PI/180*T,k=l*Math.cos(R),O=l*Math.sin(R);0==S?C.append("M "+(i.startX+k)+" "+(i.startY+O)+" "):C.append("L "+(i.startX+k)+" "+(i.startY+O)+" ")}C.append("z");var b=C.toString();v.direction=b,this.drawSvgShape(t,v);break;case"ellipse":e(m).css({width:t.ShapeSize.width,height:t.ShapeSize.height/2,"border-style":"solid",left:g+t.ShapeSize.height/2-t.Style.BorderWidth/2,top:i.startY+p.top-t.ShapeSize.height+4,"background-color":t.Style.Color,"border-color":t.Style.BorderColor,"border-width":t.Style.BorderWidth,"-moz-border-radius":"50%","-webkit-border-radius":"50%","border-radius":"50%","border-box":"content-box"});break;case"horizline":e(m).css({width:t.ShapeSize.width,height:0,"border-style":"solid",left:g+t.ShapeSize.width/2,top:i.startY+p.top-1,"border-color":t.Style.BorderColor,"border-width":"2px","border-box":"content-box"});break;case"vertline":e(m).css({width:0,height:t.ShapeSize.height,"border-style":"solid",left:i.startX+p.left-1,top:f+t.ShapeSize.height/2-2,"border-color":t.Style.BorderColor,"border-width":"2px","border-box":"content-box"});break;default:e(m).css({width:t.ShapeSize.width,height:t.ShapeSize.height,"border-style":"solid","background-color":t.Style.Color,"border-color":t.Style.BorderColor,"border-width":t.Style.BorderWidth,"border-radius":"50px"})}u[0].appendChild(m[0]),n=document.getElementById(this.svgObj.id+"_CrosshairGroup")||document.getElementById("chartContainer_"+this._rootId),n.appendChild(u[0])}}},drawSvgShape:function(t,i){var s=document.getElementById(this._rootId+"_canvas"),a={left:0,top:0},r="http://www.w3.org/2000/svg",n=document.createElementNS(r,"svg");n.setAttribute("id","mySVG"),n.setAttribute("width",e(s).width()),n.setAttribute("height",e(s).height()),e(t.symbol).css({left:a.left+"px",top:a.top+"px"});var o={id:"svgPath","fill-opacity":t.Style.Opacity,"stroke-width":t.Style.BorderWidth,fill:t.Style.Color,transform:i.rotate,stroke:t.Style.BorderColor};o.d=i.direction;var l=document.createElementNS(r,"path");e(l).attr(o).appendTo(n),t.symbol[0].appendChild(n)},drawCircle:function(e,t){if(e.lgndCtx){var i=this.lgndCtx;this.lgndCtx=void 0!=t?t:this.lgndCtx,this.lgndCtx.save(),this.lgndCtx.beginPath(),this.lgndCtx.arc(e.cx,e.cy,e.r,0,2*Math.PI),this.lgndCtx.fillStyle=e.fill,this.lgndCtx.globalAlpha=e.opacity,this.lgndCtx.fill(),this.lgndCtx.lineWidth=e["stroke-width"],this.lgndCtx.strokeStyle=e.stroke,this.lgndCtx.stroke(),this.lgndCtx.restore(),this.lgndCtx=i}else{var s,a=this.ctx;this.ctx=void 0!=t?t:this.ctx,this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.cx,e.cy,e.r,0,2*Math.PI),this.ctx.fillStyle=e.fill,this.ctx.globalAlpha=e.opacity,this.ctx.fill(),this.ctx.lineWidth=e["stroke-width"],s=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(","),s&&this.ctx.setLineDash(s),this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore(),this.ctx=a}},drawPolyline:function(e,t){this.ctx.save(),this.ctx.beginPath();for(var i=e.points.split(" "),s=0;s<i.length-1;s++){var a=i[s].split(","),r=a[0],n=a[1];0==s?this.ctx.moveTo(r,n):this.ctx.lineTo(r,n)}this.ctx.lineWidth=e["stroke-width"],this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore()},drawPolygon:function(e,t){},setFillAttribute:function(e,t){},setStrokeAttribute:function(e,t){},changePathValue:function(e){},drawArc:function(e,t,i){},changeVMLStyle:function(e,t){},applyVMLStyle:function(e,t){},drawEllipse:function(e,t){var i=this.ctx;this.ctx=void 0!=t?t:this.ctx;var s=Math.max(e.rx,e.ry),a=e.rx/s,r=e.ry/s;e.lgndCtx?(this.lgndCtx.save(),this.lgndCtx.beginPath(),this.lgndCtx.translate(e.rx,e.ry),this.lgndCtx.scale(a,r),this.lgndCtx.arc(e.cx-e.rx,2*e.cy-e.rx,e.rx,0,2*Math.PI,!1),this.lgndCtx.fillStyle=e.fill,this.lgndCtx.fill(),this.lgndCtx.restore(),this.lgndCtx.lineWidth=e["stroke-width"],this.lgndCtx.strokeStyle=e.stroke,this.lgndCtx.stroke(),this.lgndCtx.restore()):(this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(e.cx,e.cy),this.ctx.save(),this.ctx.scale(a,r),this.ctx.arc(0,0,s,0,2*Math.PI,!1),this.ctx.fillStyle=e.fill,this.ctx.fill(),this.ctx.restore(),this.ctx.lineWidth=e["stroke-width"],this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore(),this.ctx=i)},_getAttrVal:function(t,i,s){var a=e(t).attr(i);return null!=a?a:s},_setAttr:function(e,t){},setSpanAttr:function(e,t,i){},_textAttrReplace:function(e,t,i,s){},drawImage:function(e,t){this.ctx.save();var i=this,s=new Image;s.src=e.href,s.onload=function(){i.ctx.drawImage(s,e.x,e.y,e.width,e.height)},this.ctx.restore()},createDefs:function(){},createGroup:function(e){},createText:function(t,i){var s=document.createElement("div");return e(s).css({transform:t.rotateAngle,"font-family":parseFloat(t["font-family"]),"font-size":1.1*parseFloat(t["font-size"]),position:"absolute"}),ej.util.isNullOrUndefined(i)||(s.textContent=i),s},drawAxesBoundsClipPath:function(e,t,i){},getAttrVal:function(e,t,i){},hexFromRGB:function(e){},createDelegate:function(e,t){},drawClipPath:function(e,t){},drawCircularClipPath:function(e,t){},append:function(t,i){e(t).appendTo(i)},createLegendCanvas:function(e){return this.legendsvgObj=document.createElement("canvas"),this._rootId=jQuery(e).attr("id"),this.legendsvgObj.setAttribute("id","legend_"+this._rootId+"_canvas"),this.lgndCtx=this.legendsvgObj.getContext("2d"),this.legendsvgObj}}}(jQuery),ej.Ej3DAxisRenderer=function(){},ej.Ej3DSeriesRender=function(){},ej.Ej3DChart=function(){},ej.series3DTypes={},function(e){ej.Ej3DAxisRenderer.prototype={_drawAxes:function(e,t,i){t.majorGridLines.visible&&this._drawGridLines3D(t,i),t.visible&&t.majorTickLines.visible&&this._renderTicks3D(t,t.majorTickLines.size,t.majorTickLines.width,i),t.visible&&(this._drawAxisLabel(t,i),this._drawMultiLevelLabel(e,t,i),this._drawAxisTitle(t))},_drawAxisTitle:function(t){if(t.title.visible){var i=t.title.font;this.gAxisTitleEle=this.svgRenderer.createGroup({id:this.svgObject.id+"axisTitle_"+t.name});var s=t._opposed,a={Width:e(this.svgObject).width(),Height:e(this.svgObject).height()},r=ej.EjSvgRender.chartTransform3D.transform3D(a);r.mViewport=a,r.Rotation=0,r.Tilt=0,r.Depth=100,r.PerspectiveAngle=90,ej.EjSvgRender.chartTransform3D.transform(r);for(var n,o,l=ej.EjSvgRender.chartTransform3D.result,d=ej.Ej3DRender.prototype.matrix3D.prototype,h=t.orientation.toLowerCase(),c=!1,u=0;u<this.model._axes.length;u++)if(n=this.model._axes[u],n.orientation.toLowerCase()==h)for(var p=0;p<n.multiLevelLabels.length;p++)if(n.multiLevelLabels[p].visible){c=!0;break}if("horizontal"==h){var m=this.model.elementSpacing+t._LableMaxWidth.height,g=ej.EjSvgRender.utils._measureText(t.title.text,t.width,t.title.font).height/2,f=e.extend({},ej.EjSvgRender.commonChartEventArgs);f.data={Text:t.title.text,location:{x:t.width/2,y:m+g+t.majorTickLines.size+t.axisLine.width+this.model.wallSize+t._multiLevelLabelHeight},axes:t},this._trigger("axesTitleRendering",f),i=t.title.font;var _=f.data.location.x+t.x,v=s?t.y-f.data.location.y:f.data.location.y+t.y;if(o={Width:g.width,Height:g.height,Label:f.data,TextAnchor:"middle",tag:"text",font:i,id:this.svgObject.id+"axisTitle",child:this.chart3D},c){var b={id:this.svgObject.id+"axisTitle",x:_,y:v,fill:i.color,"font-size":i.size,"font-family":i.fontFamily,"font-style":i.fontStyle,"font-weight":i.fontWeight,opacity:i.opacity,"text-anchor":"middle"},x=ej.EjSvgRender.chartTransform3D.toScreen({x:_,y:v,z:0},r,l,d);b.x=x.x,b.y=x.y,this.svgRenderer.drawText(b,f.data.Text,this.gAxisTitleEle),this.svgRenderer.append(this.gAxisTitleEle,this.svgObject)}else this.graphics.addVisual(this.polygon.createTextElement(this.vector.vector3D(_,v,0),o,10,10))}else{var y=ej.EjSvgRender.utils._measureText(t.title.text,t.height,t.title.font),_=s?t.x+(4*this.model.elementSpacing+t._LableMaxWidth.width+t.majorTickLines.size+t.axisLine.width+this.model.wallSize+t._multiLevelLabelHeight):t.x-(3*this.model.elementSpacing+t._LableMaxWidth.width+t.majorTickLines.size+t.axisLine.width+this.model.wallSize+t._multiLevelLabelHeight),f=e.extend({},ej.EjSvgRender.commonChartEventArgs);f.data={Text:t.title.text,location:{x:y.width/2,y:0},axes:t},this._trigger("axesTitleRendering",f),i=t.title.font;var v=f.data.location.y+(t.y+t.height)+t.height/2*-1,w=s?25:-25;if(o={Width:y.width,Height:y.height,Angle:-90,Label:f.data,TextAnchor:"middle",tag:"text",font:i,id:this.svgObject.id+"_YAxisTitle",child:this.chart3D},c){var b={id:void 0,x:_,y:v,fill:i.color,"font-size":i.size,"font-family":i.fontFamily,"font-style":i.fontStyle,"font-weight":i.fontWeight,opacity:i.opacity,"text-anchor":"middle",transform:"rotate(-90,"+_+","+(s?v+10:v-10)+")"},x=ej.EjSvgRender.chartTransform3D.toScreen({x:_,y:v,z:0},r,l,d);b.x=x.x+w,b.y=x.y,this.svgRenderer.drawText(b,f.data.Text,this.gAxisTitleEle),this.svgRenderer.append(this.gAxisTitleEle,this.svgObject)}else this.graphics.addVisual(this.polygon.createTextElement(this.vector.vector3D(_,v,0),o,10,10))}}},_drawMultiLevelLabel:function(t,i,s){this.gMultiLevelEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_axisMultiLevelLabels_"+t});var a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,j,L,A,v,E,P,M,F,N=i.multiLevelLabels.length,z=this.model,V=z.elementSpacing,B=0,H=0,Y=z.m_AreaBounds,U=i.visibleRange,W=z.wallSize,X=i._opposed,G=s.axes[i.name]._validCross,$=i.orientation.toLowerCase(),o=G?i.y:Y.Y+(!X&&Y.Height),n=G?i.x:Y.X+(X&&Y.Width),q=[],Q={Width:e(this.svgObject).width(),Height:e(this.svgObject).height()},K=ej.EjSvgRender.chartTransform3D.transform3D(Q);K.mViewport=Q,K.Rotation=0,K.Tilt=0,K.Depth=100,K.PerspectiveAngle=z.perspectiveAngle,ej.EjSvgRender.chartTransform3D.transform(K);for(var Z=ej.EjSvgRender.chartTransform3D.result,J=ej.Ej3DRender.prototype.matrix3D.prototype,a=0;a<N;a++)if(d=i.multiLevelLabels[a],h=this.svgObject.id+"_"+i.name+"MultiLevelLabels_"+t+"_"+a,""!=d.text&&d.visible){b=d._level,x="middle",c=d.font,F=d.border.width,R=d.maximumTextWidth,v=d.textAlignment.toLowerCase(),T=S=d.text,f=d.textOverflow.toLowerCase(),j=ej.EjSvgRender.utils._measureText(d.text,Y.Width,d.font),u=(d.end-d.start)/2,p=(d.start+u-U.min)/U.delta,m=(d.start-U.min)/U.delta,g=(d.end-U.min)/U.delta,i.isInversed&&(p=isNaN(p)?0:1-p,m=isNaN(m)?0:1-m,g=isNaN(g)?0:1-g),"horizontal"==$?(B=Math.round(i.width*p)+Y.X+i.plotOffset,H=X?o-W-i.majorTickLines.size-V-5-i._LableMaxWidth.height:o+W+i.majorTickLines.size+V+i._LableMaxWidth.height,m=Math.round(i.width*m)+Y.X+i.plotOffset,g=Math.round(i.width*g)+Y.X+i.plotOffset,l=R||g-m-10):(H=Math.round(i.plotOffset+i.y+i.height*(1-p)),B=X?i.x+W+i.majorTickLines.size+i.axisLine.width+V/2+i._LableMaxWidth.width+i.prevHeight[b]+i.multiLevelLabelHeight[b]/2:n-W-i.majorTickLines.size-V/2-i._LableMaxWidth.width-i.prevHeight[b]-i.multiLevelLabelHeight[b]/2,m=Math.round(i.plotOffset+i.y+i.height*(1-m)),g=Math.round(i.plotOffset+i.y+i.height*(1-g)),l=R||i.multiLevelLabelHeight[b]+10),"horizontal"==$&&(H=X?H-i.prevHeight[b]:H+i.prevHeight[b]),"far"==v?(B=B+l/2-F/2,x="end"):"near"==v&&(x="start",B=B-l/2+F/2);var S,T,ee=ej.EjAxisRenderer.prototype._triggerMultiLevelLabelsRendering(T,B,H,f,c,d.border,this);if(S=T=ee.text,B=ee.location.x,H=ee.location.y,f=ee.textOverflow.toLowerCase(),c=ee.font,c.color=c.color?c.color:i.multiLevelLabelsFontColor,ee.border,_=ee.border.type.toLowerCase(),F=ee.border.width,E={id:h,x:B,y:H,fill:c.color,"font-size":c.size,"font-family":c.fontFamily,"font-style":c.fontStyle,"font-weight":c.fontWeight,opacity:c.opacity,"text-anchor":x},"none"!=f&&(S=ej.EjAxisRenderer.prototype.textOverflowMultiLevelLabels(i,l,S,T,f,c,j,{x:B,y:H},null,this)),"wrap"==f||"wrapandtrim"==f){var te=H;for(r=0;r<S.length;r++){j=ej.EjSvgRender.utils._measureText(S[r],null,c),0!=r&&(te=X?te-j.height:te+j.height),{Width:j.width,Height:j.height,Label:{Text:S[r]},TextAnchor:x,tag:"text",font:c,id:h+"_"+r,child:this.chart3D},E.id=E.id+"_"+r;var P=ej.EjSvgRender.chartTransform3D.toScreen({x:B,y:te+5,z:0},K,Z,J);E.x=P.x,E.y=P.y,this.svgRenderer.drawText(E,S[r],this.gMultiLevelEle)}}if(B="horizontal"==$?B:X?B+10:B-10,"wrap"!=f&&"wrapandtrim"!=f){({Width:j.width,Height:j.height,Label:{Text:S},TextAnchor:x,tag:"text",font:c,id:h,child:this.chart3D});var P=ej.EjSvgRender.chartTransform3D.toScreen({x:B,y:H+5,z:0},K,Z,J);E.x=P.x,E.y=P.y,this.svgRenderer.drawText(E,S,this.gMultiLevelEle)}if("horizontal"==$)var ie={bounds:{x:m,y:H-10,height:i.multiLevelLabelHeight[b],width:l},axisIndex:t,multiLevelLabel:d};else var ie={bounds:{x:B-k/2-5,y:g,height:m-g,width:k},axisIndex:t,multiLevelLabel:d};if(this.model.multiLevelLabelRegions.push(ie),"none"!=_&&F>0){h=this.svgObject.id+"_"+i.name+"MultiLevelLabelsBorder_"+t+"_"+a;var se=H-10+i.multiLevelLabelHeight[b]+5,ae=d.border.color?d.border.color:i.multiLevelLabelsColor;for("horizontal"==$?(y={x1:m,y1:H-10,x2:g,y2:H-10},w={x1:m,y1:se,x2:g,y2:se},C={x1:m,y1:H-10,x2:m,y2:se},I={x1:g,y1:H-10,x2:g,y2:se}):(k=i.multiLevelLabelHeight[b]-5,y={x1:B-k/2-5,y1:g,x2:B+k/2+5,y2:g},w={x1:B-k/2-5,y1:m,x2:B+k/2+5,y2:m},C={x1:B-k/2-5,y1:g,x2:B-k/2-5,y2:m},I={x1:B+k/2+5,y1:g,x2:B+k/2+5,y2:m}),M=0;M<4;M++){switch(M){case 0:O=h+"_top",D=y;break;case 1:O=h+"_bottom",D=w;break;case 2:O=h+"_left",D=C;break;case 3:O=h+"_right",D=I}q[0]=ej.Ej3DRender.prototype.vector3D.prototype.vector3D(D.x1,D.y1,0),q[1]=ej.Ej3DRender.prototype.vector3D.prototype.vector3D(D.x2,D.y2,0),L=ej.EjSvgRender.chartTransform3D.toScreen(q[0],K,Z,J),A=ej.EjSvgRender.chartTransform3D.toScreen(q[1],K,Z,J),E={id:O,x1:L.x,y1:L.y,x2:A.x,y2:A.y,stroke:ae,"stroke-width":F},this.svgRenderer.drawLine(E,this.gMultiLevelEle)}this.svgRenderer.append(this.gMultiLevelEle,this.svgObject)}}},_textTrim:function(e,t,i){var s,a,r=t.length;if(!(ej.EjSvgRender.utils._measureText(t,this.model.m_AreaBounds.Width,i).width>e))return t;for(var n=r-1;n>=0;--n)if(a=t.substring(0,n)+"...",s=ej.EjSvgRender.utils._measureText(a,this.model.m_AreaBounds.Width,i),s.width<=e)return a},_textWrap:function(e,t,i){for(var s=t.toString().split(" "),a="",r=[],n=s.length,o="",l=0;l<n;l++)o=s[l],ej.EjSvgRender.utils._measureText(a.concat(o),this.model.m_AreaBounds.Width,i).width<e?a=a.concat((""===a?"":" ")+o):""!==a?(r.push(this._textTrim(e,a,i)),a=o):(r.push(this._textTrim(e,o,i)),o=""),a&&l===n-1&&r.push(this._textTrim(e,a,i));return r},_textWrapByLength:function(e,t,i){var s=0,a=[],r="";t=t.toString();for(var n=t.length,o=0;o<=n;o++)r=0==s?t.slice(s,o):"-"+t.slice(s,o),ej.EjSvgRender.utils._measureText(r,this.model.m_AreaBounds.Width,i).width>e-5?(a.push(r),s=o++):o===n&&a.push(r);return a},_multipleRows:function(e,t,i,s){for(var a,r,n,o,l=[],d=e-1;d>=0;d--)a=s.visibleLabels[d],n=ej.EjSvgRender.utils._measureText(a.Text,this.model.m_AreaBounds.Width,s.font),r=ej.EjSvgRender.utils._valueToCoefficient(s,d)*s.width+s.x,o=t<r+n.width/2,o?(a.index=a.index?a.index:0,l.push(a.index),i.index=i.index>a.index?i.index:a.index+1):i.index=l.indexOf(a.index)>-1?i.index:a.index},_drawAxisLabel:function(e,t){for(var i,s=[],a=null,r=e.visibleLabels.length,n=this.model.m_AreaBounds,o=e._opposed,l=t.axes[e.name]._validCross,d=l?e.y:n.Y+(!o&&n.Height),h=l?e.x:n.X+(o&&n.Width),c=0;c<r;c++)if(!ej.util.isNullOrUndefined(e.visibleLabels[c].Text)){var u,p,m=0,g=0;e.visibleLabels[c].originalText=e.visibleLabels[c].Text;var f,_=ej.EjSvgRender.utils._measureText(e.visibleLabels[c].Text,this.model.m_AreaBounds.Width,e.font),v=(e.visibleLabels[c].Value-e.visibleRange.min)/e.visibleRange.delta;v=e.isInversed?1-v:v,v=isNaN(v)?0:v,"horizontal"==e.orientation.toLowerCase()?(m=Math.round(e.width*v)+this.model.m_AreaBounds.X+e.plotOffset,g=o?d-this.model.wallSize-e.majorTickLines.size-this.model.elementSpacing/2:d+this.model.wallSize+e.majorTickLines.size+this.model.elementSpacing,f="middle"):(g=Math.round(e.plotOffset+e.y+_.height/4+e.height*(1-v)),m=o?e.x+e.majorTickLines.size+e.axisLine.width+this.model.elementSpacing/2:h-this.model.wallSize-e.majorTickLines.size-this.model.elementSpacing/2,f=o?"start":"end"),s.push({x:m,y:g,size:_});var b=e.width/e.visibleLabels.length-5,x=s[c];if((x.x-x.size.width/2<e.x&&0===c||x.x+x.size.width/2>e.x+e.width&&c===e.visibleLabels.length-1)&&"trim"!=e.labelIntersectAction&&e.labelIntersectAction.indexOf("wrap")<0){if("hide"===e.edgeLabelPlacement)continue;"shift"===e.edgeLabelPlacement&&(0==c?x.x=m=e.x+x.size.width/2:c==e.visibleLabels.length-1&&(x.x=m=e.x+e.width-x.size.width/2))}if("horizontal"==e.orientation.toLowerCase())if(e.labelRotation){a=e.labelRotation;var y=ej.EjSvgRender.utils.rotatedLabel(e,this,e.labelRotation,e.visibleLabels[c].Text,!0);g+=y.height/2}else if("trim"==e.labelIntersectAction)e.visibleLabels[c].Text=this._textTrim(b,e.visibleLabels[c].Text,e.font);else if("wrapByWord"==e.labelIntersectAction)e.visibleLabels[c].Text=this._textWrap(b,e.visibleLabels[c].Text,e.font);else if("wrap"==e.labelIntersectAction)e.visibleLabels[c].Text=this._textWrapByLength(b,e.visibleLabels[c].Text,e.font);else if("rotate45"==e.labelIntersectAction||"rotate90"==e.labelIntersectAction){a=e.labelIntersectAction.indexOf("45")>-1?45:90;var y=ej.EjSvgRender.utils.rotatedLabel(e,this,a,e.visibleLabels[c].Text,!0);g+=y.height/2}else if("multipleRows"===e.labelIntersectAction)u=x.x,u-=_.width/2,this._multipleRows(c,u,e.visibleLabels[c],e),g=e.visibleLabels[c].index?g+e.visibleLabels[c].index*(_.height+5):g;else if("hide"===e.labelIntersectAction){if(p=p||0,0!=c&&s[p].x+s[p].size.width/2>=s[c].x-s[c].size.width/2)continue;p=c}i={Width:_.width,Height:_.height,Label:e.visibleLabels[c],TextAnchor:f,tag:"text",font:e.font,id:this.svgObject.id+e.orientation+c,child:this.chart3D,Angle:a},this.graphics.addVisual(this.polygon.createTextElement(this.vector.vector3D(m,g,0),i,10,10))}},_renderTicks3D:function(e,t,i,s){for(var a,r=e.visibleLabels.length,n=this.model.m_AreaBounds,o=(e.y,0);o<r;o++){var l=0,d=0,h=0,c=0,u=(e.visibleLabels[o].Value-e.visibleRange.min)/e.visibleRange.delta;u=e.isInversed?1-u:u,u=isNaN(u)?0:u,"horizontal"==e.orientation.toLowerCase()?d=l=Math.round(e.width*u)+n.X+e.plotOffset:h=c=Math.round(e.plotOffset+e.height*(1-u)+e.y);var p=this._calculatePosition3D(e,e.tickLinesPosition,t,i,l,h,d,c,s),m={width:e.majorTickLines.width,stroke:e.majorTickLines.color,
child:this.chart3D,tag:"line"};if(m.id=this.svgObject.id+e.name+"_majorTickLines_"+o,this.graphics.addVisual(this.polygon.createLine(m,p.X1,p.Y1,p.X2,p.Y2,0)),e.minorGridLines.visible&&e.minorTicksPerInterval>0&&o<r-1){a=e.visibleRange.interval/(e.minorTicksPerInterval+1);for(var g=0;g<e.minorTicksPerInterval;g++){u=ej.EjSvgRender.utils._valueToCoefficient(e,e.visibleLabels[o].Value+a*(g+1)),u=isNaN(u)?0:u,"horizontal"==e.orientation.toLowerCase()?l=d=Math.round(e.plotOffset+n.Width*u+n.X):h=c=Math.round(e.plotOffset+n.Height*(1-u))+e.y;var p=this._calculatePosition3D(e,e.tickLinesPosition,t,i,l,h,d,c,s),m={width:e.minorTickLines.width,stroke:e.minorTickLines.color,child:this.chart3D,tag:"line"};m.id=this.svgObject.id+e.name+"_minorTickLines_"+o+g,this.graphics.addVisual(this.polygon.createLine(m,p.X1,p.Y1,p.X2,p.Y2,0))}}}},_calculatePosition3D:function(e,t,i,s,a,r,n,o,l){var d=(e.orientation,e._opposed),h=this.model.m_AreaBounds,c=l.axes[e.name]._validCross,u=c?e.y:h.Y+(!d&&h.Height),p=c?e.x:h.X+(d&&h.Width);if("horizontal"==e.orientation.toLowerCase()){r=0,o=d?i:r+i;var m=d?u-this.model.wallSize-i:u+this.model.wallSize-i/2,g=e.x;r+=m,o+=m,a=n=a}else{a=0,n=d?a+i:i;var g=d?p+this.model.wallSize:p-this.model.wallSize-i,m=this.model.m_AreaBounds.Y;a+=g,n+=g,r=o=r}return{X1:a,Y1:r,X2:n,Y2:o}},_drawGridLines3D:function(t,i){if(null!=t){var s,a,r,n,o,l,d=t.visibleLabels.length,h=t._opposed,c=t.orientation,u=i.axes[t.name]._validCross;if("horizontal"==c.toLowerCase()){var p;for(p=0;p<d;p++){var m=ej.EjSvgRender.utils._valueToCoefficient(t,t.visibleLabels[p].Value);m=isNaN(m)?0:m,r=a=Math.round(t.width*m)+this.model.m_AreaBounds.X+t.plotOffset,n=this.model.m_AreaBounds.Y,o=this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height;var g=this.model.depth>2?this.model.depth-2:1,f=u?t.y:this.model.m_AreaBounds.Y+(!h&&this.model.m_AreaBounds.Height),_={opacity:t.majorGridLines.opacity,width:t.majorGridLines.width,stroke:t.majorGridLines.color,child:this.chart3D,tag:"line"};_.id=this.svgObject.id+t.name+"_gridlines_"+p,this.graphics.addVisual(this.polygon.createLine(_,a,n,r,o,g));var v=e.extend({},_);v.id=this.svgObject.id+t.name+"_parallelGridlines_"+p;var b=this.polygon.createLine(v,r,0,r,-g,f);if(this.polygon.transform(this.matrixobj.tilt(parseFloat(Math.PI/2)),b),this.graphics.addVisual(b),t.minorGridLines.visible&&t.minorTicksPerInterval>0&&p<d-1){s=t.visibleRange.interval/(t.minorTicksPerInterval+1);for(var x=0;x<t.minorTicksPerInterval;x++){m=ej.EjSvgRender.utils._valueToCoefficient(t,t.visibleLabels[p].Value+s*(x+1)),m=isNaN(m)?0:m,r=a=Math.round(this.model.m_AreaBounds.Width*m)+this.model.m_AreaBounds.X,n=this.model.m_AreaBounds.Y,o=this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height;var _={opacity:t.minorGridLines.opacity,width:t.minorGridLines.width,stroke:t.minorGridLines.color,child:this.chart3D,tag:"line"};_.id=this.svgObject.id+t.name+"_minorgridlines_"+p+x,this.graphics.addVisual(this.polygon.createLine(_,a,n,r,o,g));var v=e.extend({},_);v.id=this.svgObject.id+t.name+"_parallelMinorGridlines_"+p+x;var b=this.polygon.createLine(v,r,0,r,-g,f);this.polygon.transform(this.matrixobj.tilt(parseFloat(Math.PI/2)),b),this.graphics.addVisual(b)}}l++}}else{var p;for(p=0;p<d;p++){var _,m=(t.visibleLabels[p].Value-t.visibleRange.min)/t.visibleRange.delta;m=t.isInversed?1-m:m,m=isNaN(m)?0:m,a=this.model.m_AreaBounds.X,n=Math.round(t.height*(1-m))+.5,n+=t.y,r=a+this.model.m_AreaBounds.Width,o=n;var g=this.model.depth>2?this.model.depth-2:1,_={opacity:t.majorGridLines.opacity,width:t.majorGridLines.width,stroke:t.majorGridLines.color,axisName:t.name,child:this.chart3D,tag:"line"};_.id=this.svgObject.id+t.name+"_gridlines_"+p,this.graphics.addVisual(this.polygon.createLine(_,a,n,r,o,g));var y=u?t.x:this.model.m_AreaBounds.X+(h&&this.model.m_AreaBounds.Width+1),w=e.extend({},_);w.id=this.svgObject.id+t.name+"_parallelGridlines_"+p;var b=this.polygon.createLine(w,-g,o,0,o,y);if(this.polygon.transform(this.matrixobj.turn(parseFloat(-Math.PI/2)),b),this.graphics.addVisual(b),t.minorGridLines.visible&&t.minorTicksPerInterval>0&&p<d-1){s=t.visibleRange.interval/(t.minorTicksPerInterval+1);for(var x=0;x<t.minorTicksPerInterval;x++){var m=ej.EjSvgRender.utils._valueToCoefficient(t,t.visibleLabels[p].Value+s*(x+1));m=isNaN(m)?0:m,a=this.model.m_AreaBounds.X,n=Math.round(t.height*(1-m))+.5,n+=t.y,r=a+this.model.m_AreaBounds.Width,o=n;var _={opacity:t.minorGridLines.opacity,width:t.minorGridLines.width,stroke:t.minorGridLines.color,axisName:t.name,child:this.chart3D,tag:"line"};_.id=this.svgObject.id+t.name+"_minorgridlines_"+p+x,this.graphics.addVisual(this.polygon.createLine(_,a,n,r,o,g));var w=e.extend({},_);w.id=this.svgObject.id+t.name+"_parallelMinorGridlines_"+p+x;var b=this.polygon.createLine(w,-g,o,0,o,y);this.polygon.transform(this.matrixobj.turn(parseFloat(-Math.PI/2)),b),this.graphics.addVisual(b)}}l++}}}}},ej.Ej3DSeriesRender.prototype={_getSegmentDepth:function(e){var t,i,s=this.chartObj.model.depth;if(this.chartObj.model._sideBySideSeriesPlacement){var a=s/4;t=a,i=3*a}else{var r=e.position-1,n=e.all,a=s/(2*n+n+1);t=a+a*r*3,i=t+2*a}return{Start:t,End:i,Delta:i-t}},createSegment:function(e,t,i,s,a,r,n,o,l){return{StartValue:t,EndValue:i,depth:s,radius:a,index:r,YData:n,Center:e,inSideRadius:o,ActualEndValue:i,ActualStartValue:t,pointIndex:l}},calculateSize:function(t,i){var s=t.chartObj.model.legend,a=0,r=0,n=t.chartObj.model.title,o=t.chartObj.model.title.subTitle,l=t.chartObj.model._titleLocation,d=t.chartObj.model._subTitleLocation,h=t.chartObj.model.title.textOverflow,c=t.chartObj.model.title.subTitle.textOverflow,u=!(!(n.text&&n.visible&&n.enableTrim)||"wrap"!=h&&"wrapandtrim"!=h),p=!(!(o.text&&o.visible&&o.enableTrim)||"wrap"!=c&&"wrapandtrim"!=c);s.visible&&"custom"!=s.position.toLowerCase()&&("right"==s.position.toLowerCase()||"left"==s.position.toLowerCase()?a=("right"==s.position.toLowerCase()?t.chartObj.model.margin.right:t.chartObj.model.margin.left)+t.chartObj.model.LegendViewerBounds.Width:r=("top"==s.position.toLowerCase()?t.chartObj.model.margin.top:t.chartObj.model.margin.bottom)+t.chartObj.model.LegendViewerBounds.Height),i.actualWidth=e(t.chartObj.svgObject).width()-a;var m=.5*i.actualWidth+("left"===s.position.toLowerCase()?a:0);if(u||p){var g=l.size.height+(p?d.size.height:0)+r;i.actualHeight=e(t.chartObj.svgObject).height()-g;var f=.5*i.actualHeight+("top"===s.position.toLowerCase()?g:l.size.height+(p?d.size.height:0))}else{var g=(n.text&&n.visible?l.Y:0)+r;i.actualHeight=e(t.chartObj.svgObject).height()-g;var f=.5*i.actualHeight+("top"===s.position.toLowerCase()?g:n.text&&n.visible?l.Y:0)}return{centerX:m,centerY:f}},createPoints:function(t,i){t.segments=[];for(var s=this.calculateSize(i,t),a=0,r=this._calculateVisiblePoints(t).visiblePoints,n=t._visiblePoints.length,o=0;o<n;o++)a+=r[o].YValues[0];a=0!=a?a:1;for(var l,d,h,c,u,p,m=360/a,g=e.inArray(t,i.chartObj.model._visibleSeries),f=(this.chartObj.model._visibleSeries.length,i.chartObj.model.innerRadius[g]),_=i.chartObj._getYValues(t._visiblePoints),v=i.chartObj.model.depth,b=0,x=0,y=0,w=0,C=i.chartObj.model.circularRadius[g],S=0;S<n;S++)(t._visiblePoints[S].visible||t._visiblePoints[S].gapMode)&&(d=e.inArray(t._visiblePoints[S],t._visiblePoints),h=Math.abs(_[S]),x=Math.abs(h)*(2*Math.PI/a),c={},c.x=0,c.y=0,ej.util.isNullOrUndefined(h)||((t.explodeIndex==t._visiblePoints[S].actualIndex||t.explodeAll)&&(u={X:0,Y:0},u.X=Math.cos(2*Math.PI*(y+h/2)/a),u.Y=Math.sin(2*Math.PI*(y+h/2)/a),c.x=.01*C*u.X*t.explodeOffset,c.y=.01*C*u.Y*t.explodeOffset),l=i.chartObj.vector.vector3D(c.x+s.centerX,c.y+s.centerY,0),p=this.createSegment(l,parseFloat(m*y),parseFloat(m*h),v,C,S,h,f,d,t),t._visiblePoints[S].gapMode?p.visible=!1:p.visible=!0,t.segments.push(p)),t.marker.dataLabel.visible&&this._addPieDataLabel(w,_[S],b,b+x,S,C,this._isChartRotated(i)?i.chartObj.model.depth+5:0,l,t._visiblePoints[S]),w++,b+=x,y+=h);return t.segments},_addPieDataLabel:function(e,t,i,s,a,r,n,o,l){var d=(i+s)/2;l.symbolLocation={x:0,y:0,radius:0,angle:0,StartDepth:0},l.symbolLocation.x=e,l.symbolLocation.y=t,l.symbolLocation.radius=r,l.symbolLocation.angle=d,l.symbolLocation.center=o,l.startDepth=n},_isChartRotated:function(e){var t=Math.abs(e.chartObj.model.tilt%360),i=Math.abs(e.chartObj.model.rotattion%360);return!!((t>90&&t<270)^(i>90&&i<270))},createSector:function(e,t,i,s){var a=parseInt(Math.ceil(e.ActualEndValue/6)),r=Math.PI/180,n=0,o=[],l=t.chartObj.model.depth;if(a<1)return null;for(var d=[],h=e.ActualEndValue/a,c=[],u=[],p=0;p<a+1;p++){var m=parseFloat(e.Center.x+e.radius*Math.cos((e.ActualStartValue+p*h)*r)),g=parseFloat(e.Center.y+e.radius*Math.sin((e.ActualStartValue+p*h)*r));c[p]={X:m,Y:g};var f=parseFloat(e.Center.x+e.inSideRadius*Math.cos((e.ActualStartValue+p*h)*r)),_=parseFloat(e.Center.y+e.inSideRadius*Math.sin((e.ActualStartValue+p*h)*r));u[p]={X:f,Y:_},o.push({X:m,Y:g})}for(var v,b=[],p=0;p<a;p++)v=new Array(t.chartObj.vector.vector3D(c[p].X,c[p].Y,0),t.chartObj.vector.vector3D(c[p].X,c[p].Y,l),t.chartObj.vector.vector3D(c[p+1].X,c[p+1].Y,l),t.chartObj.vector.vector3D(c[p+1].X,c[p+1].Y,0)),b[p]=t.chartObj.polygon.polygon3D(v,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,n.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D),n++;if(d[1]=b,e.inSideRadius>0){for(var x=[],p=0;p<a;p++)v=new Array(t.chartObj.vector.vector3D(u[p].X,u[p].Y,0),t.chartObj.vector.vector3D(u[p].X,u[p].Y,l),t.chartObj.vector.vector3D(u[p+1].X,u[p+1].Y,l),t.chartObj.vector.vector3D(u[p+1].X,u[p+1].Y,0)),x[p]=t.chartObj.polygon.polygon3D(v,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,n.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D),n++;d[3]=x}for(var y=[],w=[],p=0;p<a+1;p++)y.push(t.chartObj.vector.vector3D(c[p].X,c[p].Y,0)),w.push(t.chartObj.vector.vector3D(c[p].X,c[p].Y,l));if(e.inSideRadius>0)for(var p=a;p>-1;p--)y.push(t.chartObj.vector.vector3D(u[p].X,u[p].Y,0)),w.push(t.chartObj.vector.vector3D(u[p].X,u[p].Y,l));else y.push(e.Center),w.push(t.chartObj.vector.vector3D(e.Center.x,e.Center.y,l));if(d[0]=[],d[0].push(t.chartObj.polygon.polygon3D(y,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,n.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D)),n++,d[0].push(t.chartObj.polygon.polygon3D(w,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,n.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D)),n++,e.inSideRadius>0){var C=new Array(t.chartObj.vector.vector3D(c[0].X,c[0].Y,0),t.chartObj.vector.vector3D(c[0].X,c[0].Y,l),t.chartObj.vector.vector3D(u[0].X,u[0].Y,l),t.chartObj.vector.vector3D(u[0].X,u[0].Y,0)),S=new Array(t.chartObj.vector.vector3D(c[a].X,c[a].Y,0),t.chartObj.vector.vector3D(c[a].X,c[a].Y,l),t.chartObj.vector.vector3D(u[a].X,u[a].Y,l),t.chartObj.vector.vector3D(u[a].X,u[a].Y,0));d[2]=[],d[2].push(t.chartObj.polygon.polygon3D(C,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,n.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D)),n++,d[2].push(t.chartObj.polygon.polygon3D(S,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,n.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D)),n++}else{var C=new Array(t.chartObj.vector.vector3D(c[0].X,c[0].Y,0),t.chartObj.vector.vector3D(c[0].X,c[0].Y,l),t.chartObj.vector.vector3D(e.Center.x,e.Center.y,l),t.chartObj.vector.vector3D(e.Center.x,e.Center.y,0)),S=new Array(t.chartObj.vector.vector3D(c[a].X,c[a].Y,0),t.chartObj.vector.vector3D(c[a].X,c[a].Y,l),t.chartObj.vector.vector3D(e.Center.x,e.Center.y,l),t.chartObj.vector.vector3D(e.Center.x,e.Center.y,0));d[2]=[],d[2].push(t.chartObj.polygon.polygon3D(C,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,n.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D)),n++,d[2].push(t.chartObj.polygon.polygon3D(S,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,n.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D)),n++}return d},createPolygons:function(t,i,s){var a,r,n,o,l,d,h=[],c=e.inArray(t,i.chartObj.model._visibleSeries);a=t.segments&&s?t.segments:this.createPoints(t,i),l=a.length;for(var u=0;u<l;u++)if(r=a[u],r.visible&&(o=a[u].pointIndex,n=i.chartObj.setStyle(i,t,c,o),"object"==typeof i.chartObj.model.pointColors[o]&&(n.interior=i.chartObj.model.pointColors[o][0].color),null!=(d=this.createSector(r,i,n,c))))for(var p=0;p<d.length;p++)if(h[p]||(h[p]=[]),null!=d[p])for(var m=0;m<d[p].length;m++)h[p].push(d[p][m]);if(s)return h;for(var p=0;p<h.length;p++)for(var g=0;g<h[p].length;g++)i.chartObj.graphics.addVisual(h[p][g])},draw3DDataLabel:function(t,i,s,a){var r,n,o,l,d,h=t.marker.dataLabel.connectorLine.height,c=0,u=0;if("number"==typeof t.marker.dataLabel.offset?u=t.marker.dataLabel.offset:(c=t.marker.dataLabel.offset.x,u=t.marker.dataLabel.offset.y),"none"==this.chartObj.model.AreaType){y={x:0,y:0};var p=s.text?s.text:s.y,m=e.inArray(t,this.chartObj.model.series);if("doughnut"==t.type.toLowerCase()||"pie"==t.type.toLowerCase()){var g=(Math.min(t.actualWidth,t.actualHeight),s.symbolLocation.center),c=t.marker.dataLabel.offset.x,u=t.marker.dataLabel.offset.y,f=s.symbolLocation.radius*t._coefficient;ej.util.isNullOrUndefined(h)&&(h=ej.EjSvgRender.utils._measureText(p,null,t.marker.dataLabel.font).height),null!=t&&"inside"!=t.labelPosition?n=s.symbolLocation.radius+h:null!=t&&(n=f+(s.symbolLocation.radius-f)/2),o=y.X=g.x+n*Math.cos(s.symbolLocation.angle)+c,l=y.Y=g.y+n*Math.sin(s.symbolLocation.angle)+u;var _=e.extend({},ej.EjSvgRender.commonChartEventArgs);_.data={text:p,location:{x:o,y:l},series:t,pointIndex:i,seriesIndex:m},this.chartObj._trigger("displayTextRendering",_),_.data.Text=_.data.text;var v=ej.EjSvgRender.utils._measureText(_.data.Text,null,t.marker.dataLabel.font);o=y.X=_.data.location.x,l=y.Y=_.data.location.y}}else{var b=t.yAxis.labelFormat?t.yAxis.labelFormat:"",m=e.inArray(t,this.chartObj.model.series),p=s.text?s.text:s.y;b&&(b.indexOf("{value}")>-1?p=b.replace("{value}",s.y):0==b.indexOf("e")||0==b.indexOf("E")?(d=b.match(/(\d+)/g),d=null==d?6:d>20?20:d,p=s.y.toExponential(d)):p=ej.globalize.format(s.y,b,this.chartObj.model.locale));var x=0,_=e.extend({},ej.EjSvgRender.commonChartEventArgs),v=ej.EjSvgRender.utils._measureText(p,null,t.marker.dataLabel.font),y=ej.EjSvgRender.utils.Transform3DToVisible(t,s.symbolLocation.x,s.symbolLocation.y,this.chartObj),h=t.marker.dataLabel.connectorLine.height?t.marker.dataLabel.connectorLine.height:0,l=y.Y,o=y.X;this.chartObj.model.requireInvertedAxes?(o=s.x>0?y.X-Math.sin(4.71)*h:y.X+Math.sin(4.71)*h,x=-v.height/3):l=s.y>0?y.Y+Math.sin(4.71)*h:y.Y+Math.sin(-4.71)*h,l="bottom"==t.marker.dataLabel.textPosition?y.Y+u:y.Y-u,o=y.X+c,_.data={text:p,location:{x:o,y:l},series:t,pointIndex:i},_.data.Text=_.data.text,this.chartObj._trigger("displayTextRendering",_),o=_.data.location.x,l=_.data.location.y}this._getSegmentDepth(t);if("none"!=t.marker.dataLabel.shape.toLowerCase()&&!s.marker.dataLabel.template&&""!=_.data.Text){var w={tag:"dataLabel",series:t,point:s,pointIndex:i,id:this.chartObj.svgObject.id+m+"_DataLabel"+i,child:this.chartObj.chart3D};this.chartObj.graphics.addVisual(this.chartObj.polygon.createTextElement(this.chartObj.vector.vector3D(o,l,s.symbolLocation.z?s.symbolLocation.z:0),w,0,-v.height))}r=s.marker.dataLabel.template?"template":"text";var w={Width:v.width,Height:v.height,Label:_.data,TextAnchor:"middle",tag:r,font:t.marker.dataLabel.font,Angle:t.marker.dataLabel.angle,id:this.chartObj.svgObject.id+"_SeriesText"+i+m,child:this.chartObj.chart3D};if("none"!=this.chartObj.model.AreaType){if(t.marker.dataLabel.connectorLine.height&&t.marker.dataLabel.connectorLine.height>0){var C=[];C.push({x:y.X,y:y.Y+x,z:s.symbolLocation.z}),C.push({x:o,y:l+x,z:s.symbolLocation.z}),this.drawLineSegment(C,i,t)}this.chartObj.graphics.addVisual(this.chartObj.polygon.createTextElement(this.chartObj.vector.vector3D(o,l,s.symbolLocation.z),w,0,-v.height))}else{"inside"!=t.labelPosition.toLowerCase()&&this.updateConnectorLine(s,i,t,y,h);t.actualWidth,t.actualHeight;this.chartObj.graphics.addVisual(this.chartObj.polygon.createTextElement(this.chartObj.vector.vector3D(y.X,y.Y,-1),w,0,-v.height))}},updateConnectorLine:function(e,t,i,s,a){var r=[],n=e.symbolLocation,o=n.center.x+Math.cos(n.angle)*n.radius,l=n.center.y+Math.sin(n.angle)*n.radius;r.push({x:o,y:l});var d=n.radius+a;o=n.center.x+Math.cos(n.angle)*d,l=n.center.y+Math.sin(n.angle)*d,r.push({x:o,y:l}),"bezier"==i.marker.dataLabel.connectorLine.type&&(r=this.getBezierApproximation(r,256,i)),this.drawLineSegment(r,t,i)},getBezierApproximation:function(e,t,i){for(var s=[],a=0;a<=t;a++){var r=a/t;s.push(this.GetBezierPoint(r,e,0,e.length,i))}return s},drawLineSegment:function(t,i,s){for(var a=[],r=0;r<t.length;r++)a.push(this.chartObj.vector.vector3D(t[r].x,t[r].y,t[r].z?t[r].z:0));var n=e.inArray(s,this.chartObj.model._visibleSeries),o="none"==this.chartObj.model.AreaType?this.chartObj.model.pointColors[i]:this.chartObj.model.seriesColors[n],l=s.marker.dataLabel.connectorLine.stroke?s.marker.dataLabel.connectorLine.stroke:o,d={width:s.marker.dataLabel.connectorLine.width,stroke:l,child:this.chartObj.chart3D,tag:"polyline",id:this.chartObj.svgObject.id+"_"+n+"_"+i};this.chartObj.graphics.addVisual(this.chartObj.polygon.createPolyline(a,d))}},ej.ejCircularSeries={draw:function(t,i,s){var a=(i.chartObj.model._visibleSeries.length,e.inArray(t,i.chartObj.model._visibleSeries));if(i._calculateVisiblePoints(t),i.calculateSize(i,t),"pie"==s?(t._size=t.pieCoefficient,t._coefficient=0==a?0:t._size):(t._size=t.doughnutSize,t._coefficient=t.doughnutCoefficient),i.chartObj.model.circularRadius.length>1){for(var r=a;r<i.chartObj.model.circularRadius.length;r++)if(!ej.util.isNullOrUndefined(i.chartObj.model.circularRadius[r])){i.chartObj.model.circularRadius[a]=i.chartObj.model.circularRadius[r]*t._size;break}}else i.chartObj.model.circularRadius[a]=.97*Math.min(t.actualWidth/2,t.actualHeight/2)*t._size;i.chartObj.model.innerRadius[a]=t._coefficient*i.chartObj.model.circularRadius[a],i.createPolygons(t,i)},doAnimation:function(t,i){t.count=0,e.each(t.segments,function(s,a){var r=a.radius,n=a.inSideRadius;t.animate=!0,e(i.chartObj.element).each(function(){a.radius=0,a.inSideRadius=0}).animate({Radius:r,InsideRadius:n},{duration:1e3,queue:!1,step:function(e,s){"Radius"===s.prop.toString()?a.radius=e:a.inSideRadius=e;for(var r=i.createPolygons(t,i,!0),n=0;n<r.length;n++)for(var o=0;o<r[n].length;o++)i.chartObj.polygon.update(r[n][o].VectorPoints,r[n][o],i)},complete:function(){i.chartObj.model.AnimationComplete=!0;var s=e.extend({},ej.EjSvgRender.commonChartEventArgs);s.data={series:t},i.chartObj._trigger("animationComplete",s)}})})}},ej.series3DTypes.doughnut=ej.ejCircularSeries,ej.series3DTypes.pie=ej.ejCircularSeries,ej.ej3DStackingColumn={draw:function(e,t,i,s){var a=t._isVisiblePoints(e);this.createSegments(e,t,s);for(var r=0;r<a.length;r++)a[r].visible&&(e._visiblePoints[r].plans=null,ej.ej3DColumnSeries.update(e,e._visiblePoints[r],r,t))},createSegments:function(e,t,i){var s,a=t.chartObj._getXValues(e._visiblePoints);if(null!=a){var r=t.getSideBySideInfo(e,i),n=t._getSegmentDepth(e);s=r.Delta/2;for(var o=t._isVisiblePoints(e),l=0;l<o.length;l++){var d=a[l]+r.Start,h=a[l]+r.End,c=e.stackedValue.StartValues[l],u=e.stackedValue.EndValues[l];if(ej.ej3DColumnSeries._setData(d,u,h,c,n.Start,n.End,t,o[l]),e.marker.dataLabel.visible)switch(o[l].symbolLocation={x:0,y:0,z:0},e.marker.dataLabel.textPosition){case"top":o[l].symbolLocation.x=d+s,o[l].symbolLocation.y=u,o[l].symbolLocation.z=n.Start+n.Delta/2;break;case"bottom":o[l].symbolLocation.x=d+s,o[l].symbolLocation.y=c-.2,o[l].symbolLocation.z=n.Start+(n.End-n.Start)/2;break;default:o[l].symbolLocation.x=d+s,o[l].symbolLocation.y=u+(c-u)/2,o[l].symbolLocation.z=n.Start}}}},doAnimation:function(t,i){e.each(t._visiblePoints,function(s,a){var r=a.Top,n=a.Bottom;e(a).each(function(){a.Top=0,a.Bottom=0}).animate({Top:r,Bottom:n},{duration:1200,queue:!1,step:function(e,r){"Top"===r.prop.toString()&&(a.Top=e),"Bottom"===r.prop.toString()&&(a.Bottom=e),ej.ej3DColumnSeries.update(t,a,s,i)},complete:function(){i.chartObj.model.AnimationComplete=!0;var s=e.extend({},ej.EjSvgRender.commonChartEventArgs);s.data={series:t},i.chartObj._trigger("animationComplete",s)}})})}},ej.series3DTypes.stackingcolumn=ej.ej3DStackingColumn,ej.series3DTypes.stackingbar=ej.ej3DStackingColumn,ej.series3DTypes.stackingbar100=ej.ej3DStackingColumn,ej.series3DTypes.stackingcolumn100=ej.ej3DStackingColumn,ej.ej3DColumnSeries={draw:function(e,t,i,s){var a=t._isVisiblePoints(e);this.createSegments(e,t,s);for(var r=0;r<a.length;r++)a[r].visible&&(e._visiblePoints[r].plans=null,this.update(e,e._visiblePoints[r],r,t))},update:function(t,i,s,a){var r=t.xAxis._valueType.toLowerCase(),n=e.inArray(t,a.chartObj.model._visibleSeries),o="logarithmic"==r?null:1,l="logarithmic"==r,d=l?Math.log(i.Left,o):i.Left,h=l?Math.log(i.Right,o):i.Right,c=t.yAxis.visibleRange.min,u=t.yAxis.visibleRange.max,p=t.xAxis.visibleRange.min,m=t.xAxis.visibleRange.max;if(d>=p&&d<=m||h>=p&&h<=m){var g;g=i.Top<0?i.Top>c?i.Top:c:t.yAxis.valueType&&"logarithmic"==t.yAxis.valueType.toLowerCase()?i.Top:i.Top<u?i.Top:u;var f=ej.EjSvgRender.utils.Transform3DToVisible(t,i.Left>p?i.Left:p,g,a.chartObj),_=ej.EjSvgRender.utils.Transform3DToVisible(t,m>i.Right?i.Right:m,c>i.Bottom?c:i.Bottom,a.chartObj),v=a.chartObj.vector.vector3D(Math.min(f.X,_.X),Math.min(f.Y,_.Y),i.StartDepth),b=a.chartObj.vector.vector3D(Math.max(f.X,_.X),Math.max(f.Y,_.Y),i.EndDepth),x=a.chartObj.setStyle(a,t,n,s);x.interior.indexOf("url")>=0&&(x.interior=a.chartObj.model.seriesColors[n][0].color);var y="Region_Series_"+n+"_Point_"+s;"cylinder"==t.columnFacet?a.chartObj.polygon.createCylinder(v,b,this,s,t.type,x.borderColor,x.interior,x.borderWidth,x.opacity,a.chartObj.model.requireInvertedAxes,y,a.chartObj.chart3D):"rectangle"==t.columnFacet&&a.chartObj.polygon.createBox(v,b,this,s,t.type,x.borderColor,x.interior,x.borderWidth,x.opacity,a.chartObj.model.requireInvertedAxes,y,a.chartObj.chart3D)}},_setData:function(){var e=arguments,t=arguments[arguments.length-1],i=arguments[arguments.length-2];t.Left=e[0],t.Bottom=e[3],t.Top=e[1],t.Right=e[2],t.StartDepth=e[4],t.EndDepth=e[5],t.XRange=i.getDoubleRange(t.Left,t.Right),isNaN(t.Top)||isNaN(t.Bottom)||(t.YRange=i.getDoubleRange(t.Top,t.Bottom))},createSegments:function(e,t,i){var s=t.chartObj._getXValues(e._visiblePoints),a=t.chartObj._getYValues(e._visiblePoints);if(null!=s)for(var r=t.getSideBySideInfo(e,i),n=t._getSegmentDepth(e),o=t.chartObj._getXCrossValue(e,e.xAxis,i),l=r.Delta/2,d=e._visiblePoints,h=0;h<d.length;h++){var c=s[h]+r.Start,u=s[h]+r.End,p=a[h],m=o;if(this._setData(c,p,u,m,n.Start,n.End,t,d[h]),s[h],a[h],e.marker.dataLabel.visible)switch(d[h].symbolLocation={x:0,y:0,z:0},e.marker.dataLabel.textPosition){case"top":d[h].symbolLocation.x=c+l,d[h].symbolLocation.y=p,d[h].symbolLocation.z=n.Start;break;case"bottom":d[h].symbolLocation.x=c+l,d[h].symbolLocation.y=m-.2,d[h].symbolLocation.z=n.Start+(n.End-n.Start)/2;break;default:d[h].symbolLocation.x=c+l,d[h].symbolLocation.y=Math.abs(m-p)/2,d[h].symbolLocation.z=n.Start}}},doAnimation:function(t,i){var s=this;e.each(t._visiblePoints,function(a,r){var n=r.Top;e(r).each(function(){r.Top=0}).animate({Top:n},{duration:1200,queue:!1,step:function(e,n){"Top"===n.prop.toString()&&(r.Top=e),s.update(t,r,a,i)},complete:function(){i.chartObj.model.AnimationComplete=!0;var s=e.extend({},ej.EjSvgRender.commonChartEventArgs);s.data={series:t},i.chartObj._trigger("animationComplete",s)}})})}},ej.series3DTypes.column=ej.ej3DColumnSeries,ej.series3DTypes.bar=ej.ej3DColumnSeries,ej.Ej3DChart.prototype={renderSeries:function(t,i,s){var i;ej.Ej3DSeriesRender.prototype.chartObj=t,e.extend(ej.Ej3DSeriesRender.prototype,ej.EjSeriesRender.prototype);var a=new ej.Ej3DSeriesRender,r=e.extend({},ej.EjSvgRender.commonChartEventArgs);r.data={series:i},a.chartObj._trigger("seriesRendering",r);var n=i.type.toLowerCase(),o=ej.series3DTypes[n];ej.util.isNullOrUndefined(o)||(o.draw(i,a,n,s),i.marker.dataLabel.visible&&e.each(i._visiblePoints,function(s,r){r.marker=e.extend(!0,{},i.marker,r.marker),r.visible&&(ej.util.isNullOrUndefined(r.marker)||r.marker.dataLabel&&r.marker.dataLabel.visible)&&a.draw3DDataLabel(i,s,r,t)}))},update3DWall:function(t,i){if("cartesianaxes"==t.model.AreaType){e.extend(ej.Ej3DRender.prototype,this),this.updateBackWall(t);for(var s=0;s<t.model._axes.length;s++){var a=t.model._axes[s],r=a._opposed;"vertical"==a.orientation.toLowerCase()?r?this.updateRightWall(t,a,i):this.updateLeftWall(t,a,i):r?this.updateTopWall(t,a,i):this.updateBottomWall(t,a,i)}}},updateTopWall:function(e,t,i){var s=0,a=e.model.m_AreaBounds,r=i.axes[t.name]._validCross?t.y:a.Y;s=e.model.wallSize<r?r-e.model.wallSize:-(e.model.wallSize-r);for(var n=e.vector.vector3D(a.X+a.Width,-e.model.depth,r-.1),o=e.vector.vector3D(a.X,-.1,s),l=e.polygon.createBox(n,o,this,0,"Graphics3D","#e2e1e1","#e2e1e1",0,.15,!1,"TopWallBrush",e.chart3D),d=0;d<l.length;d++)e.polygon.transform(e.matrixobj.tilt(parseFloat(Math.PI/2)),l[d])},updateRightWall:function(e,t,i){for(var s=i.axes[t.name]._validCross?t.x:e.model.m_AreaBounds.X+e.model.m_AreaBounds.Width,a={left:-e.model.depth,top:e.model.m_AreaBounds.Y,bottom:e.model.m_AreaBounds.Height+e.model.m_AreaBounds.Y,right:0},r=e.vector.vector3D(a.left,a.top,s+1.5),n=e.vector.vector3D(a.right,a.bottom,s+e.model.wallSize),o=e.polygon.createBox(r,n,e,0,"Graphics3D","#e2e1e1","#e2e1e1",0,.15,!1,"RightWallBrush",e.chart3D),l=0;l<o.length;l++)e.polygon.transform(e.matrixobj.turn(parseFloat(-Math.PI/2)),o[l])},updateBackWall:function(e){var t=e.model.m_AreaBounds,i=e.vector.vector3D(t.X,t.Y,0==e.model.depth?1.5:e.model.depth+e.model.wallSize),s=e.vector.vector3D(t.X+t.Width,t.Y+t.Height,0==e.model.depth?1.5:e.model.depth);e.polygon.createBox(i,s,e,0,"Graphics3D","#e2e1e1","#e2e1e1",0,.15,!1,"BackWallBrush",e.chart3D)},updateLeftWall:function(e,t,i){for(var s={left:-e.model.depth,top:e.model.m_AreaBounds.Y,bottom:e.model.m_AreaBounds.Height+e.model.m_AreaBounds.Y,right:0},a=i.axes[t.name]._validCross?t.x:e.model.m_AreaBounds.X,r=e.vector.vector3D(s.left,s.top,a-.1),n=e.vector.vector3D(s.right,s.bottom,a-e.model.wallSize),o=e.polygon.createBox(r,n,this,0,"Graphics3D","#e2e1e1","#e2e1e1",0,.15,!1,"LeftWallBrush",e.chart3D),l=0;l<o.length;l++)e.polygon.transform(e.matrixobj.turn(parseFloat(-Math.PI/2)),o[l])},updateBottomWall:function(e,t,i){for(var s=e.model.m_AreaBounds,a=i.axes[t.name]._validCross?t.y:s.Y+s.Height,r=e.vector.vector3D(s.X+s.Width,-e.model.depth,e.model.wallSize+a),n=e.vector.vector3D(s.X,-.1,a+1),o=e.polygon.createBox(n,r,this,0,"Graphics3D","#D3D3D3","#D3D3D3",0,.15,!1,"BottomWallBrush",e.chart3D),l=0;l<o.length;l++)e.polygon.transform(e.matrixobj.tilt(parseFloat(Math.PI/2)),o[l])}}}(jQuery),ej.Ej3DRender=function(){},function(e){ej.Ej3DRender.Polygons=[],ej.Ej3DRender.prototype={matrix3D:function(){},vector3D:function(){},BSPTreeBuilder:function(){},Graphics3D:function(){},polygon3D:function(){}};var t=new ej.Ej3DRender;t.vector3D.prototype={x:"",y:"",z:"",Epsilon:1e-5,isValid:function(e){return!isNaN(e.x)&&!isNaN(e.y)&&!isNaN(e.z)},vector3D:function(e,t){this.x=e.x,this.y=e.y,this.z=t},vector3D:function(e,t,i){return this.x=e,this.y=t,this.z=i,{x:e,y:t,z:i}},vector3DMinus:function(e,t){return this.vector3D(e.x-t.x,e.y-t.y,e.z-t.z)},vector3DPlus:function(e,t){return this.vector3D(e.x+t.x,e.y+t.y,e.z+t.z)},vector3DMultiply:function(e,t){var i=e.y*t.z-t.y*e.z,s=e.z*t.x-t.z*e.x,a=e.x*t.y-t.x*e.y;return this.vector3D(i,s,a)},vector3dAND:function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},vector3DStarMultiply:function(e,t){var i=e.x*t,s=e.y*t,a=e.z*t;return this.vector3D(i,s,a)},getLength:function(e){var t=this.vector3dAND(e,e);return Math.sqrt(t)},normalize:function(){var e,t,i,s=this.getLength();e/=s,t/=s,i/=s},getNormal:function(e,t,i){var s=this.vector3DMinus(e,t),a=this.vector3DMinus(i,t),r=this.vector3DMultiply(s,a),n=this.getLength(r);return n<this.Epsilon&&(n=0),{x:r.x/n,y:r.y/n,z:r.z/n}}},t.matrix3D.prototype={MATRIX_SIZE:4,matrix3D:function(e){for(var t=[],i=0;i<e;i++)t[i]=this.createArray(e);return t},isAffine:function(e){return 0==e[0][3]&&0==e[1][3]&&0==e[2][3]&&1==e[3][3]},createArray:function(e){for(var t=[],i=0;i<e;++i)t[i]=0;return t},getIdentity:function(){for(var e=this.matrix3D(this.MATRIX_SIZE),t=0;t<this.MATRIX_SIZE;t++)e[t][t]=1;return e},getInvertal:function(e){for(var t=this.getIdentity(),i=0;i<this.MATRIX_SIZE;i++)for(var s=0;s<this.MATRIX_SIZE;s++)t[i][s]=this.getMinor(e,i,s);return t=this.transposed(t),t=this.getMatrixMultiple(1/this.getDeterminant(e),t)},getMatrixMultiple:function(e,t){for(var i=0;i<t.length;i++)for(var s=0;s<t[i].length;s++)t[i][s]=t[i][s]*e;return t},getMatrixVectorMutiple:function(e,t){var i=e[0][0]*t.x+e[1][0]*t.y+e[2][0]*t.z+e[3][0],s=e[0][1]*t.x+e[1][1]*t.y+e[2][1]*t.z+e[3][1],a=e[0][2]*t.x+e[1][2]*t.y+e[2][2]*t.z+e[3][2];if(!this.isAffine(e)){var r=1/(e[0][3]*t.x+e[1][3]*t.y+e[2][3]*t.z+e[3][3]);i*=r,s*=r,a*=r}return{x:i,y:s,z:a}},getMatrixVectorAnd:function(e,i){var s=e[0][0]*i.x+e[1][0]*i.y+e[2][0]*i.z,a=e[0][1]*i.x+e[1][1]*i.y+e[2][1]*i.z,r=e[0][2]*i.x+e[1][2]*i.y+e[2][2]*i.z;return t.vector3D.prototype.vector3D(s,a,r)},getMatrixAdd:function(e,t){for(var i=this.matrix3D(4),s=0;s<4;s++)for(var a=0;a<4;a++)i[s][a]=e[s][a]+t[s][a];return i},getMatrixMultiplication:function(e,t){for(var i=this.getIdentity(),s=0;s<this.MATRIX_SIZE;s++)for(var a=0;a<this.MATRIX_SIZE;a++){for(var r=0,n=0;n<this.MATRIX_SIZE;n++){r+=e[n][a]*t[s][n]}i[s][a]=r}return i},getMatrixEqual:function(e,t){for(var i=!0,s=0;s<e.length;s++)for(var a=0;a<e.length;a++)e[s][a]!=t[s][a]&&(i=!1);return i},getMatrixNotEqual:function(e,t){for(var i=!0,s=0;s<e.length;s++)for(var a=0;a<e.length;a++)e[s][a]!=t[s][a]&&(i=!1);return!i},getMinor:function(e,t,i){return((t+i)%2==0?1:-1)*this.getDeterminant(this.getMMtr(e,t,i))},getMMtr:function(e,t,i){for(var s=e.length-1,a=this.createArray(s),r=0;r<s;r++){var n=r>=t?r+1:r;a[r]=this.createArray(s);for(var o=0;o<s;o++){var l=o>=i?o+1:o;a[r][o]=e[n][l]}}return a},getDeterminant:function(e){var t=e.length,i=0;if(t<2)i=e[0][0];else for(var s=1,a=0;a<t;a++){var r=this.getMMtr(e,a,0);i+=s*e[a][0]*this.getDeterminant(r),s=s>0?-1:1}return i},transform:function(e,t,i){var s=this.getIdentity();return s[3][0]=e,s[3][1]=t,s[3][2]=i,s},turn:function(e){var t=this.getIdentity();return t[0][0]=Math.cos(e),t[2][0]=-Math.sin(e),t[0][2]=Math.sin(e),t[2][2]=Math.cos(e),t},tilt:function(e){var t=this.getIdentity();return t[1][1]=Math.cos(e),t[2][1]=Math.sin(e),t[1][2]=-Math.sin(e),t[2][2]=Math.cos(e),t},transposed:function(e){for(var t=this.getIdentity(),i=0;i<this.MATRIX_SIZE;i++)for(var s=0;s<this.MATRIX_SIZE;s++)t[i][s]=e[s][i];return t},shear:function(e,t,i,s,a,r){var n=this.getIdentity();return n[0]=e,n[0]=t,n[1]=i,n[1]=s,n[2]=a,n[2]=r,n}},t.Graphics3D.prototype={addVisual:function(e){return null==e||r.test(e)?-1:(e.Graphics3D=this,a.add(e))},getVisualCount:function(){return ej.Ej3DRender.Polygons.length()},remove:function(e){ej.Ej3DRender.Polygons.Remove(e)},clearVisual:function(){ej.Ej3DRender.Polygons=null},getVisual:function(){return ej.Ej3DRender.Polygons},prepareView:function(e,t,i,s,r,n){0==arguments.length?a.build():(null==ej.Ej3DRender.transform?ej.Ej3DRender.transform=ej.EjSvgRender.chartTransform3D.transform3D(r):ej.Ej3DRender.transform.mViewport=r,ej.Ej3DRender.tree||(ej.Ej3DRender.tree=[]),ej.Ej3DRender.transform.Rotation=i,ej.Ej3DRender.transform.Tilt=s,ej.Ej3DRender.transform.Depth=t,ej.Ej3DRender.transform.PerspectiveAngle=e,ej.EjSvgRender.chartTransform3D.transform(ej.Ej3DRender.transform),ej.Ej3DRender.tree[n._id]=a.build())},view:function(e,t,s,a,r,n,o){if(2==arguments.length){if(null==e)return;var l=i.vector3D(0,0,32767);this.drawBspNode3D(ej.Ej3DRender.tree[t._id],l,e,t)}else{if(null==e)return
;null==ej.Ej3DRender.transform?ej.Ej3DRender.transform=ej.EjSvgRender.chartTransform3D.transform3D(r):ej.Ej3DRender.transform.mViewport=r,ej.Ej3DRender.transform.Rotation=s,ej.Ej3DRender.transform.Tilt=a,ej.Ej3DRender.transform.Depth=o,ej.Ej3DRender.transform.PerspectiveAngle=n,ej.EjSvgRender.chartTransform3D.transform(ej.Ej3DRender.transform);var l=i.vector3D(0,0,32767);this.drawBspNode3D(ej.Ej3DRender.tree[t._id],l,e,t)}},draw3DElement:function(e,t){e.Plane.element?"text"==e.Plane.element.tag||"dataLabel"==e.Plane.element.tag?r.drawText(e.Plane,t):"polyline"==e.Plane.element.tag?r.drawPolyLine(e.Plane,t):"template"==e.Plane.element.tag?r.drawTemplate(e.Plane,t):r.drawLine(e.Plane,t):r.draw(e.Plane,t)},drawBspNode3D:function(e,t,s,a){if(null!=e&&null!=ej.Ej3DRender.transform)for(;;){var n=i.vector3dAND(r.getNormal(ej.EjSvgRender.chartTransform3D.result(ej.Ej3DRender.transform),e.Plane.VectorPoints),t);if(n>e.Plane.D){if(null!=e.Front&&this.drawBspNode3D(e.Front,t,s,a),this.draw3DElement(e,a),null!=e.Back){e=e.Back;continue}}else if(null!=e.Back&&this.drawBspNode3D(e.Back,t,s,a),this.draw3DElement(e,a),null!=e.Front){e=e.Front;continue}break}}},t.BSPTreeBuilder.prototype={EPSILON:5e-4,Polygon:[],add:function(e){return ej.Ej3DRender.Polygons.push(e),ej.Ej3DRender.Polygons.length-1},remove:function(e){ej.Ej3DRender.Polygons.splice(e,1)},clear:function(){ej.Ej3DRender.Polygons=[]},count:function(){return ej.Ej3DRender.Polygons.length},getNext:function(e,t){return e>=t?e-t:e<0?e+t:e},getNodeCount:function(e){return null==e?0:1+this.getNodeCount(e.Back)+this.getNodeCount(e.Front)},vector3DIndexClassification:function(e,t,i){return{index:t,result:i,vector:e,isCuttingBackPoint:!1,cuttingBackPairIndex:null,alreadyCuttedBack:!1,isCuttingFrontPoint:!1,cuttingFrontPairIndex:null,alreadyCuttedFront:!1}},classifyPoint:function(e,i){var s="OnPlane",a=-i.D-t.vector3D.prototype.vector3dAND(e,i.normal);return a>this.EPSILON?s="OnBack":a<-this.EPSILON&&(s="OnFront"),s},classifyPolygon:function(e,i){var s="Unknown",a=i.Points;if(null==a)return s;for(var r=0,n=0,o=0,l=e.normal,d=e.D,h=0,c=a.length;h<c;h++){var u=-d-t.vector3D.prototype.vector3dAND(a[h],l);if(u>this.EPSILON?r++:u<-this.EPSILON?n++:o++,r>0&&n>0)break}return s=o==a.length?"OnPlane":n+o==a.length?"ToRight":r+o==a.length?"ToLeft":"Unknown"},splitPolygon:function(t,s){var a=[],n=[];if(null!=t.Points){for(var o,l,d=[],h=[],c=[],u=t.Points.length,p=0;p<u;p++){var m=t.Points[p],g=t.Points[this.getNext(p+1,u)],f=this.classifyPoint(m,s),_=this.classifyPoint(g,s),v=this.vector3DIndexClassification(m,d.length,f);if(d.push(v),f!=_&&"OnPlane"!=f&&"OnPlane"!=_){var b=i.vector3DMinus(m,g),x=i.vector3DMinus(i.vector3DStarMultiply(s.normal,-s.D),g),y=i.vector3dAND(x,s.normal),w=y/i.vector3dAND(s.normal,b),C=i.vector3DPlus(g,i.vector3DStarMultiply(b,w)),S=this.vector3DIndexClassification(C,d.length,"OnPlane");d.push(S),h.push(S),c.push(S)}else if("OnPlane"==f){var T=t.Points[this.getNext(p-1,u)],R=this.classifyPoint(T,s);if(R==_)continue;if("OnPlane"!=R&&"OnPlane"!=_)h.push(v),c.push(v);else if("OnPlane"==R)switch(_){case"OnBack":h.push(v);break;case"OnFront":c.push(v)}else if("OnPlane"==_)switch(R){case"OnBack":h.push(v);break;case"OnFront":c.push(v)}}}if(0!=c.length||0!=h.length){for(var p=0;p<h.length-1;p+=2){var k=h[p],O=h[p+1];k.CuttingBackPoint=!0,O.CuttingBackPoint=!0,k.CuttingBackPairIndex=O.index,O.CuttingBackPairIndex=k.index}for(var p=0;p<c.length-1;p+=2){var k=c[p],O=c[p+1];k.CuttingFrontPoint=!0,O.CuttingFrontPoint=!0,k.CuttingFrontPairIndex=O.index,O.CuttingFrontPairIndex=k.index}for(var p=0;p<h.length-1;p++){var k=h[p];if(!k.alreadyCuttedBack){var o=this.cutOutBackPolygon(d,k);if(o.length>2){var D=r.polygon3D(o,t);a.push(e.extend({},D))}}}for(var p=0;p<c.length-1;p++){var O=c[p];if(!O.alreadyCuttedFront&&(l=this.cutOutFrontPolygon(d,O),l.length>2)){var I=r.polygon3D(l,t);n.push(e.extend({},I))}}}}else a.push(t),n.push(t);return{BackP:a,FrontP:n}},cutOutFrontPolygon:function(e,t){for(var i=[],s=t;;){s.alreadyCuttedFront=!0,i.push(s.vector);var a=e[s.CuttingFrontPairIndex];if(s.CuttingFrontPoint)if(a.alreadyCuttedFront){var r=e[this.getNext(s.index-1,e.length)],n=e[this.getNext(s.index+1,e.length)];if("OnFront"!=r.result||r.alreadyCuttedFront){if("OnFront"!=n.result||n.alreadyCuttedFront)return i;s=n}else s=r}else s=a;else{var o=e[this.getNext(s.index-1,e.length)],l=e[this.getNext(s.index+1,e.length)];if("OnBack"==o.result||o.alreadyCuttedFront){if("OnBack"==l.result||l.alreadyCuttedFront)return i;s=l}else s=o}}return i},cutOutBackPolygon:function(e,t){for(var i=[],s=t;;){s.alreadyCuttedBack=!0,i.push(s.vector);var a=e[s.CuttingBackPairIndex];if(s.CuttingBackPoint)if(a.alreadyCuttedBack){var r=e[this.getNext(s.index-1,e.length)],n=e[this.getNext(s.index+1,e.length)];if("OnBack"!=r.result||r.alreadyCuttedBack){if("OnBack"!=n.result||n.alreadyCuttedBack)return i;s=n}else s=r}else s=a;else{var r=e[this.getNext(s.index-1,e.length)],n=e[this.getNext(s.index+1,e.length)];if("OnFront"==r.result||r.alreadyCuttedBack){if("OnFront"==n.result||n.alreadyCuttedBack)return i;s=n}else s=r}}return i},build:function(){if(arguments[0]){var e=arguments[0];if(e.length<1)return null;var t={Back:null,Front:null,Plane:null},i=e[0];t.Plane=i;for(var s=[],a=[],r=1,n=e.length;r<n;r++){var o=e[r];if(o!=i){switch(this.classifyPolygon(i,o)){case"OnPlane":case"ToRight":a.push(o);break;case"ToLeft":s.push(o);break;case"Unknown":if(!o.element||"line"!=o.element.tag&&"text"!=o.element.tag){for(var l=this.splitPolygon(o,i),d=0;d<l.BackP.length;d++)l.BackP[d].Name=l.BackP[d].Name+"back",s.push(l.BackP[d]);for(var h=0;h<l.FrontP.length;h++)l.FrontP[h].Name=l.FrontP[h].Name+"front",a.push(l.FrontP[h])}else s.push(o)}}}return s.length>0&&(t.Back=this.build(s)),a.length>0&&(t.Front=this.build(a)),t}return this.build(ej.Ej3DRender.Polygons)}},t.polygon3D.prototype={epsilon:1e-5,normal:{x:0,y:0,z:0},vector:new((new ej.Ej3DRender).vector3D),polygon3D:function(e,t,i,s,a,r,n,o){if(3!=arguments.length){if(2==arguments.length){e=arguments[0],this.calcNormal(e[0],e[1],e[2]),this.vectorPoints=e,this.calcNormal(this.vectorPoints);var l=arguments[1];return l.Normal=this.normal,l.normal=this.normal,l.Points=e,l.VectorPoints=this.vectorPoints,l.IsSplitted=!0,l.d=this.d,l.D=this.d,l}this.calcNormal(e[0],e[1],e[2]),this.vectorPoints=e,this.calcNormal(this.vectorPoints);var d={Tag:"path",Parent:arguments[arguments.length-1]},l={Normal:this.normal,normal:this.normal,Points:e,VectorPoints:this.vectorPoints,Index:i,Tag:t,Name:o||null,StrokeThickness:a,Opacity:r,Fill:n,d:this.d,D:this.d};return 1!=arguments.length&&(l.Element=d),l}this.calcNormal(arguments[0],arguments[1],arguments[2])},createLine:function(e,t,s,a,r,n){var o=e.width,l=[];return l[0]=i.vector3D(t,s,n),l[1]=i.vector3D(t+o,r+o,n),l[2]=i.vector3D(a,r,n),this.line3D(e,l)},createPolyline:function(e,t){if(2==e.length){var s=e[1];e.push(i.vector3D(s.x,s.y,s.z))}return this.polyLine3D(t,e)},polyLine3D:function(e,t){var i=this.polygon3D(t);return i.element=e,i},line3D:function(e,t){var i=this.polygon3D(t);return i.element=e,i},text3D:function(e,t){var i=this.polygon3D(t);return i.element=e,i},createCylinder:function(e,t,s,a,r,o,l,d,h,c,u,p){var m,g,f,_,v=0,b=24,x=360/b,y=Math.PI/180,w=parseFloat((e.z+t.z)/2),C=[],S=[],T=[],R=[],k=t.y-e.y<t.z-e.z?parseFloat((t.y-e.y)/2):parseFloat((t.z-e.z)/2),O=t.x-e.x<t.z-e.z?parseFloat((t.x-e.x)/2):parseFloat((t.z-e.z)/2),D=parseFloat((e.x+t.x)/2),I=parseFloat((e.y+t.y)/2),r=r.toLowerCase();switch(r){case"bar":case"stackingbar":case"stackingbar100":for(b++;b--;)g=parseFloat(I+k*Math.cos(v*x*y)),f=parseFloat(w+k*Math.sin(v*x*y)),S[v]={Y:g,Z:f},T.push(i.vector3D(e.x,S[v].Y,S[v].Z)),R.push(i.vector3D(t.x,S[v].Y,S[v].Z)),v>0&&(_=new Array(i.vector3D(e.x,S[v-1].Y,S[v-1].Z),i.vector3D(t.x,S[v-1].Y,S[v-1].Z),i.vector3D(t.x,S[v].Y,S[v].Z),i.vector3D(e.x,S[v].Y,S[v].Z)),C[v+1]=this.polygon3D(_,s,a,l,0,h,l,"_"+(v+1).toString()+"_"+u,p),n.addVisual(C[v+1])),v++;break;case"column":case"stackingcolumn":case"stackingcolumn100":for(b++;b--;)m=parseFloat(D+O*Math.cos(v*x*y)),f=parseFloat(w+O*Math.sin(v*x*y)),S[v]={X:m,Z:f},T.push(i.vector3D(S[v].X,e.y,S[v].Z)),R.push(i.vector3D(S[v].X,t.y,S[v].Z)),v>0&&(_=new Array(i.vector3D(S[v-1].X,e.y,S[v-1].Z),i.vector3D(S[v-1].X,t.y,S[v-1].Z),i.vector3D(S[v].X,t.y,S[v].Z),i.vector3D(S[v].X,e.y,S[v].Z)),C[v+1]=this.polygon3D(_,s,a,l,0,h,l,"_"+(v+1).toString()+"_"+u,p),n.addVisual(C[v+1])),v++}return C[0]=this.polygon3D(R,s,a,o,0,h,l,"_0_"+u,p),C[1]=this.polygon3D(T,s,a,o,d,h,l,"_1_"+u,p),n.addVisual(C[0]),n.addVisual(C[1]),C},createBox:function(e,t,s,a,r,o,l,d,h,c,u,p){var m=[],g=new Array(i.vector3D(e.x,e.y,e.z),i.vector3D(t.x,e.y,e.z),i.vector3D(t.x,t.y,e.z),i.vector3D(e.x,t.y,e.z)),f=new Array(i.vector3D(e.x,e.y,t.z),i.vector3D(t.x,e.y,t.z),i.vector3D(t.x,t.y,t.z),i.vector3D(e.x,t.y,t.z)),_=new Array(i.vector3D(e.x,e.y,t.z),i.vector3D(t.x,e.y,t.z),i.vector3D(t.x,e.y,e.z),i.vector3D(e.x,e.y,e.z)),v=new Array(i.vector3D(e.x,t.y,t.z),i.vector3D(t.x,t.y,t.z),i.vector3D(t.x,t.y,e.z),i.vector3D(e.x,t.y,e.z)),b=new Array(i.vector3D(e.x,e.y,e.z),i.vector3D(e.x,e.y,t.z),i.vector3D(e.x,t.y,t.z),i.vector3D(e.x,t.y,e.z)),x=new Array(i.vector3D(t.x,e.y,e.z),i.vector3D(t.x,e.y,t.z),i.vector3D(t.x,t.y,t.z),i.vector3D(t.x,t.y,e.z));if(arguments[10])m[0]=this.polygon3D(g,s,a,o,d,h,l,"_0_"+u,p),m[1]=this.polygon3D(f,s,a,o,d,h,l,"_1_"+u,p),m[2]=this.polygon3D(_,s,a,o,d,h,l,"_2_"+u,p),m[3]=this.polygon3D(v,s,a,o,d,h,l,"_3_"+u,p),m[4]=this.polygon3D(b,s,a,o,d,h,l,"_4_"+u,p),m[5]=this.polygon3D(x,s,a,o,d,h,l,"_5_"+u,p);else{var p=arguments[arguments.length-1];m[0]=this.polygon3D(g,s,a,o,d,h,l,"_0_"+a,p),m[1]=this.polygon3D(f,s,a,o,d,h,l,"_1_"+a,p),m[2]=this.polygon3D(_,s,a,o,d,h,l,"_2_"+a,p),m[3]=this.polygon3D(v,s,a,o,d,h,l,"_3_"+a,p),m[4]=this.polygon3D(b,s,a,o,d,h,l,"_4_"+a,p),m[5]=this.polygon3D(x,s,a,o,d,h,l,"_5_"+a,p)}return c?(n.addVisual(m[0]),n.addVisual(m[1]),n.addVisual(m[2]),n.addVisual(m[3]),n.addVisual(m[4]),n.addVisual(m[5])):(n.addVisual(m[5]),n.addVisual(m[4]),n.addVisual(m[0]),n.addVisual(m[1]),n.addVisual(m[2]),n.addVisual(m[3])),m},calcNormal:function(){if(arguments.length>=3){var e=arguments[0],t=arguments[1],s=arguments[2],a=i.vector3DMinus(e,t),r=i.vector3DMinus(s,t),n=i.vector3DMultiply(a,r),o=i.getLength(n);o<this.epsilon&&(o=1),this.normal=i.vector3D(n.x/o,n.y/o,n.z/o),this.d=-(this.normal.x*e.x+this.normal.y*e.y+this.normal.z*e.z),arguments[3]&&(arguments[3].normal=this.normal,arguments.d=this.d)}else{var l=arguments[0];this.calcNormal(l[0],l[1],l[2],arguments[1]);for(var d=3;d<l.length&&this.test();d++)this.calcNormal(l[d],l[0],l[d/2])}},test:function(){return!i.isValid(this.normal)},transform:function(e,t){if(null!=t.Points){for(var a=0;a<t.Points.length;a++)t.VectorPoints[a]=t.Points[a]=s.getMatrixVectorMutiple(e,t.Points[a]);this.calcNormal(t.VectorPoints,t)}else{var r=e*(t.normal*-t.d);t.normal=s.getMatrixVectorAnd(e,t.normal),i.normalize(),t.d=-(t.normal&r)}},getPoint:function(e,t,s,a){if("number"==typeof e){var r=-(s.x*e+s.y*t+a)/s.z;return i.vector3D(e,t,r)}var n=e,o=t,l=i.vector3DMinus(i.vector3DStarMultiply(s,-a),n),d=i.vector3dAND(l,s),h=d/i.vector3dAND(s,o);return i.vector3DPlus(n,i.vector3DStarMultiply(o*h))},getNormal:function(e,t){var a;if(null!=t){a=i.getNormal(s.getMatrixVectorMutiple(e,t[0]),s.getMatrixVectorMutiple(e,t[1]),s.getMatrixVectorMutiple(e,t[2]));for(var r=3;r<t.length&&!i.isValid(a)&&t[r/2];r++){var n=s.getMatrixVectorMutiple(e,t[r]),o=s.getMatrixVectorMutiple(e,t[0]),l=s.getMatrixVectorMutiple(e,t[r/2]);a=i.getNormal(n,o,l)}}else a=s.getMatrixVectorAnd(e),i.normalize();return a},createTextElement:function(e,t,i,s){var a=[],r=e.x,n=e.y,o=t.Width,l=t.Height;return a[0]=this.vector.vector3D(r,n,e.z),a[1]=this.vector.vector3D(r+o,n+l+s,e.z),a[2]=this.vector.vector3D(r+o+i,n+l+s,e.z),this.text3D(t,a)},redraw:function(){},drawPolyLine:function(e,t){var i=ej.Ej3DRender.transform,s=ej.EjSvgRender.utils._getStringBuilder(),a=ej.EjSvgRender.chartTransform3D.toScreen(e.VectorPoints[0],i);s.append("M "+a.x+" "+a.y+" ");for(var r=0;r<e.VectorPoints.length;r++){var n=ej.EjSvgRender.chartTransform3D.toScreen(e.VectorPoints[r],i);s.append("L "+n.x+" "+n.y+" ")}var o=s.toString(),l={id:e.element.id,"stroke-dasharray":e.element.dashArray,"stroke-width":e.element.width,stroke:e.element.stroke,d:o};l.id=l.id.replace(/[^a-zA-Z0-9]/g,""),t.svgRenderer.drawPath(l,e.element.child)},drawLine:function(e,t){var i=ej.Ej3DRender.transform;if(null!=i){var s=ej.EjSvgRender.chartTransform3D.toScreen(e.VectorPoints[0],i),a=ej.EjSvgRender.chartTransform3D.toScreen(e.VectorPoints[2],i),r={id:e.element.id,x1:s.x,y1:s.y,x2:a.x,y2:a.y,"stroke-dasharray":e.element.dashArray,"stroke-width":e.element.width,stroke:e.element.stroke,opacity:e.element.opacity};r.id=r.id.replace(/[^a-zA-Z0-9]/g,""),t.svgRenderer.drawLine(r,e.element.child)}},drawTemplate:function(e,t){var i=e.element,s=ej.Ej3DRender.transform;if(null!=s){var a=ej.EjSvgRender.chartTransform3D.toScreen(e.VectorPoints[0],s);ej.EjSeriesRender.prototype.drawLabelTemplate(i.Label.series,i.Label.series.points[i.Label.pointIndex],i.Label.pointIndex,{X:a.x,Y:a.y},t)}},drawText:function(t,i){var s=t.element,a=ej.Ej3DRender.transform;if(null!=a){var r=ej.EjSvgRender.chartTransform3D.toScreen(t.VectorPoints[0],a),n=r.x,o=r.y;if("text"==s.tag){var l={id:s.id,x:n,y:o,fill:s.font.color,"font-size":s.font.size,"font-family":s.font.fontFamily,"font-style":s.font.fontStyle,"font-weight":s.font.fontWeight,opacity:s.font.opacity,"text-anchor":s.TextAnchor,cursor:"default",transform:s.Angle?"rotate("+s.Angle+","+n+","+o+")":null};i.svgRenderer.drawText(l,t.element.Label.Text,t.element.child,t.element.font)}else{var d,h=s.series,c=h.yAxis&&h.yAxis.labelFormat?h.yAxis.labelFormat:"",u=s.point.text?s.point.text:s.point.y+c.substring(c.indexOf("}")+1),p=ej.EjSvgRender.utils._measureText(u,null,h.marker.dataLabel.font),m=h.marker.dataLabel.margin,g=p.width+m.left+m.right,f=p.height+m.top+m.bottom,_={X:r.x,Y:r.y};if(h.marker.dataLabel.shape)var v=h.marker.dataLabel.shape;else v=h.marker.dataLabel.shape?h.marker.dataLabel.shape:"None";e.each(i.model.symbolShape,function(e){v.toLowerCase()==e.toLowerCase()&&(d=e)});var b=_.X-m.left/2+m.right/2,x=_.Y-m.top/2-f/m.top+m.bottom/2,y=e.inArray(h,i.model.series);ej.EjSeriesRender.prototype.dataLabelSymbol(y,h,s.pointIndex,b,x,g,f,d,i)}}},draw:function(t,s){if(!(null==t.VectorPoints||t.VectorPoints.length<=0)){var a=ej.Ej3DRender.transform,r=ej.EjSvgRender.utils._getStringBuilder(),n=t.Fill;s.svgRenderer.checkColorFormat(n)||(n=s.colorNameToHex(n));var o={Segments:null,StartPoint:null};if(null!=a){o.StartPoint=ej.EjSvgRender.chartTransform3D.toScreen(t.VectorPoints[0],a),r.append("M "+o.StartPoint.x+" "+o.StartPoint.y+" ");for(var l=0;l<t.VectorPoints.length;l++){var d=ej.EjSvgRender.chartTransform3D.toScreen(t.VectorPoints[l],a);r.append("L "+d.x+" "+d.y+" ")}}var h=r.toString(),c="Light",u=2*(Math.abs(i.vector3dAND(t.normal,i.vector3D(0,0,1)))-1),p=2*(Math.abs(i.vector3dAND(t.normal,i.vector3D(0,1,0)))-1);u==2*(Math.abs(i.vector3dAND(t.normal,i.vector3D(1,0,0)))-1)?(c="ZLight",n=this.applyZLight(n,s)):p==u||0!=u&&p<u?(c="XLight",n=this.applyXLight(n,s)):u<0?(c="ZLight",n=this.applyZLight(n,s)):(c="Light",n=n),"none"==s.model.AreaType&&(t.StrokeThickness=0);var m={id:s.svgObject.id+"_"+t.Name,name:c,fill:n,stroke:t.Stroke,"stroke-width":t.StrokeThickness,opacity:t.Opacity,d:h};s.svgRenderer.drawPath(m,t.Element.Parent),s.model.previousID&&s.model.touchCross&&e("#"+m.id).insertAfter(e("#"+s.model.previousID)),s.model.previousID=m.id}},applyXLight:function(e,t){var i=t.svgRenderer.hexToRGB(e);return i.R=parseInt(.7*i.R),i.G=parseInt(.7*i.G),i.B=parseInt(.7*i.B),t.svgRenderer.hexFromRGB(i)},applyZLight:function(e,t){var i=t.svgRenderer.hexToRGB(e);return i.R=parseInt(.9*i.R),i.G=parseInt(.9*i.G),i.B=parseInt(.9*i.B),t.svgRenderer.hexFromRGB(i)},update:function(t,i,s){if(!(null==i.VectorPoints||i.VectorPoints.length<=0)){i.VectorPoints=t;var a=ej.Ej3DRender.transform,r=ej.EjSvgRender.utils._getStringBuilder(),n=(i.Fill,{Segments:null,StartPoint:null});if(null!=a){n.StartPoint=ej.EjSvgRender.chartTransform3D.toScreen(i.VectorPoints[0],a),r.append("M "+n.StartPoint.x+" "+n.StartPoint.y+" ");for(var o=0;o<i.VectorPoints.length;o++){var l=ej.EjSvgRender.chartTransform3D.toScreen(i.VectorPoints[o],a);r.append("L "+l.x+" "+l.y+" ")}}var d=r.toString();if(e(s.chartObj.chart3D).find("#"+s.chartObj.svgObject.id+"_"+i.Name).length>0){var h=e(s.chartObj.chart3D).find("#"+s.chartObj.svgObject.id+"_"+i.Name)[0];s.chartObj.svgRenderer._setAttr(e(h),{d:d})}}}};var t=new ej.Ej3DRender,i=new t.vector3D,s=new t.matrix3D,a=new t.BSPTreeBuilder,r=new t.polygon3D,n=new t.Graphics3D}(jQuery),ej.EjSvgScrollbarRender=function(e,t){this.svgSupport=!!window.SVGSVGElement;var i=jQuery(e).attr("id");if(this.scrollsvgObj=this.scrollsvgObj?this.scrollsvgObj:[],this.svgSupport)this.svgLink="http://www.w3.org/2000/svg",this.scrollsvgObj[t.index]=document.createElementNS(this.svgLink,"svg"),this.scrollsvgObj[t.index].setAttribute("id","scrollbar_"+i+t.index);else{var s=document;this.scrollsvgObj[t.index]=s.createElement("div"),this.scrollsvgObj[t.index].style.position="relative",this.scrollsvgObj[t.index].setAttribute("id","scrollbar_"+i+t.index)}},function(e){ej.EjSvgScrollbarRender.prototype={_initializeScrollbarVariables:function(e){e.offsetLeftX=0,e.rectWidth=e.offsetRightX=e.oldWidth=e.width,e.startX=0,e.endX=0,e.scrollbarLoaded=!1,(e.zoomPosition||e.zoomFactor)&&(e.offsetLeftX=e.zoomPosition*e.width,e.rectWidth=e.zoomFactor*e.width)},_scrollbarUpdate:function(e){var t=parseFloat(e.width),i=t-30;e.offsetLeftX=e.scrollbarLoaded?e.offsetLeftX-15:e.offsetLeftX,e.offsetLeftX=e.offsetLeftX<15?0:e.offsetLeftX;var s=e.offsetLeftX/e.oldWidth*i+15,a=e.rectWidth/e.oldWidth*i,r=a<44;e._diff=r?44-a:0,a=a>44?a:44,e.oldWidth=i;var n=s+a;e.rectWidth=a,e.offsetLeftX=e.startX=s,e.offsetRightX=n-15<=s?n+15:n,e.endX=e.width-e.offsetRightX,e.startX=s<15?15:s,s+a>e.width-15&&(e.offsetLeftX=e.startX=e.width-15-a,e.offsetRightX=e.width-15,e.endX=e.width-e.offsetRightX),e.scrollbarLoaded=!0},_renderScrollbar:function(t){this.scrollsvgObj=this.scrollsvgObj?this.scrollsvgObj:[],e(this.scrollsvgObj[t.index]).empty(),this.scrollsvgObj[t.index]&&e(document).find("[id*= "+this.scrollsvgObj[t.index].id+"]").attr("height","0px");var i=this._id;this.scrollsvgObj[t.index]=this.scrollbarContainer.scrollsvgObj[t.index];var s=parseFloat(t.width),a=s-30;t.offsetLeftX=t.scrollbarLoaded?t.offsetLeftX-15:t.offsetLeftX,t.offsetLeftX=t.offsetLeftX<15?0:t.offsetLeftX;var r=t.offsetLeftX/t.oldWidth*a+15,n=t.rectWidth/t.oldWidth*a,o=n<44;t._diff=o?44-n:0,n=n>44?n:44,t.oldWidth=a,r=r+n>a?a-(n-15):r;var l=r+n;t.rectWidth=n,t.offsetLeftX=t.startX=r,t.offsetRightX=r+n,t.endX=t.width-t.offsetRightX,t.scrollbarLoaded=!0,l=l-15<=r?l+15:l;var d=this.padding||0,h=this.vmlRendering?-5:0;"horizontal"==t.orientation?this.scrollbar=this.renderer.createGroup({id:i+"_scrollbar_"+t.index,transform:"translate("+d+","+h+")"}):this.scrollbar=this.renderer.createGroup({id:i+"_scrollbar_"+t.index,transform:"translate(0,"+t.width+") rotate(270)"});var c=function(e,t,i,s,a,r){var n=r.orientation,o=r.opposed;return"vertical"==n&&!o||o&&"vertical"!=n?"M "+e+" "+a+" v "+(s-a)+" h "+i+" v "+(a-s)+" a "+a+" "+a+" 0 0 0 "+-a+" "+-a+" h "+-(i-2*a)+" a "+a+" "+a+" 0 0 0 "+-4+" "+a+" z":"M "+e+" "+t+" v "+(s-a)+" a "+a+" "+a+" 0 0 0 "+a+" "+a+" h "+(i-2*a)+" a "+a+" "+a+" 0 0 0 "+a+" "+-a+" v "+(a-s)+" z"}(0,0,s,18,4,t),u={id:i+"_scrollbarBackRect_"+t.index,"stroke-width":1,height:18,width:s,"stroke-linejoin":"round",stroke:"#B4B4B4",fill:"#F7F7F7",class:"e-rangeScroll-backRect"};this.vmlRendering?this.renderer.drawRect(u,this.scrollbar):(u.d=c,this.renderer.drawPath(u,this.scrollbar));var p={id:i+"_scrollbarRightRect_"+t.index,"stroke-width":1,x:s-5,height:18,width:5,"stroke-linejoin":"round",stroke:"transparent",fill:"transparent"};this.renderer.drawRect(p,this.scrollbar);var m={id:i+"_scrollbarLeftRect_"+t.index,"stroke-width":1,x:0,height:18,width:5,"stroke-linejoin":"round",stroke:"transparent",fill:"transparent"};this.renderer.drawRect(m,this.scrollbar);var g={id:i+"_scrollbarLeftArrow_"+t.index,"stroke-width":1,stroke:"#999999",d:"M 5 9 L 10 14 L 10 3.5 Z",fill:"#999999",class:"e-rangeScroll-arrow"};this.renderer.drawPath(g,this.scrollbar);var f={id:i+"_scrollbarRightArrow_"+t.index,"stroke-width":1,stroke:"#999999",d:"M "+(s-5)+" 9 L "+(s-10)+" 14 L "+(s-10)+" 3.5 Z",fill:"#999999",class:"e-rangeScroll-arrow"};this.renderer.drawPath(f,this.scrollbar);var _={id:i+"_scrollbarSelect_"+t.index,x:r,y:0,width:n,rx:4,ry:4,height:17,stroke:"#999999","stroke-width":1,fill:"#CECECE",class:"e-rangeScroll-select"};this.renderer.drawRect(_,this.scrollbar),this.centerLine=this.renderer.createGroup({id:i+"_scrollbarCenterLine_"+t.index,transform:"translate("+(r+n/2-7.5)+")"});var v={id:i+"_scrollbarCenterShape_"+t.index,"stroke-width":1,stroke:"#999999",d:"M 0 3.5 L 0 13.5 ZM 5 3.5 L 5 13.5 ZM 10 3.5 L 10 13.5 ZM 15 3.5 L 15 13.5 Z",fill:"#999999",class:"e-rangeScroll-centerShape"};this.renderer.drawPath(v,this.centerLine),this.renderer.append(this.centerLine,this.scrollbar);var b={id:i+"_leftHeaderHideRect_"+t.index,x:r,y:0,width:11,height:17,fill:"transparent",opacity:0,"stroke-width":1,class:"e-rangeScroll-leftRect"};this.renderer.drawRect(b,this.scrollbar);var x={id:i+"_scrollbarLeftHeader_"+t.index,cx:r+8,cy:8.5,r:3,fill:"#999999",stroke:"#999999","stroke-width":1,class:"e-rangeScroll-leftCircle"};this.renderer.drawCircle(x,this.scrollbar);var y={id:i+"_rightHeaderHideRect_"+t.index,x:l-11,y:0,width:11,height:17,fill:"transparent",opacity:0,"stroke-width":1,class:"e-rangeScroll-rightRect"};this.renderer.drawRect(y,this.scrollbar);var w={id:i+"_scrollbarRightHeader_"+t.index,fill:"#999999",cx:l-8,cy:8.5,r:3,stroke:"#999999","stroke-width":1,class:"e-rangeScroll-rightCircle"};this.renderer.drawCircle(w,this.scrollbar),this.renderer.append(this.scrollbar,this.scrollsvgObj[t.index]),"horizontal"==t.orientation?(this.scrollsvgObj[t.index].setAttribute("height",18),this.scrollsvgObj[t.index].setAttribute("width",s)):(this.scrollsvgObj[t.index].setAttribute("height",s),this.scrollsvgObj[t.index].setAttribute("width",18)),this.renderer.append(this.scrollsvgObj[t.index],t.parent);var C=this.vmlRendering?t.y+5:t.y;"ejRangeNavigator"==this.pluginName?this.scrollsvgObj[t.index].setAttribute("style","overflow:visible;position:relative;display:block; top:"+(C-t.y)+"px;left:"+t.x+"px"):this.scrollsvgObj[t.index].setAttribute("style","overflow:visible;position:absolute;display:block; top:"+C+"px;left:"+t.x+"px"),e("#"+i+"_scrollbarSelect_"+t.index).css({cursor:"pointer"}),t.enableResize?(e("#"+i+"_leftHeaderHideRect_"+t.index).css({cursor:"horizontal"==t.orientation?"w-resize":"n-resize"}),e("#"+i+"_rightHeaderHideRect_"+t.index).css({cursor:"horizontal"==t.orientation?"w-resize":"n-resize"}),e("#"+i+"_scrollbarRightHeader_"+t.index).css({cursor:"horizontal"==t.orientation?"w-resize":"n-resize"}),e("#"+i+"_scrollbarLeftHeader_"+t.index).css({cursor:"horizontal"==t.orientation?"w-resize":"n-resize"})):(e("#"+i+"_leftHeaderHideRect_"+t.index).hide(),e("#"+i+"_rightHeaderHideRect_"+t.index).hide(),e("#"+i+"_scrollbarLeftHeader_"+t.index).hide(),e("#"+i+"_scrollbarRightHeader_"+t.index).hide()),this.vmlRendering&&(e("#"+i+"_leftHeaderHideRect_"+t.index).css("visibility","hidden"),e("#"+i+"_rightHeaderHideRect_"+t.index).css("visibility","hidden")),this.scrollbarContainer._bindScrollEvents.call(this,t)},_bindScrollEvents:function(t){function i(t){this._on(e("#"+a+"_scrollbarLeftHeader_"+t.index),"mousedown",this.scrollbarContainer._leftScrollbarDown),this._on(e("#"+a+"_scrollbarRightHeader_"+t.index),"mousedown",this.scrollbarContainer._rightScrollbarDown),this._on(e("#"+a+"_leftHeaderHideRect_"+t.index),"mousedown",this.scrollbarContainer._leftScrollbarDown),this._on(e("#"+a+"_rightHeaderHideRect_"+t.index),"mousedown",this.scrollbarContainer._rightScrollbarDown),this._on(e("#"+a+"_scrollbarLeftArrow_"+t.index),"mousedown",this.scrollbarContainer._leftArrowDown),this._on(e("#"+a+"_scrollbarLeftArrow_"+t.index),"mouseup",this.scrollbarContainer._leftArrowUp),this._on(e("#"+a+"_scrollbarRightArrow_"+t.index),"mousedown",this.scrollbarContainer._rightArrowDown),this._on(e("#"+a+"_scrollbarRightArrow_"+t.index),"mouseup",this.scrollbarContainer._rightArrowUp),this._on(e("#"+a+"_scrollbarSelect_"+t.index),"mousedown",this.scrollbarContainer._scrollSelectRectDown),this._on(e("#"+a+"_scrollbarBackRect_"+t.index),"mousedown",this.scrollbarContainer._scrollBackRectDown),this._on(e("#"+a+"_scrollbarBackRect_"+t.index),"mouseup",this.scrollbarContainer._scrollBackRectUp),this._on(e(window),"mousemove",this.scrollbarContainer._scrollbarMove),this._on(e(window),"mouseup",this.scrollbarContainer._scrollbarUp),this._on(e(this.svgObject),"mousemove",this.scrollbarContainer._scrollbarMove),this._on(e(this.scrollsvgObj[t.index]),"mousemove",this.scrollbarContainer._scrollbarMove),this._on(e(this.scrollsvgObj[t.index]),"mouseup",this.scrollbarContainer._scrollbarUp)}function s(t){this._on(e("#"+a+"_scrollbarLeftHeader_"+t.index),"touchstart",this.scrollbarContainer._leftScrollbarDown),this._on(e("#"+a+"_scrollbarRightHeader_"+t.index),"touchstart",this.scrollbarContainer._rightScrollbarDown),this._on(e("#"+a+"_leftHeaderHideRect_"+t.index),"touchstart",this.scrollbarContainer._leftScrollbarDown),this._on(e("#"+a+"_rightHeaderHideRect_"+t.index),"touchstart",this.scrollbarContainer._rightScrollbarDown),this._on(e("#"+a+"_scrollbarLeftArrow_"+t.index),"touchstart",this.scrollbarContainer._leftArrowDown),this._on(e("#"+a+"_scrollbarLeftArrow_"+t.index),"touchend",this.scrollbarContainer._leftArrowUp),this._on(e("#"+a+"_scrollbarRightArrow_"+t.index),"touchstart",this.scrollbarContainer._rightArrowDown),this._on(e("#"+a+"_scrollbarRightArrow_"+t.index),"touchend",this.scrollbarContainer._rightArrowUp),this._on(e("#"+a+"_scrollbarSelect_"+t.index),"touchstart",this.scrollbarContainer._scrollSelectRectDown),this._on(e("#"+a+"_scrollbarBackRect_"+t.index),"touchstart",this.scrollbarContainer._scrollBackRectDown),this._on(e("#"+a+"_scrollbarBackRect_"+t.index),"touchend",this.scrollbarContainer._scrollBackRectUp),this._on(e(window),"touchmove",this.scrollbarContainer._scrollbarMove),this._on(e(window),"touchend",this.scrollbarContainer._scrollbarUp),this._on(e(this.scrollsvgObj[t.index]),"touchmove",this.scrollbarContainer._scrollbarMove),this._on(e(this.scrollsvgObj[t.index]),"touchend",this.scrollbarContainer._scrollbarUp)}var a=this._id,r=jQuery.uaMatch(navigator.userAgent),n=!!navigator.userAgent.match(/Trident\/7\./);if(i.call(this,t),window.PointerEvent)this._on(e("#"+a+"_scrollbarLeftHeader_"+t.index),"pointerdown",this.scrollbarContainer._leftScrollbarDown),this._on(e("#"+a+"_scrollbarRightHeader_"+t.index),"pointerdown",this.scrollbarContainer._rightScrollbarDown),this._on(e("#"+a+"_leftHeaderHideRect_"+t.index),"pointerdown",this.scrollbarContainer._leftScrollbarDown),this._on(e("#"+a+"_rightHeaderHideRect_"+t.index),"pointerdown",this.scrollbarContainer._rightScrollbarDown),this._on(e("#"+a+"_scrollbarLeftArrow_"+t.index),"pointerdown",this.scrollbarContainer._leftArrowDown),this._on(e("#"+a+"_scrollbarLeftArrow_"+t.index),"pointerup",this.scrollbarContainer._leftArrowUp),this._on(e("#"+a+"_scrollbarRightArrow_"+t.index),"pointerdown",this.scrollbarContainer._rightArrowDown),this._on(e("#"+a+"_scrollbarRightArrow_"+t.index),"pointerup",this.scrollbarContainer._rightArrowUp),this._on(e("#"+a+"_scrollbarSelect_"+t.index),"pointerdown",this.scrollbarContainer._scrollSelectRectDown),this._on(e("#"+a+"_scrollbarBackRect_"+t.index),"pointerdown",this.scrollbarContainer._scrollBackRectDown),this._on(e("#"+a+"_scrollbarBackRect_"+t.index),"pointerup",this.scrollbarContainer._scrollBackRectUp),this._on(e(window),"pointermove",this.scrollbarContainer._scrollbarMove),this._on(e(window),"pointerup",this.scrollbarContainer._scrollbarUp),this._on(e(this.scrollsvgObj[t.index]),"pointermove",this.scrollbarContainer._scrollbarMove),this._on(e(this.scrollsvgObj[t.index]),"pointerup",this.scrollbarContainer._scrollbarUp),e(this.scrollsvgObj[t.index]).css("touch-action","none");else if(window.navigator.msPointerEnabled&&!n)this._on(e("#"+a+"_scrollbarLeftHeader_"+t.index),"MSPointerDown",this.scrollbarContainer._leftScrollbarDown),this._on(e("#"+a+"_scrollbarRightHeader_"+t.index),"MSPointerDown",this.scrollbarContainer._rightScrollbarDown),this._on(e("#"+a+"_leftHeaderHideRect_"+t.index),"MSPointerDown",this.scrollbarContainer._leftScrollbarDown),this._on(e("#"+a+"_rightHeaderHideRect_"+t.index),"MSPointerDown",this.scrollbarContainer._rightScrollbarDown),this._on(e("#"+a+"_scrollbarLeftArrow_"+t.index),"MSPointerDown",this.scrollbarContainer._leftArrowDown),this._on(e("#"+a+"_scrollbarLeftArrow_"+t.index),"MSPointerUp",this.scrollbarContainer._leftArrowUp),this._on(e("#"+a+"_scrollbarRightArrow_"+t.index),"MSPointerDown",this.scrollbarContainer._rightArrowDown),this._on(e("#"+a+"_scrollbarRightArrow_"+t.index),"MSPointerUp",this.scrollbarContainer._rightArrowUp),this._on(e("#"+a+"_scrollbarSelect_"+t.index),"MSPointerDown",this.scrollbarContainer._scrollSelectRectDown),this._on(e("#"+a+"_scrollbarBackRect_"+t.index),"MSPointerDown",this.scrollbarContainer._scrollBackRectDown),this._on(e("#"+a+"_scrollbarBackRect_"+t.index),"MSPointerUp",this.scrollbarContainer._scrollBackRectUp),this._on(e(window),"MSPointerMove",this.scrollbarContainer._scrollbarMove),this._on(e(window),"MSPointerUp",this.scrollbarContainer._scrollbarUp),this._on(e(this.scrollsvgObj[t.index]),"MSPointerMove",this.scrollbarContainer._scrollbarMove),this._on(e(this.scrollsvgObj[t.index]),"MSPointerUp",this.scrollbarContainer._scrollbarUp),e(this.scrollsvgObj[t.index]).css("-ms-touch-action","none");else if("chrome"==r.browser.toLowerCase())s.call(this,t);else if(this.isDevice()){var o=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"),l=window.location!=window.parent.location,d=l?window.parent.navigator.userAgent.toLowerCase():window.navigator.userAgent.toLowerCase(),h=/mobile|tablet|android|kindle/i.test(d);ej.isMobile()&&this.isWindows()||!h&&ej.isMobile()&&o?(i.call(this),e(this.scrollsvgObj[t.index]).css("-ms-touch-action","none")):s.call(this,t)}var c="mozilla"==r.browser.toLowerCase()?n?"mousewheel":"DOMMouseScroll":"mousewheel";this._on(e(this.scrollsvgObj[t.index]),c,this.scrollbarContainer._scrollMouseWheel),n&&e(this.scrollsvgObj[t.index]).css("touch-action","none")},_setScrollPosition:function(t,i,s){var a=this._id,r=t+s.rectWidth/2-7.5;e("#"+a+"_scrollbarLeftHeader_"+s.index).attr("cx",t+8),e("#"+a+"_leftHeaderHideRect_"+s.index).attr("x",t),e("#"+a+"_scrollbarRightHeader_"+s.index).attr("cx",i-8),e("#"+a+"_rightHeaderHideRect_"+s.index).attr("x",i-5),e("#"+a+"_scrollbarSelect_"+s.index).attr("x",t),e("#"+a+"_scrollbarSelect_"+s.index).attr("width",s.rectWidth),e("#"+a+"_scrollbarCenterLine_"+s.index).attr("transform","translate("+r+")"),"ejRangeNavigator"==this.pluginName&&(e("#"+a+"_scrollbarLeftHeader_"+s.index).css("left",t),e("#"+a+"_leftHeaderHideRect_"+s.index).css("left",t),e("#"+a+"_scrollbarRightHeader_"+s.index).css("left",i-8),e("#"+a+"_rightHeaderHideRect_"+s.index).css("left",i-5),e("#"+a+"_scrollbarSelect_"+s.index).css("left",t),e("#"+a+"_scrollbarCenterLine_"+s.index).css("left",r))},_calculateScrollLeftMove:function(e,t){t._startX-e>15?(t.startX=t._startX-e,t.offsetLeftX=t.startX,t._offsetRightX=t.startX+t.rectWidth,t.offsetRightX=t._offsetRightX,t.endX=t.width-t.offsetRightX):(t.startX=15,t._offsetLeftX=t.offsetLeftX,t.offsetLeftX=t.startX,t._offsetRightX=t.startX+t.rectWidth,t.offsetRightX=t._offsetRightX,t.endX=t.width-t.offsetRightX)},_calculateScrollRightMove:function(e,t){
t&&t._offsetRightX+Math.abs(e)<t.width-15?(t._startX=t.startX+Math.abs(e),t.offsetLeftX=t._startX,t.offsetRightX=t._offsetRightX+Math.abs(e),t.endX=t.width-t.offsetRightX):(t._ofsetRightX=t.offsetRightX,t.offsetRightX=t.width-15,t._startX=t.offsetRightX-t.rectWidth,t.offsetLeftX=t._startX,t.endX=t.width-t.offsetRightX)},_calculateRange:function(t,i,s){var a,r,n,o,l,d,h;a=(t-15)/(s.width-30-s._diff),n=s.scrollRange,r=(s.rectWidth-s._diff)/(s.width-30-s._diff),s.isRTL?(l=n.max-a*n.delta,o=l-r*n.delta):(o=n.min+a*n.delta,l=o+r*n.delta),"datetime"==s.valueType?(d=s.startDateTime,h=s.endDateTime,s.startDateTime=this.startDateTime=o=new Date(o),s.endDateTime=this.endDateTime=l=new Date(l)):(d=parseInt(s.startValue),h=parseInt(s.endValue),s.startValue=this.startValue=o=Math.ceil(o),s.endValue=this.endValue=l=Math.ceil(l)),s._scrollChanged=!0;var c=e.extend({},ej.EjSvgRender.commonChartEventArgs);return c.data={zoomPosition:a,zoomFactor:r,oldRange:{start:d,end:h},newRange:{start:o,end:l}},s.zoomPosition=a,s.zoomFactor=r,c},_calculateScrollPosition:function(t,i){var s,a,r,n,o,l,d,h,c;if(this.leftScrollbarClicked&&i.enableResize){t=t>=15?t:15,t=t>=15&&t<i.offsetRightX-15?t:i.offsetRightX-15,s=(t-36)/(i.width-30),a=i.rectWidth/(i.width-30),h=i.valueType.toLowerCase(),r=i.scrollRange,i.isRTL?(o=r.max-s*r.delta,o=o<r.max?o:r.max,"datetime"==h?(l=i.startDateTime,d=i.endDateTime,i.endDateTime=this.endDateTime=o=new Date(o),n=i.startDateTime):(l=parseInt(i.startValue),d=parseInt(i.endValue),i.endValue=this.endValue=o=Math.ceil(o),n=Math.ceil(i.startValue))):(n=r.min+s*r.delta,n=n>r.min?n:r.min,"datetime"==h?(l=i.startDateTime,d=i.endDateTime,i.startDateTime=this.startDateTime=n=new Date(n),o=i.endDateTime):(l=parseInt(i.startValue),d=parseInt(i.endValue),i.startValue=this.startValue=n=Math.ceil(n),o=Math.ceil(i.endValue)));var u=e.extend({},ej.EjSvgRender.commonChartEventArgs);return u.data={zoomPosition:s,zoomFactor:a,oldRange:{start:l,end:d},newRange:{start:n,end:o}},i._scrollChanged=!0,i.zoomPosition=s,i.zoomFactor=a,u}if(this.rightScrollbarClicked&&i.enableResize){r=i.scrollRange,a=i.rectWidth/(i.width-30),s=i.zoomPosition,h=i.valueType.toLowerCase(),i.isRTL?(s=(t-36)/(i.width-30),n=r.max-s*r.delta,"datetime"==h?(l=i.startDateTime,d=i.endDateTime,i.startDateTime=this.startDateTime=n=new Date(n),o=i.endDateTime):(l=parseInt(i.startValue),d=parseInt(i.endValue),i.startValue=this.startValue=n=Math.floor(n),o=Math.ceil(i.endValue))):(c=r.min+s*r.delta,o=c+a*r.delta,"datetime"==h?(l=i.startDateTime,d=i.endDateTime,i.endDateTime=this.endDateTime=o=new Date(o),n=i.startDateTime):(l=parseInt(i.startValue),d=parseInt(i.endValue),i.endValue=this.endValue=o=Math.floor(o),n=Math.ceil(i.startValue)));var u=e.extend({},ej.EjSvgRender.commonChartEventArgs);return u.data={zoomPosition:i.zoomPosition?i.zoomPosition:0,zoomFactor:a,oldRange:{start:l,end:d},newRange:{start:n,end:o}},i._scrollChanged=!0,i.zoomFactor=a,u}if(i&&this.scrollRectClicked){var p=this.mouseDownPos-t;if(p>0&&i.offsetLeftX>=0)return this.scrollbarContainer._calculateScrollLeftMove.call(this,p,i),this.scrollbarContainer._calculateRange.call(this,i.startX,i.offsetRightX,i);if(p<0)return this.scrollbarContainer._calculateScrollRightMove.call(this,p,i),this.scrollbarContainer._calculateRange.call(this,i._startX,i.offsetRightX,i)}},_scrollbarMove:function(t){if(this.moveClientX=ej.isNullOrUndefined(t.clientX)?null==t.originalEvent.clientX?t.originalEvent.touches[0].clientX:t.originalEvent.clientX:t.clientX,this.moveClientX!=this.downClientX){var i,s,a=this.model.padding||0,r=jQuery.uaMatch(navigator.userAgent),n=this.scrollbarContainer._doScrollIndex.call(this,t);if(!n)return 0;this.lastIndex=n.index,i=!this.vmlRendering&&"[object TouchEvent]"!==t.originalEvent.toString()&&"msie"!=r.browser.toLowerCase()||this.vmlRendering?("horizontal"==n.orientation?this.calMousePosition(t).X-n.x:n.width-(this.calMousePosition(t).Y-n.y))-a:("horizontal"==n.orientation?this.calTouchPosition(t).X-n.x:n.width-(this.calTouchPosition(t).Y-n.y))-a,this.mouseX=i;var o=this._id;if(this.leftScrollbarClicked&&n.enableResize&&(n&&(i>34||i>23)&&i<n.offsetRightX-34?(n.rectWidth=n.width-(n.endX+i-8),s=i-8+n.rectWidth/2-7.5,e("#"+o+"_scrollbarLeftHeader_"+n.index).attr("cx",i),e("#"+o+"_leftHeaderHideRect_"+n.index).attr("x",i-7.5),e("#"+o+"_scrollbarSelect_"+n.index).attr("x",i-8),e("#"+o+"_scrollbarSelect_"+n.index).attr("width",n.rectWidth),e("#"+o+"_scrollbarCenterLine_"+n.index).attr("transform","translate("+s+")"),"ejRangeNavigator"==this.pluginName&&(e("#"+o+"_scrollbarLeftHeader_"+n.index).css("left",i),e("#"+o+"_leftHeaderHideRect_"+n.index).css("left",i-7.5),e("#"+o+"_scrollbarSelect_"+n.index).css("left",i),e("#"+o+"_scrollbarSelect_"+n.index).css("width",n.rectWidth),e("#"+o+"_scrollbarCenterLine_"+n.index).css("left",s)),n.offsetLeftX=n.startX=i-8,this.scrollbarContainer._scrollStartArgs.call(this,n),this.scrollbarContainer._scrollChangeArgs.call(this,n),n._diff=0):i>n.offsetRightX-34&&(this.rectWidth=42.89984101748814)),this.rightScrollbarClicked&&n.enableResize&&n&&(i<=n.width-34||i<=n.width-23)&&i>n.offsetLeftX+34&&(n.rectWidth=i-n.offsetLeftX+8,s=n.offsetLeftX+n.rectWidth/2-7.5,e("#"+o+"_scrollbarRightHeader_"+n.index).attr("cx",i),e("#"+o+"_rightHeaderHideRect_"+n.index).attr("x",i-2.5),e("#"+o+"_scrollbarSelect_"+n.index).attr("width",n.rectWidth),e("#"+o+"_scrollbarCenterLine_"+n.index).attr("transform","translate("+s+")"),"ejRangeNavigator"==this.pluginName&&(e("#"+o+"_scrollbarRightHeader_"+n.index).css("left",i),e("#"+o+"_rightHeaderHideRect_"+n.index).css("left",i-2.5),e("#"+o+"_scrollbarSelect_"+n.index).css("width",n.rectWidth),e("#"+o+"_scrollbarCenterLine_"+n.index).css("left",s)),n.offsetRightX=i+8,n.endX=n.width-i-8,this.scrollbarContainer._scrollStartArgs.call(this,n),this.scrollbarContainer._scrollChangeArgs.call(this,n),n._diff=0),this.scrollRectClicked){var l=this.mouseDownPos-i;if(n._startX=ej.isNullOrUndefined(n._startX)?n.startX:n._startX,n&&l>0&&n.offsetLeftX>=0&&(this.scrollbarContainer._calculateScrollLeftMove.call(this,l,n),this.scrollbarContainer._setScrollPosition.call(this,n.startX,n.offsetRightX,n),(n.offsetLeftX>15||n.offsetLeftX!=n._offsetLeftX)&&(this.scrollbarContainer._scrollStartArgs.call(this,n),this.scrollbarContainer._scrollChangeArgs.call(this,n))),n&&l<0&&(ej.isNullOrUndefined(n._offsetRightX)&&(this.scrollbarContainer._scrollSelectRectDown.call(this,t),this.scrollbarContainer._scrollbarMove.call(this,t)),this.scrollbarContainer._calculateScrollRightMove.call(this,l,n),this.scrollbarContainer._setScrollPosition.call(this,n._startX,n._startX+n.rectWidth,n),(n.offsetRightX<n.width-15||n.offsetRightX!=n._ofsetRightX)&&(this.scrollbarContainer._scrollStartArgs.call(this,n),!1===this.model.enableDeferredUpdate||n.isZooming||""!=this.model.scrollChanged))){var d,h,c,u,p=this.scrollbarContainer._calculateRange.call(this,n._startX,n._startX+n.rectWidth,n),m=p.data.oldRange,g=p.data.newRange;"datetime"==n.valueType.toLowerCase()?(d=Date.parse(m.start),c=Date.parse(g.start),h=Date.parse(m.end),u=Date.parse(g.end)):(d=m.start,c=g.start,h=m.end,u=g.end),""==this.model.scrollChanged||d==c&&h==u||(p=this.scrollbarContainer._args.call(this,n,p),this._trigger("scrollChanged",p)),this.model.enableDeferredUpdate||(this.scrollUpdate?this.scrollUpdate=!1:this.scrollbarContainer._appendScrollRange.call(this,n))}}}this.offsetX=i},_scrollbarUp:function(t){var i=this.scrollbarContainer._doScrollIndex.call(this,t);e("[id^="+this._id+"_scrollbarSelect_]").attr("class","e-rangeScroll-select"),this.lastIndex=null;var s=this.scrollbarContainer._calculateScrollPosition.call(this,this.mouseX,i),a=this.model.enableDeferredUpdate;if(s){var r,n,o,l,d=s.data.oldRange,h=s.data.newRange;if("datetime"==i.valueType.toLowerCase()?(r=Date.parse(d.start),o=Date.parse(h.start),n=Date.parse(d.end),l=Date.parse(h.end)):(r=d.start,o=h.start,n=d.end,l=h.end),r!=o||n!=l||this.scrollRectClicked&&!a||a||this.leftScrollbarClicked||this.rightScrollbarClicked){var c=navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&navigator.vendor.toLowerCase().indexOf("google")>-1;(!c||c&&(this.leftScrollbarClicked||this.rightScrollbarClicked)&&this.downClientX!=this.moveClientX||this.scrollRectClicked||this.leftArrowClicked||this.rightArrowClicked)&&(!this.leftScrollbarClicked&&!this.rightScrollbarClicked||(this.leftScrollbarClicked||this.rightScrollbarClicked)&&Math.ceil(i.rectWidth)!=Math.ceil(this.rectOldWidth)&&(Math.abs(i.rectWidth-i.rectOldWidth)>4||!i.rectOldWidth))&&(ej.isNullOrUndefined(i._previousStart)||i._previousStart!=o||i._previousEnd!=l)&&(s=this.scrollbarContainer._args.call(this,i,s),this._trigger("scrollEnd",s),i._scrollStarted=!1,i._previousStart=o,i._previousEnd=l,i.rectOldWidth=i.rectWidth,this.scrollUpdate?this.scrollUpdate=!1:this.scrollbarContainer._appendScrollRange.call(this,i))}i.release=!0,i.clicked=!1}this._scrollEnd=!1,this.leftScrollbarClicked=!1,this.rightScrollbarClicked=!1,this.scrollRectClicked=!1,this.leftArrowClicked=!1,this.rightArrowClicked=!1,this.scrollbarBackRectClicked=!1},_leftScrollbarDown:function(e){e.preventDefault(),this.leftScrollbarClicked=!0,this.downClientX=ej.isNullOrUndefined(e.clientX)?e.originalEvent.touches[0].clientX:e.clientX},_rightScrollbarDown:function(e){e.preventDefault(),this.rightScrollbarClicked=!0,this.downClientX=ej.isNullOrUndefined(e.clientX)?e.originalEvent.touches[0].clientX:e.clientX},_scrollSelectRectDown:function(t){var i=this.scrollbarContainer._doScrollIndex.call(this,t);e("#"+this._id+"_scrollbarSelect_"+i.index).attr("class","e-rangeScroll-select e-rangeScroll-select-hover"),t.preventDefault();var s=jQuery.uaMatch(navigator.userAgent),a=this.model.padding||0,i=this.scrollbarContainer._doScrollIndex.call(this,t);if(!this.vmlRendering&&"[object TouchEvent]"!==t.originalEvent.toString()&&"msie"!=s.browser.toLowerCase()||this.vmlRendering)var r=("horizontal"==i.orientation?this.calMousePosition(t).X-i.x:i.width-(this.calMousePosition(t).Y-i.y))-a;else var r=("horizontal"==i.orientation?this.calTouchPosition(t).X-i.x:i.width-(this.calTouchPosition(t).Y-i.y))-a;this.mouseDownPos=r,i._startX=i.startX=i.offsetLeftX,i._offsetRightX=i.offsetRightX,i.clicked=!0,i.release=!1,this.scrollRectClicked=!0},_scrollMouseWheel:function(e){e.preventDefault();var t=this.scrollbarContainer._doScrollIndex.call(this,e),i=!!navigator.userAgent.match(/Trident\/7\./),s=e.originalEvent.wheelDelta,a=jQuery.uaMatch(navigator.userAgent),r="mozilla"==a.browser.toLowerCase()?i?s/120>0?1:-1:-e.originalEvent.detail/3>0?1:-1:s/120>0?1:-1,n=Math.max(1/ej.EjSvgRender.utils._minMax(t.zoomFactor,0,1),1),o=Math.max(n+.25*r,1);this.scrollbarContainer.doMouseWheelZoom.call(this,o,.5,t)},_scrollStartArgs:function(t){if(t._scrollStarted=!0,""!=this.model.scrollStart&&!this._scrollEnd){var i=e.extend({},ej.EjSvgRender.commonChartEventArgs);t.isZooming?i.data={axis:this.model._axes[t.index],currentRange:this.model._axes[t.index].visibleRange}:i.data={startRange:"datetime"==t.valueType?t.startDateTime:t.startValue,endRange:"datetime"==t.valueType?t.endDateTime:t.endValue},this._trigger("scrollStart",i),this._scrollEnd=!0}},_scrollChangeArgs:function(e){if(!1===this.model.enableDeferredUpdate||e.isZooming||""!=this.model.scrollChanged){var t,i,s,a,r=this.scrollbarContainer._calculateRange.call(this,e.offsetLeftX,e.offsetRightX,e),n=r.data.oldRange,o=r.data.newRange;"datetime"==e.valueType.toLowerCase()?(t=Date.parse(n.start),s=Date.parse(o.start),i=Date.parse(n.end),a=Date.parse(o.end)):(t=n.start,s=o.start,i=n.end,a=o.end),""==this.model.scrollChanged||t==s&&i==a||(r=this.scrollbarContainer._args.call(this,e,r),this._trigger("scrollChanged",r)),this.model.enableDeferredUpdate||(this.scrollUpdate?this.scrollUpdate=!1:this.scrollbarContainer._appendScrollRange.call(this,e))}},_scrollEndArgs:function(e,t){var i=this.scrollbarContainer._calculateRange.call(this,e,t.offsetRightX,t);if(i&&t._scrollStarted){var s,a,r,n,o=i.data.oldRange,l=i.data.newRange;"datetime"==t.valueType.toLowerCase()?(s=Date.parse(o.start),r=Date.parse(l.start),a=Date.parse(o.end),n=Date.parse(l.end)):(s=o.start,r=l.start,a=o.end,n=l.end),(s!=r||a!=n||this.leftScrollbarClicked||this.rightScrollbarClicked)&&(i=this.scrollbarContainer._args.call(this,t,i),this._trigger("scrollEnd",i)),t._scrollStarted=!1,this.scrollUpdate?this.scrollUpdate=!1:this.scrollbarContainer._appendScrollRange.call(this,t)}},_args:function(e,t){if(e.isZooming){var i=this.model._axes[e.index],s=t.data;s.axis=i,s.newRange=i.visibleRange,s.oldRange=i.previousRange}return e.isVirtual&&(t.data.axis=this.model._axes[e.index],delete t.data.zoomFactor,delete t.data.zoomPosition),t},doMouseWheelZoom:function(e,t,i){if(e>=1){var s=this.scrollbarContainer.calZoomFactors(e,t,i.zoomFactor,i.zoomPosition);i.zoomPosition!=s.zoomMPosition&&s.zoomMPosition+i.zoomFactor<=1&&i.zoomPosition>=0&&(s.zoomMPosition+i.zoomFactor>=1&&(s.zoomMPosition=1-i.zoomFactor),s.zoomMPosition<0&&(s.zoomMPosition=0),i.zoomPosition=s.zoomMPosition,i.startX=i.zoomPosition*(i.width-30-i._diff)+15,i.startX=i.startX+i.rectWidth+5>i.width?i.width-i.rectWidth-15:i.startX,i.offsetLeftX=i.startX,i._offsetRightX=i.startX+i.rectWidth,i._offsetRightX>i.width-15?(i.offsetRightX=i.width-15,i.startX=i.offsetRightX-i.rectWidth,i.offsetLeftX=i.startX):i.offsetRightX=i._offsetRightX,i.endX=i.width-i.offsetRightX,this.scrollbarContainer._setScrollPosition.call(this,i.startX,i.offsetRightX,i),this.scrollbarContainer._calculateMouseWheelRange.call(this,i.startX,i.offsetRightX,i))}return!1},_calculateMouseWheelRange:function(t,i,s){var a,r,n,o,l;s.zoomFactor=s.rectWidth/(s.width-30),s.zoomPosition=(t-15)/(s.width-30-s._diff),a=s.scrollRange,s.isRTL?(n=a.max-s.zoomPosition*a.delta,r=n-s.zoomFactor*a.delta):(r=a.min+s.zoomPosition*a.delta,n=r+s.zoomFactor*a.delta),"datetime"==s.valueType?(o=s.startDateTime,l=s.endDateTime,s.startDateTime=this.startDateTime=r=new Date(r),s.endDateTime=this.endDateTime=n=new Date(n)):(o=parseInt(s.startValue),l=parseInt(s.endValue),s.startValue=this.startValue=r=Math.ceil(r),s.endValue=this.endValue=n=Math.ceil(n));var d=e.extend({},ej.EjSvgRender.commonChartEventArgs);d.data={zoomPosition:s.zoomPosition,zoomFactor:s.zoomFactor,oldRange:{start:o,end:l},newRange:{start:r,end:n}},s._scrollChanged=!0,s._scrollStarted=!1;var h,c,u,p,m=d.data.oldRange,g=d.data.newRange;"datetime"==s.valueType.toLowerCase()?(h=Date.parse(m.start),u=Date.parse(g.start),c=Date.parse(m.end),p=Date.parse(g.end)):(h=m.start,u=g.start,c=m.end,p=g.end),(h!=u||c!=p||s.isZooming)&&(this.scrollbarContainer._scrollStartArgs.call(this,s),d=this.scrollbarContainer._args.call(this,s,d),this._trigger("scrollEnd",d),this.scrollUpdate?this.scrollUpdate=!1:this.scrollbarContainer._appendScrollRange.call(this,s),this._scrollEnd=!1)},calZoomFactors:function(e,t,i,s){var a,r;return 1==e?(a=1,r=0):(a=ej.EjSvgRender.utils._minMax(1/e,0,1),r=s+(i-a)*t),{zoomMFactor:a,zoomMPosition:r}},_leftArrowDown:function(e){this.leftArrowClicked=!0;var t=this.scrollbarContainer._doScrollIndex.call(this,e);t._startX=t.startX=t.offsetLeftX,t._offsetRightX=t.offsetRightX,t.leftIncrement=5;var i=this;t.interval=setInterval(function(){i.scrollbarContainer.leftArrowRecursive.call(i,t)},50)},_leftArrowUp:function(e){this.leftArrowClicked=!1;var t=this.scrollbarContainer._doScrollIndex.call(this,e);this.scrollbarContainer.leftArrowRecursive.call(this,t)},leftArrowRecursive:function(e){if(this.leftArrowClicked){this._id;this.scrollbarContainer._calculateScrollLeftMove.call(this,e.leftIncrement,e),e._scrollStarted=!0,e.startX>15&&this.scrollbarContainer._scrollEndArgs.call(this,e.startX,e),this.scrollbarContainer._setScrollPosition.call(this,e.startX,e.offsetRightX,e),e.leftIncrement+=5}else clearInterval(e.interval),e.leftIncrement=0},_rightArrowDown:function(e){this.rightArrowClicked=!0;var t=this.scrollbarContainer._doScrollIndex.call(this,e);t._startX=t.startX=t.offsetLeftX,t._offsetRightX=t.offsetRightX,t.rightIncrement=-5;var i=this;t.interval=setInterval(function(){i.scrollbarContainer.rightArrowRecursive.call(i,t)},50)},_rightArrowUp:function(e){this.rightArrowClicked=!1;var t=this.scrollbarContainer._doScrollIndex.call(this,e);this.scrollbarContainer.rightArrowRecursive.call(this,t)},rightArrowRecursive:function(e){if(this.rightArrowClicked){this._id;this.scrollbarContainer._calculateScrollRightMove.call(this,e.rightIncrement,e),e._scrollStarted=!0,e.offsetRightX<e.width-15&&this.scrollbarContainer._scrollEndArgs.call(this,e._startX,e),this.scrollbarContainer._setScrollPosition.call(this,e._startX,e.offsetRightX,e),e.rightIncrement-=5}else clearInterval(e.interval),e.rightIncrement=0},_scrollBackRectDown:function(e){var t=jQuery.uaMatch(navigator.userAgent),i=this.model.padding||0,s=this.scrollbarContainer._doScrollIndex.call(this,e);if(!this.vmlRendering&&"[object TouchEvent]"!==e.originalEvent.toString()&&"msie"!=t.browser.toLowerCase()||this.vmlRendering)var a=("horizontal"==s.orientation?this.calMousePosition(e).X-s.x:s.width-(this.calMousePosition(e).Y-s.y))-i;else var a=("horizontal"==s.orientation?this.calTouchPosition(e).X-s.x:s.width-(this.calTouchPosition(e).Y-s.y))-i;this.mouseDownPos=a,this.scrollbarBackRectClicked=!0;var r=this;this.scrollbarContainer._scrollStartArgs.call(this,s);var n=setInterval(function(){r.scrollbarContainer.scrollBackRectRecursive.call(r,s),this.scrollbarBackRectClicked||clearInterval(n)},50)},_scrollBackRectUp:function(e){this.scrollbarBackRectClicked=!1;var t=this.scrollbarContainer._doScrollIndex.call(this,e);this.scrollbarContainer.scrollBackRectRecursive.call(this,t)},_doScrollIndex:function(e){var t=this._id+"_scrollbar_",i=e.target.parentNode&&e.target.parentNode.id?e.target.parentNode.id:"",s=i.indexOf(t)>-1?parseInt(i.substr(t.length)):NaN;return ej.isNullOrUndefined(this.lastIndex)||isNaN(this.lastIndex)||!this.model.scrollObj[this.lastIndex].release&&this.model.scrollObj[this.lastIndex].clicked&&(s=this.lastIndex),this.lastIndex=ej.isNullOrUndefined(this.lastIndex)?s:this.lastIndex,ej.isNullOrUndefined(this.model.scrollObj[s])?this.model.scrollObj[this.lastIndex]:this.model.scrollObj[s]},scrollBackRectRecursive:function(e){if(this.scrollbarBackRectClicked){var t=.1*(e.width-30);e._startX=e.startX=e.offsetLeftX,e._offsetRightX=e.offsetRightX,this.mouseDownPos<e.startX?(t=t<e.startX?t:e.startX-16,this.scrollbarContainer._calculateScrollLeftMove.call(this,t,e),e._scrollStarted=!0,this.scrollbarContainer._scrollEndArgs.call(this,e.startX,e),this.scrollbarContainer._setScrollPosition.call(this,e.startX,e.offsetRightX,e)):this.mouseDownPos>e.offsetRightX?(t=-1*(t<e.endX?t:e.endX-16),this.scrollbarContainer._calculateScrollRightMove.call(this,t,e),e._scrollStarted=!0,this.scrollbarContainer._scrollEndArgs.call(this,e._startX,e),this.scrollbarContainer._setScrollPosition.call(this,e._startX,e.offsetRightX,e)):e._scrollStarted=!1}else e._scrollStarted=!1},_appendScrollRange:function(e){if(this.scrollbarUpdate=!0,"ejRangeNavigator"==this.pluginName)this.renderNavigator();else{var t=e.index,i=this.model._axes[t];!e.isZooming||i.zoomFactor==e.zoomFactor&&i.zoomPosition==e.zoomPosition||(i.zoomFactor=e.zoomFactor,i.zoomPosition=e.zoomPosition,this.redraw(!0))}this.scrollbarUpdate=!1}}}(jQuery),window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i,s){"use strict";t.DataManager=function(i,s,a){if(!(this instanceof t.DataManager))return new t.DataManager(i,s,a);i||(i=[]),"string"==typeof(a=a||i.adaptor)&&(a=new t[a]);var r=[],n=this;return i instanceof Array?r={json:i,offline:!0}:"object"==typeof i?e.isPlainObject(i)?(i.json||(i.json=[]),i.table&&(i.json=this._getJsonFromElement(i.table,i.headerOption)),r={url:i.url,insertUrl:i.insertUrl,removeUrl:i.removeUrl,updateUrl:i.updateUrl,crudUrl:i.crudUrl,batchUrl:i.batchUrl,json:i.json,headers:i.headers,accept:i.accept,data:i.data,async:i.async,timeTillExpiration:i.timeTillExpiration,cachingPageSize:i.cachingPageSize,enableCaching:i.enableCaching,requestType:i.requestType,key:i.key,crossDomain:i.crossDomain,antiForgery:i.antiForgery,jsonp:i.jsonp,dataType:i.dataType,enableAjaxCache:i.enableAjaxCache,offline:void 0!==i.offline?i.offline:!("remoteSaveAdaptor"==i.adaptor||i.adaptor instanceof t.remoteSaveAdaptor)&&!i.url,requiresFormat:i.requiresFormat}):(i.jquery||k(i))&&(r={json:this._getJsonFromElement(i),offline:!0,table:i}):"string"==typeof i&&(r={url:i,offline:!1,dataType:"json",json:[]}),void 0!==r.requiresFormat||t.support.cors||(r.requiresFormat=!!P(r.crossDomain)||r.crossDomain),r.antiForgery&&this.antiForgeryToken(),void 0===r.dataType&&(r.dataType="json"),this.dataSource=r,this.defaultQuery=s,r.url&&r.offline&&!r.json.length?(this.isDataAvailable=!1,this.adaptor=a||new t.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(s||t.Query()).done(function(e){n.dataSource.offline=!0,n.isDataAvailable=!0,r.json=e.result,n.adaptor=new t.JsonAdaptor})):this.adaptor=r.offline?new t.JsonAdaptor:new t.ODataAdaptor,!r.jsonp&&this.adaptor instanceof t.ODataAdaptor&&(r.jsonp="callback"),this.adaptor=a||this.adaptor,r.enableCaching&&(this.adaptor=new t.CacheAdaptor(this.adaptor,r.timeTillExpiration,r.cachingPageSize)),this},t.DataManager.prototype={setDefaultQuery:function(e){this.defaultQuery=e},executeQuery:function(i,s,a,r){"function"==typeof i&&(r=a,a=s,s=i,i=null),i||(i=this.defaultQuery),i instanceof t.Query||M("DataManager - executeQuery() : A query is required to execute");var n=e.Deferred();n.then(s,a,r);var o={query:i};if(this.dataSource.offline||void 0==this.dataSource.url)t.isNullOrUndefined(this.dataSource.async)||0!=this.dataSource.async?y(function(){this._localQueryProcess(i,o,n)},this):this._localQueryProcess(i,o,n);else{var l=this.adaptor.processQuery(this,i);t.isNullOrUndefined(l.url)?y(function(){o=this._getDeferedArgs(i,l,o),n.resolveWith(this,[o])},this):this._makeRequest(l,n,o,i)}return n.promise()},_localQueryProcess:function(e,t,i){var s=this.executeLocal(e);t=this._getDeferedArgs(e,s,t),i.resolveWith(this,[t])},_getDeferedArgs:function(e,t,i){return e._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=D(e._fromTable,i.result,this),i.getKnockoutModel=I(i.result),i},executeLocal:function(i){this.defaultQuery||i instanceof t.Query||M("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||M("DataManager - executeLocal() : Json data is required to execute"),i=i||this.defaultQuery;var s=this.adaptor.processQuery(this,i);if(i._subQuery){var r=i._subQuery._fromTable,n=i._subQuery._lookup,o=i._requiresCount?s.result:s;n&&n instanceof Array&&a(i._subQuery._fKey,r,o,n,i._subQuery._key);for(var l=0;l<o.length;l++)o[l][r]instanceof Array&&(o[l]=e.extend({},o[l]),o[l][r]=this.adaptor.processResponse(i._subQuery.using(t.DataManager(o[l][r].slice(0))).executeLocal(),this,i))}return this.adaptor.processResponse(s,this,i)},_makeRequest:function(i,s,r,n){var o=!!n._subQuerySelector,l=E(function(e){r.error=e,s.rejectWith(this,[r])},this),d=E(function(e,t,i,a,l,d,h){o||(r.xhr=i,r.count=parseInt(t,10),r.result=e,r.request=a,r.aggregates=d,r.getTableModel=D(n._fromTable,e,this),r.getKnockoutModel=I(e),r.actual=l,r.virtualSelectRecords=h,s.resolveWith(this,[r]))},this),h=E(function(t,i){var s=e.Deferred(),h={parent:r};n._subQuery._isChild=!0;var c=this.adaptor.processQuery(this,n._subQuery,t?this.adaptor.processResponse(t):i),u=this._makeRequest(c,s,h,n._subQuery);return o||s.then(function(e){t&&(a(n._subQuery._fKey,n._subQuery._fromTable,t,e,n._subQuery._key),d(t))},l),u},this),c=A(function(e,i,s,a){-1==s.getResponseHeader("Content-Type").indexOf("xml")&&t.dateParse&&(e=t.parseJSON(e));var r=this.adaptor.processResponse(e,this,n,s,a),l=0,c=null,u=e.virtualSelectRecords;if(n._requiresCount&&(l=r.count,c=r.aggregates,r=r.result),!n._subQuery)return void d(r,l,s,a,e,c,u);o||h(r)},this),u=e.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!!t.isNullOrUndefined(this.dataSource.enableAjaxCache)||this.dataSource.enableAjaxCache,beforeSend:E(this._beforeSend,this),processData:!1,success:c,error:l},i);if("async"in this.dataSource&&(u.async=this.dataSource.async),u=e.ajax(u),o){var p=n._subQuerySelector.call(this,{query:n._subQuery,parent:n});p&&p.length?(u=e.when(u,h(null,p)),u.then(A(function(e,t,i){var s=this.adaptor.processResponse(e[0],this,n,e[2],i[0]),r=0;n._requiresCount&&(r=s.count,s=s.result);var l=this.adaptor.processResponse(t[0],this,n._subQuery,t[2],i[1]),r=0;n._subQuery._requiresCount&&(r=l.count,l=l.result),a(n._subQuery._fKey,n._subQuery._fromTable,s,l,n._subQuery._key),o=!1,d(s,r,e[2])},this),l)):o=!1}return u},_beforeSend:function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,s=this.dataSource.headers,a=0;s&&a<s.length;a++){i=[];for(var r in s[a])i.push(r),e.setRequestHeader(r,s[a][r])}},saveChanges:function(i,s,a,r){a instanceof t.Query&&(r=a,a=null);var n={url:a,key:s||this.dataSource.key},o=this.adaptor.batchRequest(this,i,n,r);if(this.dataSource.offline)return o;var l=e.Deferred();return e.ajax(e.extend({beforeSend:E(this._beforeSend,this),success:A(function(e,t,a,r){l.resolveWith(this,[this.adaptor.processResponse(e,this,null,a,r,i,s)])},this),error:function(e){l.rejectWith(this,[{error:e}])}},o)),l.promise()},insert:function(i,s,a){i=n.replacer(i,!0),s instanceof t.Query&&(a=s,s=null);var r=this.adaptor.insert(this,i,s,a);if(this.dataSource.offline)return r;var o=e.Deferred();return e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:E(this._beforeSend,this),success:A(function(e,i,s,a){try{t.isNullOrUndefined(e)?e=[]:n.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(n.parseJson(e),this,null,s,a),o.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){o.rejectWith(this,[{error:e,dataManager:this}])}},r)),o.promise()},antiForgeryToken:function(){if(t.isNullOrUndefined(e("input[name='_ejRequestVerifyToken']").val())){t.buildTag("input","","",{type:"hidden",name:"_ejRequestVerifyToken",value:t.getGuid()}).appendTo("body")}else e("input[name='_ejRequestVerifyToken']").val(t.getGuid());return t.cookie.set("_ejRequestVerifyToken",e("input[name='_ejRequestVerifyToken']").val()),{name:"_ejRequestVerifyToken",value:e("input[name='_ejRequestVerifyToken']").val()}},remove:function(i,s,a,r){"object"==typeof s&&(s=s[i]),a instanceof t.Query&&(r=a,a=null);var o=this.adaptor.remove(this,i,s,a,r);if(this.dataSource.offline)return o;var l=e.Deferred();return e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:E(this._beforeSend,this),success:A(function(e,i,s,a){try{t.isNullOrUndefined(e)?e=[]:n.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(n.parseJson(e),this,null,s,a),l.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){l.rejectWith(this,[{error:e,dataManager:this}])}},o)),l.promise()},update:function(i,s,a,r){s=n.replacer(s,!0),a instanceof t.Query&&(r=a,a=null);var o=this.adaptor.update(this,i,s,a,r);if(this.dataSource.offline)return o;var l=e.Deferred();return e.ajax(e.extend({contentType:"application/json; charset=utf-8",beforeSend:E(this._beforeSend,this),success:A(function(e,i,s,a){try{t.isNullOrUndefined(e)?e=[]:n.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(n.parseJson(e),this,null,s,a),l.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){l.rejectWith(this,[{error:e,dataManager:this}])}},o)),l.promise()},_getJsonFromElement:function(i){"string"==typeof i&&(i=e(e(i).html())),i=i.jquery?i[0]:i;var s=i.tagName.toLowerCase();return"table"!==s&&M("ej.DataManager : Unsupported htmlElement : "+s),t.parseTable(i)}};var a=function(e,i,s,a,r){var n,o,l={};for(a.result&&(a=a.result),a.GROUPGUID&&M("ej.DataManager: Do not have support Grouping in hierarchy"),n=0;n<a.length;n++){var d=t.getObject(e,a[n]);o=l[d]||(l[d]=[]),o.push(a[n])}for(n=0;n<s.length;n++)s[n][i]=l[t.getObject(r||e,s[n])]},r={accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},n={parseJson:function(e){var t=typeof e;return"string"===t?e=JSON.parse(e,n.jsonReviver):e instanceof Array?n.iterateAndReviveArray(e):"object"===t&&n.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?n.iterateAndReviveJson(e[t]):"string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?e[t]=n.parseJson(e[t]):e[t]=n.jsonReviver("",e[t])},iterateAndReviveJson:function(e){var t;for(var i in e)i.startsWith("__")||(t=e[i],"object"==typeof t?t instanceof Array?n.iterateAndReviveArray(t):n.iterateAndReviveJson(t):e[i]=n.jsonReviver(i,t))},jsonReviver:function(e,i){var s=i,a=/[\-,\/,\,.,:,]+/;if("string"==typeof i){var r=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(r)return t.parseDateInUTC?n.isValidDate(r[0]):n.replacer(new Date(parseInt(r[1])));if(t.dateParse?/^(?:(\d{4}\-\d\d\-\d\d)|(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?)$/.test(i):/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var o=s.split(/[^0-9]/);/^(\d{4}\-\d\d\-\d\d)$/.test(i)?i=new Date(o[t.dateFormat.split(a).indexOf("yyyy")],o[t.dateFormat.split(a).indexOf("MM")]-1,o[t.dateFormat.split(a).indexOf("dd")]):(i=t.parseDateInUTC?n.isValidDate(i):n.replacer(new Date(i)),isNaN(i)&&(i=n.replacer(new Date(o[0],o[1]-1,o[2],o[3],o[4],o[5]))))}}return i},isValidDate:function(e){var t=e;if("string"==typeof t&&0==t.indexOf("/Date(")&&(e=t.replace(/\d+/,function(e){var t=6e4*new Date(parseInt(e)).getTimezoneOffset(),i=parseInt(e)+t;return n.replacer(new Date(parseInt(i)))})),"string"==typeof e){e=e.replace("/Date(",function(){return""}),e=e.replace(")/",function(){return""});return new Date(e)instanceof Date?new Date(e):e}return e},isJson:function(e){return"string"==typeof e[0]?e:t.parseJSON(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e,i){return t.isPlainObject(e)?n.jsonReplacer(e,i):e instanceof Array?n.arrayReplacer(e):e instanceof Date?n.jsonReplacer({val:e},i).val:e},jsonReplacer:function(e,i){var s;for(var a in e)if((s=e[a])instanceof Date){var r=60*t.serverTimezoneOffset*60*1e3*(t.isNullOrUndefined(i)||!1===i?1:-1);e[a]=new Date(+s+r)}return e},arrayReplacer:function(e){for(var i=0;i<e.length;i++)t.isPlainObject(e[i])?e[i]=n.jsonReplacer(e[i]):e[i]instanceof Date&&(e[i]=n.jsonReplacer({date:e[i]}).date);return e}};t.isJSON=n.isJson,t.parseJSON=n.parseJson,t.dateParse=!0,t.dateFormat="yyyy-MM-dd",t.isGUID=n.isGuid,t.Query=function(e){return this instanceof t.Query?(this.queries=[],this._key="",this._fKey="","string"==typeof e?this._fromTable=e||"":e&&e instanceof Array&&(this._lookup=e),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new t.Query(e)},t.Query.prototype={key:function(e){return"string"==typeof e&&(this._key=e),this},using:function(e){return e instanceof t.DataManager?(this.dataManagar=e,this):M("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(e,i,s,a){return e=e||this.dataManagar,e&&e instanceof t.DataManager?e.executeQuery(this,i,s,a):M("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(e){return e=e||this.dataManagar,e&&e instanceof t.DataManager?e.executeLocal(this):M("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){
var e=new t.Query;return e.queries=this.queries.slice(0),e._key=this._key,e._isChild=this._isChild,e.dataManagar=this.dataManager,e._fromTable=this._fromTable,e._params=this._params.slice(0),e._expands=this._expands.slice(0),e._sortedColumns=this._sortedColumns.slice(0),e._groupedColumns=this._groupedColumns.slice(0),e._subQuerySelector=this._subQuerySelector,e._subQuery=this._subQuery,e._fKey=this._fKey,e._requiresCount=this._requiresCount,e},from:function(e){return"string"==typeof e&&(this._fromTable=e),this},addParams:function(e,i){return"function"==typeof i||t.isPlainObject(i)?"function"==typeof i&&this._params.push({key:e,fn:i}):this._params.push({key:e,value:i}),this},expand:function(e){return this._expands="string"==typeof e?[].slice.call(arguments,0):e.slice(0),this},where:function(e,i,s,a,r){i=(i||t.FilterOperators.equal).toLowerCase();var n=null;return"string"==typeof e?n=new t.Predicate(e,i,s,a,r):e instanceof t.Predicate?n=e:M("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:n}),this},search:function(e,i,s,a,r){i&&"boolean"!=typeof i?"string"==typeof i&&(i=[i]):(i=[],a=i),"boolean"==typeof s&&(a=s,s=null),s=s||t.FilterOperators.contains,s.length<3&&(s=t.data.operatorSymbols[s]);var n=t.data.fnOperators[s]||t.data.fnOperators.processSymbols(s);return this.queries.push({fn:"onSearch",e:{fieldNames:i,operator:s,searchKey:e,ignoreCase:a,ignoreAccent:r,comparer:n}}),this},sortBy:function(e,i,s){var a,r,n=t.sortOrder.Ascending;if("string"==typeof e&&e.toLowerCase().endsWith(" desc")&&(e=e.replace(/ desc$/i,""),i=t.sortOrder.Descending),e instanceof Array){for(var l=0;l<e.length;l++)this.sortBy(e[l],i,s);return this}if("boolean"==typeof i?i=i?t.sortOrder.Descending:t.sortOrder.Ascending:"function"==typeof i&&(n="custom"),i&&"string"!=typeof i||(n=i?i.toLowerCase():t.sortOrder.Ascending,i=t.pvt.fnSort(i)),s){a=o(this.queries,"onSortBy");for(var l=0;l<a.length;l++)if("string"==typeof(r=a[l].e.fieldName)){if(r===e)return this}else if(r instanceof Array)for(var d=0;d<r.length;d++)if(r[d]===e||e.toLowerCase()===r[d]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:i,direction:n}}),this},sortByDesc:function(e){return this.sortBy(e,t.sortOrder.Descending)},group:function(e,t){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,fn:t}}),this},page:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},range:function(e,t){return"number"==typeof e&&"number"==typeof t||M("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},take:function(e){return"number"!=typeof e&&M("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:e}}),this},skip:function(e){return"number"!=typeof e&&M("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:e}}),this},select:function(e){return"string"==typeof e&&(e=[].slice.call(arguments,0)),e instanceof Array||M("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},hierarchy:function(e,i){return e&&e instanceof t.Query||M("Query() - hierarchy : query must be instance of ej.Query"),"function"==typeof i&&(this._subQuerySelector=i),this._subQuery=e,this},foreignKey:function(e){return"string"==typeof e&&(this._fKey=e),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(e,t){this.queries.push({fn:"onAggregates",e:{field:t,type:e}})}},t.Adaptor=function(e){this.dataSource=e,this.pvt={},this.init.apply(this,[].slice.call(arguments,1))},t.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",antiForgery:"antiForgery"},init:function(){},extend:function(t){var i=function(t){this.dataSource=t,this.options&&(this.options=e.extend({},this.options)),this.init.apply(this,[].slice.call(arguments,0)),this.pvt={}};i.prototype=new this.type,i.prototype.type=i;var s=i.prototype.base={};for(var a in t)i.prototype[a]&&(s[a]=i.prototype[a]);return e.extend(!0,i.prototype,t),i},processQuery:function(e,t){},processResponse:function(e,t,i,s){return e.d?e.d:e},convertToQueryString:function(t,i,s){return e.param(t)},type:t.Adaptor},t.UrlAdaptor=(new t.Adaptor).extend({processQuery:function(e,t,i){var s,a,r=o(t.queries,"onSortBy"),n=o(t.queries,"onGroup"),c=o(t.queries,"onWhere"),u=o(t.queries,"onSearch"),p=o(t.queries,"onAggregates"),m=l(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),g=t._params,f=e.dataSource.url,_=null,v=this.options,b={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]};m.onPage?(s=m.onPage,a=h(s.pageIndex,t),_=h(s.pageSize,t),a=(a-1)*_):m.onRange&&(s=m.onRange,a=s.start,_=s.end-s.start);for(var x=0;x<r.length;x++)s=h(r[x].e.fieldName,t),b.sorted.push(d(this,"onEachSort",{name:s,direction:r[x].e.direction},t));i&&(s=this.getFiltersFrom(i,t))&&b.filters.push(d(this,"onEachWhere",s.toJSON(),t));for(var x=0;x<c.length;x++){b.filters.push(d(this,"onEachWhere",c[x].e.toJSON(),t));for(var y in b.filters[x])P(b[y])&&delete b[y]}for(var x=0;x<u.length;x++)s=u[x].e,b.searches.push(d(this,"onEachSearch",{fields:s.fieldNames,operator:s.operator,key:s.searchKey,ignoreCase:s.ignoreCase},t));for(var x=0;x<n.length;x++)b.grouped.push(h(n[x].e.fieldName,t));for(var x=0;x<p.length;x++)s=p[x].e,b.aggregates.push({type:s.type,field:h(s.field,t)});var w={};w[v.from]=t._fromTable,v.expand&&(w[v.expand]=t._expands),w[v.select]=m.onSelect?d(this,"onSelect",h(m.onSelect.fieldNames,t),t):"",w[v.count]=t._requiresCount?d(this,"onCount",t._requiresCount,t):"",w[v.search]=b.searches.length?d(this,"onSearch",b.searches,t):"",w[v.skip]=m.onSkip?d(this,"onSkip",h(m.onSkip.nos,t),t):"",w[v.take]=m.onTake?d(this,"onTake",h(m.onTake.nos,t),t):"",w[v.antiForgery]=e.dataSource.antiForgery?e.antiForgeryToken().value:"",w[v.where]=b.filters.length||b.searches.length?d(this,"onWhere",b.filters,t):"",w[v.sortBy]=b.sorted.length?d(this,"onSortBy",b.sorted,t):"",w[v.group]=b.grouped.length?d(this,"onGroup",b.grouped,t):"",w[v.aggregates]=b.aggregates.length?d(this,"onAggregates",b.aggregates,t):"",w.param=[],d(this,"addParams",{dm:e,query:t,params:g,reqParams:w});for(var y in w)(P(w[y])||""===w[y]||0===w[y].length||"params"===y)&&delete w[y];v.skip in w&&v.take in w||null===_||(w[v.skip]=d(this,"onSkip",a,t),w[v.take]=d(this,"onTake",_,t));var C=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(w),url:f,ejPvtData:C,type:"POST",contentType:"application/json; charset=utf-8"}:(s=this.convertToQueryString(w,t,e),s=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+s,{type:"GET",url:s.length?f.replace(/\/*$/,s):f,ejPvtData:C})},convertToQueryString:function(t,i,s){return s.dataSource.url&&-1!==s.dataSource.url.indexOf("?")?e.param(t):"?"+e.param(t)},processResponse:function(e,i,s,a,r,n){var o=r.ejPvtData||{},l=e.groupDs;if(a&&a.getResponseHeader("Content-Type")&&-1!=a.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return s._requiresCount?{result:[],count:0}:[];var d=JSON.parse(r.data);if(d&&"batch"===d.action&&e.added)return n.added=e.added,n;if(e.d&&(e=e.d),o&&o.aggregates&&o.aggregates.length){var h,c=o.aggregates,u={},p={};"count"in e&&(u.count=e.count),e.result&&(u.result=e.result),e.aggregate&&(e=e.aggregate);for(var m=0;m<c.length;m++)(h=t.aggregates[c[m].type])&&(p[c[m].field+" - "+c[m].type]=h(e,c[m].field));u.aggregates=p,e=u}if(o&&o.groups&&o.groups.length){var g=o.groups,u={};"count"in e&&(u.count=e.count),e.aggregates&&(u.aggregates=e.aggregates),e.result&&(e=e.result);for(var m=0;m<g.length;m++){var f=C(g[m],s.queries);t.isNullOrUndefined(l)||(l=t.group(l,g[m],null,f)),e=t.group(e,g[m],o.aggregates,f,null,l)}return void 0!=u.count?u.result=e:u=e,u}return e},onGroup:function(e){this.pvt.groups=e},onAggregates:function(e){this.pvt.aggregates=e},batchRequest:function(e,t,i,s){var a={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:a}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a)}},beforeSend:function(e,t){},insert:function(e,t,i,s){var a={value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:a}),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(a)}},remove:function(e,t,i,s,a){var r={key:i,keyColumn:t,table:s,action:"remove",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return a&&this.addParams({dm:e,query:a,params:a._params,reqParams:r}),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(r)}},update:function(e,t,i,s,a){var r={value:i,action:"update",keyColumn:t,key:i[t],table:s,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return a&&this.addParams({dm:e,query:a,params:a._params,reqParams:r}),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(r)}},getFiltersFrom:function(e,i){e instanceof Array&&e.length||M("ej.SubQuery: Array of key values required");var s,a=i._fKey,r=a,n=i._key,o=[],l="object"!=typeof e[0];"object"!=typeof e[0]&&(r=null);for(var d=0;d<e.length;d++)s=l?e[d]:t.pvt.getObject(n||r,e[d]),o.push(new t.Predicate(a,"==",s));return t.Predicate.or(o)},addParams:function(e){var t=e.dm,i=e.query,s=e.params,a=e.reqParams;a.params={};for(var r,n=0;r=s[n];n++)a[r.key]&&M("ej.Query: Custom Param is conflicting other request arguments"),a[r.key]=r.value,r.fn&&(a[r.key]=r.fn.call(i,r.key,i,t)),a.params[r.key]=a[r.key]}}),t.WebMethodAdaptor=(new t.UrlAdaptor).extend({processQuery:function(e,i,s){var a=t.UrlAdaptor.prototype.processQuery(e,i,s),r=t.parseJSON(a.data),n={};return n.value=r,d(this,"addParams",{dm:e,query:i,params:i._params,reqParams:n}),{data:JSON.stringify(n),url:a.url,ejPvtData:a.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(e){var t=e.dm,i=e.query,s=e.params,a=e.reqParams;a.params={};for(var r,n=0;r=s[n];n++){a[r.key]&&M("ej.Query: Custom Param is conflicting other request arguments");var o=r.key,l=r.value;r.fn&&(l=r.fn.call(i,r.key,i,t)),a[o]=l,a.params[o]=a[o]}}}),t.CacheAdaptor=(new t.UrlAdaptor).extend({init:function(e,i,s){t.isNullOrUndefined(e)||(this.cacheAdaptor=e),this.pageSize=s,this.guidId=t.getGuid("cacheAdaptor");var a={keys:[],results:[]};window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify(a));var r=this.guidId;t.isNullOrUndefined(i)||setInterval(function(){for(var e=t.parseJSON(window.localStorage.getItem(r)),s=[],a=0;a<e.results.length;a++)e.results[a].timeStamp=new Date-new Date(e.results[a].timeStamp),new Date-new Date(e.results[a].timeStamp)>i&&s.push(a);for(var a=0;a<s.length;a++)e.results.splice(s[a],1),e.keys.splice(s[a],1);window.localStorage.removeItem(r),window.localStorage.setItem(r,JSON.stringify(e))},i)},generateKey:function(e,t){var i=o(t.queries,"onSortBy"),s=o(t.queries,"onGroup"),a=o(t.queries,"onWhere"),r=o(t.queries,"onSearch"),n=(o(t.queries,"onPage"),l(t.queries,["onSelect","onPage","onSkip","onTake","onRange"])),d=(t._params,e);n.onPage&&(d+=n.onPage.pageIndex),i.forEach(function(e){d+=e.e.direction+e.e.fieldName}),s.forEach(function(e){d+=e.e.fieldName}),r.forEach(function(e){d+=e.e.searchKey});for(var h=0;h<a.length;h++){var c=a[h];if(c.e.isComplex){var u=t.clone();u.queries=[];for(var p=0;p<c.e.predicates.length;p++)u.queries.push({fn:"onWhere",e:c.e.predicates[p],filter:t.queries.filter});d+=c.e.condition+this.generateKey(e,u)}else d+=c.e.field+c.e.operator+c.e.value}return d},processQuery:function(e,i,s){var a,r=this.generateKey(e.dataSource.url,i);window.localStorage&&(a=t.parseJSON(window.localStorage.getItem(this.guidId)));var n=a?a.results[a.keys.indexOf(r)]:null;return null==n||this._crudAction||this._insertAction?(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):n},processResponse:function(i,s,a,r,n,o){if(this._insertAction||n&&this.cacheAdaptor.options.batch&&n.url.endsWith(this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase())return this.cacheAdaptor.processResponse(i,s,a,r,n,o);var i=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0)),l=this.generateKey(s.dataSource.url,a),d={};window.localStorage&&(d=t.parseJSON(window.localStorage.getItem(this.guidId)));var h=e.inArray(l,d.keys);for(-1!=h&&(d.results.splice(h,1),d.keys.splice(h,1)),d.results[d.keys.push(l)-1]={keys:l,result:i.result,timeStamp:new Date,count:i.count};d.results.length>this.pageSize;)d.results.splice(0,1),d.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(d)),i},update:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.update(e,t,i,s)},insert:function(e,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(e,t,i)},remove:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},batchRequest:function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}});var o=function(e,t){return e.filter(function(e){return e.fn===t})||[]},l=function(e,t){for(var i=e.filter(function(e){return-1!==t.indexOf(e.fn)}),s={},a=0;a<i.length;a++)s[i[a].fn]||(s[i[a].fn]=i[a].e);return s},d=function(e,t,i,s){if(e[t]){var a=e[t](i,s);P(a)||(i=a)}return i};t.ODataAdaptor=(new t.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(e,t){return e.isComplex?this.onComplexPredicate(e,t):this.onPredicate(e,t)},_typeStringQuery:function(e,i,s,a,r){return-1!=s.indexOf("'")&&(s=s.replace(new RegExp(/'/g),"''")),/[ !@@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(s)&&(s=encodeURIComponent(s)),s="'"+s+"'",i&&(a="cast("+a+", 'Edm.String')"),t.isGUID(s)&&(r="guid"),e.ignoreCase&&(r||(a="tolower("+a+")"),s=s.toLowerCase()),{val:s,guid:r,field:a}},onPredicate:function(e,i,s){var a,r,o="",l=e.value,d=typeof l,h=this._p(e.field);if(l instanceof Date&&(l="datetime'"+n.replacer(l).toJSON()+"'"),"string"===d){var c=this._typeStringQuery(e,s,l,h,r);l=c.val,h=c.field,r=c.guid}if(a=t.data.odBiOperator[e.operator],""!=e.anyCondition&&a)return o+=l.table,o+="/"+e.anyCondition,o+="(d:d/",o+=h,o+=a,o+=l.value,o+=")";if("in"==e.operator||"notin"==e.operator){o+="(";for(var u=0;u<l.length;u++){if(l[u]instanceof Date&&(l[u]="datetime'"+n.replacer(l[u]).toJSON()+"'"),"string"==typeof l[u]){var c=this._typeStringQuery(e,s,l[u],h,r);l[u]=c.val,h=c.field,r=c.guid}o+=h,o+=a,o+=l[u],u!=l.length-1&&(o+="in"==e.operator?" or ":" and ")}return o+=")"}if(a)return this.onOperation(o,a,h,l,r);if(!(a=t.data.odUniOperator[e.operator])||"string"!==d)return"";if("substringof"===a){var p=l;l=h,h=p}if(o+=a+"(",o+=h+",",r&&(o+=r),o+=l+")","notcontains"==e.operator&&(o+=" eq false"),""!=e.anyCondition&&a){var m;return m+=l.table,m+="/"+e.anyCondition,m+="(d:d/",o+=o,m+=")"}return o},onOperation:function(e,t,i,s,a){return e+=i,e+=t,a&&(e+=a),e+s},onComplexPredicate:function(e,t){for(var i=[],s=0;s<e.predicates.length;s++)i.push("("+this.onEachWhere(e.predicates[s],t)+")");return i.join(" "+e.condition+" ")},onWhere:function(e){return this.pvt.searches&&e.push(this.onEachWhere(this.pvt.searches,null,!0)),e.join(" and ")},onEachSearch:function(e){0===e.fields.length&&M("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.searches||[],s=0;s<e.fields.length;s++)i.push(new t.Predicate(e.fields[s],e.operator,e.key,e.ignoreCase));this.pvt.searches=i},onSearch:function(e){return this.pvt.searches=t.Predicate.or(this.pvt.searches),""},onEachSort:function(e){var t=[];if(e.name instanceof Array)for(var i=0;i<e.name.length;i++)t.push(this._p(e.name[i]));else t.push(this._p(e.name)+("descending"===e.direction?" desc":""));return t.join(",")},onSortBy:function(e){return e.reverse().join(",")},onGroup:function(e){return this.pvt.groups=e,""},onSelect:function(e){for(var t=0;t<e.length;t++)e[t]=this._p(e[t]);return e.join(",")},onAggregates:function(e){return this.pvt.aggregates=e,""},onCount:function(e){return!0===e?"allpages":""},beforeSend:function(e,t,i){i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()&&(t.setRequestHeader("Accept",r.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")),e.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(i,s,a,r,o,l){if(!t.isNullOrUndefined(i.d)){var d=a&&a._requiresCount?i.d.results:i.d;if(!t.isNullOrUndefined(d))for(var h=0;h<d.length;h++)!t.isNullOrUndefined(d[h].__metadata)&&delete d[h].__metadata}var c=o&&o.ejPvtData;if(r&&r.getResponseHeader("Content-Type")&&-1!=r.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return a._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){var u,p,m=r.getResponseHeader("Content-Type");if(m=m.substring(m.indexOf("=batchresponse")+1),i=i.split(m),i.length<2)return;i=i[1];var g=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i);i.replace(g[0],"");var f=g[1];i=i.split(f);for(var h=i.length;h>-1;h--)/\bContent-ID:/i.test(i[h])&&/\bHTTP.+201/.test(i[h])&&(u=parseInt(/\bContent-ID: (\d+)/i.exec(i[h])[1]),l.added[u]&&(p=n.parseJson(/^\{.+\}/m.exec(i[h])[0]),e.extend(l.added[u],this.processResponse(p))));return l}var _=r&&r.getResponseHeader("DataServiceVersion"),v=null,b={};if(_=_&&parseInt(_,10)||2,a&&a._requiresCount&&((i.__count||i["odata.count"])&&(v=i.__count||i["odata.count"]),i.d&&(i=i.d),(i.__count||i["odata.count"])&&(v=i.__count||i["odata.count"])),3===_&&i.value&&(i=i.value),i.d&&(i=i.d),_<3&&i.results&&(i=i.results),c&&c.aggregates&&c.aggregates.length){for(var x,y=c.aggregates,w={},h=0;h<y.length;h++)(x=t.aggregates[y[h].type])&&(w[y[h].field+" - "+y[h].type]=x(i,y[h].field));b=w}if(c&&c.groups&&c.groups.length)for(var S=c.groups,h=0;h<S.length;h++){var T=C(S[h],a.queries);i=t.group(i,S[h],c.aggregates,T)}return P(v)?i:{result:i,count:v,aggregates:b}},convertToQueryString:function(e,t,i){var s=[],a=e.table||"";delete e.table,i.dataSource.requiresFormat&&(e.$format="json");for(var r in e)s.push(r+"="+e[r]);return s=s.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!a?s:s.length?a+"?"+s:a||""},insert:function(e,t,i){return{url:e.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(e,i,s,a){return"string"==typeof s?{type:"DELETE",url:t.isGUID(s)?e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s+")":e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"('"+s+"')"}:{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s+")"}},update:function(e,i,s,a){var r;return r="string"==typeof s[i]?t.isGUID(s[i])?e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s[i]+")":e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"('"+s[i]+"')":e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s[i]+")",{type:"PUT",url:r,data:JSON.stringify(s),accept:this.options.accept}},batchRequest:function(e,i,s){var a=s.guid=t.getGuid(r.batchPre),n=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),o={url:s.url,key:s.key,cid:1,cSet:t.getGuid(r.changeSet)},l="--"+a+"\n";return l+="Content-Type: multipart/mixed; boundary="+o.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(i.added,o),l+=this.generateUpdateRequest(i.changed,o),l+=this.generateDeleteRequest(i.deleted,o),l+=o.cSet+"--\n",l+="--"+a+"--",{type:"POST",url:n,contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:l}},generateDeleteRequest:function(e,t){if(!e)return"";for(var i,s="",a=0;a<e.length;a++)s+="\n"+t.cSet+"\n",s+=r.changeSetContent+"\n\n",s+="DELETE ",i="string"==typeof e[a][t.key]?"'"+e[a][t.key]+"'":e[a][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+r.accept+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=r.batchChangeSetContentType+"\n";return s+"\n"},generateInsertRequest:function(e,t){if(!e)return"";for(var i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=r.changeSetContent+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+r.accept+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=r.batchChangeSetContentType+"\n\n",i+=JSON.stringify(e[s])+"\n";return i},generateUpdateRequest:function(e,t){if(!e)return"";for(var i,s="",a=0;a<e.length;a++)s+="\n"+t.cSet+"\n",s+=r.changeSetContent+"\n\n",s+="PUT ",i="string"==typeof e[a][t.key]?"'"+e[a][t.key]+"'":e[a][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+r.accept+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=r.batchChangeSetContentType+"\n\n",s+=JSON.stringify(e[a])+"\n\n";return s},_p:function(e){return e.replace(/\./g,"/")}}),t.ODataV4Adaptor=(new t.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(e){return!0===e?"true":""},onPredicate:function(e,i,s){var a="",r=e.value,n=r instanceof Date;return t.data.odUniOperator.contains="contains",a=t.ODataAdaptor.prototype.onPredicate.call(this,e,i,s),t.data.odUniOperator.contains="substringof",n&&(a=a.replace(/datetime'(.*)'$/,"$1")),a},onOperation:function(e,t,i,s,a){return a?(e+="("+i,e+=t,e+=s.replace(/["']/g,"")+")"):(e+=i,e+=t,e+=s),e},onEachSearch:function(e){var t=this.pvt.search||[];t.push(e.key),this.pvt.search=t},onSearch:function(e){return this.pvt.search.join(" OR ")},beforeSend:function(e,t,i){},processQuery:function(e,i){for(var s=/\/[\d*\/]*/g,a="",r=i._expands.length-1;r>0;r--)if(a.indexOf(i._expands[r])>=0)i._expands.pop();else if(s.test(i._expands[r])){a=i._expands.pop();for(var n=a.replace(s,"($expand="),o=0;o<a.split(s).length-1;o++)n+=")";i._expands.unshift(n),r++}return t.ODataAdaptor.prototype.processQuery.apply(this,[e,i])},processResponse:function(i,s,a,r,o,l){var d=o&&o.ejPvtData;if(r&&r.getResponseHeader("Content-Type")&&-1!=r.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return a._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){var h,c,u=r.getResponseHeader("Content-Type");if(u=u.substring(u.indexOf("=batchresponse")+1),i=i.split(u),i.length<2)return;i=i[1];var p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i);i.replace(p[0],"");var m=p[1];i=i.split(m);for(var g=i.length;g>-1;g--)/\bContent-ID:/i.test(i[g])&&/\bHTTP.+201/.test(i[g])&&(h=parseInt(/\bContent-ID: (\d+)/i.exec(i[g])[1]),l.added[h]&&(c=n.parseJson(/^\{.+\}/m.exec(i[g])[0]),e.extend(l.added[h],this.processResponse(c))));return l}var f=null,_={};if(a&&a._requiresCount&&"@odata.count"in i&&(f=i["@odata.count"]),i=t.isNullOrUndefined(i.value)?i:i.value,d&&d.aggregates&&d.aggregates.length){for(var v,b=d.aggregates,x={},g=0;g<b.length;g++)(v=t.aggregates[b[g].type])&&(x[b[g].field+" - "+b[g].type]=v(i,b[g].field));_=x}if(d&&d.groups&&d.groups.length)for(var y=d.groups,g=0;g<y.length;g++){var w=C(y[g],a.queries);i=t.group(i,y[g],d.aggregates,w)}return P(f)?i:{result:i,count:f,aggregates:_}}}),t.JsonAdaptor=(new t.Adaptor).extend({processQuery:function(e,t){for(var i,s,a=e.dataSource.json.slice(0),r=a.length,n=!0,o={},l=0;l<t.queries.length;l++)s=t.queries[l],i=this[s.fn].call(this,a,s.e,t),"onAggregates"==s.fn?o[s.e.field+" - "+s.e.type]=i:a=void 0!==i?i:a,"onPage"!==s.fn&&"onSkip"!==s.fn&&"onTake"!==s.fn&&"onRange"!==s.fn||(n=!1),n&&(r=a.length);return t._requiresCount&&(a={result:a,count:r,aggregates:o}),a},batchRequest:function(e,t,i){var s;for(s=0;s<t.added.length;s++)this.insert(e,t.added[s]);for(s=0;s<t.changed.length;s++)this.update(e,i.key,t.changed[s]);for(s=0;s<t.deleted.length;s++)this.remove(e,i.key,t.deleted[s]);return t},onWhere:function(e,t){return e?e.filter(function(e){return t.validate(e)}):e},onAggregates:function(e,i){var s=t.aggregates[i.type];return e&&s&&0!=e.length?s(e,i.field):null},onSearch:function(e,i){return e&&e.length?(0===i.fieldNames.length&&t.pvt.getFieldList(e[0],i.fieldNames),e.filter(function(e){for(var s=0;s<i.fieldNames.length;s++)if(i.comparer.call(e,t.pvt.getObject(i.fieldNames[s],e),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):e},onSortBy:function(e,i,s){if(!e)return e;var a,r=h(i.fieldName,s);if(!r)return e.sort(i.comparer);if(r instanceof Array){r=r.slice(0);for(var n=r.length-1;n>=0;n--)r[n]&&(a=i.comparer,r[n].endsWith(" desc")&&(a=t.pvt.fnSort(t.sortOrder.Descending),r[n]=r[n].replace(" desc","")),e=w(e,r[n],a,[]));return e}return w(e,r,i.comparer,s?s.queries:[])},onGroup:function(e,i,s){if(!e)return e;var a=o(s.queries,"onAggregates"),r=[];if(a.length)for(var n,l=0;l<a.length;l++)n=a[l].e,r.push({type:n.type,field:h(n.field,s)});var d=C(i.fieldName,s.queries);return t.group(e,h(i.fieldName,s),r,d)},onPage:function(e,t,i){var s=h(t.pageSize,i),a=(h(t.pageIndex,i)-1)*s,r=a+s;return e?e.slice(a,r):e},onRange:function(e,t){return e?e.slice(h(t.start),h(t.end)):e},onTake:function(e,t){return e?e.slice(0,h(t.nos)):e},onSkip:function(e,t){return e?e.slice(h(t.nos)):e},onSelect:function(e,i){return e?t.select(e,h(i.fieldNames)):e},insert:function(e,t){return e.dataSource.json.push(t)},remove:function(e,i,s,a){var r,n=e.dataSource.json;for("object"==typeof s&&(s=t.getObject(i,s)),r=0;r<n.length&&t.getObject(i,n[r])!==s;r++);return r!==n.length?n.splice(r,1):null},update:function(i,s,a,r){var n,o=i.dataSource.json,l=t.getObject(s,a);for(n=0;n<o.length&&t.getObject(s,o[n])!==l;n++);return n<o.length?e.extend(o[n],a):null}}),t.ForeignKeyAdaptor=function(i,s){var a=(new t[s||"JsonAdaptor"]).extend({init:function(){this.foreignData=[],this.key=[],this.adaptorType=s,this.value=[],this.fValue=[],this.keyField=[];for(var e=i,a=0;a<e.length;a++)this.foreignData[a]=e[a].dataSource,this.key[a]=e[a].foreignKeyField,this.fValue[a]=t.isNullOrUndefined(e[a].field)?e[a].foreignKeyValue:e[a].field+"_"+e[a].foreignKeyValue,this.value[a]=e[a].foreignKeyValue,this.keyField[a]=e[a].field||e[a].foreignKeyField,this.initial=!0},processQuery:function(e,i){var s=e.dataSource.json;if(this.initial){for(var a=0;a<s.length;a++)for(var r=this,n=0;n<this.foreignData.length;n++)this.foreignData[n].filter(function(e){t.getObject(r.key[n],e)==t.getObject(r.keyField[n],s[a])&&(s[a][r.fValue[n]]=t.getObject(r.value[n],e))});this.initial=!1}return this.base.processQuery.apply(this,[e,i])},setValue:function(i){for(var s=0;s<this.foreignData.length;s++){var a=this,r=i[this.fValue[s]];"string"!=typeof r||isNaN(r)||(r=t.parseFloat(r));var n=e.grep(a.foreignData[s],function(e){return e[a.value[s]]==r})[0];t.isNullOrUndefined(n)&&(n=e.grep(a.foreignData[s],function(e){return e[a.key[s]]==r})[0],void 0!=t.getObject(this.value[s],n)&&t.createObject(a.value[s],t.getObject(this.value[s],n),i)),void 0!=t.getObject(this.value[s],n)&&t.createObject(this.keyField[s],t.getObject(this.key[s],n),i)}},insert:function(e,t,i){return this.setValue(t),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}},update:function(e,i,s,a){return this.setValue(s),t.JsonAdaptor.prototype.update(e,i,s,a),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:s,action:"update",keyColumn:i,key:s[i],table:a,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}}});return e.extend(this,new a),this},t.remoteSaveAdaptor=(new t.JsonAdaptor).extend({beforeSend:t.UrlAdaptor.prototype.beforeSend,insert:t.UrlAdaptor.prototype.insert,update:t.UrlAdaptor.prototype.update,remove:t.UrlAdaptor.prototype.remove,addParams:t.UrlAdaptor.prototype.addParams,batchRequest:function(e,t,i,s){var a={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:a}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a)}},processResponse:function(e,i,s,a,r,n,o){if(t.isNullOrUndefined(n))return e.d?e.d:e;e.d&&(e=e.d),e.added&&(n.added=t.parseJSON(e.added)),e.changed&&(n.changed=t.parseJSON(e.changed)),e.deleted&&(n.deleted=t.parseJSON(e.deleted));var l;for(l=0;l<n.added.length;l++)t.JsonAdaptor.prototype.insert(i,n.added[l]);for(l=0;l<n.changed.length;l++)t.JsonAdaptor.prototype.update(i,o,n.changed[l]);for(l=0;l<n.deleted.length;l++)t.JsonAdaptor.prototype.remove(i,o,n.deleted[l]);return e}}),t.WebApiAdaptor=(new t.ODataAdaptor).extend({insert:function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},remove:function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(e,t,i,s){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},batchRequest:function(i,s,a){var n=a.guid=t.getGuid(r.batchPre),o=[];return e.each(s.added,function(e,t){o.push("--"+n),o.push("Content-Type: application/http; msgtype=request",""),o.push("POST "+i.dataSource.insertUrl+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",t?JSON.stringify(t):"")}),e.each(s.changed,function(e,t){o.push("--"+n),o.push("Content-Type: application/http; msgtype=request",""),o.push("PUT "+i.dataSource.updateUrl+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",t?JSON.stringify(t):"")}),e.each(s.deleted,function(e,t){o.push("--"+n),o.push("Content-Type: application/http; msgtype=request",""),o.push("DELETE "+i.dataSource.removeUrl+"/"+t[a.key]+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",t?JSON.stringify(t):"")}),o.push("--"+n+"--",""),{type:"POST",url:i.dataSource.batchUrl||i.dataSource.crudUrl||i.dataSource.url,data:o.join("\r\n"),contentType:'multipart/mixed; boundary="'+n+'"'}},processResponse:function(e,i,s,a,r,n){var o=r&&r.ejPvtData;if(r&&"post"!=r.type.toLowerCase()){var l=a&&a.getResponseHeader("DataServiceVersion"),d=null,h={};if(l=l&&parseInt(l,10)||2,s&&s._requiresCount&&(P(e.Count)||(d=e.Count)),l<3&&e.Items&&(e=e.Items),o&&o.aggregates&&o.aggregates.length){for(var c,u=o.aggregates,p={},m=0;m<u.length;m++)(c=t.aggregates[u[m].type])&&(p[u[m].field+" - "+u[m].type]=c(e,u[m].field));h=p}if(o&&o.groups&&o.groups.length)for(var g=o.groups,m=0;m<g.length;m++){var f=C(g[m],s.queries)
;e=t.group(e,g[m],o.aggregates,f)}return P(d)?e:{result:e,count:d,aggregates:h}}}});var h=function(e,t){return"function"==typeof e?e.call(t||{}):e};t.TableModel=function(i,s,a,r){if(!O(this,t.TableModel))return new t.TableModel(s);O(s,Array)||M("ej.TableModel - Json Array is required");for(var n,o=[],l=E(g,this),d=0;d<s.length;d++)n=new t.Model(s[d],this),n.state="unchanged",n.on("stateChange",l),r&&n.computes(r),o.push(n);return this.name=i||"table1",this.rows=t.NotifierArray(o),this._deleted=[],this._events=e({}),this.dataManager=a,this._isDirty=!1,this},t.TableModel.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},setDataManager:function(e){this.dataManagar=e},saveChanges:function(){if(this.dataManager&&O(this.dataManager,t.DataManager)||M("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()){var e=this.dataManager.saveChanges(this.getChanges(),this.key,this.name);e.done(E(function(e){for(var t=this.toArray(),i=0;i<t.length;i++)"added"===t.state&&t.set(this.key,e.added.filter(function(e){return e[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})},this)),e.fail(E(function(e){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:e})},this)),this._isDirty=!1}},rejectChanges:function(){for(var e=this.toArray(),t=0;t<e.length;t++)e[t].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(e){var i=new t.Model(e);i._isDirty=this._isDirty=!0,this.rows.push(i),this._events.triggerHandler({type:"insert",model:i,table:this})},update:function(e){this.key||M("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=e,s=this.key,a=i[s];t=this.rows.array.filter(function(e){return e.get(s)===a}),t=t[0];for(var r in i)t.set(r,i[r]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:t,table:this})},remove:function(e){this.key||M("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=this.key,s=-1;e&&"object"==typeof e&&(e=void 0!==e[i]?e[i]:e.get(i));for(var a=0;a<this.rows.length();a++)if(this.rows.array[a].get(i)===e){s=a;break}s>-1&&(t=this.rows.removeAt(s),t.markDelete(),this._deleted.push({model:t,position:s}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:t,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var e={added:[],changed:[]},i=this.toArray(),s=0;s<i.length;s++)e[i[s].state]&&e[i[s].state].push(i[s].json);return e.deleted=t.select(this._deleted,["model"]),e},toArray:function(){return this.rows.toArray()},setDirty:function(e,t){this._isDirty!==!!e&&(this._isDirty=!!e,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(e){return this.rows.array[e]},length:function(){return this.rows.array.length},bindTo:function(t){var i,s=c,a=e(t.html()),r=this.toArray();e.inArray(t.prop("tagName").toLowerCase(),["table","tbody"])&&(s=u),s.insertBefore(t),t.detach().empty();for(var n=0;n<r.length;n++)i=a.clone(),r[n].bindTo(i),t.append(i);t.insertAfter(s),s.remove()}};var c=i?e(document.createElement("div")):{},u=i?e(document.createElement("tr")):{};t.Model=function(i,s,a){"string"==typeof s&&(a=s,s=null),this.$id=L("m"),this.json=i,this.table=s instanceof t.TableModel?s:null,this.name=a||this.table&&this.table.name,this.dataManager=s instanceof t.DataManager?s:s.dataManagar,this.actual={},this._events=e({}),this.isDirty=!1,this.state="added",this._props=[],this._computeEls={},this._fields={},this._attrEls={},this._updates={},this.computed={}},t.Model.prototype={computes:function(t){e.extend(this.computed,t)},on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},set:function(e,t){var i,s=this.json,a=e;e=e.split(".");for(var r=0;r<e.length-1;r++)e=e[0],s=s[e[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),i=s[e],void 0!==this.actual[e]||e in this.actual||(this.actual[e]=t),s[e]=t,this._updateValues(e,t),this._events.triggerHandler({type:a,current:t,previous:i,model:this})},get:function(e){return t.pvt.getObject(e,this.json)},revert:function(e){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,e?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(i,s){return i=i||this.dataManagar,s=s||i.dataSource.key,i||M("ej.Model - DataManager is required to commit the changes"),"added"===this.state?i.insert(this.json,this.name).done(t.proxy(function(t){e.extend(this.json,t.record)},this)):"changed"===this.state?i.update(s,this.json,this.name):"deleted"===this.state?i.remove(s,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(t,i){if(this.state!==t){if("added"===this.state){if("deleted"!==t)return;t="unchanged"}var s=t;i=i||{},this.state=t,this._events.triggerHandler(e.extend({type:"stateChange",current:t,previous:s,model:this},i))}},properties:function(){if(this._props.length)return this._props;for(var e in this.json)this._props.push(e),this._updates[e]={read:[],input:[]};return this._props},bindTo:function(t){var i,s,a=e(t),r=a.find("[ej-observe], [ej-computed], [ej-prop]"),n=r.length;a.data("ejModel",this);for(var o={fields:[],props:[],computes:[]},l=0;l<n;l++)i=r.eq(l),s=i.attr("ej-prop"),s&&this._processAttrib(s,i,o),s=i.attr("ej-observe"),s&&-1!==this._props.indexOf(s)?this._processField(i,s,o):(s=i.attr("ej-computed"))&&this._processComputed(s,i,o);a.data("ejModelBinding"+this.$id,o)},unbind:function(t){var i,s={props:this._attrEls,computes:this._computeEls},a=!1;t&&(s=e(t).removeData("ejModel").data("ejModelBinding"+this.$id)||s,a=!0);for(var r in this.computed)i=s.computes[r],r=this.computed[r],i&&r.deps&&(this.off(r.deps.join(" "),i.handle),a&&delete this._computeEls[r]);a||(this._computeEls={});for(var r in s.props)(i=s.props[r])&&(this.off(i.deps.join(" "),i.handle),delete s.props[r],a&&delete this._attrEls[r]);if(a||(this._attrEls={}),s.fields&&s.fields.length)for(var n,o,l,d=s.fields.length,h=0;h<d;h++)n=s.fields[h],e(n).off("change",null,this._changeHandler),l=-1!==this.formElements.indexOf(n.tagName.toLowerCase())?"input":"read",-1!==(o=this._updates[l].indexOf(n))&&this._updates[l].splice(o,1)},_processComputed:function(e,t,i){if(e){var s,a,r=m(e),n=-1!==this.formElements.indexOf(t[0].tagName.toLowerCase())?"val":"html";this.computed[e]&&this.computed[r]||(this.computed[r]={value:new Function("var e = this; return "+e),deps:this._generateDeps(e)},e=r),s=this.computed[e],s.get||(s.get=function(){s.value.call(this.json)}),a=s.deps,s=s.value,this._updateDeps(a),this._updateElement(t,n,s),s={el:t,handle:E(this._computeHandle,this,{value:e,type:n})},this._computeEls[e]=s,i.computes[e]=s,this.on(a.join(" "),s.handle)}},_computeHandle:function(e){var t=this._computeEls[e.value];t&&this.computed[e.value]&&this._updateElement(t.el,e.type,this.computed[e.value].value)},_updateElement:function(t,i,s){t[i](s.call(e.extend({},this.json,this.computed)))},_updateDeps:function(e){for(var i=0;i<e.length;i++)!(e[i]in this.json)&&e[i]in this.computed&&t.merge(e,this.computed[e[i]].deps)},_generateDeps:function(e){for(var t,i=e.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),s=[],a=0;a<i.length;a++)i[a].startsWith("#ej.#")&&(t=i[a].replace("#ej.#","").split(" ")[0])&&-1!==this._props.indexOf(t)&&s.push(t);return s},_processAttrib:function(e,t,i){var s,a,r={};e=e.replace(/^ +| +$/g,"").split(";");for(var n=0;n<e.length;n++)e[n]=e[n].split(":"),e[n].length<2||(s=e[n][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""),r[s]=e[n][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));e=r;var o=[];for(s in e)o.push(e[s]);this._updateDeps(o),this._updateProps(t,e),r=L("emak"),a={el:t,handle:E(this._attrHandle,this,r),value:e,deps:o},t.prop("ejmodelattrkey",r),i.props[r]=a,this._attrEls[r]=a,this.on(o.join(" "),a.handle)},_attrHandle:function(e){var t=this._attrEls[e];t&&this._updateProps(t.el,t.value)},_updateProps:function(t,i){var s,a=this.json,r=this.computed;for(var n in i)s=i[n],s in a?s=a[s]:s in r&&(s=r[s])&&(s=s.value.call(e.extend({},this.json,r))),P(s)||t.prop(n,s)},_updateValues:function(e,t){var i=this._updates[e];i&&(i.read||i.input)&&(this._ensureItems(i.read,"html",t),this._ensureItems(i.input,"val",t))},_ensureItems:function(t,i,s){if(t)for(var a=t.length-1;a>-1;a--)t[a].offsetParent?e(t[a])[i](s):t.splice(a,1)},_changeHandler:function(t){t.data.self.set(t.data.prop,e(this).val())},_processField:function(e,t,i){var s={self:this,prop:t},a=this.get(t);return i.fields.push(e[0]),-1===this.formElements.indexOf(e[0].tagName.toLowerCase())?(e.html(a),this._updates[t].read.push(e[0])):(e.val(a).off("change",null,this._changeHandler).on("change",null,s,this._changeHandler),this._updates[t].input.push(e[0]))},formElements:["input","select","textarea"]};var p=/[^\w]+/g,m=function(e){return e.replace(p,"_")},g=function(e){this.setDirty(!0,e.model)};t.Predicate=function(e,i,s,a,r){if(!(this instanceof t.Predicate))return new t.Predicate(e,i,s,a,r);if(this.ignoreAccent=!1,"string"==typeof e){var n="";-1!=i.toLowerCase().indexOf(" any")?(i=i.replace(" any",""),n="any"):-1!=i.toLowerCase().indexOf(" all")&&(i=i.replace(" all",""),n="all"),this.field=e,this.operator=i,this.value=s,this.ignoreCase=a,this.ignoreAccent=r,this.isComplex=!1,this.anyCondition=n,this._comparer=t.data.fnOperators.processOperator(""!=n?n:this.operator)}else(e instanceof t.Predicate&&s instanceof t.Predicate||s instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[e],s instanceof Array?[].push.apply(this.predicates,s):this.predicates.push(s));return this},t.Predicate.and=function(){return f._combinePredicates([].slice.call(arguments,0),"and")},t.Predicate.or=function(){return f._combinePredicates([].slice.call(arguments,0),"or")},t.Predicate.fromJSON=function(e){if(O(e,Array)){for(var t=[],i=0,s=e.length;i<s;i++)t.push(f._fromJSON(e[i]));return t}return f._fromJSON(e)};var f={_combinePredicates:function(e,i){if(e.length){if(1===e.length){if(!O(e[0],Array))return e[0];e=e[0]}return new t.Predicate(e[0],i,e.slice(1))}},_combine:function(e,i,s,a,r,n,o){return i instanceof t.Predicate?t.Predicate[r](e,i):"string"==typeof i?t.Predicate[r](e,new t.Predicate(i,s,a,n,o)):M("Predicate - "+r+" : invalid arguments")},_fromJSON:function(e){if(!e||O(e,t.Predicate))return e;for(var i=e.predicates||[],s=i.length,a=[],r=0;r<s;r++)a.push(f._fromJSON(i[r]));return e.isComplex?new t.Predicate(a[0],e.condition,a.slice(1)):new t.Predicate(e.field,e.operator,t.parseJSON({val:e.value}).val,e.ignoreCase,e.ignoreAccent)}};if(t.Predicate.prototype={and:function(e,t,i,s,a){return f._combine(this,e,t,i,"and",s,a)},or:function(e,t,i,s,a){return f._combine(this,e,t,i,"or",s,a)},validate:function(e){var i,s,a=this.predicates;if(!this.isComplex)return this._comparer.call(this,t.pvt.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);i="and"===this.condition;for(var r=0;r<a.length;r++)if(s=a[r].validate(e),i){if(!s)return!1}else if(s)return!0;return i},toJSON:function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJSON())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e,anyCondition:this.anyCondition}}},t.dataUtil={swap:function(e,t,i){if(t!=i){var s=e[t];e[t]=e[i],e[i]=s}},mergeSort:function(e,i,s){return s&&"string"!=typeof s||(s=t.pvt.fnSort(s,!0)),"function"==typeof i&&(s=i,i=null),t.pvt.mergeSort(e,i,s)},max:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnDescending)},min:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnAscending)},distinct:function(e,t,i){for(var s,a=[],r={},n=0;n<e.length;n++)(s=R(e,t,n))in r||(a.push(i?e[n]:s),r[s]=1);return a},sum:function(e,t){for(var i,s=0,a="number"!=typeof R(e,t,0),r=0;r<e.length;r++)i=R(e,t,r),isNaN(i)||null===i||(a&&(i=+i),s+=i);return s},avg:function(e,i){return t.sum(e,i)/e.length},select:function(e,i){for(var s=[],a=0;a<e.length;a++)s.push(t.pvt.extractFields(e[a],i));return s},group:function(i,s,a,r,n,o){if(n=n||1,i.GROUPGUID==t.pvt.consts.GROUPGUID){for(var l=0;l<i.length;l++)if(t.isNullOrUndefined(o))i[l].items=t.group(i[l].items,s,a,r,i.level+1),i[l].count=i[l].items.length;else{var d=-1,h=e.grep(o,function(e){return e.key==i[l].key});d=o.indexOf(h[0]),i[l].items=t.group(i[l].items,s,a,r,i.level+1,o[d].items),i[l].count=o[d].count}return i.childLevels+=1,i}var c={},u=[];u.GROUPGUID=t.pvt.consts.GROUPGUID,u.level=n,u.childLevels=0,u.records=i;for(var p=0;p<i.length;p++){var m=R(i,s,p);if(t.isNullOrUndefined(r)||(m=r(m,s)),!c[m]&&(c[m]={key:m,count:0,items:[],aggregates:{},field:s},u.push(c[m]),!t.isNullOrUndefined(o))){var g=e.grep(o,function(e){return e.key==c[m].key});c[m].count=g[0].count}c[m].count=t.isNullOrUndefined(o)?c[m].count+=1:c[m].count,c[m].items.push(i[p])}if(a&&a.length)for(var p=0;p<u.length;p++){for(var f,_={},l=0;l<a.length;l++)if(f=t.aggregates[a[l].type],t.isNullOrUndefined(o))f&&(_[a[l].field+" - "+a[l].type]=f(u[p].items,a[l].field));else{var h=e.grep(o,function(e){return e.key==u[p].key});f&&(_[a[l].field+" - "+a[l].type]=f(h[0].items,a[l].field))}u[p].aggregates=_}return u},parseTable:function(i,s,a){var r,n,o=i.rows,l=[],d=[];if(!o.length)return[];switch(a=a||0,(s||"").toLowerCase()){case t.headerOption.tHead:r=i.tHead.rows[a];break;case t.headerOption.row:default:r=i.rows[a]}var h=r.cells;for(n=0;n<h.length;n++)l.push(e.trim(h[n].innerHTML));for(n=a+1;n<o.length;n++){for(var c={},u=o[n].cells,p=0;p<u.length;p++){var m=u[p].innerHTML;"string"==typeof m&&e.isNumeric(m)?c[l[p]]=Number(m):c[l[p]]=m}d.push(c)}return d}},t.headerOption={tHead:"thead",row:"row"},t.aggregates={sum:function(e,i){return t.sum(e,i)},average:function(e,i){return t.avg(e,i)},minimum:function(e,i){return t.getObject(i,t.min(e,i))},maximum:function(e,i){return t.getObject(i,t.max(e,i))},truecount:function(e,i){var s=t.Predicate(i,"equal",!0);return t.DataManager(e).executeLocal(t.Query().where(s)).length},falsecount:function(e,i){var s=t.Predicate(i,"equal",!1);return t.DataManager(e).executeLocal(t.Query().where(s)).length},count:function(e,t){return e.length}},t.pvt={filterQueries:o,mergeSort:function(e,i,s){if(e.length<=1)return e;var a=parseInt(e.length/2,10),r=e.slice(0,a),n=e.slice(a);return r=t.pvt.mergeSort(r,i,s),n=t.pvt.mergeSort(n,i,s),t.pvt.merge(r,n,i,s)},getItemFromComparer:function(e,i,s){var a,r,n,o=0,l="string"==typeof R(e,i,0);if(e.length)for(;t.isNullOrUndefined(a)&&o<e.length;)a=R(e,i,o),n=e[o++];for(;o<e.length;o++)r=R(e,i,o),t.isNullOrUndefined(r)||(l&&(a=+a,r=+r),s(a,r)>0&&(a=r,n=e[o]));return n},quickSelect:function(e,i,s,a,r,n){if(s==a)return e[s];var o=t.pvt.partition(e,i,s,a,n),l=o-s+1;return l==r?e[o]:r<l?t.pvt.quickSelect(e,i,s,o-1,r,n):t.pvt.quickSelect(e,i,o+1,a,r-l,n)},extractFields:function(e,i){var s={};if(1==i.length)return t.pvt.getObject(i[0],e);for(var a=0;a<i.length;a++)s[i[a].replace(".",t.pvt.consts.complexPropertyMerge)]=t.pvt.getObject(i[a],e);return s},partition:function(e,i,s,a,r){var n=parseInt((s+a)/2,10),o=R(e,i,n);t.swap(e,n,a),n=s;for(var l=s;l<a;l++)r(R(e,i,l),o)&&(t.swap(e,l,n),n++);return t.swap(e,n,a),n},fnSort:function(e){return e=e?e.toLowerCase():t.sortOrder.Ascending,e==t.sortOrder.Ascending?t.pvt.fnAscending:t.pvt.fnDescending},fnGetComparer:function(e,i){return function(s,a){return i(t.pvt.getObject(e,s),t.pvt.getObject(e,a))}},fnAscending:function(e,i){return t.isNullOrUndefined(i)&&t.isNullOrUndefined(e)?-1:null===i||void 0===i?-1:"string"==typeof e?e.localeCompare(i):null===e||void 0===e?1:e-i},fnDescending:function(e,i){return t.isNullOrUndefined(i)&&t.isNullOrUndefined(e)?-1:null===i||void 0===i?1:"string"==typeof e?-1*e.localeCompare(i):null===e||void 0===e?-1:i-e},merge:function(e,t,i,s){for(var a,r=[];e.length>0||t.length>0;)a=e.length>0&&t.length>0?s?s(R(e,i,0),R(t,i,0))<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,r.push(a.shift());return r},getObject:function(e,t){if(t){if(!e)return t;if(-1===e.indexOf("."))return t[e];for(var i=t,s=e.split("."),a=0;a<s.length&&null!=i;a++)i=i[s[a]];return i}},createObject:function(e,t,i){var s,a=e.split("."),r=i||window,n=r;for(s=0;s<a.length;s++)s+1==a.length?n[a[s]]=void 0===t?{}:t:null==n[a[s]]&&(n[a[s]]={}),n=n[a[s]];return r},ignoreDiacritics:function(e){return"string"!=typeof e?e:e.split("").map(function(e){return e in t.data.diacritics?t.data.diacritics[e]:e}).join("")},getFieldList:function(e,i,s){if(void 0===s&&(s=""),void 0===i||null===i)return t.pvt.getFieldList(e,[],s);for(var a in e)"object"!=typeof e[a]||e[a]instanceof Array?i.push(s+a):t.pvt.getFieldList(e[a],i,s+a+".");return i}},t.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},t.data={},t.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne ",in:" eq ",notin:" ne "},t.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",notcontains:"substringof"},t.data.diacritics={"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï"},t.data.fnOperators={equal:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?T(e)==T(i):e==i},notequal:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),!t.data.fnOperators.equal(e,i,s)},notin:function(e,i,s){for(var a=0;a<i.length;a++)if(0==t.data.fnOperators.notequal(e,i[a],s))return!1;return!0},lessthan:function(e,t,i){return i?T(e)<T(t):e<t},greaterthan:function(e,t,i){return i?T(e)>T(t):e>t},lessthanorequal:function(e,t,i){return i?T(e)<=T(t):e<=t},greaterthanorequal:function(e,t,i){return i?T(e)>=T(t):e>=t},contains:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?!P(e)&&!P(i)&&-1!=T(e).indexOf(T(i)):!P(e)&&!P(i)&&-1!=e.toString().indexOf(i)},notcontains:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),!t.data.fnOperators.contains(e,i,s)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?e&&i&&T(e).startsWith(T(i)):e&&i&&e.startsWith(i)},endswith:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?e&&i&&T(e).endsWith(T(i)):e&&i&&e.endsWith(i)},all:function(e,i,s){for(var a=0;a<i.length;a++)if(0==t.data.fnOperators[this.operator](e,i[a],s))return!1;return!0},any:function(e,i,s){for(var a=0;a<i.length;a++)if(1==t.data.fnOperators[this.operator](e,i[a],s))return!0;return!1},processSymbols:function(e){var i=t.data.operatorSymbols[e];if(i){var s=t.data.fnOperators[i];if(s)return s}return M("Query - Process Operator : Invalid operator")},processOperator:function(e){var i=t.data.fnOperators[e];return i||t.data.fnOperators.processSymbols(e)}},t.data.fnOperators.in=function(e,i,s){for(var a=0;a<i.length;a++)if(1==t.data.fnOperators.equal(e,i[a],s))return!0;return!1},t.NotifierArray=function(i){return O(this,t.NotifierArray)?(this.array=i,this._events=e({}),this._isDirty=!1,this):new t.NotifierArray(i)},t.NotifierArray.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},push:function(e){var t;return t=O(e,Array)?[].push.apply(this.array,e):this.array.push(e),this._raise("add",{item:e,index:this.length()-1}),t},pop:function(){var e=this.array.pop();return this._raise("remove",{item:e,index:this.length()-1}),e},addAt:function(e,t){return this.array.splice(e,0,t),this._raise("add",{item:t,index:e}),t},removeAt:function(e){var t=this.array.splice(e,1)[0];return this._raise("remove",{item:t,index:e}),t},remove:function(e){var t=this.array.indexOf(e);return t>-1&&(this.array.splice(t,1),this._raise("remove",{item:e,index:t})),t},length:function(){return this.array.length},_raise:function(t,i){this._events.triggerHandler(e.extend({type:t},i)),this._events.triggerHandler({type:"all",name:t,args:i})},toArray:function(){return this.array}},e.extend(t,t.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=0,s=this.length;i<s;++i)e.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var i=0;i<t;i++)if(i in this&&this[i]===e)return i;return-1},Array.prototype.filter=Array.prototype.filter||function(e){if("function"!=typeof e)throw new TypeError;for(var t=[],i=arguments[1]||this,s=0;s<this.length;s++){var a=this[s];e.call(i,a,s,this)&&t.push(a)}return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this.slice(-e.length)===e},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},t.support||(t.support={}),t.support.stableSort=function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),t=0;t<17;t++)if(t!==e[t])return!1;return!0}(),t.support.cors=e.support.cors,!e.support.cors&&window.XDomainRequest){var _=/^https?:\/\//i,v=/^get|post$/i,b=new RegExp("^"+location.protocol,"i"),x=/\/xml/i;e.ajaxTransport("text html xml json",function(e,t,i){if(e.crossDomain&&e.async&&v.test(e.type)&&_.test(t.url)&&b.test(t.url)){var s=null,a=(t.dataType||"").toLowerCase();return{send:function(i,r){s=new XDomainRequest,/^\d+$/.test(t.timeout)&&(s.timeout=t.timeout),s.ontimeout=function(){r(500,"timeout")},s.onload=function(){var e="Content-Length: "+s.responseText.length+"\r\nContent-Type: "+s.contentType,t={code:200,message:"success"},i={text:s.responseText};try{if("json"===a)try{i.json=JSON.parse(s.responseText)}catch(e){t.code=500,t.message="parseerror"}else if("xml"===a||"text"!==a&&x.test(s.contentType)){var n=new ActiveXObject("Microsoft.XMLDOM");n.async=!1;try{n.loadXML(s.responseText)}catch(e){n=void 0}if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+s.responseText;i.xml=n}}catch(e){throw e}finally{r(t.code,t.message,i,e)}},s.onerror=function(){r(500,"error",{text:s.responseText})},-1!=navigator.userAgent.indexOf("MSIE 9.0")&&(s.onprogress=function(){}),s.open(e.type,e.url),s.send(t.data)},abort:function(){s&&s.abort()}}}})}e.support.cors=!0,t.sortOrder={Ascending:"ascending",Descending:"descending"},t.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"};var y=function(e,t){t&&(e=E(e,t)),(window.setImmediate||window.setTimeout)(e,0)};t.support.enableLocalizedSort=!1;var w=function(e,i,s,a){return t.support.stableSort?t.support.enableLocalizedSort||"string"!=typeof t.pvt.getObject(i,e[0]||{})||s!==t.pvt.fnAscending&&s!==t.pvt.fnDescending||1!==a.filter(function(e){return"onSortBy"===e.fn}).length?e.sort(t.pvt.fnGetComparer(i,s)):S(e,i,s===t.pvt.fnDescending):t.mergeSort(e,i,s)},C=function(i,s){for(var a=e.grep(s,function(e){return"onGroup"==e.fn}),r=0;r<a.length;r++)if(t.getObject("fieldName",a[r].e)==i)return t.getObject("fn",a[r].e)},S=function(e,i,s){var a=Object.prototype.toString;Object.prototype.toString=-1===i.indexOf(".")?function(){return this[i]}:function(){return t.pvt.getObject(i,this)},e=e.sort(),Object.prototype.toString=a,s&&e.reverse()},T=function(e){return e?e.toLowerCase?e.toLowerCase():e.toString().toLowerCase():0===e||!1===e?e.toString():""},R=function(e,i,s){return i?t.pvt.getObject(i,e[s]):e[s]},k=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&1===e.nodeType&&"object"==typeof e&&"string"==typeof e.nodeName},O=function(e,t){return e instanceof t},D=function(e,i,s,a){return function(r){return"object"==typeof r&&(a=r,r=null),new t.TableModel(r||e,i,s,a)}},I=function(t){return function(i,s){(s=s||window.ko)||M("Knockout is undefined");for(var a,r,n,o=[],l=0;l<t.length;l++){a={};for(r in t[l])r.startsWith("_")||(a[r]=s.observable(t[l][r]));for(r in i)n=i[r],e.isPlainObject(n)?(n.owner||(n.owner=a),n=s.computed(n)):n=s.computed(n,a),a[r]=n;o.push(a)}return s.observableArray(o)}},j=0,L=function(e){return j+=1,e+j};t.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var s=new Uint8Array(1);window.crypto.getRandomValues(s),t=s[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]})};var A=function(e,t){return function(){var i=[].slice.call(arguments,0);return i.push(this),e.apply(t||this,i)}},E=function(e,t,i){return"bind"in e?i?e.bind(t,i):e.bind(t):function(){var s=i?[i]:[]
;return s.push.apply(s,arguments),e.apply(t||this,s)}};t.merge=function(e,t){e&&t&&Array.prototype.push.apply(e,t)};var P=function(e){return void 0===e||null===e},M=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}}(window.jQuery,window.Syncfusion,window.document),function(e,t){function i(e,t){var i,s,a=e||"",r=P,t=t.toString(),n=t.indexOf(".")>-1||e.indexOf(".")>-1,o=0,l=0,d="",h="",c=e.split(","),u="0",p=e.toLowerCase().indexOf("e"),m=a.indexOf("#");if(e.indexOf("\\")>-1&&(h=e.substr(0,e.lastIndexOf("\\")+1),e=e.substr(e.lastIndexOf("\\")+1,e.length),m=e.indexOf("#")),p>-1){var g="",a="";s=e.toLowerCase().split("e"),e.indexOf("+")>-1?e.split("+")[1]:e.split("-")[1],t=parseInt(t).toExponential(),i=t.split("e"),o=s[1].length-i[1].length;for(var f=s[1].length-1;f>0;f--)"0"!=s[1][f]?a+=s[1][f]:o>1?(a+="#",o--):a+="0";a=(e.indexOf("+")>-1?"+":"")+a.split("").reverse().join("");for(var f=0;f<i[0].length;f++)g="."!=i[0][f]?g.concat("#"):g.concat(".");g.length>s[0].length&&(g=s[0]),a=h+g+"e"+a}else if(n){if(s=e.split("."),i=t.split("."),s[1]=s[1].replace(/[,.]/g,""),(o=s[0].replace(/[,.]/g,"").length-i[0].replace(/[,.]/g,"").length)<0&&ej.isNullOrUndefined(e.match(/[\[\(\)\]]/g))){c=s[0].split(","),d=s[0].split(",");for(var _=c.length-1;_>=0;_--)if(c[_])for(var v=c[_].length,f=0,b=Math.abs(o);f<b&&3!==v;f++)d[_]="0"+d[_],v++,o++;if(d=d.join(),o<0){!ej.isNullOrUndefined(v)&&3!=v&&(d=","+d);for(var f=0,b=Math.abs(o);f<b;f++)3===v&&(d=","+d,v=0),d="0"+d,v++}o=0,a=h+d+"."+s[1]}else if(ej.isNullOrUndefined(e.match(/[\[\(\)\]]/g))){d=s[0].replace(/[,.]/g,"");for(var x="",v=0,y=d.length-1;y>=0;y--)3===v?(x=","+x,v=0):v++,x=d[y]+x;a=h+x+"."+s[1]}}else{var w=0,C=c.splice(1,c.length);if(o=e.replace(/[,.\[\(\]\)]/g,"").length-t.replace(/[,.]/g,"").length,m>-1){for(var S=0,b=e.length;S<b;S++)"#"===e[S]&&w++;(1===w||c[1]&&2===w)&&(u="#"),1===w&&(C=c[0])}if(o<0){s=a.split(","),d=s.splice(1,s.length);for(var _=c.length-1;_>=0;_--)if(C[_]){var v=C[_].length;!d[_]&&(d[_]="");for(var f=0,b=Math.abs(o)+1;f<b;f++){if(1!=w&&3===v){v=0;break}d[_]=d[_].concat(u),v++,o++}}if(d=d.join(),o<0){!ej.isNullOrUndefined(v)&&3!=v&&(d=","+d);for(var f=0,b=Math.abs(o)+1;f<b;f++)1!=w&&3===v&&(d=","+d,v=0),d=u+d,v++}o=0,a=h+d}l=0}for(var T,R,k=[],O=a.split(""),D=0,y=0,I=!1,j=!1,L=e.indexOf("\\");y<a.length;y++)if(T=O[y],"e"===T&&(j=!0),"0"===T&&m<0?o>0&&l<=y?(o--,l++):o>0?o--:R=r[T]:("0"!=T||!j&&"0"==T)&&(R=r[T]),"0"===T&&L>-1&&(R=r[T]),y===a.lastIndexOf("\\")&&(I=!1),R&&!I)k[D]={rule:R},D+=1;else{"\\"===T&&(T="",!(y===a.lastIndexOf("\\"))&&(I=!0)),T=T.split("");for(var _=0;_<T.length;_++)k[D]=T[_],D+=1}return r=k,{rules:r,format:a}}function s(e,t,s){if(ej.isNullOrUndefined(e)||"string"==typeof e||!t)throw"Bad Number Format Exception";var n,o,l,d=t;if(n=i(t,e),l=n.rules,t=n.format,t.indexOf("\\")>=0){var h,c=t.lastIndexOf("\\"),u=t.slice(0,c),p=t.slice(c+1,t.length);p=p.replace(/[9?CANa#&]/g,"_"),h=u+p,o=h.replace(/[\\]/g,""),t=t.replace(/[\\]/g,"")}else o=t.replace(/[9?CANa#&]/g,"_");return o=a(o,s),r(e,t,o,l,s,d)}function a(e,t){if(0!=e.length){var i,s,a,r=ej.preferredCulture(t),n="";i=r.numberFormat[","],s=r.numberFormat.currency.symbol,a=r.numberFormat["."];for(var o=0;o<e.length;o++)","==e[o]?n+=i:"."==e[o]?n+=a:"$"==e[o]?n+=s:n+=e[o];e=n}return e}function r(i,s,r,l,d,h){if(!ej.isNullOrUndefined(i)){if(s.toLowerCase().indexOf("e")>-1){h.indexOf("+")>-1?h.split("+")[1]:h.split("-")[1];i=i.toExponential(),h.indexOf("-")>-1&&(i=i.replace("+",""))}var c,u,p,m,g,f,_,v,b=c=u=i.toString(),x=r,y=p=0,w=s.match(/[\(\[\]\)]/g);b=!s.indexOf("\\")>=0?i=u.replace(/[\(\)-]/g,""):void 0;var C=l.length-1,S=c.length-1;if(ej.isNullOrUndefined(w))for(;y<l.length&&(m=c[p],g=l[y],m!=t);){if(m===g||"_"===m||"e"===m&&m===g.toLowerCase())f=x.substring(0,y),_=x.substring(y),m=a(m,d),x=f+m+_.substr(1,_.length),p+=1,y+=1;else if(l[y].rule!=t){var T=c.charCodeAt(p);n(s,T,y)?(f=x.substring(0,y),_=x.substring(y),v=o(c,p,y,s,r),x=f+v+_.substr(1,_.length),y++,p++):y++}else"e"===g&&(p=c.indexOf("e")+1),y++;if(p>b.length||C<0)break}else for(;C>=0&&(m=c[S],g=l[C],m!=t);){if(m===g||"_"===m||"e"===m&&m===g.toLowerCase())f=x.substring(0,C+1),_=x.substring(C+1),m=a(m,d),x=f.substr(0,f.length-1)+m+_,C--,S--;else if(l[C].rule!=t){var T=c.charCodeAt(S);n(s,T,C)?(f=x.substring(0,C+1),_=x.substring(C+1),v=o(c,S,C,s,r),x=f.substr(0,f.length-1)+v+_,C--,S--):C--}else C--;if(p>b.length||C<0)break}if(i){x.indexOf("_")-x.indexOf(",")!=1&&x.indexOf("_")-x.indexOf(".")!=1||(x=x.slice(0,x.indexOf("_")-1));return""==e.trim(x.replace(/[_]/g,""))?null:x.replace(/[_]/g,"")}}}function n(t,i,s){var a=P,r=!1,n=t.substr(s,1),o=String.fromCharCode(i);return e.each(a,function(e,t){n==e&&(r=!!o.match(new RegExp(t)))}),r}function o(e,t,i,s,a){var r=!1;return s.indexOf(".")>-1&&i===a.length-1&&e[t+1]>5&&(r=!0),r?(parseInt(e[t])+1).toString():e[t]}function l(e,t){return 0===e.indexOf(t)}function d(e,t){return e.substr(e.length-t.length)===t}function h(e){return(e+"").replace(j,"")}function c(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)}function u(e,t,i){for(var s=e.length;s<t;s++)e=i?"0"+e:e+"0";return e}function p(e,t,i){var s,a=t["-"],r=t["+"];switch(i){case"n -":a=" "+a,r=" "+r;case"n-":d(e,a)?s=["-",e.substr(0,e.length-a.length)]:d(e,r)&&(s=["+",e.substr(0,e.length-r.length)]);break;case"- n":a+=" ",r+=" ";case"-n":l(e,a)?s=["-",e.substr(a.length)]:l(e,r)&&(s=["+",e.substr(r.length)]);break;case"(n)":l(e,"(")&&d(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]}function m(e,t,i){var s=i.groupSizes||[3],a=s[0],r=1,n=ej._round(e,t);isFinite(n)||(n=e),e=n;var o=e+"",l="",d=o.split(/e/i),h=d.length>1?parseInt(d[1],10):0;o=d[0],d=o.split("."),o=d[0],l=d.length>1?d[1]:"";h>0?(l=u(l,h,!1),o+=l.slice(0,h),l=l.substr(h)):h<0&&(h=-h,o=u(o,h+1,!0),l=o.slice(-h,o.length)+l,o=o.slice(0,-h));var c=i["."]||".";l=t>0?c+(l.length>t?l.slice(0,t):u(l,t)):"";for(var p=o.length-1,m=i[","]||",",g="";p>=0;){if(0===a||a>p)return o.slice(0,p+1)+(g.length?m+g+l:l);g=o.slice(p-a+1,p+1)+(g.length?m+g:""),p-=a,r<s.length&&(a=s[r],r++)}return o.slice(0,p+1)+m+g+l}function g(e,t,i){if(!t||"i"===t)return i.name.length?e.toLocaleString():e.toString();t=t||"D";var a,r=i.numberFormat,n=Math.abs(e),o=-1;t.length>1&&(o=parseInt(t.slice(1),10));var l,d=t.charAt(0).toUpperCase();switch(d){case"D":a="n",n=c(n),-1!==o&&(n=u(""+n,o,!0)),e<0&&(n=-n);break;case"N":l=r,l.pattern=l.pattern||["-n"];case"C":l=l||r.currency,l.pattern=l.pattern||["-$n","$n"];case"P":l=l||r.percent,l.pattern=l.pattern||["-n %","n %"],a=e<0?l.pattern[0]||"-n":l.pattern[1]||"n",-1===o&&(o=l.decimals),n=m(n*("P"===d?100:1),o,l);break;default:return s(e,t,i)}return f(n,a,r)}function f(e,t,i){for(var s=/n|\$|-|%/g,a="";;){var r=s.lastIndex,n=s.exec(t);if(a+=t.slice(r,n?n.index:t.length),!n)break;switch(n[0]){case"n":a+=e;break;case"$":a+=i.currency.symbol||"$";break;case"-":/[1-9]/.test(e)&&(a+=i["-"]||"-");break;case"%":a+=i.percent.symbol||"%"}}return a}function _(e,t,i){"string"==typeof i&&(t=i,i=10),t=ej.globalize.findCulture(t);var s=NaN,a=t.numberFormat,r=t.numberFormat.pattern[0];if(e=e.replace(/ /g,""),e.indexOf(t.numberFormat.currency.symbol)>-1?(e=e.replace(t.numberFormat.currency.symbol||"$",""),e=e.replace(t.numberFormat.currency["."]||".",t.numberFormat["."]||"."),r=h(t.numberFormat.currency.pattern[0].replace("$",""))):e.indexOf(t.numberFormat.percent.symbol)>-1&&(e=e.replace(t.numberFormat.percent.symbol||"%",""),e=e.replace(t.numberFormat.percent["."]||".",t.numberFormat["."]||"."),r=h(t.numberFormat.percent.pattern[0].replace("%",""))),e=h(e),L.test(e))s=parseFloat(e,"",i);else if(A.test(e))s=parseInt(e,16);else{var n=p(e,a,r),o=n[0],l=n[1];""===o&&"-n"!==a.pattern[0]&&(n=p(e,a,"-n"),o=n[0],l=n[1]),o=o||"+";var d,c,u=l.indexOf("e");u<0&&(u=l.indexOf("E")),u<0?(c=l,d=null):(c=l.substr(0,u),d=l.substr(u+1));var m,g,f=a["."]||".",_=c.indexOf(f);_<0?(m=c,g=null):(m=c.substr(0,_),g=c.substr(_+f.length));var v=a[","]||",";m=m.split(v).join("");var b=v.replace(/\u00A0/g," ");v!==b&&(m=m.split(b).join(""));var x=o+m;if(null!==g&&(x+="."+g),null!==d){var y=p(d,a,r);x+="e"+(y[0]||"+")+y[1]}!i&&E.test(x)?s=parseFloat(x):i&&(s=parseInt(x,i))}return s}function v(e,t,i){return e<t||e>i}function b(e,t){var i=new Date;if(t<100){var s=e.twoDigitYearMax;s="string"==typeof s?(new Date).getFullYear()%100+parseInt(s,10):s;var a=i.getFullYear();t+=a-a%100,t>s&&(t-=100)}return t}function x(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}function y(e){return e.split("Â ").join(" ").toUpperCase()}function w(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=y(e[i]);return t}function C(e,t,i){var s,a=e.days,r=e._upperDays;return r||(e._upperDays=r=[w(a.names),w(a.namesAbbr),w(a.namesShort)]),t=y(t),i?-1===(s=x(r[1],t))&&(s=x(r[2],t)):s=x(r[0],t),s}function S(e,t,i){var s=e.months,a=e.monthsGenitive||e.months,r=e._upperMonths,n=e._upperMonthsGen;r||(e._upperMonths=r=[w(s.names),w(s.namesAbbr)],e._upperMonthsGen=n=[w(a.names),w(a.namesAbbr)]),t=y(t);var o=x(i?r[1]:r[0],t);return o<0&&(o=x(i?n[1]:n[0],t)),o}function T(e,t){for(var i=0,s=!1,a=0,r=e.length;a<r;a++){var n=e.charAt(a);"'"==n?(s?t.push("'"):i++,s=!1):"\\"==n?(s&&t.push("\\"),s=!s):(t.push(n),s=!1)}return i}function R(e,t,i,s){if(!e)return null;var a=0,r=0,n=null;t=t.split("");for(var o=t.length,l=function(e){for(var t=0,i=e.length,s=[];t<i;t++)s[t]=(e[t]+"").toLowerCase();return s};a<o;a++){if("d"===t[a]){var d=function(e){for(var i=0;t[a]===e;)i++,a++;return i>0&&(a-=1),i}("d");s._lowerDays||(s._lowerDays=function(e){var t,i={};for(t in e)i[t]=l(e[t]);return i}(s.days)),n=d<3?function(t){var i=new RegExp("^\\d{1,"+t+"}"),s=e.substr(r,t).match(i);return s?(s=s[0],r+=s.length,parseInt(s,10)):null}(2):function(t,i){for(var s,a,n,o=0,l=t.length;o<l;o++)if(s=t[o],a=s.length,n=e.substr(r,a),i&&(n=n.toLowerCase()),n==s)return r+=a,o+1;return null}(s._lowerDays[3==d?"namesAbbr":"names"],!0)}}return n}function k(e,t){t=t||"F";var i,s=e.patterns,a=t.length;if(1===a){if(!(i=s[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===a&&"%"===t.charAt(0)&&(t=t.charAt(1));return t}function O(e,t,i){e=h(e),t=h(t);var s=i.calendar,a=ej.globalize._getDateParseRegExp(s,t),r=new RegExp(a.regExp).exec(e);if(null===r)return null;for(var n,o=a.groups,d=null,c=null,u=null,p=0,m=0,g=0,f=0,_=null,x=!1,y=0,w=o.length;y<w;y++){var T=r[y+1];if(T){var k=o[y],O=k.length,D=parseInt(T,10);switch(k){case M.DAY_OF_MONTH_DOUBLE_DIGIT:case M.DAY_OF_MONTH_SINGLE_DIGIT:if(u=D,v(u,1,31))return null;break;case M.MONTH_THREE_LETTER:case M.MONTH_FULL_NAME:if(c=S(s,T,3===O),v(c,0,11))return null;break;case M.MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:if(c=D-1,v(c,0,11))return null;break;case M.YEAR_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_FULL:if(d=O<4?b(s,D):D,v(d,0,9999))return null;break;case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:if(p=D,12===p&&(p=0),v(p,0,11))return null;break;case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:if(p=D,v(p,0,23))return null;break;case M.MINUTES_SINGLE_DIGIT:case M.MINUTES_DOUBLE_DIGIT:if(m=D,v(m,0,59))return null;break;case M.SECONDS_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:if(g=D,v(g,0,59))return null;break;case M.MERIDIAN_INDICATOR_FULL:case M.MERIDIAN_INDICATOR_SINGLE:if(!(x=s.PM&&(T===s.PM[0]||T===s.PM[1]||T===s.PM[2]))&&(!s.AM||T!==s.AM[0]&&T!==s.AM[1]&&T!==s.AM[2]))return null;break;case M.DECISECONDS:case M.CENTISECONDS:case M.MILLISECONDS:if(f=D*Math.pow(10,3-O),v(f,0,999))return null;break;case M.DAY_OF_WEEK_THREE_LETTER:u=R(e,t,i,s);break;case M.DAY_OF_WEEK_FULL_NAME:if(C(s,T,3===O),v(null,0,6))return null;break;case M.TIME_ZONE_OFFSET_FULL:var I=T.split(/:/);if(2!==I.length)return null;if(n=parseInt(I[0],10),v(n,-12,13))return null;var j=parseInt(I[1],10);if(v(j,0,59))return null;_=60*n+(l(T,"-")?-j:j);break;case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:if(n=D,v(n,-12,13))return null;_=60*n}}}var L,A=new Date,E=s.convert;if(L=E?E.fromGregorian(A)[0]:A.getFullYear(),null===d&&(d=L),null===c&&(c=0),null===u&&(u=1),E){if(null===(A=E.toGregorian(d,c,u)))return null}else if(A.setFullYear(d,c,u),A.getDate()!==u)return null;if(x&&p<12&&(p+=12),A.setHours(p,m,g,f),null!==_){var P=A.getMinutes()-(_+A.getTimezoneOffset());A.setHours(A.getHours()+parseInt(P/60,10),P%60)}return A}function D(e,t,i){function s(e,t){var i,s=e+"";return t>1&&s.length<t?(i=u[t-2]+s,i.substr(i.length-t,t)):i=s}var a=i.calendar,r=a.convert;if(!t||!t.length||"i"===t){var n;return n=i&&i.name.length?r?D(e,a.patterns.F,i):e.toLocaleString():e.toString()}var o="s"===t;t=k(a,t),n=[];var l,d,h,c,u=["0","00","000"],p=/([^d]|^)(d|dd)([^d]|$)/g,m=0,g=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;for(!o&&r&&(c=r.fromGregorian(e));;){var f=g.lastIndex,_=g.exec(t);if(m+=T(t.slice(f,_?_.index:t.length),n),!_)break;if(m%2)n.push(_[0]);else{var v=_[0],b=v.length;switch(v){case M.DAY_OF_WEEK_THREE_LETTER:case M.DAY_OF_WEEK_FULL_NAME:var x=3===b?a.days.namesAbbr:a.days.names;n.push(x[e.getDay()]);break;case M.DAY_OF_MONTH_SINGLE_DIGIT:case M.DAY_OF_MONTH_DOUBLE_DIGIT:d=!0,n.push(s(c?c[2]:e.getDate(),b));break;case M.MONTH_THREE_LETTER:case M.MONTH_FULL_NAME:var y=c?c[1]:e.getMonth();n.push(a.monthsGenitive&&function(){return d||h?d:(d=p.test(t),h=!0,d)}()?a.monthsGenitive[3===b?"namesAbbr":"names"][y]:a.months[3===b?"namesAbbr":"names"][y]);break;case M.MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:n.push(s((c?c[1]:e.getMonth())+1,b));break;case M.YEAR_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_FULL:y=c?c[0]:e.getFullYear(),b<4&&(y%=100),n.push(s(y,b));break;case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:l=e.getHours()%12,0===l&&(l=12),n.push(s(l,b));break;case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:n.push(s(e.getHours(),b));break;case M.MINUTES_SINGLE_DIGIT:case M.MINUTES_DOUBLE_DIGIT:n.push(s(e.getMinutes(),b));break;case M.SECONDS_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:n.push(s(e.getSeconds(),b));break;case M.MERIDIAN_INDICATOR_SINGLE:case M.MERIDIAN_INDICATOR_FULL:y=e.getHours()<12?a.AM?a.AM[0]:" ":a.PM?a.PM[0]:" ",n.push(1===b?y.charAt(0):y);break;case M.DECISECONDS:case M.CENTISECONDS:case M.MILLISECONDS:n.push(s(e.getMilliseconds(),3).substr(0,b));break;case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:l=e.getTimezoneOffset()/60,n.push((l<=0?"+":"-")+s(Math.floor(Math.abs(l)),b));break;case M.TIME_ZONE_OFFSET_FULL:l=e.getTimezoneOffset()/60,n.push((l<=0?"+":"-")+s(Math.floor(Math.abs(l)),2)+":"+s(Math.abs(e.getTimezoneOffset()%60),2));break;case M.DATE_SEPARATOR:n.push(a["/"]||"/");break;default:throw"Invalid date format pattern '"+v+"'."}}}return n.join("")}function I(e,t){return t.length?I(e[t[0]],t.slice(1)):e}ej.globalize={},ej.cultures={},ej.cultures.default=ej.cultures["en-US"]=e.extend(!0,{name:"en-US",englishName:"English",nativeName:"English",language:"en",isRTL:!1,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{"/":"/",":":":",firstDay:0,week:{name:"Week",nameAbbr:"Wek",nameShort:"Wk"},days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},ej.cultures["en-US"]),ej.cultures["en-US"].calendar=ej.cultures["en-US"].calendar||ej.cultures["en-US"].calendars.standard;var j=/^\s+|\s+$/g,L=/^[+-]?infinity$/i,A=/^0x[a-f0-9]+$/i,E=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,P={9:"[0-9 ]",0:"[0-9 ]",a:"[A-Za-z0-9 ]",A:"[A-Za-z0-9]",N:"[0-9]","#":"[0-9]","&":"[^]+","<":"",">":"",C:"[A-Za-z ]","?":"[A-Za-z]"},M={DAY_OF_WEEK_THREE_LETTER:"ddd",DAY_OF_WEEK_FULL_NAME:"dddd",DAY_OF_MONTH_SINGLE_DIGIT:"d",DAY_OF_MONTH_DOUBLE_DIGIT:"dd",MONTH_THREE_LETTER:"MMM",MONTH_FULL_NAME:"MMMM",MONTH_SINGLE_DIGIT:"M",MONTH_DOUBLE_DIGIT:"MM",YEAR_SINGLE_DIGIT:"y",YEAR_DOUBLE_DIGIT:"yy",YEAR_FULL:"yyyy",HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:"h",HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:"hh",HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:"H",HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:"HH",MINUTES_SINGLE_DIGIT:"m",MINUTES_DOUBLE_DIGIT:"mm",SECONDS_SINGLE_DIGIT:"s",SECONDS_DOUBLE_DIGIT:"ss",MERIDIAN_INDICATOR_SINGLE:"t",MERIDIAN_INDICATOR_FULL:"tt",DECISECONDS:"f",CENTISECONDS:"ff",MILLISECONDS:"fff",TIME_ZONE_OFFSET_SINGLE_DIGIT:"z",TIME_ZONE_OFFSET_DOUBLE_DIGIT:"zz",TIME_ZONE_OFFSET_FULL:"zzz",DATE_SEPARATOR:"/"};ej.globalize._getDateParseRegExp=function(e,t){var i=e._parseRegExp;if(i){var s=i[t];if(s)return s}else e._parseRegExp=i={};for(var a,r=k(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),n=["^"],o=[],l=0,d=0,h=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;null!==(a=h.exec(r));){var c=r.slice(l,a.index);if(l=h.lastIndex,(d+=T(c,n))%2)n.push(a[0]);else{var u,p=a[0],m=p.length;switch(p){case M.DAY_OF_WEEK_THREE_LETTER:case M.DAY_OF_WEEK_FULL_NAME:case M.MONTH_FULL_NAME:case M.MONTH_THREE_LETTER:u="(\\D+)";break;case M.MERIDIAN_INDICATOR_FULL:case M.MERIDIAN_INDICATOR_SINGLE:u="(\\D*)";break;case M.YEAR_FULL:case M.MILLISECONDS:case M.CENTISECONDS:case M.DECISECONDS:u="(\\d{"+m+"})";break;case M.DAY_OF_MONTH_DOUBLE_DIGIT:case M.DAY_OF_MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:case M.MONTH_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_SINGLE_DIGIT:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.MINUTES_DOUBLE_DIGIT:case M.MINUTES_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:case M.SECONDS_SINGLE_DIGIT:u="(\\d\\d?)";break;case M.TIME_ZONE_OFFSET_FULL:u="([+-]?\\d\\d?:\\d{2})";break;case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:u="([+-]?\\d\\d?)";break;case M.DATE_SEPARATOR:u="(\\"+e["/"]+")";break;default:throw"Invalid date format pattern '"+p+"'."}u&&n.push(u),o.push(a[0])}}T(r.slice(l),n),n.push("$");var g=n.join("").replace(/\s+/g,"\\s+"),f={regExp:g,groups:o};return i[t]=f},ej.globalize.addCulture=function(t,i){ej.cultures[t]=e.extend(!0,e.extend(!0,{},ej.cultures.default,i),ej.cultures[t]),ej.cultures[t].calendar=ej.cultures[t].calendars.standard},ej.globalize.preferredCulture=function(e){return e=void 0!==e&&typeof e==typeof this.cultureObject?e.name:e,this.cultureObject=ej.globalize.findCulture(e),this.cultureObject},ej.globalize.setCulture=function(e){return ej.isNullOrUndefined(this.globalCultureObject)&&(this.globalCultureObject=ej.globalize.findCulture(e)),e=void 0!==e&&typeof e==typeof this.globalCultureObject?e.name:e,e&&(this.globalCultureObject=ej.globalize.findCulture(e)),ej.cultures.current=this.globalCultureObject,this.globalCultureObject},ej.globalize.culture=function(e){ej.cultures.current=ej.globalize.findCulture(e)},ej.globalize.findCulture=function(t){var i;if(t){if(e.isPlainObject(t)&&t.numberFormat&&(i=t),"string"==typeof t){var s=ej.cultures;if(s[t])return s[t];if(t.indexOf("-")>-1){var a=t.split("-")[0];if(s[a])return s[a]}else for(var r=e.map(s,function(e){return e}),n=0;n<r.length;n++){var o=r[n].name.split("-")[0];if(o===t)return r[n]}return ej.cultures.default}}else i=ej.cultures.current||ej.cultures.default;return i},ej.globalize.format=function(e,t,i){var s=ej.globalize.findCulture(i);return"number"==typeof e?e=g(e,t,s):e instanceof Date&&(e=D(e,t,s)),e},ej.globalize._round=function(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i},ej.globalize.parseInt=function(e,t,i){return t||(t=10),Math.floor(_(e,i,t))},ej.globalize.getISODate=function(e){if(e instanceof Date)return e.toISOString()},ej.globalize.parseFloat=function(e,t,i){return"string"==typeof t&&(i=t,t=10),_(e,i)},ej.globalize.parseDate=function(e,t,i){i=ej.globalize.findCulture(i);var s,a,r;if(t){if("string"==typeof t&&(t=[t]),t.length)for(var n=0,o=t.length;n<o;n++){var l=t[n];if(l&&(s=O(e,l,i)))break}}else{r=i.calendar.patterns;for(a in r)if(s=O(e,r[a],i))break}return s||null},ej.globalize.getLocalizedConstants=function(t,i){var s,a=t.replace("ej.","").split(".");return s=I(ej,a),e.extend(!0,{},s.Locale.default,s.Locale[i||this.cultureObject.name])},e.extend(ej,ej.globalize)}(jQuery);var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)};!function(e){var t=function(t){function i(i,s){if(t.call(this),this._rootCSS="e-combobox",this._setFirst=!1,this.PluginName="ejComboBox",this.validTags=["input"],this.type="editor",this._requiresID=!0,this.angular={require:["?ngModel","^?form","^?ngModelOptions"]},this.boolean=!0,this.isPreventBlur=!1,this.isDocumentClick=!1,this.isPopupOpen=!1,this.popupObj=null,this.beforePopupOpen=!1,this.preventFocus=!1,this.isDropDownClick=!1,this.isInteracted=!1,this.isValidKey=!1,this.isSelectCustom=!1,this.preventAutoFill=!1,this.isTyped=!1,this.isSelected=!1,this.prevSelectPoints={},this.initial=!0,this.typedString="",this.actionCompleteData={isUpdated:!1},this.isEscapeKey=!1,this.isFilterFocus=!1,this.isRequested=!1,this.isNotSearchList=!1,this.initRemoteRender=!1,this.searchKeyEvent=null,this.preventAltUp=!1,this.isTabKey=!1,this.model=null,this.defaults={autofill:!1,allowCustom:!0,htmlAttributes:{},allowFiltering:!1,query:null,showClearButton:!0,valueTemplate:null,readonly:!1,text:null,value:null,index:null,headerTemplate:null,footerTemplate:null,fields:{text:null,value:null,iconCss:null,groupBy:null},groupTemplate:null,itemTemplate:null,noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed",sortOrder:"None",dataSource:[],popupHeight:"300px",placeholder:null,cssClass:null,enabled:!0,enableRtl:!1,width:"100%",popupWidth:"100%",locale:"en-US",customValueSpecifier:null,filtering:null,actionBegin:null,actionComplete:null,actionFailure:null,select:null,focus:null,change:null,blur:null,close:null,dataBound:null},this.dataTypes={autofill:"boolean",allowCustom:"boolean",htmlAttributes:"object",allowFiltering:"boolean",showClearButton:"boolean",valueTemplate:"string",readonly:"boolean",text:"string",index:"number",headerTemplate:"string",footerTemplate:"string",dataSource:"data",query:"data",fields:"data",groupTemplate:"string",itemTemplate:"string",noRecordsTemplate:"string",actionFailureTemplate:"string",sortOrder:"enum",placeholder:"string",cssClass:"string",enabled:"boolean",enableRtl:"boolean",locale:"string"},this.observables=["value"],this.value=ej.util.valueFunction("value"),i&&(i.jquery||(i=e("#"+i)),i.length))return e(i).ejComboBox(s).data(this.PluginName)}return __extends(i,t),i.prototype._setModel=function(t){var i;for(i in t)switch(i){case"allowFiltering":this.model.allowFiltering=t[i],this.setSearchBox();break;case"allowCustom":this.model.allowCustom=t[i];break;case"htmlAttributes":this.model.htmlAttributes=t[i],this.setHTMLAttributes();break;case"width":this.model.width=t[i],e(this.inputWrapper.container).css({width:this.formatUnit(t[i])});break;case"placeholder":this.model.placeholder=t[i],this.setPlaceholder(t[i],this.inputElement);break;case"readonly":this.model.readonly=t[i],this.setReadonly(t[i],this.inputElement);break;case"cssClass":this.model.cssClass=t[i],this.setCssClass(t[i]),this.popupObj&&e(this.popupObj).addClass(t[i]);break;case"enableRtl":this.model.enableRtl=t[i],this.setEnableRtl();break;case"enabled":this.model.enabled=t[i],this.setEnable();break;case"text":case"value":case"index":if(null===t[i])return void this.clear();if(this.list||(this.model.dataSource instanceof ej.DataManager&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var s="text"==i?this.getElementByText(t[i]):"value"==i?this.getElementByValue(t[i]):this.liCollections[t[i]];this.isValidLI(s)?this.setSelection(s,null):"text"==i?this.setOldText(t[i]):"value"==i&&this.setOldValue(this.value(t[i]))}break;case"query":case"dataSource":case"fields":case"sortOrder":"sortOrder"==i&&(this.model.sortOrder=t[i]),"fields"==i&&(this.model.fields=t[i]),"query"==i&&(this.model.query=t[i]),"dataSource"==i&&(this.model.dataSource=t[i]),this.clear(),this.resetList(this.model.dataSource);break;case"footerTemplate":this.model.footerTemplate=t[i],this.popupObj&&this.setFooterTemplate(this.popupObj)}},i.prototype.wireEvent=function(){this._on(e(this.inputWrapper.buttons[0]),"mousedown",this.preventBlur),this._on(e(this.inputWrapper.container),"blur",this.onBlur),this._on(e(this.inputElement),"focus",this.targetFocus),this._on(e(this.inputElement),"blur",this.onBlur),this.model.readonly||(this._on(e(this.inputElement),"input",this.onInput),this._on(e(this.inputElement),"keyup",this.onFilterUp),this._on(e(this.inputElement),"keydown",this.onFilterDown)),ej.isNullOrUndefined(this.inputWrapper.buttons[0])||this._on(e(this.inputWrapper.buttons[0]),"mousedown",this.dropDownClick),ej.isDevice()||this._on(e(this.inputElement),"keydown",this.keyActionHandler),this.model.showClearButton&&this._on(e(this.inputWrapper.clearButton),"mousedown",this.resetHandler)},i.prototype.unWireEvent=function(){this._off(e(this.inputWrapper.buttons[0]),"mousedown",this.preventBlur),this._off(e(this.inputWrapper.container),"blur",this.onBlur),this._off(e(this.inputElement),"focus",this.targetFocus),this._off(e(this.inputElement),"blur",this.onBlur),ej.isNullOrUndefined(this.inputWrapper.buttons[0])||this._off(e(this.inputWrapper.buttons[0]),"mousedown",this.dropDownClick),this.model.readonly||(this._off(e(this.inputElement),"input",this.onInput),this._off(e(this.inputElement),"keyup",this.onFilterUp),this._off(e(this.inputElement),"keydown",this.onFilterDown)),ej.isDevice()||this._off(e(this.inputElement),"keydown",this.keyActionHandler),this.model.showClearButton&&this._off(e(this.inputWrapper.clearButton),"mousedown",this.resetHandler)},i.prototype.preventBlur=function(e){(!this.model.allowFiltering&&document.activeElement!==this.inputElement&&(ej.isNullOrUndefined(document.activeElement)||document.activeElement.className&&-1==document.activeElement.className.indexOf(comboBoxClasses.input))&&ej.isDevice()||!ej.isDevice())&&e.preventDefault()},i.prototype.setOldText=function(e){this.setInputValue(this.model.text,this.inputElement,this.model.showClearButton),this.customValue(),this.removeSelection()},i.prototype.setOldValue=function(e){this.valueMuteChange(this.model.allowCustom?this.value():null),this.removeSelection(),this.setHiddenValue()},i.prototype.valueMuteChange=function(e){var t=ej.isNullOrUndefined(e)?null:e.toString();this.setInputValue(t,this.inputElement,this.model.showClearButton),this.value(e),this.model.text=e?e.toString():null,this.model.index=null,this.activeIndex=this.model.index;var i=this.getFields(),s={};s[i.text]=ej.isNullOrUndefined(e)?null:e.toString(),s[i.value]=ej.isNullOrUndefined(e)?null:e.toString(),this.itemData=s,this.item=null,this.previousValue!==this.value()&&this.detachChangeEvent(null)},i.prototype.updateValues=function(){if(ej.isNullOrUndefined(this.value()))if(this.model.text&&ej.isNullOrUndefined(this.value())){var e=this.getElementByText(this.model.text);e?this.setSelection(e,null):(this.setInputValue(this.model.text,this.inputElement,this.model.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else{var e=this.getElementByValue(this.value());e?this.setSelection(e,null):this.model.allowCustom?this.valueMuteChange(this.value()):this.valueMuteChange(null)}this.setHiddenValue(),this.setInputValue(this.model.text,this.inputElement,this.model.showClearButton)},i.prototype.getAriaAttributes=function(){return{"aria-owns":this.element[0].id+"_options",role:"combobox","aria-autocomplete":"both","aria-hasPopup":"true","aria-expanded":"false","aria-readonly":this.model.readonly.toString(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}},i.prototype.searchLists=function(t){this.isTyped=!0,this.model.allowFiltering?(this.listsearchLists(t),""===e.trim(this.filterInput.value)&&this.setHoverList(this.ulElement.querySelector("."+comboBoxClasses.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+comboBoxClasses.li)),this.incrementalSearch(t))},i.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.model.allowFiltering?this.inputWrapper:inputObject},i.prototype.onActionComplete=function(e,t,i,s){this.listonActionComplete(e,t,i),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&this.isTyped&&this.inlineSearch()},i.prototype.getFocusElement=function(){var t=this.isSelectCustom?{text:""}:this.getItemData(),i=this.list.querySelector("."+comboBoxClasses.selected);if(t.text===this.inputElement.value&&!ej.isNullOrUndefined(i))return i;if((ej.isDevice()&&!this.isDropDownClick||!ej.isDevice())&&!ej.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0){var s=this.inputElement.value,a=this.search(s,this.liCollections,"StartsWith",!0),r=a.item;if(ej.isNullOrUndefined(r))this.isSelectCustom&&""!==e.trim(this.inputElement.value)&&(this.removeFocus(),this.list.scrollTop=0);else{var n=this.getIndexByValue(r.getAttribute("data-value"))-1,o=parseInt("undefined"!=typeof getComputedStyle?getComputedStyle(this.liCollections[0],null).getPropertyValue("height"):this.liCollections[0].currentStyle.height,10);if(!isNaN(o)){var l=this.model.fields.groupBy?this.liCollections[0].offsetHeight:0;this.list.scrollTop=n*o+l,e(r).addClass(comboBoxClasses.focus)}}return r}return null},i.prototype.setValue=function(e){return e&&"keydown"===e.type&&13===e.KeyCode&&this.removeFillSelection(),this.model.autofill&&e&&"keydown"===e.type&&13!==e.keyCode?(this.preventAutoFill=!1,this.inlineSearch(e),!1):this.listsetValue(e)},i.prototype.setAutoFill=function(e,t){if(t||this.setHoverList(e),this.model.autofill&&!this.preventAutoFill){var i=this.getTextByValue(e.getAttribute("data-value")).toString(),s=this.getFormattedValue(e.getAttribute("data-value"));this.isSelected||this.previousValue===s?this.updateSelectedItem(e,null,!0):(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(e.getAttribute("data-value"))),this.isAndroidAutoFill(i)||this.setAutoFillSelection(i)}},i.prototype.isAndroidAutoFill=function(e){if(ej.isMobile()){var t=this.getSelectionPoints(),i=this.prevSelectPoints.end,s=t.end,a=this.prevSelectPoints.start,r=t.start;return 0!==i&&(i===e.length&&a===e.length||a>r&&i>s||i===s&&a===r)}return!1},i.prototype.inlineSearch=function(e){var t=e&&(40===e.keyCode||38===e.keyCode||36===e.keyCode||35===e.keyCode||33===e.keyCode||34===e.keyCode),i=t?this.liCollections[this.activeIndex]:this.getFocusElement();if(ej.isNullOrUndefined(i))if(""===this.inputElement.value){this.activeIndex=null,this.list.scrollTop=0;var s=this.list.querySelector("."+comboBoxClasses.li);this.setHoverList(s)}else this.activeIndex=null,this.removeSelection(),this.removeFocus();else{if(!t){var a=this.getFormattedValue(i.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(a),this.activeIndex=ej.isNullOrUndefined(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(i,t)}},
i.prototype.incrementalSearch=function(e){this.isWatermark||this.hiddenSpan.css("display","none"),this.showPopup(),ej.isNullOrUndefined(this.listData)||(this.inlineSearch(e),e.preventDefault())},i.prototype.setAutoFillSelection=function(e){var t=this.getSelectionPoints(),i=this.inputElement.value.substr(0,t.start);if(i&&i.toLowerCase()===e.substr(0,t.start).toLowerCase()){var s=i+e.substr(i.length,e.length);this.setInputValue(s,this.inputElement,this.model.showClearButton),this.inputElement.setSelectionRange(t.start,this.inputElement.value.length)}else this.setInputValue(e,this.inputElement,this.model.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length)},i.prototype.setSelection=function(e,t){this.listsetSelection(e,t),ej.isNullOrUndefined(e)||this.model.autofill||this.isDropDownClick||this.removeFocus()},i.prototype.selectCurrentItem=function(e){var t;this.isPopupOpen&&(t=this.list.querySelector("."+comboBoxClasses.focus),t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))),this.isTyped&&!this.isSelected&&ej.isNullOrUndefined(t)&&this.customValue(),this.hidePopup()},i.prototype.setHoverList=function(t){this.removeSelection(),this.isValidLI(t)&&-1==t.className.indexOf(comboBoxClasses.selected)&&(this.removeFocus(),e(t).addClass(comboBoxClasses.focus))},i.prototype.targetFocus=function(t){e(this.inputWrapper.container).addClass(comboBoxClasses.inputFocus),ej.isDevice()&&!this.model.allowFiltering&&(this.preventFocus=!1),this.isWatermark||this.hiddenSpan.css("display","none"),this.onFocus()},i.prototype.dropDownClick=function(e){ej.isDevice()&&!this.model.allowFiltering&&(this.preventFocus=!0),this.listdropDownClick(e)},i.prototype.customValue=function(){var t=this.getValueByText(this.inputElement.value,!0);if(this.model.allowCustom||""===this.inputElement.value){if(""!==e.trim(this.inputElement.value)){var i=this.value();if(ej.isNullOrUndefined(t)){var s=""===this.inputElement.value?null:this.inputElement.value,a=this.getFields(),r=void 0;r={text:s,item:{}},this.initial||this._trigger("customValueSpecifier",r);var n=r.item,o={};n&&n[a.text]&&n[a.value]?o=n:(o[a.text]=s,o[a.value]=s),this.itemData=o,this.model.text=this.itemData[a.text],this.value(this.itemData[a.value]),this.model.index=null,this.setSelection(null,null),this.isSelectCustom=!0}else this.isSelectCustom=!1,this.value(t);i!==this.value()&&this.onChangeEvent(null)}}else this._setModel({value:t}),this.value(t),ej.isNullOrUndefined(this.value())&&this.setInputValue("",this.inputElement,this.model.showClearButton)},i.prototype._init=function(){this.listrender(),this.setSearchBox(),this.model.allowFiltering&&ej.isNullOrUndefined(this.list)&&this.renderList()},i.prototype.hidePopup=function(){if(!ej.isNullOrUndefined(this.listData)){var t=this.isEscapeKey;this.isEscapeKey&&(this.setInputValue(this.typedString,this.inputElement,this.model.showClearButton),this.isEscapeKey=!1),this.model.autofill&&this.removeFillSelection();var i=this.isSelectCustom?{text:""}:this.getItemData(),s=this.list.querySelector("."+comboBoxClasses.selected);if(i.text===this.inputElement.value&&!ej.isNullOrUndefined(s))return this.isSelected&&(this.onChangeEvent(null),this.isSelectCustom=!1),void this.listhidePopup();if(""!==e.trim(this.inputElement.value)){var a=this.search(this.inputElement.value,this.liCollections,"Equal",!0);this.selectedLI=a.item,ej.isNullOrUndefined(a.index)&&(a.index=this.search(this.inputElement.value,this.liCollections,"StartsWith",!0).index),this.activeIndex=a.index,ej.isNullOrUndefined(this.selectedLI)?t&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}this.isEscapeKey||!this.isTyped||this.isInteracted||this.customValue()}this.listhidePopup()},i.prototype.focusIn=function(){ej.isDevice()&&!this.model.allowFiltering&&(this.preventFocus=!0),this.listfocusIn()},i.prototype.listhidePopup=function(){this.closePopup();var t=this.getItemData();""!==e.trim(this.inputElement.value)||this.isInteracted||!this.isSelectCustom&&(ej.isNullOrUndefined(this.selectedLI)||this.inputElement.value===t.text)||(this.isSelectCustom=!1,this.clear())},i.prototype.closePopup=function(t){if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj))if(this._off(e(document),"mousedown",this.onDocumentClick),this.isActive=!1,this.isDropDownClick=!1,this.isDocumentClick=!1,this.preventAutoFill=!1,this._off(ej.getScrollableParents(e(this.inputWrapper.container)),"scroll",this.scrollHandler),e(this.inputElement).attr({"aria-expanded":"false","aria-activedescendant":null}),e(this.inputWrapper.container).removeClass(comboBoxClasses.iconAnimation),this.model.allowFiltering&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1,this.isPopupOpen){var i=this;this.isPopupOpen=!1,e(this.popupObj).fadeOut(100,function(){e(i.popupObj).removeClass("e-popup-open").addClass("e-popup-close"),i._trigger("close",{popup:i.popupObj}),i.destroyPopup()})}else this.destroyPopup()},i.prototype.scrollHandler=function(){ej.isDevice()&&!this.model.allowFiltering&&this.isDropDownClick&&this.hidePopup()},i.prototype.destroyPopup=function(){this.isFilterFocus=!1,this.popupObj&&e("#"+this.popupObj.id+".e-ddl.e-popup.e-control").remove(),this.popupObj=null},i.prototype.onDocumentClick=function(t){var i=t.target;if(!ej.isNullOrUndefined(this.popupObj)&&e(i).closest("#"+this.popupObj.id).length>0||this.inputWrapper.container.contains(t.target))i===this.inputElement||this.model.allowFiltering&&i===this.filterInput||!this.model.allowFiltering&&ej.isDevice()&&i===this.inputWrapper.buttons[0]||(this.isPreventBlur=!("msie"!=ej.browserInfo().name&&"edge"!==ej.browserInfo().name||document.activeElement!==this.inputElement&&document.activeElement!==this.filterInput),t.preventDefault());else if(this.inputWrapper.container.className.indexOf(comboBoxClasses.inputFocus)>-1||this.isPopupOpen){this.isDocumentClick=!0;var s=this.isRequested;this.isInteracted=!1,this.hidePopup(),s||(this.onFocusOut(),e(this.inputWrapper.container).removeClass(comboBoxClasses.inputFocus))}},i.prototype.onFocusOut=function(){this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.dispatchEvent(this.hiddenElement,"change"),this.inputWrapper.clearButton&&e(this.inputWrapper.clearButton).addClass(comboBoxClasses.clearIconHide),this._trigger("blur")},i.prototype.dispatchEvent=function(e,t){if(document.createEvent){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)}},i.prototype.onBlur=function(e){var t=e.relatedTarget,i=e.target,s=this.isPreventBlur;return this.isPreventBlur=!1,!s||this.isDocumentClick||!this.isPopupOpen||ej.isNullOrUndefined(i)&&!ej.isNullOrUndefined(t)?this.isDocumentClick||!ej.isNullOrUndefined(this.popupObj)&&document.body.contains(this.popupObj)&&this.popupObj.className.indexOf(comboBoxClasses.mobileFilter)>-1?void(this.beforePopupOpen||(this.isDocumentClick=!1)):void((document.activeElement!==t||document.activeElement===t&&i.className.indexOf(comboBoxClasses.inputFocus)>-1||!this.inputWrapper.container.contains(t)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(),this.isTabKey=!1)):void this.inputElement.focus()},i.prototype.focusOutAction=function(){this.isInteracted=!1,this.focusOut(),this.onFocusOut()},i.prototype.focusOut=function(){this.isTyped=!0,this.hidePopup(),this.inputElement.blur(),e(this.inputWrapper.container).removeClass(comboBoxClasses.inputFocus)},i.prototype.listdropDownClick=function(t){if(!(this.inputElement.className.indexOf(comboBoxClasses.disable)>-1||this.inputWrapper.clearButton===t.target)){t.target;this.model.readonly||(this.isPopupOpen?this.hidePopup():(this.focusIn(),this.queryString=""===e.trim(this.inputElement.value)?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup()))}},i.prototype.showPopup=function(){if(this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.model.allowFiltering&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(ej.isNullOrUndefined(this.list)||void 0!=this.list&&this.list.className.indexOf(comboBoxClasses.noData)>-1)&&this.renderList(),(!ej.isNullOrUndefined(this.list.children[0])||this.list.className.indexOf(comboBoxClasses.noData)>-1)&&this.renderPopup(),e(this.inputElement).attr({"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.model.cssClass&&this.popupObj&&e(this.popupObj).addClass(this.model.cssClass)},i.prototype.listfocusIn=function(){if(!(this.inputElement.className.indexOf(comboBoxClasses.disable)>-1)){var t=!1;this.preventFocus&&ej.isDevice()&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,t=!0),t||this.inputElement.focus(),e(this.inputWrapper.container).addClass(comboBoxClasses.inputFocus),this.onFocus()}},i.prototype.onFocus=function(){this.isInteracted||(this.isInteracted=!0,this._trigger("focus")),this.updateIconState()},i.prototype.updateIconState=function(){this.model.showClearButton&&(""!==this.inputElement.value?e(this.inputWrapper.clearButton).removeClass(comboBoxClasses.clearIconHide):e(this.inputWrapper.clearButton).addClass(comboBoxClasses.clearIconHide))},i.prototype.refreshPopup=function(){!ej.isNullOrUndefined(this.popupObj)&&document.body.contains(this.popupObj)&&this.setPopupPosition()},i.prototype.renderPopup=function(){if(this.popupObj&&document.body.contains(this.popupObj))return void this.refreshPopup();var t=ej.buildTag("div#"+this.element[0].id+"_popup.e-ddl e-popup e-widget")[0],i=this.setSearchBox();if(this.listHeight=this.formatUnit(this.model.popupHeight),this.model.headerTemplate){this.header=document.createElement("div"),e(this.header).addClass(comboBoxClasses.header),this.header.innerHTML=this.model.headerTemplate,e(t).append(this.header)}if(e(t).append(this.list),this.model.footerTemplate&&this.setFooterTemplate(t),t.style.visibility="hidden",t.style.display="none",document.body.appendChild(t),"auto"!==this.model.popupHeight){if(this.searchBoxHeight=0,ej.isNullOrUndefined(i.container)||(this.searchBoxHeight=i.container.parentElement.getBoundingClientRect().height,this.listHeight=(parseInt(this.listHeight,10)-this.searchBoxHeight).toString()+"px"),this.model.headerTemplate){var s=Math.round(this.header.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(s+this.searchBoxHeight)).toString()+"px"}if(this.model.footerTemplate){var s=Math.round(this.footer.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(s+this.searchBoxHeight)).toString()+"px"}this.list.style.maxHeight=(parseInt(this.listHeight,10)-2).toString()+"px",t.style.maxHeight=this.formatUnit(this.model.popupHeight)}else t.style.height="auto";if(!ej.isNullOrUndefined(this.selectedLI)&&!ej.isNullOrUndefined(this.activeIndex)&&this.activeIndex>=0?this.setScrollPosition():this.list.scrollTop=0,ej.isDevice()&&!this.model.allowFiltering&&this.isDropDownClick){this.setPopupPosition();var a=this.isEmptyList()?this.list:this.liCollections[0];parseInt("undefined"!=typeof getComputedStyle?getComputedStyle(a).textIndent:a.currentStyle.textIndent,10),parseInt("undefined"!=typeof getComputedStyle?getComputedStyle(this.inputElement).textIndent:this.inputElement.currentStyle.textIndent,10),parseInt("undefined"!=typeof getComputedStyle?getComputedStyle(this.inputElement.parentElement).borderLeftWidth:this.inputElement.parentElement.currentStyle.textIndent),-10}this.getFocusElement(),this.popupObj=e(t).css("width",this.setWidth()).addClass("e-control e-popup e-ddl")[0],this.model.enableRtl?e(t).addClass(comboBoxClasses.rtl):e(t).removeClass(comboBoxClasses.rtl),ej.isDevice()&&e(this.popupObj).addClass(comboBoxClasses.device),this.setListPosition(),t.style.visibility="visible",this._on(ej.getScrollableParents(e(this.inputWrapper.container)),"scroll",this.scrollHandler),this._on(ej.getScrollableParents(e(this.inputWrapper.container)),"scroll",this.setListPosition),this._on(e(window),"resize",this.setListPosition),e(this.inputElement).attr({"aria-expanded":"true"});var r=this.model.allowFiltering?this.filterInput.parentElement:this.inputWrapper.container;e(r).addClass(comboBoxClasses.inputFocus),e(this.inputWrapper.container).addClass(comboBoxClasses.iconAnimation),this.beforePopupOpen=!0;var n=this;e(this.popupObj).fadeIn(100,function(){n.isPopupOpen=!0,n.activeStateChange(),e(n.popupObj).addClass("e-popup-open"),n._trigger("open",{popup:n.popupObj}),n.model.allowFiltering&&n.filterInput.focus()}),this._on(e(document),"mousedown",this.onDocumentClick),this.wireListEvents(),this.model.fields.groupBy&&this._on(e(this.list),"scroll",this.setFloatingHeader)},i.prototype.setListPosition=function(){var t,i=this.inputWrapper.container,s=ej.getOffset(e(i)),a=e(document).scrollTop()+e(window).height()-(s.top+e(i).outerHeight()),r=s.top-e(document).scrollTop(),n=e(this.popupObj).outerHeight(),o=e(this.popupObj).outerWidth(),l=s.left,d=e(i).outerHeight(),h=(d-e(i).height())/2,c=ej.getZindexPartial(this.element,this.popupObj),u=(n<a||n>r?s.top+d+3:s.top-n-3)-h;t=e(document).scrollLeft()+e(window).width()-l,(this.model.enableRtl||o>t&&o<l+e(i).outerWidth())&&(l-=e(this.popupObj).outerWidth()-e(i).outerWidth()),e(this.popupObj).css({left:l+"px",top:u+"px","z-index":c})},i.prototype.setFooterTemplate=function(t){this.footer?this.footer.innerHTML="":(this.footer=document.createElement("div"),e(this.footer).addClass(comboBoxClasses.footer)),this.footer.innerHTML=this.model.footerTemplate,e(t).append(this.footer)},i.prototype.setPopupPosition=function(){var e,t=this.list.querySelector("."+comboBoxClasses.focus)||this.selectedLI,i=this.isEmptyList()?this.list:this.liCollections[0],s=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],a=i.getBoundingClientRect().height,r=parseInt(this.listHeight,10)/2,n=ej.isNullOrUndefined(t)?i.offsetTop:t.offsetTop;if(s.offsetTop-r<n&&!ej.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0&&!ej.isNullOrUndefined(t)){var o=parseInt(this.model.popupHeight,10)/a,l=parseInt("undefined"!=typeof getComputedStyle?getComputedStyle(this.list).paddingBottom:this.list.currentStyle.paddingBottom,10);e=(o-(this.liCollections.length-this.activeIndex))*a-2+l,this.list.scrollTop=t.offsetTop}else n>r?(e=r-a/2,this.list.scrollTop=n-r+a/2):e=n;return-(e=e+a-2+(a-this.inputWrapper.container.offsetHeight)/2)},i.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),e(this.inputWrapper.container).removeClass(comboBoxClasses.inputFocus))},i.prototype.isEmptyList=function(){return!ej.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length},i.prototype.formatUnit=function(e){var t=e+"";return"auto"===t||-1!==t.indexOf("%")||-1!==t.indexOf("px")?t:t+"px"},i.prototype.createInput=function(t){var i={container:null,buttons:[],clearButton:null};i.container=ej.buildTag("span."+comboBoxClasses.input+" e-widget")[0],t.element.parentNode.insertBefore(i.container,t.element),i.container.appendChild(e(t.element).addClass("e-input")[0]),t.properties.showClearButton&&(i.clearButton=this.createClearButton(t.element,i.container));var s=ej.buildTag("span."+t.buttons[0])[0];return"msie"===ej.browserInfo().name&&parseInt(ej.browserInfo().version)<=10&&(9==parseInt(ej.browserInfo().version)?e(s).addClass("e-comboie9"):8==parseInt(ej.browserInfo().version)&&e(s).addClass("e-comboie8"),e(s).addClass("e-comboie")),i.container.appendChild(s),i.buttons.push(s),-1==i.container.className.indexOf(comboBoxClasses.input)&&e(i.container).addClass("e-input-group"),t.properties.readonly?e(this.inputElement).attr({readonly:""}):this.inputElement.removeAttribute("readonly"),i},i.prototype.createClearButton=function(t,i){var s=ej.buildTag("span."+comboBoxClasses.clearIcon+("msie"===ej.browserInfo().name&&parseInt(ej.browserInfo().version)<=10?" e-comboie":""))[0];return i.appendChild(s),t.value?e(s).removeClass(comboBoxClasses.clearIconHide):e(s).addClass(comboBoxClasses.clearIconHide),this._on(e(s),"click",function(i){t.className.indexOf(comboBoxClasses.disable)>-1||t.readOnly||(i.preventDefault(),t!==document.activeElement&&t.focus(),t.value="",e(s).addClass(comboBoxClasses.clearIconHide))}),s},i.prototype.setWidth=function(){var e=this.formatUnit(this.model.popupWidth);if(e.indexOf("%")>-1){e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px"}if(ej.isDevice()&&!this.model.allowFiltering&&this.isDropDownClick){var t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt("undefined"!=typeof getComputedStyle?getComputedStyle(t).textIndent:t.currentStyle.textIndent,10)-parseInt("undefined"!=typeof getComputedStyle?getComputedStyle(this.inputElement).textIndent:this.inputElement.currentStyle.textIndent,10)+parseInt("undefined"!=typeof getComputedStyle?getComputedStyle(this.inputElement.parentElement).borderLeftWidth:this.inputElement.parentElement.currentStyle.borderLeftWidth,10))+"px"}return e},i.prototype.clearText=function(){this.filterInput.value="",this.searchLists(null)},i.prototype.onInput=function(){this.isValidKey=!0,this.updateIconState()},i.prototype.onFilterUp=function(e){if(this.isValidKey=40===e.keyCode||38===e.keyCode||this.isValidKey,this.isValidKey)switch(this.isValidKey=!1,e.keyCode){case 38:case 40:this.preventAutoFill=!1,this.preventAltUp=!1,e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.resetFocusElement(),this.activeIndex=null),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}},i.prototype.onFilterDown=function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},i.prototype.resetHandler=function(e){e.preventDefault(),this.clear()},i.prototype.clear=function(){this.list&&(this.model.allowFiltering&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()),this.hiddenElement.innerHTML="",this.inputElement.value="",this.value(null),this.model.text=null,this.model.index=null,this.activeIndex=null,this.item=null,this.itemData=null,this.queryString="",this.setSelection(null,null),this.isSelectCustom=!1,this.onChangeEvent(null),this.updateIconState()},i.prototype.resetFocusElement=function(){this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0;var t=this.ulElement.querySelector("."+comboBoxClasses.li);t&&e(t).addClass(comboBoxClasses.focus)},i.prototype.keyActionHandler=function(e){var t=33===e.keyCode||34===e.keyCode,i=36===e.keyCode||35===e.keyCode;this.isEscapeKey=27===e.keyCode,this.isTabKey=!this.isPopupOpen&&9===e.keyCode;var s=40===e.keyCode||38===e.keyCode||33===e.keyCode||34===e.keyCode||36===e.keyCode||35===e.keyCode;if((!t&&!i||this.isPopupOpen)&&!this.model.readonly){var a=9===e.keyCode||9===e.keyCode&&e.shiftKey;if(void 0!==this.list||this.isRequested||a||27===e.keyCode||(this.searchKeyEvent=e,this.renderList()),ej.isNullOrUndefined(this.list)||!ej.isNullOrUndefined(this.liCollections)&&s&&0===this.liCollections.length||this.isRequested)return;switch((a&&this.isPopupOpen||27===e.keyCode)&&e.preventDefault(),this.isSelected=27!==e.keyCode&&this.isSelected,this.isTyped=!s&&27!==e.keyCode&&this.isTyped,e.keyCode){case 40:case 38:if(e.altKey&&40===e.keyCode){this.showPopup();break}if(e.altKey&&38===e.keyCode){this.preventAltUp=this.isPopupOpen,this.hidePopup();break}var r=this.list.querySelector("."+comboBoxClasses.focus);if(ej.isNullOrUndefined(r)){var n=void 0,o=40===e.keyCode?this.activeIndex+1:this.activeIndex-1;n=ej.isNullOrUndefined(this.activeIndex)?this.liCollections[0]:this.liCollections[o],this.setSelection(n,e)}else this.setSelection(r,e);e.preventDefault();break;case 33:this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case 34:this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case 36:if(e.preventDefault(),0===this.activeIndex)return;this.setSelection(this.liCollections[0],e);break;case 35:e.preventDefault();var l=this.getItems().length-1;if(this.activeIndex===l)return;this.setSelection(this.liCollections[l],e);break;case 13:this.selectCurrentItem(e);break;case 27:case 9:this.isPopupOpen&&this.hidePopup()}}},i.prototype.getPageCount=function(){var e=this.list.className.indexOf(comboBoxClasses.noData)>-1?null:"undefined"!=typeof getComputedStyle?getComputedStyle(this.getItems()[0],null).getPropertyValue("height"):this.getItems()[0].currentStyle.height;return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))},i.prototype.pageUpSelection=function(e,t){var i=e>=0?this.liCollections[e+1]:this.liCollections[0];this.setSelection(i,t)},i.prototype.pageDownSelection=function(e,t){var i=this.getItems(),s=e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1];this.setSelection(s,t)},i.prototype.getValueByText=function(e,t){var i=null,s=this.listData,a=this.model.fields.text?this.model.fields.text:"text",r=this.model.fields.value?this.model.fields.value:a;if(t)if("string"==typeof s[0]||"number"==typeof s[0])for(var n=0,o=s;n<o.length;n++){var l=o[n];if(String(l).toLowerCase()===e.toString().toLowerCase()){i="string"==typeof s[0]?String(l):this.getFormattedValue(String(l));break}}else s.filter(function(t){if(t[a].toString().toLowerCase()===e.toLowerCase())return i=t[r],!0});else if("string"==typeof s[0]||"number"==typeof s[0])for(var d=0,h=s;d<h.length;d++){var l=h[d];if(String(l)===e.toString()){i="string"==typeof s[0]?e:this.getFormattedValue(e);break}}else s.filter(function(t){if(t[a]===e)return i=t[r],!0});return i},i.prototype.removeSelection=function(){var t=this.list.querySelectorAll("."+comboBoxClasses.selected);t.length&&(e(t).removeClass(comboBoxClasses.selected),t[0].removeAttribute("aria-selected"))},i.prototype.listonActionComplete=function(t,i,s,a){if(this.isNotSearchList)return void(this.isNotSearchList=!1);if(this.isActive){var r=this.selectedLI?this.selectedLI.cloneNode(!0):null;this.baseonActionComplete(t,i,s),this.isRequested&&!ej.isNullOrUndefined(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!ej.isNullOrUndefined(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,ej.isNullOrUndefined(t)||e(t).attr({id:this.element[0].id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.model.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1),this.model.allowFiltering&&!this.isTyped&&(this.actionCompleteData.isUpdated||(this.actionCompleteData={ulElement:t.cloneNode(!0),list:i,isUpdated:!0}),this.addNewItem(i,r),ej.isNullOrUndefined(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}},i.prototype.addNewItem=function(t,i){var s=this;if(!ej.isNullOrUndefined(this.itemData)&&!ej.isNullOrUndefined(i)){var a=this.getItemData().value;t.some(function(e){return e[s.model.fields.value]===a})||(this.addItem(this.itemData),this.actionCompleteData.list.push(this.itemData),this.actionCompleteData.ulElement.appendChild(i));var r=void 0;r=this.actionCompleteData.ulElement.querySelectorAll("."+comboBoxClasses.selected),r.length&&(e(r).removeClass(comboBoxClasses.selected),r[0].removeAttribute("aria-selected"))}},i.prototype.removeFocus=function(){var t=this.list.querySelectorAll("."+comboBoxClasses.focus);t&&t.length&&e(t).removeClass(comboBoxClasses.focus)},i.prototype.getItemData=function(){var e=this.model.fields.text?this.model.fields.text:"text",t=this.model.fields.value?this.model.fields.value:e,i={};return i=this.itemData,{value:ej.isNullOrUndefined(i)||ej.isNullOrUndefined(i[t])?i:i[t],text:ej.isNullOrUndefined(i)||ej.isNullOrUndefined(i[e])?i:i[e]}},i.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")},i.prototype.getSelectionPoints=function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},i.prototype.updateSelectedItem=function(t,i,s){this.removeSelection(),e(t).addClass(comboBoxClasses.selected),this.removeHover();var a=this.getFormattedValue(t.getAttribute("data-value"));if(this.item=t,this.itemData=this.getDataByValue(a),!this.initial&&!s){this.isSelected=!0;var r={e:i,item:this.item,itemData:this.itemData,isInteracted:!!i,text:this.itemData[this.model.fields.text],value:this.itemData[this.model.fields.value]};this._trigger("select",r)}var n=this.list.querySelector("."+comboBoxClasses.focus);n&&e(n).removeClass(comboBoxClasses.focus),t.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(a)},i.prototype.setHiddenValue=function(){if(ej.isNullOrUndefined(this.value()))this.hiddenElement.innerHTML="";else{var t=document.createElement("option");t.innerText=this.model.text,t.selected=!0,t.setAttribute("value",this.value()),e(this.hiddenElement).append(t)}},i.prototype.detachChangeEvent=function(e){if(this.isSelected=!1,this.previousValue=this.value(),this.activeIndex=this.model.index,this.typedString=ej.isNullOrUndefined(this.model.text)?"":this.model.text,!this.initial){this.setHiddenValue();var t={e:e,item:this.item,itemData:this.itemData,isInteracted:!!e,value:this.value()};this._trigger("_change",{value:this.value()}),this._trigger("change",t)}},i.prototype.getElementByValue=function(e){for(var t,i=this.getItems(),s=0,a=i;s<a.length;s++){var r=a[s];if(this.getFormattedValue(r.getAttribute("data-value"))===e){t=r;break}}return t},i.prototype.getElementByText=function(e){return this.getElementByValue(this.getValueByText(e))},i.prototype.listsearchLists=function(t){var i=this;if(this.isTyped=!0,this.activeIndex=null,this.filterInput.parentElement.querySelector("."+comboBoxClasses.clearIcon)){this.filterInput.parentElement.querySelector("."+comboBoxClasses.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"}this.model.allowFiltering&&this._trigger("filtering",{text:this.filterInput.value,updateData:function(t,s,a){ej.isNullOrUndefined(i.filterInput)||(i.beforePopupOpen=!0,""===e.trim(i.filterInput.value)?(i.actionCompleteData.isUpdated=!1,i.isTyped=!1,i.onActionComplete(i.actionCompleteData.ulElement,i.actionCompleteData.list),i.isTyped=!0,i.isNotSearchList=!0):(i.isNotSearchList=!1,i.resetList(t,a,s)))},event:t})},i.prototype.focusIndexItem=function(){var e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);var t=this.list.querySelector('[data-value="'+e+'"]');this.selectedLI=t,this.activeItem(t),this.removeFocus()},i.prototype.activeItem=function(t){this.isValidLI(t)&&-1==t.className.indexOf(comboBoxClasses.selected)&&(this.removeSelection(),e(t).addClass(comboBoxClasses.selected),this.removeHover(),t.setAttribute("aria-selected","true"))},i.prototype.removeFillSelection=function(){if(this.isInteracted){var e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}},i.prototype.listsetValue=function(e){var t=this.getItemData();return ej.isNullOrUndefined(t.value)?this.setInputValue(null,this.inputElement,this.model.showClearButton):this.setInputValue(t.text,this.inputElement,this.model.showClearButton),this.previousValue===t.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,!1)},i.prototype.listsetSelection=function(t,i){if(this.isValidLI(t)&&-1==t.className.indexOf(comboBoxClasses.selected)&&this.updateSelectedItem(t,i,!1),this.list&&this.removeHover(),this.selectedLI=t,!this.setValue(i)){if(this.model.valueTemplate&&null!==this.itemData){this.valueTempElement||(this.valueTempElement=ej.buildTag("span."+comboBoxClasses.value)[0],this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none",this.inputWrapper.container.focus(),e(this.inputWrapper.container).addClass(comboBoxClasses.inputFocus)),this.valueTempElement.innerHTML="",this.valueTempElement.innerHTML=this.model.valueTemplate}else this.inputElement.previousSibling===this.valueTempElement&&(e(this.valueTempElement).remove(),this.inputElement.style.display="block");this.isPopupOpen&&e(this.inputElement).attr({"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),(!this.isPopupOpen&&!ej.isNullOrUndefined(t)||this.isPopupOpen&&!ej.isNullOrUndefined(i)&&("keydown"!==i.type||"keydown"===i.type&&13===i.keyCode))&&(this.isSelectCustom=!1,this.onChangeEvent(i)),!this.isPopupOpen||ej.isNullOrUndefined(this.selectedLI)||null===this.itemData||i&&"click"===i.type||this.setScrollPosition(i)}},i.prototype.setScrollPosition=function(e){if(ej.isNullOrUndefined(e))this.scrollBottom(!0);else switch(e.keyCode){case 34:case 40:case 35:this.scrollBottom();break;default:this.scrollTop()}},i.prototype.scrollBottom=function(e){var t=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,s=this.list.scrollTop+i-t;s=e?s+2*parseInt("undefined"!=typeof getComputedStyle?getComputedStyle(this.list).paddingTop:this.list.currentStyle.paddingTop,10):s;var a=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;a=this.model.fields.groupBy&&!ej.isNullOrUndefined(this.fixedHeaderElement)?a-this.fixedHeaderElement.offsetHeight:a,0===this.activeIndex?this.list.scrollTop=0:(i>t||!(a>0&&this.list.offsetHeight>a))&&(this.list.scrollTop=s)},i.prototype.scrollTop=function(){var e=this.selectedLI.offsetTop-this.list.scrollTop;this.selectedLI.offsetTop,this.selectedLI.offsetHeight,this.list.scrollTop;e=this.model.fields.groupBy&&!ej.isNullOrUndefined(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;var t=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:t>0&&this.list.offsetHeight>t||(this.list.scrollTop=this.selectedLI.offsetTop-(this.model.fields.groupBy&&!ej.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},i.prototype.onChangeEvent=function(e){var t=this.getItemData(),i=this.isSelectCustom?null:this.activeIndex;this.value(t.value),this.model.index=i,this.model.text=t.text,this.isWatermark||(ej.isNullOrUndefined(this.model.text)?this.hiddenSpan.css("display","block"):this.hiddenSpan.css("display","none")),this.detachChangeEvent(e)},i.prototype.setPlaceholder=function(t,i){e(i).parent()[0],this.isWatermark=e(document.createElement("input")).attr("placeholder","")[0].hasAttribute("placeholder"),ej.isNullOrUndefined(t)||""===t?(i.removeAttribute("placeholder"),i.removeAttribute("aria-placeholder")):(e(i).attr({placeholder:t,"aria-placeholder":t}),this.isWatermark||(this.hiddenSpan=ej.buildTag("span.e-input e-placeholder ").insertAfter(i),this.hiddenSpan.text(t),this.hiddenSpan.css("display","block")))},i.prototype.setReadonly=function(t,i){t?e(i).attr({readonly:""}):i.removeAttribute("readonly")},i.prototype.setEnableRtl=function(){this.model.enableRtl?(e(this.inputElement.parentElement).addClass(comboBoxClasses.rtl),this.popupObj&&e(this.popupObj).addClass(comboBoxClasses.rtl)):(e(this.inputElement.parentElement).removeClass(comboBoxClasses.rtl),this.popupObj&&e(this.popupObj).removeClass(comboBoxClasses.rtl))},i.prototype.listrender=function(){
"INPUT"===this.element[0].tagName?this.inputElement=this.element[0]:(this.inputElement=ej.buildTag("input")[0],"EJ-COMBOBOX"!==this.element[0].tagName&&(this.element[0].style.display="none"),this.element[0].parentElement.insertBefore(this.inputElement,this.element[0])),this.inputWrapper=this.createInput({element:this.inputElement,buttons:[comboBoxClasses.icon],properties:{readonly:this.model.readonly,showClearButton:this.model.showClearButton}}),this.setPlaceholder(this.model.placeholder,this.inputElement),this.setCssClass(this.model.cssClass),this.setEnable(),this.setEnableRtl(),"EJ-COMBOBOX"===this.element[0].tagName?this.element[0].appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element[0],this.inputElement);var t=this.element[0].getAttribute("name")?this.element[0].getAttribute("name"):this.element[0].getAttribute("id");this.hiddenElement=ej.buildTag("select",null,null,{name:t,"aria-hidden":"true",class:"e-ddl-hidden",tabindex:"-1"})[0],e(this.inputWrapper.container).prepend(this.hiddenElement),this.element[0].removeAttribute("name"),this.inputWrapper.container.style.width=this.formatUnit(this.model.width),e(this.inputWrapper.container).addClass("e-ddl"),this.wireEvent(),this.tabIndex=this.element[0].hasAttribute("tabindex")?this.element[0].getAttribute("tabindex"):"0",this.element[0].removeAttribute("tabindex");var i=this.element[0].getAttribute("id")?this.element[0].getAttribute("id"):"dropdownlist"+ej.getGuid("dropdownlist");if(this.element[0].id=i,this.inputElement.setAttribute("tabindex",this.tabIndex),e(this.inputElement).attr(this.getAriaAttributes()),this.setHTMLAttributes(),ej.isNullOrUndefined(this.model.index)||(this.activeIndex=this.model.index),ej.isNullOrUndefined(this.value())&&ej.isNullOrUndefined(this.activeIndex)&&ej.isNullOrUndefined(this.model.text)){if("SELECT"===this.element[0].tagName&&this.element[0].options[0]){var s=this.element[0];this.value(s.options[s.selectedIndex].value),this.model.text=ej.isNullOrUndefined(this.value())?null:s.options[s.selectedIndex].textContent,this.initValue()}}else this.initValue();this.model.enabled||(this.inputElement.tabIndex=-1),this.initial=!1,this.element[0].style.opacity=""},i.prototype.setHTMLAttributes=function(){if(!ej.isNullOrUndefined(Object.keys)&&Object.keys(this.model.htmlAttributes).length)for(var e=0,t=Object.keys(this.model.htmlAttributes);e<t.length;e++){var i=t[e];if("class"===i)this.setCssClass(this.model.htmlAttributes[i]);else if("disabled"===i&&"disabled"===this.model.htmlAttributes[i])this.model.enabled=!1,this.setEnable();else if("readonly"===i&&"readonly"===this.model.htmlAttributes[i])this._setModel({readonly:!0});else if("style"===i)this.inputWrapper.container.setAttribute("style",this.model.htmlAttributes[i]);else{var s=["title","id","placeholder"],a=["name","required"];a.indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.model.htmlAttributes[i]):s.indexOf(i)>-1?"placeholder"===i?this.setPlaceholder(this.model.htmlAttributes[i],this.inputElement):this.element[0].setAttribute(i,this.model.htmlAttributes[i]):this.inputWrapper.container.setAttribute(i,this.model.htmlAttributes[i])}}},i.prototype.setCssClass=function(t){e(this.inputWrapper.container).addClass(t),this.popupObj&&e(this.popupObj).addClass(t)},i.prototype.setEnable=function(){var t={disabled:"disabled","aria-disabled":"true"};this.model.enabled?(e(this.inputElement).removeAttr("disabled aria-disabled").removeClass(comboBoxClasses.disable).attr("aria-disabled","false"),e(this.inputWrapper.container).removeClass(comboBoxClasses.disable),this.inputElement.tabIndex=parseInt(this.tabIndex)):(e(this.inputElement).attr(t).addClass(comboBoxClasses.disable).attr("aria-disabled","true"),this.hidePopup(),e(this.inputWrapper.container).addClass(comboBoxClasses.disable))},i.prototype.initValue=function(){this.renderList(),this.model.dataSource instanceof ej.DataManager?this.initRemoteRender=!0:this.updateValues()},i.prototype.renderList=function(e){this.baserender(e),this.wireListEvents()},i.prototype.wireListEvents=function(){this._on(e(this.list),"click",this.onMouseClick),this._on(e(this.list),"mouseover",this.onMouseOver),this._on(e(this.list),"mouseout",this.removeHover)},i.prototype.onMouseClick=function(t){var i=t.target,s=e(i).closest("."+comboBoxClasses.li)[0];if(this.isValidLI(s)){this.setSelection(s,t);this.closePopup(100)}},i.prototype.onMouseOver=function(t){var i=e(t.target).closest("."+comboBoxClasses.li)[0];this.setHover(i)},i.prototype.setHover=function(t){this.model.enabled&&this.isValidLI(t)&&-1==t.className.indexOf(comboBoxClasses.hover)&&(this.removeHover(),e(t).addClass(comboBoxClasses.hover))},i.prototype.removeHover=function(){var t=this.list.querySelectorAll("."+comboBoxClasses.hover);t&&t.length&&e(t).removeClass(comboBoxClasses.hover)},i.prototype.baserender=function(t){this.list=ej.buildTag("div."+comboBoxClasses.content,"",{},{tabindex:"0"})[0],e(this.list).addClass("e-dropdownbase");var i=this.element[0].querySelector("select>optgroup");!this.model.fields.groupBy&&ej.isNullOrUndefined(i)||this._on(e(this.list),"scroll",this.setFloatingHeader),this.setEnableRtl(),this.setEnable(),t||this.initialize()},i.prototype.initialize=function(){if(this.bindEvent=!0,"SELECT"===this.element[0].tagName){var e=void 0;this.model.dataSource instanceof Array&&(e=this.model.dataSource);(this.model.dataSource instanceof Array?e.length>0:!ej.isNullOrUndefined(this.model.dataSource))||this.renderItemsBySelect()}else this.setListData(this.model.dataSource,this.model.fields,this.model.query)},i.prototype.renderItemsBySelect=function(){var e=this.element[0],t={value:"value",text:"text"},i=[],s=e.querySelectorAll("select>optgroup"),a=e.querySelectorAll("select>option");if(this.getJSONfromOption(i,a,t),s.length){for(var r=0;r<s.length;r++){var n=s[r],o={};o[t.text]=n.label,o.isHeader=!0;var l=n.querySelectorAll("option");i.push(o),this.getJSONfromOption(i,l,t)}e.querySelectorAll("select>option")}this.model.fields.text=t.text,this.model.fields.value=t.value,this.resetList(i,t)},i.prototype.getJSONfromOption=function(e,t,i){for(var s=0,a=t;s<a.length;s++){var r=a[s],n={};n[i.text]=r.innerText,n[i.value]=r.getAttribute(i.value)?r.getAttribute(i.value):r.innerText,e.push(n)}},i.prototype.setFloatingHeader=function(t){ej.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=ej.buildTag("div."+comboBoxClasses.fixedHead)[0],-1==this.list.querySelector("li").className.indexOf(comboBoxClasses.group)&&(this.fixedHeaderElement.style.display="none"),e(this.list).prepend(this.fixedHeaderElement),this.setFixedHeader()),this.scrollStop(t)},i.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var t=this.liCollections[0].offsetWidth;this.fixedHeaderElement.style.width=t.toString()+"px",e(this.fixedHeaderElement).css({zIndex:10});var i=this.ulElement.querySelector("."+comboBoxClasses.group);this.fixedHeaderElement.innerHTML=i.innerHTML},i.prototype.scrollStop=function(e){for(var t=e.target,i=parseInt("undefined"!=typeof getComputedStyle?getComputedStyle(this.liCollections[0],null).getPropertyValue("height"):this.liCollections[0].currentStyle.height,10),s=Math.round(t.scrollTop/i),a=this.ulElement.querySelectorAll("li"),r=s;r>-1;r--){if(!ej.isNullOrUndefined(a[r])&&a[r].className.indexOf(comboBoxClasses.group)>-1){var n=a[r];this.fixedHeaderElement.innerHTML=n.innerHTML,this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none"}},i.prototype.getFormattedValue=function(e){return this.listData&&this.listData.length&&("number"==typeof this.listData[0][this.model.fields.value?this.model.fields.value:"value"]||"number"==typeof this.listData[0])?parseInt(e,10):e},i.prototype.baseonActionComplete=function(e,t,i){this.listData=t,this.list.innerHTML="",this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+comboBoxClasses.li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent)},i.prototype.getIndexByValue=function(e){for(var t,i=this.getItems(),s=0;s<i.length;s++)if(i[s].getAttribute("data-value")===e.toString()){t=s;break}return t},i.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+comboBoxClasses.li)},i.prototype.postRender=function(t,i,s){var a=t.querySelector("."+comboBoxClasses.li),r=t.querySelector("."+comboBoxClasses.selected);a&&!r&&e(a).addClass(comboBoxClasses.focus),i.length<=0?(this.l10nUpdate(),e(t).addClass(comboBoxClasses.noData)):e(t).removeClass(comboBoxClasses.noData),this.model.groupTemplate&&this.renderGroupTemplate(t)},i.prototype.renderGroupTemplate=function(t){if(null!==this.model.fields.groupBy&&this.model.dataSource||this.element[0].querySelector("."+comboBoxClasses.group)){var i=this.model.dataSource,s={};t.querySelectorAll("."+comboBoxClasses.group);i=this.listGroupDataSource(i,this.model.fields);for(var a=0,r=t.querySelectorAll("."+comboBoxClasses.group);a<r.length;a++){var n=r[a];s[this.model.fields.groupBy]=n.textContent,n.innerHTML="",e(n).append(this.getTemplatedString(this.model.groupTemplate,s))}}},i.prototype.getTemplatedString=function(e,t){for(var i=e,s=i.indexOf("${"),a=i.indexOf("}");-1!=s&&-1!=a;){var r=i.substring(s,a+1),n=r.replace("${","").replace("}","");i=i.replace(r,ej.getObject(n,t).toString()),s=i.indexOf("${"),a=i.indexOf("}")}return i},i.prototype.listGroupDataSource=function(e,t){var i=new ej.DataManager(e).executeLocal((new ej.Query).group(t.groupBy));e=[];for(var s=0;s<i.length;s++){var a=i[s].items,r={};r[t.text]=i[s].key,r.isHeader=!0,r.items=a,e.push(r);for(var n=0;n<a.length;n++)e.push(a[n])}return e},i.prototype.updateLocalConstant=function(){this.localizedLabels=ej.getLocalizedConstants("ej.ComboBox",this.model.locale)},i.prototype.getLocalizedLabels=function(e){return void 0===this.localizedLabels[e]?ej.ComboBox.Locale["en-US"][e]:this.localizedLabels[e]},i.prototype.l10nUpdate=function(e){if(this.updateLocalConstant(),"No Records Found"!==this.model.noRecordsTemplate||"The Request Failed"!==this.model.actionFailureTemplate){var t=e?this.model.actionFailureTemplate:this.model.noRecordsTemplate;this.list.innerHTML=t}else this.list.innerHTML=e?this.getLocalizedLabels("actionFailureTemplate"):this.getLocalizedLabels("noRecordsTemplate")},i.prototype.getTextByValue=function(e){var t,i=this.listData,s=this.getFields();if("string"==typeof i[0]||"number"==typeof i[0])for(var a=0,r=i;a<r.length;a++){var n=r[a];if(n.toString()===e.toString()){t=n.toString();break}}else i.filter(function(i){if(!ej.isNullOrUndefined(i[s.value])&&i[s.value].toString()===e.toString())return t=i[s.text],!0});return t},i.prototype.getFields=function(){var e=this.model.fields.text?this.model.fields.text:"text";return{value:(this.model.fields.value?this.model.fields.value:e).toString(),text:e}},i.prototype.resetList=function(e,t,i){this.list&&this.setListData(e,t,i)},i.prototype.setListData=function(e,t,i){var s=this;t=t||this.model.fields;var a;if(this.isActive=!0,e instanceof ej.DataManager)this.isRequested=!0,this._trigger("actionBegin"),e.executeQuery(i||(this.model.query?this.model.query:new ej.Query)).done(function(e){if(s._trigger("actionComplete",e),!e.cancel){var i=e.result;a=s.renderItems(i,t),s.onActionComplete(a,i,e),s.isRequested=!1,s._trigger("dataBound",{items:i,e:e})}}).fail(function(e){s.isRequested=!1,s.onActionFailure(e)});else{var r=new ej.DataManager(e),n=r.executeLocal(i||(this.model.query?this.model.query:new ej.Query)),o={cancel:!1,result:n};if(this._trigger("actionComplete",o),o.cancel)return;a=this.renderItems(n,t),this.onActionComplete(a,n),this._trigger("dataBound",{items:n})}},i.prototype.onActionFailure=function(t){this.liCollections=[],this._trigger("actionFailure",t),this.l10nUpdate(!0),e(this.list).addClass(comboBoxClasses.noData),this.renderPopup()},i.prototype.renderItems=function(t,i){var s,a=t;return i.value=ej.isNullOrUndefined(i.value)?i.text:i.value,this.model.fields=i,this.model.itemTemplate&&t?(a&&i.groupBy?(a=this.listgroupDataSource(a,i),e(this.list).addClass("e-combobox-group")):a&&"None"!==this.model.sortOrder&&(a=new ej.DataManager(a).executeLocal("descending"==this.model.sortOrder.toLowerCase()?(new ej.Query).sortByDesc(this.model.fields.text):(new ej.Query).sortBy(this.model.fields.text))),this.model.fields.value&&!i.text?i.text=i.value:!i.value&&i.text&&(i.value=i.text),s=this.listrenderContentTemplate(this.model.itemTemplate,a,i)):(a&&"None"!==this.model.sortOrder&&(t=new ej.DataManager(a).executeLocal("descending"==this.model.sortOrder.toLowerCase()?(new ej.Query).sortByDesc(this.model.fields.text):(new ej.Query).sortBy(this.model.fields.text))),a&&i.groupBy&&(t=this.listGroupDataSource(a,i),e(this.list).addClass("e-combobox-group")),s=this.createListItems(t,null!==i.text||null!==i.value?{fields:i,showIcon:!ej.isNullOrUndefined(i.iconCss)}:{fields:{value:"text"}})),s},i.prototype.listgroupDataSource=function(e,t){var i=new ej.DataManager(e).executeLocal((new ej.Query).group(t.groupBy));e=[];for(var s=0;s<i.length;s++){var a=i[s].items,r={};r[t.text]=i[s].key,r.isHeader=!0,r.items=a,e.push(r);for(var n=0;n<a.length;n++)e.push(a[n])}return e},i.prototype.listrenderContentTemplate=function(t,i,s){for(var a=ej.buildTag("ul."+comboBoxClasses.ul,"",{},{role:"presentation"})[0],r=[],n=0,o=i;n<o.length;n++){var l=o[n],d=l.isHeader,h=ej.buildTag("li."+(d?comboBoxClasses.group:comboBoxClasses.li),"",{},{role:"presentation"})[0];if(d)h.innerText=l[s.text];else{e(h).append(this.getTemplatedString(t,l));var c=l[s.value];h.setAttribute("data-value",c),h.setAttribute("role","option")}r.push(h)}return e(a).append(r),a},i.prototype.createListItems=function(t,i){if("string"==typeof t[0]){for(var s=[],a=0;a<t.length;a++)s.push(this.generateSingleLevelListItem(t[a],t[a]));return ej.buildTag("ul."+comboBoxClasses.ul,"",{},{role:"presentation"}).append(s)[0]}for(var r=e.extend({},defaultListBaseOptions,i),n=e.extend({},defaultMappedFields,r.fields),o=[],a=0;a<t.length;a++){var l=t[a],d=[];r.showIcon&&d.push(ej.buildTag("span.e-list-icon "+l[n.iconCss])[0]),o.push(this.generateSingleLevelListItem(l[n.text],l[n.value],r.itemClass,d,!(!l.hasOwnProperty("isHeader")||!l.isHeader)))}return ej.buildTag("ul."+comboBoxClasses.ul+" "+r.listClass,"",{},{role:"presentation"}).append(o)[0]},i.prototype.generateSingleLevelListItem=function(t,i,s,a,r){var n=ej.buildTag("li."+(!0===r?comboBoxClasses.group:comboBoxClasses.li)+" "+s,"",{role:!0===r?"group":"presentation"})[0];return r?n.innerText=t:(n.setAttribute("data-value",i),n.setAttribute("role","option"),a&&e(n).append(a),n.appendChild(document.createTextNode(t))),n},i.prototype.getDataByValue=function(e){if("string"==typeof this.listData[0]||"number"==typeof this.listData[0])for(var t=0,i=this.listData;t<i.length;t++){var s=i[t];if(s===e)return s}else for(var a=0,r=this.listData;a<r.length;a++){var s=r[a];if(s[this.model.fields.value?this.model.fields.value:"value"]===e)return s}return null},i.prototype.search=function(t,i,s,a){var r=i;a=void 0===a||null===a||a;var n={item:null,index:null};if(t.length){for(var o=t.length,l=a?t.toLowerCase():t,d=0,h=r;d<h.length;d++){var c=h[d],u=(a?e(c).text().toLowerCase():e(c).text()).replace(/^\s+|\s+$/g,"");if("Equal"===s&&u===l||"StartsWith"===s&&u.substr(0,o)===l)return n.item=c,n.index=d,{item:c,index:d}}return n}return n},i.prototype.setInputValue=function(t,i,s){if(ej.isNullOrUndefined(t)||(i.value=t),!ej.isNullOrUndefined(s)&&s){var a=e(i).parent()[0],r=e(a).find("."+comboBoxClasses.clearIcon)[0];i.value&&a.className.indexOf("e-input-focus")>-1?e(r).removeClass(comboBoxClasses.clearIconHide):e(r).addClass(comboBoxClasses.clearIconHide)}},i.prototype.addItem=function(t,i){this.list&&this.list.textContent!==this.model.noRecordsTemplate||this.renderList();var s=this.getItems().length;this.list.querySelector("."+comboBoxClasses.selected);t=t instanceof Array?t:[t];var a,r=t instanceof Array?t:[t],n=r.length;a=ej.isNullOrUndefined(i)||i<0||i>s-1?s:i;for(var o=this.getFields(),l=[],d=0;d<n;d++){var h=t[d],c=ej.buildTag("li#option-add-"+d+"."+comboBoxClasses.li)[0];c.setAttribute("data-value",h[o.value]),c.setAttribute("role","option"),c.appendChild(document.createTextNode(h[o.text])),l.push(c),this.listData.push(h)}if(0===s&&ej.isNullOrUndefined(this.list.querySelector("ul")))this.list.innerHTML="",this.list.appendChild(this.ulElement),e(this.ulElement).append(l);else for(var d=0;d<n;d++){this.liCollections[a]?this.liCollections[a].parentNode.insertBefore(l[d],this.liCollections[a]):this.ulElement.appendChild(l[d]);var u=[].slice.call(this.liCollections);u.splice(a,0,l[d]),this.liCollections=u,a+=1}},i}(ej.WidgetBase);window.ej.widget("ejComboBox","ej.ComboBox",new t),window.ejComboBox=null}(jQuery),ej.ComboBox.Locale=ej.ComboBox.Locale||{},ej.ComboBox.Locale.default=ej.ComboBox.Locale["en-US"]={noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"};var defaultMappedFields={id:"id",text:"text",value:"value",isChecked:"isChecked",enabled:"enabled",iconCss:"icon",tooltip:null,htmlAttributes:null,imageAttributes:null,imageUrl:"imageUrl",groupBy:null},defaultListBaseOptions={showIcon:!1,fields:defaultMappedFields,listClass:"",itemClass:"",sortOrder:"None",template:null,groupTemplate:null},comboBoxClasses={input:"e-input-group",mobileFilter:"e-ddl-device-filter",disable:"e-disabled",hover:"e-hover",selected:"e-active",rtl:"e-rtl",li:"e-list-item",focus:"e-item-focus",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",filterInput:"e-input-filter",group:"e-list-group-item",ul:"e-list-parent e-ul",noData:"e-nodata",fixedHead:"e-fixed-head",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",footer:"e-ddl-footer",header:"e-ddl-header",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterParent:"e-filter-parent",content:"e-content"},inputObject={container:null,buttons:[]};window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i,s){"use strict";t.DataManager=function(i,s,a){if(!(this instanceof t.DataManager))return new t.DataManager(i,s,a);i||(i=[]),"string"==typeof(a=a||i.adaptor)&&(a=new t[a]);var r=[],n=this;return i instanceof Array?r={json:i,offline:!0}:"object"==typeof i?e.isPlainObject(i)?(i.json||(i.json=[]),i.table&&(i.json=this._getJsonFromElement(i.table,i.headerOption)),r={url:i.url,insertUrl:i.insertUrl,removeUrl:i.removeUrl,updateUrl:i.updateUrl,crudUrl:i.crudUrl,batchUrl:i.batchUrl,json:i.json,headers:i.headers,accept:i.accept,data:i.data,async:i.async,timeTillExpiration:i.timeTillExpiration,cachingPageSize:i.cachingPageSize,enableCaching:i.enableCaching,requestType:i.requestType,key:i.key,crossDomain:i.crossDomain,antiForgery:i.antiForgery,jsonp:i.jsonp,dataType:i.dataType,enableAjaxCache:i.enableAjaxCache,offline:void 0!==i.offline?i.offline:!("remoteSaveAdaptor"==i.adaptor||i.adaptor instanceof t.remoteSaveAdaptor)&&!i.url,requiresFormat:i.requiresFormat}):(i.jquery||k(i))&&(r={json:this._getJsonFromElement(i),offline:!0,table:i}):"string"==typeof i&&(r={url:i,offline:!1,dataType:"json",json:[]}),void 0!==r.requiresFormat||t.support.cors||(r.requiresFormat=!!P(r.crossDomain)||r.crossDomain),r.antiForgery&&this.antiForgeryToken(),void 0===r.dataType&&(r.dataType="json"),this.dataSource=r,this.defaultQuery=s,r.url&&r.offline&&!r.json.length?(this.isDataAvailable=!1,this.adaptor=a||new t.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(s||t.Query()).done(function(e){n.dataSource.offline=!0,n.isDataAvailable=!0,r.json=e.result,n.adaptor=new t.JsonAdaptor})):this.adaptor=r.offline?new t.JsonAdaptor:new t.ODataAdaptor,!r.jsonp&&this.adaptor instanceof t.ODataAdaptor&&(r.jsonp="callback"),this.adaptor=a||this.adaptor,r.enableCaching&&(this.adaptor=new t.CacheAdaptor(this.adaptor,r.timeTillExpiration,r.cachingPageSize)),this},t.DataManager.prototype={setDefaultQuery:function(e){this.defaultQuery=e},executeQuery:function(i,s,a,r){"function"==typeof i&&(r=a,a=s,s=i,i=null),i||(i=this.defaultQuery),i instanceof t.Query||M("DataManager - executeQuery() : A query is required to execute");var n=e.Deferred();n.then(s,a,r);var o={query:i};if(this.dataSource.offline||void 0==this.dataSource.url)t.isNullOrUndefined(this.dataSource.async)||0!=this.dataSource.async?y(function(){this._localQueryProcess(i,o,n)},this):this._localQueryProcess(i,o,n);else{var l=this.adaptor.processQuery(this,i);t.isNullOrUndefined(l.url)?y(function(){o=this._getDeferedArgs(i,l,o),n.resolveWith(this,[o])},this):this._makeRequest(l,n,o,i)}return n.promise()},_localQueryProcess:function(e,t,i){var s=this.executeLocal(e);t=this._getDeferedArgs(e,s,t),i.resolveWith(this,[t])},_getDeferedArgs:function(e,t,i){return e._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=D(e._fromTable,i.result,this),i.getKnockoutModel=I(i.result),i},executeLocal:function(i){this.defaultQuery||i instanceof t.Query||M("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||M("DataManager - executeLocal() : Json data is required to execute"),i=i||this.defaultQuery;var s=this.adaptor.processQuery(this,i);if(i._subQuery){var r=i._subQuery._fromTable,n=i._subQuery._lookup,o=i._requiresCount?s.result:s;n&&n instanceof Array&&a(i._subQuery._fKey,r,o,n,i._subQuery._key);for(var l=0;l<o.length;l++)o[l][r]instanceof Array&&(o[l]=e.extend({},o[l]),o[l][r]=this.adaptor.processResponse(i._subQuery.using(t.DataManager(o[l][r].slice(0))).executeLocal(),this,i))}return this.adaptor.processResponse(s,this,i)},_makeRequest:function(i,s,r,n){var o=!!n._subQuerySelector,l=E(function(e){r.error=e,s.rejectWith(this,[r])},this),d=E(function(e,t,i,a,l,d,h){o||(r.xhr=i,r.count=parseInt(t,10),r.result=e,r.request=a,r.aggregates=d,r.getTableModel=D(n._fromTable,e,this),r.getKnockoutModel=I(e),r.actual=l,r.virtualSelectRecords=h,s.resolveWith(this,[r]))},this),h=E(function(t,i){var s=e.Deferred(),h={parent:r};n._subQuery._isChild=!0;var c=this.adaptor.processQuery(this,n._subQuery,t?this.adaptor.processResponse(t):i),u=this._makeRequest(c,s,h,n._subQuery);return o||s.then(function(e){t&&(a(n._subQuery._fKey,n._subQuery._fromTable,t,e,n._subQuery._key),d(t))},l),u},this),c=A(function(e,i,s,a){-1==s.getResponseHeader("Content-Type").indexOf("xml")&&t.dateParse&&(e=t.parseJSON(e));var r=this.adaptor.processResponse(e,this,n,s,a),l=0,c=null,u=e.virtualSelectRecords;if(n._requiresCount&&(l=r.count,c=r.aggregates,r=r.result),!n._subQuery)return void d(r,l,s,a,e,c,u);o||h(r)},this),u=e.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!!t.isNullOrUndefined(this.dataSource.enableAjaxCache)||this.dataSource.enableAjaxCache,beforeSend:E(this._beforeSend,this),processData:!1,success:c,error:l},i);if("async"in this.dataSource&&(u.async=this.dataSource.async),u=e.ajax(u),o){var p=n._subQuerySelector.call(this,{query:n._subQuery,parent:n});p&&p.length?(u=e.when(u,h(null,p)),u.then(A(function(e,t,i){var s=this.adaptor.processResponse(e[0],this,n,e[2],i[0]),r=0;n._requiresCount&&(r=s.count,s=s.result);var l=this.adaptor.processResponse(t[0],this,n._subQuery,t[2],i[1]),r=0;n._subQuery._requiresCount&&(r=l.count,l=l.result),a(n._subQuery._fKey,n._subQuery._fromTable,s,l,n._subQuery._key),o=!1,d(s,r,e[2])},this),l)):o=!1}return u},_beforeSend:function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,s=this.dataSource.headers,a=0;s&&a<s.length;a++){i=[];for(var r in s[a])i.push(r),e.setRequestHeader(r,s[a][r])}},saveChanges:function(i,s,a,r){a instanceof t.Query&&(r=a,a=null);var n={url:a,key:s||this.dataSource.key},o=this.adaptor.batchRequest(this,i,n,r);if(this.dataSource.offline)return o;var l=e.Deferred();return e.ajax(e.extend({beforeSend:E(this._beforeSend,this),success:A(function(e,t,a,r){l.resolveWith(this,[this.adaptor.processResponse(e,this,null,a,r,i,s)])},this),error:function(e){l.rejectWith(this,[{error:e}])}},o)),l.promise()},insert:function(i,s,a){i=n.replacer(i,!0),s instanceof t.Query&&(a=s,s=null);var r=this.adaptor.insert(this,i,s,a);if(this.dataSource.offline)return r;var o=e.Deferred();return e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:E(this._beforeSend,this),success:A(function(e,i,s,a){try{t.isNullOrUndefined(e)?e=[]:n.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(n.parseJson(e),this,null,s,a),o.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){o.rejectWith(this,[{error:e,dataManager:this}])}},r)),o.promise()},antiForgeryToken:function(){if(t.isNullOrUndefined(e("input[name='_ejRequestVerifyToken']").val())){t.buildTag("input","","",{type:"hidden",name:"_ejRequestVerifyToken",value:t.getGuid()}).appendTo("body")}else e("input[name='_ejRequestVerifyToken']").val(t.getGuid());return t.cookie.set("_ejRequestVerifyToken",e("input[name='_ejRequestVerifyToken']").val()),{name:"_ejRequestVerifyToken",value:e("input[name='_ejRequestVerifyToken']").val()}},remove:function(i,s,a,r){"object"==typeof s&&(s=s[i]),a instanceof t.Query&&(r=a,a=null);var o=this.adaptor.remove(this,i,s,a,r);if(this.dataSource.offline)return o;var l=e.Deferred();return e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:E(this._beforeSend,this),success:A(function(e,i,s,a){try{t.isNullOrUndefined(e)?e=[]:n.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(n.parseJson(e),this,null,s,a),l.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){l.rejectWith(this,[{error:e,dataManager:this}])}},o)),l.promise()},update:function(i,s,a,r){s=n.replacer(s,!0),a instanceof t.Query&&(r=a,a=null);var o=this.adaptor.update(this,i,s,a,r);if(this.dataSource.offline)return o;var l=e.Deferred();return e.ajax(e.extend({contentType:"application/json; charset=utf-8",beforeSend:E(this._beforeSend,this),success:A(function(e,i,s,a){try{t.isNullOrUndefined(e)?e=[]:n.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(n.parseJson(e),this,null,s,a),l.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){l.rejectWith(this,[{error:e,dataManager:this}])}},o)),l.promise()},_getJsonFromElement:function(i){"string"==typeof i&&(i=e(e(i).html())),i=i.jquery?i[0]:i;var s=i.tagName.toLowerCase();return"table"!==s&&M("ej.DataManager : Unsupported htmlElement : "+s),t.parseTable(i)}};var a=function(e,i,s,a,r){var n,o,l={};for(a.result&&(a=a.result),a.GROUPGUID&&M("ej.DataManager: Do not have support Grouping in hierarchy"),n=0;n<a.length;n++){var d=t.getObject(e,a[n]);o=l[d]||(l[d]=[]),o.push(a[n])}for(n=0;n<s.length;n++)s[n][i]=l[t.getObject(r||e,s[n])]},r={accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},n={parseJson:function(e){var t=typeof e;return"string"===t?e=JSON.parse(e,n.jsonReviver):e instanceof Array?n.iterateAndReviveArray(e):"object"===t&&n.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?n.iterateAndReviveJson(e[t]):"string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?e[t]=n.parseJson(e[t]):e[t]=n.jsonReviver("",e[t])},iterateAndReviveJson:function(e){var t;for(var i in e)i.startsWith("__")||(t=e[i],"object"==typeof t?t instanceof Array?n.iterateAndReviveArray(t):n.iterateAndReviveJson(t):e[i]=n.jsonReviver(i,t))},jsonReviver:function(e,i){var s=i,a=/[\-,\/,\,.,:,]+/;if("string"==typeof i){var r=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(r)return t.parseDateInUTC?n.isValidDate(r[0]):n.replacer(new Date(parseInt(r[1])));if(t.dateParse?/^(?:(\d{4}\-\d\d\-\d\d)|(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?)$/.test(i):/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var o=s.split(/[^0-9]/);/^(\d{4}\-\d\d\-\d\d)$/.test(i)?i=new Date(o[t.dateFormat.split(a).indexOf("yyyy")],o[t.dateFormat.split(a).indexOf("MM")]-1,o[t.dateFormat.split(a).indexOf("dd")]):(i=t.parseDateInUTC?n.isValidDate(i):n.replacer(new Date(i)),isNaN(i)&&(i=n.replacer(new Date(o[0],o[1]-1,o[2],o[3],o[4],o[5]))))}}return i},isValidDate:function(e){var t=e;if("string"==typeof t&&0==t.indexOf("/Date(")&&(e=t.replace(/\d+/,function(e){var t=6e4*new Date(parseInt(e)).getTimezoneOffset(),i=parseInt(e)+t;return n.replacer(new Date(parseInt(i)))})),"string"==typeof e){e=e.replace("/Date(",function(){return""}),e=e.replace(")/",function(){return""});return new Date(e)instanceof Date?new Date(e):e}return e},isJson:function(e){return"string"==typeof e[0]?e:t.parseJSON(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e,i){return t.isPlainObject(e)?n.jsonReplacer(e,i):e instanceof Array?n.arrayReplacer(e):e instanceof Date?n.jsonReplacer({val:e},i).val:e},jsonReplacer:function(e,i){var s;for(var a in e)if((s=e[a])instanceof Date){var r=60*t.serverTimezoneOffset*60*1e3*(t.isNullOrUndefined(i)||!1===i?1:-1);e[a]=new Date(+s+r)}return e},arrayReplacer:function(e){for(var i=0;i<e.length;i++)t.isPlainObject(e[i])?e[i]=n.jsonReplacer(e[i]):e[i]instanceof Date&&(e[i]=n.jsonReplacer({date:e[i]}).date);return e}};t.isJSON=n.isJson,t.parseJSON=n.parseJson,t.dateParse=!0,t.dateFormat="yyyy-MM-dd",t.isGUID=n.isGuid,t.Query=function(e){return this instanceof t.Query?(this.queries=[],this._key="",this._fKey="","string"==typeof e?this._fromTable=e||"":e&&e instanceof Array&&(this._lookup=e),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new t.Query(e)},t.Query.prototype={key:function(e){return"string"==typeof e&&(this._key=e),this},using:function(e){return e instanceof t.DataManager?(this.dataManagar=e,this):M("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(e,i,s,a){return e=e||this.dataManagar,e&&e instanceof t.DataManager?e.executeQuery(this,i,s,a):M("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(e){return e=e||this.dataManagar,e&&e instanceof t.DataManager?e.executeLocal(this):M("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var e=new t.Query;return e.queries=this.queries.slice(0),e._key=this._key,e._isChild=this._isChild,e.dataManagar=this.dataManager,e._fromTable=this._fromTable,e._params=this._params.slice(0),e._expands=this._expands.slice(0),e._sortedColumns=this._sortedColumns.slice(0),e._groupedColumns=this._groupedColumns.slice(0),e._subQuerySelector=this._subQuerySelector,e._subQuery=this._subQuery,e._fKey=this._fKey,e._requiresCount=this._requiresCount,e},from:function(e){return"string"==typeof e&&(this._fromTable=e),this},addParams:function(e,i){return"function"==typeof i||t.isPlainObject(i)?"function"==typeof i&&this._params.push({key:e,fn:i}):this._params.push({key:e,value:i}),this},expand:function(e){return this._expands="string"==typeof e?[].slice.call(arguments,0):e.slice(0),this},where:function(e,i,s,a,r){i=(i||t.FilterOperators.equal).toLowerCase();var n=null;return"string"==typeof e?n=new t.Predicate(e,i,s,a,r):e instanceof t.Predicate?n=e:M("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:n}),this},search:function(e,i,s,a,r){i&&"boolean"!=typeof i?"string"==typeof i&&(i=[i]):(i=[],a=i),"boolean"==typeof s&&(a=s,s=null),s=s||t.FilterOperators.contains,
s.length<3&&(s=t.data.operatorSymbols[s]);var n=t.data.fnOperators[s]||t.data.fnOperators.processSymbols(s);return this.queries.push({fn:"onSearch",e:{fieldNames:i,operator:s,searchKey:e,ignoreCase:a,ignoreAccent:r,comparer:n}}),this},sortBy:function(e,i,s){var a,r,n=t.sortOrder.Ascending;if("string"==typeof e&&e.toLowerCase().endsWith(" desc")&&(e=e.replace(/ desc$/i,""),i=t.sortOrder.Descending),e instanceof Array){for(var l=0;l<e.length;l++)this.sortBy(e[l],i,s);return this}if("boolean"==typeof i?i=i?t.sortOrder.Descending:t.sortOrder.Ascending:"function"==typeof i&&(n="custom"),i&&"string"!=typeof i||(n=i?i.toLowerCase():t.sortOrder.Ascending,i=t.pvt.fnSort(i)),s){a=o(this.queries,"onSortBy");for(var l=0;l<a.length;l++)if("string"==typeof(r=a[l].e.fieldName)){if(r===e)return this}else if(r instanceof Array)for(var d=0;d<r.length;d++)if(r[d]===e||e.toLowerCase()===r[d]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:i,direction:n}}),this},sortByDesc:function(e){return this.sortBy(e,t.sortOrder.Descending)},group:function(e,t){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,fn:t}}),this},page:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},range:function(e,t){return"number"==typeof e&&"number"==typeof t||M("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},take:function(e){return"number"!=typeof e&&M("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:e}}),this},skip:function(e){return"number"!=typeof e&&M("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:e}}),this},select:function(e){return"string"==typeof e&&(e=[].slice.call(arguments,0)),e instanceof Array||M("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},hierarchy:function(e,i){return e&&e instanceof t.Query||M("Query() - hierarchy : query must be instance of ej.Query"),"function"==typeof i&&(this._subQuerySelector=i),this._subQuery=e,this},foreignKey:function(e){return"string"==typeof e&&(this._fKey=e),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(e,t){this.queries.push({fn:"onAggregates",e:{field:t,type:e}})}},t.Adaptor=function(e){this.dataSource=e,this.pvt={},this.init.apply(this,[].slice.call(arguments,1))},t.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",antiForgery:"antiForgery"},init:function(){},extend:function(t){var i=function(t){this.dataSource=t,this.options&&(this.options=e.extend({},this.options)),this.init.apply(this,[].slice.call(arguments,0)),this.pvt={}};i.prototype=new this.type,i.prototype.type=i;var s=i.prototype.base={};for(var a in t)i.prototype[a]&&(s[a]=i.prototype[a]);return e.extend(!0,i.prototype,t),i},processQuery:function(e,t){},processResponse:function(e,t,i,s){return e.d?e.d:e},convertToQueryString:function(t,i,s){return e.param(t)},type:t.Adaptor},t.UrlAdaptor=(new t.Adaptor).extend({processQuery:function(e,t,i){var s,a,r=o(t.queries,"onSortBy"),n=o(t.queries,"onGroup"),c=o(t.queries,"onWhere"),u=o(t.queries,"onSearch"),p=o(t.queries,"onAggregates"),m=l(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),g=t._params,f=e.dataSource.url,_=null,v=this.options,b={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]};m.onPage?(s=m.onPage,a=h(s.pageIndex,t),_=h(s.pageSize,t),a=(a-1)*_):m.onRange&&(s=m.onRange,a=s.start,_=s.end-s.start);for(var x=0;x<r.length;x++)s=h(r[x].e.fieldName,t),b.sorted.push(d(this,"onEachSort",{name:s,direction:r[x].e.direction},t));i&&(s=this.getFiltersFrom(i,t))&&b.filters.push(d(this,"onEachWhere",s.toJSON(),t));for(var x=0;x<c.length;x++){b.filters.push(d(this,"onEachWhere",c[x].e.toJSON(),t));for(var y in b.filters[x])P(b[y])&&delete b[y]}for(var x=0;x<u.length;x++)s=u[x].e,b.searches.push(d(this,"onEachSearch",{fields:s.fieldNames,operator:s.operator,key:s.searchKey,ignoreCase:s.ignoreCase},t));for(var x=0;x<n.length;x++)b.grouped.push(h(n[x].e.fieldName,t));for(var x=0;x<p.length;x++)s=p[x].e,b.aggregates.push({type:s.type,field:h(s.field,t)});var w={};w[v.from]=t._fromTable,v.expand&&(w[v.expand]=t._expands),w[v.select]=m.onSelect?d(this,"onSelect",h(m.onSelect.fieldNames,t),t):"",w[v.count]=t._requiresCount?d(this,"onCount",t._requiresCount,t):"",w[v.search]=b.searches.length?d(this,"onSearch",b.searches,t):"",w[v.skip]=m.onSkip?d(this,"onSkip",h(m.onSkip.nos,t),t):"",w[v.take]=m.onTake?d(this,"onTake",h(m.onTake.nos,t),t):"",w[v.antiForgery]=e.dataSource.antiForgery?e.antiForgeryToken().value:"",w[v.where]=b.filters.length||b.searches.length?d(this,"onWhere",b.filters,t):"",w[v.sortBy]=b.sorted.length?d(this,"onSortBy",b.sorted,t):"",w[v.group]=b.grouped.length?d(this,"onGroup",b.grouped,t):"",w[v.aggregates]=b.aggregates.length?d(this,"onAggregates",b.aggregates,t):"",w.param=[],d(this,"addParams",{dm:e,query:t,params:g,reqParams:w});for(var y in w)(P(w[y])||""===w[y]||0===w[y].length||"params"===y)&&delete w[y];v.skip in w&&v.take in w||null===_||(w[v.skip]=d(this,"onSkip",a,t),w[v.take]=d(this,"onTake",_,t));var C=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(w),url:f,ejPvtData:C,type:"POST",contentType:"application/json; charset=utf-8"}:(s=this.convertToQueryString(w,t,e),s=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+s,{type:"GET",url:s.length?f.replace(/\/*$/,s):f,ejPvtData:C})},convertToQueryString:function(t,i,s){return s.dataSource.url&&-1!==s.dataSource.url.indexOf("?")?e.param(t):"?"+e.param(t)},processResponse:function(e,i,s,a,r,n){var o=r.ejPvtData||{},l=e.groupDs;if(a&&a.getResponseHeader("Content-Type")&&-1!=a.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return s._requiresCount?{result:[],count:0}:[];var d=JSON.parse(r.data);if(d&&"batch"===d.action&&e.added)return n.added=e.added,n;if(e.d&&(e=e.d),o&&o.aggregates&&o.aggregates.length){var h,c=o.aggregates,u={},p={};"count"in e&&(u.count=e.count),e.result&&(u.result=e.result),e.aggregate&&(e=e.aggregate);for(var m=0;m<c.length;m++)(h=t.aggregates[c[m].type])&&(p[c[m].field+" - "+c[m].type]=h(e,c[m].field));u.aggregates=p,e=u}if(o&&o.groups&&o.groups.length){var g=o.groups,u={};"count"in e&&(u.count=e.count),e.aggregates&&(u.aggregates=e.aggregates),e.result&&(e=e.result);for(var m=0;m<g.length;m++){var f=C(g[m],s.queries);t.isNullOrUndefined(l)||(l=t.group(l,g[m],null,f)),e=t.group(e,g[m],o.aggregates,f,null,l)}return void 0!=u.count?u.result=e:u=e,u}return e},onGroup:function(e){this.pvt.groups=e},onAggregates:function(e){this.pvt.aggregates=e},batchRequest:function(e,t,i,s){var a={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:a}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a)}},beforeSend:function(e,t){},insert:function(e,t,i,s){var a={value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:a}),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(a)}},remove:function(e,t,i,s,a){var r={key:i,keyColumn:t,table:s,action:"remove",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return a&&this.addParams({dm:e,query:a,params:a._params,reqParams:r}),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(r)}},update:function(e,t,i,s,a){var r={value:i,action:"update",keyColumn:t,key:i[t],table:s,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return a&&this.addParams({dm:e,query:a,params:a._params,reqParams:r}),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(r)}},getFiltersFrom:function(e,i){e instanceof Array&&e.length||M("ej.SubQuery: Array of key values required");var s,a=i._fKey,r=a,n=i._key,o=[],l="object"!=typeof e[0];"object"!=typeof e[0]&&(r=null);for(var d=0;d<e.length;d++)s=l?e[d]:t.pvt.getObject(n||r,e[d]),o.push(new t.Predicate(a,"==",s));return t.Predicate.or(o)},addParams:function(e){var t=e.dm,i=e.query,s=e.params,a=e.reqParams;a.params={};for(var r,n=0;r=s[n];n++)a[r.key]&&M("ej.Query: Custom Param is conflicting other request arguments"),a[r.key]=r.value,r.fn&&(a[r.key]=r.fn.call(i,r.key,i,t)),a.params[r.key]=a[r.key]}}),t.WebMethodAdaptor=(new t.UrlAdaptor).extend({processQuery:function(e,i,s){var a=t.UrlAdaptor.prototype.processQuery(e,i,s),r=t.parseJSON(a.data),n={};return n.value=r,d(this,"addParams",{dm:e,query:i,params:i._params,reqParams:n}),{data:JSON.stringify(n),url:a.url,ejPvtData:a.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(e){var t=e.dm,i=e.query,s=e.params,a=e.reqParams;a.params={};for(var r,n=0;r=s[n];n++){a[r.key]&&M("ej.Query: Custom Param is conflicting other request arguments");var o=r.key,l=r.value;r.fn&&(l=r.fn.call(i,r.key,i,t)),a[o]=l,a.params[o]=a[o]}}}),t.CacheAdaptor=(new t.UrlAdaptor).extend({init:function(e,i,s){t.isNullOrUndefined(e)||(this.cacheAdaptor=e),this.pageSize=s,this.guidId=t.getGuid("cacheAdaptor");var a={keys:[],results:[]};window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify(a));var r=this.guidId;t.isNullOrUndefined(i)||setInterval(function(){for(var e=t.parseJSON(window.localStorage.getItem(r)),s=[],a=0;a<e.results.length;a++)e.results[a].timeStamp=new Date-new Date(e.results[a].timeStamp),new Date-new Date(e.results[a].timeStamp)>i&&s.push(a);for(var a=0;a<s.length;a++)e.results.splice(s[a],1),e.keys.splice(s[a],1);window.localStorage.removeItem(r),window.localStorage.setItem(r,JSON.stringify(e))},i)},generateKey:function(e,t){var i=o(t.queries,"onSortBy"),s=o(t.queries,"onGroup"),a=o(t.queries,"onWhere"),r=o(t.queries,"onSearch"),n=(o(t.queries,"onPage"),l(t.queries,["onSelect","onPage","onSkip","onTake","onRange"])),d=(t._params,e);n.onPage&&(d+=n.onPage.pageIndex),i.forEach(function(e){d+=e.e.direction+e.e.fieldName}),s.forEach(function(e){d+=e.e.fieldName}),r.forEach(function(e){d+=e.e.searchKey});for(var h=0;h<a.length;h++){var c=a[h];if(c.e.isComplex){var u=t.clone();u.queries=[];for(var p=0;p<c.e.predicates.length;p++)u.queries.push({fn:"onWhere",e:c.e.predicates[p],filter:t.queries.filter});d+=c.e.condition+this.generateKey(e,u)}else d+=c.e.field+c.e.operator+c.e.value}return d},processQuery:function(e,i,s){var a,r=this.generateKey(e.dataSource.url,i);window.localStorage&&(a=t.parseJSON(window.localStorage.getItem(this.guidId)));var n=a?a.results[a.keys.indexOf(r)]:null;return null==n||this._crudAction||this._insertAction?(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):n},processResponse:function(i,s,a,r,n,o){if(this._insertAction||n&&this.cacheAdaptor.options.batch&&n.url.endsWith(this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase())return this.cacheAdaptor.processResponse(i,s,a,r,n,o);var i=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0)),l=this.generateKey(s.dataSource.url,a),d={};window.localStorage&&(d=t.parseJSON(window.localStorage.getItem(this.guidId)));var h=e.inArray(l,d.keys);for(-1!=h&&(d.results.splice(h,1),d.keys.splice(h,1)),d.results[d.keys.push(l)-1]={keys:l,result:i.result,timeStamp:new Date,count:i.count};d.results.length>this.pageSize;)d.results.splice(0,1),d.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(d)),i},update:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.update(e,t,i,s)},insert:function(e,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(e,t,i)},remove:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},batchRequest:function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}});var o=function(e,t){return e.filter(function(e){return e.fn===t})||[]},l=function(e,t){for(var i=e.filter(function(e){return-1!==t.indexOf(e.fn)}),s={},a=0;a<i.length;a++)s[i[a].fn]||(s[i[a].fn]=i[a].e);return s},d=function(e,t,i,s){if(e[t]){var a=e[t](i,s);P(a)||(i=a)}return i};t.ODataAdaptor=(new t.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(e,t){return e.isComplex?this.onComplexPredicate(e,t):this.onPredicate(e,t)},_typeStringQuery:function(e,i,s,a,r){return-1!=s.indexOf("'")&&(s=s.replace(new RegExp(/'/g),"''")),/[ !@@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(s)&&(s=encodeURIComponent(s)),s="'"+s+"'",i&&(a="cast("+a+", 'Edm.String')"),t.isGUID(s)&&(r="guid"),e.ignoreCase&&(r||(a="tolower("+a+")"),s=s.toLowerCase()),{val:s,guid:r,field:a}},onPredicate:function(e,i,s){var a,r,o="",l=e.value,d=typeof l,h=this._p(e.field);if(l instanceof Date&&(l="datetime'"+n.replacer(l).toJSON()+"'"),"string"===d){var c=this._typeStringQuery(e,s,l,h,r);l=c.val,h=c.field,r=c.guid}if(a=t.data.odBiOperator[e.operator],""!=e.anyCondition&&a)return o+=l.table,o+="/"+e.anyCondition,o+="(d:d/",o+=h,o+=a,o+=l.value,o+=")";if("in"==e.operator||"notin"==e.operator){o+="(";for(var u=0;u<l.length;u++){if(l[u]instanceof Date&&(l[u]="datetime'"+n.replacer(l[u]).toJSON()+"'"),"string"==typeof l[u]){var c=this._typeStringQuery(e,s,l[u],h,r);l[u]=c.val,h=c.field,r=c.guid}o+=h,o+=a,o+=l[u],u!=l.length-1&&(o+="in"==e.operator?" or ":" and ")}return o+=")"}if(a)return this.onOperation(o,a,h,l,r);if(!(a=t.data.odUniOperator[e.operator])||"string"!==d)return"";if("substringof"===a){var p=l;l=h,h=p}if(o+=a+"(",o+=h+",",r&&(o+=r),o+=l+")","notcontains"==e.operator&&(o+=" eq false"),""!=e.anyCondition&&a){var m;return m+=l.table,m+="/"+e.anyCondition,m+="(d:d/",o+=o,m+=")"}return o},onOperation:function(e,t,i,s,a){return e+=i,e+=t,a&&(e+=a),e+s},onComplexPredicate:function(e,t){for(var i=[],s=0;s<e.predicates.length;s++)i.push("("+this.onEachWhere(e.predicates[s],t)+")");return i.join(" "+e.condition+" ")},onWhere:function(e){return this.pvt.searches&&e.push(this.onEachWhere(this.pvt.searches,null,!0)),e.join(" and ")},onEachSearch:function(e){0===e.fields.length&&M("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.searches||[],s=0;s<e.fields.length;s++)i.push(new t.Predicate(e.fields[s],e.operator,e.key,e.ignoreCase));this.pvt.searches=i},onSearch:function(e){return this.pvt.searches=t.Predicate.or(this.pvt.searches),""},onEachSort:function(e){var t=[];if(e.name instanceof Array)for(var i=0;i<e.name.length;i++)t.push(this._p(e.name[i]));else t.push(this._p(e.name)+("descending"===e.direction?" desc":""));return t.join(",")},onSortBy:function(e){return e.reverse().join(",")},onGroup:function(e){return this.pvt.groups=e,""},onSelect:function(e){for(var t=0;t<e.length;t++)e[t]=this._p(e[t]);return e.join(",")},onAggregates:function(e){return this.pvt.aggregates=e,""},onCount:function(e){return!0===e?"allpages":""},beforeSend:function(e,t,i){i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()&&(t.setRequestHeader("Accept",r.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")),e.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(i,s,a,r,o,l){if(!t.isNullOrUndefined(i.d)){var d=a&&a._requiresCount?i.d.results:i.d;if(!t.isNullOrUndefined(d))for(var h=0;h<d.length;h++)!t.isNullOrUndefined(d[h].__metadata)&&delete d[h].__metadata}var c=o&&o.ejPvtData;if(r&&r.getResponseHeader("Content-Type")&&-1!=r.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return a._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){var u,p,m=r.getResponseHeader("Content-Type");if(m=m.substring(m.indexOf("=batchresponse")+1),i=i.split(m),i.length<2)return;i=i[1];var g=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i);i.replace(g[0],"");var f=g[1];i=i.split(f);for(var h=i.length;h>-1;h--)/\bContent-ID:/i.test(i[h])&&/\bHTTP.+201/.test(i[h])&&(u=parseInt(/\bContent-ID: (\d+)/i.exec(i[h])[1]),l.added[u]&&(p=n.parseJson(/^\{.+\}/m.exec(i[h])[0]),e.extend(l.added[u],this.processResponse(p))));return l}var _=r&&r.getResponseHeader("DataServiceVersion"),v=null,b={};if(_=_&&parseInt(_,10)||2,a&&a._requiresCount&&((i.__count||i["odata.count"])&&(v=i.__count||i["odata.count"]),i.d&&(i=i.d),(i.__count||i["odata.count"])&&(v=i.__count||i["odata.count"])),3===_&&i.value&&(i=i.value),i.d&&(i=i.d),_<3&&i.results&&(i=i.results),c&&c.aggregates&&c.aggregates.length){for(var x,y=c.aggregates,w={},h=0;h<y.length;h++)(x=t.aggregates[y[h].type])&&(w[y[h].field+" - "+y[h].type]=x(i,y[h].field));b=w}if(c&&c.groups&&c.groups.length)for(var S=c.groups,h=0;h<S.length;h++){var T=C(S[h],a.queries);i=t.group(i,S[h],c.aggregates,T)}return P(v)?i:{result:i,count:v,aggregates:b}},convertToQueryString:function(e,t,i){var s=[],a=e.table||"";delete e.table,i.dataSource.requiresFormat&&(e.$format="json");for(var r in e)s.push(r+"="+e[r]);return s=s.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!a?s:s.length?a+"?"+s:a||""},insert:function(e,t,i){return{url:e.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(e,i,s,a){return"string"==typeof s?{type:"DELETE",url:t.isGUID(s)?e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s+")":e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"('"+s+"')"}:{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s+")"}},update:function(e,i,s,a){var r;return r="string"==typeof s[i]?t.isGUID(s[i])?e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s[i]+")":e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"('"+s[i]+"')":e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s[i]+")",{type:"PUT",url:r,data:JSON.stringify(s),accept:this.options.accept}},batchRequest:function(e,i,s){var a=s.guid=t.getGuid(r.batchPre),n=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),o={url:s.url,key:s.key,cid:1,cSet:t.getGuid(r.changeSet)},l="--"+a+"\n";return l+="Content-Type: multipart/mixed; boundary="+o.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(i.added,o),l+=this.generateUpdateRequest(i.changed,o),l+=this.generateDeleteRequest(i.deleted,o),l+=o.cSet+"--\n",l+="--"+a+"--",{type:"POST",url:n,contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:l}},generateDeleteRequest:function(e,t){if(!e)return"";for(var i,s="",a=0;a<e.length;a++)s+="\n"+t.cSet+"\n",s+=r.changeSetContent+"\n\n",s+="DELETE ",i="string"==typeof e[a][t.key]?"'"+e[a][t.key]+"'":e[a][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+r.accept+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=r.batchChangeSetContentType+"\n";return s+"\n"},generateInsertRequest:function(e,t){if(!e)return"";for(var i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=r.changeSetContent+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+r.accept+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=r.batchChangeSetContentType+"\n\n",i+=JSON.stringify(e[s])+"\n";return i},generateUpdateRequest:function(e,t){if(!e)return"";for(var i,s="",a=0;a<e.length;a++)s+="\n"+t.cSet+"\n",s+=r.changeSetContent+"\n\n",s+="PUT ",i="string"==typeof e[a][t.key]?"'"+e[a][t.key]+"'":e[a][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+r.accept+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=r.batchChangeSetContentType+"\n\n",s+=JSON.stringify(e[a])+"\n\n";return s},_p:function(e){return e.replace(/\./g,"/")}}),t.ODataV4Adaptor=(new t.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(e){return!0===e?"true":""},onPredicate:function(e,i,s){var a="",r=e.value,n=r instanceof Date;return t.data.odUniOperator.contains="contains",a=t.ODataAdaptor.prototype.onPredicate.call(this,e,i,s),t.data.odUniOperator.contains="substringof",n&&(a=a.replace(/datetime'(.*)'$/,"$1")),a},onOperation:function(e,t,i,s,a){return a?(e+="("+i,e+=t,e+=s.replace(/["']/g,"")+")"):(e+=i,e+=t,e+=s),e},onEachSearch:function(e){var t=this.pvt.search||[];t.push(e.key),this.pvt.search=t},onSearch:function(e){return this.pvt.search.join(" OR ")},beforeSend:function(e,t,i){},processQuery:function(e,i){for(var s=/\/[\d*\/]*/g,a="",r=i._expands.length-1;r>0;r--)if(a.indexOf(i._expands[r])>=0)i._expands.pop();else if(s.test(i._expands[r])){a=i._expands.pop();for(var n=a.replace(s,"($expand="),o=0;o<a.split(s).length-1;o++)n+=")";i._expands.unshift(n),r++}return t.ODataAdaptor.prototype.processQuery.apply(this,[e,i])},processResponse:function(i,s,a,r,o,l){var d=o&&o.ejPvtData;if(r&&r.getResponseHeader("Content-Type")&&-1!=r.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return a._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){var h,c,u=r.getResponseHeader("Content-Type");if(u=u.substring(u.indexOf("=batchresponse")+1),i=i.split(u),i.length<2)return;i=i[1];var p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i);i.replace(p[0],"");var m=p[1];i=i.split(m);for(var g=i.length;g>-1;g--)/\bContent-ID:/i.test(i[g])&&/\bHTTP.+201/.test(i[g])&&(h=parseInt(/\bContent-ID: (\d+)/i.exec(i[g])[1]),l.added[h]&&(c=n.parseJson(/^\{.+\}/m.exec(i[g])[0]),e.extend(l.added[h],this.processResponse(c))));return l}var f=null,_={};if(a&&a._requiresCount&&"@odata.count"in i&&(f=i["@odata.count"]),i=t.isNullOrUndefined(i.value)?i:i.value,d&&d.aggregates&&d.aggregates.length){for(var v,b=d.aggregates,x={},g=0;g<b.length;g++)(v=t.aggregates[b[g].type])&&(x[b[g].field+" - "+b[g].type]=v(i,b[g].field));_=x}if(d&&d.groups&&d.groups.length)for(var y=d.groups,g=0;g<y.length;g++){var w=C(y[g],a.queries);i=t.group(i,y[g],d.aggregates,w)}return P(f)?i:{result:i,count:f,aggregates:_}}}),t.JsonAdaptor=(new t.Adaptor).extend({processQuery:function(e,t){for(var i,s,a=e.dataSource.json.slice(0),r=a.length,n=!0,o={},l=0;l<t.queries.length;l++)s=t.queries[l],i=this[s.fn].call(this,a,s.e,t),"onAggregates"==s.fn?o[s.e.field+" - "+s.e.type]=i:a=void 0!==i?i:a,"onPage"!==s.fn&&"onSkip"!==s.fn&&"onTake"!==s.fn&&"onRange"!==s.fn||(n=!1),n&&(r=a.length);return t._requiresCount&&(a={result:a,count:r,aggregates:o}),a},batchRequest:function(e,t,i){var s;for(s=0;s<t.added.length;s++)this.insert(e,t.added[s]);for(s=0;s<t.changed.length;s++)this.update(e,i.key,t.changed[s]);for(s=0;s<t.deleted.length;s++)this.remove(e,i.key,t.deleted[s]);return t},onWhere:function(e,t){return e?e.filter(function(e){return t.validate(e)}):e},onAggregates:function(e,i){var s=t.aggregates[i.type];return e&&s&&0!=e.length?s(e,i.field):null},onSearch:function(e,i){return e&&e.length?(0===i.fieldNames.length&&t.pvt.getFieldList(e[0],i.fieldNames),e.filter(function(e){for(var s=0;s<i.fieldNames.length;s++)if(i.comparer.call(e,t.pvt.getObject(i.fieldNames[s],e),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):e},onSortBy:function(e,i,s){if(!e)return e;var a,r=h(i.fieldName,s);if(!r)return e.sort(i.comparer);if(r instanceof Array){r=r.slice(0);for(var n=r.length-1;n>=0;n--)r[n]&&(a=i.comparer,r[n].endsWith(" desc")&&(a=t.pvt.fnSort(t.sortOrder.Descending),r[n]=r[n].replace(" desc","")),e=w(e,r[n],a,[]));return e}return w(e,r,i.comparer,s?s.queries:[])},onGroup:function(e,i,s){if(!e)return e;var a=o(s.queries,"onAggregates"),r=[];if(a.length)for(var n,l=0;l<a.length;l++)n=a[l].e,r.push({type:n.type,field:h(n.field,s)});var d=C(i.fieldName,s.queries);return t.group(e,h(i.fieldName,s),r,d)},onPage:function(e,t,i){var s=h(t.pageSize,i),a=(h(t.pageIndex,i)-1)*s,r=a+s;return e?e.slice(a,r):e},onRange:function(e,t){return e?e.slice(h(t.start),h(t.end)):e},onTake:function(e,t){return e?e.slice(0,h(t.nos)):e},onSkip:function(e,t){return e?e.slice(h(t.nos)):e},onSelect:function(e,i){return e?t.select(e,h(i.fieldNames)):e},insert:function(e,t){return e.dataSource.json.push(t)},remove:function(e,i,s,a){var r,n=e.dataSource.json;for("object"==typeof s&&(s=t.getObject(i,s)),r=0;r<n.length&&t.getObject(i,n[r])!==s;r++);return r!==n.length?n.splice(r,1):null},update:function(i,s,a,r){var n,o=i.dataSource.json,l=t.getObject(s,a);for(n=0;n<o.length&&t.getObject(s,o[n])!==l;n++);return n<o.length?e.extend(o[n],a):null}}),t.ForeignKeyAdaptor=function(i,s){var a=(new t[s||"JsonAdaptor"]).extend({init:function(){this.foreignData=[],this.key=[],this.adaptorType=s,this.value=[],this.fValue=[],this.keyField=[];for(var e=i,a=0;a<e.length;a++)this.foreignData[a]=e[a].dataSource,this.key[a]=e[a].foreignKeyField,this.fValue[a]=t.isNullOrUndefined(e[a].field)?e[a].foreignKeyValue:e[a].field+"_"+e[a].foreignKeyValue,this.value[a]=e[a].foreignKeyValue,this.keyField[a]=e[a].field||e[a].foreignKeyField,this.initial=!0},processQuery:function(e,i){var s=e.dataSource.json;if(this.initial){for(var a=0;a<s.length;a++)for(var r=this,n=0;n<this.foreignData.length;n++)this.foreignData[n].filter(function(e){t.getObject(r.key[n],e)==t.getObject(r.keyField[n],s[a])&&(s[a][r.fValue[n]]=t.getObject(r.value[n],e))});this.initial=!1}return this.base.processQuery.apply(this,[e,i])},setValue:function(i){for(var s=0;s<this.foreignData.length;s++){var a=this,r=i[this.fValue[s]];"string"!=typeof r||isNaN(r)||(r=t.parseFloat(r));var n=e.grep(a.foreignData[s],function(e){return e[a.value[s]]==r})[0];t.isNullOrUndefined(n)&&(n=e.grep(a.foreignData[s],function(e){return e[a.key[s]]==r})[0],void 0!=t.getObject(this.value[s],n)&&t.createObject(a.value[s],t.getObject(this.value[s],n),i)),void 0!=t.getObject(this.value[s],n)&&t.createObject(this.keyField[s],t.getObject(this.key[s],n),i)}},insert:function(e,t,i){return this.setValue(t),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}},update:function(e,i,s,a){return this.setValue(s),t.JsonAdaptor.prototype.update(e,i,s,a),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:s,action:"update",keyColumn:i,key:s[i],table:a,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}}});return e.extend(this,new a),this},t.remoteSaveAdaptor=(new t.JsonAdaptor).extend({beforeSend:t.UrlAdaptor.prototype.beforeSend,insert:t.UrlAdaptor.prototype.insert,update:t.UrlAdaptor.prototype.update,remove:t.UrlAdaptor.prototype.remove,addParams:t.UrlAdaptor.prototype.addParams,batchRequest:function(e,t,i,s){var a={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:a}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a)}},processResponse:function(e,i,s,a,r,n,o){if(t.isNullOrUndefined(n))return e.d?e.d:e;e.d&&(e=e.d),e.added&&(n.added=t.parseJSON(e.added)),e.changed&&(n.changed=t.parseJSON(e.changed)),e.deleted&&(n.deleted=t.parseJSON(e.deleted));var l;for(l=0;l<n.added.length;l++)t.JsonAdaptor.prototype.insert(i,n.added[l]);for(l=0;l<n.changed.length;l++)t.JsonAdaptor.prototype.update(i,o,n.changed[l]);for(l=0;l<n.deleted.length;l++)t.JsonAdaptor.prototype.remove(i,o,n.deleted[l]);return e}}),t.WebApiAdaptor=(new t.ODataAdaptor).extend({insert:function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},remove:function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(e,t,i,s){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},batchRequest:function(i,s,a){var n=a.guid=t.getGuid(r.batchPre),o=[];return e.each(s.added,function(e,t){o.push("--"+n),o.push("Content-Type: application/http; msgtype=request",""),o.push("POST "+i.dataSource.insertUrl+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",t?JSON.stringify(t):"")}),e.each(s.changed,function(e,t){o.push("--"+n),o.push("Content-Type: application/http; msgtype=request",""),o.push("PUT "+i.dataSource.updateUrl+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",t?JSON.stringify(t):"")}),e.each(s.deleted,function(e,t){o.push("--"+n),o.push("Content-Type: application/http; msgtype=request",""),o.push("DELETE "+i.dataSource.removeUrl+"/"+t[a.key]+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",t?JSON.stringify(t):"")}),o.push("--"+n+"--",""),{type:"POST",url:i.dataSource.batchUrl||i.dataSource.crudUrl||i.dataSource.url,data:o.join("\r\n"),contentType:'multipart/mixed; boundary="'+n+'"'}},processResponse:function(e,i,s,a,r,n){var o=r&&r.ejPvtData;if(r&&"post"!=r.type.toLowerCase()){var l=a&&a.getResponseHeader("DataServiceVersion"),d=null,h={};if(l=l&&parseInt(l,10)||2,s&&s._requiresCount&&(P(e.Count)||(d=e.Count)),l<3&&e.Items&&(e=e.Items),o&&o.aggregates&&o.aggregates.length){for(var c,u=o.aggregates,p={},m=0;m<u.length;m++)(c=t.aggregates[u[m].type])&&(p[u[m].field+" - "+u[m].type]=c(e,u[m].field));h=p}if(o&&o.groups&&o.groups.length)for(var g=o.groups,m=0;m<g.length;m++){var f=C(g[m],s.queries);e=t.group(e,g[m],o.aggregates,f)}return P(d)?e:{result:e,count:d,aggregates:h}}}});var h=function(e,t){return"function"==typeof e?e.call(t||{}):e};t.TableModel=function(i,s,a,r){if(!O(this,t.TableModel))return new t.TableModel(s);O(s,Array)||M("ej.TableModel - Json Array is required");for(var n,o=[],l=E(g,this),d=0;d<s.length;d++)n=new t.Model(s[d],this),n.state="unchanged",n.on("stateChange",l),r&&n.computes(r),o.push(n);return this.name=i||"table1",this.rows=t.NotifierArray(o),this._deleted=[],this._events=e({}),this.dataManager=a,this._isDirty=!1,this},t.TableModel.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},setDataManager:function(e){this.dataManagar=e},saveChanges:function(){if(this.dataManager&&O(this.dataManager,t.DataManager)||M("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()){var e=this.dataManager.saveChanges(this.getChanges(),this.key,this.name);e.done(E(function(e){for(var t=this.toArray(),i=0;i<t.length;i++)"added"===t.state&&t.set(this.key,e.added.filter(function(e){return e[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})
},this)),e.fail(E(function(e){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:e})},this)),this._isDirty=!1}},rejectChanges:function(){for(var e=this.toArray(),t=0;t<e.length;t++)e[t].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(e){var i=new t.Model(e);i._isDirty=this._isDirty=!0,this.rows.push(i),this._events.triggerHandler({type:"insert",model:i,table:this})},update:function(e){this.key||M("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=e,s=this.key,a=i[s];t=this.rows.array.filter(function(e){return e.get(s)===a}),t=t[0];for(var r in i)t.set(r,i[r]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:t,table:this})},remove:function(e){this.key||M("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=this.key,s=-1;e&&"object"==typeof e&&(e=void 0!==e[i]?e[i]:e.get(i));for(var a=0;a<this.rows.length();a++)if(this.rows.array[a].get(i)===e){s=a;break}s>-1&&(t=this.rows.removeAt(s),t.markDelete(),this._deleted.push({model:t,position:s}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:t,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var e={added:[],changed:[]},i=this.toArray(),s=0;s<i.length;s++)e[i[s].state]&&e[i[s].state].push(i[s].json);return e.deleted=t.select(this._deleted,["model"]),e},toArray:function(){return this.rows.toArray()},setDirty:function(e,t){this._isDirty!==!!e&&(this._isDirty=!!e,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(e){return this.rows.array[e]},length:function(){return this.rows.array.length},bindTo:function(t){var i,s=c,a=e(t.html()),r=this.toArray();e.inArray(t.prop("tagName").toLowerCase(),["table","tbody"])&&(s=u),s.insertBefore(t),t.detach().empty();for(var n=0;n<r.length;n++)i=a.clone(),r[n].bindTo(i),t.append(i);t.insertAfter(s),s.remove()}};var c=i?e(document.createElement("div")):{},u=i?e(document.createElement("tr")):{};t.Model=function(i,s,a){"string"==typeof s&&(a=s,s=null),this.$id=L("m"),this.json=i,this.table=s instanceof t.TableModel?s:null,this.name=a||this.table&&this.table.name,this.dataManager=s instanceof t.DataManager?s:s.dataManagar,this.actual={},this._events=e({}),this.isDirty=!1,this.state="added",this._props=[],this._computeEls={},this._fields={},this._attrEls={},this._updates={},this.computed={}},t.Model.prototype={computes:function(t){e.extend(this.computed,t)},on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},set:function(e,t){var i,s=this.json,a=e;e=e.split(".");for(var r=0;r<e.length-1;r++)e=e[0],s=s[e[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),i=s[e],void 0!==this.actual[e]||e in this.actual||(this.actual[e]=t),s[e]=t,this._updateValues(e,t),this._events.triggerHandler({type:a,current:t,previous:i,model:this})},get:function(e){return t.pvt.getObject(e,this.json)},revert:function(e){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,e?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(i,s){return i=i||this.dataManagar,s=s||i.dataSource.key,i||M("ej.Model - DataManager is required to commit the changes"),"added"===this.state?i.insert(this.json,this.name).done(t.proxy(function(t){e.extend(this.json,t.record)},this)):"changed"===this.state?i.update(s,this.json,this.name):"deleted"===this.state?i.remove(s,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(t,i){if(this.state!==t){if("added"===this.state){if("deleted"!==t)return;t="unchanged"}var s=t;i=i||{},this.state=t,this._events.triggerHandler(e.extend({type:"stateChange",current:t,previous:s,model:this},i))}},properties:function(){if(this._props.length)return this._props;for(var e in this.json)this._props.push(e),this._updates[e]={read:[],input:[]};return this._props},bindTo:function(t){var i,s,a=e(t),r=a.find("[ej-observe], [ej-computed], [ej-prop]"),n=r.length;a.data("ejModel",this);for(var o={fields:[],props:[],computes:[]},l=0;l<n;l++)i=r.eq(l),s=i.attr("ej-prop"),s&&this._processAttrib(s,i,o),s=i.attr("ej-observe"),s&&-1!==this._props.indexOf(s)?this._processField(i,s,o):(s=i.attr("ej-computed"))&&this._processComputed(s,i,o);a.data("ejModelBinding"+this.$id,o)},unbind:function(t){var i,s={props:this._attrEls,computes:this._computeEls},a=!1;t&&(s=e(t).removeData("ejModel").data("ejModelBinding"+this.$id)||s,a=!0);for(var r in this.computed)i=s.computes[r],r=this.computed[r],i&&r.deps&&(this.off(r.deps.join(" "),i.handle),a&&delete this._computeEls[r]);a||(this._computeEls={});for(var r in s.props)(i=s.props[r])&&(this.off(i.deps.join(" "),i.handle),delete s.props[r],a&&delete this._attrEls[r]);if(a||(this._attrEls={}),s.fields&&s.fields.length)for(var n,o,l,d=s.fields.length,h=0;h<d;h++)n=s.fields[h],e(n).off("change",null,this._changeHandler),l=-1!==this.formElements.indexOf(n.tagName.toLowerCase())?"input":"read",-1!==(o=this._updates[l].indexOf(n))&&this._updates[l].splice(o,1)},_processComputed:function(e,t,i){if(e){var s,a,r=m(e),n=-1!==this.formElements.indexOf(t[0].tagName.toLowerCase())?"val":"html";this.computed[e]&&this.computed[r]||(this.computed[r]={value:new Function("var e = this; return "+e),deps:this._generateDeps(e)},e=r),s=this.computed[e],s.get||(s.get=function(){s.value.call(this.json)}),a=s.deps,s=s.value,this._updateDeps(a),this._updateElement(t,n,s),s={el:t,handle:E(this._computeHandle,this,{value:e,type:n})},this._computeEls[e]=s,i.computes[e]=s,this.on(a.join(" "),s.handle)}},_computeHandle:function(e){var t=this._computeEls[e.value];t&&this.computed[e.value]&&this._updateElement(t.el,e.type,this.computed[e.value].value)},_updateElement:function(t,i,s){t[i](s.call(e.extend({},this.json,this.computed)))},_updateDeps:function(e){for(var i=0;i<e.length;i++)!(e[i]in this.json)&&e[i]in this.computed&&t.merge(e,this.computed[e[i]].deps)},_generateDeps:function(e){for(var t,i=e.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),s=[],a=0;a<i.length;a++)i[a].startsWith("#ej.#")&&(t=i[a].replace("#ej.#","").split(" ")[0])&&-1!==this._props.indexOf(t)&&s.push(t);return s},_processAttrib:function(e,t,i){var s,a,r={};e=e.replace(/^ +| +$/g,"").split(";");for(var n=0;n<e.length;n++)e[n]=e[n].split(":"),e[n].length<2||(s=e[n][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""),r[s]=e[n][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));e=r;var o=[];for(s in e)o.push(e[s]);this._updateDeps(o),this._updateProps(t,e),r=L("emak"),a={el:t,handle:E(this._attrHandle,this,r),value:e,deps:o},t.prop("ejmodelattrkey",r),i.props[r]=a,this._attrEls[r]=a,this.on(o.join(" "),a.handle)},_attrHandle:function(e){var t=this._attrEls[e];t&&this._updateProps(t.el,t.value)},_updateProps:function(t,i){var s,a=this.json,r=this.computed;for(var n in i)s=i[n],s in a?s=a[s]:s in r&&(s=r[s])&&(s=s.value.call(e.extend({},this.json,r))),P(s)||t.prop(n,s)},_updateValues:function(e,t){var i=this._updates[e];i&&(i.read||i.input)&&(this._ensureItems(i.read,"html",t),this._ensureItems(i.input,"val",t))},_ensureItems:function(t,i,s){if(t)for(var a=t.length-1;a>-1;a--)t[a].offsetParent?e(t[a])[i](s):t.splice(a,1)},_changeHandler:function(t){t.data.self.set(t.data.prop,e(this).val())},_processField:function(e,t,i){var s={self:this,prop:t},a=this.get(t);return i.fields.push(e[0]),-1===this.formElements.indexOf(e[0].tagName.toLowerCase())?(e.html(a),this._updates[t].read.push(e[0])):(e.val(a).off("change",null,this._changeHandler).on("change",null,s,this._changeHandler),this._updates[t].input.push(e[0]))},formElements:["input","select","textarea"]};var p=/[^\w]+/g,m=function(e){return e.replace(p,"_")},g=function(e){this.setDirty(!0,e.model)};t.Predicate=function(e,i,s,a,r){if(!(this instanceof t.Predicate))return new t.Predicate(e,i,s,a,r);if(this.ignoreAccent=!1,"string"==typeof e){var n="";-1!=i.toLowerCase().indexOf(" any")?(i=i.replace(" any",""),n="any"):-1!=i.toLowerCase().indexOf(" all")&&(i=i.replace(" all",""),n="all"),this.field=e,this.operator=i,this.value=s,this.ignoreCase=a,this.ignoreAccent=r,this.isComplex=!1,this.anyCondition=n,this._comparer=t.data.fnOperators.processOperator(""!=n?n:this.operator)}else(e instanceof t.Predicate&&s instanceof t.Predicate||s instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[e],s instanceof Array?[].push.apply(this.predicates,s):this.predicates.push(s));return this},t.Predicate.and=function(){return f._combinePredicates([].slice.call(arguments,0),"and")},t.Predicate.or=function(){return f._combinePredicates([].slice.call(arguments,0),"or")},t.Predicate.fromJSON=function(e){if(O(e,Array)){for(var t=[],i=0,s=e.length;i<s;i++)t.push(f._fromJSON(e[i]));return t}return f._fromJSON(e)};var f={_combinePredicates:function(e,i){if(e.length){if(1===e.length){if(!O(e[0],Array))return e[0];e=e[0]}return new t.Predicate(e[0],i,e.slice(1))}},_combine:function(e,i,s,a,r,n,o){return i instanceof t.Predicate?t.Predicate[r](e,i):"string"==typeof i?t.Predicate[r](e,new t.Predicate(i,s,a,n,o)):M("Predicate - "+r+" : invalid arguments")},_fromJSON:function(e){if(!e||O(e,t.Predicate))return e;for(var i=e.predicates||[],s=i.length,a=[],r=0;r<s;r++)a.push(f._fromJSON(i[r]));return e.isComplex?new t.Predicate(a[0],e.condition,a.slice(1)):new t.Predicate(e.field,e.operator,t.parseJSON({val:e.value}).val,e.ignoreCase,e.ignoreAccent)}};if(t.Predicate.prototype={and:function(e,t,i,s,a){return f._combine(this,e,t,i,"and",s,a)},or:function(e,t,i,s,a){return f._combine(this,e,t,i,"or",s,a)},validate:function(e){var i,s,a=this.predicates;if(!this.isComplex)return this._comparer.call(this,t.pvt.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);i="and"===this.condition;for(var r=0;r<a.length;r++)if(s=a[r].validate(e),i){if(!s)return!1}else if(s)return!0;return i},toJSON:function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJSON())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e,anyCondition:this.anyCondition}}},t.dataUtil={swap:function(e,t,i){if(t!=i){var s=e[t];e[t]=e[i],e[i]=s}},mergeSort:function(e,i,s){return s&&"string"!=typeof s||(s=t.pvt.fnSort(s,!0)),"function"==typeof i&&(s=i,i=null),t.pvt.mergeSort(e,i,s)},max:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnDescending)},min:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnAscending)},distinct:function(e,t,i){for(var s,a=[],r={},n=0;n<e.length;n++)(s=R(e,t,n))in r||(a.push(i?e[n]:s),r[s]=1);return a},sum:function(e,t){for(var i,s=0,a="number"!=typeof R(e,t,0),r=0;r<e.length;r++)i=R(e,t,r),isNaN(i)||null===i||(a&&(i=+i),s+=i);return s},avg:function(e,i){return t.sum(e,i)/e.length},select:function(e,i){for(var s=[],a=0;a<e.length;a++)s.push(t.pvt.extractFields(e[a],i));return s},group:function(i,s,a,r,n,o){if(n=n||1,i.GROUPGUID==t.pvt.consts.GROUPGUID){for(var l=0;l<i.length;l++)if(t.isNullOrUndefined(o))i[l].items=t.group(i[l].items,s,a,r,i.level+1),i[l].count=i[l].items.length;else{var d=-1,h=e.grep(o,function(e){return e.key==i[l].key});d=o.indexOf(h[0]),i[l].items=t.group(i[l].items,s,a,r,i.level+1,o[d].items),i[l].count=o[d].count}return i.childLevels+=1,i}var c={},u=[];u.GROUPGUID=t.pvt.consts.GROUPGUID,u.level=n,u.childLevels=0,u.records=i;for(var p=0;p<i.length;p++){var m=R(i,s,p);if(t.isNullOrUndefined(r)||(m=r(m,s)),!c[m]&&(c[m]={key:m,count:0,items:[],aggregates:{},field:s},u.push(c[m]),!t.isNullOrUndefined(o))){var g=e.grep(o,function(e){return e.key==c[m].key});c[m].count=g[0].count}c[m].count=t.isNullOrUndefined(o)?c[m].count+=1:c[m].count,c[m].items.push(i[p])}if(a&&a.length)for(var p=0;p<u.length;p++){for(var f,_={},l=0;l<a.length;l++)if(f=t.aggregates[a[l].type],t.isNullOrUndefined(o))f&&(_[a[l].field+" - "+a[l].type]=f(u[p].items,a[l].field));else{var h=e.grep(o,function(e){return e.key==u[p].key});f&&(_[a[l].field+" - "+a[l].type]=f(h[0].items,a[l].field))}u[p].aggregates=_}return u},parseTable:function(i,s,a){var r,n,o=i.rows,l=[],d=[];if(!o.length)return[];switch(a=a||0,(s||"").toLowerCase()){case t.headerOption.tHead:r=i.tHead.rows[a];break;case t.headerOption.row:default:r=i.rows[a]}var h=r.cells;for(n=0;n<h.length;n++)l.push(e.trim(h[n].innerHTML));for(n=a+1;n<o.length;n++){for(var c={},u=o[n].cells,p=0;p<u.length;p++){var m=u[p].innerHTML;"string"==typeof m&&e.isNumeric(m)?c[l[p]]=Number(m):c[l[p]]=m}d.push(c)}return d}},t.headerOption={tHead:"thead",row:"row"},t.aggregates={sum:function(e,i){return t.sum(e,i)},average:function(e,i){return t.avg(e,i)},minimum:function(e,i){return t.getObject(i,t.min(e,i))},maximum:function(e,i){return t.getObject(i,t.max(e,i))},truecount:function(e,i){var s=t.Predicate(i,"equal",!0);return t.DataManager(e).executeLocal(t.Query().where(s)).length},falsecount:function(e,i){var s=t.Predicate(i,"equal",!1);return t.DataManager(e).executeLocal(t.Query().where(s)).length},count:function(e,t){return e.length}},t.pvt={filterQueries:o,mergeSort:function(e,i,s){if(e.length<=1)return e;var a=parseInt(e.length/2,10),r=e.slice(0,a),n=e.slice(a);return r=t.pvt.mergeSort(r,i,s),n=t.pvt.mergeSort(n,i,s),t.pvt.merge(r,n,i,s)},getItemFromComparer:function(e,i,s){var a,r,n,o=0,l="string"==typeof R(e,i,0);if(e.length)for(;t.isNullOrUndefined(a)&&o<e.length;)a=R(e,i,o),n=e[o++];for(;o<e.length;o++)r=R(e,i,o),t.isNullOrUndefined(r)||(l&&(a=+a,r=+r),s(a,r)>0&&(a=r,n=e[o]));return n},quickSelect:function(e,i,s,a,r,n){if(s==a)return e[s];var o=t.pvt.partition(e,i,s,a,n),l=o-s+1;return l==r?e[o]:r<l?t.pvt.quickSelect(e,i,s,o-1,r,n):t.pvt.quickSelect(e,i,o+1,a,r-l,n)},extractFields:function(e,i){var s={};if(1==i.length)return t.pvt.getObject(i[0],e);for(var a=0;a<i.length;a++)s[i[a].replace(".",t.pvt.consts.complexPropertyMerge)]=t.pvt.getObject(i[a],e);return s},partition:function(e,i,s,a,r){var n=parseInt((s+a)/2,10),o=R(e,i,n);t.swap(e,n,a),n=s;for(var l=s;l<a;l++)r(R(e,i,l),o)&&(t.swap(e,l,n),n++);return t.swap(e,n,a),n},fnSort:function(e){return e=e?e.toLowerCase():t.sortOrder.Ascending,e==t.sortOrder.Ascending?t.pvt.fnAscending:t.pvt.fnDescending},fnGetComparer:function(e,i){return function(s,a){return i(t.pvt.getObject(e,s),t.pvt.getObject(e,a))}},fnAscending:function(e,i){return t.isNullOrUndefined(i)&&t.isNullOrUndefined(e)?-1:null===i||void 0===i?-1:"string"==typeof e?e.localeCompare(i):null===e||void 0===e?1:e-i},fnDescending:function(e,i){return t.isNullOrUndefined(i)&&t.isNullOrUndefined(e)?-1:null===i||void 0===i?1:"string"==typeof e?-1*e.localeCompare(i):null===e||void 0===e?-1:i-e},merge:function(e,t,i,s){for(var a,r=[];e.length>0||t.length>0;)a=e.length>0&&t.length>0?s?s(R(e,i,0),R(t,i,0))<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,r.push(a.shift());return r},getObject:function(e,t){if(t){if(!e)return t;if(-1===e.indexOf("."))return t[e];for(var i=t,s=e.split("."),a=0;a<s.length&&null!=i;a++)i=i[s[a]];return i}},createObject:function(e,t,i){var s,a=e.split("."),r=i||window,n=r;for(s=0;s<a.length;s++)s+1==a.length?n[a[s]]=void 0===t?{}:t:null==n[a[s]]&&(n[a[s]]={}),n=n[a[s]];return r},ignoreDiacritics:function(e){return"string"!=typeof e?e:e.split("").map(function(e){return e in t.data.diacritics?t.data.diacritics[e]:e}).join("")},getFieldList:function(e,i,s){if(void 0===s&&(s=""),void 0===i||null===i)return t.pvt.getFieldList(e,[],s);for(var a in e)"object"!=typeof e[a]||e[a]instanceof Array?i.push(s+a):t.pvt.getFieldList(e[a],i,s+a+".");return i}},t.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},t.data={},t.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne ",in:" eq ",notin:" ne "},t.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",notcontains:"substringof"},t.data.diacritics={"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï"},t.data.fnOperators={equal:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?T(e)==T(i):e==i},notequal:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),!t.data.fnOperators.equal(e,i,s)},notin:function(e,i,s){for(var a=0;a<i.length;a++)if(0==t.data.fnOperators.notequal(e,i[a],s))return!1;return!0},lessthan:function(e,t,i){return i?T(e)<T(t):e<t},greaterthan:function(e,t,i){return i?T(e)>T(t):e>t},lessthanorequal:function(e,t,i){return i?T(e)<=T(t):e<=t},greaterthanorequal:function(e,t,i){return i?T(e)>=T(t):e>=t},contains:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?!P(e)&&!P(i)&&-1!=T(e).indexOf(T(i)):!P(e)&&!P(i)&&-1!=e.toString().indexOf(i)},notcontains:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),!t.data.fnOperators.contains(e,i,s)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?e&&i&&T(e).startsWith(T(i)):e&&i&&e.startsWith(i)},endswith:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?e&&i&&T(e).endsWith(T(i)):e&&i&&e.endsWith(i)},all:function(e,i,s){for(var a=0;a<i.length;a++)if(0==t.data.fnOperators[this.operator](e,i[a],s))return!1;return!0},any:function(e,i,s){for(var a=0;a<i.length;a++)if(1==t.data.fnOperators[this.operator](e,i[a],s))return!0;return!1},processSymbols:function(e){var i=t.data.operatorSymbols[e];if(i){var s=t.data.fnOperators[i];if(s)return s}return M("Query - Process Operator : Invalid operator")},processOperator:function(e){var i=t.data.fnOperators[e];return i||t.data.fnOperators.processSymbols(e)}},t.data.fnOperators.in=function(e,i,s){for(var a=0;a<i.length;a++)if(1==t.data.fnOperators.equal(e,i[a],s))return!0;return!1},t.NotifierArray=function(i){return O(this,t.NotifierArray)?(this.array=i,this._events=e({}),this._isDirty=!1,this):new t.NotifierArray(i)},t.NotifierArray.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},push:function(e){var t;return t=O(e,Array)?[].push.apply(this.array,e):this.array.push(e),this._raise("add",{item:e,index:this.length()-1}),t},pop:function(){var e=this.array.pop();return this._raise("remove",{item:e,index:this.length()-1}),e},addAt:function(e,t){return this.array.splice(e,0,t),this._raise("add",{item:t,index:e}),t},removeAt:function(e){var t=this.array.splice(e,1)[0];return this._raise("remove",{item:t,index:e}),t},remove:function(e){var t=this.array.indexOf(e);return t>-1&&(this.array.splice(t,1),this._raise("remove",{item:e,index:t})),t},length:function(){return this.array.length},_raise:function(t,i){this._events.triggerHandler(e.extend({type:t},i)),this._events.triggerHandler({type:"all",name:t,args:i})},toArray:function(){return this.array}},e.extend(t,t.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=0,s=this.length;i<s;++i)e.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var i=0;i<t;i++)if(i in this&&this[i]===e)return i;return-1},Array.prototype.filter=Array.prototype.filter||function(e){if("function"!=typeof e)throw new TypeError;for(var t=[],i=arguments[1]||this,s=0;s<this.length;s++){var a=this[s];e.call(i,a,s,this)&&t.push(a)}return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this.slice(-e.length)===e},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},t.support||(t.support={}),t.support.stableSort=function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),t=0;t<17;t++)if(t!==e[t])return!1;return!0}(),t.support.cors=e.support.cors,!e.support.cors&&window.XDomainRequest){var _=/^https?:\/\//i,v=/^get|post$/i,b=new RegExp("^"+location.protocol,"i"),x=/\/xml/i;e.ajaxTransport("text html xml json",function(e,t,i){if(e.crossDomain&&e.async&&v.test(e.type)&&_.test(t.url)&&b.test(t.url)){var s=null,a=(t.dataType||"").toLowerCase();return{send:function(i,r){s=new XDomainRequest,/^\d+$/.test(t.timeout)&&(s.timeout=t.timeout),s.ontimeout=function(){r(500,"timeout")},s.onload=function(){var e="Content-Length: "+s.responseText.length+"\r\nContent-Type: "+s.contentType,t={code:200,message:"success"},i={text:s.responseText};try{if("json"===a)try{i.json=JSON.parse(s.responseText)}catch(e){t.code=500,t.message="parseerror"}else if("xml"===a||"text"!==a&&x.test(s.contentType)){var n=new ActiveXObject("Microsoft.XMLDOM");n.async=!1;try{n.loadXML(s.responseText)}catch(e){n=void 0}if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+s.responseText;i.xml=n}}catch(e){throw e}finally{r(t.code,t.message,i,e)}},s.onerror=function(){r(500,"error",{text:s.responseText})},-1!=navigator.userAgent.indexOf("MSIE 9.0")&&(s.onprogress=function(){}),s.open(e.type,e.url),s.send(t.data)},abort:function(){s&&s.abort()}}}})}e.support.cors=!0,t.sortOrder={Ascending:"ascending",Descending:"descending"},t.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"};var y=function(e,t){t&&(e=E(e,t)),(window.setImmediate||window.setTimeout)(e,0)};t.support.enableLocalizedSort=!1;var w=function(e,i,s,a){return t.support.stableSort?t.support.enableLocalizedSort||"string"!=typeof t.pvt.getObject(i,e[0]||{})||s!==t.pvt.fnAscending&&s!==t.pvt.fnDescending||1!==a.filter(function(e){return"onSortBy"===e.fn}).length?e.sort(t.pvt.fnGetComparer(i,s)):S(e,i,s===t.pvt.fnDescending):t.mergeSort(e,i,s)},C=function(i,s){for(var a=e.grep(s,function(e){return"onGroup"==e.fn}),r=0;r<a.length;r++)if(t.getObject("fieldName",a[r].e)==i)return t.getObject("fn",a[r].e)},S=function(e,i,s){var a=Object.prototype.toString;Object.prototype.toString=-1===i.indexOf(".")?function(){return this[i]}:function(){return t.pvt.getObject(i,this)},e=e.sort(),Object.prototype.toString=a,s&&e.reverse()},T=function(e){return e?e.toLowerCase?e.toLowerCase():e.toString().toLowerCase():0===e||!1===e?e.toString():""},R=function(e,i,s){return i?t.pvt.getObject(i,e[s]):e[s]},k=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&1===e.nodeType&&"object"==typeof e&&"string"==typeof e.nodeName},O=function(e,t){return e instanceof t},D=function(e,i,s,a){return function(r){return"object"==typeof r&&(a=r,r=null),new t.TableModel(r||e,i,s,a)}},I=function(t){return function(i,s){(s=s||window.ko)||M("Knockout is undefined");for(var a,r,n,o=[],l=0;l<t.length;l++){a={};for(r in t[l])r.startsWith("_")||(a[r]=s.observable(t[l][r]));for(r in i)n=i[r],e.isPlainObject(n)?(n.owner||(n.owner=a),n=s.computed(n)):n=s.computed(n,a),a[r]=n;o.push(a)}return s.observableArray(o)}},j=0,L=function(e){return j+=1,e+j};t.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var s=new Uint8Array(1);window.crypto.getRandomValues(s),t=s[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]})};var A=function(e,t){return function(){var i=[].slice.call(arguments,0);return i.push(this),e.apply(t||this,i)}},E=function(e,t,i){return"bind"in e?i?e.bind(t,i):e.bind(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}};t.merge=function(e,t){e&&t&&Array.prototype.push.apply(e,t)};var P=function(e){return void 0===e||null===e},M=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}}(window.jQuery,window.Syncfusion,window.document);var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},ejSparkline;!function(e){!function(e){e[e.Line="line"]="Line",e[e.Column="column"]="Column",e[e.Area="area"]="Area",e[e.WinLoss="winloss"]="WinLoss",e[e.Pie="pie"]="Pie"}(e.Type||(e.Type={}));var t=e.Type;!function(e){e[e.flatlight="flatlight"]="flatlight",e[e.azurelight="azurelight"]="azurelight",e[e.limelight="limelight"]="limelight",e[e.saffronlight="saffronlight"]="saffronlight",e[e.gradientlight="gradientlight"]="gradientlight",e[e.flatdark="flatdark"]="flatdark",e[e.azuredark="azuredark"]="azuredark",e[e.limedark="limedark"]="limedark",e[e.saffrondark="saffrondark"]="saffrondark",e[e.gradientdark="gradientdark"]="gradientdark"}(e.Themes||(e.Themes={}));var i=e.Themes;!function(s){var a=function(s){function a(a,r){
s.call(this),this.defaults={locale:null,enableGroupSeparator:!1,enableCanvasRendering:!1,padding:8,palette:["#8A2BE2","#ff1a75","#99cc00","#4d4dff","#660066","#FFA500","#FFD700","#FF00FF","#808000","#990000"],isResponsive:!0,dataSource:null,xName:"",yName:"",type:t.Line,width:1,stroke:null,opacity:1,fill:"#33ccff",border:{color:"transparent",width:1},rangeBandSettings:{startRange:null,endRange:null,opacity:.4,color:"transparent"},highPointColor:null,lowPointColor:null,negativePointColor:null,startPointColor:null,endPointColor:null,tooltip:{visible:!1,template:null,fill:"white",border:{width:1,color:null},font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",color:"#111111",opacity:1,size:"8px"}},markerSettings:{visible:!1,fill:null,width:2,opacity:1,border:{color:"white",width:1}},background:"transparent",size:{height:"",width:""},axisLineSettings:{visible:!1,color:"#111111",width:1,dashArray:""},theme:i.flatlight,load:null,loaded:null,doubleClick:null,rightClick:null,click:null,sparklineMouseMove:null,sparklineMouseLeave:null,seriesRendering:null,pointRegionMouseMove:null,pointRegionMouseClick:null,tooltipInitialize:null},this.dataTypes={dataSource:"data",palette:"array",type:"enum",theme:"enum"},this.model=null,this.svgLink="http://www.w3.org/2000/svg",this._id=null,this.negativePointIndexes=[],this.validTags=["div"],this._id=a,r&&(this.model=e.compareExtend({},r,this.defaults))}return __extends(a,s),a.prototype.isTouch=function(e){var t=e.originalEvent?e.originalEvent:e;return"touch"==t.pointerType||2==t.pointerType||t.type.indexOf("touch")>-1},a.prototype.browserInfo=function(){var e={},t=[],i={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie) ([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var s in i)if(i.hasOwnProperty(s)&&(t=navigator.userAgent.match(i[s]))){e.name=t[1].toLowerCase(),e.version=t[2],navigator.userAgent.match(/Trident\/7\./)&&(e.name="msie");break}return e.isMSPointerEnabled="msie"==e.name&&e.version>9&&window.navigator.msPointerEnabled,e.pointerEnabled=window.navigator.pointerEnabled,e},a.prototype.fadeOut=function(e){var t=1,i=setInterval(function(){t<=.1&&(clearInterval(i),e.parentNode&&e.parentNode.removeChild(e)),e.style.opacity=t,e.style.filter="alpha(opacity="+100*t+")",t-=.1*t},50)},a.prototype._setModel=function(t){for(var i in t){e.deepExtend(!0,this.model,{},t[i])}this.redraw()},a.prototype.unBindEvents=function(){var e=document.getElementById(this.rootId),t="",i=this.browserInfo(),s=i.isMSPointerEnabled,a=i.pointerEnabled;t=(s?a?"pointerup":"MSPointerUp":"touchend mouseup")+" "+(s?a?"pointermove":"MSPointerMove":"touchmove mousemove"),t=t.split(" ");for(var r=0;r<t.length;r++)e.removeEventListener(t[r],this.sparkMouseMove);e.removeEventListener("mouseout",this.sparkMouseLeave)},a.prototype.bindClickEvents=function(e){this.sparkClick=this.sparkClick.bind(this),ej.isTouchDevice()?(this.sparkTouchStart=this.sparkTouchStart.bind(this),e.addEventListener("touchend",this.sparkClick),e.addEventListener("touchstart",this.sparkTouchStart)):(this.sparkDoubleClick=this.sparkDoubleClick.bind(this),this.sparkRightClick=this.sparkRightClick.bind(this),e.addEventListener("click",this.sparkClick),e.addEventListener("dblclick",this.sparkDoubleClick),e.addEventListener("contextmenu",this.sparkRightClick))},a.prototype.unBindClickEvents=function(e){ej.isTouchDevice()?(e.removeEventListener("touchend",this.sparkClick),e.removeEventListener("touchstart",this.sparkTouchStart)):(e.removeEventListener("click",this.sparkClick),e.removeEventListener("dblclick",this.sparkDoubleClick),e.removeEventListener("contextmenu",this.sparkRightClick))},a.prototype.bindEvents=function(e){this.sparkMouseMove=this.sparkMouseMove.bind(this),this.sparkMouseLeave=this.sparkMouseLeave.bind(this);var t="",i=this.browserInfo(),s=i.isMSPointerEnabled,a=i.pointerEnabled;t=(s?a?"pointerup":"MSPointerUp":"touchend mouseup")+" "+(s?a?"pointermove":"MSPointerMove":"touchmove mousemove"),t=t.split(" ");for(var r=0;r<t.length;r++)e.addEventListener(t[r],this.sparkMouseMove);e.addEventListener("mouseout",this.sparkMouseLeave)},a.prototype.sparkTouchStart=function(e){this._longPressTimer=new Date},a.prototype.sparkClick=function(e){var t=new Date;null!=this.model.click&&this._trigger("click",{data:{event:e}}),ej.isTouchDevice()&&"click"!=e.type&&(null!=this._doubleTapTimer&&t-this._doubleTapTimer<300&&this.sparkDoubleClick(e),this._doubleTapTimer=t,null!=this._longPressTimer&&t-this._longPressTimer>1e3&&this.sparkRightClick(e))},a.prototype.sparkDoubleClick=function(e){null!=this.model.doubleClick&&this._trigger("doubleClick",{data:{event:e}})},a.prototype.sparkRightClick=function(e){null!=this.model.rightClick&&this._trigger("rightClick",{data:{event:e}})},a.prototype.sparkMouseMove=function(e){var t=this.isTouch(e);if(!(t&&e.type.toString().toLowerCase().indexOf("move")>-1)){for(var i,s,a,r,n,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C=this.model,S=this,T=C.locale,R=T&&C.enableGroupSeparator,k=this.visiblePoints,O=this.container.id+"_markerExplode",D=C.enableCanvasRendering?0:3,I="",j=parseInt(C.size.height),L=parseInt(C.size.width),A=C.tooltip.font,E=this.container.id+"_tooltip",P=document.getElementById(E),M=C.tooltip.border.color,F=document.getElementById(this.container.id),N=(F.clientHeight,F.parentNode),z=F.getClientRects()[0],V=z.top,B=z.left,H=e.clientX||(e.changedTouches?e.changedTouches[0].clientX:e.touches?e.touches[0].clientX:0),Y=e.clientY||(e.changedTouches?e.changedTouches[0].clientY:e.touches?e.touches[0].clientY:0),U=k.map(function(e){return e.location.X+z.left}),W=(k.map(function(e){return e.location.markerPos+z.top}),1/0),X=this.measureText,G=this.model.markerSettings,$=document.getElementById(this.container.id+"_canvasTracker"),q=0,Q=U.length;q<Q;q++)w=Math.abs(H-U[q]),W>w&&(W=w,f=U[q],this.pointIndex=q);if(H>B&&H<B+z.width&&Y>V&&Y<V+z.height){W=k[this.pointIndex].location;var K=function(e){g=e.length/2;var t=X(e,A);h=t.height+4,c=t.width+g,x=W.X,y=W.markerPos,y-h/2<0?y+=h/2:y+h/2>j&&(y-=h/2),x+c+c/10>L-C.padding?(x=W.X-Number(C.markerSettings.width)-Number(C.markerSettings.border.width)-4,I="M "+x+" "+W.markerPos+" L "+(x-c/10)+" "+(y-4)+" L "+(x-c/10)+" "+(y-h/2)+" L "+(x-c-c/10)+" "+(y-h/2)+" L "+(x-c-c/10)+" "+(y+h/2)+" L "+(x-c/10)+" "+(y+h/2)+" L "+(x-c/10)+" "+(y+4)+" Z"):(x=W.X+Number(C.markerSettings.width)+Number(C.markerSettings.border.width)+4,I="M "+x+" "+W.markerPos+" L "+(x+c/10)+" "+(y-4)+" L "+(x+c/10)+" "+(y-h/2)+" L "+(x+c+c/10)+" "+(y-h/2)+" L "+(x+c+c/10)+" "+(y+h/2)+" L "+(x+c/10)+" "+(y+h/2)+" L "+(x+c/10)+" "+(y+4)+" Z")};null!=C.tooltip.template&&""!=C.tooltip.template||(i=R&&W.Xval?W.Xval.toLocaleString(T):W.Xval,s=R&&W.Yval?W.Yval.toLocaleString(T):W.Yval,n=" X : "+i+" Y : "+s+" ",K(n)),a=this.pointIndex,void 0==this.prevMousePos&&(this.prevMousePos=f);var Z=function(e){var t=S.highPointIndex,i=S.lowPointIndex,s=S.negativePointIndexes,a=S.startPointIndex,r=S.endPointIndex;return e==t?C.highPointColor:e==i?C.lowPointColor:e==a&&null!=C.startPointColor?C.startPointColor:e==r&&null!=C.endPointColor?C.endPointColor:s.indexOf(e)>=0&&null!=C.negativePointColor?C.negativePointColor:G.fill?G.fill:C.fill};if(P||$){if(this.prevMousePos!=f){if(u={data:{pointIndex:a,currentText:n,location:W}},null!=this.model.tooltipInitialize&&this._trigger("tooltipInitialize",u),W.X-C.width/2,n!=u.data.currentText&&(n=u.data.currentText,K(n)),this.prevMousePos=f,m=Z(a),o={id:O,cx:W.X,cy:W.markerPos,r:Number(G.width),fill:G.border.color,stroke:m,"stroke-width":Number(G.border.width)},null==C.tooltip.template||""==C.tooltip.template)l={id:E,fill:C.tooltip.fill,stroke:null!=M?M:m,"stroke-width":C.tooltip.border.width,d:I},d={x:W.X+c+c/10>L-C.padding?x+D-c-c/10:x+D+c/10,y:y+h/4,fill:A.color,"font-size":A.size,"font-family":A.fontFamily,"font-weight":A.fontWeight,"font-style":A.fontStyle};else{var J,ee=document.getElementById(C.tooltip.template),te=ee.innerHTML;"object"==typeof C.dataSource[a]?(J=C.dataSource[a],J.x=W.Xval,J.y=W.Yval):J={x:W.Xval,y:W.Yval};var ie={point:J},te=this.parseTemplate(ee,ie),se=ee.innerText,ae=Number(C.markerSettings.width),se=this.parseTemplate(ee,ie),re=X(se,A),ne=W.X+Number(G.width)+Number(G.border.width)+ae;y=V+W.markerPos-re.height/2,x=B+ne,W.markerPos-re.height/2<C.padding?y+=re.height/2:W.markerPos+re.height/2>j-C.padding&&(y-=re.height/2),ne+re.width>L-C.padding&&(x=x-re.width-2*(Number(G.width)+Number(G.border.width)+ae)),l={background:C.tooltip.fill,border:C.tooltip.border.width+"px solid "+(null!=M?M:m),left:x+"px",top:y+"px"},p=document.getElementById(E),p.innerHTML=te,this.setStyles(l,p)}if(C.enableCanvasRendering)_=document.getElementById(this.container.id+"_canvasTracker"),v=_.getContext("2d"),v.clearRect(0,0,L,j),this.canvasDrawCircle(o,v),null!=C.tooltip.template&&""!=C.tooltip.template||(this.canvasDrawPath(l,v),d.font=A.size+" "+A.fontFamily,this.canvasDrawText(d,n,v));else{var oe=document.getElementById(E+"_g");this.drawCircle(o,oe),null==C.tooltip.template&&(this.drawPath(l,oe),r=F.getElementsByTagName("text")[0],r.textContent=n,this.setAttributes(d,r),oe.appendChild(r))}}}else{u={data:{pointIndex:a,currentText:n,location:W}},null!=this.model.tooltipInitialize&&this._trigger("tooltipInitialize",u),W.X-C.width/2,n!=u.data.currentText&&(n=u.data.currentText,K(n));var le=document.getElementsByClassName("ej-sparkline-tooltip");if(le[0]&&le[0].parentNode.removeChild(le[0]),m=Z(a),o={id:O,cx:W.X,cy:W.markerPos,r:Number(G.width),fill:G.border.color,stroke:m,"stroke-width":Number(G.border.width)},null==C.tooltip.template||""==C.tooltip.template)l={id:E,fill:C.tooltip.fill,stroke:null!=M?M:m,"stroke-width":C.tooltip.border.width,d:I},d={x:W.X+c+c/10>L-C.padding?x+D-c-c/10:x+D+c/10,y:y+h/4,fill:A.color,opacity:A.opacity,"font-size":A.size,"font-family":A.fontFamily,"font-weight":A.fontWeight,"font-style":A.fontStyle};else{var J,ee=document.getElementById(C.tooltip.template),te=ee.innerHTML;"object"==typeof C.dataSource[a]?(J=C.dataSource[a],J.x=W.Xval,J.y=W.Yval):J={x:W.Xval,y:W.Yval};var ie={point:J},te=this.parseTemplate(ee,ie),se=ee.innerText,ae=Number(C.markerSettings.width),se=this.parseTemplate(ee,ie),re=X(se,A),ne=W.X+Number(G.width)+Number(G.border.width)+ae;y=V+W.markerPos-re.height/2,x=B+ne,W.markerPos-re.height/2<C.padding?y+=re.height/2:W.markerPos+re.height/2>j-C.padding&&(y-=re.height/2),ne+re.width>L-C.padding&&(x=x-re.width-2*(Number(G.width)+Number(G.border.width)+ae)),l={background:C.tooltip.fill,border:C.tooltip.border.width+"px solid "+(null!=M?M:m),left:x+"px",top:y+"px",position:"fixed",height:"auto",width:"auto",display:"block",opacity:A.opacity,font:A.size+" "+A.fontFamily},p=document.createElement("div"),this.setAttributes({id:E,class:"ej-sparkline-tooltip"},p),this.setStyles(l,p),p.innerHTML=te,N.appendChild(p)}if(C.enableCanvasRendering)_=document.createElement("canvas"),b={id:this.container.id+"_canvasTracker",fill:"transparent",class:"ej-sparkline-tooltip",height:C.size.height,width:C.size.width},this.setAttributes(b,_),this.setStyles({left:B+"px",top:V+"px",position:"fixed"},_),v=_.getContext("2d"),this.canvasDrawCircle(o,v),null!=C.tooltip.template&&""!=C.tooltip.template||(this.canvasDrawPath(l,v),d.font=A.size+" "+A.fontFamily,this.canvasDrawText(d,n,v)),this.container.parentNode.appendChild(_);else{var de=document.createElementNS(this.svgLink,"g");this.setAttributes({id:E+"_g",class:"ej-sparkline-tooltip"},de),this.container.appendChild(de),this.drawCircle(o,de),null==C.tooltip.template&&(this.drawPath(l,de),r=this.createText(d,n),de.appendChild(r))}}}if(t){var he=null==C.tooltip.template||""==C.tooltip.template?C.enableCanvasRendering?this.container.id+"_canvasTracker":E+"_g":E,ce=document.getElementById(he),ue=this;setTimeout(function(){ue.fadeOut(ce)},1e3)}}},a.prototype.sparkMouseLeave=function(e){var t=e.clientX||(e.touches[0]?e.touches[0].clientX:e.changedTouches[0].clientX),i=e.clientY||(e.touches[0]?e.touches[0].clientY:e.changedTouches[0].clientY),s=this.container,a=(s.clientHeight,s.getClientRects()[0]),r=a.top,n=a.left,o=this.model,l=this.container.id+"_tooltip";if(t<n||t>n+a.width||i<r||i>r+a.height||this.touchEnd){if(null!=o.tooltip.template&&""!=o.tooltip.template){var d=document.getElementById(l);d&&d.parentNode.removeChild(d)}if(this.model.enableCanvasRendering){var h=document.getElementById(this.container.id+"_canvasTracker");h&&h.parentNode.removeChild(h)}else{var c=l+"_g",u=document.getElementById(c);u&&this.container.removeChild(u)}}},a.prototype.bindPieEvents=function(e){this.pieTooltip=this.pieTooltip.bind(this),this.pieTooltipHide=this.pieTooltipHide.bind(this);var t="",i=this.browserInfo(),s=i.isMSPointerEnabled,a=i.pointerEnabled;t=(s?a?"pointerup":"MSPointerUp":"touchend mouseup")+" "+(s?a?"pointermove":"MSPointerMove":"touchmove mousemove"),t=t.split(" ");for(var r=0;r<t.length;r++)e.addEventListener(t[r],this.pieTooltip);e.addEventListener("mouseout",this.pieTooltipHide),null!=this.model.pointRegionMouseClick&&(e.addEventListener("click",this.pieTooltip),e.addEventListener("touchstart",this.pieTooltip))},a.prototype.unbindPieEvents=function(){var e="",t=this.browserInfo(),i=t.isMSPointerEnabled,s=t.pointerEnabled,a=i?s?"pointerup":"MSPointerUp":"touchend mouseup",r=i?s?"pointermove":"MSPointerMove":"touchmove mousemove",n=document.getElementById(this.rootId);e=a+" "+r,e=e.split(" ");for(var o=0;o<e.length;o++)n.removeEventListener(e[o],this.pieTooltip);n.removeEventListener("mouseout",this.pieTooltipHide)},a.prototype.pieTooltip=function(e){var t=this.isTouch(e);if(t&&e.stopImmediatePropagation(),!(t&&e.type.toString().toLowerCase().indexOf("move")>-1)){null!=this.model.sparklineMouseMove&&this._trigger("sparklineMouseMove");var i,s,a,r,n=this.model,o=e.clientX||(e.changedTouches?e.changedTouches[0].clientX:e.touches?e.touches[0].clientX:0),l=(parseInt(n.size.height),parseInt(n.size.width),n.tooltip.font),d=e.clientY||(e.changedTouches?e.changedTouches[0].clientY:e.touches?e.touches[0].clientY:0),h=document.getElementById(this.container.id),c=(h.parentNode,h.getClientRects()[0]),u=c.top,p=c.left,m=(this.visiblePoints.map(function(e){return e.coordinates}),this.visiblePoints.map(function(e){return e.location})),g=this.visiblePoints.radius,f=this.visiblePoints.centerPos,_=this.visiblePoints,v=o-(f.X+p),b=d-(f.Y+u),x=Math.atan2(b,v),y=this.container.id+"_pieTooltip",w=document.getElementById(y),C=n.tooltip.border.color,S=Math.sqrt(v*v+b*b),T=null!=n.pointRegionMouseClick?"pointRegionMouseClick":null!=n.pointRegionMouseMove?"pointRegionMouseMove":null,R=n.palette,k=n.locale,O=n.enableGroupSeparator;if(Math.abs(S)<=g)for(var D=0,I=_.length;D<I;D++)i=_[D].stAng,s=_[D].endAng,(x=x<0?6.283+x:x)<=s&&x>=i&&(a=D,("pointRegionMouseClick"!=T||"click"!=e.type&&"touchstart"!=e.type)&&"pointRegionMouseMove"!=T||this._trigger(T,{data:{pointIndex:D,seriesType:"Pie",locationX:o,locationY:d}}));else w&&w.parentNode.removeChild(w);if(w&&null!=a){var j=m[a].Percent.toFixed(2);j=O?"&nbsp"+parseFloat(j).toLocaleString(k):j+"&nbsp%&nbsp";var L=this.measureText(j,l);r={left:o+12+"px",top:d+"px",border:n.tooltip.border.width+"px solid "+(null!=C?C:R[a%R.length]),"background-color":n.tooltip.fill,height:L.height+"px",width:L.width+"px"},this.setStyles(r,w),w.innerHTML=j}else if(null!=a){w=document.createElement("div");var j=m[a].Percent.toFixed(2);j=O?"&nbsp"+parseFloat(j).toLocaleString(k):j+"&nbsp%&nbsp";var L=this.measureText(j,l);r={left:o+12+"px",top:d+"px","background-color":n.tooltip.fill,color:l.color,border:n.tooltip.border.width+"px solid "+(null!=C?C:R[a%R.length]),height:L.height+"px",width:L.width+"px","font-size":l.size,opacity:l.opacity,"font-weight":l.fontWeight,"font-family":l.fontFamily,"font-style":l.fontStyle,"z-index":"100000",position:"fixed"},w.setAttribute("id",y),this.setStyles(r,w),w.innerHTML=j,document.body.appendChild(w)}if(t){this.touchEnd=!0;var A=document.getElementById(this.container.id+"_pieTooltip"),E=this;setTimeout(function(){E.fadeOut(A)},500)}}},a.prototype.pieTooltipHide=function(e){if(!this.touchEnd){null!=this.model.sparklineMouseLeave&&this._trigger("sparklineMouseLeave");var t=this.container.id+"_pieTooltip",i=document.getElementById(t);i&&document.body.removeChild(i)}},a.prototype.bindRegionEvents=function(e){this.sparklineEvent=this.sparklineEvent.bind(this);var t=this.findBrowser();"IE"!=t&&"firefox"!=t||(e.style["touch-action"]="none"),null!=this.model.pointRegionMouseMove&&(e.addEventListener("mousemove",this.sparklineEvent,!0),e.addEventListener("touchmove",this.sparklineEvent,!0)),null!=this.model.pointRegionMouseClick&&(e.addEventListener("click",this.sparklineEvent,!0),e.addEventListener("touchstart",this.sparklineEvent,!0)),null!=this.model.sparklineMouseMove&&(e.addEventListener("mousemove",this.sparklineEvent,!0),e.addEventListener("touchmove",this.sparklineEvent,!0)),null!=this.model.sparklineMouseLeave&&(this.sparklineLeave=this.sparklineLeave.bind(this),e.addEventListener("mouseout",this.sparklineLeave,!0),"firefox"==t&&e.addEventListener("mouseup",this.sparklineLeave,!0),e.addEventListener("touchend",this.sparklineLeave,!0))},a.prototype.sparklineLeave=function(){null!=this.model.sparklineMouseLeave&&this._trigger("sparklineMouseLeave")},a.prototype.sparklineEvent=function(e){null!=this.model.sparklineMouseMove&&this._trigger("sparklineMouseMove");var i,s,a,r,n,o,l,d=this.model,h=e.clientX||e.touches[0].clientX,c=e.clientY||e.touches[0].clientY,u=d.type,p=this.visiblePoints,m=document.getElementById(this.container.id),g=(m.parentNode,m.getClientRects()[0]),f=g.top,_=g.left;if(l=null!=d.pointRegionMouseClick?"pointRegionMouseClick":null!=d.pointRegionMouseMove?"pointRegionMouseMove":null,u==t.Line||u==t.Area){n=2*(d.markerSettings.width+d.markerSettings.border.width),o=n;for(var v=0,b=p.length;v<b;v++)i=_+p[v].location.X-n/2,s=f+p[v].location.Y-o/2,a=i+n,r=s+o,h>=i&&h<=a&&c>=s&&c<=r&&null!=l&&this._trigger(l,{data:{pointIndex:v,seriesType:u,locationX:p[v].location.X,locationY:p[v].location.Y}})}else if(u==t.Column||u==t.WinLoss){n=p[0].location.width;for(var v=0,b=p.length;v<b;v++)o=p[v].location.height,i=_+p[v].location.X-n/2,s=f+p[v].location.Y,a=i+n,r=s+o,h>=i&&h<=a&&c>=s&&c<=r&&null!=l&&this._trigger(l,{data:{pointIndex:v,seriesType:u,locationX:p[v].location.X,locationY:p[v].location.Y}})}},a.prototype.findBrowser=function(){return-1!=navigator.userAgent.indexOf("Firefox")?"firefox":-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?"IE":null},a.prototype.resize=function(e){var t=document.getElementById(this.rootId);null!=t||void 0!=t?(window.removeEventListener("resize",this.resize),this.isResized=!0,this._destroy(),this.createSvg(),this.renderSparkline(),this.isResized=!1):window.removeEventListener("resize",this.resize)},a.prototype.supportsSvg=function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg")},a.prototype._init=function(e){this.supportsSvg()&&(this.rootId=null!=this.rootId?this.rootId:this._id,this.parentElement=null!=this.parentElement?this.parentElement:document.getElementById(this.rootId),null!=this.model.load&&this._trigger("load"),this.setTheme(this.model),this.height=parseInt(this.model.size.height),this.width=parseInt(this.model.size.width),this.createSvg(),this.renderSparkline(),null!=this.model.loaded&&this._trigger("loaded"))},a.prototype.redraw=function(){this.emptyContainer(),this.renderSparkline()},a.prototype.touchCheck=function(e){this.touchEnd=!0,"pie"!=this.model.type.toString().toLocaleLowerCase()?this.sparkMouseLeave(e):this.pieTooltipHide(e)},a.prototype.emptyContainer=function(){if(this.model.enableCanvasRendering)this.ctx.clearRect(0,0,this.height,this.width);else for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild)},a.prototype._destroy=function(){var e=document.getElementById(this.container.id);null!=e?(this.unBindEvents(),this.unbindPieEvents(),window.removeEventListener("resize",this.resize),e.parentNode.removeChild(e)):window.removeEventListener("resize",this.resize)},a.prototype.renderSparkline=function(){this.setStyles({background:this.model.background},this.container),this.calculatePoints(),this.seriesRender(),this.resize=this.resize.bind(this),this.model.isResponsive?window.addEventListener("resize",this.resize):window.removeEventListener("resize",this.resize),this.model.type!=t.WinLoss&&this.model.type!=t.Pie&&this.model.tooltip.visible?this.bindEvents(this.parentElement):this.unBindEvents(),this.model.type==t.Pie&&this.model.tooltip.visible?this.bindPieEvents(this.parentElement):this.unbindPieEvents(),this.bindRegionEvents(this.parentElement),this.unBindClickEvents(this.parentElement),this.bindClickEvents(this.parentElement)},a.prototype.animateSparkline=function(){function e(){n<=_?c.setAttribute("width",n.toString()):(clearInterval(y),p._trigger("animationComplete")),n+=l}function i(){o=v-n,n>=0?(c.setAttribute("y",n.toString()),c.setAttribute("height",o)):(clearInterval(C),p._trigger("animationComplete")),n-=l}function s(){n<=v?c.setAttribute("height",n.toString()):(clearInterval(w),p._trigger("animationComplete")),n+=l}function a(){o=2*(f-n),n>=-l?(c.setAttribute("y",n<0?0:n.toString()),c.setAttribute("height",o)):(clearInterval(S),p._trigger("animationComplete")),n-=l}function r(){n<=O.length-1?(L=90,T=O[n].location.Degree,A+=T+(0==n?L:0),R=(L-90)*Math.PI/180,k=(A-90)*Math.PI/180,n==O.length-1&&(k-=1e-4),o={sX:D.X+I*Math.cos(R),sY:D.Y+I*Math.sin(R),eX:D.X+I*Math.cos(k),eY:D.Y+I*Math.sin(k)},j="M "+D.X+" "+D.Y+" L "+o.eX+" "+o.eY+" A "+I+" "+I+" 0 1,0 "+o.sX+" "+o.sY+" Z",c.setAttribute("d",j)):(clearInterval(E),p._trigger("animationComplete")),n+=1}var n,o,l,d,h,c,u=this.model,p=this,m=u.type,g=u.padding,f=this.axisHeight,_=parseInt(u.size.width),v=parseInt(u.size.height),b=document.createElementNS(this.svgLink,"defs"),x=document.createElementNS(this.svgLink,"clipPath");if(c=m==t.Pie?document.createElementNS(this.svgLink,"path"):document.createElementNS(this.svgLink,"rect"),m==t.Line||m==t.Area){d={id:"clipRectSparkline",x:0,y:0,width:0,height:v},l=_/10;var y=setInterval(e,120);n=l}else if(m==t.Column||m==t.WinLoss)if(f==g){d={id:"clipRectSparkline",x:0,y:0,width:_,height:0},l=v/10,n=l;var w=setInterval(s,120)}else if(f==v-g){d={id:"clipRectSparkline",x:0,y:v,width:_,height:0},l=v/10,n=v;var C=setInterval(i,120)}else{d={id:"clipRectSparkline",x:0,y:f,width:_,height:0},l=v/10,n=f;var S=setInterval(a,120)}else{var T,R,k,O=this.visiblePoints,D=O.centerPos,I=O.radius,j="",L=90,A=0;n=0,d={id:"clipRectSparkline",d:j};var E=setInterval(r,120)}h={id:this.container.id+"_sparklineRect"},this.setAttributes(d,c),this.setAttributes(h,x),x.appendChild(c),b.appendChild(x),this.container.appendChild(b)},a.prototype.setTheme=function(e){var t=e.theme,s=this.defaults;t==i.flatdark?(e.background=e.background==s.background?"#111111":e.background,e.fill=e.fill==s.fill?"#B5B5B5":e.fill,e.stroke=e.stroke==s.stroke?"#F6D321":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==s.axisLineSettings.color?"#AAAAAA":e.axisLineSettings.color):t==i.gradientlight?(e.background=e.background==s.background?"transparent":e.background,e.fill=e.fill==s.fill?"#F34649":e.fill,e.stroke=e.stroke==s.stroke?"#597B15":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==s.axisLineSettings.color?"#8E8E8E":e.axisLineSettings.color):t==i.gradientdark?(e.background=e.background==s.background?"#111111":e.background,e.fill=e.fill==s.fill?"#005378":e.fill,e.stroke=e.stroke==s.stroke?"#6A9319":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==s.axisLineSettings.color?"#AAAAAA":e.axisLineSettings.color):t==i.azuredark?(e.background=e.background==s.background?"#111111":e.background,e.fill=e.fill==s.fill?"#007fff":e.fill,e.stroke=e.stroke==s.stroke?"#f0ffff":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==s.axisLineSettings.color?"#336699":e.axisLineSettings.color):t==i.azurelight?(e.background=e.background==s.background?"transparent":e.background,e.fill=e.fill==s.fill?"#336699":e.fill,e.stroke=e.stroke==s.stroke?"#007fff":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==s.axisLineSettings.color?"#336699":e.axisLineSettings.color):t==i.limedark?(e.background=e.background==s.background?"#111111":e.background,e.fill=e.fill==s.fill?"#238f23":e.fill,e.stroke=e.stroke==s.stroke?"#32CD32":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==s.axisLineSettings.color?"#43da21":e.axisLineSettings.color):t==i.limelight?(e.background=e.background==s.background?"transparent":e.background,e.fill=e.fill==s.fill?"#238f23":e.fill,e.stroke=e.stroke==s.stroke?"#32CD32":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==s.axisLineSettings.color?"#43da21":e.axisLineSettings.color):t==i.saffrondark?(e.background=e.background==s.background?"#111111":e.background,e.fill=e.fill==s.fill?"#ffaa33":e.fill,e.stroke=e.stroke==s.stroke?"#ffdba9":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==s.axisLineSettings.color?"#ffc26e":e.axisLineSettings.color):t==i.saffronlight?(e.background=e.background==s.background?"transparent":e.background,e.fill=e.fill==s.fill?"#ffaa33":e.fill,e.stroke=e.stroke==s.stroke?"#ffdba9":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==s.axisLineSettings.color?"#ffc26e":e.axisLineSettings.color):null!=t&&t!=i.flatlight||(e.background=e.background==s.background?"transparent":e.background,e.fill=e.fill==s.fill?"#33ccff":e.fill,e.stroke=e.stroke==s.stroke?"#33ccff":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==s.axisLineSettings.color?"#FF0000":e.axisLineSettings.color)},a.prototype.createSvg=function(){var e,t=this.model,i=this.parentElement.clientWidth>0?this.parentElement:this.parentElement.parentElement,s=parseInt(i.style.height)>i.clientHeight?parseInt(i.style.height):i.clientHeight,a=parseInt(i.style.width)>i.clientWidth?parseInt(i.style.width):i.clientWidth,r=""==t.size.width?a:parseInt(t.size.width),n=""==t.size.height?s:parseInt(t.size.height);n=n>0?n:s>0?s:30,r=this.model.isResponsive&&this.isResized&&a>0?a:r,r=r<=0?50:r,t.size.height=n.toString(),t.size.width=r.toString(),this.height=n,this.width=r,e={id:this.rootId+"_sparkline_svg",width:r,height:n},t.enableCanvasRendering?(this.container=document.createElement("canvas"),this.ctx=this.container.getContext("2d")):this.container=document.createElementNS(this.svgLink,"svg"),this.setAttributes(e,this.container),this.parentElement.appendChild(this.container)},a.prototype.setStyles=function(e,t){for(var i,s=Object.keys(e),a=s.map(function(t){return e[t]}),r=0,n=s.length;r<n;r++)i=s[r],t.style[i]=a[r]},a.prototype.setAttributes=function(e,t){for(var i=Object.keys(e),s=i.map(function(t){return e[t]}),a=0,r=i.length;a<r;a++)t.setAttribute(i[a],s[a])},a.prototype.getDefaultPoints=function(e){for(var t=[],i=1;i<=e;i++)10*Math.random()>5&&t.push(-Math.round(100*Math.random())),t.push(Math.round(100*Math.random()));return t},a.prototype.calculatePoints=function(){var e,i,s,a,r,n,o,l=this.model,d=l.type,h=null!=l.dataSource?l.dataSource:this.getDefaultPoints(12),c=[],u=h.length,p=0;if(Array.isArray(h)&&"object"!=typeof h[0])if(l.type==t.Pie)for(var m=0;m<u;m++)p+=Math.abs(h[m]);else s=Math.max.apply(null,h),a=Math.min.apply(null,h),r=0,n=u-1;else if(l.type==t.Pie)for(var m=0;m<u;m++)p+=Math.abs(h[m][l.yName]);else{if(h[0][l.xName])o=h,o=o.sort(function(e,t){return e[l.yName]-t[l.yName]}),s=o[o.length-1][l.yName],a=o[0][l.yName];else{var e=h.map(function(e){return e[l.yName]});s=Math.max.apply(null,e),a=Math.min.apply(null,e)}h[0][l.xName]?(o=o.sort(function(e,t){return e[l.xName]-t[l.xName]}),n=o[o.length-1][l.xName],r=o[0][l.xName]):(r=0,n=u-1)}if(l.type!=t.Pie){this.maxLength=u;var g,f=Number(l.padding),_=parseInt(l.size.height)-2*f,v=parseInt(l.size.width)-2*f,b=n-r,x=s-a,b=0==b?1:b;x=0==x?1:x,this.min=a,this.unitX=b,this.minX=r,this.unitY=x,this.max=s,this.maxX=n;var y,w=0,C=_-_/x*-a,C=a<0&&s<=0?0:a<0&&s>0?C:_;this.axisHeight=C+f,d!=t.WinLoss&&l.axisLineSettings.visible&&this.drawAxis()}else var S,g;for(var m=0;m<u;m++){if(h[m][l.xName]||h[m][l.yName]||0==h[m][l.yName]?h[m][l.xName]?(e=h[m][l.xName],i=h[m][l.yName]):(e=m,i=h[m][l.yName]):(e=m,i=h[m]),d==t.Line||d==t.Area)y=1!=u?_-Math.round(_*((i-a)/x)):0,g={X:1!=u?Math.round(v*((e-r)/600)):v/2,Y:y,markerPos:y};else if(d==t.Column||d==t.WinLoss){var T=v/u;if(T-=1,w=m*(T+1)+.5,d==t.WinLoss){y=i>0?_/4:i<0?.5*_:.5*_-_/40,g={X:w,Y:y,height:0!=i?_/4:_/20,width:T}}else{var R=_/x*(i-a),k=i==a&&i>0?1!=u&&1!=x?_/x*(a/2):_/x:i==s&&i<0&&1!=u&&1!=x?_/x*(-s/2):R;y=Math.abs(_-k),g={X:w,Y:y>C?C:y,height:Math.abs(y-C),width:T,markerPos:y>C?C+Math.abs(y-C):y}}}else d==t.Pie&&(S=Math.abs(i)/p*100,g={Percent:S,Degree:Math.abs(i)/p*360});d!=t.Pie&&(g.X+=f,g.Y+=f),d!=t.WinLoss&&(g.markerPos+=f),g.Xval=e,g.Yval=i,c.push({location:g})}this.visiblePoints=c.splice(2)},a.prototype.seriesRender=function(){var e,i=this.model,s=this.visiblePoints,a=s.length,r=i.type;e={data:{minX:this.minX,minY:this.min,maxX:this.maxX,maxY:this.max,xName:i.xName,yName:i.yName,pointsCount:a,seriesType:r,visiblePoints:this.visiblePoints}},null!=this.model.seriesRendering&&this._trigger("seriesRendering",e),r==t.Line?this.drawLineSeries(s):r==t.Area?this.drawAreaSeries(s):r==t.Column?this.drawColumnSeries(s):r==t.WinLoss?this.drawWinlossSeries(s):r==t.Pie&&this.drawPieSeries(),i.markerSettings.visible&&r!=t.WinLoss&&r!=t.Pie&&this.drawMarker(s),null!=i.rangeBandSettings.startRange&&null!=i.rangeBandSettings.endRange&&r!=t.WinLoss&&r!=t.Pie&&this.drawRangeBand()},a.prototype.drawPieSeries=function(){var e=this.model,t=this.visiblePoints;e.padding=e.padding==this.defaults.padding?2:e.padding;var i,s,a,r,n,o,l=(t.length,parseInt(e.size.height)-2*e.padding),d=parseInt(e.size.width)-2*e.padding,h=l<=d?l/2:d/2,c={X:d/2,Y:l/2},u=e.palette,p=0,m=e.border.color,g=e.opacity,f=e.border.width;t.centerPos=c,t.radius=h;for(var _,v,b=0,x=90;b<t.length;b++)x+=p,p=t[b].location.Degree,_=x+p,i=(x-90)*Math.PI/180,s=(_-90)*Math.PI/180,t[b].stAng=i,t[b].endAng=s,v=p<180?"0":"1",a=t[b].coordinates={sX:c.X+h*Math.cos(i),sY:c.Y+h*Math.sin(i),eX:c.X+h*Math.cos(s),eY:c.Y+h*Math.sin(s)},r="M "+c.X+" "+c.Y+" L "+a.eX+" "+a.eY+" A "+h+" "+h+" 0 "+v+",0 "+a.sX+" "+a.sY+" Z",n={id:this.container.id+"_pieBase"+b,fill:u[b%u.length],stroke:m,opacity:g,"stroke-width":f,d:r,start:s,end:i,x:c.X,y:c.Y,counterClockWise:v,radius:h},e.enableCanvasRendering?this.canvasDrawPath(n):(o=this.createGroup({id:"sparkpieSeries"}),this.setStyles({"clip-path":"url(#"+this.container.id+"_sparklineRect)"},o),this.container.appendChild(o),this.drawPath(n,o))},a.prototype.drawRangeBand=function(){var e,t=this.model,i=parseInt(t.size.height)-2*t.padding,s=parseInt(t.size.width)-2*t.padding,a=t.rangeBandSettings.startRange,r=t.rangeBandSettings.endRange,n=Number(i-i/this.unitY*(a-this.min))+t.padding,o=Number(i-i/this.unitY*(r-this.min))+t.padding;o=o>Number(i+t.padding)?Number(i+t.padding):o<0+t.padding?0+t.padding:o,n=n>Number(i+t.padding)?Number(i+t.padding):n<0+t.padding?0+t.padding:n;var l="M "+t.padding+" "+n+" L "+(s+Number(t.padding))+" "+n+" L "+(s+Number(t.padding))+" "+o+" L "+t.padding+" "+o+" Z";e={id:this.container.id+"_rangeBand",fill:t.rangeBandSettings.color,opacity:t.rangeBandSettings.opacity,stroke:"transparent","stroke-width":t.border.width,d:l},t.enableCanvasRendering?this.canvasDrawPath(e):this.drawPath(e)},a.prototype.drawAxis=function(){var e=this.model,i=this.axisHeight,s=e.axisLineSettings.color,a=e.type;if(a!=t.WinLoss&&a!=t.Pie){e.axisLineSettings.visible||(s="transparent");var r={id:this.container.id+"_Sparkline_XAxis",x1:0+e.padding,y1:i,x2:parseInt(e.size.width)-e.padding,y2:i,stroke:s,"stroke-dasharray":e.axisLineSettings.dashArray,"stroke-width":e.axisLineSettings.width};e.enableCanvasRendering?this.canvasDrawLine(r):this.drawLine(r)}},a.prototype.drawColumnSeries=function(t){
var i,s,a,r,n,o=this.model,l=[],d=t.length,h=e.compareExtend({},l,t),c=o.border.width,u=o.opacity,p=o.fill,m=o.border.color,g=o.highPointColor,f=o.lowPointColor,_=o.startPointColor,v=o.endPointColor,b=o.negativePointColor;if(g||f){var x=h.map(function(e){return e.location.markerPos});r=Math.min.apply(null,x),a=Math.max.apply(null,x)}0==o.enableCanvasRendering&&(n=this.createGroup({id:this.container.id+"sparkcolumnSeries"}),this.setStyles({"clip-path":"url(#"+this.container.id+"_sparklineRect)"},n),this.container.appendChild(n));for(var y=0;y<d;y++)s=t[y].location,i={id:this.container.id+"_column_series_"+y,x:s.X,y:s.Y,height:s.height,width:s.width,fill:p,stroke:m,opacity:u,"stroke-width":c},s.markerPos==r&&g?(i.fill=g,this.highPointIndex=y):s.markerPos==a&&f?(i.fill=f,this.lowPointIndex=y):0==y&&_?(i.fill=_,this.startPointIndex=y):y==d-1&&v?(i.fill=v,this.endPointIndex=y):s.markerPos>=this.axisHeight&&b&&(i.fill=b,this.negativePointIndexes.push(y)),o.enableCanvasRendering?this.canvasDrawRectangle(i):this.drawRect(i,n),s.X+=s.width/2},a.prototype.drawWinlossSeries=function(e){var t,i,s,a=this.model,r=a.border.width,n=a.padding,o=a.border.color,l=a.opacity,d=e.length,h=parseInt(a.size.height)-2*n;0==a.enableCanvasRendering&&(s=this.createGroup({id:this.container.id+"sparkwinlossSeries"}),this.setStyles({"clip-path":"url(#"+this.container.id+"_sparklineRect)"},s),this.container.appendChild(s));for(var c=0;c<d;c++)i=e[c].location,t={id:this.container.id+"_winloss_series_"+c,x:i.X,y:i.Y,height:i.height,width:i.width,fill:i.Y<h/2+n?i.Y>h/4+n?"#EE82EE":a.fill:a.negativePointColor?a.negativePointColor:"#FF0000",stroke:o,opacity:l,"stroke-width":r},a.enableCanvasRendering?this.canvasDrawRectangle(t):this.drawRect(t,s)},a.prototype.drawAreaSeries=function(e){for(var t,i,s="",a=this.axisHeight,r=this.model,n=0,o=e.length;n<o;n++)0==n&&(s="M "+e[0].location.X+" "+a+" "),s+="L "+e[n].location.X+" "+e[n].location.Y+" ",n==o-1&&(s+="L "+e[n].location.X+" "+a+" Z");t={id:this.container.id+"_area_series_fill",fill:r.fill,stroke:r.stroke?r.stroke:r.fill,"fill-opacity":r.opacity,"stroke-width":r.width,d:s},r.enableCanvasRendering?this.canvasDrawPath(t):(i=this.createGroup({id:"sparkAreaSeries"}),this.container.appendChild(i),this.drawPath(t,i),this.setStyles({"clip-path":"url(#"+this.container.id+"_sparklineRect)"},i))},a.prototype.drawLineSeries=function(e){for(var t,i="",s=this.model,a=0,r=e.length;a<r;a++)0==a&&(i="M "+e[0].location.X+" "+e[a].location.Y+" "),i+="L "+e[a].location.X+" "+e[a].location.Y+" ";var n={id:this.container.id+"_Line_series",fill:"transparent",stroke:s.stroke?s.stroke:s.fill,opacity:s.opacity,"stroke-width":s.width,d:i};s.enableCanvasRendering?this.canvasDrawPath(n):(t=this.createGroup({id:"sparklineSeries"}),this.container.appendChild(t),this.drawPath(n,t),this.setStyles({"clip-path":"url(#"+this.container.id+"_sparklineRect)"},t))},a.prototype.drawMarker=function(i){var s,a,r,n,o,l=i.length,d=this.model.markerSettings,h=[],c=this.model,u=e.compareExtend({},h,i),p=d.fill?d.fill:c.fill,m=d.border.color,g=d.width,f=d.opacity,_=d.border.width,v=c.highPointColor,b=c.lowPointColor,x=c.startPointColor,y=c.endPointColor,w=c.negativePointColor;if(0==c.enableCanvasRendering&&(o=this.createGroup({id:this.container.id+"sparkmarkers"}),this.setStyles({"clip-path":"url(#"+this.container.id+"_sparklineRect)"},o),this.container.appendChild(o)),0!=d.visible&&c.type!=t.Pie&&c.type!=t.WinLoss||(g=0,_=0),v||b){var C=u.map(function(e){return e.location.markerPos});n=Math.min.apply(null,C),r=Math.max.apply(null,C)}for(var S=0;S<l;S++)a=i[S].location,void 0!=a.width?a.width/2:0,s={id:this.container.id+"_marker_"+S,cx:a.X,cy:a.markerPos,r:g,fill:p,stroke:m,opacity:f,"stroke-width":_},a.markerPos==n&&v?(s.fill=v,this.highPointIndex=S):a.markerPos==r&&b?(s.fill=b,this.lowPointIndex=S):0==S&&x?(s.fill=x,this.startPointIndex=S):S==l-1&&y?(s.fill=y,this.endPointIndex=S):a.markerPos>this.axisHeight&&w&&(s.fill=w,this.negativePointIndexes.push(S)),this.model.enableCanvasRendering?this.canvasDrawCircle(s):this.drawCircle(s,o)},a.prototype.drawLine=function(e){var t=document.getElementById(e.id);t||(t=document.createElementNS(this.svgLink,"line")),this.setAttributes(e,t),this.container.appendChild(t)},a.prototype.drawCircle=function(e,t){t=t||this.container;var i=document.getElementById(e.id);i||(i=document.createElementNS(this.svgLink,"circle")),this.setAttributes(e,i),t.appendChild(i)},a.prototype.drawPolyLine=function(e){var t=document.getElementById(e.id);t||(t=document.createElementNS(this.svgLink,"polyline")),this.setAttributes(e,t),this.container.appendChild(t)},a.prototype.drawPath=function(e,t){t=t||this.container;var i=document.getElementById(e.id);i||(i=document.createElementNS(this.svgLink,"path")),this.setAttributes(e,i),t.appendChild(i)},a.prototype.drawRect=function(e,t){t=t||this.container;var i=document.getElementById(e.id);i||(i=document.createElementNS(this.svgLink,"rect")),this.setAttributes(e,i),t.appendChild(i)},a.prototype.createGroup=function(e){var t=document.createElementNS(this.svgLink,"g");return this.setAttributes(e,t),t},a.prototype.createText=function(e,t){var i=document.createElementNS(this.svgLink,"text");return this.setAttributes(e,i),t&&(i.textContent=t),i},a.prototype.canvasDrawLine=function(e,t){var i=t||this.ctx;i.save(),i.beginPath(),i.lineWidth=e["stroke-width"],i.strokeStyle=e.stroke,i.moveTo(e.x1,e.y1),i.lineTo(e.x2,e.y2),i.stroke(),i.restore(),this.dataURL=this.container.toDataURL()},a.prototype.canvasDrawRectangle=function(e,t){var i=t||this.ctx,s=t||this.ctx;i.save(),i.beginPath(),i.globalAlpha=e.opacity,i.lineWidth=e["stroke-width"];var a=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(",");a&&this.ctx.setLineDash(a),i.strokeStyle=e.stroke,i.rect(e.x,e.y,e.width,e.height),"none"==e.fill&&(e.fill="transparent"),i.fillStyle=e.fill,i.fillRect(e.x,e.y,e.width,e.height),i.stroke(),i.restore(),i=s,this.dataURL=this.container.toDataURL()},a.prototype.canvasDrawPath=function(e,t){var i=e.d,s=i.split(" "),a=e["stroke-width"],r=t||this.ctx,n=t||this.ctx;r.save(),r.beginPath(),r.globalAlpha=e.opacity?e.opacity:e["fill-opacity"];var o=!0;r.lineWidth=a;var l=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(",");l&&r.setLineDash(l),r.strokeStyle=e.stroke;for(var d=0;d<s.length;d+=3){var h=parseFloat(s[d+1]),c=parseFloat(s[d+2]);switch(s[d]){case"M":e.innerR||e.cx||r.moveTo(h,c);break;case"L":e.innerR||r.lineTo(h,c);break;case"C":r.bezierCurveTo(h,c,parseFloat(s[d+3]),parseFloat(s[d+4]),parseFloat(s[d+5]),parseFloat(s[d+6])),d+=4;break;case"A":e.innerR?o&&(r.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),r.arc(e.x,e.y,e.innerR,e.end,e.start,!e.counterClockWise),o=!1):e.cx?r.arc(e.cx,e.cy,e.radius,0,2*Math.PI,e.counterClockWise):(r.moveTo(e.x,e.y),r.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),r.lineTo(e.x,e.y)),d+=5;break;case"Z":r.closePath()}}"none"!=e.fill&&void 0!=e.fill&&(r.fillStyle=e.fill,r.fill()),a>0&&r.stroke(),r.restore(),r=n,this.dataURL=this.container.toDataURL()},a.prototype.canvasDrawCircle=function(e,t){var i,s=t||this.ctx,a=t||this.ctx;s.save(),s.beginPath(),s.arc(e.cx,e.cy,e.r,0,2*Math.PI),s.fillStyle=e.fill,s.globalAlpha=e.opacity,s.fill(),s.lineWidth=e["stroke-width"],i=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(","),i&&s.setLineDash(i),s.strokeStyle=e.stroke,s.stroke(),s.restore(),s=a,this.dataURL=this.container.toDataURL()},a.prototype.canvasDrawPolyline=function(e,t){var i=t||this.ctx;i.save(),i.beginPath();for(var s=e.points.split(" "),a=0;a<s.length-1;a++){var r=s[a].split(","),n=r[0],o=r[1];0==a?i.moveTo(n,o):i.lineTo(n,o)}i.lineWidth=e["stroke-width"],i.strokeStyle=e.stroke,i.stroke(),i.restore(),this.dataURL=this.container.toDataURL()},a.prototype.canvasDrawText=function(e,t,i){var s=e.font,a=e["text-anchor"],r=void 0!==e.opacity?e.opacity:1;"middle"==a&&(a="center");var n=i||this.ctx;n.save(),n.fillStyle=e.fill,n.font=s,n.textAlign=a,n.globalAlpha=r,e.baseline&&(n.textBaseline=e.baseline);var o=0;90==e.labelRotation&&-1!=e.id.indexOf("XLabel")&&(o=n.measureText(t).width),n.translate(e.x+o/2,e.y),n.rotate(e.labelRotation*Math.PI/180),n.fillText(t,0,0),n.restore(),this.dataURL=this.container.toDataURL()},a.prototype.parseTemplate=function(e,t){var i;i=e.innerHTML;var s,a,r=Object.values(t);s=r[0];for(var n=0,o=Object.entries(s);n<o.length;n++){var l=o[n],d=l[0],h=l[1];a="#point."+d+"#",-1!=i.search(a)&&(i=i.replace(a,h))}return i},a.prototype.measureText=function(e,t){var i,s=document.getElementById("measureTex");s&&0!=s.clientHeight?i=s:(i=document.createElement("text"),i.setAttribute("id","measureTex"),document.body.appendChild(i));var a=null,r=null,n=null,o=null;if("string"==typeof e&&(e.indexOf("<")>-1||e.indexOf(">")>-1)){for(var l=e.split(" "),d=0;d<l.length;d++)-1==l[d].indexOf("<br/>")&&(l[d]=l[d].replace(/[<>]/g,"&"));e=l.join(" ")}if(i.innerHTML=e,void 0!=t&&void 0==t.size){var h=t;h=h.split(" "),a=h[0],r=h[1],n=h[2],o=h[3]}return null!=t&&(i.style.fontSize=t.size>0?t.size+"px":t.size?t.size:r,i.style.fontStyle&&(i.style.fontStyle=t.fontStyle?t.fontStyle:a),i.style.fontFamily=t.fontFamily?t.fontFamily:n,-1==window.navigator.userAgent.indexOf("MSIE 8.0")&&(i.style.fontWeight=t.fontWeight?t.fontWeight:o)),i.style.backgroundColor="white",i.style.position="absolute",i.style.top="-100px",i.style.left="0px",i.style.visibility="hidden",i.style.whiteSpace="nowrap",{width:i.offsetWidth,height:i.offsetHeight}},a}(ej.WidgetBase);e.Sparkline=a,ej.widget("ejSparkline","ej.Sparkline",new a)}(jQuery),e.deepExtend=function(t){t=t||{};for(var i=1;i<arguments.length;i++){var s=arguments[i];if(s)for(var a in s)s.hasOwnProperty(a)&&("object"==typeof s[a]?t[a]=e.deepExtend(t[a],s[a]):t[a]=s[a])}return t},e.compareExtend=function(t,i,s){if("object"==typeof s&&null!==s)for(var a,r=Object.keys(s),n=r.length,o=0;o<n;o++)a=r[o],i.hasOwnProperty(a)&&null!=i[a]?(Array.isArray(i[a])||"object"==typeof i[a]&&null!==i[a])&&e.compareExtend({},i[a],s[a]):i[a]=s[a];return i}}(ejSparkline||(ejSparkline={})),function(e,t,i){t.widget("ejSplitter","ej.Splitter",{element:null,model:null,validTags:["div","span"],_rootCSS:"e-splitter",_setFirst:!1,angular:{terminal:!1},defaults:{cssClass:"",orientation:"horizontal",enableAnimation:!0,properties:[],height:null,width:null,enableAutoResize:!1,isResponsive:!1,enableRTL:!1,allowKeyboardNavigation:!0,htmlAttributes:{},expanderTemplate:null,animationSpeed:300,beforeExpandCollapse:null,clickOnExpander:null,expandCollapse:null,resize:null,create:null,destroy:null},dataTypes:{cssClass:"string",orientation:"enum",properties:"data",enableAutoResize:"boolean",expanderTemplate:"string",isResponsive:"boolean",enableRTL:"boolean",allowKeyboardNavigation:"boolean",animationSpeed:"number",enableAnimation:"boolean",htmlAttributes:"data"},_init:function(){this._initialize(),this._render(),this.model.isResponsive||this.model.enableAutoResize?this._wireEvents(!0):this._wireEvents(!1)},_setModel:function(e){var t;for(t in e)switch(t){case"cssClass":this._changeSkin(e[t]);break;case"enableAutoResize":case"isResponsive":this._windowResizing(e[t]);break;case"enableRTL":this._rtl(e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"orientation":this._refreshSplitter("orientation",e[t]);break;case"properties":this._refreshSplitter("properties",e[t]);break;case"width":this.model.width=e[t],this._setHeightWidth();break;case"height":this.model.height=e[t],this._setHeightWidth()}},refresh:function(){this._setPanesSize(),this._getPanesPercent()},collapse:function(e){this._clickArrow(e,!0,!0)},expand:function(e){this._clickArrow(e,!1,!0)},_clickArrow:function(i,s,a){if(this._inMovement||i<0||i>this.panes.length||this.panes.length<=1)return!1;var r,n=s?"e-collapse":"e-expand",o=this.element.children(".e-splitbar:not(.e-shadowbar)");if(t.isNullOrUndefined(this.model.expanderTemplate)?r=i==o.length?this._clickArrow(i-1,!s,!1):e(o[i]).children("."+n):(r=e(o[i]).children(".e-splitter-"+this.model.orientation.substr(0,1)+"-template"),s?this._collapseArrowClick(this.templateargs):this._expandArrowClick(this.templateargs)),t.isNullOrUndefined(this.model.expanderTemplate)||this._templateIconPositioning(!0),!a)return r;("none"!=r.css("display")||!t.isNullOrUndefined(this.model.expanderTemplate))&&(t.isDevice()?r.tap():r.mouseup())},addItem:function(i,s,a){var r=this.panes.length;a=this._getNumber(a);var n=this.element[this.containerCss]();if(t.isNullOrUndefined(a)&&(a=r),a<0||a>r)return"";var o,l,d,s=this._getPaneProperty(s);s=this._checkMinMaxSize(s),o=t.buildTag("div.e-pane e-"+this.model.orientation.substr(0,1)+"-pane"),this.element.append(o[this.containerCss](s.paneSize)),l=s.paneSize=o[this.containerCss](),0==r&&this.panes.push(o),o.remove();var h,c,u,p,m=a,g=r>0?r:this.panes.length,f={},_=0,v=!1;for(d=l+this._bar,c=0;c<2;c++){for(h=m;h<g;h++){var b=e(this.panes[h])[this.containerCss](),x=t.isNullOrUndefined(this.model.properties[h])?s.minSize:this.model.properties[h].minSize,y=b-x;if(y>=d-_){f[h]=b-(d-_),v=!0;break}0==r&&y>=0?(f[h]=x,_+=y,v=!0):y>0&&(f[h]=x,_+=y)}if(v)break;g=m,m=0}if(!v)return"";for(var w in f)e(this.panes[w])[this.containerCss](f[w]);if(r<=0?o.append(e(this.panes[a])):a==r?(u="insertBefore",p=1,o.insertAfter(e(this.panes[a-1]))):(u="insertAfter",p=0,o.insertBefore(e(this.panes[a]))),this.model.properties.splice(a,0,s),0==r&&this.element.append(o[this.containerCss](n)),r>0){this.panes.splice(a,0,o);this._createSplitBar(a-p)[u](o)}return o.append(i),this._updateModel(),o},removeItem:function(i){var s=this.panes.length-1;if(i=this._getNumber(i),t.isNullOrUndefined(i)&&(i=s),i<0||i>s||s<0)return null;var a,r,n,o;a=e(this.panes[i]),o=a[this.containerCss]()+this._bar,a.remove(),n=this.element.children(".e-splitbar:not(.e-shadowbar)"),i==s?(r=e(this.panes[i-1]),e(n[i-1]).remove()):(r=e(this.panes[i+1]),e(n[i]).remove()),r[this.containerCss](r[this.containerCss]()+o),this._removeArrays(i),this._updateModel()},_checkMinMaxSize:function(e){return!t.isNullOrUndefined(e.minSize)&&e.paneSize<e.minSize&&(e.paneSize=e.minSize),!t.isNullOrUndefined(e.maxSize)&&e.paneSize>e.maxSize&&(e.paneSize=e.maxSize),e},_removeArrays:function(e){this.model.properties.splice(e,1),this.panes.splice(e,1),this.oldPaneSize.splice(e,1),this.oldPanePercent.splice(e,1),this._sizePercent.splice(e,1)},_getNumber:function(e){return e=parseFloat(e),isNaN(e)?null:e},_updateModel:function(){for(var t=0;t<this.panes.length;t++)this.model.properties[t].paneSize=e(this.panes[t])[this.containerCss]();this._getPanesPercent()},_getPaneProperty:function(t){var i={paneSize:10,minSize:10,maxSize:null,collapsible:!0,resizable:!0,expandable:!0};return e.extend(i,t)},_changeSkin:function(e){this.element.removeClass(this.model.cssClass).addClass(e)},_windowResizing:function(e){e?this._wireEvents(e):this._unWireEvents()},_refreshSplitter:function(e,t){this._unWireEvents(),this._refreshDestroy(),this.model[e]=t,this._init()},_destroy:function(){this.element.removeClass("e-splitter"),this._refreshDestroy(),this._unWireEvents()},_refreshDestroy:function(){this.element.removeClass("e-widget e-box e-rtl"+this.model.cssClass+" e-"+this.model.orientation),this.element.children(".e-splitbar").remove(),this.element.children(".e-pane").removeClass("e-pane e-"+this.model.orientation.substr(0,1)+"-pane").height("").width("")},_initialize:function(){this.panes=[],this.oldPaneSize=[],this.oldPanePercent=[],this._initialPropertiesValue=[],this._updateHeightWidth=!1,this.shadowBar=null,this._inMovement=!1,this.containerCss="horizontal"==this.model.orientation?"width":"height",this.displayCss="horizontal"==this.model.orientation?"left":"top",this.borderCss="horizontal"==this.model.orientation?"right":"bottom",this._bar=9},_render:function(){this.element.addClass("e-widget e-box "+this.model.cssClass+" e-"+this.model.orientation).attr("data-role","splitter");var i,s=this.element[0];for(i=0,0;i<s.children.length;i++)e(s.children[i]).addClass("e-pane"),this.panes.push(s.children[i]);this._setPanesProperty(),this._insertSplitBar(),this._setDimentions(),t.isNullOrUndefined(this.model.expanderTemplate)||this.element.find(".e-splitter-"+this.model.orientation.substr(0,1)+"-template").css("z-index",t.getMaxZindex()+1),this._setPanesSize(),this._getPanesPercent(),this._addAttr(this.model.htmlAttributes),this._checkProperties(),this.element.find(".e-pane").addClass("e-"+this.model.orientation.substr(0,1)+"-pane"),this.model.isResponsive&&(isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&this.element.css("height",this.model.height),isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&this.element.css("width",this.model.width))},_templateClick:function(t){var i=this.templateargs={cancel:!1,targetElement:e(t.target),event:t.type,model:this.model,currentTarget:e(t.currentTarget)};this._trigger("clickOnExpander",i)},_templateIconPositioning:function(e){var i=this;"webkit"==t.browserInfo().name&&e&&(i.element.find(".e-splitter-"+i.model.orientation.substr(0,1)+"-template").css("display","none"),setTimeout(function(e){i.element.find(".e-splitter-"+i.model.orientation.substr(0,1)+"-template").css("display","block")},i._isMouseMove?10:i.model.animationSpeed),i._isMouseMove=!1),e||setTimeout(function(e){i.element.find(".e-splitter-"+i.model.orientation.substr(0,1)+"-template").css("display","inline-block")},100)},_setPanesProperty:function(){for(var e=0;e<this.panes.length;e++)void 0!=this.model.properties[e]?(this.model.properties[e].paneSize=void 0==this.model.properties[e].paneSize?"0px":this.model.properties[e].paneSize,this.model.properties[e].minSize=isNaN(parseFloat(this.model.properties[e].minSize))?10:parseFloat(this.model.properties[e].minSize),this.model.properties[e].maxSize=isNaN(parseFloat(this.model.properties[e].maxSize))?null:parseFloat(this.model.properties[e].maxSize),this.model.properties[e].collapsible=0!=this.model.properties[e].collapsible,this.model.properties[e].resizable=0!=this.model.properties[e].resizable,this.model.properties[e].expandable=0!=this.model.properties[e].expandable):this.model.properties.push({paneSize:"0px",minSize:10,maxSize:null,collapsible:!0,resizable:!0,expandable:!0}),this._initialPropertiesValue[e]=this.model.properties[e].paneSize},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):i.element.attr(t,e)})},_insertSplitBar:function(){if(this.panes.length>1){var e,t;for(e=0;e<this.panes.length-1;e++)t=this._createSplitBar(e),t.insertAfter(this.panes[e])}},_createSplitBar:function(i){var s,a,r,n,o=this.model.orientation.substr(0,1),l=!1;if(n=t.buildTag("span.e-box e-splitbar e-split-divider e-"+o+"-bar").attr("aria-expanded",!0),"msie"==t.browserInfo().name&&n.addClass("e-pinch"),t.isNullOrUndefined(this.model.expanderTemplate))s=t.buildTag("span.e-icon e-collapse e-"+o+"-arrow "+("h"==o?"e-arrow-sans-left":"e-arrow-sans-up")),n.append(s),r=t.buildTag("span.e-activebar e-"+o+"-arrow "),n.append(r),a=t.buildTag("span.e-icon e-expand e-"+o+"-arrow "+("h"==o?"e-arrow-sans-right":"e-arrow-sans-down")),n.append(a),l=!0,this._on(s,t.isDevice()?"tap":"mouseup",this._collapseArrowClick),this._on(a,t.isDevice()?"tap":"mouseup",this._expandArrowClick),this.model.properties[i].collapsible||s.css("display","none"),this.model.properties[i].expandable||a.css("display","none"),this.model.properties[i+1].collapsible&&a.css("display","block");else{var d=(document.getElementsByClassName("e-split-divider")[0],document.createElement("span"));e(d).append(this.model.expanderTemplate),e(d).attr("class","e-splitter-"+this.model.orientation.substr(0,1)+"-template e-resize"),e(d).on(t.isTouchDevice()?"tap":"click",e.proxy(this._templateClick,this)),n.append(d),this._templateIconPositioning(!1)}return this.model.properties[i].resizable&&this.model.properties[i+1].resizable&&(n.addClass("e-resize").removeClass("e-icon-hide"),l=!0,this._on(n,t.eventType.mouseDown,this._mouseDownOnDivider),t.isNullOrUndefined(this.model.expanderTemplate)&&this._on(r,t.eventType.mouseDown,this._mouseDownOnDivider)),l?(n.attr({role:"separator",tabindex:"0"}),this._on(n,"focus focusout",this._focusOnDivider)):n.attr({role:"presentation"}),n},_getTemplatedString:function(e){for(var t=this.model.expanderTemplate,i=t.indexOf("${"),s=t.indexOf("}");-1!=i&&-1!=s;)var a=t.substring(i,s+1);return a},_getPanesPercent:function(){this._sizePercent=[];var t,i=this.element[this.containerCss](),s=i-(this.panes.length-1)*this._bar;for(t=0;t<this.panes.length;t++)e(this.panes[t]).hasClass("collapsed")||(this.oldPaneSize[t]=e(this.panes[t])[this.containerCss]()),this.oldPanePercent[t]=this._convertToPercent(s,this.oldPaneSize[t]),this._sizePercent.push(this._convertToPercent(s,e(this.panes[t])[this.containerCss]()))},_setDimentions:function(){var e=this._getParentObj(),t=parseInt(this.model.width),i=parseInt(this.model.height);isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&(t=this.model.isResponsive?this._convertToPixel(e.innerWidth(),t):this.model.width),isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&(i=this.model.isResponsive?this._convertToPixel(e.innerHeight(),i):this.model.height),this.model.height&&this.element.css("height",i),this.model.width&&this.element.css("width",t)},_setHeightWidth:function(){this._updateHeightWidth=!0,this._setDimentions(),this._setPanesSize(),this._getPanesPercent()},_getParentObj:function(){return this.element.parent()},_checkProperties:function(){this.model.enableRTL&&this._rtl(this.model.enableRTL),this._prevSize=this.element[this.containerCss]()},_getExactInnerWidth:function(){var i=t.browserInfo();return"msie"==i.name?8==i.version||9==i.version?e(this.element)[this.containerCss]():parseFloat(window.getComputedStyle(this.element[0])[this.containerCss]):parseFloat(window.getComputedStyle(this.element[0])[this.containerCss])-(parseFloat(this.element.css("border-"+this.displayCss+"-width"))+parseFloat(this.element.css("border-"+this.borderCss+"-width"))+parseFloat(this.element.css("padding-"+this.displayCss))+parseFloat(this.element.css("padding-"+this.borderCss)))},_rtl:function(e){e?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_setPanesSize:function(){var i,s,a=this.containerCss,r=0,n=0,o=this.element[a](),l=!1,d=this._bar=e(this.element).find(">.e-splitbar").length>0?parseFloat(e(this.element).find(">.e-splitbar").css(a)):this._bar,h=[],c=this.panes.length;if(c>1)for(s=0;s<c;s++)if(e(this.panes[s]).css(a,1==this._updateHeightWidth?this._initialPropertiesValue[s]:this.model.properties[s].paneSize),this._updateHeightWidth=!1,d=s==c-1?0:d,i=parseFloat(e(this.panes[s])[a]()),t.isNullOrUndefined(this.model.properties[s].maxSize)||(i=i>this.model.properties[s].maxSize?this.model.properties[s].maxSize:i),e(this.panes[s]).css(a,i),i<=0)r++,h.push(s),n+=d;else if(l)e(this.panes[s]).css(a,0),n+=i+d,this.model.properties[s].paneSize=0;else{if((n+=i+d)>o){var u=n-o+d,p=c-s-1;u+=p*d,e(this.panes[s]).css(a,u),l=!0,n+=u+d}this.model.properties[s].paneSize=i}else 1==c&&(e(this.panes[0]).css(a,"100%"),n=o);if(c>1&&n!=o){var m,g=e(this.panes[c-1]);if(n>o)m=n-o,g.css(a,m);else if(n<o)if(m=o-n,r>0){var f,_=parseFloat(m/r);for(f=0;f<r;f++)e(this.panes[h[f]]).css(a,_),this.model.properties[h[f]].paneSize=_}else{for(var v=c;v>0;v--)if(t.isNullOrUndefined(this.model.properties[v-1].maxSize)){g=e(this.panes[v-1]);break}g.css(a,parseFloat(g[a]()+m)),this.model.properties[c-1].paneSize=g[a]()}}c>1&&this._checkPaneSize()},_getUnit:function(e){return"px"==e?"px":"pt"==e?"pt":"%"==e.substr(1)?"%":"px"},_getNormalValue:function(e){var t,i,s,a;return"vertical"==this.model.orientation?(t=e.y-this.element.offset().top,i=t/this.element.outerHeight(),s=this.element.height()):(t=e.x-this.element.offset().left,i=t/this.element.outerWidth(),s=this.element.width()),i>1&&(i=1),i<0&&(i=0),a=i*s,this._trimValue(a)},_trimValue:function(e){var t,i,s;return t=1,i=e%t,s=e-i,2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_getSplitbarIndex:function(){return this.element.children(".e-splitbar:not(.e-shadowbar)").index(this.currentSplitBar)},_paneResize:function(){if(null==this.shadowBar)return!1;this.currentSplitBar=this.shadowBar.next();var t,i,s,a,r,n=this._getSplitbarIndex();i=this.shadowBar.prev(),s=this.currentSplitBar.next(),a=n,r=n+1,t=this.shadowBar.offset()[this.displayCss],t-=this.currentSplitBar.offset()[this.displayCss],e(i).css(this.containerCss,t+e(i)[this.containerCss]()+"px"),e(s).css(this.containerCss,e(s)[this.containerCss]()-t+"px"),this.oldPaneSize[a]=e(i)[this.containerCss](),this.oldPaneSize[r]=e(s)[this.containerCss](),this.shadowBar.remove(),this._checkPaneSize();var o={item:i,index:a,size:this.oldPaneSize[a]},l={item:s,index:r,size:this.oldPaneSize[r]};this._updateModelValue(o,l),this._trigger("resize",{prevPane:o,nextPane:l,splitbarIndex:n})},_checkPaneSize:function(){var t,i,s,a=0,r=this.panes.length;for(i=0;i<r;i++)t="width"==this.containerCss?e(this.panes[i]).outerWidth():e(this.panes[i]).outerHeight(),a+=t+this._bar;if(a-=this._bar,s=this._getExactInnerWidth(),a!=s){var n=s-a,o=e(this.panes[r-1])[this.containerCss]();if(0==o){for(i=r-1;i>=0;i--)if(e(this.panes[i]).hasClass("expanded")&&!e(this.panes[i]).hasClass("collapsed")){o=e(this.panes[i])[this.containerCss](),e(this.panes[i]).css(this.containerCss,parseFloat(o+n));break}}else e(this.panes[r-1]).css(this.containerCss,parseFloat(o+n))}},_maxminDraggableRange:function(e){var t,i,s,a,r,n,o,l,d,h,c,u,p,m;t=this.shadowBar.prev(),this.currentSplitBar=this.shadowBar.next(),i=this.currentSplitBar.next(),s=t[this.containerCss](),a=i[this.containerCss](),r="left"==this.displayCss?this.currentSplitBar[0].offsetLeft:this.currentSplitBar[0].offsetTop,n=r-s,o=a+r,m=this._getSplitbarIndex(),l=m,d=m+1,h=this.model.properties[l].maxSize,c=this.model.properties[d].maxSize,h=null!=h?parseInt(h,10):null,c=null!=c?parseInt(c,10):null,this.model.properties[l].minSize=parseInt(this.model.properties[l].minSize,10),this.model.properties[d].minSize=parseInt(this.model.properties[d].minSize,10),u=this.model.properties[l].minSize,p=this.model.properties[d].minSize,this.shadowBar.removeClass("e-end-indicaton"),e>o-p?(this.resizedPosition=o-p,this.shadowBar.addClass("e-end-indicaton")):e<n+u&&(this.resizedPosition=n+u,this.shadowBar.addClass("e-end-indicaton")),null!=h?e>n+h&&(this.resizedPosition=n+h,this.shadowBar.addClass("e-end-indicaton")):null!=c&&e<o-c&&(this.resizedPosition=o-c,this.shadowBar.addClass("e-end-indicaton"))},_collapseArrowClick:function(i){if(null==this.shadowBar){var s=e(t.isNullOrUndefined(i.target)?i.currentTarget:i.target);this._inMovement=!0,this.currentSplitBar=s.parent();var a,r,n,o,l,d,h,c={},u=this.panes.length;a=this._getSplitbarIndex(),r=this.currentSplitBar.prev(),n=this.currentSplitBar.next(),o=a,l=a+1,d=r[this.containerCss](),h=n[this.containerCss]();var p,m,g=this;if(p={item:r,index:o,size:d},m={item:n,index:l,size:h},this._raiseEvent("beforeExpandCollapse",p,m,a,"beforeCollapse"))return!1;if(n.hasClass("collapsed")){if(d<this.oldPaneSize[l])return s.addClass("e-end-indicaton"),this._inMovement=!1,e(document).on("mouseup",e.proxy(this._mouseUpOnArrow,this)),!1;if(r.removeClass("expanded"),n.removeClass("collapsed"),s.parent().addClass("e-resize").removeClass("e-icon-hide"),e(s.siblings()).not(".e-activebar").css("display","block"),this.model.properties[o].collapsible||s.css("display","none"),l!=u-1){var f=n.next();this.model.properties[l+1].collapsible||f.find(".e-expand").css("display","none"),f.find(".e-collapse").css("display","block"),f.next().hasClass("collapsed")||(f.addClass("e-resize").removeClass("e-icon-hide"),f.attr("aria-expanded",!0))}c[this.containerCss]=this.oldPaneSize[l],n.animate(c,this.model.enableAnimation?this.model.animationSpeed:0),c[this.containerCss]=d-this.oldPaneSize[l],r.animate(c,this.model.enableAnimation?this.model.animationSpeed:0,function(){g._raiseEvent("expandCollapse",p,m,a,"collapsed")})}else{if(this.oldPaneSize[o]=d,r.addClass("collapsed"),n.addClass("expanded"),this.currentSplitBar.attr("aria-expanded",!1),s.parent().removeClass("e-resize").addClass("e-icon-hide"),t.isNullOrUndefined(this.model.expanderTemplate)&&s.css("display","none"),this.model.properties[l].collapsible||e(s.siblings()).not(".e-activebar").css("display","block"),0!=o){var _=r.prev();_.find(".e-expand").css("display","none"),!this.model.properties[o-1].collapsible&&e(r.prev().prev()[0]).hasClass("expanded")&&_.find(".e-collapse").css("display","block"),_.removeClass("e-resize").addClass("e-icon-hide")}c[this.containerCss]=0,r.animate(c,this.model.enableAnimation?this.model.animationSpeed:0),c[this.containerCss]=d+h,n.animate(c,this.model.enableAnimation?this.model.animationSpeed:0,function(){g._raiseEvent("expandCollapse",p,m,a,"collapsed")})}}},_expandArrowClick:function(i){if(null==this.shadowBar){var s=e(t.isNullOrUndefined(i.target)?i.currentTarget:i.target);this._inMovement=!0,this.currentSplitBar=s.parent();var a,r,n,o,l,d,h,c={},u=this.panes.length;a=this._getSplitbarIndex(),r=this.currentSplitBar.prev(),n=this.currentSplitBar.next(),o=a,l=a+1,d=r[this.containerCss](),h=n[this.containerCss]();var p,m,g=this;if(p={item:n,index:l,size:h},m={item:r,index:o,size:d},this._raiseEvent("beforeExpandCollapse",p,m,a,"beforeExpand"))return!1;if(r.hasClass("collapsed")){if(h<this.oldPaneSize[o])return s.addClass("e-end-indicaton"),this._inMovement=!1,e(document).on("mouseup",e.proxy(this._mouseUpOnArrow,this)),!1;if(r.removeClass("collapsed"),n.removeClass("expanded"),this.currentSplitBar.attr("aria-expanded",!0),s.parent().addClass("e-resize").removeClass("e-icon-hide"),e(s.siblings()).not(".e-activebar").css("display","block"),this.model.properties[l].collapsible||s.css("display","none"),0!=o){var f=r.prev();this.model.properties[a-1].collapsible||f.find(".e-collapse").css("display","none"),f.find(".e-expand").css("display","block"),f.prev().hasClass("collapsed")||f.addClass("e-resize").removeClass("e-icon-hide")}c[this.containerCss]=this.oldPaneSize[o],r.animate(c,this.model.enableAnimation?this.model.animationSpeed:0),c[this.containerCss]=h-this.oldPaneSize[o],n.animate(c,this.model.enableAnimation?this.model.animationSpeed:0,function(){g._raiseEvent("expandCollapse",p,m,a,"expanded")})}else{if(this.oldPaneSize[l]=h,r.addClass("expanded"),n.addClass("collapsed"),s.parent().removeClass("e-resize").addClass("e-icon-hide"),t.isNullOrUndefined(this.model.expanderTemplate)&&s.css("display","none"),this.model.properties[o].collapsible||e(s.siblings()).not(".e-activebar").css("display","block"),l!=u-1){var _=n.next();_.find(".e-collapse").css("display","none"),!this.model.properties[l+1].collapsible&&e(n.next().next()[0]).hasClass("collapsed")&&_.find(".e-expand").css("display","block"),_.removeClass("e-resize").addClass("e-icon-hide"),_.attr("aria-expanded",!1)}c[this.containerCss]=d+h,r.animate(c,this.model.enableAnimation?this.model.animationSpeed:0),c[this.containerCss]=0,n.animate(c,this.model.enableAnimation?this.model.animationSpeed:0,function(){g._raiseEvent("expandCollapse",p,m,a,"expanded")})}}},_raiseEvent:function(e,t,i,s,a){return"expandCollapse"==e&&(this._inMovement=!1,this._updateModelValue(t,i)),this._trigger(e,{collapsed:t,expanded:i,splitbarIndex:s,action:a})},_updateModelValue:function(e,t){this.model.properties[e.index].paneSize=e.item[this.containerCss](),this.model.properties[t.index].paneSize=t.item[this.containerCss](),this._getPanesPercent()},_mouseUpOnArrow:function(t){this.element.find(".e-end-indicaton").removeClass("e-end-indicaton"),e(document).off("mouseup",e.proxy(this._mouseUpOnArrow,this))},_keydownOnDivider:function(t){var i=t.keyCode;if(37==i||38==i||39==i||40==i){t.preventDefault();var s=e(t.data.target);if(t.ctrlKey){if(null==this.shadowBar){this.currentSplitBar=s;var a=this._getSplitbarIndex();"vertical"==this.model.orientation?38==t.keyCode?this.collapse(a):40==t.keyCode&&this.expand(a):37==t.keyCode?this.collapse(a):39==t.keyCode&&this.expand(a)}}else if(s.hasClass("e-resize")){
var r=null!=this.shadowBar?this.shadowBar:s,n=r.offset(),o={pageX:n.left,pageY:n.top};e.extend(!0,t,o),("vertical"!=this.model.orientation||38!=t.keyCode&&40!=t.keyCode)&&("horizontal"!=this.model.orientation||37!=t.keyCode&&39!=t.keyCode)||(38==t.keyCode?t.pageY-=5:40==t.keyCode?t.pageY+=5:37==t.keyCode?t.pageX-=5:39==t.keyCode&&(t.pageX+=5),this._mouseMoveOnDivider(t))}}else 13==i?(t.preventDefault(),this._mouseUpOnDivider()):27==i&&(t.preventDefault(),null!=this.shadowBar&&this.shadowBar.remove(),this.shadowBar=null,this._mouseUpOnDivider(),this.element.children(".e-splitbar.e-hover").focusout())},_focusOnDivider:function(t){"focus"==t.type?e(t.target).hasClass("e-hover")||(e(t.target).addClass("e-hover"),this.model.allowKeyboardNavigation&&e(document).on("keydown",{target:t.target},e.proxy(this._keydownOnDivider,this))):(this.element.children(".e-splitbar.e-hover").removeClass("e-hover"),this._mouseUpOnDivider(),e(document).off("keydown",e.proxy(this._keydownOnDivider,this)))},_mouseDownOnDivider:function(i){i.preventDefault();var s;s=e(i.target).hasClass("e-activebar")?e(i.target.parentElement):!t.isNullOrUndefined(this.model.expanderTemplate)&&e(i.target).parents(".e-splitbar").length>0?e(i.target).parents(".e-splitbar"):e(i.target),s.hasClass("e-splitbar")&&s.hasClass("e-resize")?(this._overlayElement=t.buildTag("div.e-pane-overlay"),s.hasClass("e-hover")||s.focus(),this.element.find(".e-pane").not(".e-splitter").append(this._overlayElement),e(document).on(t.eventType.mouseMove,{target:e(i.target).hasClass("e-activebar")?i.target.parentElement:i.target},e.proxy(this._mouseMoveOnDivider,this)),e(document).on(t.eventType.mouseUp,e.proxy(this._mouseUpOnDivider,this)),e(document).on("mouseleave",e.proxy(this._mouseUpOnDivider,this))):(s.hasClass("e-expand")||s.hasClass("e-collapse"))&&s.parent().focus()},_mouseMoveOnDivider:function(i){var s=i.data;i="touchmove"==i.type?i.originalEvent.changedTouches[0]:i,this._isMouseMove=!0;var a={x:i.pageX,y:i.pageY};if(this.resizedPosition=this._getNormalValue(a),null==this.shadowBar){var r;r=e(s.target).hasClass("e-activebar")?e(s.target.parentElement):!t.isNullOrUndefined(this.model.expanderTemplate)&&e(i.target).parents(".e-splitbar").length>0?e(s.target).parents(".e-splitbar"):e(s.target),this.shadowBar=r.clone().addClass("e-shadowbar").removeClass("e-hover").removeClass("e-split-divider").insertBefore(r),this.shadowBar.children().remove()}this._maxminDraggableRange(this.resizedPosition),this.shadowBar.css(this.displayCss,this.resizedPosition)},_mouseUpOnDivider:function(i){this._paneResize(),t.isNullOrUndefined(this.model.expanderTemplate)||this._templateIconPositioning(!0),this.element.find(".e-pane").not(".e-splitter").find(".e-pane-overlay").remove(),e(document).off(t.eventType.mouseMove,e.proxy(this._mouseMoveOnDivider,this)),e(document).off(t.eventType.mouseUp,e.proxy(this._mouseUpOnDivider,this)),e(document).off("mouseleave",e.proxy(this._mouseUpOnDivider,this)),this.shadowBar=null},_windowResized:function(t){var i=this._getExactInnerWidth();if(this._prevSize==i)return!1;var s,a,r=this.panes.length,n=i-(r-1)*this._bar;for(this._prevSize=i,s=0;s<r;s++)a=this._convertToPixel(n,this._sizePercent[s]),e(this.panes[s]).css(this.containerCss,a+"px");for(s=0;s<this.oldPaneSize.length;s++)this.oldPaneSize[s]=this._convertToPixel(n,this.oldPanePercent[s]);0==e(this.panes[this.panes.length-1])[this.containerCss]()&&this._checkPaneSize()},_convertToPercent:function(e,t){return 100*t/e},_convertToPixel:function(e,t){return parseFloat(e*t/100)},_wireEvents:function(t){t&&e(window).on("resize",e.proxy(this._windowResized,this))},_unWireEvents:function(){e(window).off("resize",e.proxy(this._windowResized,this))}})}(jQuery,Syncfusion),window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i){"use strict";t.version="17.4.0.39",t.consts={NamespaceJoin:"-"},t.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},t.Orientation={Horizontal:"horizontal",Vertical:"vertical"},t.serverTimezoneOffset=0,t.parseDateInUTC=!1,t.persistStateVersion=null,t.locales=t.locales||[],Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return void 0!==e[t]}),Date.prototype.toISOString||function(){function e(e){var t=String(e);return 1===t.length&&(t="0"+t),t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e=e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},t.defineClass=function(e,i,s,a){if(e&&s){for(var r=e.split("."),n=window,o=0;o<r.length-1;o++)t.isNullOrUndefined(n[r[o]])&&(n[r[o]]={}),n=n[r[o]];return(a||t.isNullOrUndefined(n[r[o]]))&&(i="function"==typeof i?i:function(){},n[r[o]]=i,n[r[o]].prototype=s),n[r[o]]}},t.util={getNameSpace:function(e){var i=e.toLowerCase().split(".");return"ej"===i[0]&&(i[0]="e"),i.join(t.consts.NamespaceJoin)},getObject:function(e,i){if(i&&e){"string"!=typeof e&&(e=JSON.stringify(e));for(var s=i,a=e.split("."),r=0;r<a.length&&!t.util.isNullOrUndefined(s);r++)s=s[a[r]];return s}},createObject:function(e,i,s){var a,r,n=e.split("."),o=s||window,l=o,d=n.length;for(a=0;a<d;a++)r=n[a],a+1==d?l[r]=i:t.isNullOrUndefined(l[r])&&(l[r]={}),l=l[r];return o},isNullOrUndefined:function(e){return void 0===e||null===e},exportAll:function(i,s){var a,r,n,o,l,d,h=[],c=[],u={action:i,method:"post","data-ajax":"false"},p=t.buildTag("form","",null,u);if(0!=s.length){for(var m=0;m<s.length;m++)if(r=m,n=e("#"+s[m]),o=e("#"+s[m]).data(),a=o.ejWidgets,l=e(n).data(a[0]),c.push({id:l._id,locale:l.model.locale}),!t.isNullOrUndefined(l)){d=l._getExportModel(l.model),h.push({name:a[0],type:"hidden",value:l.stringify(d)});var g=t.buildTag("input","",null,h[r]);p.append(g)}e("body").append(p),p.submit(),setTimeout(function(){var i,s;if(c.length)for(var r=0;r<c.length;r++)t.isNullOrUndefined(c[r].locale)||(i=e("#"+c[r].id).data(),a=i.ejWidgets,s=e("#"+c[r].id).data(a[0]),s.model.locale=c[r].locale)},0),p.remove()}return!0},print:function(i,s){var a=t.buildTag("div"),r=i.clone();if(a.append(r),!s)var s=window.open("","print","height=452,width=1024,tabbar=no");s.document.write("<!DOCTYPE html>");var n=e("head").find("link").add("style");if("msie"===t.browserInfo().name){var o="";n.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),o+=i.outerHTML}),s.document.write("<html><head></head><body>"+o+a[0].innerHTML+"</body></html>")}else{var o="";s.document.write("<html><head>"),n.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),o+=i.outerHTML}),s.document.writeln(o+"</head><body>"),s.document.writeln(a[0].innerHTML+"</body></html>")}s.document.close(),s.focus(),setTimeout(function(){t.isNullOrUndefined(s.window)||(s.print(),setTimeout(function(){s.close()},1e3))},1e3)},ieClearRemover:function(t){var i=e(t).height();t.style.paddingTop=parseFloat(i/2)+"px",t.style.paddingBottom=parseFloat(i/2)+"px",t.style.height="1px",t.style.lineHeight="1px"},sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.successHandler,error:t.errorHandler,beforeSend:t.beforeSendHandler,complete:t.completeHandler})},buildTag:function(t,i,s,a){var r=/^[a-z]*[0-9a-z]+/gi.exec(t)[0],n=/#([_a-z0-9-&@\/\\,+()$~%:*?<>{}\[\]]+\S)/gi.exec(t);n=n?n[n.length-1].replace(/[&@\/\\,+()$~%.:*?<>{}\[\]]/g,""):void 0;var o=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(t);return o=o?o[o.length-1]:void 0,e(document.createElement(r)).attr(n?{id:n}:{}).addClass(o||"").css(s||{}).attr(a||{}).html(i||"")},_preventDefaultException:function(e,t){if(e)for(var i in t)if(t[i].test(e[i]))return!0;return!1},getMaxZindex:function(){var t=1;return t=Math.max.apply(null,e.map(e("body *"),function(t,i){if("absolute"==e(t).css("position")||"fixed"==e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),void 0!=t&&null!=t||(t=1),t},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(t,i){var s,a=e(t).parents().andSelf().filter(":hidden");if(a){var r={visibility:"hidden",display:"block"},n=[];a.each(function(){var e,t={};for(e in r)t[e]=this.style[e],this.style[e]=r[e];n.push(t)}),s=/(outer)/g.test(i)?e(t)[i](!0):e(t)[i](),a.each(function(e){var t,i=n[e];for(t in r)this.style[t]=i[t]})}return s},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[t.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[t.userAgent()]},startEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return t.isTouchDevice()||e.support.hasPointer?e.support.hasPointer&&!t.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"taphold":"click"},isDevice:function(){return t.getBooleanVal(e("head"),"data-ej-forceset",!1)?t.getBooleanVal(e("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var e=document.documentElement;return e&&e.clientWidth/e.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&t.isPortrait()&&t.isDevice()||window.innerWidth<=800&&!t.isDevice()||window.innerWidth<=800&&!t.isPortrait()&&t.isWindows()&&t.isDevice()||t.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!("undefined"==typeof Android)},isWindowsWebView:function(){return-1!=location.href.indexOf("x-wmapp")},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-mobile",!1)},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-tablet",!1)||!t.isMobile()&&t.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&t.isMobile())&&this.isDevice()},getClearString:function(t){return e.trim(t.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(t,i,s){var a=e(t).attr(i);return null!=a?"true"==a.toLowerCase():s},_getSkewClass:function(e,t,i){var s=e.width(),a=e.height(),r=e.offset().left,n=e.offset().left+s,o=e.offset().top,l=e.offset().top+a,d=.3*s,h=.3*a;return t<r+d&&i<o+h?"e-m-skew-topleft":t>n-d&&i<o+h?"e-m-skew-topright":t>n-d&&i>l-h?"e-m-skew-bottomright":t<r+d&&i>l-h?"e-m-skew-bottomleft":t>r+d&&i<o+h&&t<n-d?"e-m-skew-top":t<r+d?"e-m-skew-left":t>n-d?"e-m-skew-right":i>l-h?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(t){e(t).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(e){var t,i=[];if(e=Object.prototype.toString.call(e)===Object.prototype.toString()?e:{},!Object.keys){for(t in e)e.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(e)},_touchStartPoints:function(e,t){if(e){var i=e.touches?e.touches[0]:e;t._distX=0,t._distY=0,t._moved=!1,t._pointX=i.pageX,t._pointY=i.pageY}},_isTouchMoved:function(e,t){if(e){var i,s,a=e.touches?e.touches[0]:e,r=a.pageX-t._pointX,n=a.pageY-t._pointY;Date.now();return t._pointX=a.pageX,t._pointY=a.pageY,t._distX+=r,t._distY+=n,i=Math.abs(t._distX),s=Math.abs(t._distY),!(i<5&&s<5)}},listenEvents:function(e,i,s,a,r,n){for(var o=0;o<e.length;o++)t.listenTouchEvent(e[o],i[o],s[o],a,r,n)},listenTouchEvent:function(i,s,a,r,n,o){for(var l=r?"removeEventListener":"addEventListener",d=r?"off":"on",h=e(i),c=0;c<h.length;c++){var u=h[c];switch(s){case"touchstart":t._bindEvent(u,l,s,a,"mousedown","MSPointerDown","pointerdown",o);break;case"touchmove":t._bindEvent(u,l,s,a,"mousemove","MSPointerMove","pointermove",o);break;case"touchend":t._bindEvent(u,l,s,a,"mouseup","MSPointerUp","pointerup",o);break;case"touchcancel":t._bindEvent(u,l,s,a,"mousecancel","MSPointerCancel","pointercancel",o);break;case"tap":case"taphold":case"ejtouchmove":case"click":e(u)[d](s,a);break;default:"msie"==t.browserInfo().name&&t.browserInfo().version<9?n._on(e(u),s,a):u[l](s,a,!0)}}},_bindEvent:function(t,i,s,a,r,n,o,l){e.support.hasPointer?t[i](window.navigator.pointerEnabled?o:n,a,!0):t[i](s,a,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e="webkitT,t,MozT,msT,OT".split(","),i=0,s=e.length;i<s;i++)if(e[i]+"ransform"in t.styles)return e[i].substr(0,e[i].length-1);return!1},addPrefix:function(e){return""===t.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),t.userAgent()+e)},destroyWidgets:function(t){e(t).find("[data-role *= ejm]").each(function(t,i){var s=e(i),a=s.data("ejWidgets");a&&s[a]("destroy")})},getAttrVal:function(t,i,s){var a=e(t).attr(i);return null!=a?a:s},getOffset:function(t){var i={},s=t.offset()||{left:0,top:0};if(e.extend(!0,i,s),"static"!=e("body").css("position")){var a=e("body").offset();i.left-=a.left,i.top-=a.top}return i},getZindexPartial:function(i,s){if(!t.isNullOrUndefined(i)&&i.length>0){var a,r=i.parents();a=e("body").children(),!t.isNullOrUndefined(i)&&i.length>0&&a.splice(a.index(s),1),e(a).each(function(e,t){r.push(t)});var n=Math.max.apply(n,e.map(r,function(t,i){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1}));return!n||n<1e4?n=1e4:n+=1,n}},isValidAttr:function(t,i){var t=e(t)[0];if(void 0!==t[i])return!0;var s=!1;return e.each(t,function(e){if(e.toLowerCase()==i.toLowerCase())return s=!0,!1}),s}},e.extend(t,t.util),t.widgetBase={droppables:{default:[]},resizables:{default:[]},_renderEjTemplate:function(i,s,a,r,n){var o=null;if(("object"==typeof i||i.startsWith("#")||i.startsWith("."))&&(o=e(i).attr("type")),o){if(o=o.toLowerCase(),t.template[o])return t.template[o](this,i,s,a,r)}else if(!t.isNullOrUndefined(n))return t.template["text/x-"+n](this,i,s,a,r);return t.template.render(this,i,s,a,r)},destroy:function(){if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),e(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(var i=this.element.data("ejWidgets")||[],s=0;s<i.length;s++)i[s]==this.pluginName&&i.splice(s,1);for(i.length||this.element.removeData("ejWidgets");this._events;){var a=this._events.pop(),r=[];if(!a)break;for(var s=0;s<a[1].length;s++)e.isPlainObject(a[1][s])||r.push(a[1][s]);e.fn.off.apply(a[0],r)}this._events=null,this.element.removeClass(t.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(i){this._events||(this._events=[]);for(var s=[].splice.call(arguments,1,arguments.length-1),a={},r=s.length;a&&"function"!=typeof a;)a=s[--r];return s[r]=t.proxy(s[r],this),this._events.push([i,s,a,s[r]]),e.fn.on.apply(i,s),this},_off:function(t,i,s,a){var r,n=this._events;if(!n||!n.length)return this;"function"==typeof s&&(r=a,a=s,s=r);for(var o=i.match(/\S+/g)||[""],l=0;l<n.length;l++){var d=n[l];if(d[0].length&&(!a||d[2]===a)&&(d[1][0]===i||o[0])&&(!s||d[1][1]===s)&&e.inArray(t[0],d[0])>-1){e.fn.off.apply(t,a?[i,s,d[3]]:[i,s]),n.splice(l,1);break}}return this},_trigger:function(i,s){var a,r,n=null,o={};if(e.extend(o,s),i in this.model&&(n=this.model[i]),n&&("string"==typeof n&&(n=t.util.getObject(n,window)),e.isFunction(n)&&(r=t.event(i,this.model,s),a=n.call(this,r),s&&e.extend(s,r),r.cancel||!t.isNullOrUndefined(a))))return!1===a||r.cancel;var l=Boolean(s);return s=s||{},s.originalEventType=i,s.type=this.pluginName+i,r=e.Event(s.type,t.event(s.type,this.model,s)),this.element&&this.element.trigger(r),l&&e.extend(s,r),t.isOnWebForms&&0==r.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&t.raiseWebFormsServerEvents(i,s,o),r.cancel},setModel:function(t,i){if(!this._trigger("modelChange",{changes:t})){for(var a in t){if(!i){if(this.model[a]===t[a]){delete t[a];continue}if(e.isPlainObject(t[a])&&(s(this.model[a],t[a]),e.isEmptyObject(t[a]))){delete t[a];continue}}if(this.dataTypes){var r=this._isValidModelValue(a,this.dataTypes,t);if(!0!==r)throw"setModel - Invalid input for property :"+a+" - "+r}if(this.model.notifyOnEachPropertyChanges&&this.model[a]!==t[a]){var n={oldValue:this.model[a],newValue:t[a]};t[a]=this._trigger(a+"Change",n)?this.model[a]:n.newValue}}if(!e.isEmptyObject(t)){if(this._setFirst){var o=t.dataSource;o&&delete t.dataSource,e.extend(!0,this.model,t),o&&(this.model.dataSource=o instanceof Array?o.slice():o,t.dataSource=this.model.dataSource),!this._setModel||this._setModel(t)}else this._setModel&&!1===this._setModel(t)||e.extend(!0,this.model,t);"enablePersistence"in t&&this._setState(t.enablePersistence)}}},option:function(i,s,a){if(!i)return this.model;if(e.isPlainObject(i))return this.setModel(i,a);if("string"==typeof i){i=i.replace(/^model\./,"");var r=t.getObject(i,this.model);if(void 0===s&&!a)return r;if("enablePersistence"===i)return this._setState(s);if(a&&s===t.extensions.modelGUID)return this._setModel(t.createObject(i,t.getObject(i,this.model),{}));if(a||t.getObject(i,this.model)!==s)return this.setModel(t.createObject(i,s,{}),a)}},_isValidModelValue:function(e,t,i){var s,a=t[e],r=i[e];if(!a)return!0;if("string"==typeof a){if("enum"==a&&(i[e]=r?r.toString().toLowerCase():r,a="string"),"array"===a){if("[object Array]"===Object.prototype.toString.call(r))return!0}else{if("data"===a)return!0;if("parent"===a)return!0;if(typeof r===a)return!0}return"Expected type - "+a}if(r instanceof Array){for(var n=0;n<r.length;n++)if(!0!==(s=this._isValidModelValue(e,t,r[n])))return" ["+n+"] - "+s;return!0}for(var o in r)if(!0!==(s=this._isValidModelValue(o,a,r)))return o+" : "+s;return!0},_returnFn:function(e,t){-1!=t.indexOf(".")?this._returnFn(e[t.split(".")[0]],t.split(".").slice(1).join(".")):e[t]=e[t].call(e.propName)},_removeCircularRef:function(e){function t(e,s,a){if("object"==typeof e){if(Array.prototype.indexOf||(Array.prototype.indexOf=function(e){return jQuery.inArray(e,this)}),i.indexOf(e)>=0)return void delete a[s];i.push(e);for(var r in e)e.hasOwnProperty(r)&&t(e[r],r,e);i.pop()}}var i=[];return t(e,"obj",null),e},stringify:function(e,i){for(var s=this.observables,a=0;a<s.length;a++){var r=t.getObject(s[a],e);t.isNullOrUndefined(r)||"function"!=typeof r||this._returnFn(e,s[a])}return i&&(e=this._removeCircularRef(e)),JSON.stringify(e)},_setState:function(i){!0===i?(this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler)):(this.deleteState(),e(window).off("unload",this._persistHandler))},_removeProp:function(e,i){t.isNullOrUndefined(e)||(-1!=i.indexOf(".")?this._removeProp(e[i.split(".")[0]],i.split(".").slice(1).join(".")):delete e[i])},persistState:function(){var e;if(this._ignoreOnPersist){e=r({},this.model);for(var i=0;i<this._ignoreOnPersist.length;i++)this._removeProp(e,this._ignoreOnPersist[i]);e.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){e={};for(var i=0;i<this._addToPersist.length;i++)t.createObject(this._addToPersist[i],t.getObject(this._addToPersist[i],this.model),e);e.addToPersist=this._addToPersist}else e=r({},this.model);this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?(t.isNullOrUndefined(t.persistStateVersion)||null!=window.localStorage.getItem("persistKey")||window.localStorage.setItem("persistKey",t.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(e))):document.cookie&&(t.isNullOrUndefined(t.persistStateVersion)||null!=t.cookie.get("persistKey")||t.cookie.set("persistKey",t.persistStateVersion),t.cookie.set("$ej$"+this.pluginName+this._id,e))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&t.cookie.set("$ej$"+this.pluginName+this._id,void 0,new Date)},restoreState:function(i){var s=null;if(window.localStorage?s=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(s=t.cookie.get("$ej$"+this.pluginName+this._id)),s){var a=JSON.parse(s);this._restoreState&&(this._restoreState(a.customPersists),delete a.customPersists),!1===t.isNullOrUndefined(a)&&(t.isNullOrUndefined(a.ignoreOnPersist)?t.isNullOrUndefined(a.addToPersist)||(this._addToPersist=a.addToPersist,delete a.addToPersist):(this._ignoreOnPersist=a.ignoreOnPersist,delete a.ignoreOnPersist))}if(t.isNullOrUndefined(a)||t.isNullOrUndefined(this._ignoreOnPersist))this.model=e.extend(!0,this.model,a);else{for(var r=0,n=this._ignoreOnPersist.length;r<n;r++)-1!==this._ignoreOnPersist[r].indexOf(".")?t.createObject(this._ignoreOnPersist[r],t.getObject(this._ignoreOnPersist[r],this.model),a):a[this._ignoreOnPersist[r]]=this.model[this._ignoreOnPersist[r]];this.model=a}!i&&s&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(e){var t=[];if("object"==typeof e?t=e:"string"==typeof e&&t.push(e),void 0===this._addToPersist){this._ignoreOnPersist=this._ignoreOnPersist||[];for(var i=0;i<t.length;i++)this._ignoreOnPersist.push(t[i])}else for(var i=0;i<t.length;i++){var s=this._addToPersist.indexOf(t[i]);this._addToPersist.splice(s,1)}},addToPersist:function(t){var i=[];if("object"==typeof t?i=t:"string"==typeof t&&i.push(t),void 0===this._addToPersist){this._ignoreOnPersist=this._ignoreOnPersist||[];for(var s=0;s<i.length;s++){var a=this._ignoreOnPersist.indexOf(i[s]);this._ignoreOnPersist.splice(a,1)}}else for(var s=0;s<i.length;s++)-1===e.inArray(i[s],this._addToPersist)&&this._addToPersist.push(i[s])},formatting:function(i,s,a){i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),a=t.preferredCulture(a)?a:"en-US";var r,n,o,l,d=i;if(r=i.split("{0:"),l=i.split("}"),n=r[0],o=l[1],"string"==typeof s&&e.isNumeric(s)&&(s=Number(s)),-1!=i.indexOf("{0:")){var h=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),c=h.exec(i);return s=null!=c&&null!=s?null!=n&&null!=o?n+t.format(s,c[2],a)+o:t.format(s,c[2],a):null!=s?s:""}if(d.startsWith("{")&&!d.startsWith("{0:")){for(var u,p=d.split(""),s=(s||"")+"",m=s.split(""),g=/[0aA\*CN<>\?]/gm,u=0,f=0;u<p.length;u++)p[u]=g.test(p[u])?"{"+f+++"}":p[u];return String.format.apply(String,[p.join("")].concat(m)).replace("{","").replace("}","")}return null!=this.data&&null==this.data.Value?(e.each(this.data,function(e,t){d=d.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),d):this.data.Value}},t.WidgetBase=function(){};var s=function(t,i){if(t instanceof Array)for(var a=0,r=t.length;a<r;a++)n=t[a],n===i[n]&&delete i[n],e.isPlainObject(i[n])&&e.isPlainObject(n)&&s(n,i[n]);else for(var n in t)t[n]===i[n]&&delete i[n],e.isPlainObject(i[n])&&e.isPlainObject(t[n])&&s(t[n],i[n])};t.widget=function(i,s,o){if("object"!=typeof i){var d=o._rootCSS||t.getNameSpace(s);o=t.defineClass(s,function(l,h){if(this.sfType=s,this.pluginName=i,this.instance=n,t.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},e.extend(this,t.widgetBase),this.dataTypes)for(var c in h){var u=this._isValidModelValue(c,this.dataTypes,h);if(!0!==u)throw"setModel - Invalid input for property :"+c+" - "+u}var p=l.data("ejWidgets")||[];p.push(i),l.data("ejWidgets",p);for(var m=0;t.widget.observables&&this.observables&&m<this.observables.length;m++){var g=t.getObject(this.observables[m],h);g&&t.createObject(this.observables[m],t.widget.observables.register(g,this.observables[m],this,l),h)}if(this.element=l.jquery?l:e(l),this.model=r(!0,{},o.prototype.defaults,h),this.model.keyConfigs=r(this.keyConfigs),this.element.addClass(d+" e-js").data(i,this),this._id=l[0].id,this.model.enablePersistence){if(window.localStorage&&!t.isNullOrUndefined(t.persistStateVersion)&&window.localStorage.getItem("persistKey")!=t.persistStateVersion)for(var m in window.localStorage)-1!=m.indexOf("$ej$")&&(window.localStorage.removeItem(m),window.localStorage.setItem("persistKey",t.persistStateVersion));else if(document.cookie&&!t.isNullOrUndefined(t.persistStateVersion)&&t.cookie.get("persistKey")!=t.persistStateVersion){var f=document.cookie.split(/; */);for(var _ in f)-1!=_.indexOf("$ej$")&&(t.cookie.set(_.split("=")[0],void 0,new Date),t.cookie.set("persistKey",t.persistStateVersion))}this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler),this.restoreState(!0)}if(this._init(h),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){var v=!1;this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus);for(var b in this.model.keyConfigs)if("focus"!==b){v=!0;break}if(v&&this._keyPressed){var x=l,y="keydown";this.keySettings&&(x=this.keySettings.getElement?this.keySettings.getElement()||x:x,y=this.keySettings.event||y),this._on(x,y,function(e){if(this.model.keyConfigs){var t=a.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),i={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};t&&!1===this._keyPressed(t,e.target,i,e)&&e.preventDefault()}})}}this._trigger("create")},o),e.fn[i]=function(a){for(var r,n=a,c=0;c<this.length;c++){var u=e(this[c]),p=u.data(i),m=p&&u.hasClass(d),g=null;if(this.length>0&&e.isPlainObject(n)&&(a=t.copyObject({},n)),m){if(a)if(r=[].slice.call(arguments,1),this.length>0&&r[0]&&"option"===n&&e.isPlainObject(r[0])&&(r[0]=t.copyObject({},r[0])),e.isPlainObject(a))p.setModel(a);else if(0!==a.indexOf("_")&&!t.isNullOrUndefined(g=t.getObject(a,p))||0===a.indexOf("model.")){if(!g||!e.isFunction(g)){if(1==arguments.length)return g;p.option(a,arguments[1]);continue}var f=g.apply(p,r);if(void 0!==f)return f}else h(s+": function/property - "+a+" does not exist")}else!0!==o.prototype._requiresID||e(this[c]).attr("id")||u.attr("id",l("ejControl_")),a&&"object"!=typeof a?h(i+": methods/properties can be accessed only after plugin creation"):(o.prototype.defaults&&!t.isNullOrUndefined(t.setCulture)&&"locale"in o.prototype.defaults&&"ejChart"!=i&&(!a||"locale"in a?t.isNullOrUndefined(a)&&(a={},a.locale=t.setCulture().name):a.locale=t.setCulture().name),new o(u,a))}return-1!=i.indexOf("ejm")&&t.widget.registerInstance(u,i,s,o.prototype),this},t.widget.register(i,s,o.prototype),t.loadLocale(i)}else{o=s;for(var c in i){var u=i[c];u instanceof Array&&(o._rootCSS=u[1],u=u[0]),t.widget(c,u,o),i[c]instanceof Array&&(o._rootCSS="")}}},t.loadLocale=function(i){var s,a,r=t.locales;for(s=0,a=r.length;s<a;s++)e.fn["Locale_"+r[s]](i)},e.extend(t.widget,function(){var e={},i=[];return{register:function(i,s,a){t.isNullOrUndefined(e[i])||h("ej.widget : The widget named "+i+" is trying to register twice."),e[i]={name:i,className:s,proto:a},t.widget.extensions&&t.widget.extensions.registerWidget(i)},registerInstance:function(e,t,s,a){i.push({element:e,pluginName:t,className:s,proto:a})},registeredWidgets:e,registeredInstances:i}}()),t.widget.destroyAll=function(e){if(e&&e.length)for(var t=0;t<e.length;t++){var i=e.eq(t).data(),s=i.ejWidgets;if(s&&s.length)for(var a=0;a<s.length;a++)i[s[a]]&&i[s[a]].destroy&&i[s[a]].destroy()}},t.cookie={get:function(e){var t=RegExp(e+"=([^;]+)").exec(document.cookie);if(t&&t.length>1)return t[1]},set:function(e,t,i){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==i?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t}};var a={getActionFromCode:function(e,t,i,s,r){i=i||!1,s=s||!1,r=r||!1;for(var n in e)if("focus"!==n)for(var o=a.getKeyObject(e[n]),l=0;l<o.length;l++)if(t===o[l].code&&i==o[l].isCtrl&&s==o[l].isShift&&r==o[l].isAlt)return n;return null},getKeyObject:function(t){for(var i={isCtrl:!1,isShift:!1,isAlt:!1},s=e.extend(!0,{},i),r=t.split(","),n=[],o=0;o<r.length;o++){var l=null;if(-1!=r[o].indexOf("+"))for(var d=r[o].split("+"),h=0;h<d.length;h++)l=a.getResult(e.trim(d[h]),i);else l=a.getResult(e.trim(r[o]),e.extend(!0,{},s));n.push(l)}return n},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}};t.getScrollableParents=function(t){return e(t).parentsUntil("html").filter(function(){return"visible"!=e(this).css("overflow")}).add(e(window))},t.browserInfo=function(){var i={},s=[],a={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var r in a)if(a.hasOwnProperty(r)&&(s=navigator.userAgent.match(a[r]))){if(i.name="opr"==s[1].toLowerCase()?"opera":s[1].toLowerCase(),i.version=s[2],i.culture={},i.culture.name=i.culture.language=navigator.language||navigator.userLanguage,void 0!==t.globalize){for(var n=t.preferredCulture().name,o=navigator.language||navigator.userLanguage?t.preferredCulture(navigator.language||navigator.userLanguage):t.preferredCulture("en-US"),l=0;navigator.languages&&l<navigator.languages.length&&(o=t.preferredCulture(navigator.languages[l]),o.language!=navigator.languages[l]);l++);t.preferredCulture(n),e.extend(!0,i.culture,o)}navigator.userAgent.match(/Trident\/7\./)&&(i.name="msie");break}return i.isMSPointerEnabled="msie"==i.name&&i.version>9&&window.navigator.msPointerEnabled,i.pointerEnabled=window.navigator.pointerEnabled,i},t.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},t.event=function(t,i,s){return e.extend(s||{},{type:t,model:i,cancel:!1})},t.proxy=function(e,t,i){return e&&"function"==typeof e?"on"in e&&t?i?e.on(t,i):e.on(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}:null},t.hasStyle=function(e){var t=document.documentElement.style;if(e in t)return!0;var i=["ms","Moz","Webkit","O","Khtml"];e=e[0].toUpperCase()+e.slice(1);for(var s=0;s<i.length;s++)if(i[s]+e in t)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var i=0;i<t;i++)if(i in this&&this[i]===e)return i;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e};var r=t.copyObject=function(e,i){var s,a,n=2;"boolean"!=typeof e&&(n=1);var o=[].slice.call(arguments,n);1===n&&(i=e,e=void 0);for(var l=0;l<o.length;l++)for(var d in o[l])if(s=i[d],void 0!==(a=o[l][d])&&s!==a&&o[l]!==a&&i!==a)if(a instanceof Array)if(0===l&&e)if("dataSource"===d||"data"===d||"predicates"===d)i[d]=a.slice();else{i[d]=new Array
;for(var h=0;h<a.length;h++)r(!0,i[d],a)}else i[d]=a.slice();else t.isPlainObject(a)?(i[d]=s||{},e?r(e,i[d],a):r(i[d],a)):i[d]=a;return i},n=function(){return this},o=0,l=function(e){return e+o++};t.template={},t.template.render=t.template["text/x-jsrender"]=function(t,i,s,a,r){"#"!==i.slice(0,1)&&(i=["<div>",i,"</div>"].join(""));var n={prop:r,index:a};return e(i).render(s,n)},t.isPlainObject=function(e){if(!e)return!1;if(void 0!==t.DataManager&&e instanceof t.DataManager)return!1;if("object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(e){return!1}var i,s=t.support.isOwnLast;for(i in e)if(s)break;return void 0===i||e.hasOwnProperty(i)};var d=!1;t.util.valueFunction=function(e){return function(i,s){var a=t.getObject(e,this.model);if(!1===d&&(d=t.getObject("observables.getValue",t.widget)),void 0===i)return t.isNullOrUndefined(d)?"function"==typeof a?a.call(this):a:d(a,s);"function"==typeof a?(this["ob.values"][e]=i,a.call(this,i)):t.createObject(e,i,this.model)}},t.util.getVal=function(e){return"function"==typeof e?e():e},t.support={isOwnLast:function(){var e=function(){this.a=1};e.prototype.b=1;for(var t in new e)return"b"===t}(),outerHTML:function(){return void 0!==document.createElement("div").outerHTML}()};var h=t.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}};t.getRandomValue=function(e,i){if(void 0===e||void 0===i)return t.throwError("Min and Max values are required for generating a random number");var s;if("crypto"in window&&"getRandomValues"in crypto){var a=new Uint16Array(1);window.crypto.getRandomValues(a),s=a[0]%(i-e)+e}else s=Math.random()*(i-e)+e;return 0|s},t.extensions={},t.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(e){var t=$(this);$.each(e,function(e,i){i&&i.specified&&t.attr(i.name,i.value)})},$.fn.removeEleAttrs=function(e){return this.each(function(){var t=$(this),i=$(this.attributes).clone();$.each(i,function(i,s){s&&s.specified&&e.test(s.name)&&t.removeAttr(s.name)})})},$.fn.attrNotStartsWith=function(e){var t,i=[];this.each(function(){t=$(this.attributes).clone()});for(var s=0;s<t.length;s++)t[s]&&t[s].specified&&e.test(t[s].name)||i.push(t[s]);return i},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var e=$(this),t=$(this.attributes).clone();$.each(t,function(t,i){i&&i.specified&&""===i.value&&e.removeAttr(i.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:!1!==ej.userAgent(),pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,i){var s,a=e.attributes;for(s=0;s<a.length;s++)if(0===a[s].nodeName.indexOf(i[3]))return!1;return!0}});var e=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return e.apply(this,arguments)}}(),function(e,t){function i(e,t){var i,s,a=e||"",r=P,t=t.toString(),n=t.indexOf(".")>-1||e.indexOf(".")>-1,o=0,l=0,d="",h="",c=e.split(","),u="0",p=e.toLowerCase().indexOf("e"),m=a.indexOf("#");if(e.indexOf("\\")>-1&&(h=e.substr(0,e.lastIndexOf("\\")+1),e=e.substr(e.lastIndexOf("\\")+1,e.length),m=e.indexOf("#")),p>-1){var g="",a="";s=e.toLowerCase().split("e"),e.indexOf("+")>-1?e.split("+")[1]:e.split("-")[1],t=parseInt(t).toExponential(),i=t.split("e"),o=s[1].length-i[1].length;for(var f=s[1].length-1;f>0;f--)"0"!=s[1][f]?a+=s[1][f]:o>1?(a+="#",o--):a+="0";a=(e.indexOf("+")>-1?"+":"")+a.split("").reverse().join("");for(var f=0;f<i[0].length;f++)g="."!=i[0][f]?g.concat("#"):g.concat(".");g.length>s[0].length&&(g=s[0]),a=h+g+"e"+a}else if(n){if(s=e.split("."),i=t.split("."),s[1]=s[1].replace(/[,.]/g,""),(o=s[0].replace(/[,.]/g,"").length-i[0].replace(/[,.]/g,"").length)<0&&ej.isNullOrUndefined(e.match(/[\[\(\)\]]/g))){c=s[0].split(","),d=s[0].split(",");for(var _=c.length-1;_>=0;_--)if(c[_])for(var v=c[_].length,f=0,b=Math.abs(o);f<b&&3!==v;f++)d[_]="0"+d[_],v++,o++;if(d=d.join(),o<0){!ej.isNullOrUndefined(v)&&3!=v&&(d=","+d);for(var f=0,b=Math.abs(o);f<b;f++)3===v&&(d=","+d,v=0),d="0"+d,v++}o=0,a=h+d+"."+s[1]}else if(ej.isNullOrUndefined(e.match(/[\[\(\)\]]/g))){d=s[0].replace(/[,.]/g,"");for(var x="",v=0,y=d.length-1;y>=0;y--)3===v?(x=","+x,v=0):v++,x=d[y]+x;a=h+x+"."+s[1]}}else{var w=0,C=c.splice(1,c.length);if(o=e.replace(/[,.\[\(\]\)]/g,"").length-t.replace(/[,.]/g,"").length,m>-1){for(var S=0,b=e.length;S<b;S++)"#"===e[S]&&w++;(1===w||c[1]&&2===w)&&(u="#"),1===w&&(C=c[0])}if(o<0){s=a.split(","),d=s.splice(1,s.length);for(var _=c.length-1;_>=0;_--)if(C[_]){var v=C[_].length;!d[_]&&(d[_]="");for(var f=0,b=Math.abs(o)+1;f<b;f++){if(1!=w&&3===v){v=0;break}d[_]=d[_].concat(u),v++,o++}}if(d=d.join(),o<0){!ej.isNullOrUndefined(v)&&3!=v&&(d=","+d);for(var f=0,b=Math.abs(o)+1;f<b;f++)1!=w&&3===v&&(d=","+d,v=0),d=u+d,v++}o=0,a=h+d}l=0}for(var T,R,k=[],O=a.split(""),D=0,y=0,I=!1,j=!1,L=e.indexOf("\\");y<a.length;y++)if(T=O[y],"e"===T&&(j=!0),"0"===T&&m<0?o>0&&l<=y?(o--,l++):o>0?o--:R=r[T]:("0"!=T||!j&&"0"==T)&&(R=r[T]),"0"===T&&L>-1&&(R=r[T]),y===a.lastIndexOf("\\")&&(I=!1),R&&!I)k[D]={rule:R},D+=1;else{"\\"===T&&(T="",!(y===a.lastIndexOf("\\"))&&(I=!0)),T=T.split("");for(var _=0;_<T.length;_++)k[D]=T[_],D+=1}return r=k,{rules:r,format:a}}function s(e,t,s){if(ej.isNullOrUndefined(e)||"string"==typeof e||!t)throw"Bad Number Format Exception";var n,o,l,d=t;if(n=i(t,e),l=n.rules,t=n.format,t.indexOf("\\")>=0){var h,c=t.lastIndexOf("\\"),u=t.slice(0,c),p=t.slice(c+1,t.length);p=p.replace(/[9?CANa#&]/g,"_"),h=u+p,o=h.replace(/[\\]/g,""),t=t.replace(/[\\]/g,"")}else o=t.replace(/[9?CANa#&]/g,"_");return o=a(o,s),r(e,t,o,l,s,d)}function a(e,t){if(0!=e.length){var i,s,a,r=ej.preferredCulture(t),n="";i=r.numberFormat[","],s=r.numberFormat.currency.symbol,a=r.numberFormat["."];for(var o=0;o<e.length;o++)","==e[o]?n+=i:"."==e[o]?n+=a:"$"==e[o]?n+=s:n+=e[o];e=n}return e}function r(i,s,r,l,d,h){if(!ej.isNullOrUndefined(i)){if(s.toLowerCase().indexOf("e")>-1){h.indexOf("+")>-1?h.split("+")[1]:h.split("-")[1];i=i.toExponential(),h.indexOf("-")>-1&&(i=i.replace("+",""))}var c,u,p,m,g,f,_,v,b=c=u=i.toString(),x=r,y=p=0,w=s.match(/[\(\[\]\)]/g);b=!s.indexOf("\\")>=0?i=u.replace(/[\(\)-]/g,""):void 0;var C=l.length-1,S=c.length-1;if(ej.isNullOrUndefined(w))for(;y<l.length&&(m=c[p],g=l[y],m!=t);){if(m===g||"_"===m||"e"===m&&m===g.toLowerCase())f=x.substring(0,y),_=x.substring(y),m=a(m,d),x=f+m+_.substr(1,_.length),p+=1,y+=1;else if(l[y].rule!=t){var T=c.charCodeAt(p);n(s,T,y)?(f=x.substring(0,y),_=x.substring(y),v=o(c,p,y,s,r),x=f+v+_.substr(1,_.length),y++,p++):y++}else"e"===g&&(p=c.indexOf("e")+1),y++;if(p>b.length||C<0)break}else for(;C>=0&&(m=c[S],g=l[C],m!=t);){if(m===g||"_"===m||"e"===m&&m===g.toLowerCase())f=x.substring(0,C+1),_=x.substring(C+1),m=a(m,d),x=f.substr(0,f.length-1)+m+_,C--,S--;else if(l[C].rule!=t){var T=c.charCodeAt(S);n(s,T,C)?(f=x.substring(0,C+1),_=x.substring(C+1),v=o(c,S,C,s,r),x=f.substr(0,f.length-1)+v+_,C--,S--):C--}else C--;if(p>b.length||C<0)break}if(i){x.indexOf("_")-x.indexOf(",")!=1&&x.indexOf("_")-x.indexOf(".")!=1||(x=x.slice(0,x.indexOf("_")-1));return""==e.trim(x.replace(/[_]/g,""))?null:x.replace(/[_]/g,"")}}}function n(t,i,s){var a=P,r=!1,n=t.substr(s,1),o=String.fromCharCode(i);return e.each(a,function(e,t){n==e&&(r=!!o.match(new RegExp(t)))}),r}function o(e,t,i,s,a){var r=!1;return s.indexOf(".")>-1&&i===a.length-1&&e[t+1]>5&&(r=!0),r?(parseInt(e[t])+1).toString():e[t]}function l(e,t){return 0===e.indexOf(t)}function d(e,t){return e.substr(e.length-t.length)===t}function h(e){return(e+"").replace(j,"")}function c(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)}function u(e,t,i){for(var s=e.length;s<t;s++)e=i?"0"+e:e+"0";return e}function p(e,t,i){var s,a=t["-"],r=t["+"];switch(i){case"n -":a=" "+a,r=" "+r;case"n-":d(e,a)?s=["-",e.substr(0,e.length-a.length)]:d(e,r)&&(s=["+",e.substr(0,e.length-r.length)]);break;case"- n":a+=" ",r+=" ";case"-n":l(e,a)?s=["-",e.substr(a.length)]:l(e,r)&&(s=["+",e.substr(r.length)]);break;case"(n)":l(e,"(")&&d(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]}function m(e,t,i){var s=i.groupSizes||[3],a=s[0],r=1,n=ej._round(e,t);isFinite(n)||(n=e),e=n;var o=e+"",l="",d=o.split(/e/i),h=d.length>1?parseInt(d[1],10):0;o=d[0],d=o.split("."),o=d[0],l=d.length>1?d[1]:"";h>0?(l=u(l,h,!1),o+=l.slice(0,h),l=l.substr(h)):h<0&&(h=-h,o=u(o,h+1,!0),l=o.slice(-h,o.length)+l,o=o.slice(0,-h));var c=i["."]||".";l=t>0?c+(l.length>t?l.slice(0,t):u(l,t)):"";for(var p=o.length-1,m=i[","]||",",g="";p>=0;){if(0===a||a>p)return o.slice(0,p+1)+(g.length?m+g+l:l);g=o.slice(p-a+1,p+1)+(g.length?m+g:""),p-=a,r<s.length&&(a=s[r],r++)}return o.slice(0,p+1)+m+g+l}function g(e,t,i){if(!t||"i"===t)return i.name.length?e.toLocaleString():e.toString();t=t||"D";var a,r=i.numberFormat,n=Math.abs(e),o=-1;t.length>1&&(o=parseInt(t.slice(1),10));var l,d=t.charAt(0).toUpperCase();switch(d){case"D":a="n",n=c(n),-1!==o&&(n=u(""+n,o,!0)),e<0&&(n=-n);break;case"N":l=r,l.pattern=l.pattern||["-n"];case"C":l=l||r.currency,l.pattern=l.pattern||["-$n","$n"];case"P":l=l||r.percent,l.pattern=l.pattern||["-n %","n %"],a=e<0?l.pattern[0]||"-n":l.pattern[1]||"n",-1===o&&(o=l.decimals),n=m(n*("P"===d?100:1),o,l);break;default:return s(e,t,i)}return f(n,a,r)}function f(e,t,i){for(var s=/n|\$|-|%/g,a="";;){var r=s.lastIndex,n=s.exec(t);if(a+=t.slice(r,n?n.index:t.length),!n)break;switch(n[0]){case"n":a+=e;break;case"$":a+=i.currency.symbol||"$";break;case"-":/[1-9]/.test(e)&&(a+=i["-"]||"-");break;case"%":a+=i.percent.symbol||"%"}}return a}function _(e,t,i){"string"==typeof i&&(t=i,i=10),t=ej.globalize.findCulture(t);var s=NaN,a=t.numberFormat,r=t.numberFormat.pattern[0];if(e=e.replace(/ /g,""),e.indexOf(t.numberFormat.currency.symbol)>-1?(e=e.replace(t.numberFormat.currency.symbol||"$",""),e=e.replace(t.numberFormat.currency["."]||".",t.numberFormat["."]||"."),r=h(t.numberFormat.currency.pattern[0].replace("$",""))):e.indexOf(t.numberFormat.percent.symbol)>-1&&(e=e.replace(t.numberFormat.percent.symbol||"%",""),e=e.replace(t.numberFormat.percent["."]||".",t.numberFormat["."]||"."),r=h(t.numberFormat.percent.pattern[0].replace("%",""))),e=h(e),L.test(e))s=parseFloat(e,"",i);else if(A.test(e))s=parseInt(e,16);else{var n=p(e,a,r),o=n[0],l=n[1];""===o&&"-n"!==a.pattern[0]&&(n=p(e,a,"-n"),o=n[0],l=n[1]),o=o||"+";var d,c,u=l.indexOf("e");u<0&&(u=l.indexOf("E")),u<0?(c=l,d=null):(c=l.substr(0,u),d=l.substr(u+1));var m,g,f=a["."]||".",_=c.indexOf(f);_<0?(m=c,g=null):(m=c.substr(0,_),g=c.substr(_+f.length));var v=a[","]||",";m=m.split(v).join("");var b=v.replace(/\u00A0/g," ");v!==b&&(m=m.split(b).join(""));var x=o+m;if(null!==g&&(x+="."+g),null!==d){var y=p(d,a,r);x+="e"+(y[0]||"+")+y[1]}!i&&E.test(x)?s=parseFloat(x):i&&(s=parseInt(x,i))}return s}function v(e,t,i){return e<t||e>i}function b(e,t){var i=new Date;if(t<100){var s=e.twoDigitYearMax;s="string"==typeof s?(new Date).getFullYear()%100+parseInt(s,10):s;var a=i.getFullYear();t+=a-a%100,t>s&&(t-=100)}return t}function x(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}function y(e){return e.split("Â ").join(" ").toUpperCase()}function w(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=y(e[i]);return t}function C(e,t,i){var s,a=e.days,r=e._upperDays;return r||(e._upperDays=r=[w(a.names),w(a.namesAbbr),w(a.namesShort)]),t=y(t),i?-1===(s=x(r[1],t))&&(s=x(r[2],t)):s=x(r[0],t),s}function S(e,t,i){var s=e.months,a=e.monthsGenitive||e.months,r=e._upperMonths,n=e._upperMonthsGen;r||(e._upperMonths=r=[w(s.names),w(s.namesAbbr)],e._upperMonthsGen=n=[w(a.names),w(a.namesAbbr)]),t=y(t);var o=x(i?r[1]:r[0],t);return o<0&&(o=x(i?n[1]:n[0],t)),o}function T(e,t){for(var i=0,s=!1,a=0,r=e.length;a<r;a++){var n=e.charAt(a);"'"==n?(s?t.push("'"):i++,s=!1):"\\"==n?(s&&t.push("\\"),s=!s):(t.push(n),s=!1)}return i}function R(e,t,i,s){if(!e)return null;var a=0,r=0,n=null;t=t.split("");for(var o=t.length,l=function(e){for(var t=0,i=e.length,s=[];t<i;t++)s[t]=(e[t]+"").toLowerCase();return s};a<o;a++){if("d"===t[a]){var d=function(e){for(var i=0;t[a]===e;)i++,a++;return i>0&&(a-=1),i}("d");s._lowerDays||(s._lowerDays=function(e){var t,i={};for(t in e)i[t]=l(e[t]);return i}(s.days)),n=d<3?function(t){var i=new RegExp("^\\d{1,"+t+"}"),s=e.substr(r,t).match(i);return s?(s=s[0],r+=s.length,parseInt(s,10)):null}(2):function(t,i){for(var s,a,n,o=0,l=t.length;o<l;o++)if(s=t[o],a=s.length,n=e.substr(r,a),i&&(n=n.toLowerCase()),n==s)return r+=a,o+1;return null}(s._lowerDays[3==d?"namesAbbr":"names"],!0)}}return n}function k(e,t){t=t||"F";var i,s=e.patterns,a=t.length;if(1===a){if(!(i=s[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===a&&"%"===t.charAt(0)&&(t=t.charAt(1));return t}function O(e,t,i){e=h(e),t=h(t);var s=i.calendar,a=ej.globalize._getDateParseRegExp(s,t),r=new RegExp(a.regExp).exec(e);if(null===r)return null;for(var n,o=a.groups,d=null,c=null,u=null,p=0,m=0,g=0,f=0,_=null,x=!1,y=0,w=o.length;y<w;y++){var T=r[y+1];if(T){var k=o[y],O=k.length,D=parseInt(T,10);switch(k){case M.DAY_OF_MONTH_DOUBLE_DIGIT:case M.DAY_OF_MONTH_SINGLE_DIGIT:if(u=D,v(u,1,31))return null;break;case M.MONTH_THREE_LETTER:case M.MONTH_FULL_NAME:if(c=S(s,T,3===O),v(c,0,11))return null;break;case M.MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:if(c=D-1,v(c,0,11))return null;break;case M.YEAR_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_FULL:if(d=O<4?b(s,D):D,v(d,0,9999))return null;break;case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:if(p=D,12===p&&(p=0),v(p,0,11))return null;break;case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:if(p=D,v(p,0,23))return null;break;case M.MINUTES_SINGLE_DIGIT:case M.MINUTES_DOUBLE_DIGIT:if(m=D,v(m,0,59))return null;break;case M.SECONDS_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:if(g=D,v(g,0,59))return null;break;case M.MERIDIAN_INDICATOR_FULL:case M.MERIDIAN_INDICATOR_SINGLE:if(!(x=s.PM&&(T===s.PM[0]||T===s.PM[1]||T===s.PM[2]))&&(!s.AM||T!==s.AM[0]&&T!==s.AM[1]&&T!==s.AM[2]))return null;break;case M.DECISECONDS:case M.CENTISECONDS:case M.MILLISECONDS:if(f=D*Math.pow(10,3-O),v(f,0,999))return null;break;case M.DAY_OF_WEEK_THREE_LETTER:u=R(e,t,i,s);break;case M.DAY_OF_WEEK_FULL_NAME:if(C(s,T,3===O),v(null,0,6))return null;break;case M.TIME_ZONE_OFFSET_FULL:var I=T.split(/:/);if(2!==I.length)return null;if(n=parseInt(I[0],10),v(n,-12,13))return null;var j=parseInt(I[1],10);if(v(j,0,59))return null;_=60*n+(l(T,"-")?-j:j);break;case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:if(n=D,v(n,-12,13))return null;_=60*n}}}var L,A=new Date,E=s.convert;if(L=E?E.fromGregorian(A)[0]:A.getFullYear(),null===d&&(d=L),null===c&&(c=0),null===u&&(u=1),E){if(null===(A=E.toGregorian(d,c,u)))return null}else if(A.setFullYear(d,c,u),A.getDate()!==u)return null;if(x&&p<12&&(p+=12),A.setHours(p,m,g,f),null!==_){var P=A.getMinutes()-(_+A.getTimezoneOffset());A.setHours(A.getHours()+parseInt(P/60,10),P%60)}return A}function D(e,t,i){function s(e,t){var i,s=e+"";return t>1&&s.length<t?(i=u[t-2]+s,i.substr(i.length-t,t)):i=s}var a=i.calendar,r=a.convert;if(!t||!t.length||"i"===t){var n;return n=i&&i.name.length?r?D(e,a.patterns.F,i):e.toLocaleString():e.toString()}var o="s"===t;t=k(a,t),n=[];var l,d,h,c,u=["0","00","000"],p=/([^d]|^)(d|dd)([^d]|$)/g,m=0,g=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;for(!o&&r&&(c=r.fromGregorian(e));;){var f=g.lastIndex,_=g.exec(t);if(m+=T(t.slice(f,_?_.index:t.length),n),!_)break;if(m%2)n.push(_[0]);else{var v=_[0],b=v.length;switch(v){case M.DAY_OF_WEEK_THREE_LETTER:case M.DAY_OF_WEEK_FULL_NAME:var x=3===b?a.days.namesAbbr:a.days.names;n.push(x[e.getDay()]);break;case M.DAY_OF_MONTH_SINGLE_DIGIT:case M.DAY_OF_MONTH_DOUBLE_DIGIT:d=!0,n.push(s(c?c[2]:e.getDate(),b));break;case M.MONTH_THREE_LETTER:case M.MONTH_FULL_NAME:var y=c?c[1]:e.getMonth();n.push(a.monthsGenitive&&function(){return d||h?d:(d=p.test(t),h=!0,d)}()?a.monthsGenitive[3===b?"namesAbbr":"names"][y]:a.months[3===b?"namesAbbr":"names"][y]);break;case M.MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:n.push(s((c?c[1]:e.getMonth())+1,b));break;case M.YEAR_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_FULL:y=c?c[0]:e.getFullYear(),b<4&&(y%=100),n.push(s(y,b));break;case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:l=e.getHours()%12,0===l&&(l=12),n.push(s(l,b));break;case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:n.push(s(e.getHours(),b));break;case M.MINUTES_SINGLE_DIGIT:case M.MINUTES_DOUBLE_DIGIT:n.push(s(e.getMinutes(),b));break;case M.SECONDS_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:n.push(s(e.getSeconds(),b));break;case M.MERIDIAN_INDICATOR_SINGLE:case M.MERIDIAN_INDICATOR_FULL:y=e.getHours()<12?a.AM?a.AM[0]:" ":a.PM?a.PM[0]:" ",n.push(1===b?y.charAt(0):y);break;case M.DECISECONDS:case M.CENTISECONDS:case M.MILLISECONDS:n.push(s(e.getMilliseconds(),3).substr(0,b));break;case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:l=e.getTimezoneOffset()/60,n.push((l<=0?"+":"-")+s(Math.floor(Math.abs(l)),b));break;case M.TIME_ZONE_OFFSET_FULL:l=e.getTimezoneOffset()/60,n.push((l<=0?"+":"-")+s(Math.floor(Math.abs(l)),2)+":"+s(Math.abs(e.getTimezoneOffset()%60),2));break;case M.DATE_SEPARATOR:n.push(a["/"]||"/");break;default:throw"Invalid date format pattern '"+v+"'."}}}return n.join("")}function I(e,t){return t.length?I(e[t[0]],t.slice(1)):e}ej.globalize={},ej.cultures={},ej.cultures.default=ej.cultures["en-US"]=e.extend(!0,{name:"en-US",englishName:"English",nativeName:"English",language:"en",isRTL:!1,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{"/":"/",":":":",firstDay:0,week:{name:"Week",nameAbbr:"Wek",nameShort:"Wk"},days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},ej.cultures["en-US"]),ej.cultures["en-US"].calendar=ej.cultures["en-US"].calendar||ej.cultures["en-US"].calendars.standard;var j=/^\s+|\s+$/g,L=/^[+-]?infinity$/i,A=/^0x[a-f0-9]+$/i,E=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,P={9:"[0-9 ]",0:"[0-9 ]",a:"[A-Za-z0-9 ]",A:"[A-Za-z0-9]",N:"[0-9]","#":"[0-9]","&":"[^]+","<":"",">":"",C:"[A-Za-z ]","?":"[A-Za-z]"},M={DAY_OF_WEEK_THREE_LETTER:"ddd",DAY_OF_WEEK_FULL_NAME:"dddd",DAY_OF_MONTH_SINGLE_DIGIT:"d",DAY_OF_MONTH_DOUBLE_DIGIT:"dd",MONTH_THREE_LETTER:"MMM",MONTH_FULL_NAME:"MMMM",MONTH_SINGLE_DIGIT:"M",MONTH_DOUBLE_DIGIT:"MM",YEAR_SINGLE_DIGIT:"y",YEAR_DOUBLE_DIGIT:"yy",YEAR_FULL:"yyyy",HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:"h",HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:"hh",HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:"H",HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:"HH",MINUTES_SINGLE_DIGIT:"m",MINUTES_DOUBLE_DIGIT:"mm",SECONDS_SINGLE_DIGIT:"s",SECONDS_DOUBLE_DIGIT:"ss",MERIDIAN_INDICATOR_SINGLE:"t",MERIDIAN_INDICATOR_FULL:"tt",DECISECONDS:"f",CENTISECONDS:"ff",MILLISECONDS:"fff",TIME_ZONE_OFFSET_SINGLE_DIGIT:"z",TIME_ZONE_OFFSET_DOUBLE_DIGIT:"zz",TIME_ZONE_OFFSET_FULL:"zzz",DATE_SEPARATOR:"/"};ej.globalize._getDateParseRegExp=function(e,t){var i=e._parseRegExp;if(i){var s=i[t];if(s)return s}else e._parseRegExp=i={};for(var a,r=k(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),n=["^"],o=[],l=0,d=0,h=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;null!==(a=h.exec(r));){var c=r.slice(l,a.index);if(l=h.lastIndex,(d+=T(c,n))%2)n.push(a[0]);else{var u,p=a[0],m=p.length;switch(p){case M.DAY_OF_WEEK_THREE_LETTER:case M.DAY_OF_WEEK_FULL_NAME:case M.MONTH_FULL_NAME:case M.MONTH_THREE_LETTER:u="(\\D+)";break;case M.MERIDIAN_INDICATOR_FULL:case M.MERIDIAN_INDICATOR_SINGLE:u="(\\D*)";break;case M.YEAR_FULL:case M.MILLISECONDS:case M.CENTISECONDS:case M.DECISECONDS:u="(\\d{"+m+"})";break;case M.DAY_OF_MONTH_DOUBLE_DIGIT:case M.DAY_OF_MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:case M.MONTH_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_SINGLE_DIGIT:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.MINUTES_DOUBLE_DIGIT:case M.MINUTES_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:case M.SECONDS_SINGLE_DIGIT:u="(\\d\\d?)";break;case M.TIME_ZONE_OFFSET_FULL:u="([+-]?\\d\\d?:\\d{2})";break;case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:u="([+-]?\\d\\d?)";break;case M.DATE_SEPARATOR:u="(\\"+e["/"]+")";break;default:throw"Invalid date format pattern '"+p+"'."}u&&n.push(u),o.push(a[0])}}T(r.slice(l),n),n.push("$");var g=n.join("").replace(/\s+/g,"\\s+"),f={regExp:g,groups:o};return i[t]=f},ej.globalize.addCulture=function(t,i){ej.cultures[t]=e.extend(!0,e.extend(!0,{},ej.cultures.default,i),ej.cultures[t]),ej.cultures[t].calendar=ej.cultures[t].calendars.standard},ej.globalize.preferredCulture=function(e){return e=void 0!==e&&typeof e==typeof this.cultureObject?e.name:e,this.cultureObject=ej.globalize.findCulture(e),this.cultureObject},ej.globalize.setCulture=function(e){return ej.isNullOrUndefined(this.globalCultureObject)&&(this.globalCultureObject=ej.globalize.findCulture(e)),e=void 0!==e&&typeof e==typeof this.globalCultureObject?e.name:e,e&&(this.globalCultureObject=ej.globalize.findCulture(e)),ej.cultures.current=this.globalCultureObject,this.globalCultureObject},ej.globalize.culture=function(e){ej.cultures.current=ej.globalize.findCulture(e)},ej.globalize.findCulture=function(t){var i;if(t){if(e.isPlainObject(t)&&t.numberFormat&&(i=t),"string"==typeof t){var s=ej.cultures;if(s[t])return s[t];if(t.indexOf("-")>-1){var a=t.split("-")[0];if(s[a])return s[a]}else for(var r=e.map(s,function(e){return e}),n=0;n<r.length;n++){var o=r[n].name.split("-")[0];if(o===t)return r[n]}return ej.cultures.default}}else i=ej.cultures.current||ej.cultures.default;return i},ej.globalize.format=function(e,t,i){var s=ej.globalize.findCulture(i);return"number"==typeof e?e=g(e,t,s):e instanceof Date&&(e=D(e,t,s)),e},ej.globalize._round=function(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i},ej.globalize.parseInt=function(e,t,i){return t||(t=10),Math.floor(_(e,i,t))},ej.globalize.getISODate=function(e){if(e instanceof Date)return e.toISOString()},ej.globalize.parseFloat=function(e,t,i){return"string"==typeof t&&(i=t,t=10),_(e,i)},ej.globalize.parseDate=function(e,t,i){i=ej.globalize.findCulture(i);var s,a,r;if(t){if("string"==typeof t&&(t=[t]),t.length)for(var n=0,o=t.length;n<o;n++){var l=t[n];if(l&&(s=O(e,l,i)))break}}else{r=i.calendar.patterns;for(a in r)if(s=O(e,r[a],i))break}return s||null},ej.globalize.getLocalizedConstants=function(t,i){var s,a=t.replace("ej.","").split(".");return s=I(ej,a),e.extend(!0,{},s.Locale.default,s.Locale[i||this.cultureObject.name])},e.extend(ej,ej.globalize)}(jQuery),function(e,t,i){t.widget("ejButton","ej.Button",{element:null,model:null,validTags:["button","input"],_setFirst:!1,_rootCSS:"e-button",_requiresID:!0,defaults:{size:"normal",type:"submit",height:"",width:"",enabled:!0,htmlAttributes:{},text:null,contentType:"textonly",imagePosition:"imageleft",showRoundedCorner:!1,cssClass:"",prefixIcon:null,suffixIcon:null,enableRTL:!1,repeatButton:!1,timeInterval:"150",create:null,click:null,destroy:null},dataTypes:{size:"enum",enabled:"boolean",type:"enum",showRoundedCorner:"boolean",text:"string",contentType:"enum",imagePosition:"enum",prefixIcon:"string",suffixIcon:"string",cssClass:"string",repeatButton:"boolean",enableRTL:"boolean",timeInterval:"string",htmlAttributes:"data"},disable:function(){this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.enabled=!1},enable:function(){this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.enabled=!0},_init:function(){this._cloneElement=this.element.clone(),this._initialize(),this._render(),this._controlStatus(this.model.enabled),this._wireEvents(this.model.repeatButton),this._addAttr(this.model.htmlAttributes)},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):i.element.attr(t,e),"disabled"==t&&"disabled"==e&&i.disable()})},_destroy:function(){this._off(this.element,"blur",this._btnBlur),this.element.removeClass(this.model.cssClass+"e-ntouch e-btn e-txt e-select e-disable e-corner e-widget").removeAttr("role aria-describedby aria-disabled"),!this._cloneElement.attr("type")&&this.element.attr("type")&&this.element.removeAttr("type"),this.element.removeClass("e-btn-"+this.model.size),this.model.contentType&&"textonly"!=this.model.contentType&&this.element.append(this._cloneElement.text())&&this.imgtxtwrap[0].remove()},_setModel:function(e){var t;for(t in e)switch(t){case"size":this._setSize(e[t]);break;case"height":this._setHeight(e[t]);break;case"width":this._setWidth(e[t]);break;case"contentType":this._setContentType(e[t]);break;case"imagePosition":this._setImagePosition(e[t]);break;case"text":this._setText(e[t]);break;case"prefixIcon":this.element.is("input")||this._setMajorIcon(e[t]);break;case"suffixIcon":this.element.is("input")||this._setMinorIcon(e[t]);break;case"enabled":this._controlStatus(e[t]);break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"timeInterval":this.model.timeInterval=e[t];break;case"htmlAttributes":this._addAttr(e[t])}},_setSize:function(e){this.element.removeClass("e-btn-mini e-btn-medium e-btn-small e-btn-large e-btn-normal"),this.element.addClass("e-btn-"+e)},_setType:function(e){this.element.prop({type:e})},_setHeight:function(e){this.element.css("height",e)},_setWidth:function(e){this.element.css("width",e)},_setText:function(e){"inputButton"==this.buttonType?this.element.val(e):this.model.contentType==t.ContentType.TextOnly?this.element.html(e):this.textspan.html(e),this.model.text=e},_setMajorIcon:function(e){this.majorimgtag.removeClass(this.model.prefixIcon),this.majorimgtag.addClass(e),this.model.prefixIcon=e},_setMinorIcon:function(e){this.minorimgtag.removeClass(this.model.suffixIcon),this.minorimgtag.addClass(e),this.model.suffixIcon=e},_setContentType:function(e){e!=this.model.contentType&&(this.element.empty(),this.model.contentType=e,this.element.is("input")||this._renderButtonNormal())},_setImagePosition:function(e){this.model.contentType==t.ContentType.TextAndImage&&e!=this.model.imagePosition&&(this.element.empty(),this.model.imagePosition=e,this.element.is("input")||this._renderButtonNormal())},_setRTL:function(e){e?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_controlStatus:function(e){e?this.enable():this.disable()},_setSkin:function(e){this.model.cssClass!=e&&(this.element.removeClass(this.model.cssClass),this.element.addClass(e))},_initialize:function(){t.isTouchDevice()||this.element.addClass("e-ntouch"),this.element.is("input")?this.buttonType="inputButton":this.element.is("a")||this.element.is("button")?this.buttonType="tagButton":this.element.removeClass("e-button"),this.element.attr("type")?this.model.type=this.element.attr("type"):this._setType(this.model.type),this._timeout=null},_render:function(){this._setSize(this.model.size),this._setHeight(this.model.height),this._setWidth(this.model.width),this._setRTL(this.model.enableRTL),this.element.addClass(this.model.cssClass+" e-btn e-select e-widget").attr("role","button"),"inputButton"==this.buttonType?(this.element.addClass("e-txt"),null!=this.model.text&&""!=this.model.text?this.element.val(this.model.text):this.model.text=this.element.val()):this._renderButtonNormal(),this._roundedCorner(this.model.showRoundedCorner),this.element[0].id&&this.element.attr("aria-describedby",this.element[0].id)},_renderButtonNormal:function(){if(null!=this.model.text&&""!=this.model.text||(this.model.text=this.element.html()),this.element.empty(),this.textspan=t.buildTag("span.e-btntxt",this.model.text),this.model.contentType.indexOf("image")>-1&&(this.majorimgtag=t.buildTag("span").addClass(this.model.prefixIcon),this.minorimgtag=t.buildTag("span").addClass(this.model.suffixIcon),this.imgtxtwrap=t.buildTag("span").addClass("e-btn-span")),this.model.contentType==t.ContentType.TextAndImage){switch(this.model.imagePosition){case t.ImagePosition.ImageRight:this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageLeft:this.imgtxtwrap.append(this.majorimgtag,this.textspan);break;case t.ImagePosition.ImageBottom:this.majorimgtag.attr("style","display:inherit"),this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageTop:this.majorimgtag.attr("style","display:inherit"),this.imgtxtwrap.append(this.majorimgtag,this.textspan)}this.element.append(this.imgtxtwrap)}else this.model.contentType==t.ContentType.ImageTextImage?(this.imgtxtwrap.append(this.majorimgtag,this.textspan,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageBoth?(this.imgtxtwrap.append(this.majorimgtag,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageOnly?(this.imgtxtwrap.append(this.majorimgtag),this.element.append(this.imgtxtwrap)):(this.element.addClass("e-txt"),this.element.html(this.model.text))},_roundedCorner:function(e){1==e?this.element.addClass("e-corner"):this.element.removeClass("e-corner")},_wireEvents:function(t){t&&(this._on(this.element,"mousedown",this._btnRepatMouseClickEvent),this._on(e(document),"mouseup",this._mouseUpClick),this._on(this.element,"keyup",this._btnRepatKeyUpEvent),this._on(e(document),"keypress",this._btnRepatKeyDownEvent)),this._on(this.element,"click",this._btnMouseClickEvent),this._on(this.element,"blur",this._btnBlur)},_btnBlur:function(e){this.element.removeClass("e-animate")},_btnMouseClickEvent:function(e){var t=this;if(this.element.addClass("e-animate"),!t.model.enabled)return!1;if(!t.element.hasClass("e-disable")){var i={target:e.currentTarget,e:e,status:t.model.enabled};t._trigger("_click",i),t._trigger("click",i)}},_btnRepatMouseClickEvent:function(e){var t=this;if(!t.model.enabled)return!1;if(!t.element.hasClass("e-disable")){t.model.enabled;0!=e.button&&1!=e.which||(t._timeout=setInterval(function(){t._trigger("click",{target:e.currentTarget,status:t.model.enabled})},this.model.timeInterval))}},_mouseUpClick:function(e){clearTimeout(this._timeout)},_btnRepatKeyDownEvent:function(e){var t=this;if(!t.element.hasClass("e-disable")){var i={status:t.model.enabled};32!=e.keyCode&&13!=e.keyCode||t._trigger("click",i)}},_btnRepatKeyUpEvent:function(e){32!=e.keyCode&&13!=e.keyCode||clearTimeout(this._timeout)}}),t.ContentType={TextOnly:"textonly",ImageOnly:"imageonly",ImageBoth:"imageboth",TextAndImage:"textandimage",ImageTextImage:"imagetextimage"},t.ImagePosition={ImageRight:"imageright",ImageLeft:"imageleft",ImageTop:"imagetop",ImageBottom:"imagebottom"},t.ButtonSize={Normal:"normal",Mini:"mini",Small:"small",Medium:"medium",Large:"large"},t.ButtonType={Button:"button",Reset:"reset",Submit:"submit"}}(jQuery,Syncfusion),function(e,t,i){t.widget("ejSlider","ej.Slider",{element:null,model:null,validTags:["div","span"],
_addToPersist:["value","values"],_rootCSS:"e-slider",_setFirst:!1,_requiresID:!0,defaults:{orientation:"horizontal",enableAnimation:!0,animationSpeed:500,showTooltip:!0,cssClass:"",showRoundedCorner:!1,readOnly:!1,enableRTL:!1,htmlAttributes:{},minValue:0,maxValue:100,sliderType:"default",value:null,values:null,incrementStep:1,height:null,width:null,enabled:!0,showScale:!1,largeStep:10,smallStep:1,showSmallTicks:!0,showButtons:!1,enablePersistence:!1,allowMouseWheel:!1,start:null,stop:null,slide:null,change:null,create:null,destroy:null,tooltipChange:null,renderingTicks:null},dataTypes:{orientation:"enum",enableAnimation:"boolean",animationSpeed:"number",cssClass:"string",showRoundedCorner:"boolean",readOnly:"boolean",enableRTL:"boolean",minValue:"number",maxValue:"number",sliderType:"enum",incrementStep:"number",enabled:"boolean",showButtons:"boolean",showScale:"boolean",largeStep:"number",smallStep:"number",showSmallTicks:"boolean",enablePersistence:"boolean",htmlAttributes:"data",allowMouseWheel:"boolean"},observables:["value","values"],value:t.util.valueFunction("value"),values:t.util.valueFunction("values"),enable:function(){this.model.enabled||(this.model.enabled=!0,this.wrapper&&this.wrapper.removeClass("e-disable"),this.element.removeClass("e-disable"),this.model.showButtons&&this.element.siblings(".e-sliderbtn").ejButton("model.enabled",this.model.enabled),this._wireEvents())},disable:function(){this.model.enabled&&(this.model.enabled=!1,this.wrapper&&this.wrapper.addClass("e-disable"),this.element.addClass("e-disable"),this.model.showButtons&&this.element.siblings(".e-sliderbtn").ejButton("model.enabled",this.model.enabled),this._unWireEvents())},_validateValue:function(e,t){t=void 0!==t&&t,null==e||""===e?e=this.model.minValue:"string"==typeof e&&(e=parseFloat(e)),this._isNumber(e)?(this._hidden.val(e),this.value(e)):this._isNumber(this.value())||(this._hidden.val(this.model.minValue),this.value(this.model.minValue)),"range"!=this.model.sliderType&&this._setValue(t)},_validateRangeValue:function(e,t){if(t=void 0!==t&&t,null==e)e=new Array(this.model.minValue,this.model.maxValue);else if("string"==typeof e){var i=e.split(",");i.length>1&&(e=new Array(parseFloat(i[0]),parseFloat(i[1])))}"object"==typeof e&&this._isNumber(e[0])&&this._isNumber(e[1])?(this._hidden.val(new Array(e[0],e[1])),this.values(new Array(e[0],e[1]))):"object"==typeof this.values()&&this._isNumber(this.values()[0])&&this._isNumber(this.values()[1])||(this._hidden.val(new Array(this.model.minValue,this.model.maxValue)),this.values(new Array(this.model.minValue,this.model.maxValue))),"range"==this.model.sliderType&&this._setRangeValue(t)},_validateStartEnd:function(){isNaN(this.model.minValue)&&(this.model.minValue=0),isNaN(this.model.maxValue)&&(this.model.maxValue=100)},_isNumber:function(e){return"number"==typeof e&&!isNaN(e)},_outerCorner:function(e){e?this._roundedCorner():this._sharpedCorner()},_changeSkin:function(e){this.element.removeClass(this.model.cssClass).addClass(e),this.model.showScale&&this.ul.removeClass(this.model.cssClass).addClass(e)},getValue:function(){return this._getHandleValue()},setValue:function(e,t){this._isInteraction=!1,"range"==this.model.sliderType?this._validateRangeValue(e,t):this._validateValue(e,t),this._isInteraction=!0},_getTransition:function(){var e=document.body||document.documentElement,t=e.style;return void 0!==t.transition||void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.MsTransition||void 0!==t.OTransition},_init:function(){this._isInteraction=!0,this._isTransition=this._getTransition(),this._initialize(),this._render()},_setModel:function(e){this._isInteraction=!1,t.isNullOrUndefined(e.minValue)&&t.isNullOrUndefined(e.maxValue)||(this._isNumber(e.minValue)?this.model.minValue=e.minValue:e.minValue=this.model.minValue,this._isNumber(e.maxValue)?this.model.maxValue=e.maxValue:e.maxValue=this.model.maxValue,"range"==this.model.sliderType&&void 0==e.values?this._setRangeValue():"range"!=this.model.sliderType&&void 0==e.value&&this._setValue());var i;for(i in e)switch(i){case"value":this._validateValue(t.util.getVal(e[i])),e[i]=this.model.value;break;case"values":var s="function"==typeof e.values?e.values():e.values;if(!(t.isNullOrUndefined(s)||t.isNullOrUndefined(s.length)||"string"==typeof s||isNaN(s[0])||isNaN(s[1]))){if(("function"==typeof this.values().join?s.join():s)==this._hidden.val())break}this._validateRangeValue(t.util.getVal(e[i])),e[i]=this.model.values;break;case"height":this.model.height=e[i],this._setDimension(),this.model.showScale&&this._scaleAlignment();break;case"width":this.model.width=e[i],this._setDimension(),this.model.showScale&&this._scaleAlignment();break;case"enabled":this._disabled(!e[i]);break;case"showRoundedCorner":this._outerCorner(e[i]);break;case"enableRTL":this.model.enableRTL=e[i],this.model.showButtons&&(this._valueChanged=!0),this._checkRTL(),e[i]=this.model.enableRTL;break;case"cssClass":this._changeSkin(e[i]),this.model.showButtons&&this.element.siblings(".e-sliderbtn").ejButton("model.cssClass",e[i]);break;case"showScale":this._renderScale(e[i]),this.model.enableRTL&&this._changeVerticalScaleDir(e[i]);break;case"orientation":var a=this.model.height;this.model.height=this.model.width,this.model.width=a;case"sliderType":this._sliderOptions(i,e[i]);break;case"smallStep":case"largeStep":case"showSmallTicks":case"minValue":case"maxValue":this._scaleOptions(i,e[i]);break;case"htmlAttributes":this._addAttr(e[i]);break;case"tooltipChange":this.model.tooltipChange=e[i];break;case"allowMouseWheel":this.model.allowMouseWheel=e[i];break;case"renderingTicks":this.model.renderingTicks=e[i];break;case"showButtons":this.model.showButtons=e[i],this._renderButtons()}this._isInteraction=!0},_destroy:function(){this.model.showScale&&this._destroyScale(),this.element.insertAfter(this.wrapper),this.wrapper.remove(),this.element.removeClass("e-widget e-box e-corner "+this.model.cssClass).empty(),this.model.showButtons&&this.element.removeAttr("style")},_initialize:function(){this.target=this.element[0],this.horDir="left",this.verDir="bottom",this._isFocused=!1},_render:function(){this.initialRender=!0,this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this.wrapper=t.buildTag("div.e-slider-wrap e-widget"+this.model.cssClass+"#"+this.target.id+"_wrapper",{tabindex:"0",role:"slider"}).insertAfter(this.element),this.model.showButtons?this._showButtons():this.wrapper.append(this.element),this.element.addClass("e-widget e-box "+this.model.cssClass),"default"!=this.model.sliderType&&(this.header=t.buildTag("div.e-range"),this.element.append(this.header),"range"==this.model.sliderType&&(this.secondHandle=this._createHandle())),this.firstHandle=this._createHandle(),this._setOrientation(),this._setDimension(),this._insertHiddenField(),this._checkProperties(),this.model.showScale||this._alignButtons(),this._addAttr(this.model.htmlAttributes),this._setSliderValue()},_showButtons:function(){var i=this,s=t.buildTag("button.e-decreasebtn e-sliderbtn e-animate"),a=t.buildTag("button.e-increasebtn e-sliderbtn e-animate");s.ejButton({contentType:"imageonly",prefixIcon:"e-icon e-minus",type:"button",repeatButton:!0,enabled:i.model.enabled,cssClass:i.model.cssClass,click:function(e){i._clickButtons(e)}}),a.ejButton({contentType:"imageonly",prefixIcon:"e-icon e-plus",type:"button",repeatButton:!0,enabled:i.model.enabled,cssClass:i.model.cssClass,click:function(e){i._clickButtons(e)}}),this.model.enableRTL&&"horizontal"==this.model.orientation||"vertical"==this.model.orientation&&!this.model.enableRTL?this.wrapper.append(e(a)).append(this.element).append(e(s)).addClass("e-slider-buttons"):this.wrapper.append(e(s)).append(this.element).append(e(a)).addClass("e-slider-buttons"),this.wrapper.find(".e-sliderbtn").attr("tabindex",-1)},_renderButtons:function(){this.model.showButtons?(this._showButtons(),this.model.showScale||this._alignButtons()):(this.element.siblings(".e-sliderbtn").remove(),this.element.removeAttr("style"),this.wrapper.removeClass("e-slider-buttons")),this.wrapper.find("ul").hasClass("e-scale")&&(this._destroyScale(),this._renderScale(!0))},_alignButtons:function(){if(this.model.showButtons){var e=this.wrapper.find(".e-sliderbtn");"horizontal"==this.model.orientation?e.css("top",this.element.outerHeight()/2-parseFloat(e.outerHeight()/2)+parseFloat(this.wrapper.css("padding-top"))+"px"):e.css("left",this.element.outerWidth()/2-parseFloat(e.outerWidth()/2)+parseFloat(this.wrapper.css("padding-left"))+"px")}},_clickButtons:function(i){if(e(i.target).hasClass("e-animate")&&e(i.target).removeClass("e-animate"),!this.model.readOnly&&!t.isNullOrUndefined(i.target)){var s,a;"range"==this.model.sliderType?(e(this.element).find(".e-handle.e-focus").is(this.firstHandle)&&!this.model.enableRTL?(this.firstHandle.focus().addClass("e-no-tab"),a=this.handleVal):this.model.enableRTL||(this.secondHandle.focus().addClass("e-no-tab"),a=this.handleVal2),e(this.element).find(".e-handle.e-focus").is(this.secondHandle)&&this.model.enableRTL?(this.secondHandle.focus().addClass("e-no-tab"),a=this.handleVal2):this.model.enableRTL&&(this.firstHandle.focus().addClass("e-no-tab"),a=this.handleVal)):(this.firstHandle.focus().addClass("e-no-tab"),a=this.handleVal),s=e(i.target).hasClass("e-decreasebtn")?this._add(a,this.model.incrementStep,!1):this._add(a,this.model.incrementStep,!0),this._changeHandleValue(s,!1)}},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"disabled"==t&&"disabled"==e?i._disabled(!0):i.element.attr(t,e)})},_renderScale:function(e){if(e){this.wrapper.addClass("e-scale-wrap");var i,s="width",a="h";"vertical"==this.model.orientation&&(s="height",a="v");var r=this.model.smallStep;this.model.showSmallTicks?r<=0&&(r=this.model.incrementStep):r=this.model.largeStep>0?this.model.largeStep:this.model.maxValue-this.model.minValue;var n=Math.abs(this.model.maxValue-this.model.minValue)/r;this.ul=t.buildTag("ul.e-scale e-"+a+"-scale "+this.model.cssClass),this._isIE8&&this.ul.addClass("e-ie8"),this.wrapper.append(this.ul);var o,l,d=this.model.minValue,h=0,c=100/n;"v"==a&&(d=this.model.maxValue);for(var u=0;u<=n;u++){o=t.buildTag("li.e-tick","",{},{title:d});var p=d%this.model.largeStep==0;if(p&&o.addClass("e-large"),o.css(s,c+"%"),this.model.renderingTicks&&(l={value:d,valueType:"tooltip",tick:o[0]},this._trigger("renderingTicks",l),o.attr("title",l.value)),p){this.model.renderingTicks?(l.valueType="label",l.value=d,this._trigger("renderingTicks",l),i=l.value):i=d;var m=t.buildTag("span.e-tick-value",""+i);o.append(m)}this.ul.append(o),"h"==a?d+=r:d-=r,h+=r}this.ul.children().first().addClass("e-first-tick").css(s,c/2+"%"),this.ul.children().last().addClass("e-last-tick").css(s,c/2+"%"),this._scaleAlignment()}else this._destroyScale();this._setWrapperHeight(),this._alignButtons()},_destroyScale:function(){this.wrapper.removeClass("e-scale-wrap"),this.ul.remove(),this.ul=null},_tickValuePosition:function(){var e="vertical"==this.model.orientation?"height":"width",t="vertical"==this.model.orientation?"top":"left",i=this.ul.find(".e-tick.e-first-tick"),s=i.find(".e-tick-value"),a=this.ul.find(".e-tick.e-large:not(.e-first-tick)").find(".e-tick-value"),r=2*i[e]();s.css(t,-s[e]()/2),a.css(t,(r-a[e]())/2)},_scaleAlignment:function(){this._tickValuePosition();var e="height",t="top",i="h";"vertical"==this.model.orientation?(e="width",t="right",i="v",this.element.width()<=15?this.wrapper.addClass("e-small-size"):this.wrapper.removeClass("e-small-size")):this.element.height()<=15?this.wrapper.addClass("e-small-size"):this.wrapper.removeClass("e-small-size"),this.ul.css(t,-(this.wrapper[e]()+10)),"v"==i&&this.ul.css("top",-this.wrapper.height()).css(t,10),this.ul[e](this.wrapper[e]()+20);var s=-4;null==this.model.largeStep&&"v"!=i&&(s=-s),this.ul.find(".e-tick:not(.e-large)").css(e,this.wrapper[e]()+12).css(t,s),"v"==i&&this.ul.children(".e-large").find(".e-tick-value").css("right",this.wrapper.width()+20+4)},_setWrapperHeight:function(){var e,t;if("horizontal"==this.model.orientation){e=this.ul?this.firstHandle.outerHeight()>this.ul.height()?this.firstHandle.outerHeight():this.ul.height():this.firstHandle.outerHeight();var i=(e-this.element.outerHeight())/2;i<0&&(i=0),this.wrapper.css({padding:i+"px 0px"})}else{t=this.ul?this.firstHandle.outerWidth()>this.ul.width()?this.firstHandle.outerWidth():this.ul.width():this.firstHandle.outerWidth();var s=(t-this.element.outerWidth())/2;s<0&&(s=0),this.wrapper.css({padding:"0px "+s+"px"})}},_createHandle:function(){var e=t.buildTag("a.e-handle e-select","",{},{"aria-label":"drag",tabindex:0});return this.element.attr({role:"slider","aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue}),"msie"==t.browserInfo().name&&e.addClass("e-pinch"),this.element.append(e),e},_setDimension:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width),this._setHandleSize(),this._handleAlignment(this.model.enableRTL),this._alignButtons()},_insertHiddenField:function(){this._hidden=t.buildTag("input","",{},{type:"hidden",name:this.element[0].id}),this._hidden.val(this._getHandleValue()),this.element.append(this._hidden)},_checkProperties:function(){this.model.enabled?this._wireEvents():this.wrapper?this.wrapper.addClass("e-disable"):this.element.addClass("e-disable"),this.model.showScale?this._renderScale(!0):this._setWrapperHeight(),this.model.enableRTL&&this._checkRTL(),this.model.showRoundedCorner&&this._roundedCorner()},_roundedCorner:function(){this.element.addClass("e-corner")},_sharpedCorner:function(){this.element.removeClass("e-corner")},_handleAlignment:function(e){var t,i=-this.firstHandle.outerWidth()/2+"px";t="vertical"!=this.model.orientation?e?"0 "+i+" 0 0":"0 0 0 "+i:e?i+" 0 0 0":"0 0 "+i+" 0",this.element.children(".e-handle").css("margin",t)},_checkRTL:function(){this.model.showButtons&&this._valueChanged&&(this.element.siblings(".e-sliderbtn").remove(),this._renderButtons());var e=this.model.enableRTL,t="vertical"!=this.model.orientation?this.horDir:this.verDir;e?(this.wrapper.addClass("e-rtl"),"vertical"==this.model.orientation&&this.wrapper.addClass("e-top-to-bottom"),this.horDir="right",this.verDir="top"):(this.wrapper.removeClass("e-rtl e-top-to-bottom"),this.horDir="left",this.verDir="bottom"),(!this.model.showButtons||this.model.showButtons&&this.model.enableRTL)&&this._changeVerticalScaleDir(this.model.showScale);var i="vertical"!=this.model.orientation?this.horDir:this.verDir;t!=i&&(this.firstHandle.css(i,this.firstHandle[0].style[t]).css(t,"auto"),"default"!=this.model.sliderType&&(this.header.css(i,this.header[0].style[t]).css(t,"auto"),"range"==this.model.sliderType&&this.secondHandle.css(i,this.secondHandle[0].style[t]).css(t,"auto"))),this._handleAlignment(e)},_setOrientation:function(){"vertical"!=this.model.orientation?this.wrapper.addClass("e-horizontal"):(this.wrapper.addClass("e-vertical"),this.firstHandle.css(this.verDir,"0"))},_changeVerticalScaleDir:function(e){if(e){var t=this.wrapper.find(".e-v-scale li");if(t.length>0){var i=t.toArray().reverse();t.remove(),this.wrapper.find(".e-v-scale").append(i)}}},_setHandleSize:function(){if(null!=this.model.height&&"horizontal"==this.model.orientation||null!=this.model.width&&"vertical"==this.model.orientation){var e;e="vertical"!=this.model.orientation?this.wrapper.height()+2:this.wrapper.width()+2,this.element.find(".e-handle").height(e).width(e)}else this.wrapper.addClass("e-default-wrap"),this.element.find(".e-handle").addClass("e-default")},_disabled:function(e){e?this.disable():this.enable()},_sliderOptions:function(e,t){this._unWireEvents(),this._destroy(),this.model[e]=t,this._init()},_scaleOptions:function(e,t){this.model.showScale&&(this._destroyScale(),this.model[e]=t,this._renderScale(!0),this.model.enableRTL&&this._changeVerticalScaleDir(!0))},_showTooltip:function(){if(this.model.showTooltip){this._timeOut&&clearTimeout(this._timeOut);var i=this.tooltip?e("body .e-tooltipbox").text().replace(/\s+/g,"").replace("-",","):"";if(this.tooltip&&this.tooltip.length&&"none"!=this.tooltip.css("display")&&this._getHandle()[0]==this._oldHandle&&i==this.preValue)return void(this._getHandleValue().toString()!=this.preValue&&this._setTooltipPosition());this._oldHandle=this._getHandle()[0],e("body .e-tooltipbox").remove(),this.tooltip=t.buildTag("div.e-tooltipbox "+this.model.cssClass+" e-corner",{role:"tooltip"}).css(this._getOffset(this._getHandle())),e("body").append(this.tooltip),"vertical"==this.model.orientation&&this.tooltip.addClass("e-vertical"),this._setTooltipPosition()}},_hideTooltip:function(){if(this.model.showTooltip){var e=this;this._timeOut=setTimeout(function(){e.tooltip.fadeOut(800)},1500)}},_showhideTooltip:function(e){this.model.showTooltip&&e&&(this._showTooltip(),this._timeOut&&clearTimeout(this._timeOut),this._hideTooltip())},_setTooltipPosition:function(){if(this.model.showTooltip){this._updateTooltipValue();var t,i,s,a,r,n,o,l;if(r=this._getHandle(),n=this._getOffset(r),o=this._getOffset(this.tooltip),l=e(r).outerHeight()-e(r).height(),"vertical"==this.model.orientation){a=(this.tooltip.outerHeight()-r.outerHeight())/2,s=r.outerWidth()+5,t=n.top-a,i=n.left+s;var d=e(window).height();window.pageYOffset>0&&(d+=window.pageYOffset),t<0?t=0:d<t+this.tooltip.outerHeight()&&(t=d-this.tooltip.outerHeight()-l),e(window).width()<i+this.tooltip.outerWidth()&&(i=n.left-this.tooltip.outerWidth()-l)}else{o.left+this.tooltip.outerWidth()>e(window).width()&&this.tooltip.css({left:"0px"}),s=(this.tooltip.outerWidth()-r.outerWidth())/2,a=this.tooltip.outerHeight()+5,t=n.top-a,i=n.left-s;var h=e(window).width();window.pageXOffset>0&&(h+=window.pageXOffset),i<0?i=0:h<i+this.tooltip.outerWidth()&&(i=h-this.tooltip.outerWidth()-l),(t<0||n.top<a)&&(n.top+r.outerHeight()+l+this.tooltip.outerHeight()>e(window).height()?(t=n.top,i=n.left>this.tooltip.outerWidth()+5+l?n.left-(this.tooltip.outerWidth()+l):n.left+(r.outerWidth()+5+l)):t=n.top+r.outerHeight()+l)}var c=this._maxZindex();this.tooltip.css({top:t,left:i,zIndex:c+1})}},_getOffset:function(e){return t.util.getOffset(e)},_maxZindex:function(){return t.util.getZindexPartial(this.element,this.popup)},_updateTooltipValue:function(){var e,t=0,i=1;this.model.enableRTL&&(t=1,i=0),e=this.model.tooltipChange?this._raiseEvent("tooltipChange"):this._getHandleValue(),"range"!=this.model.sliderType?this.tooltip[0].innerHTML=e:this.tooltip[0].innerHTML=e[t]+" - "+e[i]},_increaseHeaderWidth:function(e){if("default"!=this.model.sliderType){var t="width",i=this.horDir,s={};"vertical"==this.model.orientation&&(t="height",i=this.verDir),"range"==this.model.sliderType?(s[t]=this.handlePos-this.handlePos2+"%",s[i]=this.handlePos2+"%"):(s[t]=this.handlePos+"%",s[i]=0);var a=this;e?this._isTransition?(this.header[0].style.transition="all "+this.model.animationSpeed+"ms",this.header[0].style["-webkit-transition"]="all "+this.model.animationSpeed+"ms",this.header.css(i,s[i]),this.header.css(t,s[t]),setTimeout(function(){a.header[0].style.transition="none",a.header[0].style["-webkit-transition"]="none"},this.model.animationSpeed)):this.header.animate(s,this.model.animationSpeed):this.header.css(s)}},_setSliderValue:function(){this._validateStartEnd(),"range"==this.model.sliderType?this._validateRangeValue(this.values()):this._validateValue(this.value()),this.preValue=this.getValue().toString()},_hoverOnHandle:function(t){e(t.currentTarget).addClass("e-hover")},_leaveFromHandle:function(t){e(t.currentTarget).removeClass("e-hover")},_firstHandleClick:function(i){if(i.preventDefault(),this.firstHandle.focus().addClass("e-no-tab"),this._raiseEvent("start"))return!1;this.mouseDownPos=this.handlePos,this.model.readOnly||this._on(e(document),t.eventType.mouseMove,this._firstHandleMove),this._on(e(document),t.eventType.mouseUp,this._firstHandleUp),this._on(e(document),"mouseleave",this._firstHandleUp),this._showTooltip()},_firstHandleMove:function(e){e.preventDefault(),e="touchmove"==e.type?e.originalEvent.changedTouches[0]:e;var t={x:e.pageX,y:e.pageY};this.handlePos=this._xyToPosition(t),"range"==this.model.sliderType&&this.handlePos<this.handlePos2&&(this.handlePos=this.handlePos2),this.handlePos!=this.preHandlePos&&(this.preHandlePos=this.handlePos,this.handleVal=this._positionToValue(this.handlePos),this._increaseHeaderWidth(!1),this._setHandlePosition(!1,!1,!1),this._setTooltipPosition(),this._updateModelValue(),this._raiseEvent("slide"))},_firstHandleUp:function(i){i.preventDefault(),this._off(e(document),t.eventType.mouseMove,this._firstHandleMove),this._off(e(document),t.eventType.mouseUp,this._firstHandleUp),this._off(e(document),"mouseleave",this._firstHandleUp),this._timeOut&&clearTimeout(this._timeOut),this._hideTooltip(),this.mouseDownPos!=this.handlePos&&this._raiseChangeEvent()},_secondHandleClick:function(i){if(i.preventDefault(),this.secondHandle.focus().addClass("e-no-tab"),this._raiseEvent("start"))return!1;this.mouseDownPos2=this.handlePos2,this.model.readOnly||this._on(e(document),t.eventType.mouseMove,this._secondHandleMove),this._on(e(document),t.eventType.mouseUp,this._secondHandleUp),this._on(e(document),"mouseleave",this._secondHandleUp),this._showTooltip()},_secondHandleMove:function(e){e.preventDefault(),e="touchmove"==e.type?e.originalEvent.changedTouches[0]:e;var t={x:e.pageX,y:e.pageY};this.handlePos2=this._xyToPosition(t),this.handlePos2>this.handlePos&&(this.handlePos2=this.handlePos),this.handlePos2!=this.preHandlePos2&&(this.preHandlePos2=this.handlePos2,this.handleVal2=this._positionToValue(this.handlePos2),this._increaseHeaderWidth(!1),this._setHandlePosition(!1,!1,!1),this._setTooltipPosition(),this._updateModelValue(),this._raiseEvent("slide"))},_secondHandleUp:function(i){i.preventDefault(),this._off(e(document),t.eventType.mouseMove,this._secondHandleMove),this._off(e(document),t.eventType.mouseUp,this._secondHandleUp),this._off(e(document),"mouseleave",this._secondHandleUp),this._timeOut&&clearTimeout(this._timeOut),this._hideTooltip(),this.mouseDownPos2!=this.handlePos2&&this._raiseChangeEvent()},_focusInHandle:function(t){this._isFocused||(this._isFocused=!0,e(t.currentTarget).addClass("e-focus"),this.model.readOnly||this._on(e(document),"keydown",this._moveHandle),this.model.allowMouseWheel&&!this.model.readOnly&&this._on(this.element,"mousewheel DOMMouseScroll",this._moveHandle),this.activeHandle=e(t.currentTarget).is(this.firstHandle)?1:2,this._setZindex())},_focusOutHandle:function(i){e(i.relatedTarget).is("button")&&e(i.target).parent().siblings().is(i.relatedTarget)||t.isNullOrUndefined(i.relatedTarget)&&!t.isNullOrUndefined(i.originalEvent)&&!t.isNullOrUndefined(i.originalEvent.toElement)&&e(i.originalEvent.toElement).is("button")&&e(i.target).parent().siblings().is(i.originalEvent.toElement)||(this._isFocused=!1,this.model.showTooltip&&this.tooltip&&this.tooltip.fadeOut(800),this.element.find(".e-no-tab").removeClass("e-no-tab"),e(i.currentTarget).removeClass("e-focus"),this._off(e(document),"keydown",this._moveHandle),this._off(this.element,"mousewheel DOMMouseScroll",this._moveHandle))},_moveHandle:function(e){"mousewheel"!=e.type&&"DOMMouseScroll"!=e.type||e.preventDefault();var t,i,s,a;if(s=this._getHandleIndex(this.activeHandle)-1,"mousewheel"==e.type||"DOMMouseScroll"==e.type){var r=e.originalEvent;r.wheelDelta?a=r.wheelDelta/120:r.detail&&(a=-r.detail/3),t=a>0?"add":"sub"}switch(e.keyCode||e.originalEvent.wheelDelta){case-120:case 37:case 40:this._getHandle().addClass("e-no-tab"),e.preventDefault(),t="sub";break;case 120:case 38:case 39:this._getHandle().addClass("e-no-tab"),e.preventDefault(),t="add";break;case 36:if(this._getHandle().addClass("e-no-tab"),e.preventDefault(),this._raiseEvent("start"))return!1;"range"!=this.model.sliderType&&this.value()!=this.model.minValue?this._changeHandleValue(this.model.minValue,this.model.enableAnimation):"range"==this.model.sliderType&&(i=2==this.activeHandle?this.model.minValue:this.handleVal2,this.values()[s]!=i&&this._changeHandleValue(i,this.model.enableAnimation));break;case 35:if(this._getHandle().addClass("e-no-tab"),e.preventDefault(),this._raiseEvent("start"))return!1;"range"!=this.model.sliderType&&this.value()!=this.model.maxValue?this._changeHandleValue(this.model.maxValue,this.model.enableAnimation):"range"==this.model.sliderType&&(i=1==this.activeHandle?this.model.maxValue:this.handleVal,this.values()[s]!=i&&this._changeHandleValue(i,this.model.enableAnimation));break;case 27:this._getHandle().addClass("e-no-tab"),e.preventDefault(),this._getHandle().focusout()}if("add"==t||"sub"==t){if(this._raiseEvent("start"))return!1;var n=1==this.activeHandle?this.handleVal:this.handleVal2,o="add"==t?this._add(n,this.model.incrementStep,!0):this._add(n,this.model.incrementStep,!1);this._changeHandleValue(o,!1)}},_changeHandleValue:function(e,t){var i=null;1==this.activeHandle?(this.handleVal=this._checkHandleValue(e),this.handlePos=this._checkHandlePosition(this.handleVal),"range"==this.model.sliderType&&this.handlePos<this.handlePos2&&(this.handlePos=this.handlePos2,this.handleVal=this.handleVal2),this.handlePos!=this.preHandlePos&&(i=this.preHandlePos=this.handlePos)):(this.handleVal2=this._checkHandleValue(e),this.handlePos2=this._checkHandlePosition(this.handleVal2),"range"==this.model.sliderType&&this.handlePos<this.handlePos2&&(this.handlePos2=this.handlePos,this.handleVal2=this.handleVal),this.handlePos2!=this.preHandlePos2&&(i=this.preHandlePos2=this.handlePos2)),null!=i&&(this._increaseHeaderWidth(t),this._setHandlePosition(t,!0,!0))},_sliderBarClick:function(t){if(this.model.readOnly)return!1;if(t.target==this.target||"default"!=this.model.sliderType&&t.target==this.header[0]||e(t.target).hasClass("e-tick")||e(t.target).hasClass("e-scale")||t.target==this.wrapper[0]){if(t.preventDefault(),this._raiseEvent("start"))return!1;var i={x:t.pageX,y:t.pageY},s=this._xyToPosition(i),a=this._positionToValue(s);"range"==this.model.sliderType&&this.handlePos-s>s-this.handlePos2?(this.handlePos2=this.preHandlePos2=s,this.handleVal2=a,this.activeHandle=2):(this.handlePos=this.preHandlePos=s,this.handleVal=a,this.activeHandle=1),this._getHandle().focus().addClass("e-no-tab"),"default"!=this.model.sliderType&&this._increaseHeaderWidth(this.model.enableAnimation),this._setHandlePosition(this.model.enableAnimation,!0,!0)}},_setHandlePosition:function(e,t,i){var s,a,r,n=this._getHandle(),o=this,l={};s=1==this.activeHandle?this.handlePos:this.handlePos2,a=1==this.activeHandle?this.handleVal:this.handleVal2,n.attr("aria-label",a),r="vertical"==this.model.orientation?this.verDir:this.horDir,l[r]=s+"%",0==s?"range"!=this.model.sliderType&&this._getHandle().addClass("e-handle-start"):this._getHandle().removeClass("e-handle-start"),e?this._isTransition?(n[0].style.transition="all "+this.model.animationSpeed+"ms",n[0].style["-webkit-transition"]="all "+this.model.animationSpeed+"ms",n.css(r,s+"%"),setTimeout(function(){n[0].style.transition="none",n[0].style["-webkit-transition"]="none",o._showhideTooltip(t),i&&o._raiseChangeEvent()},this.model.animationSpeed)):n.animate(l,this.model.animationSpeed,function(){o._showhideTooltip(t),i&&o._raiseChangeEvent()}):(n.css(l),this._showhideTooltip(t),i&&this._raiseChangeEvent())},_xyToPosition:function(e){if(this.model.minValue==this.model.maxValue)return 100;if("vertical"!=this.model.orientation)var t=e.x-this.element.offset().left,i=this.element.width()/100,s=t/i;else var a=e.y-this.element.offset().top,i=this.element.height()/100,s=100-a/i;return s=this._stepValueCalculation(s),s<0?s=0:s>100&&(s=100),this.model.enableRTL?100-s:s},_updateValue:function(){this.handleVal=this._checkHandleValue(this.value()),this.handlePos=this._checkHandlePosition(this.handleVal),this.preHandlePos=this.handlePos,this.activeHandle=1},_setValue:function(e){this._updateValue(),this._increaseHeaderWidth(e),this._setHandlePosition(e,!1,!0)},_updateRangeValue:function(){var e=this.values();this.handleVal=this._checkHandleValue(e[1]),this.handleVal2=this._checkHandleValue(e[0]),this.handlePos=this._checkHandlePosition(this.handleVal),this.handlePos2=this._checkHandlePosition(this.handleVal2),this.handlePos<this.handlePos2&&(this.handlePos=this.handlePos2,this.handleVal=this.handleVal2),this.preHandlePos=this.handlePos,this.preHandlePos2=this.handlePos2},_setRangeValue:function(e){this._updateRangeValue(),this._increaseHeaderWidth(e),this.activeHandle=1,this._setHandlePosition(e,!1,!1),this.activeHandle=2,this._setHandlePosition(e,!1,!0)},_checkHandlePosition:function(e){if(this.model.minValue==this.model.maxValue)return 100;var t=this._tempStartEnd();return e=e>=t.start&&e<=t.end?100*(e-this.model.minValue)/(this.model.maxValue-this.model.minValue):e<t.start?0:100},_checkHandleValue:function(e){if(this.model.minValue==this.model.maxValue)return this.model.minValue;var t=this._tempStartEnd();return e<t.start?e=t.start:e>t.end&&(e=t.end),e},_tempStartEnd:function(){return this.model.minValue>this.model.maxValue?{start:this.model.maxValue,end:this.model.minValue}:{start:this.model.minValue,end:this.model.maxValue}},_positionToValue:function(e){var t=this.model.maxValue-this.model.minValue,i=this._round(t*e/100);return this._add(i,this.model.minValue,!0)},_getHandle:function(){return 1==this.activeHandle?this.firstHandle:this.secondHandle},_getHandleIndex:function(e){return"range"==this.model.sliderType&&1==e?2:1},_getHandleValue:function(){return"range"==this.model.sliderType?[this.handleVal2,this.handleVal]:this.handleVal},_updateModelValue:function(){var e=this._getHandleValue();this._hidden.val(e),"range"==this.model.sliderType?this.values(e):this.value(e)},_add:function(e,t,i,s){var a=Math.pow(10,s||3);return i?(Math.round(e*a)+Math.round(t*a))/a:(Math.round(e*a)-Math.round(t*a))/a},_round:function(e){var t=this.model.incrementStep.toString().split(".");return t[1]?parseFloat(e.toFixed(t[1].length)):Math.round(e)},_raiseChangeEvent:function(){this._updateModelValue(),this.initialRender?this.initialRender=!1:this.getValue().toString()!=this.preValue.toString()&&(this._raiseEvent("change"),this._raiseEvent("stop"),this.preValue=this.getValue().toString())},_raiseEvent:function(e){var t={id:this.target.id,value:this._getHandleValue(),sliderIndex:this._getHandleIndex(this.activeHandle)};"change"==e&&(t={id:this.target.id,isInteraction:this._isInteraction,value:this._getHandleValue(),sliderIndex:this._getHandleIndex(this.activeHandle)}),"tooltipChange"==e&&(t={id:this.target.id,isInteraction:this._isInteraction,value:this._getHandleValue(),sliderIndex:this._getHandleIndex(this.activeHandle)});var i=this._trigger(e,t);return"tooltipChange"==e?t.value:i},_setZindex:function(){"range"==this.model.sliderType&&(1==this.activeHandle?(this.firstHandle.css("z-index",2),this.secondHandle.css("z-index",1)):(this.firstHandle.css("z-index",1),this.secondHandle.css("z-index",2)))},_stepValueCalculation:function(e){0==this.model.incrementStep&&(this.model.incrementStep=1);var t=this.model.incrementStep/((this.model.maxValue-this.model.minValue)/100),i=e%Math.abs(t);return 0!=i&&(t/2>i?e-=i:e+=Math.abs(t)-i),e},_wireEvents:function(){this._on(this.wrapper,"mousedown",this._sliderBarClick),this._on(this.firstHandle,t.eventType.mouseDown,this._firstHandleClick),this._on(this.firstHandle,"mouseenter",this._hoverOnHandle),this._on(this.firstHandle,"mouseleave",this._leaveFromHandle),this._on(this.firstHandle,"focusin",this._focusInHandle),this._on(this.firstHandle,"focusout",this._focusOutHandle),"range"==this.model.sliderType&&(this._on(this.secondHandle,t.eventType.mouseDown,this._secondHandleClick),this._on(this.secondHandle,"mouseenter",this._hoverOnHandle),this._on(this.secondHandle,"mouseleave",this._leaveFromHandle),this._on(this.secondHandle,"focusin",this._focusInHandle),this._on(this.secondHandle,"focusout",this._focusOutHandle))},_unWireEvents:function(){this._off(this.wrapper,"mousedown"),
this._off(this.firstHandle,t.eventType.mouseDown),this._off(this.firstHandle,"mouseenter"),this._off(this.firstHandle,"mouseleave"),this._off(this.firstHandle,"focusin"),this._off(this.firstHandle,"focusout"),"range"==this.model.sliderType&&(this._off(this.secondHandle,t.eventType.mouseDown),this._off(this.secondHandle,"mouseenter"),this._off(this.secondHandle,"mouseleave"),this._off(this.secondHandle,"focusin"),this._off(this.secondHandle,"focusout"))}}),t.SliderType={Default:"default",MinRange:"minrange",Range:"range"}}(jQuery,Syncfusion),function(e,t,i){t.widget("ejSplitButton","ej.SplitButton",{element:null,model:null,validTags:["button"],_setFirst:!1,_rootCSS:"e-splitbutton",defaults:{size:"normal",width:"",height:"",enabled:!0,htmlAttributes:{},text:null,contentType:"textonly",imagePosition:"imageleft",buttonMode:"split",arrowPosition:"right",targetID:null,target:null,showRoundedCorner:!1,prefixIcon:null,suffixIcon:null,cssClass:"",enableRTL:!1,create:null,beforeOpen:null,click:null,itemMouseOver:null,itemMouseOut:null,itemSelected:null,open:null,close:null,destroy:null,popupPosition:"down"},dataTypes:{size:"string",enabled:"boolean",showRoundedCorner:"boolean",text:"string",contentType:"enum",imagePosition:"enum",buttonMode:"enum",arrowPosition:"enum",target:"string",targetID:"string",prefixIcon:"string",suffixIcon:"string",cssClass:"string",enableRTL:"boolean",htmlAttributes:"data"},disable:function(){this.element.addClass("e-disable"),this.wrapper.addClass("e-disable"),this.contstatus&&this._hidePopup(),this.model.buttonMode==t.ButtonMode.Split&&this.dropbutton.addClass("e-disable").attr("aria-disabled",!0),this.model.buttonMode==t.ButtonMode.Dropdown&&this.btnimgwrap.addClass("e-disable").attr("aria-disabled",!0),this.model.enabled=!1},visible:function(e){e?(this.wrapper.removeClass("e-split-btn-hide"),this.wrapper.find(".e-icon").css("visibility","")):(this.wrapper.addClass("e-split-btn-hide"),this.wrapper.find(".e-icon").css("visibility","hidden"))},enable:function(){this.element.removeClass("e-disable"),this.wrapper.removeClass("e-disable"),this.model.buttonMode==t.ButtonMode.Split&&this.dropbutton.removeClass("e-disable").attr("aria-disabled",!1),this.model.buttonMode==t.ButtonMode.Dropdown&&this.btnimgwrap.removeClass("e-disable").attr("aria-disabled",!1),this.model.enabled=!0},hide:function(){this.contstatus&&this._hidePopup()},show:function(){this.contstatus||(this.model.buttonMode==t.ButtonMode.Dropdown?this.element.click():this.model.buttonMode==t.ButtonMode.Split&&this.dropbutton.click())},setPopupPosition:function(e){this._setPosition=!0,this._val=e},_init:function(){this._cloneElement=this.element.clone(),this._setPosition=!1,this._initialize(),this._controlStatus(this.model.enabled),this._documentClickHandler=e.proxy(this._documentClick,this),this._wireEvents()},_createElement:function(t,i){var s=document.createElement(t);return this._setAttributes(s,i),e(s)},_setAttributes:function(e,t){for(var i in t)e.setAttribute(i,t[i])},_destroy:function(){this.contstatus&&this._hide(),this.splitwrap.removeClass("e-drop"),this.splitwrap.removeClass("e-btn-"+this.model.size),this.innerWrap.removeClass("e-splitarrowright e-splitarrowleft e-splitarrowbottom e-splitarrowtop"),this.element.removeClass(this.model.cssClass+"e-ntouch e-select e-corner e-btn e-disable e-split-btn e-droparrowright e-droparrowleft e-droparrowbottom e-droparrowtop e-left-btn e-txt").empty(),this.element.append(this._cloneElement.text()),this.element.insertAfter(this.wrapper),this.wrapper.remove(),this._contextObj&&this._contextObj.model&&this._contextObj.destroy(),this._contextObj&&(this._contextObj=null),e(this.model.target).show(),e(this.model.target).insertAfter(this.element),this._off(this.element,"click",this._btnMouseClick)},_setModel:function(e){var t;for(t in e)switch(t){case"size":this._setSize(e[t]);break;case"width":this._splitbtnWidth(e[t]);break;case"height":this._splitbtnHeight(e[t]);break;case"contentType":this._setContentType(e[t]);break;case"imagePosition":this._setImagePosition(e[t]);break;case"buttonMode":this._setButtonMode(e[t]);break;case"arrowPosition":this._setArrowPosition(e[t]);break;case"text":this._setText(e[t]);break;case"prefixIcon":this._setMajorIcon(e[t]);break;case"suffixIcon":this._setMinorIcon(e[t]);break;case"enabled":this._controlStatus(e[t]);break;case"targetID":case"target":this._setTarget(e[t]);break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"popupPosition":this._setPopupPosition(e[t])}},_setText:function(e){this.model.contentType==t.ContentType.TextOnly?this.model.buttonMode==t.ButtonMode.Split?this.element.html(e):(this.element.empty(),this.imgtxtwrap=e,this.model.arrowPosition==t.ArrowPosition.Left||this.model.arrowPosition==t.ArrowPosition.Top?this.element.append(this.btnimgwrap,this.imgtxtwrap):this.element.append(this.imgtxtwrap,this.btnimgwrap)):this.textspan.html(e)},_setMajorIcon:function(e){this.majorimgtag.removeClass(this.model.prefixIcon),this.majorimgtag.addClass(e)},_setMinorIcon:function(e){this.minorimgtag.removeClass(this.model.suffixIcon),this.minorimgtag.addClass(e)},_setTarget:function(e){"."==e.substring(0,1)||"#"==e.substring(0,1)?this.model.target=e:(this.model.targetID=e,this.model.target="#"+e),this._renderContxtMenu()},_setContentType:function(e){e!=this.model.contentType&&(this.element.empty(),this.model.contentType=e,this._renderButtonContent())},_setImagePosition:function(e){e!=t.ImagePosition.ImageRight&&e!=t.ImagePosition.ImageLeft&&e!=t.ImagePosition.ImageBottom&&e!=t.ImagePosition.ImageTop||this.model.contentType==t.ContentType.TextAndImage&&e!=this.model.imagePosition&&(this.element.empty(),this.model.imagePosition=e,this._renderButtonContent())},_setButtonMode:function(e){e!=t.ButtonMode.Split&&e!=t.ButtonMode.Dropdown||e!=this.model.buttonMode&&(this._destroy(),this.model.buttonMode=e,this._init())},_setArrowPosition:function(e){e!=t.ArrowPosition.Right&&e!=t.ArrowPosition.Left&&e!=t.ArrowPosition.Bottom&&e!=t.ArrowPosition.Top||(this.model.buttonMode==t.ButtonMode.Dropdown&&e!=this.model.arrowPosition?(this.model.arrowPosition=e,this.element.empty(),this._setSize(this.model.size),this.element.removeClass("e-droparrowright e-droparrowleft e-droparrowbottom e-droparrowtop"),this._renderButtonContent()):this.model.buttonMode==t.ButtonMode.Split&&e!=this.model.arrowPosition&&(this.model.arrowPosition=e,this._setSize(this.model.size),this.innerWrap.removeClass("e-splitarrowright e-splitarrowleft e-splitarrowbottom e-splitarrowtop"),this._setRTL(this.model.enableRTL)))},_setPopupPosition:function(e){this.model.popupPosition=e,"down"==this.model.popupPosition&&this.dropdownimg.addClass("e-arrow-sans-down").removeClass("e-arrow-sans-up"),"up"==this.model.popupPosition&&this.dropdownimg.addClass("e-arrow-sans-up").removeClass("e-arrow-sans-down")},_setRTL:function(e){if(this.model.buttonMode==t.ButtonMode.Split){switch(this.dropdownimg.removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down"),this.model.arrowPosition){case t.ArrowPosition.Right:this.innerWrap.addClass("e-splitarrowright");break;case t.ArrowPosition.Left:this.innerWrap.addClass("e-splitarrowleft");break;case t.ArrowPosition.Bottom:this.innerWrap.addClass("e-splitarrowbottom");break;case t.ArrowPosition.Top:this.innerWrap.addClass("e-splitarrowtop"),this.dropdownimg.addClass("e-arrow-sans-up").removeClass("e-arrow-sans-down")}1==e?(this.innerWrap.hasClass("e-splitarrowleft")?"":this.splitwrap.addClass("e-rtl e-btnrtl"))&&this._contextObj&&this._contextObj.model&&this._contextObj.element.addClass("e-rtl"):this.splitwrap.removeClass("e-rtl e-btnrtl")&&this._contextObj&&this._contextObj.model&&this._contextObj.element.removeClass("e-rtl")}else 1==e?this.splitwrap.addClass("e-rtl")&&this._contextObj&&this._contextObj.model&&this._contextObj.element.addClass("e-rtl"):this.splitwrap.removeClass("e-rtl")&&this._contextObj&&this._contextObj.model&&this._contextObj.element.removeClass("e-rtl");this.model.enableRTL=e,this._roundedCorner(this.model.showRoundedCorner)},_roundedCorner:function(t){t?(this.element.addClass("e-corner"),e(this.model.target).length>0&&e(this.model.target).addClass("e-corner")):(this.element.removeClass("e-corner"),e(this.model.target).length>0&&e(this.model.target).removeClass("e-corner"))},_controlStatus:function(e){e?this.enable():this.disable()},_setSkin:function(e){this.element.removeClass(this.model.cssClass),this.model.buttonMode==t.ButtonMode.Split&&(this.dropbutton.removeClass(this.model.cssClass),this.dropbutton.addClass(e)),this.element.addClass(e),this._contextObj&&this._contextObj.model&&this._contextObj.option("cssClass",e)},_initialize:function(){this.element.is("button")||this.element.is("ej-splitbutton")?this._render():this.element.removeClass("e-splitbutton"),this._timeout=null},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"disabled"==t&&"disabled"==e?i._controlStatus(!1):i.wrapper.attr(t,e)})},_render:function(){this.element.addClass(this.model.cssClass+" e-btn e-select e-split-btn "+(t.isTouchDevice()?"":"e-ntouch")),this._setAttributes(this.element[0]),null==this.model.text||""==this.model.text?this.model.text=this.element.text():this._setAttributes(this.element[0],{"aria-describedby":this.model.text}),this.model.buttonMode!=t.ButtonMode.Split&&this.model.buttonMode!=t.ButtonMode.Dropdown&&(this.model.buttonMode=t.ButtonMode.Split),this.model.arrowPosition!=t.ArrowPosition.Right&&this.model.arrowPosition!=t.ArrowPosition.Left&&this.model.arrowPosition!=t.ArrowPosition.Bottom&&this.model.arrowPosition!=t.ArrowPosition.Top&&(this.model.arrowPosition=t.ArrowPosition.Right),this.element.empty(),this.splitwrap=this.model.buttonMode==t.ButtonMode.Split?this._createElement("span",{class:"e-split e-widget"}):this._createElement("span",{class:"e-split e-drop e-widget"}),this.splitwrap.insertBefore(this.element),this.innerWrap=this._createElement("span",{class:"e-in-wrap e-box e-padding"}),this.splitwrap[0].appendChild(this.innerWrap[0]),this.wrapper=this.splitwrap,this.dropdownimg=this._createElement("span",{class:"e-icon e-arrow-sans-down"}),this.dropdownimage=this._createElement("span",{class:"e-icon e-arrow-sans-up"}),this.btnimgwrap=this._createElement("span",{class:"e-split-btn-div e-btn-span"}),"up"==this.model.popupPosition?this.btnimgwrap[0].appendChild(this.dropdownimage[0]):this.btnimgwrap[0].appendChild(this.dropdownimg[0]),this.model.buttonMode==t.ButtonMode.Split&&(this.dropbutton=t.buildTag("button.e-split-btn e-btn e-select "+this.model.cssClass+" e-drp-btn"+(t.isTouchDevice()?"":" e-ntouch"),"",{},{type:"button","data-role":"none",id:this.element[0].id+"drpbtn"}),this.dropbutton[0].appendChild(this.btnimgwrap[0]),this.dropbutton.insertAfter(this.element),this.model.contentType==t.ContentType.TextOnly?this.dropbutton.addClass("e-btn-txt"):this.dropbutton.addClass("e-rht-btn")),this._setSize(this.model.size),this.element.addClass("e-left-btn"),this._renderButtonContent(),this.model.buttonMode==t.ButtonMode.Dropdown?this.innerWrap[0].appendChild(this.element[0]):(this.innerWrap[0].appendChild(this.element[0]),this.innerWrap[0].appendChild(this.dropbutton[0])),null==this.model.target&&null!=this.model.targetID&&(this.model.target="#"+this.model.targetID),e(this.model.target).hide(),this._roundedCorner(this.model.showRoundedCorner),this._setRTL(this.model.enableRTL),this._addAttr(this.model.htmlAttributes)},_renderButtonContent:function(){if(this.textspan=t.buildTag("span.e-btntxt",this.model.text),this.majorimgtag=t.buildTag("span").addClass(this.model.prefixIcon),this.minorimgtag=t.buildTag("span").addClass(this.model.suffixIcon),this.imgtxtwrap=t.buildTag("span").addClass("e-btn-span"),this.model.contentType==t.ContentType.TextAndImage)switch(this.model.imagePosition){case t.ImagePosition.ImageRight:this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageLeft:this.imgtxtwrap.append(this.majorimgtag,this.textspan);break;case t.ImagePosition.ImageBottom:this.majorimgtag.css("display","inline-table"),this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageTop:this.majorimgtag.css("display","inline-table"),this.imgtxtwrap.append(this.majorimgtag,this.textspan)}else this.model.contentType==t.ContentType.ImageTextImage?this.imgtxtwrap.append(this.majorimgtag,this.textspan,this.minorimgtag):this.model.contentType==t.ContentType.ImageBoth?this.imgtxtwrap.append(this.majorimgtag,this.minorimgtag):this.model.contentType==t.ContentType.ImageOnly?this.imgtxtwrap.append(this.majorimgtag):(this.element.addClass("e-txt"),this.imgtxtwrap=this.model.text);this.model.buttonMode==t.ButtonMode.Dropdown?this._renderDropdownArrow():this.element.append(this.imgtxtwrap)},_renderDropdownArrow:function(){switch(this.btnimgwrap.css("position","absolute"),this.dropdownimg.removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down"),this.model.arrowPosition){case t.ArrowPosition.Right:this.element.addClass("e-droparrowright"),this.element.append(this.imgtxtwrap,this.btnimgwrap);break;case t.ArrowPosition.Left:this.element.addClass("e-droparrowleft"),this.element.append(this.btnimgwrap,this.imgtxtwrap);break;case t.ArrowPosition.Bottom:this.element.addClass("e-droparrowbottom"),this.element.append(this.imgtxtwrap,this.btnimgwrap);break;case t.ArrowPosition.Top:this.element.addClass("e-droparrowtop"),this.dropdownimg.addClass("e-arrow-sans-up").removeClass("e-arrow-sans-down"),this.element.append(this.btnimgwrap,this.imgtxtwrap)}},_setSize:function(e){switch(this.wrapper.css({height:"",width:""}),e){case"mini":case"small":case"medium":case"large":default:this._splitbtnSize(e)}this.model.arrowPosition!=t.ArrowPosition.Bottom&&this.model.arrowPosition!=t.ArrowPosition.Top||""!=this.model.height||this.splitwrap.addClass("e-btn-arrowsplit-"+e);var i,s=""===this.model.height?this.wrapper.outerHeight()+"px":this.model.height;this._splitbtnHeight(s),"normal"!==this.model.size?(i=""===this.model.width?this.wrapper.outerWidth()+"px":this.model.width,this._splitbtnWidth(i)):""!==this.model.width&&(i=this.model.width,this._splitbtnWidth(i))},_splitbtnSize:function(e){this.splitwrap.removeClass("e-btn-mini e-btn-medium e-btn-small e-btn-large e-btn-normal e-btn-arrowsplit-large e-btn-arrowsplit-small e-btn-arrowsplit-mini e-btn-arrowsplit-medium e-btn-arrowsplit-normal"),this.model.arrowPosition!=t.ArrowPosition.Left&&this.model.arrowPosition!=t.ArrowPosition.Right||this.splitwrap.addClass("e-btn-"+e)},_splitbtnHeight:function(e){""!=e&&null!=e||(e="30px"),this.splitwrap.css("height",e)},_splitbtnWidth:function(e){this.splitwrap.css("width",e)},_renderContxtMenu:function(){null!=this.model.target&&null==e(this.model.target).attr("id")&&"."==this.model.target.substring(0,1)&&e(this.model.target).attr("id",this.element.attr("id")+"_"+this.model.target.replace(".","")),e(this.model.target).ejMenu({menuType:t.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"",fields:this.model.fields,showArrow:!0,cssClass:"e-split "+this.model.cssClass,enableRTL:this.model.enableRTL}).on("ejMenuclose",e.proxy(this._onKeyDown,this)),this._contextObj=e(this.model.target).ejMenu("instance")},_onKeyDown:function(e){27==e.keyCode&&this._hide()},_itemClick:function(t){t={status:this.model.enabled,ID:t.ID,text:t.text},this._trigger("itemSelected",t),!e(t.element).hasClass("e-haschild")&&this._hide()},_itemMouseOver:function(e){this._trigger("itemMouseOver",e)},_itemMouseOut:function(e){this._trigger("itemMouseOut",e)},_wireEvents:function(){this._on(this.element,"click",this._btnMouseClick),this._on(this.element,"mousedown",this._btnMouseDown),this.model.buttonMode==t.ButtonMode.Split&&this._on(this.dropbutton,"click",this._btnMouseClick),this._on(e(document),"mousedown",this._docrhtclk)},_btnMouseClick:function(i){this._contextObj?!this._contextObj.model&&this._renderContxtMenu():this._renderContxtMenu();var s;if(!this.model.enabled)return!1;e(i.currentTarget).hasClass("e-disable")||(i.currentTarget.id!=this.element[0].id+"drpbtn"&&this.model.buttonMode==t.ButtonMode.Split?(s={status:this.model.enabled},this._trigger("click",s)):(!this.contstatus&&this._trigger("beforeOpen"),this.wrapper.addClass("e-active"),this.contstatus?this._hidecontext(i):(this._contextPosition(i),this._trigger("open"),this._on(e(window),"resize",this._OnWindowResize),this.contstatus=!0,this.element.on("click",e.proxy(this._hidecontext,this)),t.listenTouchEvent(e(document),t.startEvent(),this._documentClickHandler,!1,this),this._on(t.getScrollableParents(this.wrapper),"scroll",this._hidePopup))))},_OnWindowResize:function(e){this._contextPosition(e)},_contextPosition:function(i,s,a,r){if(this._contextObj.model){if(this._setPosition)var n=this._val;else var n=this._getXYpos(i);var o,l;l=this.model.buttonMode==t.ButtonMode.Split?this.dropbutton:this.element;var d=this._contextObj;o=n.x-(e(this.model.target).outerWidth()-(this.model.buttonMode==t.ButtonMode.Split?this.dropbutton.outerWidth():this.element.outerWidth())),this.model.enableRTL?n.x="left"==this.model.popupPosition||o<e(this.model.target).outerWidth()?n.x:o:n.x="left"==this.model.popupPosition||n.x+e(this.model.target).outerWidth()<e(window).width()?n.x:o,this._posright<0&&"left"==this.model.popupPosition&&(n.x=e(window).outerWidth()),d.option({click:e.proxy(this._itemClick,this),mouseover:e.proxy(this._itemMouseOver,this),mouseout:e.proxy(this._itemMouseOut,this)}),s?d.show(a,r,l,i):d.show(n.x,n.y,l,i)}},_getXYpos:function(i){var s,a,r,n,o;return s=this._getOffset(this.model.buttonMode==t.ButtonMode.Split?this.dropbutton:this.element),n="right"!=this.model.popupPosition||this.model.enableRTL||this.model.arrowPosition==t.ArrowPosition.Left||this.model.arrowPosition==t.ArrowPosition.Bottom||this.model.arrowPosition==t.ArrowPosition.Top?"left"!=this.model.popupPosition||!this.model.enableRTL&&this.model.arrowPosition==t.ArrowPosition.Right||this.model.arrowPosition==t.ArrowPosition.Bottom||this.model.arrowPosition==t.ArrowPosition.Top?s.left:s.left-e(this.model.target).outerWidth():this.model.buttonMode==t.ButtonMode.Split?s.left+this.dropbutton.outerWidth():s.left+this.element.outerWidth(),this._posright=e(window).width()-n-e(this.model.target).outerWidth(),this._posleft=n-e(this.model.target).outerHeight(),this._posrightht=e(window).height()-s.top-e(this.model.target).outerHeight(),a="right"==this.model.popupPosition&&this._posright<0||n<0?s.left:n,o=this.model.arrowPosition==t.ArrowPosition.Top||"up"==this.model.popupPosition?s.top-e(this.model.target).outerHeight()+1:this.model.arrowPosition!=t.ArrowPosition.Top&&this.model.arrowPosition!=t.ArrowPosition.Bottom&&((this.model.arrowPosition==t.ArrowPosition.Right!=("left"==this.model.popupPosition)||this.model.arrowPosition==t.ArrowPosition.Right&&this.model.enableRTL&&"left"==this.model.popupPosition)&&this.model.arrowPosition==t.ArrowPosition.Left!=("right"==this.model.popupPosition)||this.model.arrowPosition==t.ArrowPosition.Right&&this.model.enableRTL&&"left"==this.model.popupPosition)&&(!this.model.enableRTL&&"right"==this.model.popupPosition||"left"==this.model.popupPosition)?s.top:(this.model.buttonMode==t.ButtonMode.Split?s.top+this.dropbutton.outerHeight():s.top+this.element.outerHeight())-1,r="left"==this.model.popupPosition&&this._posrightht<0&&this._posright>0&&this._posleft<0?s.top-e(this.model.target).outerHeight():"left"==this.model.popupPosition&&this._posrightht<0&&this._posright>0?s.top+this.element.outerHeight()-e(this.model.target).outerHeight():("right"==this.model.popupPosition||"up"==this.model.popupPosition||this.model.popupPosition)&&this._posrightht<0&&this._posright<0?s.top-e(this.model.target).outerHeight():("right"==this.model.popupPosition||"left"==this.model.popupPosition)&&this._posrightht<0?s.top+this.element.outerHeight()-e(this.model.target).outerHeight():"right"==this.model.popupPosition&&this._posright<0&&this._posrightht>0?s.top+this.element.outerHeight():"down"==this.model.popupPosition&&this._posrightht<0&&this._posright>0?s.top-e(this.model.target).outerHeight():n<0||this._posright<0?s.top+this.element.outerHeight():o<0?this.model.buttonMode==t.ButtonMode.Split&&"up"==this.model.popupPosition&&this.model.arrowPosition!=t.ArrowPosition.Top?s.top+this.element.outerHeight()-1:s.top+(this.model.buttonMode==t.ButtonMode.Split?this.dropbutton.outerHeight()+this.element.outerHeight():this.element.outerHeight())-1:o,{x:a,y:r}},_getOffset:function(t){var i=t.offset();if("static"!=e("body").css("position")){var s=e("body").offset();i.left-=s.left,i.top-=s.top}return i},_btnMouseDown:function(t){e(t.currentTarget).hasClass("e-disable")||this._docrhtclk(t)},_hidePopup:function(e){this._contextObj&&this._contextObj.hide(e),this._hide(),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hidePopup)},_hide:function(){this.contstatus=!1,this.wrapper.removeClass("e-active"),this.element.off("click",e.proxy(this._hidecontext,this)),t.listenTouchEvent(e(document),t.startEvent(),this._documentClickHandler,!0,this),this._off(e(window),"resize",this._OnWindowResize),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hide),this._closeEvent()},_closeEvent:function(){this._trigger("close")},_hidecontext:function(t){((e(t.target).is(this.element)||e(t.target).is(this.dropbutton)||e(t.target).is(this.textspan)||e(t.target).is(this.dropdownimg)||e(t.target).is(this.btnimgwrap)||!e(t.target).is(this.majorimgtag)||!e(t.target).is(this.minorimgtag))&&!e(t.target).is(this.splitwrap)&&!e(t.target).parents().is(e(this.model.target))||this.element.hasClass("e-txt")||e(t.target).is(this.imgtxtwrap))&&this._hidePopup(t)},_documentClick:function(t){e(t.target).is(this.element)||e(t.target).is(this.dropbutton)||e(t.target).is(this.textspan)||e(t.target).is(this.dropdownimg)||e(t.target).is(this.btnimgwrap)||e(t.target).is(this.majorimgtag)||e(t.target).is(this.minorimgtag)||e(t.target).is(this.splitwrap)||e(t.target).parents().is(e(this.model.target))||!this.element.hasClass("e-txt")&&e(t.target).is(this.imgtxtwrap)||this._hidePopup(t)},_docrhtclk:function(e){var t;t=!1,e.button?t=2==e.button:e.which&&(t=3==e.which),e.target,t&&e.preventDefault()}}),t.ContentType={TextOnly:"textonly",ImageOnly:"imageonly",ImageBoth:"imageboth",TextAndImage:"textandimage",ImageTextImage:"imagetextimage"},t.ImagePosition={ImageRight:"imageright",ImageLeft:"imageleft",ImageTop:"imagetop",ImageBottom:"imagebottom"},t.ButtonSize={Mini:"mini",Small:"small",Medium:"medium",Large:"large"},t.ButtonMode={Split:"split",Dropdown:"dropdown"},t.ArrowPosition={Right:"right",Left:"left",Top:"top",Bottom:"bottom"}}(jQuery,Syncfusion),function(e,t,i){t.widget("ejMenu","ej.Menu",{element:null,model:null,validTags:["ul"],_setFirst:!1,_rootCss:"e-menu",angular:{terminal:!1},defaults:{height:"",width:"",animationType:"default",orientation:t.Orientation.Horizontal,menuType:"normalmenu",isResponsive:!0,contextMenuTarget:null,htmlAttributes:{},cssClass:"",openOnClick:!1,subMenuDirection:"none",enableCenterAlign:!1,showRootLevelArrows:!0,showSubLevelArrows:!0,enableAnimation:!0,container:null,enableSeparator:!0,enabled:!0,overflowHeight:"auto",overflowWidth:"auto",fields:{child:null,dataSource:null,query:null,tableName:null,id:"id",parentId:"parentId",text:"text",spriteCssClass:"spriteCssClass",url:"url",imageAttribute:"imageAttribute",htmlAttribute:"htmlAttribute",linkAttribute:"linkAttribute",imageUrl:"imageUrl"},enableRTL:!1,titleText:"Menu",locale:"en-US",excludeTarget:null,beforeOpen:null,open:null,close:null,mouseover:null,mouseout:null,click:null,keydown:null,overflowOpen:null,overflowClose:null,create:null,destroy:null},dataTypes:{animationType:"enum",cssClass:"string",titleText:"string",locale:"string",openOnClick:"boolean",enabled:"boolean",enableCenterAlign:"boolean",showArrow:"boolean",showRootLevelArrows:"boolean",showSubLevelArrows:"boolean",enableSeparator:"boolean",isResponsive:"boolean",enableRTL:"boolean",enableAnimation:"boolean",fields:{dataSource:"data",query:"data",child:"data"},excludeTarget:"string",htmlAttributes:"data"},_setModel:function(t){for(var i in t)switch(i){case"menuType":t[i]=this.model.menuType;break;case"fields":this._wireEvents("_off"),this.element.empty().insertBefore(this.wrapper),this.wrapper.remove(),e.extend(this.model.fields,t[i]),this._intializeData(),this.model.enabled||this._wireEvents("_off");break;case"orientation":this._setOrientation(t[i]);break;case"showRootLevelArrows":this._addArrow(t[i],this.model.showSubLevelArrows);break;case"showSubLevelArrows":this._addArrow(this.model.showRootLevelArrows,t[i]);break;case"enableSeparator":this._setSeparator(t[i]);break;case"height":this._setHeight(t[i]);break;case"width":this._setWidth(t[i]);break;case"cssClass":this._setSkin(t[i]);break;case"isResponsive":this.model.isResponsive?this._responsiveLayout():(e(this.resWrap).remove(),e(this.wrapper).removeClass("e-menu-responsive"),e(this.element).removeClass("e-menu-responsive"),this.resWrap=null);break;case"htmlAttributes":this._addAttr(t[i]);break;case"enableRTL":this._setRTL(t[i]);break;case"enableCenterAlign":this._centerAlign(t[i]);break;case"excludeTarget":this.model.excludeTarget=t[i];break;case"enabled":this.model.enabled=t[i],this._controlStatus(t[i]);break;case"animationType":this._setAnimation(t[i]);break;case"enableAnimation":this.model.enableAnimation=t[i];break;case"openOnClick":this._hoverOpen=!t[i],this._hoverClose=!t[i];break;case"subMenuDirection":this._setSubMenuDirection(this.model.subMenuDirection);break;case"titleText":this._titleText(t[i]);break;case"locale":this.model.locale=t[i],this._updateLocalConstant(),this._setLocale();break;case"overflowHeight":this._setOverflowDimensions("height",t[i]);break;case"overflowWidth":this._setOverflowDimensions("width",t[i])}},_updateLocalConstant:function(){this._localizedLabels=t.getLocalizedConstants("ej.Menu",this.model.locale)},_setLocale:function(){this._titleText(this._localizedLabels.titleText)},_titleText:function(i){this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&e(this.label).text(i)},_destroy:function(){this.model.menuType==t.MenuType.ContextMenu?this._referenceElement.append(this._cloneElement):this._cloneElement.insertBefore(this.wrapper),this._cloneElement.removeClass("e-menu e-js"),this.wrapper.remove()},_init:function(){this._cloneElement=this.element.clone(),this.element.css("visibility","hidden"),this._setValues(),this._intializeData(),this.element.css("visibility","visible")},_setValues:function(){this._mouseOver=!0,this._hoverOpen=!0,this._hoverClose=!0,this._isMenuOpen=!1,this._hideSpeed=100,this._showSpeed=100,this._isSubMenuOpen=!1,this._isContextMenuOpen=!1,this._disabledMenuItems=new Array,this._hiddenMenuItems=new Array,this._delayMenuHover=0,this._delaySubMenuHover=0,this._delaySubMenuShow=0,this._preventContextOpen=!0,this._setAnimation(this.model.animationType),this._isFocused=!0,this._menuOverflowItems=new Array,this._menuHeaderItems=new Array,this._menuCloneItems=new Array,this._itemWidth=0},_intializeData:function(){t.isNullOrUndefined(this.model.fields)||null==this.model.fields.dataSource?(this._renderMenu(),this._wireEvents("_on"),this._calculateOverflowItems()):(this._generateTemplate(this.model.fields.dataSource),this._renderMenu())},_renderMenu:function(){this._renderControl(),this._addArrow(this.model.showRootLevelArrows,this.model.showSubLevelArrows),this._renderArrow(),this._intializeMenu(),this._itemWidth=this.element.width(),this.model.isResponsive&&this._ensureResponsiveClasses(e(window).width()<767),"horizontal"==this.model.orientation&&(this._on(this.element.parent().find("span.e-check-wrap.e-icon"),"click",this._mobileResponsiveMenu),null!=this.model.fields.dataSource&&this._calculateOverflowItems())},_renderControl:function(){"normalmenu"==this.model.menuType?(this.wrapper=t.buildTag("div"),this.wrapper.addClass(this.model.cssClass+" e-menu-wrap")):this.wrapper=t.buildTag("div.e-menu-wrap"),this.model.isResponsive&&this._responsiveLayout(),this.model.menuType!=t.MenuType.ContextMenu&&(this.wrapper.insertBefore(this.element),this.wrapper.append(this.element)),this.element.addClass("e-menu e-widget e-box").attr({role:"menu",tabindex:0}),this._addAttr(this.model.htmlAttributes),this.model.enableRTL&&this._setRTL(this.model.enableRTL),this._setSubMenuDirection(this.model.subMenuDirection),"normalmenu"==this.model.menuType?"horizontal"==this.model.orientation?this.element.addClass("e-horizontal"):this.element.addClass("e-vertical"):this._contextMenu_Template(),this._addClass(),this.model.enableCenterAlign&&this._centerAlign(this.model.enableCenterAlign),this.model.enableSeparator&&this._setSeparator(!0),!this.model.enabled&&this.disable()},_renderPopupWrapper:function(e){if(this._ensureOverflowPopup()){this.popupWrapper=t.buildTag("div.e-menu-popwrap"),this.popupWrapper.insertAfter(this.element);var i="number"==typeof value?this.model.overflowHeight+"px":this.model.overflowHeight,s="number"==typeof value?this.model.overflowWidth+"px":this.model.overflowWidth;this.popupWrapper.css({height:i,width:s}),this.popupWrapper.hide(),this._addOverflowItems()}},_calculateOverflowItems:function(i){if(this._ensureOverflowPopup()){this.element.find("li.e-list").removeClass("e-menu-show"),e(this.lastelement).removeClass("e-last"),this._menuHeaderItems=[];var s=this.element.outerWidth();this.element.find("li.e-ham-wrap").length>0&&(this._itemWidth<=this.element.width()||this._itemWidth>=this.element.width()&&!this._isOverflowPopupOpen())&&(t.isNullOrUndefined(this.popupWrapper)||this.popupWrapper.hide()),this._renderHamburgerIcon(),this.element.find("li.e-ham-wrap").css({display:"list-item"});var a=this.element.find("li.e-ham-wrap").outerWidth(),r=0,n=!0;this.element.find("li.e-ham-wrap").hide(),this._menuHeaderItems=this.element.find(">li.e-list"),this._menuOverflowItems=[];for(var o=0;o<this._menuHeaderItems.length;o++){var l=e(this._menuHeaderItems[o]);if((r+=l.outerWidth())<s)l.removeClass("e-menu-hide"),this.element.find(">li.e-list.e-haschild>ul").find("li.e-haschild").find("span.e-icon.e-arrowhead-down").removeClass("e-arrowhead-down").addClass("e-arrowhead-right"),this.model.enableSeparator&&this._setSeparator(!0);else{if(n){n=!1,this.element.find("li.e-ham-wrap").css({display:"list-item"}),r=r-l.outerWidth()+a,o>1&&(r-=e(this._menuHeaderItems[o-1]).outerWidth(),o-=2);continue}this._menuOverflowItems.push(e(l).clone(!0)),l.addClass("e-menu-hide")}}this._menuOverflowItems.length>0?(this._renderHamburgerIcon(),e(".e-menu-popwrap").length?this._addOverflowItems():this._renderPopupWrapper(),this.lastelement=this.element.find(">li.e-list:visible").last().addClass("e-last"),this.element.find(">li.e-list.e-haschild>ul").find("li.e-haschild").find("span.e-icon.e-arrowhead-down").removeClass("e-arrowhead-down").addClass("e-arrowhead-right")):0==this._menuOverflowItems.length&&e("li.e-ham-wrap").length>0&&this.element.find("li.e-ham-wrap").remove()}("vertical"==this.model.orientation||this.model.menuType==t.MenuType.ContextMenu&&e(window).width()>=768&&this.model.isResponsive)&&this.element.find("span.e-icon.e-arrowhead-down").removeClass("e-arrowhead-down").addClass("e-arrowhead-right")},_renderHamburgerIcon:function(){if(this._ensureOverflowPopup()&&0==this.element.find("li.e-ham-wrap").length){var i=t.buildTag("li.e-ham-wrap"),s=t.buildTag("div");this.hamburgerspan=t.buildTag("span.e-hamburger"),s.append(this.hamburgerspan),i.append(s),this.element.append(i),0!=this.model.height?this._setHeight(this.model.height):e("li.e-ham-wrap").css({height:this.element.find("li.e-list").first().height()}),this._on(this.element.find("li.e-ham-wrap"),"click",this._overflowOpen)}},_addOverflowItems:function(){if(this._ensureOverflowPopup()&&e(".e-menu-popwrap").length>0&&!t.isNullOrUndefined(this.popupWrapper)){
this.popupWrapper.empty(),this._menuCloneItems.length=0;for(var i=0;i<this._menuOverflowItems.length;i++)this._menuCloneItems.push(e(this._menuOverflowItems[i]).clone(!0));this.ulTag=t.buildTag("ul"),this.ulTag.addClass("e-menu e-js e-responsive e-widget e-box e-vertical"),this.popupWrapper.append(this.ulTag);for(var i=0;i<this._menuCloneItems.length;i++)e(this._menuCloneItems[i]).hasClass("e-haschild")&&(e(this._menuCloneItems[i]).find("span.e-icon").removeClass("e-arrowhead-down e-arrowhead-right").addClass("e-arrowhead-down"),e(this._menuCloneItems[i]).children("span.e-menu-arrow.e-menu-left").remove()),this.ulTag.append(this._menuCloneItems[i]);e(this.ulTag).children("li").removeClass("e-menu-hide");if(Math.round(this.popupWrapper.width())>0){var s=this.popupWrapper.innerWidth();this.popupWrapper.find("ul.e-menu").css({width:s+"px"})}this.model.enableSeparator&&this._setSeparator(!0)}},_overflowOpen:function(e){if(this._isOverflowPopupOpen()){var i=t.util.getOffset(this.element),s=i.left+(this.model.enableRTL?0:this.element.outerWidth()-this.popupWrapper.outerWidth()),a=i.top+this.element.outerHeight();!this.wrapper.parent().length||"absolute"!=this.wrapper.parent().css("position")&&"relative"!=this.wrapper.parent().css("position")||(i=t.util.getOffset(this.wrapper.parent()),s-=i.left,a-=i.top),this.popupWrapper.css({left:s,top:a}),this.popupWrapper.show(),this._trigger("overflowOpen",{e:e})}else this._overflowClose(e)},_overflowClose:function(e){this._ensureOverflowPopup()&&!t.isNullOrUndefined(this.popupWrapper)&&(this.popupWrapper.find("li.e-list").removeClass(".e-mhover.e-active.e-mfocused"),this._hideAnimation(this.popupWrapper.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim),this.popupWrapper.hide(),this._trigger("overflowClose",{e:e}))},_isOverflowPopupOpen:function(){if(e(this.popupWrapper).length>0)return"none"==this.popupWrapper.css("display")},_removePopup:function(t){e(window).width()<767&&this.model.isResponsive&&(this._ensureResponsiveClasses(e(window).width()),this.element.find("li.e-ham-wrap").length>0&&this.popupWrapper.length>0&&(this.element.find("li.e-ham-wrap").remove(),e(".e-menu-popwrap").remove(),this.element.find("li.e-list").addClass("e-menu-show")))},_mobileResponsiveMenu:function(e){this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&"none"==this.element.css("display")?this.element.removeClass("e-res-hide").addClass("e-res-show"):this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&"none"!=this.element.css("display")&&this.element.removeClass("e-res-show").addClass("e-res-hide")},_ensureOverflowPopup:function(i){return this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&e(window).width()>=768&&this.model.isResponsive},_onResize:function(t){this.element.find("li.e-ham-wrap").hide(),e(window).width()>=768?this._calculateOverflowItems():this._removePopup()},_ensureResponsiveClasses:function(e){e&&this.element.find("span.e-icon").hasClass("e-arrowhead-right")&&this.element.find("span.e-icon.e-arrowhead-right").removeClass("e-arrowhead-right").addClass("e-arrowhead-down")},_responsiveLayout:function(){this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&(this.wrapper.addClass("e-menu-responsive"),this.element.addClass("e-menu-responsive"),this.resWrap=t.buildTag("span.e-menu-res-wrap e-menu-responsive"),this.inResWrap=t.buildTag("span.e-in-wrap e-box e-menu-res-in-wrap"),this.label=t.buildTag("span.e-res-title").html("en-US"==this.model.locale?this.model.titleText:t.Menu.Locale[this.model.locale]&&t.Menu.Locale[this.model.locale].titleText?t.Menu.Locale[this.model.locale].titleText:this.model.titleText),this.check=t.buildTag("span.e-check-wrap e-icon"),this.wrapper.append(this.resWrap),this.resWrap.append(this.inResWrap),this.inResWrap.append(this.label).append(this.check))},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_oncheck:function(e){var t=this.element.parents(".e-menu-wrap").children(".e-menu");e.isChecked?t.removeClass("e-res-hide").addClass("e-res-show"):t.removeClass("e-res-show").addClass("e-res-hide")},_addClass:function(){this.element.find('li:has("> ul")').find("> a,> span").addClass("aschild"),this.element.find(">li").addClass("e-list").attr({role:"menuitem"}),this.element.find("li").find(">a, >span").addClass("e-menulink");for(var t,i,s=this.element.find(".e-list a.aschild"),a=this.element.find(".e-list span.aschild"),r=0;r<s.length;r++)t=e(s[r]),t.siblings().attr({"aria-hidden":!0}),t.parent().attr({"aria-haspopup":!0,role:"menuitem"}).addClass("e-haschild"),t.siblings("ul").children("li").addClass("e-list").attr("role","menuitem");for(var r=0;r<a.length;r++)i=e(a[r]),i.siblings().attr({"aria-hidden":!0}),i.parent().attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),i.siblings("ul").children("li").addClass("e-list").attr("role","menuitem")},_renderArrow:function(){if(this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&0==e(e(this.element).find("span.e-menu-arrow")).length){var i=t.buildTag("span.e-menu-arrow e-menu-left");e(i).append("<span class='e-arrowMenuOuter'></span>").append("<span class='e-arrowMenuInner'></span>"),this.element.find(">li.e-list.e-haschild").append(i)}},_generateTemplate:function(e){var i,s=this;e instanceof t.DataManager?(i=e.executeQuery(this._columnToSelect(this.model.fields)),i.done(function(e){s._odataFlag=!0,s._generateItemTemplate(e.result),0!=s.model.height&&s._setHeight(s.model.height),s._wireEvents("_on")})):(s._odataFlag=!1,this._generateItemTemplate(s.model.fields.dataSource),this._wireEvents("_on"))},_generateItemTemplate:function(e){for(var t=0;t<e.length;t++)if(null==e[t][this.model.fields.parentId]||0==e[t][this.model.fields.parentId]){var i=this._menuTemplate(e[t],e,this.model.fields);this.element.append(i)}},_menuTemplate:function(i,s,a){var r,n,o,l;if(r=e(document.createElement("li")),r.attr("class","e-list"),i[a.htmlAttribute]&&this._setAttributes(i[a.htmlAttribute],r),n=e(document.createElement("a")),n.attr("class","e-menulink"),i[a.imageUrl]&&""!=i[a.imageUrl]?(o=e(document.createElement("img")),o.attr("src",i[a.imageUrl]),i[a.imageAttribute]&&this._setAttributes(i[a.imageAttribute],o),n.append(o)):i[a.spriteCssClass]&&""!=i[a.spriteCssClass]&&(l=e(document.createElement("span")),l.addClass(i[a.spriteCssClass]),n.append(l)),n.append(i[a.text]),i[a.linkAttribute]&&this._setAttributes(i[a.linkAttribute],n),i[a.url]&&n.attr("href",i[a.url]),r.append(n),i[a.id]&&r.prop("id",i[a.id]),t.isNullOrUndefined(a.child)){if(!this._odataFlag){var d=t.DataManager(a.dataSource).executeLocal(t.Query().where(a.parentId,t.FilterOperators.equal,i[a.id]));if(d&&d.length>0){for(var h=t.buildTag("ul"),c=0;c<d.length;c++){var u=this._menuTemplate(d[c],a.dataSource,a);h.append(u)}r.append(h)}}}else if(this._odataFlag=!0,a.child.dataSource instanceof t.DataManager){var p=this,m=t.Query();e(r).attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),m=this._columnToSelect(a.child),m.where(a.child.parentId,t.FilterOperators.equal,i[a.id]);var g=a.child.dataSource.executeQuery(m);g.done(function(t){var i=t.result;if(i&&i.length>0){for(var s=e(document.createElement("ul")),n=0;n<i.length;n++){var o=p._menuTemplate(i[n],a.child.dataSource,a.child);s.append(o)}r.append(s),e(r).children("a").addClass("aschild"),e(r).parent().hasClass("e-menu")&&p.model.showRootLevelArrows?e(r).children("a.aschild").append(e("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):p.model.showSubLevelArrows&&e(r).children("a.aschild").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"),0!=p.model.height&&p._setHeight(p.model.height)}}),g.then(function(e){p._renderArrow()})}else{var d;if(t.isNullOrUndefined(i.child)||(t.isPlainObject(i.child)?d=t.DataManager(a.child.dataSource).executeLocal(t.Query().where(a.child.parentId,t.FilterOperators.equal,i[a.id])):i.child instanceof Array&&(d=i.child)),d&&d.length>0){for(var h=e(document.createElement("ul")),c=0;c<d.length;c++){var u=this._menuTemplate(d[c],a.child.dataSource,a.child);h.append(u)}r.append(h)}}return r},_setAttributes:function(e,t){for(var i in e)"class"==i?t.addClass(e[i]):t.attr(i,e[i])},_addArrow:function(t,i){if(t){var s="horizontal"==this.model.orientation?"e-arrowhead-down":"e-arrowhead-right";this.element.find('>li.e-list:has("> ul")').children("a").append(e("<span>").addClass("e-icon "+s)).addClass("e-arrow-space")}else this.element.find('>li.e-list:has("> ul")').children("a").removeClass("e-arrow-space").children("span.e-icon").remove();i?this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a").removeClass("e-arrow-space").children("span.e-icon").remove()},_intializeMenu:function(){0!=this.model.height&&this._setHeight(this.model.height),0!=this.model.width&&this._setWidth(this.model.width),"contextmenu"==this.model.menuType&&(this.model.openOnClick=!1),this.model.openOnClick&&(this._hoverOpen=!1,this._hoverClose=!1)},_setOrientation:function(e){"horizontal"==e?this.element.removeClass("e-vertical e-horizontal").addClass("e-horizontal"):this.element.removeClass("e-horizontal e-vertical").addClass("e-vertical"),"vertical"==e&&this._removePopup()},_setHeight:function(i){"horizontal"==this.model.orientation&&"auto"!==i?(i="number"==typeof i?i+"px":i,this.element.find("> li").find(">a:first").css("line-height",i),this.model.showRootLevelArrows&&this.element.find("> li").find(">a:first").find("> span:first").css({"line-height":i,top:"0px"}),this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&e("li.e-ham-wrap").length>0&&(this.element.find("li.e-ham-wrap").children("div").css({"line-height":i}),this.element.find("li.e-ham-wrap").css({height:i}),this.popupWrapper&&this.popupWrapper.find("a.e-menulink").css({"line-height":i}))):this.element.height(i)},_setWidth:function(e){this.element.css("width",e),"horizontal"===this.model.orientation&&"auto"!==e&&this.model.isResponsive&&this.resWrap.css("width",e),"horizontal"==this.model.orientation&&this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&this._calculateOverflowItems()},_setOverflowDimensions:function(e,i){this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&(i="number"==typeof i?i+"px":i),"height"==e?this.popupWrapper.css({height:i}):"width"==e&&this.popupWrapper.css({width:i}),this._addOverflowItems()},_setRTL:function(e){e?this.element.removeClass("e-rtl").addClass("e-rtl"):this.element.removeClass("e-rtl"),e&&"horizontal"===this.model.orientation?this.wrapper.removeClass("e-menu-rtl").addClass("e-menu-rtl"):this.wrapper.removeClass("e-menu-rtl"),this.model.subMenuDirection=e?"left":"right"},_setSubMenuDirection:function(e){"left"!=e&&"right"!=e&&(this.model.subMenuDirection=this.model.enableRTL?"left":"right")},_setAnimation:function(e){"none"===e?(this._showAnim="none",this._hideAnim="none"):(this._showAnim="slideDown",this._hideAnim="slideUp")},_controlStatus:function(e){1!=e?this.disable():this.enable()},_centerAlign:function(e){"horizontal"==this.model.orientation&&e?this.element.css("text-align","center"):this.element.css("text-align","inherit")},_columnToSelect:function(e){var i=[],s=t.Query();if(t.isNullOrUndefined(e.query)){for(var a in e)"tableName"!==a&&"child"!==a&&"dataSource"!==a&&e[a]&&i.push(e[a]);i.length>0&&s.select(i),this.model.fields.dataSource.dataSource.url.match(e.tableName+"$")||!t.isNullOrUndefined(e.tableName)&&s.from(e.tableName)}else s=e.query;return s},_max_zindex:function(){var t,i,s,a;return"contextmenu"==this.model.menuType?(t=e(this._targetElement).parents(),t.push(this._targetElement)):t=e(this.element).parents(),i=e("body").children(),a=i.index(this.popup),i.splice(a,1),e(i).each(function(e,i){t.push(i)}),s=Math.max.apply(s,e.map(t,function(t,i){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),!s||s<1e4?s=1e4:s+=1,s},_recursiveFunction:function(t,i){var s=this,a=!1;e.each(t,function(e,t){return t.Text==i?(s.selectedItem=t,a=!0,!1):(null!=t.ChildItems&&s._recursiveFunction(t.ChildItems,i),!a&&void 0)})},_contextMenu_Template:function(){if(""!=this.element[0].id)var t=e(".e-menu-wrap #"+this.element[0].id).get(0);t&&e(t.parentElement).remove(),this.model.orientation="vertical",this.element.addClass(this.model.cssClass+" e-context"),this.element.css("display","none"),this._referenceElement=this.element.parent(),e("body").append(this.element),this.wrapper.insertBefore(this.element),this.wrapper.append(this.element)},_closeMenu:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim)},_onMenuIntent:function(e,t,i){t._delayMenuHover=window.setTimeout(function(){if(1==t._mouseOver&&i){var s=t._showAnim,a=t._hideAnim;t._showSpeed,t._hideSpeed;t._show(e,s,a)}},this._showSpeed)},_onHide:function(e,t,i){t._delaySubMenuHover=window.setTimeout(function(){if(0==t._mouseOver&&i){t._id,t._hideAnim,t._hideSpeed;t._closeAll()}},t._hideSpeed)},_subMenuPos:function(t,i){var s,a,r=e(t).offset(),n=r.left,o=e("ul:first",t),l=e(t).outerWidth();if(null==r||void 0==r)return!1;var d=o.outerWidth()+1,h=this.model.container?e(this.model.container).width()+e(document).scrollLeft():document.documentElement.clientWidth+e(document).scrollLeft();if("normalmenu"==this.model.menuType)if(e(t.parentNode).is(this.element))"horizontal"==this.model.orientation?(o.css("top",e(t).outerHeight()+"px"),this.model.enableRTL?(a=n+l-d<0?n+l-d:1,o.css({left:"auto",right:a+"px"})):(s=h<n+d?n+d-h:1,o.css("left",-1*s+"px"))):"left"==i&&n>d||"right"==i&&h<=r.left+l+d&&n>d?o.css("left",-(d+4)+"px"):o.css("left",e(t).outerWidth()+4+"px");else if("left"==i&&n>d||"right"==i&&h<=r.left+l+d&&n>d)o.css("left",-(d+4)+"px");else{o.css("left",e(t).outerWidth()+4+"px");var c=o.outerHeight(),u=e(window).height(),p=u-(r.top-e(window).scrollTop());if(u<c){var m=r.top-e(window).scrollTop();o.css("top",4-m+"px")}else if(p<c){var m=p-c;o.css("top",m-2+"px")}else o.css("top","")}else{if((h-=r.left+2*d+4)<0){var g=null==d?"-206.5px":"-"+(d+5)+"px";o.css("left",g)}else o.parent("li.e-list").parent("ul").width()&&"right"==i?o.css("left",o.parent("li.e-list").parent("ul").width()+4+"px"):r.left>d&&o.css("left",-(d+4)+"px");var c=o.outerHeight();if(r.top+c>e(window).height()){var f=-c+e(t).outerHeight();c>r.top+e(t).outerHeight()/2?o.css("top",-c/2+"px"):o.css("top",f+"px")}else o.css("top","0px")}},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e+" e-menu-wrap")},_setSeparator:function(i){i?(this.element.addClass("e-separator"),e(".e-menu-popwrap").length>0&&!t.isNullOrUndefined(this.ulTag)&&this.ulTag.addClass("e-separator")):this.element.removeClass("e-separator")},_contextMenuEvents:function(t){this[t](e(this.model.contextMenuTarget),"mouseup taphold",this._ContextMenuHandler),this[t](this.element,"contextmenu",this._onDefaultPreventer),this[t](e(this.model.contextMenuTarget),"contextmenu",this._onDefaultPreventer),this[t](e(document),"mousedown",this._onContextClose)},_show:function(t,i,s){var a,r=e("> ul",t),n=this._max_zindex();r.attr({"aria-hidden":!1}),this._hideAnimation(e(t).siblings().find(" > ul:visible"),s),e.inArray(this._disabledMenuItems,t)>-1||("none"!=r.css("display")?(a=this.model.openOnClick?e(r):r.children().find("> ul"),this._hideAnimation(a,s)):e("> ul",t).children().find("> ul").hide(),this._subMenuPos(t,this.model.subMenuDirection),r.css({"z-index":n+1}),e(t).children("span.e-menu-arrow").css({"z-index":n+2}),"block"==e("> ul",t).css("display")||e(t).hasClass("e-disable-item")||(this._showAnimation(r,i),r.closest("li").addClass("e-active e-mfocused")),e(t).siblings("li.e-active").length>0&&e(t).siblings("li.e-active").removeClass("e-active e-mfocused"))},_closeAll:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim),this._hideAnimation(this.element.find("> ul:visible"),this._hideAnim)},_showAnimation:function(e,t){switch(t){case"slideDown":e.slideDown(this.model.enableAnimation?200:0);break;case"none":e.css("display","block")}},_hideAnimation:function(t,i){switch(i){case"slideUp":e(t).attr({"aria-hidden":!0}),t.slideUp(this.model.enableAnimation?100:0);break;case"none":t.css("display","none")}t.closest("li").removeClass("e-active e-mfocused")},_removeValue:function(i,s){var a,r=t.browserInfo();a="8.0"===r.version&&"msie"===r.name?i[0].outerText:i[0].textContent;for(var n=e(s).length,o=0,l=0==e(s).children("a").length?e(s).children("span"):e(s).children("a");o<=n;){if(e(l[o]).text()===a)return o;o++}},_createSubLevelItem:function(t,i){var s;s=e(document.createElement("ul")),s.append(i),t.append(s),t.attr({role:"menu","aria-haspopup":"true"}),t.addClass("e-haschild"),this.element.find('li:has("> ul")').find("> a,>span").addClass("aschild e-arrow-space"),this._insertArrows(s)},_insertArrows:function(t){this.model.showRootLevelArrows?t.find(">a,>span").append(e("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):t.find(">a,>span").removeClass("e-arrow-space").find(">span.e-icon").remove(),this.model.showSubLevelArrows?t.parent("li.e-list:has(>ul)").children("a,span").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):t.parent("li.e-list:has(>ul)").children("a,span").removeClass("e-arrow-space").find(">span.e-icon").remove()},_createMenuItem:function(t){var i,s,a,r;return i=e(document.createElement("li")),i.attr({class:"e-list",role:"menuitem"}),t.htmlAttribute&&this._setAttributes(t.htmlAttribute,i),t.text&&""!=t.text&&(s=e(document.createElement("a")),s.attr({class:"e-menulink"}),t.imageUrl&&""!=t.imageUrl?(a=e(document.createElement("img")),a.attr("src",t.imageUrl),t.imageAttribute&&this._setAttributes(t.imageAttribute,a),s.append(a)):t.spriteCssClass&&""!=t.spriteCssClass&&(r=e(document.createElement("span")),r.addClass(t.spriteCssClass),s.append(r)),s.append(t.text),t.linkAttribute&&this._setAttributes(t.linkAttribute,s),t.url&&s.attr("href",t.url),i.append(s)),t.id&&i.prop("id",t.id),this.model.enabled||i.addClass("e-disable-item"),i},_insertNode:function(i,s,a){var r=0,n=0,o=0,l=[];for(e(s).is(this.element)?l.push(this.element):"string"==typeof s?l.push(this.element.find(s)):void 0===s?l.push(this.element):l.push(s),n=0;n<l.length;n++)for(o=0;o<l[n].length;o++)for(r=0;r<i.length&&!t.isNullOrUndefined(i[r]);r++)this._addItem(i[r],l[n][o],a)},_addItem:function(t,i,s){var a,r;switch(this._wireEvents("_off"),a=this._createMenuItem(t),i=e("default"===i?"#"+t.parentId:i),s){case"insert":r=e(i).is(this.element)?i:i.children("ul"),0!=r.length?r.append(a):this._createSubLevelItem(i,a);break;case"insertBefore":e(i).is(this.element)?i.prepend(a):a.insertBefore(i);break;case"insertAfter":e(i).is(this.element)?i.append(a):a.insertAfter(i)}this._wireEvents("_on")},_removeItem:function(e){0==e.siblings("li").length?(e.closest("ul").siblings("a.aschild").removeClass("aschild e-arrow-space").children("span.e-icon").remove(),e.closest("ul").hasClass("e-menu")?e.remove():e.closest("ul").remove()):e.remove()},_hiddenElement:function(t){t.length>0&&-1==e.inArray(t[0],this._hiddenMenuItems)&&(t.addClass("e-hidden-item"),this._hiddenMenuItems.push(t[0]))},_showElement:function(t){t.length>0&&e.inArray(t[0],this._hiddenMenuItems)>-1&&(t.removeClass("e-hidden-item"),this._hiddenMenuItems.splice(this._hiddenMenuItems.indexOf(t[0]),1))},_getNodeByID:function(i){return t.isNullOrUndefined(this.popupWrapper)?"object"!=typeof i&&""!=i&&(i=this.element.find(".e-list"+i)):"object"!=typeof i&&""!=i&&(i=this.popupWrapper.children().find(".e-list"+i)),e(i)},_processItems:function(t,i){for(var s=this._getNodeByID(t),a=0;a<s.length;a++)i?this._showElement(e(s[a])):this._hiddenElement(e(s[a]))},insert:function(e,t){this._insertNode(e,t,"insert")},insertBefore:function(e,t){this._insertNode(e,t,"insertBefore")},insertAfter:function(e,t){this._insertNode(e,t,"insertAfter")},remove:function(t){var i=0,s=0;for(i=0;i<t.length;i++)for(t[i]="string"==typeof t[i]?this.element.find(t[i]):t[i],s=0;s<t[i].length;s++)"LI"===t[i][s].tagName||"UL"===t[i][s].tagName?this._removeItem(e(t[i][s])):t[i][s].remove()},showContextMenu:function(i,s,a,r,n){if(this._closeMenu(),this._eventArgs=r,t.isNullOrUndefined(r)||!this._checkForExclusion(r.target)){if(this._trigger("beforeOpen",{target:a,events:r}))return!1;if(this._preventContextOpen){if(t.isNullOrUndefined(a)?t.isNullOrUndefined(target)?this._targetElement=this.element:this._targetElement=target:this._targetElement=a,n){var o=this._calculateContextMenuPosition(r);i=o.X,s=o.Y}this.element.css({left:i,top:s}),this.element.css({"z-index":this._max_zindex()+1}),this._showAnimation(this.element,this._showAnim),this._isContextMenuOpen=!0,this.element.focus(),this._trigger("open",{target:a}),this._on(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)}return!1}},_checkForExclusion:function(i){if(!t.isNullOrUndefined(this.model.excludeTarget))for(var s=this.model.excludeTarget.split(","),a=0;a<s.length;a++)if(e(i).closest(this.model.excludeTarget).is(e.trim(s[a])))return!0},hideContextMenu:function(i){this._closeMenu(),this.element.find(".e-mhover").removeClass("e-mhover"),this.element.find(".e-mfocused").removeClass("e-mfocused"),this._hideAnimation(this.element,this._hideAnim),this._isContextMenuOpen=!1,this._trigger("close",e.extend({events:i},i)),this._off(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)},disableItem:function(t){var i=e(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return e.trim(e(this).text())===t});i.length>0&&!(e.inArray(i.parent()[0],this._disabledMenuItems)>-1)&&(i.parent().addClass("e-disable-item").attr({"aria-disabled":!0}),i.parent().find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(i.parent()[0]))},disableItemByID:function(t){if(t&&""!=t){var i=this.element.find("#"+t)?this.element.find("#"+t)[0]:void 0;!i||e.inArray(i,this._disabledMenuItems)>-1||(e(i).addClass("e-disable-item").attr({"aria-disabled":!0}),e(i).find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(i))}},getHiddenItems:function(){return this._hiddenMenuItems},hideItems:function(e){if("object"==typeof e&&void 0!==e.length)for(var t=0;t<e.length;t++)this._processItems(e[t],!1);else this._processItems(e,!1)},showItems:function(e){if("object"==typeof e&&void 0!==e.length)for(var t=0;t<e.length;t++)this._processItems(e[t],!0);else this._processItems(e,!0)},enableItem:function(t){var i=e(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return e.trim(e(this).text())===t});if(i.length>0&&e.inArray(i.parent()[0],this._disabledMenuItems)>-1){i.parent().removeClass("e-disable-item").attr({"aria-disabled":!1}),i.parent().find(">a.aschild span.e-icon").removeClass("e-disable");var s=this._removeValue(i,this._disabledMenuItems);this._disabledMenuItems.splice(s,1)}},enableItemByID:function(t){if(t&&""!=t){var i=this.element.find("#"+t)[0];if(i&&e.inArray(i,this._disabledMenuItems)>-1){e(i).removeClass("e-disable-item").attr({"aria-disabled":!1}),e(i).find(">a.aschild span.e-icon").removeClass("e-disable");for(var s=this._disabledMenuItems.length-1;s>=0;s--)this._disabledMenuItems[s].id==t&&this._disabledMenuItems.splice(s,1)}}},disable:function(){this.model.enabled=!1;var t=this.element.find(">li[class~=e-list]"),i=this;e.each(t,function(t,s){e.inArray(s,i._disabledMenuItems)>-1||(e(s).addClass("e-disable-item").attr({"aria-disabled":!0}),e(s).find(">a.aschild span.e-icon").addClass("e-disable"),i._disabledMenuItems.push(s))})},enable:function(){var t=this;this.model.enabled=!0;var i=this.element.find("li.e-disable-item");e.each(i,function(i,s){e(s).removeClass("e-disable-item").attr({"aria-disabled":!1}),e(s).find(">a.aschild span.e-icon").removeClass("e-disable"),t._disabledMenuItems.pop(s)})},show:function(e,t,i,s){if(!this.model.enabled)return!1;"contextmenu"==this.model.menuType?this.showContextMenu(e,t,i,s,!1):this.element.css("display","block")},hide:function(e){if(!this.model.enabled)return!1;"contextmenu"==this.model.menuType?this.hideContextMenu(e):(this._closeMenu(),this.element.css("display","none"))},_wireEvents:function(t){this[t](this.element.find("li.e-list"),"mouseout",this._mouseOutHandler),this[t](this.element.find("li.e-list"),"mouseover",this._mouseOverHandler),this[t](this.element.children(),"click",this._onClickHandler),this[t](this.element,"keydown",this._onKeyDownHandler),this[t](this.element,"focus",this._OnFocusHandler),this[t](this.element,"blur",this._OnFocusOutHandler),"contextmenu"==this.model.menuType&&null!=e(this.model.contextMenuTarget)[0]&&this._contextMenuEvents(t),"contextmenu"!=this.model.menuType&&(this[t](e(document),"click",this._onDocumentClick),this[t](this.element,"mousedown",this._onMouseDownHandler)),this[t](e(window),"resize",e.proxy(this._onResize,this))},_mouseOverHandler:function(i){var s,a="";if(this.element.find(".e-mhover").removeClass("e-mhover"),i.currentTarget=e(i.target).closest("li")[0],e(i.currentTarget).hasClass("e-disable-item")?this._isFocused=!1:e(i.currentTarget).addClass("e-mhover"),i.stopPropagation&&i.stopPropagation(),void 0!==this._delaySubMenuHover&&clearTimeout(this._delaySubMenuHover),void 0!==this._delaySubMenuHover&&clearTimeout(this._delayMenuHover),this._mouseOver=!0,this._isMenuOpen=!0,e(i.currentTarget.parentNode.parentNode).is(this.element)?this._isSubMenuOpen=!1:this._isSubMenuOpen=!0,"LI"==i.currentTarget.nodeName)s=i.currentTarget;else{if(!i.currentTarget.parentNode)return i.preventDefault(),!1;if("LI"!=i.currentTarget.parentNode.nodeName)return!1;s=i.currentTarget.parentNode}if(e(i.currentTarget).hasClass("e-disable-item")||this._onMenuIntent(s,this,this._hoverOpen),!(e.inArray(s,this._disabledMenuItems)>-1)){var r=e(s).children("a,span").text();a=t.isNullOrUndefined(s)?"":e(s)[0].id;var n={text:r,element:s,event:i,ID:a};this._trigger("mouseover",e.extend({events:n},n))}},_onMouseDownHandler:function(t){e(t.target).hasClass("e-menu")&&(this._isFocused=!1)},_mouseOutHandler:function(i){var s,a="";if(e(i.currentTarget).removeClass("e-mhover"),i.stopPropagation&&i.stopPropagation(),void 0!==this._delaySubMenuHover&&clearTimeout(this._delaySubMenuHover),void 0!==this._delaySubMenuHover&&clearTimeout(this._delayMenuHover),this._mouseOver=!1,this._isMenuOpen=!1,"LI"==i.currentTarget.nodeName)s=i.currentTarget;else{if(!i.currentTarget.parentNode)return i.preventDefault(),!1;if("LI"!=i.currentTarget.parentNode.nodeName)return!1;s=i.currentTarget.parentNode}if(this._onHide(s,this,this._hoverClose),!(e.inArray(s,this._disabledMenuItems)>-1)){var r=e(s).children("a,span").text();a=t.isNullOrUndefined(s)?"":e(s)[0].id;var n={text:r,element:s,event:i,ID:a};this._trigger("mouseout",e.extend({events:n},n))}},_onClickHandler:function(i){var s,a,r,n="";this._isFocused=!0;var o=!1;if(e(i.target).closest("li.e-list").hasClass("e-disable-item")||!(e(i.target).closest("li.e-list").length>0))return void(e(i.target).is(this.element)&&(this._activeElement=this.element.find(">li:first")));if(s=e(i.target).closest("li.e-list")[0],e(s).is(this.element.find(">li.e-list"))&&(this._activeElement=s),e(i.target).is("a")&&e(s).find(">a,>span").hasClass("aschild")&&this.model.openOnClick&&(this._isFocused=!1),!this._hoverOpen&&e(s).find(">a,>span").hasClass("aschild")&&(this._show(s,this._showAnim,this._hideAnim),this._hoverOpen=!1,o=!0),!(e.inArray(s,this._disabledMenuItems)>-1)){"contextmenu"==this.model.menuType&&this._isContextMenuOpen&&!e(s).hasClass("e-haschild")&&(this._hideAnimation(this.element,this._hideAnim),this._isContextMenuOpen=!1,this._trigger("close",e.extend({events:i},i)),this._off(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)),o||e(s).find(">a,>span").hasClass("aschild")||(this._closeMenu(),this.model.openOnClick&&(this._hoverOpen=!1));var l=e(s).children("a,span").text(),d=e(s).closest("ul").parent("li");0!=d.length?(a=t.isNullOrUndefined(d.attr("id"))?null:d.attr("id"),r=d.children("a,span").text()):(a=null,r=null),n=t.isNullOrUndefined(s)?"":e(s)[0].id;var h={text:l,element:s,event:i,selectedItem:this.selectedItem,ID:n,parentId:a,parentText:r};this._trigger("click",e.extend({events:h},h)),this.selectedItem=null,this.model.openOnClick&&"contextmenu"!=this.model.menuType&&this.element.focus()}},_onKeyDownHandler:function(i){if(i.target&&i.target.nodeName&&e(i.target).closest("input, textarea").length>0)return!0;if("contextmenu"!=this.model.menuType||this._isContextMenuOpen){var s,a,r,n,o="",l=this.element.find(".e-mhover"),d=this.element.find(".e-mfocused");if(!e(l).length>0&&e(this._activeElement).length>0&&(l=d=e(this._activeElement)),9==i.keyCode?(this._isFocused=!1,this._OnFocusOutHandler()):37!=i.keyCode&&38!=i.keyCode&&39!=i.keyCode&&40!=i.keyCode||i.preventDefault(),40==i.keyCode&&("horizontal"==this.model.orientation?this.element.find(">li.e-mhover").children("ul").length>0||e(this._activeElement).length>0?("none"===e(l).children("ul").css("display")&&this._show(l[l.length-1],this._showAnim,this._hideAnim),l.removeClass("e-mhover e-mfocused").children("ul:first").find("li:first").addClass("e-mhover"),null==this._activeElement?l.addClass("e-mfocused"):e(this._activeElement).addClass("e-mfocused")):(n=l.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),e(l[l.length-1]).removeClass("e-mfocused e-mhover"),a=e(n[n.index(l)+1]).length>0?e(n[n.index(l[l.length-1])+1]):n.first(),a.addClass("e-mhover")):"horizontal"!=this.model.orientation&&(n=0==l.length?this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"):l.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),l.removeClass("e-mfocused e-mfocused"),l.length>0?(l.removeClass("e-mhover"),a=e(n[n.index(l[l.length-1])+1]).length>0?e(n[n.index(l[l.length-1])+1]):n.first()):a=n.first(),a.addClass("e-mhover"))),39==i.keyCode)if("horizontal"==this.model.orientation&&(this.element.find(">li.e-list").hasClass("e-mhover")||e(this._activeElement).length>0))l.removeClass("e-mfocused e-mhover"),n=this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),a=e(n[n.index(l[l.length-1])+1]).length>0?e(n[n.index(l[l.length-1])+1]):n.first(),a.addClass("e-mhover");else if(e(l).children("ul").length>0){l.removeClass("e-mfocused e-mhover");var h=l.children("ul:first").find("li:first");this._show(l[l.length-1],this._showAnim,this._hideAnim),n=l.addClass("e-mfocused").children("ul:first").children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),a=e(n[n.index(h)]).length>0?e(n[n.index(h)]):n.first(),a.addClass("e-mhover")}else l.children("ul").length<=0&&"horizontal"==this.model.orientation&&l.parent().closest(".e-list").parent().hasClass("e-menu")&&(this._hideAnimation(l.parent(),this._hideAnim),l.removeClass("e-mfocused e-mhover"),e(d[d.length-1]).removeClass("e-mfocused"),n=l.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),a=e(e(n[n.index(d[d.length-1])+1]).length>0?n[n.index(d[d.length-1])+1]:n[n.index(d.first())]),a.addClass("e-mhover"));if(38==i.keyCode&&("horizontal"==this.model.orientation?(n=l.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),l.removeClass("e-mfocused e-mhover"),a=e(n[n.index(l[l.length-1])-1]).length>0?e(n[n.index(l[l.length-1])-1]):n.last()):"horizontal"!=this.model.orientation&&(n=0==l.length?this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"):l.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),
l.length>0?(l.removeClass("e-mfocused e-mhover"),a=e(n[n.index(l[l.length-1])-1]).length>0?e(n[n.index(l[l.length-1])-1]):n.last()):a=n.last()),a.addClass("e-mhover")),37==i.keyCode&&("horizontal"==this.model.orientation?this.element.find(">li.e-list").hasClass("e-mhover")||e(this._activeElement).length>0?(l.removeClass("e-mfocused e-mhover"),n=this.element.find("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),a=e(n[n.index(l[l.length-1])-1]).length>0?e(n[n.index(l[l.length-1])-1]):n.last(),a.addClass("e-mhover")):(this._hideAnimation(l.parent(),this._hideAnim),l.removeClass("e-mfocused e-mhover"),e(d[d.length-1]).removeClass("e-mfocused e-active"),n=l.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),a=l.parent().closest(".e-list").parent(".e-menu").length>0?e(n[n.index(d[d.length-1])-1]).length>0?e(n[n.index(d[d.length-1])-1]):n.last():e(n[n.index(d[d.length-1])]).length>0?e(n[n.index(d[d.length-1])]):n.last(),a.addClass("e-mhover")):(0==l.parent(".e-menu").length||"contextmenu"==this.model.menuType&&0==l.parent("ul.e-context").length)&&(this._hideAnimation(l.parent(),this._hideAnim),l.removeClass("e-mfocused e-mhover"),e(d[d.length-1]).removeClass("e-mfocused"),n=l.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),a=e(e(n[n.index(d[d.length-1])]).length>0?n[n.index(d[d.length-1])]:n[n.index(d.last())]),a.addClass("e-mhover"))),13==i.keyCode){var c=e(l).children("a,span").text();o=t.isNullOrUndefined(e(l)[0])?"":e(l)[0].id;var u={menuId:this.element[0].id,text:c,selectedItem:d,ID:o};"contextmenu"==this.model.menuType?this._isContextMenuOpen&&l.length>0&&!d.hasClass("e-disable-item")&&(this.model.click&&this._trigger("click",e.extend({events:u},u)),this.selectedItem=null,this.hideContextMenu(i)):l.length>0&&!l.hasClass("e-disable-item")&&(e(l).find(">a,>span").hasClass("aschild")&&"none"===e(l).children("ul").css("display")?(this._show(l[0],this._showAnim,this._hideAnim),l.removeClass("e-mhover").children("ul:first").find("li:first").addClass("e-mhover")):(this.element.find(".e-mhover >a,.e-mhover >span ").focus(),this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll()),t.isNullOrUndefined(e(l).find(">a").attr("href"))&&this._trigger("click",e.extend({events:u},u)))}if(27==i.keyCode&&("contextmenu"==this.model.menuType?this.hideContextMenu(i):this.element.find("li.e-list").removeClass("e-mhover"),this.element.find('li.e-list:has("> ul")').find("> ul:visible").parents("li.e-list").addClass("e-mhover"),this._closeAll()),!e(i.target).is(this.element)||!i.target.parentNode)return!1;if(l.length&&(s=l),!(e.inArray(s,this._disabledMenuItems)>-1)){var c=e(s).children("a,span").text();o=t.isNullOrUndefined(s)?"":e(s)[0].id,(this.element.find("li.e-mfocused.e-mhover").length||13==i.keyCode)&&(r=13==i.keyCode?l:this.element.find("li.e-mfocused.e-mhover"));var u={text:c,element:s,targetElement:r,event:i,ID:o};this._trigger("keydown",e.extend({events:u},u))}this._activeElement=null,d=this.element.find(".e-mfocused")}},_OnFocusHandler:function(t){"contextmenu"!=this.model.menuType&&!this.element.find(">li:first").hasClass("e-disable-item")&&this._isFocused&&0==this.element.find(".e-mhover").length&&0==e("li.e-ham-wrap").length?this.element.find(">li:first").addClass("e-mhover"):this._isFocused=!0,"contextmenu"!=this.model.menuType&&(this._activeElement=this.element.find(">li:first"))},_OnFocusOutHandler:function(){this._isFocused||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll()),this._isFocused=!1},_onDocumentClick:function(t){this.model.openOnClick&&(this._hoverOpen=!1),e(t.target).parents(".e-menu").is(this.element)||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll(),this._isFocused=!0),e(t.target).parents("ul.e-menu").is(this.popupWrapper)||e(t.target).hasClass("e-ham-wrap")||e(t.target).parent().hasClass("e-ham-wrap")||e(t.target).hasClass("e-hamburger")||e(t.target).parent("li").hasClass("e-haschild")||e(t.target).is("span.e-icon.e-arrowhead-down")||this._isOverflowPopupOpen()||"contextmenu"==this.model.menuType||!(e("li.e-ham-wrap").length>0)||this._overflowClose()},_ContextMenuHandler:function(e){var t=!1;"taphold"==e.type&&0!=e.button?t=!0:e.button?t=2==e.button:e.which&&(t=3==e.which);var i=e.target;if(t){var s=e;"taphold"==e.type&&(s="touchstart"==e.options.type?e.options.touches[0]:e.options);this._showSpeed;this.showContextMenu(null,null,i,s,!0)}else if(this._isContextMenuOpen){var a=this._hideAnim,r=this._hideSpeed;this.hideContextMenu(e,a,r)}},_calculateContextMenuPosition:function(t){var i,s;this.element.css({top:"",left:""}),i=t.clientX+this.element.width()<e(window).width()?t.pageX:t.pageX-this.element.width(),s=t.clientY+this.element.height()<e(window).height()?t.pageY:t.clientY>this.element.height()?t.pageY-this.element.height():e(window).height()-this.element.outerHeight();var a="static"!=e("body").css("position")?e("body").offset():{left:0,top:0};return i-=a.left,s-=a.top,{X:i,Y:s}},_onDefaultPreventer:function(e){return e.preventDefault(),e.stopPropagation(),!1},_onContextClose:function(t){var i=this;if(this._isContextMenuOpen){var s=!1;if((e(t.target).is(this.element)||e(t.target).parents(".e-context").is(this.element))&&(s=!0),!s){var a=this._hideAnim,r=this._hideSpeed;this.hideContextMenu(t,a,r);var n=e(t.target).parents();e.each(n,function(e,t){t.id,i._ContextTargetId})}}}}),t.Menu.Locale=t.Menu.Locale||{},t.Menu.Locale.default=t.Menu.Locale["en-US"]={titleText:"Menu"},t.MenuType={NormalMenu:"normalmenu",ContextMenu:"contextmenu"},t.Direction={Left:"left",Right:"right",None:"none"},t.AnimationType={None:"none",Default:"default"}}(jQuery,Syncfusion),function(e,t,i){t.widget("ejColorPicker","ej.ColorPicker",{_rootCSS:"e-colorpicker",element:null,model:null,validTags:["input","div"],_addToPersist:["value","opacityValue"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{enableOpacity:!0,opacityValue:100,columns:10,palette:"basicpalette",htmlAttributes:{},buttonMode:"split",custom:[],presetType:"basic",modelType:"picker",locale:"en-US",showPreview:!0,showTooltip:!1,showClearButton:!1,showSwitcher:!0,value:null,displayInline:!1,buttonText:{apply:"Apply",cancel:"Cancel",swatches:"Swatches"},tooltipText:{switcher:"Switcher",addButton:"Add Color",basic:"Basic",monoChrome:"Mono Chrome",flatColors:"Flat Colors",seaWolf:"Sea Wolf",webColors:"Web Colors",sandy:"Sandy",pinkShades:"Pink Shades",misty:"Misty",citrus:"Citrus",vintage:"Vintage",moonLight:"Moon Light",candyCrush:"Candy Crush",currentColor:"Current Color",selectedColor:"Selected Color"},showApplyCancel:!0,showRecentColors:!1,toolIcon:null,cssClass:"",enabled:!0,change:null,select:null,open:null,close:null,create:null,destroy:null},dataTypes:{modelType:"enum",palette:"enum",presetType:"enum",cssClass:"string",displayInline:"boolean",locale:"string",showSwitcher:"boolean",showRecentColors:"boolean",enabled:"boolean",showPreview:"boolean",enableOpacity:"boolean",buttonText:"data",custom:"array",htmlAttributs:"data"},observables:["value","opacityValue"],value:t.util.valueFunction("value"),opacityValue:t.util.valueFunction("opacityValue"),_setModel:function(e){for(var i in e)switch(i){case"enableOpacity":this.model.enableOpacity=e[i],this.popupContainer&&(this._previewSlider(this.model.enableOpacity),this._valueOperation());break;case"opacityValue":if(this.model.enableOpacity){this.model.opacityValue=e[i],this._tempOpacity=parseFloat(t.util.getVal(e[i])),this.popupContainer&&(this._tempOpacity=parseFloat(t.util.getVal(e[i])),this._opacity.option("value",this._tempOpacity),!this._switch&&this._changeOpacity(),this._updateValue(),this.opacityValue(this._tempOpacity),"function"==typeof e[i]?e[i](this.opacityValue()):e[i]=this.opacityValue());break}return!1;case"custom":this.model.custom=e[i],this._reInitialize();break;case"palette":this.model.palette=e[i],this._reInitialize();break;case"columns":this.model.columns=parseFloat(e[i]),this._reInitialize(),e[i]=this.model.columns;break;case"presetType":if(this.model.presetType=e[i],t.isNullOrUndefined(s[this.model.presetType]))return!1;this._reInitialize();break;case"buttonMode":this._unBindIconClick(),this._buttonElement=t.ColorPicker.ButtonMode.Split==e[i]?this.dropdownbutton:this.wrapper,t.ColorPicker.ButtonMode.Split==e[i]?this.wrapper.addClass("e-split"):this.wrapper.removeClass("e-split"),this._bindIconClick();break;case"showTooltip":this.model.showTooltip=e[i],this.popupContainer&&(this._colorSlider.option("showTooltip",e[i]),this._opacity.option("showTooltip",e[i]));break;case"value":this._setValue(t.util.getVal(e[i]),!0),"function"==typeof e[i]?e[i](this.value()):e[i]=this.value();break;case"modelType":this.model.modelType=e[i],this._reInitialize();break;case"showSwitcher":this.model.showSwitcher=e[i],this.popupContainer&&this._showSwitcher();break;case"tooltipText":this.model.tooltipText=e[i],this.popupContainer&&this._toolTipText(e[i]);break;case"locale":this.model.locale=e[i],this.popupContainer&&this._localize(e[i]);break;case"showPreview":this.model.showPreview=e[i],this.popupContainer&&this._previewPane(this.model.showPreview);break;case"buttonText":this._setButtonText=!0,this.model.buttonText=e[i],this.popupContainer&&this._buttonText(this.model.buttonText);break;case"displayInline":this.model.displayInline=e[i],this._setDisplayInline(e[i]);break;case"cssClass":this._setSkin(e[i]),this.model.cssClass=e[i];break;case"enabled":this._enabled(e[i]);break;case"showRecentColors":this.model.showRecentColors=e[i],this.popupContainer&&this._previewColor(this.model.showRecentColors);break;case"htmlAttributes":this.model.htmlAttributes=e[i],this._addAttr(this.model.htmlAttributes);break;case"showClearButton":this.model.showClearButton=e[i],this.popupContainer&&this._showClearIcon(e[i]);break;case"showApplyCancel":this.model.showApplyCancel=e[i],this.popupContainer&&this._buttonContainer()}},_setSkin:function(e){this.wrapper?this.wrapper.removeClass(this.model.cssClass).addClass(e):this.element.removeClass(this.model.cssClass).addClass(e)},_showSwitcher:function(){this.model.showSwitcher?(this._changeTag.removeClass("e-hide"),"picker"==this.model.modelType?this._switcher.addClass("e-paletteModel").removeClass("e-pickerModel"):this._switcher.addClass("e-pickerModel").removeClass("e-paletteModel")):this._changeTag.addClass("e-hide")},_pickerType:function(){this._modelType="picker",this.PaletteWrapper.removeAttr("style"),this.PaletteWrapper.addClass("e-hide"),this._gradient.removeClass("e-hide"),this._gradient.fadeIn(200),this._presetTag.parents(".e-split.e-widget").addClass("e-hide"),this._switcher.removeAttr("class"),this._switcher.addClass("e-color-image e-paletteModel"),this._switch=!0,this._rgbValue(),this._hueGradient(),this._updateUI(),this._alphaGradient(this.RGBToHEX(this.rgb)),this._hsva.ejButton("enable"),this._switchEvents(),this._unSwitchEvents(),this._hideUnBindEvents(),this.isPopupOpen&&this._showBindEvents(),"default"==this.model.modelType?this._changeTag.removeClass("e-hide"):this._changeTag.addClass("e-hide"),this.popupList.prepend(this._gradient),this._showSwitcher()},_paletteType:function(){this._gradient.removeAttr("style"),this._presetTag.parents(".e-split.e-widget").removeClass("e-hide"),this.PaletteWrapper.removeClass("e-hide"),this.PaletteWrapper.fadeIn(200),this._switch=!1,this._disableHSVButton(),this._cellSelect(),this._switchEvents(),this._unSwitchEvents(),this._splitObj.option("prefixIcon","e-icon e-color-image e-"+this.model.presetType),this.popupList.prepend(this.PaletteWrapper),this._showSwitcher()},_reInitialize:function(){this._destroyPalette(!1)},_destroyPalette:function(e){this.PaletteWrapper.remove(),(e||this._columns!=this.model.columns&&"custompalette"!==this.model.palette)&&(this.PaletteWrapper=this._presetType(this._presetsId)),this._temp!==this.model.presetType&&(this.PaletteWrapper=this._layoutType(this.model.palette)),"palette"==this.model.modelType&&(this._modelType="palette",this.PaletteWrapper=this._layoutType(this.model.palette),this._hideUnBindEvents(),this.isPopupOpen&&this._showBindEvents(),this._gradient.addClass("e-hide"),this._paletteType(),e||"custompalette"==this.model.palette||this._splitObj.option("prefixIcon","e-icon e-color-image e-"+this.model.presetType)),"picker"==this.model.modelType&&(this._pickerType(),this.model.displayInline&&!this.element.is("input")&&this._footer.addClass("e-hide")),this._temp=this.model.presetType,this._columns=this.model.columns,"picker"==this._modelType?this._presetTag.parents(".e-split.e-widget").addClass("e-hide"):this._presetTag.parents(".e-split.e-widget").removeClass("e-hide"),this.refresh()},_previewColor:function(e){e?(this._swatchesArea.css("display","block"),this._bindRecentEvent()):(this._swatchesArea.css("display","none"),this._unBindRecentEvent())},_buttonText:function(i){this._setButtonText?this._setButtonText=!1:e.extend(this.model.buttonText,i),t.isNullOrUndefined(this._buttonTag)||this._buttonTag.html(this.model.buttonText.apply),t.isNullOrUndefined(this._cancelTag)||this._cancelTag.html(this.model.buttonText.cancel),this._spnTag.html(this.model.buttonText.swatches)},_toolTipText:function(t){e.extend(this.model.tooltipText,t),this._addTitleText()},_previewPane:function(e){e?this._previewTag.removeClass("e-hide"):this._previewTag.addClass("e-hide")},_previewSlider:function(e){e?this._opacity.enable():this._opacity.disable()},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_localize:function(){this._localizedLabels=this._getLocalizedLabels(),"en-US"==this._options.locale&&!t.isNullOrUndefined(this._options.buttonText)||!t.isNullOrUndefined(this._options.tooltipText)?(t.isNullOrUndefined(this._options.buttonText)||this._buttonText(this._options.buttonText),t.isNullOrUndefined(this._options.tooltipText)||this._toolTipText(this._options.tooltipText)):t.isNullOrUndefined(this._localizedLabels)||(t.isNullOrUndefined(this._localizedLabels.buttonText)||this._buttonText(this._localizedLabels.buttonText),t.isNullOrUndefined(this._localizedLabels.tooltipText)||this._toolTipText(this._localizedLabels.tooltipText))},_destroy:function(){this.model.displayInline&&e(window).off("resize",e.proxy(this._OnWindowResize,this)),this.isPopupOpen&&this.hide(),this.popupContainer&&this.popupContainer.remove(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove(),this._presetContainer&&this._presetContainer.parent(".e-menu-wrap").remove()),this.element.removeClass("e-colorpicker e-input e-widget").removeAttr("style name").val(this.element.attr("value"))},_init:function(i){this._options=i,this._browser=t.browserInfo(),this._isFocused=!1,this.isPopupOpen=!1,this._dataBind=!1,this._modelType="picker",this._id&&e("#"+this._id+"_popup").remove(),this._id,e("#"+this._id+"_Presets").parent(".e-menu-wrap").remove(),"basicpalette"===this.model.palette&&(this._presetsId="e-presets30"),this._tempOpacity=this.opacityValue(),this._renderControl(),t.isNullOrUndefined(this.value())&&""!==this.element[0].value?this._tempValue=this.element[0].value:this._tempValue=this.value(),this._previousValue=this._previousColor=this._tempValue,this._tempValue&&this._setValue(this._tempValue),this._columns=this.model.columns,this._temp=this.model.presetType,this._tempValue||(this._previousValue=""),!this.model.enabled&&this._enabled(this.model.enabled)},_renderPopup:function(){this._renderPopupPanelWrapper(),this._selectedButton=this._groupTag.find(".e-click"),this._buttonContainer(),this._renderPopupElement(),this._previewPane(this.model.showPreview),this._previewColor(this.model.showRecentColors),this._localize(),this.popupContainer.css("display","none"),e("body").append(this.popupContainer),this._isOpen=!1,this._switch&&this._previewSlider(this.model.enableOpacity),this.element.is("input")&&(0==this.popupContainer.find("button.e-applyButton").length&&this._buttonContainer(),this._footer.css({display:"block"}),this.wrapper.removeClass("e-focus"),this._off(e(document),"mousedown",this._onDocumentClick)),this._isFocused=this.isPopupOpen=!1,this._wirePopupEvents(),this._switchEvents(),this._tempOpacity=this.opacityValue(),"custompalette"===this.model.palette&&this._presetTag.parents(".e-split.e-widget").addClass("e-hide"),this.popupContainer.find("button.e-presets").ejSplitButton({targetID:this._presetContainer.attr("id")}),this._tempValue&&(this._setValue(this._tempValue),this._switch&&this._rgbValue()),this._hsvValue(),this._hueGradient(),this._addTitleText(),this._showClearIcon(this.model.showClearButton),this._tempValue||(this._colorSlider.option("value",parseInt(this._hsv.h)),this._opacity.option("value",this._tempOpacity),this._alphaGradient("#fff")),this._addAttr(this.model.htmlAttributes)},_renderControl:function(){this._createWrapper(),this._buttonElement=t.ColorPicker.ButtonMode.Split==this.model.buttonMode?this.dropdownbutton:this.wrapper,this.model.buttonMode==t.ColorPicker.ButtonMode.Split&&this.element.is("input")&&this.wrapper.addClass("e-split"),this._addAttr(this.model.htmlAttributes),this._setDisplayInline(this.model.displayInline),this._wireEvents()},_createWrapper:function(){this.element.is("input")&&(this.element.addClass("e-input e-widget"),this.element.attr("aria-label","colorpicker"),this.spanElement=t.buildTag("span.e-selected-color"),this.wrapper=t.buildTag("span.e-colorwidget e-picker e-widget "+this.model.cssClass).attr({tabindex:"0","aria-expanded":!1,"aria-haspopup":!0,"aria-owns":"popup"}),this._id&&this.wrapper.attr("id",this._id+"Wrapper"),this.container=t.buildTag("span.e-in-wrap e-box e-splitarrowright"),this.drpbtnspan=t.buildTag("span.e-icon e-arrow-sans-down","",{},{"aria-label":"select"}),this.dropdownbutton=t.buildTag("span.e-select","",{},{role:"button"}).append(this.drpbtnspan),this.iconWrapper=t.buildTag("span.e-tool-icon "+this.model.toolIcon),this.colorContainer=t.buildTag("span.e-color-container"),this.colorContainer.append(this.spanElement),this.container.insertAfter(this.element),t.isNullOrUndefined(this.model.toolIcon)?this.container.append(this.colorContainer):(this.colorContainer.prepend(this.iconWrapper),this.container.addClass("e-tool"),this.container.append(this.colorContainer)),this.container.append(this.element,this.dropdownbutton),this.wrapper.insertBefore(this.container),this.wrapper.append(this.container),this.element.css("display","none").val(this.value())),this._checkNameAttr()},_addTitleText:function(){this._switcher.attr("title",this.model.tooltipText.switcher),this._spanTag.attr("title",this.model.tooltipText.addButton),this._presetLi.find("#e-presets00").attr("title",this.model.tooltipText.webColors),this._presetLi.find("#e-presets01").attr("title",this.model.tooltipText.vintage),this._presetLi.find("#e-presets02").attr("title",this.model.tooltipText.seaWolf),this._presetLi.find("#e-presets10").attr("title",this.model.tooltipText.sandy),this._presetLi.find("#e-presets11").attr("title",this.model.tooltipText.pinkShades),this._presetLi.find("#e-presets12").attr("title",this.model.tooltipText.moonLight),this._presetLi.find("#e-presets20").attr("title",this.model.tooltipText.monoChrome),this._presetLi.find("#e-presets21").attr("title",this.model.tooltipText.misty),this._presetLi.find("#e-presets22").attr("title",this.model.tooltipText.flatColors),this._presetLi.find("#e-presets30").attr("title",this.model.tooltipText.basic),this._presetLi.find("#e-presets31").attr("title",this.model.tooltipText.candyCrush),this._presetLi.find("#e-presets32").attr("title",this.model.tooltipText.citrus),this._currentTag.attr("title",this.model.tooltipText.currentColor),this._previousTag.attr("title",this.model.tooltipText.selectedColor)},_renderPopupPanelWrapper:function(){this.popupContainer=t.buildTag("div.e-colorpicker e-box e-popup e-widget "+this.model.cssClass,"",{},{role:"grid","aria-readonly":"true",tabindex:"0",style:"visibility:hidden"}),this._id&&this.popupContainer.attr("id",this._id+"_popup"),e("body").append(this.popupContainer),this.popupList=t.buildTag("div.e-popupWrapper"),this._gradient=t.buildTag("div.e-container"),this._colorArea=t.buildTag("div.e-hsv-color"),this._gradientArea=t.buildTag("div.e-hsv-gradient"),this._handleArea=t.buildTag("div.e-draghandle e-color-image"),"msie"==this._browser&&this._handleArea.addClass("e-pinch"),this._colorArea.append(this._gradientArea,this._handleArea),this._picker=t.buildTag("div.e-gradient"),this._hueSlider=t.buildTag("div.e-widget e-hue e-state-default"),this._alphaSlider=t.buildTag("div.e-widget e-opacity e-state-default"),this._picker.append(this._hueSlider,this._alphaSlider),this._gradient.append(this._colorArea,this._picker),this.popupList.append(this._gradient),this._footerBlock=t.buildTag("div.e-footerContainer"),this._templateWrapper=t.buildTag("div.e-buttons"),this._groupTag=t.buildTag("div.e-grpbtn"),this._formEle=t.buildTag("div.e-form"),this._rgb=t.buildTag("button.e-rgbButton e-click","",{},{type:"button"}),this._hexCode=t.buildTag("button.e-hexButton","",{},{type:"button"}),this._hsva=t.buildTag("button.e-hsvButton","",{},{type:"button"}),this._groupTag.append(this._rgb,this._hexCode,this._hsva),this._codeEditor=t.buildTag("div.e-codeeditor"),this._inputTag=t.buildTag("input.e-color-code","",{},{type:"text",tabindex:"0",maxLength:"22"}),this._codeEditor.append(this._inputTag),this._inputTag.attr("aria-label","color-code"),this._formEle.append(this._groupTag,this._codeEditor),this._previewTag=t.buildTag("div.e-preview").attr({tabindex:"0"}),this._currentTag=t.buildTag("div.e-current"),this._previousTag=t.buildTag("div.e-previous"),this._previewTag.append(this._currentTag,this._previousTag),this._templateWrapper.append(this._formEle,this._previewTag),this._swatchesArea=t.buildTag("div.e-color-labels");this._divTag=t.buildTag("div.e-recent-color"),this._addTag=t.buildTag("div.e-colorblock e-block"),this._spanTag=t.buildTag("div.e-color e-color-image e-add"),this._addTag.append(this._spanTag),this._divTag.append(this._addTag);for(var i=0;i<11;i++){this._liTag=t.buildTag("div.e-colorblock e-block");var s=t.buildTag("div.e-color e-color-image e-empty");this._liTag.append(s),this._divTag.prepend(this._liTag)}this._swatchesArea.append(this._divTag),this._footer=t.buildTag("div.e-footer"),this._swatches=t.buildTag("div.e-element"),this._changeTag=t.buildTag("div.e-switcher").attr("tabindex","0"),this._switcher=t.buildTag("div.e-color-image"),this._presetTag=t.buildTag("button.e-presets e-colorSplit"),this._presets=t.buildTag("div"),this._changeTag.append(this._switcher),this._presetTag.append(this._presets),this._swatches.append(this._changeTag,this._presetTag),this._footer.append(this._swatches),this._footerBlock.append(this._templateWrapper,this._swatchesArea,this._footer),this.PaletteWrapper=this._layoutType(this.model.palette),this.popupList.append(this.PaletteWrapper,this._footerBlock);var a=e("#"+this._id+"_Presets").get(0);a&&(e(a).parent().hasClass("e-menu-wrap")?e(a).parent().remove():e(a).remove()),this._presetContainer=e("<ul id='"+this._id+"_Presets' class='e-presetWrapper' style= top:87px ></ul>"),this._presetLi=t.buildTag("li.e-item"),this._presetLi.append(this._renderPresets()),this._presetContainer.append(this._presetLi),this.popupList.append(this._presetContainer),this.popupContainer.append(this.popupList),(this._browser.name="9.0"==this._browser.version||"8.0"==this._browser.version)?this._hueSlider.addClass("e-color-image e-filter"):this._hueSlider.addClass("e-common"),this._width=this._gradientArea.width(),this._height=this._gradientArea.height()},_buttonContainer:function(){this.model.showApplyCancel?(this._buttonTag=t.buildTag("button.e-applyButton","",{},{type:"button"}),this._cancelTag=t.buildTag("button.e-cancelButton","",{},{type:"button"}),this._footer.append(this._buttonTag,this._cancelTag),this._applyObj=this.popupContainer.find("button.e-applyButton").ejButton({text:this.model.buttonText.apply,type:"button",cssClass:"e-flat"}).data("ejButton"),this._cancelObj=this.popupContainer.find("button.e-cancelButton").ejButton({text:this.model.buttonText.cancel,type:"button",cssClass:"e-flat"}).data("ejButton"),this._on(this._cancelTag,"click",this._hidePopup),this._on(this._buttonTag,"click",this._buttonClick)):void 0!==this._buttonTag&&void 0!==this._cancelTag&&(this._buttonTag.remove(),this._cancelTag.remove(),this._off(this._cancelTag,"click",this._hidePopup),this._off(this._buttonTag,"click",this._buttonClick))},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"required"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._enabled(!1):i.wrapper.attr(t,e)})},_showClearIcon:function(e){e?(this._clearIcon=t.buildTag("div",{},{},{class:"e-icon e-close_01"}).hide(),this._codeEditor.append(this._clearIcon),this._on(this._clearIcon,"mousedown",this._clearColor),this._on(this._clearIcon,"click",this._clearColor)):(this._clearIcon&&this._clearIcon.remove(),this._off(this._clearIcon,"mousedown",this._clearColor),this._off(this._clearIcon,"click",this._clearColor))},_colorPresetsClick:function(t){this._presetsId=t.currentTarget.id,"e-presets00"===this._presetsId?this.model.presetType="webcolors":"e-presets01"===this._presetsId?this.model.presetType="vintage":"e-presets02"===this._presetsId?this.model.presetType="seawolf":"e-presets10"===this._presetsId?this.model.presetType="sandy":"e-presets11"===this._presetsId?this.model.presetType="pinkshades":"e-presets12"===this._presetsId?this.model.presetType="moonlight":"e-presets20"===this._presetsId?this.model.presetType="monochrome":"e-presets21"===this._presetsId?this.model.presetType="misty":"e-presets22"===this._presetsId?this.model.presetType="flatcolors":"e-presets30"===this._presetsId?this.model.presetType="basic":"e-presets31"===this._presetsId?this.model.presetType="candycrush":"e-presets32"===this._presetsId&&(this.model.presetType="citrus"),this._splitObj.option("prefixIcon","e-icon e-color-image e-"+this.model.presetType),e("#"+this._id+"_Presets").find("li.e-preset-row").removeClass("e-presetsactive"),e("#"+this._presetsId).addClass("e-presetsactive"),this.PaletteWrapper.remove(),"palette"==this._modelType&&(this.PaletteWrapper=this._layoutType(this.model.palette),this._gradient.addClass("e-hide"),this._paletteType(),this._switcher.addClass("e-pickerModel").removeClass("e-paletteModel"))},_renderPresets:function(){var e=t.buildTag("div.e-presets-table");this._spnTag=t.buildTag("span.e-presetHeader"),this._spnTag.html(this.model.buttonText.swatches),e.append(this._spnTag);for(var i,s=0;s<4;s++){i=t.buildTag("ul.e-tablerow");for(var a=0;a<3;a++){t.buildTag("li.e-color-image e-preset-row#e-presets"+[s]+[a]).appendTo(i)}i.appendTo(e)}return e},_renderPopupElement:function(){var i=this;this._hsv={h:360,s:0,v:100},this._rgb.ejButton({text:"RGBA",type:"button"}),this._hexCode.ejButton({text:"HEX",type:"button"}),this._hsva.ejButton({text:"HSVA",type:"button"}),this._splitObj=this._presetTag.ejSplitButton({size:"normal",showRoundedCorner:!0,contentType:"imageonly"}).data("ejSplitButton"),this._splitObj.element.attr("aria-label","Presets"),this._splitObj.dropbutton.attr("aria-label","Select"),this._splitObj.option("beforeOpen",function(e){i._bindClickOperation(e)}),this._presetTag.parents(".e-split.e-widget").css({height:"27px"}),0==this.model.custom.length&&this._splitObj.option("prefixIcon","e-icon e-color-image e-"+this.model.presetType),e("#"+this._presetsId).addClass("e-presetsactive"),this._splitObj._getXYpos=function(t){e("#"+this.model.targetID).ejMenu({animationType:"none"});var i,s,a=this.dropbutton.offset();return i=a.left-this.dropbutton.prev().outerWidth()-1,s=a.top-e("#"+this.model.targetID).outerHeight()-1,{x:i,y:s}},this._colorSlider=this._hueSlider.ejSlider({orientation:"Vertical",showTooltip:this.model.showTooltip,minValue:0,maxValue:360,change:function(e){i._changeHue(e)},slide:function(e){i._changeHue(e)}}).data("ejSlider"),this._opacity=this._alphaSlider.ejSlider({value:this.opacityValue(),showTooltip:this.model.showTooltip,orientation:"Vertical",incrementStep:5,value:100,change:function(e){i._changeAlpha(e)},slide:function(e){i._changeAlpha(e)}}).data("ejSlider"),(this._browser.name="8.0"==this._browser.version)&&(this._handleTag=t.buildTag("div.e-handle-wrapper"),this._handleTag.appendTo(this._opacity.element.find("a.e-handle"))),this._colorSlider.firstHandle.css({height:"13px",width:"13px"}),this._opacity.firstHandle.css({height:"13px",width:"13px"}),this.popupContainer.css({visibility:"visible",display:"none"}),"picker"==this.model.modelType?(this._modelType="picker",this._gradient.removeClass("e-hide"),this.PaletteWrapper.addClass("e-hide"),this._presetTag.parents(".e-split.e-widget").addClass("e-hide"),this._showSwitcher(),this._switch=!0):"palette"==this.model.modelType&&(this._modelType="palette",this._presetTag.parents(".e-split.e-widget").removeClass("e-hide"),this.PaletteWrapper.removeClass("e-hide"),this._gradient.addClass("e-hide"),this._hsva.ejButton("disable"),this._showSwitcher(),this._switch=!1)},_layoutType:function(e){return"string"==typeof e&&"basicpalette"==e?this._collection=this._paletteGenerate(s[this.model.presetType],this.model.columns):"string"==typeof e&&"custompalette"==e&&"palette"==this.model.modelType&&(this._collection=this._paletteGenerate(this.model.custom,this.model.columns)),"custompalette"==e&&this._collection.addClass("e-custom"),this._collection},_presetType:function(e){return"e-presets00"===e?this._collection=this._paletteGenerate(s.webcolors,this.model.columns):"e-presets01"===e?this._collection=this._paletteGenerate(s.vintage,this.model.columns):"e-presets02"===e?this._collection=this._paletteGenerate(s.seawolf,this.model.columns):"e-presets10"===e?this._collection=this._paletteGenerate(s.sandy,this.model.columns):"e-presets11"===e?this._collection=this._paletteGenerate(s.pinkshades,this.model.columns):"e-presets12"===e?this._collection=this._paletteGenerate(s.moonlight,this.model.columns):"e-presets20"===e?this._collection=this._paletteGenerate(s.monochrome,this.model.columns):"e-presets21"===e?this._collection=this._paletteGenerate(s.misty,this.model.columns):"e-presets22"===e?this._collection=this._paletteGenerate(s.flatcolors,this.model.columns):"e-presets30"===e?this._collection=this._paletteGenerate(s.basic,this.model.columns):"e-presets31"===e?this._collection=this._paletteGenerate(s.candycrush,this.model.columns):"e-presets32"===e&&(this._collection=this._paletteGenerate(s.citrus,this.model.columns)),this._collection},_paletteGenerate:function(i,s){var a;for(this._PresetTable=t.buildTag("div.e-palette-color").attr({role:"presentation"}),this._tag=t.buildTag("div.e-row").attr({role:"row"}),a=0;a<i.length;a++)a&&a%s==0&&(this._tag=t.buildTag("div.e-row").attr({role:"row"})),this._td=t.buildTag("div.e-item").attr({role:"gridcell","aria-label":"#"+e.trim(i[a]),"data-value":"#"+e.trim(i[a]),style:"background-color:#"+e.trim(i[a])}),this._tag.append(this._td),this._PresetTable.append(this._tag);return this._PresetTable},_checkNameAttr:function(){this.element.attr("name")||this.element.attr({name:this.element[0].id})},_enabled:function(e){e?this.enable():(this.model.enabled=!0,this.disable())},_setDisplayInline:function(i){!this.popupContainer&&this.model.displayInline&&this._renderPopup(),this.model.displayInline=i,i&&this.element.is("input")?(this.popupContainer.insertAfter(this.wrapper),this._footer.css({display:"none"}),this._setPopupPosition()):i?(this.element.append(this.popupContainer),this.popupContainer.find("button.e-applyButton").css({display:"none"}),this.popupContainer.find("button.e-cancelButton").css({display:"none"}),this._footer.css({display:"none"})):(this.popupContainer&&(this.popupContainer.css("display","none"),e("body").append(this.popupContainer),this._isOpen=!1),this.element.is("input")&&(this._bindIconClick(),
this.wrapper.removeClass("e-focus"),this.popupContainer&&(0==this.popupContainer.find("button.e-applyButton").length&&this._buttonContainer(),this._footer.css({display:"block"}),this._off(e(document),"mousedown",this._onDocumentClick))),this._isFocused=this.isPopupOpen=!1),i&&(this.show(),this.element.is("input")&&this._off(e(this._buttonElement),"mousedown",this._iconClick),this._off(t.getScrollableParents(this.wrapper),"scroll",this.hide))},_bindIconClick:function(){var i=e._data(e(this._buttonElement)[0],"events");t.isNullOrUndefined(i)||t.isNullOrUndefined(i.mousedown)?this._on(this._buttonElement,"mousedown",this._iconClick):0==i.mousedown.length&&this._on(this._buttonElement,"mousedown",this._iconClick)},_unBindIconClick:function(){this._off(this._buttonElement,"mousedown",this._iconClick)},_setPopupPosition:function(){var t,i=this.element.is("input")?this.wrapper:this.element,s=this._getOffset(i),a=e(document).scrollTop()+e(window).height()-(s.top+e(i).outerHeight()),r=s.top-e(document).scrollTop(),n=this.popupContainer.outerHeight(),o=this.popupContainer.outerWidth(),l=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),u=(n<a||n>r?s.top+d+3:s.top-n-3)-h;t=e(document).scrollLeft()+e(window).width()-l,o>t&&o<l+i.outerWidth()&&(l-=this.popupContainer.outerWidth()-i.outerWidth()),o+i.offset().left>e(window).width()&&(l=Math.abs(o-e(window).width())),this.popupContainer.css({left:l+"px",position:"absolute",top:u+"px","z-index":c})},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popupContainer)},_setValue:function(e,i){("object"==typeof e||"number"==typeof e||t.isNullOrUndefined(e.match("^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$")))&&(e=null),this.value(e),this._tempValue=e,t.isNullOrUndefined(e)?this._setEmptyValue():this._renderModelValue(e),this._changeEvent(!1,i),this._selectEvent(),this.element.is("input")&&this._updateValue()},_renderModelValue:function(e){e&&"string"==typeof e&&(this._HexToHSV(e),this._oldValue=this.rgb,this.isPopupOpen?(this._switch&&(this._valueOperation(),this._colorSlider.option("value",parseInt(this._hsv.h))),this._inputTagValue(this._selectedButton),this._switch||(this._updateUI(),this.element.val(this.value())),this._hueGradient()):this.element.val(this.value()))},setValue:function(e){this._setValue(e)},enable:function(){if(this.model.enabled)return!1;if(this.wrapper&&this.wrapper.hasClass("e-disable")?(this.wrapper.removeClass("e-disable"),this.element.prop("disabled",!1),this.container.hasClass("e-disable")&&this.container.removeClass("e-disable"),this.popupContainer&&this.popupList.removeClass("e-disable"),this.dropdownbutton.removeClass("e-disable")):this.model.displayInline&&this.element.removeClass("e-disable"),this.popupContainer){var t=this._switch;this._switch=!0,this._cancelObj.enable(),this._colorSlider.enable(),this.model.enableOpacity?this._opacity.enable():this._opacity.disable(),this._splitObj.enable(),this._applyObj.enable(),this._switchEvents(),this._switch=t,e(this._inputTag).prop("readonly",!1)}this._wireEvents(),this._buttonElement&&this._on(this._buttonElement,"mousedown",this._iconClick),this.model.enabled=!0},disable:function(){if(!this.model.enabled)return!1;if(this.wrapper&&!this.wrapper.hasClass("e-disable")?(this.wrapper.addClass("e-disable"),this.element.attr("disabled","disabled"),this.container.hasClass("e-disable")||this.container.addClass("e-disable"),this.popupContainer&&this.popupList.addClass("e-disable"),this.dropdownbutton.addClass("e-disable")):this.model.displayInline&&this.element.addClass("e-disable"),this.popupContainer){var t=this._switch;this._switch=!1,this._cancelObj.disable(),this._colorSlider.disable(),this._opacity.disable(),this._splitObj.disable(),this._applyObj.disable(),this._unSwitchEvents(),this._switch=t,e(this._inputTag).attr("readonly","readonly")}this._unWireEvents(),this._unBindIconClick(),this.isPopupOpen&&!this.model.displayInline&&this.hide(),this.model.enabled=!1},getColor:function(){return this.rgb},getValue:function(){return this.value()},_alphaGradient:function(e){var i=t.browserInfo(),e=t.isNullOrUndefined(e)?"#000000":e;"mozilla"==i.name?this._alphaSlider.attr({style:"background:-moz-linear-gradient(center top,"+e+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}):"msie"==i.name||"edge"==i.name?this._alphaSlider.attr({style:"background:-ms-linear-gradient(top,"+e+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}):"opera"==i.name&&i.version<="11.61"?this._alphaSlider.attr({style:"background:-o-linear-gradient(top,"+e+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}):"chrome"!=i.name&&"safari"!=i.name&&"opera"!=i.name||this._alphaSlider.attr({style:"background:-webkit-linear-gradient(top,"+e+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}),"msie"!=i.name||"8.0"!=i.version&&"9.0"!=i.version||this._alphaSlider.attr({style:"progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+e+", endColorstr=#ffffff)"}),"msie"==i.name&&"8.0"==i.version&&this._handleTag.css({background:this._formRGB(this.rgb),filter:"alpha(opacity="+100*this.rgb.a+")"})},_hueGradient:function(){var e=this._hsv,t={h:this._hsv.h,s:100,v:100};this._hueSlider.children(".e-handle").css({background:this._formRGB(this.HSVToRGB(t))}),this._hsv=e},_updateColor:function(){!this.model.displayInline&&this.model.showApplyCancel||(this.value(this._tempValue),this.element.is("input")&&this._updateValue(),this._trigger("select",{value:this.value()}),this._previousColor=this._tempValue)},_changeEvent:function(e,t){this._change&&this._previousValue!==this._tempValue?(this.popupContainer&&this._alphaGradient(this._tempValue),this._previousValue=this._tempValue,this._trigger("change",{value:this._tempValue,changeFrom:e?"slider":"picker",isInteraction:!t}),this._updateColor(e)):this.popupContainer&&this._alphaGradient(this._tempValue)},_selectEvent:function(){this._previousColor===this._tempValue&&this._tempOpacity===this.opacityValue()||(this.value(this._tempValue),this.element.is("input")&&this._updateValue(),this.element.val(this.value()),this._trigger("select",{value:this.value()}),this._previousColor=this._tempValue)},_changeHue:function(e){this._handleArea.css("visibility","visible"),parseInt(this._hsv.h)!==parseInt(e.value)&&this._switch&&(this._hsv.h=Math.round(e.value),this._hueGradient(),this._hsvValue(),this._tempValue=this.RGBToHEX(this.rgb),this._changeEvent(!0))},_changeAlpha:function(e){this._handleArea.css("visibility","visible"),this._switch&&(this.rgb.a=e.value/100,this._tempOpacity=parseInt(100*this.rgb.a),this._changeOpacity(e))},_changeOpacity:function(e){this.rgb.a=this._tempOpacity/100,(this._browser.name="8.0"==this._browser.version)?(this._currentTag.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+100*this.rgb.a+")"}),this._handleTag.css({background:this._formRGB(this.rgb),filter:"alpha(opacity="+100*this.rgb.a+")"})):(this._currentTag.css("background-color",this._formRGBA(this.rgb)),this._alphaSlider.children(".e-handle").css({background:this._formRGBA(this.rgb)})),this._inputTagValue(this._selectedButton),this.model.displayInline?(this._trigger("change",{value:this._tempValue,changeFrom:"slider",isInteraction:!t.isNullOrUndefined(e)&&e.isInteraction}),this._trigger("select",{value:this.value()})):this._trigger("change",{value:this._tempValue,changeFrom:"slider",isInteraction:!t.isNullOrUndefined(e)&&e.isInteraction})},_updateValue:function(){this.value()?(this._browser.name="8.0"==this._browser.version)?this.spanElement.css({"background-color":this._formRGB(this._HexToRGB(this.value())),filter:"alpha(opacity="+100*this.rgb.a+")"}):this.spanElement.css({"background-color":this._formRGBA(this._HexToRGB(this.value()))}):this.spanElement.removeAttr("style")},_bindClickOperation:function(t){var i=this;i._on(e("#"+this._id+"_Presets").find("li.e-preset-row"),"mousedown",i._colorPresetsClick),e("#"+i._presetContainer.attr("id")).ejMenu("instance").model.close=function(){i._splitObj.contstatus=!1,i._off(e("#"+this._id+"_Presets").find("li.e-preset-row"),"mousedown",i._colorPresetsClick)}},_wirePopupEvents:function(){this._on(this._changeTag,"click",this._switchModel),this._on(this._groupTag,"click",this._groupButton),this._on(this._addTag,"click",this._addColor),this._on(this._codeEditor,"mouseenter",this._inputEvent),this._on(this._codeEditor,"mouseleave",this._inputEvent),this._on(this._inputTag,"blur",this._inputEvent),this._on(this._inputTag,"focus",this._inputEvent),this._on(this._inputTag,"keyup",this._inputEvent),this._on(this.popupContainer,"focus",this._targetFocus),this._on(this.popupContainer,"blur",this._targetBlur)},_wireEvents:function(){this.element.is("input")&&(this._on(this.wrapper,"blur",this._targetBlur),this._on(this.wrapper,"focus",this._targetFocus),this._on(this.wrapper,"keydown",this._popupShown),this._on(this.colorContainer,"click",this._containerClick))},_unWireEvents:function(){!this.model.displayInline&&this.element.is("input")&&(this._off(this.wrapper,"blur",this._targetBlur),this._off(this.wrapper,"focus",this._targetFocus),this._off(this.wrapper,"keydown",this._popupShown),this._off(this.colorContainer,"click",this._containerClick)),this._off(this._changeTag,"click",this._switchModel),this._off(this._groupTag,"click",this._groupButton),this._off(this._addTag,"click",this._addColor),this._off(this._codeEditor,"mouseenter",this._inputEvent),this._off(this._codeEditor,"mouseleave",this._inputEvent),this._off(this._inputTag,"blur",this._inputEvent),this._off(this._inputTag,"focus",this._inputEvent),this._off(this._inputTag,"keyup",this._inputEvent),this._off(this.popupContainer,"focus",this._targetFocus),this._off(this.popupContainer,"blur",this._targetBlur)},_inputEvent:function(e){"focus"===e.type&&e.target.className.indexOf("e-color-code")>-1&&this._codeEditor.addClass("e-focus"),"blur"===e.type&&e.target.className.indexOf("e-color-code")>-1&&this._codeEditor.removeClass("e-focus"),this._clearIcon&&("focus"===e.type&&this._off(this._codeEditor,"mouseleave",this._inputEvent),"blur"===e.type&&this._on(this._codeEditor,"mouseleave",this._inputEvent),"keyup"===e.type&&(""!==this._inputTag.val()?(this._clearIcon.show(),this._handleArea.css("visibility","visible")):(this._clearIcon.hide(),this._handleArea.css("visibility","hidden"))),"mouseleave"===e.type||"blur"===e.type||""==this._inputTag.val()?this._clearIcon.hide():this._clearIcon.show())},_clearColor:function(e){this._tempValue="",this._inputTag.val(""),this._setEmptyValue(),"click"==e.type&&(this._clearIcon.hide(),this._inputTag.focus())},_containerClick:function(){"split"==this.model.buttonMode&&this._trigger("select",{value:this.value()})},_popupShown:function(e){if(13==e.keyCode)return this._showHidePopup(),this.isPopupOpen||this._buttonClick(e),!1},_recentColor:function(i){this._divTag.find(".e-select").removeClass("e-select").addClass("e-block");var s,a=i.target.attributes.getNamedItem("data-value"),r=i.target.attributes.style;if(t.isNullOrUndefined(a)||t.isNullOrUndefined(r))return this._change=!1,!1;e(i.target.parentNode).addClass("e-select").removeClass("e-block");var n=r.value.replace(/^(background-color:rgb|background-color:rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(",");t.isNullOrUndefined(n[3])?(this._browser.name="8.0"==this._browser.version)?(s=parseInt(r.nodeValue.replace(/^(FILTER: alpha)\(/,"").split("=")[1].split(")")[0]),this._opacity.option("value",s),this.rgb.a=s/100):(this._opacity.option("value",100),this.rgb.a=1):(this._opacity.option("value",parseInt((100*parseFloat(n[3])).toFixed(2))),this.rgb.a=parseFloat(parseFloat(n[3]).toFixed(2))),this._HexToHSV(a.value),this._inputTagValue(this._selectedButton),this._tempValue=this.RGBToHEX(this.rgb),this._valueOperation(),this._colorSlider.option("value",parseInt(this._hsv.h)),this._hueGradient(),this._changeEvent(!1),this.model.displayInline&&!this.element.is("input")||this.wrapper.focus()},_handleClick:function(t){t.preventDefault(),this._width=this._gradientArea.width(),this._height=this._gradientArea.height(),this.model.displayInline&&(this._isFocused=!0),this._handleArea.css("visibility","visible"),this.mouseDownPos=this._handlePos,e(document).on("mousemove touchmove",e.proxy(this._handleMovement,this)),e(document).on("mouseup touchend",e.proxy(this._handleUp,this))},_handleMove:function(e){this._handleArea.css("visibility","visible"),this._handleMovement(e),this._focusWrapper(e)},_handleMovement:function(e){if(!this.model.enabled)return!1;var t=e.pageX,i=e.pageY;this.element.is("input")&&this.wrapper.focus(),"touchstart"!=e.type&&"touchmove"!=e.type||(t=e.originalEvent.changedTouches[0].pageX,i=e.originalEvent.changedTouches[0].pageY),this._hsv.v=parseInt(100*(this._gradientArea.height()-Math.max(0,Math.min(this._gradientArea.height(),i-this._gradientArea.offset().top)))/this._gradientArea.height(),10),this._hsv.s=parseInt(100*Math.max(0,Math.min(this._gradientArea.width(),t-this._gradientArea.offset().left))/this._gradientArea.width(),10),this._hsvValue(),this._tempValue=this.RGBToHEX(this.rgb),this._change=!0,this._changeEvent(!1)},_handleUp:function(t){return e(document).off("mouseup touchend",this._handleUp),e(document).off("mousemove touchmove",this._handleMovement),this._focusWrapper(t),!1},_handlePosition:function(){this._handlePos=this._handleArea?{left:parseInt(parseInt(this._width)*this._hsv.s/100,10)+"px",top:parseInt(parseInt(this._height)*(100-this._hsv.v)/100,10)+"px"}:"",this._handleArea.css({left:this._handlePos.left,top:this._handlePos.top})},_addColor:function(){var t,i=this._divTag.find("> div");t="HSVA"!=this._selectedButton.html()?this._inputTag.val():this._formRGBA(this.HSVToRGB(this._hsv)),""!==t&&this._change&&this.model.showRecentColors&&i.length<=12&&(e(e(i)[i.length-2]).remove(),this._generateLi()),this.model.displayInline&&!this.element.is("input")||this.wrapper.focus()},_buttonClick:function(e){this._change=!0;this._inputTag.val(),this._divTag.find("div");if(this._opacity.option("value",this._tempOpacity),this._tempValue=this.RGBToHEX(this.rgb),this._updatePreviewColor(),""===this._inputTag.val()){if(this._tempValue="",!this.model.showClearButton)return this._inputTag.addClass("e-error"),!1;this._setValue("")}this._selectEvent(),this.element.is("input")&&(this._updateValue(),this.wrapper.focus()),!this.model.displayInline&&this.hide(),this._tempOpacity!==this.opacityValue()&&this.opacityValue(this._tempOpacity)},_generateLi:function(){this._liTag=t.buildTag("div.e-colorblock e-block e-colorset").attr({"data-value":this.RGBToHEX(this.rgb),tabindex:"0"});var e=t.buildTag("div.e-color e-set").attr({"data-value":this.RGBToHEX(this.rgb),title:this.RGBToHEX(this.rgb)});(this._browser.name="8.0"==this._browser.version)?e.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+100*this.rgb.a+")"}):e.css({"background-color":this._formRGBA(this.rgb)}),this._liTag.append(e),this._divTag.prepend(this._liTag)},_colorCodeValue:function(i){var s,a,r,n="",o=this._inputTag.val();if(s=e.trim(o),5==s.length&&this._inputTag.removeClass("e-error"),i.shiftKey&&i.keyCode>=35&&i.keyCode<=40||i.keyCode>=65&&i.keyCode<71||51==i.keyCode||i.ctrlKey&&(88==i.keyCode||86==i.keyCode)||190==i.keyCode?this._keyPressFlag=1:i.crtlKey||i.shiftKey||!(i.keyCode>=65&&i.keyCode<71||i.keyCode>=35&&i.keyCode<=40||i.keyCode>=96&&i.keyCode<=105||i.keyCode>=48&&i.keyCode<=57||13==i.keyCode||8==i.keyCode||46==i.keyCode||"blur"===i.type)?"#"==i.key||"("==i.key||")"==i.key||","==i.key?this._keyPressFlag=1:this._keyPressFlag=0:this._keyPressFlag=1,(this.model.enableOpacity&&(188==i.keyCode||71==i.keyCode||72==i.keyCode||82==i.keyCode||83==i.keyCode||86==i.keyCode)||i.shiftKey&&(57==i.keyCode||48==i.keyCode))&&(this._keyPressFlag=1),1==this._keyPressFlag){if(this._inputTag.removeClass("e-error"),13===i.keyCode||"blur"===i.type){""===s&&(this.model.showClearButton?this._setEmptyValue():this._inputTag.addClass("e-error"));var l=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/;if(a=s.match(l),t.isNullOrUndefined(a)){var d=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/;if(a=s.match(d),t.isNullOrUndefined(a)){var h=/^hsva?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/;if(a=s.match(h),t.isNullOrUndefined(a))return""!=s&&this._inputTag.addClass("e-error"),this._change=!1,!1;this._hsvColor(a)}else this._rgbaColor(a)}else{if(3===a[1].length)for(r=0;r<a[1].length;r++)n+=a[1][r]+a[1][r];else 6===a[1].length&&(n=a[1]);s=this.hexCodeToRGB("#"+n),this._inputTag.val("#"+n),this.rgb=this.HSVToRGB(this.RGBToHSV(s)),this._tempValue=this.RGBToHEX(this.rgb),this._change=!0}this._change&&(this._valueOperation(),this._colorSlider.option("value",parseInt(this._hsv.h)),this._hueGradient(),this._changeEvent(!1),!this.element.is("input")&&this._selectEvent(),""!==this._inputTag.val()&&this._inputTag.removeClass("e-error"))}}else 9!=i.keyCode&&i.preventDefault(),i.shiftKey||i.ctrlKey||27===i.keyCode||20==i.keyCode||this._inputTag.addClass("e-error")},_setEmptyValue:function(){this.popupContainer&&(this._handleArea.css("visibility","hidden"),this._currentTag.css({"background-color":""}),this._removeClass(),this._inputTag.val(null)),this._tempValue=null,this._previousValue!==this._tempValue&&(this._trigger("change",{value:null}),this._previousValue=this._tempValue)},_rgbaColor:function(e){var i={};if("rgba"!=e[0].split("(")[0]||t.isNullOrUndefined(e[4])){if("rgb"!=e[0].split("(")[0]||!t.isNullOrUndefined(e[4]))return this._inputTag.addClass("e-error"),this._change=!1,!1;i.r=e[1],i.g=e[2],i.b=e[3],i.a=this.rgb.a,this._inputTag.val("rgba("+i.r+","+i.g+","+i.b+","+i.a+")")}else i.r=e[1],i.g=e[2],i.b=e[3],i.a=e[4];this.rgb.a=parseFloat(i.a),this._tempOpacity=100*this.rgb.a,this._opacity.option("value",this._tempOpacity),this.opacityValue(this._tempOpacity),this._tempValue=this.RGBToHEX(i),this._HexToHSV(this._tempValue),this._inputTag.removeClass("e-error"),this._change=!0},_hsvColor:function(e){var i={};if(t.isNullOrUndefined(e[4]))return this._inputTag.addClass("e-error"),this._change=!1,!1;i.h=e[1],i.s=e[2],i.v=e[3],i.a=e[4],this.rgb.a=parseFloat(i.a),this._tempOpacity=100*this.rgb.a,this._opacity.option("value",this._tempOpacity),this.opacityValue(this._tempOpacity),this.rgb=this.HSVToRGB(i),this._tempValue=this.RGBToHEX(this.rgb),this._inputTag.removeClass("e-error"),this._change=!0},_iconClick:function(e){e.preventDefault(),this._showHidePopup(),this.wrapper.focus()},_showHidePopup:function(){if(this.model.displayInline)return!1;this.isPopupOpen?(this.hide(),this.wrapper.focus()):this.show()},hide:function(){var i=this;if(!this.isPopupOpen||this.model.displayInline)return!1;this.isPopupOpen=this._dataBind=!1,this.element.is("input")&&(this.wrapper.focus(),this.wrapper.removeClass("e-active")),this._width=this._gradientArea.width(),this._height=this._gradientArea.height(),this.popupContainer.slideUp(200,function(){i.model&&(i._tempOpacity=i.opacityValue(),i.rgb.a=i._tempOpacity/100,i._tempValue=i.value(),i._renderModelValue(i.value()),i._opacity.option("value",parseInt(i.opacityValue())),i.model.displayInline||i._off(e(document),"mousedown",i._onDocumentClick),i._trigger("close"))}),this.model.displayInline||this._off(e(document),"mousedown",this._onDocumentClick),this._off(this._inputTag,"keydown",this._colorCodeValue),this._off(this._inputTag,"blur",this._colorCodeValue),"palette"==this._modelType?this._off(e(document),"keydown",this._keyDown):this._off(e(document),"keydown",this._onKeyDown),this._off(t.getScrollableParents(this.wrapper),"scroll",this.hide),e(window).off("resize",e.proxy(this._OnWindowResize,this))},_hidePopup:function(){!this.model.displayInline&&this.hide()},show:function(){if(this.popupContainer||this._renderPopup(),this.element.is("input")&&(this.wrapper.focus(),this.wrapper.addClass("e-active")),this.isPopupOpen||!this.model.enabled)return!1;this.isPopupOpen=!0,"palette"==this.model.modelType&&this._cellSelect(),this.model.displayInline||""!==this.value()&&!t.isNullOrUndefined(this.value())?this._handleArea.css("visibility","visible"):this._setEmptyValue(),this._previousColor=this._previousValue=this.value(),this.popupContainer.children().find(".e-focus").removeClass("e-focus"),this.model.displayInline||this._setPopupPosition();var i=this;this.popupContainer.slideDown(200,function(){i.isFocused=!0,i._on(e(document),"mousedown",i._onDocumentClick),i._trigger("open")}),this._dataBind||("palette"==this._modelType?this._on(e(document),"keydown",this._keyDown):this._on(e(document),"keydown",this._onKeyDown)),this._on(this._inputTag,"keydown",this._colorCodeValue),this._on(this._inputTag,"blur",this._colorCodeValue),this._dataBind=!0,e(window).on("resize",e.proxy(this._OnWindowResize,this)),this.model.displayInline||this._on(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._prevSize!==e(window).width()&&this.refresh()},_showBindEvents:function(){"palette"==this._modelType?this._on(e(document),"keydown",this._keyDown):this._on(e(document),"keydown",this._onKeyDown)},_hideUnBindEvents:function(){"palette"==this._modelType?this._off(e(document),"keydown",this._onKeyDown):this._off(e(document),"keydown",this._keyDown)},_switchEvents:function(){this._switch?(this._on(this._gradientArea,"mousedown touchstart",this._handleMove),this._on(this._handleArea,"mousedown touchstart",this._handleClick),this._on(this._gradientArea,"mousedown touchstart",this._handleClick)):this._on(this._collection,"mousedown",this._onSelect)},_unSwitchEvents:function(){this._switch?this._off(this._collection,"mousedown",this._onSelect):(this._off(this._gradientArea,"mousedown touchstart",this._handleMove),this._off(this._handleArea,"mousedown touchstart",this._handleClick),this._off(this._gradientArea,"mousedown touchstart",this._handleClick))},_groupButton:function(t){if(e(t.target).hasClass("e-disable"))return!1;if(e(t.target).hasClass("e-button")){this._groupTag.find(".e-btn.e-select");""!==this._inputTag.val()?this._inputTagValue(e(t.target)):this._selectedButton=e(t.target),"HEX"!==this._selectedButton.html()?this._inputTag.attr("maxLength","22"):this._inputTag.attr("maxLength","7"),this._groupTag.find(".e-click").removeClass("e-click"),e(t.target).addClass("e-click"),this._inputTag.removeClass("e-error")}},_inputTagValue:function(e){"RGBA"==e.html()?this._inputTag.val(this._formRGBA(this.rgb)):"HEX"==e.html()?this._inputTag.val(this.RGBToHEX(this.rgb)):"HSVA"==e.html()&&"palette"!=this._modelType&&this._inputTag.val("hsva("+Math.round(this._hsv.h)+","+Math.round(this._hsv.s)+","+Math.round(this._hsv.v)+","+this.rgb.a+")"),this._selectedButton=e},_bindRecentEvent:function(){this._on(this._divTag,"click",this._recentColor)},_unBindRecentEvent:function(){this._off(this._divTag,"click",this._recentColor)},_handlePlacement:function(e,t,i){this._handleArea.css("visibility","visible");var s=this._hsv;s[e]+=t*(i?1:3),s[e]<0&&(s[e]=0),"s"===e?this._hsv.s=s[e]:this._hsv.v=s[e],this._hsvValue(),this._tempValue=this.RGBToHEX(this.rgb),this._changeEvent(!1)},_onKeyDown:function(t){var i=t.keyCode;if(this.model.enabled&&(t.shiftKey&&9==i&&e(this._hueSlider).find(".e-handle").hasClass("e-focus")&&this._focusWrapper(t),(this._isFocused||9!=i||27===i)&&(this._change=!0,!t.altKey&&!t.shiftKey)))switch(i){case 39:this.element.is("input")&&e(t.target).is(this.wrapper)&&(t.preventDefault(),this._handlePlacement("s",1,t.ctrlKey));break;case 38:this.element.is("input")&&e(t.target).is(this.wrapper)&&(t.preventDefault(),this._handlePlacement("v",1,t.ctrlKey));break;case 37:this.element.is("input")&&e(t.target).is(this.wrapper)&&(t.preventDefault(),this._handlePlacement("s",-1,t.ctrlKey));break;case 40:this.element.is("input")&&e(t.target).is(this.wrapper)&&(t.preventDefault(),this._handlePlacement("v",-1,t.ctrlKey));break;case 13:t.preventDefault(),e(t.target).hasClass("e-switcher")?(this._switchModel(),e(t.target).focus()):e(t.target).hasClass("e-applyButton")&&this._buttonClick(t);break;case 27:t.preventDefault(),!this.model.displayInline&&this.hide(),this._tempValue=this.value();break;case 9:var s=document.activeElement;e(s).is(this.wrapper)&&this._focusPopup(t)}},_focusPopup:function(t){e(this._hueSlider).find(".e-handle").focus(),t.preventDefault()},_focusWrapper:function(t){this.element.is("input")&&e(this.wrapper).focus(),t.preventDefault()},_onDocumentClick:function(t){e(t.target).is(this.popupContainer)||e(t.target).parents(".e-colorpicker").is(this.popupContainer)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-colorpickerwidget").is(this.wrapper)||e(t.target).parents(".e-presetWrapper").is("#"+this._id+"_Presets")||(this.model.displayInline||(this.hide(),this.element.is("input")&&this.wrapper.removeClass("e-focus")),this._isFocused=!1)},_OnWindowResize:function(e){this.element.is("input")&&this._setPopupPosition(),this.refresh()},refresh:function(){var t=e(this._PresetTable.find(".e-item")[1]);if(this.isPopupOpen?"picker"==this._modelType&&this.PaletteWrapper.css({display:"block",visibility:"hidden"}):(this.popupContainer.css({display:"block",visibility:"hidden"}),"palette"==this._modelType&&this.PaletteWrapper.css({display:"block",visibility:"hidden"})),parseFloat(this._tag.outerHeight())>t.outerHeight(!0)||e(this._tag).outerWidth()-10*e(t).outerWidth(!0)>t.outerWidth()||0==e(this._tag).outerWidth()){var i=parseFloat(e(this._tag).outerWidth())-36,s=i/10-(t.outerWidth()-t.width());this._PresetTable.find(".e-item").css("width",s),10*t.outerWidth(!0)>this._tag.outerWidth()&&this._PresetTable.find(".e-item").css("width",s-1)}this.isPopupOpen?"picker"==this._modelType&&this.PaletteWrapper.css({display:"none",visibility:"visible"}):(this.popupContainer.css({display:"none",visibility:"visible"}),"palette"==this._modelType&&this.PaletteWrapper.css({visibility:"visible"})),this._prevSize=e(window).width(),this._width=this._gradientArea.width(),this._height=this._gradientArea.height()},_range:function(e,t){return""===t?t=0:t>e?e:t},_hsvValue:function(){this._change=!0,this._hsv.v=this._hsv.v>=100?100:this._hsv.v,this._hsv.s=this._hsv.s>=100?100:this._hsv.s,this.hsv=this._hsv,this.rgb=this.HSVToRGB(this.hsv),this._valueOperation(),this._inputTagValue(this._selectedButton)},_formRGB:function(e){if(!t.isNullOrUndefined(e))return"rgb("+e.r+","+e.g+","+e.b+")"},_formRGBA:function(e){if(!t.isNullOrUndefined(e))return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},_rgbValue:function(e){var i;i=this._HexToRGB(this._tempValue),t.isNullOrUndefined(i)||(this.rgb=i,this._change=!0,this.HSVToRGB(this.RGBToHSV(this.rgb)),this._colorSlider.option("value",parseInt(this._hsv.h)),this._opacity.option("value",100*this.rgb.a)),this._valueOperation(),this._inputTagValue(this._selectedButton)},_valueOperation:function(){this._handlePosition(),this._alphaGradient(this._tempValue),this._inputTag.removeClass("e-error"),this._updateUI()},_HexToHSV:function(e){return this.HSVToRGB(this.RGBToHSV(this._HexToRGB(e)))},_HexToRGB:function(e){if(!t.isNullOrUndefined(e)){var e,i=e.match("^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$");if(t.isNullOrUndefined(i))return this._change=!1,!1;3==i[1].length&&(e="#"+i[1][0]+i[1][0]+i[1][1]+i[1][1]+i[1][2]+i[1][2]),this._change=!0,e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);var s=t.isNullOrUndefined(this.rgb)?parseFloat(this._tempOpacity)/100:this.rgb.a;return this.rgb={r:e>>16,g:(65280&e)>>8,b:255&e,a:s}}},RGBToHSV:function(e){var t={h:0,s:0,v:0},i=Math.min(e.r,e.g,e.b),s=Math.max(e.r,e.g,e.b),a=s-i;return t.v=s,t.v*=100/255,0===a?(this._hsv=t,t):(t.s=0!=s?255*a/s:0,0!=t.s?e.r==s?t.h=(e.g-e.b)/a:e.g==s?t.h=2+(e.b-e.r)/a:t.h=4+(e.r-e.g)/a:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,this._hsv=t,t)},HSVToRGB:function(e){var i={},s=parseFloat(e.h),a=parseFloat(255*e.s/100),r=parseFloat(255*e.v/100);if(0==a)i.r=i.g=i.b=r;else{var n=r,o=(255-a)*r/255,l=s%60*(n-o)/60;360==s&&(s=0),s<60?(i.r=n,i.b=o,i.g=o+l):s<120?(i.g=n,i.b=o,i.r=n-l):s<180?(i.g=n,i.r=o,i.b=o+l):s<240?(i.b=n,i.r=o,i.g=n-l):s<300?(i.b=n,i.g=o,i.r=o+l):s<360?(i.r=n,i.g=o,i.b=n-l):(i.r=0,i.g=0,i.b=0)}this._hsv=e;var d=t.isNullOrUndefined(this.rgb)?parseFloat(this._tempOpacity)/100:this.rgb.a;return{r:Math.round(i.r),g:Math.round(i.g),b:Math.round(i.b),a:d}},_HSVToHex:function(e){return this.RGBToHEX(this.HSVToRGB(e))},_toHEX:function(e){return-1!==e.indexOf("#")?e:(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+this._hex(e[1])+this._hex(e[2])+this._hex(e[3]))},RGBToHEX:function(e){if(!t.isNullOrUndefined(e))return"#"+this._hex(e.r)+this._hex(e.g)+this._hex(e.b)},_hex:function(e){return("0"+parseInt(e).toString(16)).slice(-2)},_colorValue:function(e){return this._color=-1!=e.indexOf("#")?this.hexCodeToRGB(e):"","rgb("+this._color.r+", "+this._color.g+", "+this._color.b+")"},hexCodeToRGB:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:this.rgb.a}:null},_updatePreviewColor:function(){(this._browser.name="8.0"==this._browser.version)?this._previousTag.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+100*this.rgb.a+")"}):this._previousTag.css({"background-color":this._formRGBA(this.rgb)}),this._oldValue=this.rgb},_updateUI:function(){var e=this._hsv;if(this._switch){var t={h:this._hsv.h,s:100,v:100};this._gradientArea.css({"background-color":this._colorValue(this._HSVToHex(t))})}else this._cellSelect();(this._browser.name="8.0"==this._browser.version)?(this._currentTag.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+100*this.rgb.a+")"}),this._previousTag.css({"background-color":this._formRGB(this._oldValue),filter:"alpha(opacity="+100*this.rgb.a+")"})):(this._currentTag.css({"background-color":this._formRGBA(this.rgb)}),this._previousTag.css({"background-color":this._formRGBA(this._oldValue)}),this._alphaSlider.children(".e-handle").css({background:this._formRGBA(this.rgb)})),this._hsv=e},_targetFocus:function(e){e.preventDefault(),this._isFocused||(this._isFocused=!0,this.element.is("input")&&this.wrapper.addClass("e-focus"))},_targetBlur:function(e){this._isFocused=!1,!this.isPopupOpen&&this.element.is("input")&&this.wrapper.removeClass("e-focus")},_switchModel:function(){this._tempValue=this.RGBToHEX(this.rgb),this.refresh();var e=this;this._off(this._changeTag,"click",this._switchModel),"palette"==this._modelType?(this._modelType="picker",this._switcher.removeClass("e-pickerModel").addClass("e-paletteModel"),this.PaletteWrapper.fadeOut(300,function(){e._presetTag.parents(".e-split.e-widget").addClass("e-hide"),e._gradient.fadeIn(300),e._on(e._changeTag,"click",e._switchModel)}),this._switch=!0,this._rgbValue(),this._hueGradient(),this._hsva.ejButton("enable")):(this.PaletteWrapper.remove(),this._modelType="palette",this.PaletteWrapper=this._layoutType(this.model.palette),this._gradient.addClass("e-hide"),this._paletteType(),this._switcher.removeClass("e-paletteModel").addClass("e-pickerModel"),this._gradient.fadeOut(300,function(){e._presetTag.parents(".e-split.e-widget").removeClass("e-hide"),t.isNullOrUndefined(e.PaletteWrapper)&&(e.PaletteWrapper=e._layoutType(e.model.palette),e._splitObj.option("prefixIcon","e-color-image e-"+e.model.presetType),e.popupList.prepend(e.PaletteWrapper)),e.PaletteWrapper.fadeIn(300),e._on(e._changeTag,"click",e._switchModel)}),""!==this.value()&&this._cellSelect(),this._disableHSVButton()),"custompalette"===this.model.palette&&this._presetTag.parents(".e-split.e-widget").addClass("e-hide"),this.model.displayInline&&!this.element.is(":input")||this.wrapper.focus(),this._switchEvents(),this._unSwitchEvents(),this.isPopupOpen&&(this._hideUnBindEvents(),this._showBindEvents())},_disableHSVButton:function(){e(this._groupTag.find(".e-click")).hasClass("e-hsvButton")&&(this._inputTagValue(this._rgb),this._rgb.addClass("e-click"),this._hsva.removeClass("e-click")),this._hsva.ejButton("disable")},_cellSelect:function(){var t,i,s=this;this._removeClass(),this._collection.find(".e-item").each(function(){t=e(this).css("background-color"),
(s._browser.name="8.0"==s._browser.version)?t&&t.replace(/ /g,"")===s.RGBToHEX(s.rgb)&&(i=this,e(i).addClass("e-filter")):t&&t.replace(/ /g,"")===s._formRGB(s.rgb)&&(i=this)}),e(i).addClass("e-state-selected").attr("aria-selected",!0)},_removeClass:function(){this._collection.find(".e-item").removeClass("e-state-selected").removeClass("e-filter").removeAttr("aria-selected")},_position:function(e,t,i){e=Array.prototype.slice.call(e);var s=e.length,a=e.indexOf(t);return a<0?i<0?e[s-1]:e[0]:(a+=i,e[a<0?a+=s:a%=s])},_onSelect:function(e){if(!this.model.enabled)return!1;this._isFocused=!0,this._handleArea.css("visibility","visible"),""!=e.target.style.backgroundColor&&(this._collection.find(".e-item").removeClass("e-state-selected").removeAttr("aria-selected"),this._HexToRGB(this._toHEX(e.target.style.backgroundColor)),this._updateUI(),this._inputTagValue(this._selectedButton),this.model.displayInline&&!this.element.is("input")||this.wrapper.focus(),this._tempValue=this.RGBToHEX(this.rgb),this._changeEvent(!1)),e.preventDefault()},_keyDown:function(t){if(this._isFocused){if(this._change=!0,!this.model.enabled)return!1;var i="",s=t.keyCode,a=this._collection.find(".e-item"),r=a.filter(".e-state-selected").get(0),n=this.model.columns;switch(t.altKey||37!=s&&38!=s&&39!=s&&40!=s||"e-color-code"===t.target.className||this._removeClass(),!t.altKey&&s){case 40:"e-color-code"!==t.target.className&&(t.preventDefault(),i=this._position(a,r,n));break;case 37:"e-color-code"!==t.target.className&&(t.preventDefault(),i=this._position(a,r,-1));break;case 38:"e-color-code"!==t.target.className&&(t.preventDefault(),i=this._position(a,r,-n));break;case 39:"e-color-code"!==t.target.className&&(t.preventDefault(),i=this._position(a,r,1));break;case 13:this._collection.find(".e-item").removeClass("e-state-selected").removeAttr("aria-selected"),e(t.target).hasClass("e-switcher")?(this._switchModel(),e(t.target).focus()):e(t.target).hasClass("e-applyButton")&&(this._buttonClick(t),this._updateUI(),!this.model.displayInline&&this.hide(),this.element.is("input")&&this.wrapper.focus());break;case 27:!this.model.displayInline&&this.hide(),e(this._presetContainer).hide(),this.element.is("input")&&this.wrapper.focus();break;case 9:var o=document.activeElement;e(o).is(this.wrapper)&&this._focusPalettePopup(t,!0)}i&&(e(i).addClass("e-state-selected").attr("aria-selected",!0),this._currentTag.css({"background-color":this._formRGB(this._HexToRGB(e(i).attr("data-value")))}),this._inputTagValue(this._selectedButton),this._tempValue=this.RGBToHEX(this.rgb),this._changeEvent(!1))}else 27==t.keyCode&&(this.hide(),e(this._presetContainer).hide())},_focusPalettePopup:function(t,i){e(this.popupContainer).focus(),t.preventDefault()}}),t.ColorPicker.Locale=t.ColorPicker.Locale||{},t.ColorPicker.Locale.default=t.ColorPicker.Locale["en-US"]={buttonText:{apply:"Apply",cancel:"Cancel",swatches:"Swatches"},tooltipText:{switcher:"Switcher",addButton:"Add Color",basic:"Basic",monoChrome:"Mono Chrome",flatColors:"Flat Colors",seaWolf:"Sea Wolf",webColors:"Web Colors",sandy:"Sandy",pinkShades:"Pink Shades",misty:"Misty",citrus:"Citrus",vintage:"Vintage",moonLight:"Moon Light",candyCrush:"Candy Crush",currentColor:"Current Color",selectedColor:"Selected Color"}},t.ColorPicker.Palette={BasicPalette:"basicpalette",CustomPalette:"custompalette"},t.ColorPicker.ModelType={Palette:"palette",Picker:"picker"},t.ColorPicker.ButtonMode={Default:"dropdown",Split:"split"},t.ColorPicker.PresetType={Basic:"basic",MonoChrome:"monochrome",FlatColors:"flatcolors",SeaWolf:"seawolf",WebColors:"webcolors",Sandy:"sandy",PinkShades:"pinkshades",Misty:"misty",Citrus:"citrus",Vintage:"vintage",MoonLight:"moonlight",CandyCrush:"candycrush"};var s={basic:["ffffff","facbcb","fccb98","faf39a","fbf8cd","a6d38b","aadee8","d1ecf2","cdcae5","eecde1","cccbcb","f16667","f69668","f8ee6b","f7ec37","89c987","75cddd","8bd3e1","7f7fcc","9494c8","b3b2b3","ec2024","f7971d","ffcb67","f5ea14","74bf44","69c8c9","46c7f4","6666ad","b76cab","676767","971b1e","ca6828","ca9732","979937","0d9948","339898","4857a6","62449a","973794","000000","2f1110","973620","663433","343416","183319","023334","22205f","3b2f8d","310e31"],monochrome:["ffffff","e3e3e3","c6c6c6","aaaaaa","8e8e8e","717171","555555","393939","1c1c1c","000000","f9e6e7","f4d0d2","efbabc","e9a4a7","e48e92","df787c","da6267","d44c52","cf363c","ca2027","fff4ca","ffeb9e","fff0b4","ffefb1","ffe788","ffe272","ffd947","ffd531","ffd01b","ffcc05","e4f4eb","ccead9","b4e0c7","9cd6b5","84cca3","6dc190","55b77e","3dad6c","25a35a","0d9948","e8f4f4","d6e3eb","c4d1e3","b3c0da","a1aed1","8f9dc9","7d8bc0","6c7ab7","5a68af","4857a6"],flatcolors:["7477b8","488bca","18b1d4","1db369","78c162","acc063","ffe84e","f6b757","f79853","ed6346","E87F3D","E4C45D","B7A575","999999","67809F","002228","00A578","F9A41F","F3770B","D7401B","FFCB36","82CC2C","36B595","6370AD","D4264E","004D8E","22A04B","F3A414","C77405","F3420B","1ABC9C","3498DB","9B59B6","E67E22","E74C3C","3A738A","EBD9A7","89AD78","FF766D","C76160","BF3542","CDC5BA","EBE3D6","3C3C3C","2E2E2E","77A7FB","E57368","FBCB43","34B67A","FFFFFF"],seawolf:["0EEAFF","15A9FA","1B76FF","1C3FFD","2C1DFF","0B3C4C","0E5066","13647F","127899","1A8BB2","74B8E8","659EBB","3C9FFF","26466F","2472FF","0069A4","009BF2","004165","49A0B4","274C5F","000000","7A5848","E0A088","F9DEC6","3A2A22","DC3522","D9CB9E","374140","2A2C2B","1E1E20","CB3937","FE6B2C","654E44","6DD16F","70FE2C","275673","4681A6","FDDEC9","F22816","400101","071C2F","388494","E6A934","F3DB5F","534329","206956","47683B","E1BFA6","BF7950","903932"],webcolors:["0066aa","00bbdd","338800","77bb00","ffcc99","990c0c","0303c9","336699","669933","cccccc","EEEEEE","E7C36F","F7B230","E35B20","000033","7D7A74","BD524A","FCB200","8CFCC2","2ACD6B","666666","666553","FFFEEC","B2B2A4","AAA4B2","9CA5E3","5A668C","BBA469","CFC295","FFFFFF","DBBF56","2E94B3","808080","E96656","14A168","DE185B","D8806F","DBE186","D8CC63","DCC527","4E6C89","E2BDAD","EC6053","81BBAD","DFCDA5","453394","66398A","313E7D","336694","788E91"],sandy:["c0a986","ecd9c3","dfc79b","f6d58e","ecdaad","fff3e0","7f6b4a","ffd694","7f7a70","ccac76","E6E2AF","A79A71","EFECCA","806F4C","2F2F2E","997F1A","CCB65F","FFD291","6B674A","635F3A","7F693A","FFEBC1","FFD275","7F7561","CCA85E","D29854","4A4034","C9AD8D","4A351D","968169","E6E39F","9A9757","FFFDC9","94909A","E2E0E6","960010","EB1517","CD7C29","9A571C","1F7A94","7F6826","7F724C","FFE499","FFD04C","CCA63D","FFA669","92FFB6","FFF352","E8C269","D7E8CB"],pinkshades:["F6B1C3","F0788C","DE264C","BC0D35","A20D1E","E12256","BB1C48","7B132F","3B0917","FA2660","FFB7B5","9A423F","FF6D68","BB5855","CC5753","E88161","D66C60","C2646E","996072","705262","FFA1BD","FF8FB7","FF82AE","E9719B","CC6882","F250C7","BF1774","BF2696","AC60AA","BB90C5","BF1553","F20775","F2F2F2","e5566d","f2afc1","f43fa5","fc8c99","FF6887","7F3443","CC536C","D06AA9","E65F41","650017","BC1620","FA427E","3B1132","84476E","B83D65","E6E0E8","FF6EE8"],misty:["5C7A84","3D5372","7C9196","50748A","ADBFBF","010735","052159","194073","376B8C","FFFFFF","985999","C811CC","892EFF","FF6852","DBA211","0A0D0C","85A67C","46593E","BBD9AD","202616","BF8E63","734327","A66C4B","593A2F","BFBFBF","8DB0B6","1B778A","F46C1B","881801","192129","81808C","ABAABF","0C0E09","6A7366","37402F","5D6663","84867B","A4A66A","BABBB1","20211C","6B9695","646E8C","6B8196","61787F","648C80","8E9FBA","89A8C8","799ED1","7FAEE7","849EBD"],citrus:["FAEA41","E7F03E","E3C647","FAC541","F0AB3E","CCCA1F","FFF300","FFCB0D","FF9500","804A00","6A692A","FFFCA0","FFFFFF","CF664E","EFAC66","EFF299","F2DC6D","F29727","F2600C","592202","214001","4F7302","1A2601","BCD97E","C0D904","AAFEFF","359D6D","E5FF45","65FCCF","ABDC4B","42B200","C6FF00","F2E304","FFB200","FF8600","52EC04","04E206","94D507","ECE404","E2C904","DA321C","FF7913","FBD028","C0D725","9FC131","547312","ADBF26","DEB329","F1DB47","E08214"],vintage:["684132","fdbe30","eaac21","87783c","3e4028","ffc706","cd5648","5bafa9","828282","363636","424862","fb9a63","bfc4d5","f6fbf4","febc98","657050","FCF082","D8D98B","A2AB80","4D584A","5ADED4","4DAAAB","26596A","163342","6C98A1","010A26","28403B","557359","AEBF8A","C7D9AD","AFFCCB","CB4243","D2997E","36857E","4AC6BB","28394B","191313","AF0A18","DC373D","122438","43734A","A6A26D","D9B448","BF8C2C","734002","26010F","866F53","ACBD91","7BAB87","546859"],moonlight:["241D37","2A233D","322B45","362F49","D4BA73","261225","592040","8C3063","A64985","73345D","A3C8FF","85B6FF","000040","213190","050859","FFFFFF","6AAED9","4184BF","224573","2e4154","bcad7e","955351","c36a57","9a8556","7e6029","dbd78e","beae3b","c3a04c","58504d","967644","CFC496","B3B391","889486","61797B","366577","123340","436E73","7B8C61","D7D996","F0EBB4","341F36","D9B5E0","9889AB","4D4E66","1B2129","5CBBE3","FCF1BC","5C8182","383A47","B4F257"],candycrush:["0779f4","30da00","fb8006","f9d802","a71df7","f70200","fd49ae","682e07","9b2424","5e7693","F9AB3B","EF5627","FF0000","00A398","803C2C","DE5711","FFF026","FF0048","14A0CC","00B229","FFFFBE","F7CD99","FF77A1","9886E8","97CACB","EAEDE5","FFD127","FF870C","EC4610","9A1900","993460","CC1464","C300FF","FFFFBC","CCB914","FFFEE2","B24C5F","FF274F","0A94CC","679DB2","C2FFE6","16B271","5FFFBC","B2442F","FFA190","E89359","FFFB75","F36EFF","5999E8","73EB86"]}}(jQuery,Syncfusion),window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i,s){"use strict";t.DataManager=function(i,s,a){if(!(this instanceof t.DataManager))return new t.DataManager(i,s,a);i||(i=[]),"string"==typeof(a=a||i.adaptor)&&(a=new t[a]);var r=[],n=this;return i instanceof Array?r={json:i,offline:!0}:"object"==typeof i?e.isPlainObject(i)?(i.json||(i.json=[]),i.table&&(i.json=this._getJsonFromElement(i.table,i.headerOption)),r={url:i.url,insertUrl:i.insertUrl,removeUrl:i.removeUrl,updateUrl:i.updateUrl,crudUrl:i.crudUrl,batchUrl:i.batchUrl,json:i.json,headers:i.headers,accept:i.accept,data:i.data,async:i.async,timeTillExpiration:i.timeTillExpiration,cachingPageSize:i.cachingPageSize,enableCaching:i.enableCaching,requestType:i.requestType,key:i.key,crossDomain:i.crossDomain,antiForgery:i.antiForgery,jsonp:i.jsonp,dataType:i.dataType,enableAjaxCache:i.enableAjaxCache,offline:void 0!==i.offline?i.offline:!("remoteSaveAdaptor"==i.adaptor||i.adaptor instanceof t.remoteSaveAdaptor)&&!i.url,requiresFormat:i.requiresFormat}):(i.jquery||k(i))&&(r={json:this._getJsonFromElement(i),offline:!0,table:i}):"string"==typeof i&&(r={url:i,offline:!1,dataType:"json",json:[]}),void 0!==r.requiresFormat||t.support.cors||(r.requiresFormat=!!P(r.crossDomain)||r.crossDomain),r.antiForgery&&this.antiForgeryToken(),void 0===r.dataType&&(r.dataType="json"),this.dataSource=r,this.defaultQuery=s,r.url&&r.offline&&!r.json.length?(this.isDataAvailable=!1,this.adaptor=a||new t.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(s||t.Query()).done(function(e){n.dataSource.offline=!0,n.isDataAvailable=!0,r.json=e.result,n.adaptor=new t.JsonAdaptor})):this.adaptor=r.offline?new t.JsonAdaptor:new t.ODataAdaptor,!r.jsonp&&this.adaptor instanceof t.ODataAdaptor&&(r.jsonp="callback"),this.adaptor=a||this.adaptor,r.enableCaching&&(this.adaptor=new t.CacheAdaptor(this.adaptor,r.timeTillExpiration,r.cachingPageSize)),this},t.DataManager.prototype={setDefaultQuery:function(e){this.defaultQuery=e},executeQuery:function(i,s,a,r){"function"==typeof i&&(r=a,a=s,s=i,i=null),i||(i=this.defaultQuery),i instanceof t.Query||M("DataManager - executeQuery() : A query is required to execute");var n=e.Deferred();n.then(s,a,r);var o={query:i};if(this.dataSource.offline||void 0==this.dataSource.url)t.isNullOrUndefined(this.dataSource.async)||0!=this.dataSource.async?y(function(){this._localQueryProcess(i,o,n)},this):this._localQueryProcess(i,o,n);else{var l=this.adaptor.processQuery(this,i);t.isNullOrUndefined(l.url)?y(function(){o=this._getDeferedArgs(i,l,o),n.resolveWith(this,[o])},this):this._makeRequest(l,n,o,i)}return n.promise()},_localQueryProcess:function(e,t,i){var s=this.executeLocal(e);t=this._getDeferedArgs(e,s,t),i.resolveWith(this,[t])},_getDeferedArgs:function(e,t,i){return e._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=D(e._fromTable,i.result,this),i.getKnockoutModel=I(i.result),i},executeLocal:function(i){this.defaultQuery||i instanceof t.Query||M("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||M("DataManager - executeLocal() : Json data is required to execute"),i=i||this.defaultQuery;var s=this.adaptor.processQuery(this,i);if(i._subQuery){var r=i._subQuery._fromTable,n=i._subQuery._lookup,o=i._requiresCount?s.result:s;n&&n instanceof Array&&a(i._subQuery._fKey,r,o,n,i._subQuery._key);for(var l=0;l<o.length;l++)o[l][r]instanceof Array&&(o[l]=e.extend({},o[l]),o[l][r]=this.adaptor.processResponse(i._subQuery.using(t.DataManager(o[l][r].slice(0))).executeLocal(),this,i))}return this.adaptor.processResponse(s,this,i)},_makeRequest:function(i,s,r,n){var o=!!n._subQuerySelector,l=E(function(e){r.error=e,s.rejectWith(this,[r])},this),d=E(function(e,t,i,a,l,d,h){o||(r.xhr=i,r.count=parseInt(t,10),r.result=e,r.request=a,r.aggregates=d,r.getTableModel=D(n._fromTable,e,this),r.getKnockoutModel=I(e),r.actual=l,r.virtualSelectRecords=h,s.resolveWith(this,[r]))},this),h=E(function(t,i){var s=e.Deferred(),h={parent:r};n._subQuery._isChild=!0;var c=this.adaptor.processQuery(this,n._subQuery,t?this.adaptor.processResponse(t):i),u=this._makeRequest(c,s,h,n._subQuery);return o||s.then(function(e){t&&(a(n._subQuery._fKey,n._subQuery._fromTable,t,e,n._subQuery._key),d(t))},l),u},this),c=A(function(e,i,s,a){-1==s.getResponseHeader("Content-Type").indexOf("xml")&&t.dateParse&&(e=t.parseJSON(e));var r=this.adaptor.processResponse(e,this,n,s,a),l=0,c=null,u=e.virtualSelectRecords;if(n._requiresCount&&(l=r.count,c=r.aggregates,r=r.result),!n._subQuery)return void d(r,l,s,a,e,c,u);o||h(r)},this),u=e.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!!t.isNullOrUndefined(this.dataSource.enableAjaxCache)||this.dataSource.enableAjaxCache,beforeSend:E(this._beforeSend,this),processData:!1,success:c,error:l},i);if("async"in this.dataSource&&(u.async=this.dataSource.async),u=e.ajax(u),o){var p=n._subQuerySelector.call(this,{query:n._subQuery,parent:n});p&&p.length?(u=e.when(u,h(null,p)),u.then(A(function(e,t,i){var s=this.adaptor.processResponse(e[0],this,n,e[2],i[0]),r=0;n._requiresCount&&(r=s.count,s=s.result);var l=this.adaptor.processResponse(t[0],this,n._subQuery,t[2],i[1]),r=0;n._subQuery._requiresCount&&(r=l.count,l=l.result),a(n._subQuery._fKey,n._subQuery._fromTable,s,l,n._subQuery._key),o=!1,d(s,r,e[2])},this),l)):o=!1}return u},_beforeSend:function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,s=this.dataSource.headers,a=0;s&&a<s.length;a++){i=[];for(var r in s[a])i.push(r),e.setRequestHeader(r,s[a][r])}},saveChanges:function(i,s,a,r){a instanceof t.Query&&(r=a,a=null);var n={url:a,key:s||this.dataSource.key},o=this.adaptor.batchRequest(this,i,n,r);if(this.dataSource.offline)return o;var l=e.Deferred();return e.ajax(e.extend({beforeSend:E(this._beforeSend,this),success:A(function(e,t,a,r){l.resolveWith(this,[this.adaptor.processResponse(e,this,null,a,r,i,s)])},this),error:function(e){l.rejectWith(this,[{error:e}])}},o)),l.promise()},insert:function(i,s,a){i=n.replacer(i,!0),s instanceof t.Query&&(a=s,s=null);var r=this.adaptor.insert(this,i,s,a);if(this.dataSource.offline)return r;var o=e.Deferred();return e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:E(this._beforeSend,this),success:A(function(e,i,s,a){try{t.isNullOrUndefined(e)?e=[]:n.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(n.parseJson(e),this,null,s,a),o.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){o.rejectWith(this,[{error:e,dataManager:this}])}},r)),o.promise()},antiForgeryToken:function(){if(t.isNullOrUndefined(e("input[name='_ejRequestVerifyToken']").val())){t.buildTag("input","","",{type:"hidden",name:"_ejRequestVerifyToken",value:t.getGuid()}).appendTo("body")}else e("input[name='_ejRequestVerifyToken']").val(t.getGuid());return t.cookie.set("_ejRequestVerifyToken",e("input[name='_ejRequestVerifyToken']").val()),{name:"_ejRequestVerifyToken",value:e("input[name='_ejRequestVerifyToken']").val()}},remove:function(i,s,a,r){"object"==typeof s&&(s=s[i]),a instanceof t.Query&&(r=a,a=null);var o=this.adaptor.remove(this,i,s,a,r);if(this.dataSource.offline)return o;var l=e.Deferred();return e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:E(this._beforeSend,this),success:A(function(e,i,s,a){try{t.isNullOrUndefined(e)?e=[]:n.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(n.parseJson(e),this,null,s,a),l.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){l.rejectWith(this,[{error:e,dataManager:this}])}},o)),l.promise()},update:function(i,s,a,r){s=n.replacer(s,!0),a instanceof t.Query&&(r=a,a=null);var o=this.adaptor.update(this,i,s,a,r);if(this.dataSource.offline)return o;var l=e.Deferred();return e.ajax(e.extend({contentType:"application/json; charset=utf-8",beforeSend:E(this._beforeSend,this),success:A(function(e,i,s,a){try{t.isNullOrUndefined(e)?e=[]:n.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(n.parseJson(e),this,null,s,a),l.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){l.rejectWith(this,[{error:e,dataManager:this}])}},o)),l.promise()},_getJsonFromElement:function(i){"string"==typeof i&&(i=e(e(i).html())),i=i.jquery?i[0]:i;var s=i.tagName.toLowerCase();return"table"!==s&&M("ej.DataManager : Unsupported htmlElement : "+s),t.parseTable(i)}};var a=function(e,i,s,a,r){var n,o,l={};for(a.result&&(a=a.result),a.GROUPGUID&&M("ej.DataManager: Do not have support Grouping in hierarchy"),n=0;n<a.length;n++){var d=t.getObject(e,a[n]);o=l[d]||(l[d]=[]),o.push(a[n])}for(n=0;n<s.length;n++)s[n][i]=l[t.getObject(r||e,s[n])]},r={accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},n={parseJson:function(e){var t=typeof e;return"string"===t?e=JSON.parse(e,n.jsonReviver):e instanceof Array?n.iterateAndReviveArray(e):"object"===t&&n.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?n.iterateAndReviveJson(e[t]):"string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?e[t]=n.parseJson(e[t]):e[t]=n.jsonReviver("",e[t])},iterateAndReviveJson:function(e){var t;for(var i in e)i.startsWith("__")||(t=e[i],"object"==typeof t?t instanceof Array?n.iterateAndReviveArray(t):n.iterateAndReviveJson(t):e[i]=n.jsonReviver(i,t))},jsonReviver:function(e,i){var s=i,a=/[\-,\/,\,.,:,]+/;if("string"==typeof i){var r=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(r)return t.parseDateInUTC?n.isValidDate(r[0]):n.replacer(new Date(parseInt(r[1])));if(t.dateParse?/^(?:(\d{4}\-\d\d\-\d\d)|(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?)$/.test(i):/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var o=s.split(/[^0-9]/);/^(\d{4}\-\d\d\-\d\d)$/.test(i)?i=new Date(o[t.dateFormat.split(a).indexOf("yyyy")],o[t.dateFormat.split(a).indexOf("MM")]-1,o[t.dateFormat.split(a).indexOf("dd")]):(i=t.parseDateInUTC?n.isValidDate(i):n.replacer(new Date(i)),isNaN(i)&&(i=n.replacer(new Date(o[0],o[1]-1,o[2],o[3],o[4],o[5]))))}}return i},isValidDate:function(e){var t=e;if("string"==typeof t&&0==t.indexOf("/Date(")&&(e=t.replace(/\d+/,function(e){var t=6e4*new Date(parseInt(e)).getTimezoneOffset(),i=parseInt(e)+t;return n.replacer(new Date(parseInt(i)))})),"string"==typeof e){e=e.replace("/Date(",function(){return""}),e=e.replace(")/",function(){return""});return new Date(e)instanceof Date?new Date(e):e}return e},isJson:function(e){return"string"==typeof e[0]?e:t.parseJSON(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e,i){return t.isPlainObject(e)?n.jsonReplacer(e,i):e instanceof Array?n.arrayReplacer(e):e instanceof Date?n.jsonReplacer({val:e},i).val:e},jsonReplacer:function(e,i){var s;for(var a in e)if((s=e[a])instanceof Date){var r=60*t.serverTimezoneOffset*60*1e3*(t.isNullOrUndefined(i)||!1===i?1:-1);e[a]=new Date(+s+r)}return e},arrayReplacer:function(e){for(var i=0;i<e.length;i++)t.isPlainObject(e[i])?e[i]=n.jsonReplacer(e[i]):e[i]instanceof Date&&(e[i]=n.jsonReplacer({date:e[i]}).date);return e}};t.isJSON=n.isJson,t.parseJSON=n.parseJson,t.dateParse=!0,t.dateFormat="yyyy-MM-dd",t.isGUID=n.isGuid,t.Query=function(e){return this instanceof t.Query?(this.queries=[],this._key="",this._fKey="","string"==typeof e?this._fromTable=e||"":e&&e instanceof Array&&(this._lookup=e),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new t.Query(e)},t.Query.prototype={key:function(e){return"string"==typeof e&&(this._key=e),this},using:function(e){return e instanceof t.DataManager?(this.dataManagar=e,this):M("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(e,i,s,a){return e=e||this.dataManagar,e&&e instanceof t.DataManager?e.executeQuery(this,i,s,a):M("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(e){return e=e||this.dataManagar,e&&e instanceof t.DataManager?e.executeLocal(this):M("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var e=new t.Query;return e.queries=this.queries.slice(0),e._key=this._key,e._isChild=this._isChild,e.dataManagar=this.dataManager,e._fromTable=this._fromTable,e._params=this._params.slice(0),e._expands=this._expands.slice(0),e._sortedColumns=this._sortedColumns.slice(0),e._groupedColumns=this._groupedColumns.slice(0),e._subQuerySelector=this._subQuerySelector,e._subQuery=this._subQuery,e._fKey=this._fKey,e._requiresCount=this._requiresCount,e},from:function(e){return"string"==typeof e&&(this._fromTable=e),this},addParams:function(e,i){return"function"==typeof i||t.isPlainObject(i)?"function"==typeof i&&this._params.push({key:e,fn:i}):this._params.push({key:e,value:i}),this},expand:function(e){return this._expands="string"==typeof e?[].slice.call(arguments,0):e.slice(0),this},where:function(e,i,s,a,r){i=(i||t.FilterOperators.equal).toLowerCase();var n=null;return"string"==typeof e?n=new t.Predicate(e,i,s,a,r):e instanceof t.Predicate?n=e:M("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:n}),this},search:function(e,i,s,a,r){i&&"boolean"!=typeof i?"string"==typeof i&&(i=[i]):(i=[],a=i),"boolean"==typeof s&&(a=s,s=null),s=s||t.FilterOperators.contains,s.length<3&&(s=t.data.operatorSymbols[s]);var n=t.data.fnOperators[s]||t.data.fnOperators.processSymbols(s);return this.queries.push({fn:"onSearch",e:{fieldNames:i,operator:s,searchKey:e,ignoreCase:a,ignoreAccent:r,comparer:n}}),this},sortBy:function(e,i,s){var a,r,n=t.sortOrder.Ascending;if("string"==typeof e&&e.toLowerCase().endsWith(" desc")&&(e=e.replace(/ desc$/i,""),i=t.sortOrder.Descending),e instanceof Array){for(var l=0;l<e.length;l++)this.sortBy(e[l],i,s);return this}if("boolean"==typeof i?i=i?t.sortOrder.Descending:t.sortOrder.Ascending:"function"==typeof i&&(n="custom"),i&&"string"!=typeof i||(n=i?i.toLowerCase():t.sortOrder.Ascending,i=t.pvt.fnSort(i)),s){a=o(this.queries,"onSortBy");for(var l=0;l<a.length;l++)if("string"==typeof(r=a[l].e.fieldName)){if(r===e)return this}else if(r instanceof Array)for(var d=0;d<r.length;d++)if(r[d]===e||e.toLowerCase()===r[d]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:i,direction:n}}),this},sortByDesc:function(e){return this.sortBy(e,t.sortOrder.Descending)},group:function(e,t){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,fn:t}}),this},page:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},range:function(e,t){return"number"==typeof e&&"number"==typeof t||M("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},take:function(e){return"number"!=typeof e&&M("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:e}}),this},skip:function(e){return"number"!=typeof e&&M("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:e}}),this},select:function(e){return"string"==typeof e&&(e=[].slice.call(arguments,0)),e instanceof Array||M("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},hierarchy:function(e,i){return e&&e instanceof t.Query||M("Query() - hierarchy : query must be instance of ej.Query"),"function"==typeof i&&(this._subQuerySelector=i),this._subQuery=e,this},foreignKey:function(e){return"string"==typeof e&&(this._fKey=e),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(e,t){this.queries.push({fn:"onAggregates",e:{field:t,type:e}})}},t.Adaptor=function(e){this.dataSource=e,this.pvt={},this.init.apply(this,[].slice.call(arguments,1))},t.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",antiForgery:"antiForgery"},init:function(){},extend:function(t){var i=function(t){this.dataSource=t,this.options&&(this.options=e.extend({},this.options)),this.init.apply(this,[].slice.call(arguments,0)),this.pvt={}};i.prototype=new this.type,i.prototype.type=i;var s=i.prototype.base={};for(var a in t)i.prototype[a]&&(s[a]=i.prototype[a]);return e.extend(!0,i.prototype,t),i},processQuery:function(e,t){},processResponse:function(e,t,i,s){return e.d?e.d:e},convertToQueryString:function(t,i,s){return e.param(t)},type:t.Adaptor},t.UrlAdaptor=(new t.Adaptor).extend({processQuery:function(e,t,i){var s,a,r=o(t.queries,"onSortBy"),n=o(t.queries,"onGroup"),c=o(t.queries,"onWhere"),u=o(t.queries,"onSearch"),p=o(t.queries,"onAggregates"),m=l(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),g=t._params,f=e.dataSource.url,_=null,v=this.options,b={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]};m.onPage?(s=m.onPage,a=h(s.pageIndex,t),_=h(s.pageSize,t),a=(a-1)*_):m.onRange&&(s=m.onRange,a=s.start,_=s.end-s.start);for(var x=0;x<r.length;x++)s=h(r[x].e.fieldName,t),b.sorted.push(d(this,"onEachSort",{name:s,direction:r[x].e.direction},t));i&&(s=this.getFiltersFrom(i,t))&&b.filters.push(d(this,"onEachWhere",s.toJSON(),t));for(var x=0;x<c.length;x++){b.filters.push(d(this,"onEachWhere",c[x].e.toJSON(),t));for(var y in b.filters[x])P(b[y])&&delete b[y]}for(var x=0;x<u.length;x++)s=u[x].e,b.searches.push(d(this,"onEachSearch",{fields:s.fieldNames,operator:s.operator,key:s.searchKey,ignoreCase:s.ignoreCase},t));for(var x=0;x<n.length;x++)b.grouped.push(h(n[x].e.fieldName,t));for(var x=0;x<p.length;x++)s=p[x].e,b.aggregates.push({type:s.type,field:h(s.field,t)});var w={};w[v.from]=t._fromTable,v.expand&&(w[v.expand]=t._expands),w[v.select]=m.onSelect?d(this,"onSelect",h(m.onSelect.fieldNames,t),t):"",w[v.count]=t._requiresCount?d(this,"onCount",t._requiresCount,t):"",w[v.search]=b.searches.length?d(this,"onSearch",b.searches,t):"",w[v.skip]=m.onSkip?d(this,"onSkip",h(m.onSkip.nos,t),t):"",w[v.take]=m.onTake?d(this,"onTake",h(m.onTake.nos,t),t):"",w[v.antiForgery]=e.dataSource.antiForgery?e.antiForgeryToken().value:"",w[v.where]=b.filters.length||b.searches.length?d(this,"onWhere",b.filters,t):"",w[v.sortBy]=b.sorted.length?d(this,"onSortBy",b.sorted,t):"",w[v.group]=b.grouped.length?d(this,"onGroup",b.grouped,t):"",w[v.aggregates]=b.aggregates.length?d(this,"onAggregates",b.aggregates,t):"",w.param=[],d(this,"addParams",{dm:e,query:t,params:g,reqParams:w});for(var y in w)(P(w[y])||""===w[y]||0===w[y].length||"params"===y)&&delete w[y];v.skip in w&&v.take in w||null===_||(w[v.skip]=d(this,"onSkip",a,t),w[v.take]=d(this,"onTake",_,t));var C=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(w),url:f,ejPvtData:C,type:"POST",contentType:"application/json; charset=utf-8"}:(s=this.convertToQueryString(w,t,e),s=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+s,{type:"GET",url:s.length?f.replace(/\/*$/,s):f,ejPvtData:C})},convertToQueryString:function(t,i,s){return s.dataSource.url&&-1!==s.dataSource.url.indexOf("?")?e.param(t):"?"+e.param(t)},processResponse:function(e,i,s,a,r,n){var o=r.ejPvtData||{},l=e.groupDs;if(a&&a.getResponseHeader("Content-Type")&&-1!=a.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return s._requiresCount?{result:[],count:0}:[];var d=JSON.parse(r.data);if(d&&"batch"===d.action&&e.added)return n.added=e.added,n;if(e.d&&(e=e.d),o&&o.aggregates&&o.aggregates.length){var h,c=o.aggregates,u={},p={};"count"in e&&(u.count=e.count),e.result&&(u.result=e.result),e.aggregate&&(e=e.aggregate);for(var m=0;m<c.length;m++)(h=t.aggregates[c[m].type])&&(p[c[m].field+" - "+c[m].type]=h(e,c[m].field));u.aggregates=p,e=u}if(o&&o.groups&&o.groups.length){var g=o.groups,u={};"count"in e&&(u.count=e.count),e.aggregates&&(u.aggregates=e.aggregates),e.result&&(e=e.result);for(var m=0;m<g.length;m++){var f=C(g[m],s.queries);t.isNullOrUndefined(l)||(l=t.group(l,g[m],null,f)),e=t.group(e,g[m],o.aggregates,f,null,l)}return void 0!=u.count?u.result=e:u=e,u}return e},onGroup:function(e){this.pvt.groups=e},onAggregates:function(e){this.pvt.aggregates=e},batchRequest:function(e,t,i,s){var a={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:a}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a)}},beforeSend:function(e,t){},insert:function(e,t,i,s){var a={value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:a}),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(a)}},remove:function(e,t,i,s,a){var r={key:i,keyColumn:t,table:s,action:"remove",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return a&&this.addParams({dm:e,query:a,params:a._params,reqParams:r}),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(r)}},update:function(e,t,i,s,a){var r={value:i,action:"update",keyColumn:t,key:i[t],table:s,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return a&&this.addParams({dm:e,query:a,params:a._params,reqParams:r}),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(r)}},getFiltersFrom:function(e,i){e instanceof Array&&e.length||M("ej.SubQuery: Array of key values required");var s,a=i._fKey,r=a,n=i._key,o=[],l="object"!=typeof e[0];"object"!=typeof e[0]&&(r=null);for(var d=0;d<e.length;d++)s=l?e[d]:t.pvt.getObject(n||r,e[d]),o.push(new t.Predicate(a,"==",s));return t.Predicate.or(o)},addParams:function(e){var t=e.dm,i=e.query,s=e.params,a=e.reqParams;a.params={};for(var r,n=0;r=s[n];n++)a[r.key]&&M("ej.Query: Custom Param is conflicting other request arguments"),a[r.key]=r.value,r.fn&&(a[r.key]=r.fn.call(i,r.key,i,t)),
a.params[r.key]=a[r.key]}}),t.WebMethodAdaptor=(new t.UrlAdaptor).extend({processQuery:function(e,i,s){var a=t.UrlAdaptor.prototype.processQuery(e,i,s),r=t.parseJSON(a.data),n={};return n.value=r,d(this,"addParams",{dm:e,query:i,params:i._params,reqParams:n}),{data:JSON.stringify(n),url:a.url,ejPvtData:a.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(e){var t=e.dm,i=e.query,s=e.params,a=e.reqParams;a.params={};for(var r,n=0;r=s[n];n++){a[r.key]&&M("ej.Query: Custom Param is conflicting other request arguments");var o=r.key,l=r.value;r.fn&&(l=r.fn.call(i,r.key,i,t)),a[o]=l,a.params[o]=a[o]}}}),t.CacheAdaptor=(new t.UrlAdaptor).extend({init:function(e,i,s){t.isNullOrUndefined(e)||(this.cacheAdaptor=e),this.pageSize=s,this.guidId=t.getGuid("cacheAdaptor");var a={keys:[],results:[]};window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify(a));var r=this.guidId;t.isNullOrUndefined(i)||setInterval(function(){for(var e=t.parseJSON(window.localStorage.getItem(r)),s=[],a=0;a<e.results.length;a++)e.results[a].timeStamp=new Date-new Date(e.results[a].timeStamp),new Date-new Date(e.results[a].timeStamp)>i&&s.push(a);for(var a=0;a<s.length;a++)e.results.splice(s[a],1),e.keys.splice(s[a],1);window.localStorage.removeItem(r),window.localStorage.setItem(r,JSON.stringify(e))},i)},generateKey:function(e,t){var i=o(t.queries,"onSortBy"),s=o(t.queries,"onGroup"),a=o(t.queries,"onWhere"),r=o(t.queries,"onSearch"),n=(o(t.queries,"onPage"),l(t.queries,["onSelect","onPage","onSkip","onTake","onRange"])),d=(t._params,e);n.onPage&&(d+=n.onPage.pageIndex),i.forEach(function(e){d+=e.e.direction+e.e.fieldName}),s.forEach(function(e){d+=e.e.fieldName}),r.forEach(function(e){d+=e.e.searchKey});for(var h=0;h<a.length;h++){var c=a[h];if(c.e.isComplex){var u=t.clone();u.queries=[];for(var p=0;p<c.e.predicates.length;p++)u.queries.push({fn:"onWhere",e:c.e.predicates[p],filter:t.queries.filter});d+=c.e.condition+this.generateKey(e,u)}else d+=c.e.field+c.e.operator+c.e.value}return d},processQuery:function(e,i,s){var a,r=this.generateKey(e.dataSource.url,i);window.localStorage&&(a=t.parseJSON(window.localStorage.getItem(this.guidId)));var n=a?a.results[a.keys.indexOf(r)]:null;return null==n||this._crudAction||this._insertAction?(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):n},processResponse:function(i,s,a,r,n,o){if(this._insertAction||n&&this.cacheAdaptor.options.batch&&n.url.endsWith(this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase())return this.cacheAdaptor.processResponse(i,s,a,r,n,o);var i=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0)),l=this.generateKey(s.dataSource.url,a),d={};window.localStorage&&(d=t.parseJSON(window.localStorage.getItem(this.guidId)));var h=e.inArray(l,d.keys);for(-1!=h&&(d.results.splice(h,1),d.keys.splice(h,1)),d.results[d.keys.push(l)-1]={keys:l,result:i.result,timeStamp:new Date,count:i.count};d.results.length>this.pageSize;)d.results.splice(0,1),d.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(d)),i},update:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.update(e,t,i,s)},insert:function(e,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(e,t,i)},remove:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},batchRequest:function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}});var o=function(e,t){return e.filter(function(e){return e.fn===t})||[]},l=function(e,t){for(var i=e.filter(function(e){return-1!==t.indexOf(e.fn)}),s={},a=0;a<i.length;a++)s[i[a].fn]||(s[i[a].fn]=i[a].e);return s},d=function(e,t,i,s){if(e[t]){var a=e[t](i,s);P(a)||(i=a)}return i};t.ODataAdaptor=(new t.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(e,t){return e.isComplex?this.onComplexPredicate(e,t):this.onPredicate(e,t)},_typeStringQuery:function(e,i,s,a,r){return-1!=s.indexOf("'")&&(s=s.replace(new RegExp(/'/g),"''")),/[ !@@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(s)&&(s=encodeURIComponent(s)),s="'"+s+"'",i&&(a="cast("+a+", 'Edm.String')"),t.isGUID(s)&&(r="guid"),e.ignoreCase&&(r||(a="tolower("+a+")"),s=s.toLowerCase()),{val:s,guid:r,field:a}},onPredicate:function(e,i,s){var a,r,o="",l=e.value,d=typeof l,h=this._p(e.field);if(l instanceof Date&&(l="datetime'"+n.replacer(l).toJSON()+"'"),"string"===d){var c=this._typeStringQuery(e,s,l,h,r);l=c.val,h=c.field,r=c.guid}if(a=t.data.odBiOperator[e.operator],""!=e.anyCondition&&a)return o+=l.table,o+="/"+e.anyCondition,o+="(d:d/",o+=h,o+=a,o+=l.value,o+=")";if("in"==e.operator||"notin"==e.operator){o+="(";for(var u=0;u<l.length;u++){if(l[u]instanceof Date&&(l[u]="datetime'"+n.replacer(l[u]).toJSON()+"'"),"string"==typeof l[u]){var c=this._typeStringQuery(e,s,l[u],h,r);l[u]=c.val,h=c.field,r=c.guid}o+=h,o+=a,o+=l[u],u!=l.length-1&&(o+="in"==e.operator?" or ":" and ")}return o+=")"}if(a)return this.onOperation(o,a,h,l,r);if(!(a=t.data.odUniOperator[e.operator])||"string"!==d)return"";if("substringof"===a){var p=l;l=h,h=p}if(o+=a+"(",o+=h+",",r&&(o+=r),o+=l+")","notcontains"==e.operator&&(o+=" eq false"),""!=e.anyCondition&&a){var m;return m+=l.table,m+="/"+e.anyCondition,m+="(d:d/",o+=o,m+=")"}return o},onOperation:function(e,t,i,s,a){return e+=i,e+=t,a&&(e+=a),e+s},onComplexPredicate:function(e,t){for(var i=[],s=0;s<e.predicates.length;s++)i.push("("+this.onEachWhere(e.predicates[s],t)+")");return i.join(" "+e.condition+" ")},onWhere:function(e){return this.pvt.searches&&e.push(this.onEachWhere(this.pvt.searches,null,!0)),e.join(" and ")},onEachSearch:function(e){0===e.fields.length&&M("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.searches||[],s=0;s<e.fields.length;s++)i.push(new t.Predicate(e.fields[s],e.operator,e.key,e.ignoreCase));this.pvt.searches=i},onSearch:function(e){return this.pvt.searches=t.Predicate.or(this.pvt.searches),""},onEachSort:function(e){var t=[];if(e.name instanceof Array)for(var i=0;i<e.name.length;i++)t.push(this._p(e.name[i]));else t.push(this._p(e.name)+("descending"===e.direction?" desc":""));return t.join(",")},onSortBy:function(e){return e.reverse().join(",")},onGroup:function(e){return this.pvt.groups=e,""},onSelect:function(e){for(var t=0;t<e.length;t++)e[t]=this._p(e[t]);return e.join(",")},onAggregates:function(e){return this.pvt.aggregates=e,""},onCount:function(e){return!0===e?"allpages":""},beforeSend:function(e,t,i){i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()&&(t.setRequestHeader("Accept",r.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")),e.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(i,s,a,r,o,l){if(!t.isNullOrUndefined(i.d)){var d=a&&a._requiresCount?i.d.results:i.d;if(!t.isNullOrUndefined(d))for(var h=0;h<d.length;h++)!t.isNullOrUndefined(d[h].__metadata)&&delete d[h].__metadata}var c=o&&o.ejPvtData;if(r&&r.getResponseHeader("Content-Type")&&-1!=r.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return a._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){var u,p,m=r.getResponseHeader("Content-Type");if(m=m.substring(m.indexOf("=batchresponse")+1),i=i.split(m),i.length<2)return;i=i[1];var g=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i);i.replace(g[0],"");var f=g[1];i=i.split(f);for(var h=i.length;h>-1;h--)/\bContent-ID:/i.test(i[h])&&/\bHTTP.+201/.test(i[h])&&(u=parseInt(/\bContent-ID: (\d+)/i.exec(i[h])[1]),l.added[u]&&(p=n.parseJson(/^\{.+\}/m.exec(i[h])[0]),e.extend(l.added[u],this.processResponse(p))));return l}var _=r&&r.getResponseHeader("DataServiceVersion"),v=null,b={};if(_=_&&parseInt(_,10)||2,a&&a._requiresCount&&((i.__count||i["odata.count"])&&(v=i.__count||i["odata.count"]),i.d&&(i=i.d),(i.__count||i["odata.count"])&&(v=i.__count||i["odata.count"])),3===_&&i.value&&(i=i.value),i.d&&(i=i.d),_<3&&i.results&&(i=i.results),c&&c.aggregates&&c.aggregates.length){for(var x,y=c.aggregates,w={},h=0;h<y.length;h++)(x=t.aggregates[y[h].type])&&(w[y[h].field+" - "+y[h].type]=x(i,y[h].field));b=w}if(c&&c.groups&&c.groups.length)for(var S=c.groups,h=0;h<S.length;h++){var T=C(S[h],a.queries);i=t.group(i,S[h],c.aggregates,T)}return P(v)?i:{result:i,count:v,aggregates:b}},convertToQueryString:function(e,t,i){var s=[],a=e.table||"";delete e.table,i.dataSource.requiresFormat&&(e.$format="json");for(var r in e)s.push(r+"="+e[r]);return s=s.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!a?s:s.length?a+"?"+s:a||""},insert:function(e,t,i){return{url:e.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(e,i,s,a){return"string"==typeof s?{type:"DELETE",url:t.isGUID(s)?e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s+")":e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"('"+s+"')"}:{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s+")"}},update:function(e,i,s,a){var r;return r="string"==typeof s[i]?t.isGUID(s[i])?e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s[i]+")":e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"('"+s[i]+"')":e.dataSource.url.replace(/\/*$/,a?"/"+a:"")+"("+s[i]+")",{type:"PUT",url:r,data:JSON.stringify(s),accept:this.options.accept}},batchRequest:function(e,i,s){var a=s.guid=t.getGuid(r.batchPre),n=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),o={url:s.url,key:s.key,cid:1,cSet:t.getGuid(r.changeSet)},l="--"+a+"\n";return l+="Content-Type: multipart/mixed; boundary="+o.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(i.added,o),l+=this.generateUpdateRequest(i.changed,o),l+=this.generateDeleteRequest(i.deleted,o),l+=o.cSet+"--\n",l+="--"+a+"--",{type:"POST",url:n,contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:l}},generateDeleteRequest:function(e,t){if(!e)return"";for(var i,s="",a=0;a<e.length;a++)s+="\n"+t.cSet+"\n",s+=r.changeSetContent+"\n\n",s+="DELETE ",i="string"==typeof e[a][t.key]?"'"+e[a][t.key]+"'":e[a][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+r.accept+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=r.batchChangeSetContentType+"\n";return s+"\n"},generateInsertRequest:function(e,t){if(!e)return"";for(var i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=r.changeSetContent+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+r.accept+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=r.batchChangeSetContentType+"\n\n",i+=JSON.stringify(e[s])+"\n";return i},generateUpdateRequest:function(e,t){if(!e)return"";for(var i,s="",a=0;a<e.length;a++)s+="\n"+t.cSet+"\n",s+=r.changeSetContent+"\n\n",s+="PUT ",i="string"==typeof e[a][t.key]?"'"+e[a][t.key]+"'":e[a][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+r.accept+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=r.batchChangeSetContentType+"\n\n",s+=JSON.stringify(e[a])+"\n\n";return s},_p:function(e){return e.replace(/\./g,"/")}}),t.ODataV4Adaptor=(new t.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(e){return!0===e?"true":""},onPredicate:function(e,i,s){var a="",r=e.value,n=r instanceof Date;return t.data.odUniOperator.contains="contains",a=t.ODataAdaptor.prototype.onPredicate.call(this,e,i,s),t.data.odUniOperator.contains="substringof",n&&(a=a.replace(/datetime'(.*)'$/,"$1")),a},onOperation:function(e,t,i,s,a){return a?(e+="("+i,e+=t,e+=s.replace(/["']/g,"")+")"):(e+=i,e+=t,e+=s),e},onEachSearch:function(e){var t=this.pvt.search||[];t.push(e.key),this.pvt.search=t},onSearch:function(e){return this.pvt.search.join(" OR ")},beforeSend:function(e,t,i){},processQuery:function(e,i){for(var s=/\/[\d*\/]*/g,a="",r=i._expands.length-1;r>0;r--)if(a.indexOf(i._expands[r])>=0)i._expands.pop();else if(s.test(i._expands[r])){a=i._expands.pop();for(var n=a.replace(s,"($expand="),o=0;o<a.split(s).length-1;o++)n+=")";i._expands.unshift(n),r++}return t.ODataAdaptor.prototype.processQuery.apply(this,[e,i])},processResponse:function(i,s,a,r,o,l){var d=o&&o.ejPvtData;if(r&&r.getResponseHeader("Content-Type")&&-1!=r.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return a._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){var h,c,u=r.getResponseHeader("Content-Type");if(u=u.substring(u.indexOf("=batchresponse")+1),i=i.split(u),i.length<2)return;i=i[1];var p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i);i.replace(p[0],"");var m=p[1];i=i.split(m);for(var g=i.length;g>-1;g--)/\bContent-ID:/i.test(i[g])&&/\bHTTP.+201/.test(i[g])&&(h=parseInt(/\bContent-ID: (\d+)/i.exec(i[g])[1]),l.added[h]&&(c=n.parseJson(/^\{.+\}/m.exec(i[g])[0]),e.extend(l.added[h],this.processResponse(c))));return l}var f=null,_={};if(a&&a._requiresCount&&"@odata.count"in i&&(f=i["@odata.count"]),i=t.isNullOrUndefined(i.value)?i:i.value,d&&d.aggregates&&d.aggregates.length){for(var v,b=d.aggregates,x={},g=0;g<b.length;g++)(v=t.aggregates[b[g].type])&&(x[b[g].field+" - "+b[g].type]=v(i,b[g].field));_=x}if(d&&d.groups&&d.groups.length)for(var y=d.groups,g=0;g<y.length;g++){var w=C(y[g],a.queries);i=t.group(i,y[g],d.aggregates,w)}return P(f)?i:{result:i,count:f,aggregates:_}}}),t.JsonAdaptor=(new t.Adaptor).extend({processQuery:function(e,t){for(var i,s,a=e.dataSource.json.slice(0),r=a.length,n=!0,o={},l=0;l<t.queries.length;l++)s=t.queries[l],i=this[s.fn].call(this,a,s.e,t),"onAggregates"==s.fn?o[s.e.field+" - "+s.e.type]=i:a=void 0!==i?i:a,"onPage"!==s.fn&&"onSkip"!==s.fn&&"onTake"!==s.fn&&"onRange"!==s.fn||(n=!1),n&&(r=a.length);return t._requiresCount&&(a={result:a,count:r,aggregates:o}),a},batchRequest:function(e,t,i){var s;for(s=0;s<t.added.length;s++)this.insert(e,t.added[s]);for(s=0;s<t.changed.length;s++)this.update(e,i.key,t.changed[s]);for(s=0;s<t.deleted.length;s++)this.remove(e,i.key,t.deleted[s]);return t},onWhere:function(e,t){return e?e.filter(function(e){return t.validate(e)}):e},onAggregates:function(e,i){var s=t.aggregates[i.type];return e&&s&&0!=e.length?s(e,i.field):null},onSearch:function(e,i){return e&&e.length?(0===i.fieldNames.length&&t.pvt.getFieldList(e[0],i.fieldNames),e.filter(function(e){for(var s=0;s<i.fieldNames.length;s++)if(i.comparer.call(e,t.pvt.getObject(i.fieldNames[s],e),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):e},onSortBy:function(e,i,s){if(!e)return e;var a,r=h(i.fieldName,s);if(!r)return e.sort(i.comparer);if(r instanceof Array){r=r.slice(0);for(var n=r.length-1;n>=0;n--)r[n]&&(a=i.comparer,r[n].endsWith(" desc")&&(a=t.pvt.fnSort(t.sortOrder.Descending),r[n]=r[n].replace(" desc","")),e=w(e,r[n],a,[]));return e}return w(e,r,i.comparer,s?s.queries:[])},onGroup:function(e,i,s){if(!e)return e;var a=o(s.queries,"onAggregates"),r=[];if(a.length)for(var n,l=0;l<a.length;l++)n=a[l].e,r.push({type:n.type,field:h(n.field,s)});var d=C(i.fieldName,s.queries);return t.group(e,h(i.fieldName,s),r,d)},onPage:function(e,t,i){var s=h(t.pageSize,i),a=(h(t.pageIndex,i)-1)*s,r=a+s;return e?e.slice(a,r):e},onRange:function(e,t){return e?e.slice(h(t.start),h(t.end)):e},onTake:function(e,t){return e?e.slice(0,h(t.nos)):e},onSkip:function(e,t){return e?e.slice(h(t.nos)):e},onSelect:function(e,i){return e?t.select(e,h(i.fieldNames)):e},insert:function(e,t){return e.dataSource.json.push(t)},remove:function(e,i,s,a){var r,n=e.dataSource.json;for("object"==typeof s&&(s=t.getObject(i,s)),r=0;r<n.length&&t.getObject(i,n[r])!==s;r++);return r!==n.length?n.splice(r,1):null},update:function(i,s,a,r){var n,o=i.dataSource.json,l=t.getObject(s,a);for(n=0;n<o.length&&t.getObject(s,o[n])!==l;n++);return n<o.length?e.extend(o[n],a):null}}),t.ForeignKeyAdaptor=function(i,s){var a=(new t[s||"JsonAdaptor"]).extend({init:function(){this.foreignData=[],this.key=[],this.adaptorType=s,this.value=[],this.fValue=[],this.keyField=[];for(var e=i,a=0;a<e.length;a++)this.foreignData[a]=e[a].dataSource,this.key[a]=e[a].foreignKeyField,this.fValue[a]=t.isNullOrUndefined(e[a].field)?e[a].foreignKeyValue:e[a].field+"_"+e[a].foreignKeyValue,this.value[a]=e[a].foreignKeyValue,this.keyField[a]=e[a].field||e[a].foreignKeyField,this.initial=!0},processQuery:function(e,i){var s=e.dataSource.json;if(this.initial){for(var a=0;a<s.length;a++)for(var r=this,n=0;n<this.foreignData.length;n++)this.foreignData[n].filter(function(e){t.getObject(r.key[n],e)==t.getObject(r.keyField[n],s[a])&&(s[a][r.fValue[n]]=t.getObject(r.value[n],e))});this.initial=!1}return this.base.processQuery.apply(this,[e,i])},setValue:function(i){for(var s=0;s<this.foreignData.length;s++){var a=this,r=i[this.fValue[s]];"string"!=typeof r||isNaN(r)||(r=t.parseFloat(r));var n=e.grep(a.foreignData[s],function(e){return e[a.value[s]]==r})[0];t.isNullOrUndefined(n)&&(n=e.grep(a.foreignData[s],function(e){return e[a.key[s]]==r})[0],void 0!=t.getObject(this.value[s],n)&&t.createObject(a.value[s],t.getObject(this.value[s],n),i)),void 0!=t.getObject(this.value[s],n)&&t.createObject(this.keyField[s],t.getObject(this.key[s],n),i)}},insert:function(e,t,i){return this.setValue(t),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}},update:function(e,i,s,a){return this.setValue(s),t.JsonAdaptor.prototype.update(e,i,s,a),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:s,action:"update",keyColumn:i,key:s[i],table:a,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}}});return e.extend(this,new a),this},t.remoteSaveAdaptor=(new t.JsonAdaptor).extend({beforeSend:t.UrlAdaptor.prototype.beforeSend,insert:t.UrlAdaptor.prototype.insert,update:t.UrlAdaptor.prototype.update,remove:t.UrlAdaptor.prototype.remove,addParams:t.UrlAdaptor.prototype.addParams,batchRequest:function(e,t,i,s){var a={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:a}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a)}},processResponse:function(e,i,s,a,r,n,o){if(t.isNullOrUndefined(n))return e.d?e.d:e;e.d&&(e=e.d),e.added&&(n.added=t.parseJSON(e.added)),e.changed&&(n.changed=t.parseJSON(e.changed)),e.deleted&&(n.deleted=t.parseJSON(e.deleted));var l;for(l=0;l<n.added.length;l++)t.JsonAdaptor.prototype.insert(i,n.added[l]);for(l=0;l<n.changed.length;l++)t.JsonAdaptor.prototype.update(i,o,n.changed[l]);for(l=0;l<n.deleted.length;l++)t.JsonAdaptor.prototype.remove(i,o,n.deleted[l]);return e}}),t.WebApiAdaptor=(new t.ODataAdaptor).extend({insert:function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},remove:function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(e,t,i,s){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},batchRequest:function(i,s,a){var n=a.guid=t.getGuid(r.batchPre),o=[];return e.each(s.added,function(e,t){o.push("--"+n),o.push("Content-Type: application/http; msgtype=request",""),o.push("POST "+i.dataSource.insertUrl+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",t?JSON.stringify(t):"")}),e.each(s.changed,function(e,t){o.push("--"+n),o.push("Content-Type: application/http; msgtype=request",""),o.push("PUT "+i.dataSource.updateUrl+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",t?JSON.stringify(t):"")}),e.each(s.deleted,function(e,t){o.push("--"+n),o.push("Content-Type: application/http; msgtype=request",""),o.push("DELETE "+i.dataSource.removeUrl+"/"+t[a.key]+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",t?JSON.stringify(t):"")}),o.push("--"+n+"--",""),{type:"POST",url:i.dataSource.batchUrl||i.dataSource.crudUrl||i.dataSource.url,data:o.join("\r\n"),contentType:'multipart/mixed; boundary="'+n+'"'}},processResponse:function(e,i,s,a,r,n){var o=r&&r.ejPvtData;if(r&&"post"!=r.type.toLowerCase()){var l=a&&a.getResponseHeader("DataServiceVersion"),d=null,h={};if(l=l&&parseInt(l,10)||2,s&&s._requiresCount&&(P(e.Count)||(d=e.Count)),l<3&&e.Items&&(e=e.Items),o&&o.aggregates&&o.aggregates.length){for(var c,u=o.aggregates,p={},m=0;m<u.length;m++)(c=t.aggregates[u[m].type])&&(p[u[m].field+" - "+u[m].type]=c(e,u[m].field));h=p}if(o&&o.groups&&o.groups.length)for(var g=o.groups,m=0;m<g.length;m++){var f=C(g[m],s.queries);e=t.group(e,g[m],o.aggregates,f)}return P(d)?e:{result:e,count:d,aggregates:h}}}});var h=function(e,t){return"function"==typeof e?e.call(t||{}):e};t.TableModel=function(i,s,a,r){if(!O(this,t.TableModel))return new t.TableModel(s);O(s,Array)||M("ej.TableModel - Json Array is required");for(var n,o=[],l=E(g,this),d=0;d<s.length;d++)n=new t.Model(s[d],this),n.state="unchanged",n.on("stateChange",l),r&&n.computes(r),o.push(n);return this.name=i||"table1",this.rows=t.NotifierArray(o),this._deleted=[],this._events=e({}),this.dataManager=a,this._isDirty=!1,this},t.TableModel.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},setDataManager:function(e){this.dataManagar=e},saveChanges:function(){if(this.dataManager&&O(this.dataManager,t.DataManager)||M("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()){var e=this.dataManager.saveChanges(this.getChanges(),this.key,this.name);e.done(E(function(e){for(var t=this.toArray(),i=0;i<t.length;i++)"added"===t.state&&t.set(this.key,e.added.filter(function(e){return e[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})},this)),e.fail(E(function(e){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:e})},this)),this._isDirty=!1}},rejectChanges:function(){for(var e=this.toArray(),t=0;t<e.length;t++)e[t].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(e){var i=new t.Model(e);i._isDirty=this._isDirty=!0,this.rows.push(i),this._events.triggerHandler({type:"insert",model:i,table:this})},update:function(e){this.key||M("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=e,s=this.key,a=i[s];t=this.rows.array.filter(function(e){return e.get(s)===a}),t=t[0];for(var r in i)t.set(r,i[r]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:t,table:this})},remove:function(e){this.key||M("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=this.key,s=-1;e&&"object"==typeof e&&(e=void 0!==e[i]?e[i]:e.get(i));for(var a=0;a<this.rows.length();a++)if(this.rows.array[a].get(i)===e){s=a;break}s>-1&&(t=this.rows.removeAt(s),t.markDelete(),this._deleted.push({model:t,position:s}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:t,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var e={added:[],changed:[]},i=this.toArray(),s=0;s<i.length;s++)e[i[s].state]&&e[i[s].state].push(i[s].json);return e.deleted=t.select(this._deleted,["model"]),e},toArray:function(){return this.rows.toArray()},setDirty:function(e,t){this._isDirty!==!!e&&(this._isDirty=!!e,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(e){return this.rows.array[e]},length:function(){return this.rows.array.length},bindTo:function(t){var i,s=c,a=e(t.html()),r=this.toArray();e.inArray(t.prop("tagName").toLowerCase(),["table","tbody"])&&(s=u),s.insertBefore(t),t.detach().empty();for(var n=0;n<r.length;n++)i=a.clone(),r[n].bindTo(i),t.append(i);t.insertAfter(s),s.remove()}};var c=i?e(document.createElement("div")):{},u=i?e(document.createElement("tr")):{};t.Model=function(i,s,a){"string"==typeof s&&(a=s,s=null),this.$id=L("m"),this.json=i,this.table=s instanceof t.TableModel?s:null,this.name=a||this.table&&this.table.name,this.dataManager=s instanceof t.DataManager?s:s.dataManagar,this.actual={},this._events=e({}),this.isDirty=!1,this.state="added",this._props=[],this._computeEls={},this._fields={},this._attrEls={},this._updates={},this.computed={}},t.Model.prototype={computes:function(t){e.extend(this.computed,t)},on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},set:function(e,t){var i,s=this.json,a=e;e=e.split(".");for(var r=0;r<e.length-1;r++)e=e[0],s=s[e[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),i=s[e],void 0!==this.actual[e]||e in this.actual||(this.actual[e]=t),s[e]=t,this._updateValues(e,t),this._events.triggerHandler({type:a,current:t,previous:i,model:this})},get:function(e){return t.pvt.getObject(e,this.json)},revert:function(e){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,e?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(i,s){return i=i||this.dataManagar,s=s||i.dataSource.key,i||M("ej.Model - DataManager is required to commit the changes"),"added"===this.state?i.insert(this.json,this.name).done(t.proxy(function(t){e.extend(this.json,t.record)},this)):"changed"===this.state?i.update(s,this.json,this.name):"deleted"===this.state?i.remove(s,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(t,i){if(this.state!==t){if("added"===this.state){if("deleted"!==t)return;t="unchanged"}var s=t;i=i||{},this.state=t,this._events.triggerHandler(e.extend({type:"stateChange",current:t,previous:s,model:this},i))}},properties:function(){if(this._props.length)return this._props;for(var e in this.json)this._props.push(e),this._updates[e]={read:[],input:[]};return this._props},bindTo:function(t){var i,s,a=e(t),r=a.find("[ej-observe], [ej-computed], [ej-prop]"),n=r.length;a.data("ejModel",this);for(var o={fields:[],props:[],computes:[]},l=0;l<n;l++)i=r.eq(l),s=i.attr("ej-prop"),s&&this._processAttrib(s,i,o),s=i.attr("ej-observe"),s&&-1!==this._props.indexOf(s)?this._processField(i,s,o):(s=i.attr("ej-computed"))&&this._processComputed(s,i,o);a.data("ejModelBinding"+this.$id,o)},unbind:function(t){var i,s={props:this._attrEls,computes:this._computeEls},a=!1;t&&(s=e(t).removeData("ejModel").data("ejModelBinding"+this.$id)||s,a=!0);for(var r in this.computed)i=s.computes[r],r=this.computed[r],i&&r.deps&&(this.off(r.deps.join(" "),i.handle),a&&delete this._computeEls[r]);a||(this._computeEls={});for(var r in s.props)(i=s.props[r])&&(this.off(i.deps.join(" "),i.handle),delete s.props[r],a&&delete this._attrEls[r]);if(a||(this._attrEls={}),s.fields&&s.fields.length)for(var n,o,l,d=s.fields.length,h=0;h<d;h++)n=s.fields[h],e(n).off("change",null,this._changeHandler),l=-1!==this.formElements.indexOf(n.tagName.toLowerCase())?"input":"read",-1!==(o=this._updates[l].indexOf(n))&&this._updates[l].splice(o,1)},_processComputed:function(e,t,i){if(e){var s,a,r=m(e),n=-1!==this.formElements.indexOf(t[0].tagName.toLowerCase())?"val":"html";this.computed[e]&&this.computed[r]||(this.computed[r]={value:new Function("var e = this; return "+e),deps:this._generateDeps(e)},e=r),s=this.computed[e],s.get||(s.get=function(){s.value.call(this.json)}),a=s.deps,s=s.value,this._updateDeps(a),this._updateElement(t,n,s),s={el:t,handle:E(this._computeHandle,this,{value:e,type:n})},this._computeEls[e]=s,i.computes[e]=s,this.on(a.join(" "),s.handle)}},_computeHandle:function(e){var t=this._computeEls[e.value];t&&this.computed[e.value]&&this._updateElement(t.el,e.type,this.computed[e.value].value)},_updateElement:function(t,i,s){t[i](s.call(e.extend({},this.json,this.computed)))},_updateDeps:function(e){for(var i=0;i<e.length;i++)!(e[i]in this.json)&&e[i]in this.computed&&t.merge(e,this.computed[e[i]].deps)},_generateDeps:function(e){for(var t,i=e.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),s=[],a=0;a<i.length;a++)i[a].startsWith("#ej.#")&&(t=i[a].replace("#ej.#","").split(" ")[0])&&-1!==this._props.indexOf(t)&&s.push(t);return s},_processAttrib:function(e,t,i){var s,a,r={};e=e.replace(/^ +| +$/g,"").split(";");for(var n=0;n<e.length;n++)e[n]=e[n].split(":"),e[n].length<2||(s=e[n][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""),r[s]=e[n][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));e=r;var o=[];for(s in e)o.push(e[s]);this._updateDeps(o),this._updateProps(t,e),r=L("emak"),a={el:t,handle:E(this._attrHandle,this,r),value:e,deps:o},t.prop("ejmodelattrkey",r),i.props[r]=a,this._attrEls[r]=a,this.on(o.join(" "),a.handle)},_attrHandle:function(e){var t=this._attrEls[e];t&&this._updateProps(t.el,t.value)},_updateProps:function(t,i){var s,a=this.json,r=this.computed;for(var n in i)s=i[n],s in a?s=a[s]:s in r&&(s=r[s])&&(s=s.value.call(e.extend({},this.json,r))),P(s)||t.prop(n,s)},_updateValues:function(e,t){var i=this._updates[e];i&&(i.read||i.input)&&(this._ensureItems(i.read,"html",t),this._ensureItems(i.input,"val",t))},_ensureItems:function(t,i,s){if(t)for(var a=t.length-1;a>-1;a--)t[a].offsetParent?e(t[a])[i](s):t.splice(a,1)},_changeHandler:function(t){t.data.self.set(t.data.prop,e(this).val())},_processField:function(e,t,i){var s={self:this,prop:t},a=this.get(t);return i.fields.push(e[0]),-1===this.formElements.indexOf(e[0].tagName.toLowerCase())?(e.html(a),this._updates[t].read.push(e[0])):(e.val(a).off("change",null,this._changeHandler).on("change",null,s,this._changeHandler),this._updates[t].input.push(e[0]))},formElements:["input","select","textarea"]};var p=/[^\w]+/g,m=function(e){return e.replace(p,"_")},g=function(e){this.setDirty(!0,e.model)};t.Predicate=function(e,i,s,a,r){if(!(this instanceof t.Predicate))return new t.Predicate(e,i,s,a,r);if(this.ignoreAccent=!1,"string"==typeof e){var n="";-1!=i.toLowerCase().indexOf(" any")?(i=i.replace(" any",""),n="any"):-1!=i.toLowerCase().indexOf(" all")&&(i=i.replace(" all",""),n="all"),this.field=e,this.operator=i,this.value=s,this.ignoreCase=a,this.ignoreAccent=r,this.isComplex=!1,this.anyCondition=n,this._comparer=t.data.fnOperators.processOperator(""!=n?n:this.operator)}else(e instanceof t.Predicate&&s instanceof t.Predicate||s instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[e],s instanceof Array?[].push.apply(this.predicates,s):this.predicates.push(s));return this},t.Predicate.and=function(){return f._combinePredicates([].slice.call(arguments,0),"and")},t.Predicate.or=function(){return f._combinePredicates([].slice.call(arguments,0),"or")},t.Predicate.fromJSON=function(e){
if(O(e,Array)){for(var t=[],i=0,s=e.length;i<s;i++)t.push(f._fromJSON(e[i]));return t}return f._fromJSON(e)};var f={_combinePredicates:function(e,i){if(e.length){if(1===e.length){if(!O(e[0],Array))return e[0];e=e[0]}return new t.Predicate(e[0],i,e.slice(1))}},_combine:function(e,i,s,a,r,n,o){return i instanceof t.Predicate?t.Predicate[r](e,i):"string"==typeof i?t.Predicate[r](e,new t.Predicate(i,s,a,n,o)):M("Predicate - "+r+" : invalid arguments")},_fromJSON:function(e){if(!e||O(e,t.Predicate))return e;for(var i=e.predicates||[],s=i.length,a=[],r=0;r<s;r++)a.push(f._fromJSON(i[r]));return e.isComplex?new t.Predicate(a[0],e.condition,a.slice(1)):new t.Predicate(e.field,e.operator,t.parseJSON({val:e.value}).val,e.ignoreCase,e.ignoreAccent)}};if(t.Predicate.prototype={and:function(e,t,i,s,a){return f._combine(this,e,t,i,"and",s,a)},or:function(e,t,i,s,a){return f._combine(this,e,t,i,"or",s,a)},validate:function(e){var i,s,a=this.predicates;if(!this.isComplex)return this._comparer.call(this,t.pvt.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);i="and"===this.condition;for(var r=0;r<a.length;r++)if(s=a[r].validate(e),i){if(!s)return!1}else if(s)return!0;return i},toJSON:function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJSON())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e,anyCondition:this.anyCondition}}},t.dataUtil={swap:function(e,t,i){if(t!=i){var s=e[t];e[t]=e[i],e[i]=s}},mergeSort:function(e,i,s){return s&&"string"!=typeof s||(s=t.pvt.fnSort(s,!0)),"function"==typeof i&&(s=i,i=null),t.pvt.mergeSort(e,i,s)},max:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnDescending)},min:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnAscending)},distinct:function(e,t,i){for(var s,a=[],r={},n=0;n<e.length;n++)(s=R(e,t,n))in r||(a.push(i?e[n]:s),r[s]=1);return a},sum:function(e,t){for(var i,s=0,a="number"!=typeof R(e,t,0),r=0;r<e.length;r++)i=R(e,t,r),isNaN(i)||null===i||(a&&(i=+i),s+=i);return s},avg:function(e,i){return t.sum(e,i)/e.length},select:function(e,i){for(var s=[],a=0;a<e.length;a++)s.push(t.pvt.extractFields(e[a],i));return s},group:function(i,s,a,r,n,o){if(n=n||1,i.GROUPGUID==t.pvt.consts.GROUPGUID){for(var l=0;l<i.length;l++)if(t.isNullOrUndefined(o))i[l].items=t.group(i[l].items,s,a,r,i.level+1),i[l].count=i[l].items.length;else{var d=-1,h=e.grep(o,function(e){return e.key==i[l].key});d=o.indexOf(h[0]),i[l].items=t.group(i[l].items,s,a,r,i.level+1,o[d].items),i[l].count=o[d].count}return i.childLevels+=1,i}var c={},u=[];u.GROUPGUID=t.pvt.consts.GROUPGUID,u.level=n,u.childLevels=0,u.records=i;for(var p=0;p<i.length;p++){var m=R(i,s,p);if(t.isNullOrUndefined(r)||(m=r(m,s)),!c[m]&&(c[m]={key:m,count:0,items:[],aggregates:{},field:s},u.push(c[m]),!t.isNullOrUndefined(o))){var g=e.grep(o,function(e){return e.key==c[m].key});c[m].count=g[0].count}c[m].count=t.isNullOrUndefined(o)?c[m].count+=1:c[m].count,c[m].items.push(i[p])}if(a&&a.length)for(var p=0;p<u.length;p++){for(var f,_={},l=0;l<a.length;l++)if(f=t.aggregates[a[l].type],t.isNullOrUndefined(o))f&&(_[a[l].field+" - "+a[l].type]=f(u[p].items,a[l].field));else{var h=e.grep(o,function(e){return e.key==u[p].key});f&&(_[a[l].field+" - "+a[l].type]=f(h[0].items,a[l].field))}u[p].aggregates=_}return u},parseTable:function(i,s,a){var r,n,o=i.rows,l=[],d=[];if(!o.length)return[];switch(a=a||0,(s||"").toLowerCase()){case t.headerOption.tHead:r=i.tHead.rows[a];break;case t.headerOption.row:default:r=i.rows[a]}var h=r.cells;for(n=0;n<h.length;n++)l.push(e.trim(h[n].innerHTML));for(n=a+1;n<o.length;n++){for(var c={},u=o[n].cells,p=0;p<u.length;p++){var m=u[p].innerHTML;"string"==typeof m&&e.isNumeric(m)?c[l[p]]=Number(m):c[l[p]]=m}d.push(c)}return d}},t.headerOption={tHead:"thead",row:"row"},t.aggregates={sum:function(e,i){return t.sum(e,i)},average:function(e,i){return t.avg(e,i)},minimum:function(e,i){return t.getObject(i,t.min(e,i))},maximum:function(e,i){return t.getObject(i,t.max(e,i))},truecount:function(e,i){var s=t.Predicate(i,"equal",!0);return t.DataManager(e).executeLocal(t.Query().where(s)).length},falsecount:function(e,i){var s=t.Predicate(i,"equal",!1);return t.DataManager(e).executeLocal(t.Query().where(s)).length},count:function(e,t){return e.length}},t.pvt={filterQueries:o,mergeSort:function(e,i,s){if(e.length<=1)return e;var a=parseInt(e.length/2,10),r=e.slice(0,a),n=e.slice(a);return r=t.pvt.mergeSort(r,i,s),n=t.pvt.mergeSort(n,i,s),t.pvt.merge(r,n,i,s)},getItemFromComparer:function(e,i,s){var a,r,n,o=0,l="string"==typeof R(e,i,0);if(e.length)for(;t.isNullOrUndefined(a)&&o<e.length;)a=R(e,i,o),n=e[o++];for(;o<e.length;o++)r=R(e,i,o),t.isNullOrUndefined(r)||(l&&(a=+a,r=+r),s(a,r)>0&&(a=r,n=e[o]));return n},quickSelect:function(e,i,s,a,r,n){if(s==a)return e[s];var o=t.pvt.partition(e,i,s,a,n),l=o-s+1;return l==r?e[o]:r<l?t.pvt.quickSelect(e,i,s,o-1,r,n):t.pvt.quickSelect(e,i,o+1,a,r-l,n)},extractFields:function(e,i){var s={};if(1==i.length)return t.pvt.getObject(i[0],e);for(var a=0;a<i.length;a++)s[i[a].replace(".",t.pvt.consts.complexPropertyMerge)]=t.pvt.getObject(i[a],e);return s},partition:function(e,i,s,a,r){var n=parseInt((s+a)/2,10),o=R(e,i,n);t.swap(e,n,a),n=s;for(var l=s;l<a;l++)r(R(e,i,l),o)&&(t.swap(e,l,n),n++);return t.swap(e,n,a),n},fnSort:function(e){return e=e?e.toLowerCase():t.sortOrder.Ascending,e==t.sortOrder.Ascending?t.pvt.fnAscending:t.pvt.fnDescending},fnGetComparer:function(e,i){return function(s,a){return i(t.pvt.getObject(e,s),t.pvt.getObject(e,a))}},fnAscending:function(e,i){return t.isNullOrUndefined(i)&&t.isNullOrUndefined(e)?-1:null===i||void 0===i?-1:"string"==typeof e?e.localeCompare(i):null===e||void 0===e?1:e-i},fnDescending:function(e,i){return t.isNullOrUndefined(i)&&t.isNullOrUndefined(e)?-1:null===i||void 0===i?1:"string"==typeof e?-1*e.localeCompare(i):null===e||void 0===e?-1:i-e},merge:function(e,t,i,s){for(var a,r=[];e.length>0||t.length>0;)a=e.length>0&&t.length>0?s?s(R(e,i,0),R(t,i,0))<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,r.push(a.shift());return r},getObject:function(e,t){if(t){if(!e)return t;if(-1===e.indexOf("."))return t[e];for(var i=t,s=e.split("."),a=0;a<s.length&&null!=i;a++)i=i[s[a]];return i}},createObject:function(e,t,i){var s,a=e.split("."),r=i||window,n=r;for(s=0;s<a.length;s++)s+1==a.length?n[a[s]]=void 0===t?{}:t:null==n[a[s]]&&(n[a[s]]={}),n=n[a[s]];return r},ignoreDiacritics:function(e){return"string"!=typeof e?e:e.split("").map(function(e){return e in t.data.diacritics?t.data.diacritics[e]:e}).join("")},getFieldList:function(e,i,s){if(void 0===s&&(s=""),void 0===i||null===i)return t.pvt.getFieldList(e,[],s);for(var a in e)"object"!=typeof e[a]||e[a]instanceof Array?i.push(s+a):t.pvt.getFieldList(e[a],i,s+a+".");return i}},t.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},t.data={},t.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne ",in:" eq ",notin:" ne "},t.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",notcontains:"substringof"},t.data.diacritics={"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï"},t.data.fnOperators={equal:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?T(e)==T(i):e==i},notequal:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),!t.data.fnOperators.equal(e,i,s)},notin:function(e,i,s){for(var a=0;a<i.length;a++)if(0==t.data.fnOperators.notequal(e,i[a],s))return!1;return!0},lessthan:function(e,t,i){return i?T(e)<T(t):e<t},greaterthan:function(e,t,i){return i?T(e)>T(t):e>t},lessthanorequal:function(e,t,i){return i?T(e)<=T(t):e<=t},greaterthanorequal:function(e,t,i){return i?T(e)>=T(t):e>=t},contains:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?!P(e)&&!P(i)&&-1!=T(e).indexOf(T(i)):!P(e)&&!P(i)&&-1!=e.toString().indexOf(i)},notcontains:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),!t.data.fnOperators.contains(e,i,s)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?e&&i&&T(e).startsWith(T(i)):e&&i&&e.startsWith(i)},endswith:function(e,i,s,a){return a&&(e=t.pvt.ignoreDiacritics(e),i=t.pvt.ignoreDiacritics(i)),s?e&&i&&T(e).endsWith(T(i)):e&&i&&e.endsWith(i)},all:function(e,i,s){for(var a=0;a<i.length;a++)if(0==t.data.fnOperators[this.operator](e,i[a],s))return!1;return!0},any:function(e,i,s){for(var a=0;a<i.length;a++)if(1==t.data.fnOperators[this.operator](e,i[a],s))return!0;return!1},processSymbols:function(e){var i=t.data.operatorSymbols[e];if(i){var s=t.data.fnOperators[i];if(s)return s}return M("Query - Process Operator : Invalid operator")},processOperator:function(e){var i=t.data.fnOperators[e];return i||t.data.fnOperators.processSymbols(e)}},t.data.fnOperators.in=function(e,i,s){for(var a=0;a<i.length;a++)if(1==t.data.fnOperators.equal(e,i[a],s))return!0;return!1},t.NotifierArray=function(i){return O(this,t.NotifierArray)?(this.array=i,this._events=e({}),this._isDirty=!1,this):new t.NotifierArray(i)},t.NotifierArray.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},push:function(e){var t;return t=O(e,Array)?[].push.apply(this.array,e):this.array.push(e),this._raise("add",{item:e,index:this.length()-1}),t},pop:function(){var e=this.array.pop();return this._raise("remove",{item:e,index:this.length()-1}),e},addAt:function(e,t){return this.array.splice(e,0,t),this._raise("add",{item:t,index:e}),t},removeAt:function(e){var t=this.array.splice(e,1)[0];return this._raise("remove",{item:t,index:e}),t},remove:function(e){var t=this.array.indexOf(e);return t>-1&&(this.array.splice(t,1),this._raise("remove",{item:e,index:t})),t},length:function(){return this.array.length},_raise:function(t,i){this._events.triggerHandler(e.extend({type:t},i)),this._events.triggerHandler({type:"all",name:t,args:i})},toArray:function(){return this.array}},e.extend(t,t.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=0,s=this.length;i<s;++i)e.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var i=0;i<t;i++)if(i in this&&this[i]===e)return i;return-1},Array.prototype.filter=Array.prototype.filter||function(e){if("function"!=typeof e)throw new TypeError;for(var t=[],i=arguments[1]||this,s=0;s<this.length;s++){var a=this[s];e.call(i,a,s,this)&&t.push(a)}return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this.slice(-e.length)===e},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},t.support||(t.support={}),t.support.stableSort=function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),t=0;t<17;t++)if(t!==e[t])return!1;return!0}(),t.support.cors=e.support.cors,!e.support.cors&&window.XDomainRequest){var _=/^https?:\/\//i,v=/^get|post$/i,b=new RegExp("^"+location.protocol,"i"),x=/\/xml/i;e.ajaxTransport("text html xml json",function(e,t,i){if(e.crossDomain&&e.async&&v.test(e.type)&&_.test(t.url)&&b.test(t.url)){var s=null,a=(t.dataType||"").toLowerCase();return{send:function(i,r){s=new XDomainRequest,/^\d+$/.test(t.timeout)&&(s.timeout=t.timeout),s.ontimeout=function(){r(500,"timeout")},s.onload=function(){var e="Content-Length: "+s.responseText.length+"\r\nContent-Type: "+s.contentType,t={code:200,message:"success"},i={text:s.responseText};try{if("json"===a)try{i.json=JSON.parse(s.responseText)}catch(e){t.code=500,t.message="parseerror"}else if("xml"===a||"text"!==a&&x.test(s.contentType)){var n=new ActiveXObject("Microsoft.XMLDOM");n.async=!1;try{n.loadXML(s.responseText)}catch(e){n=void 0}if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+s.responseText;i.xml=n}}catch(e){throw e}finally{r(t.code,t.message,i,e)}},s.onerror=function(){r(500,"error",{text:s.responseText})},-1!=navigator.userAgent.indexOf("MSIE 9.0")&&(s.onprogress=function(){}),s.open(e.type,e.url),s.send(t.data)},abort:function(){s&&s.abort()}}}})}e.support.cors=!0,t.sortOrder={Ascending:"ascending",Descending:"descending"},t.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"};var y=function(e,t){t&&(e=E(e,t)),(window.setImmediate||window.setTimeout)(e,0)};t.support.enableLocalizedSort=!1;var w=function(e,i,s,a){return t.support.stableSort?t.support.enableLocalizedSort||"string"!=typeof t.pvt.getObject(i,e[0]||{})||s!==t.pvt.fnAscending&&s!==t.pvt.fnDescending||1!==a.filter(function(e){return"onSortBy"===e.fn}).length?e.sort(t.pvt.fnGetComparer(i,s)):S(e,i,s===t.pvt.fnDescending):t.mergeSort(e,i,s)},C=function(i,s){for(var a=e.grep(s,function(e){return"onGroup"==e.fn}),r=0;r<a.length;r++)if(t.getObject("fieldName",a[r].e)==i)return t.getObject("fn",a[r].e)},S=function(e,i,s){var a=Object.prototype.toString;Object.prototype.toString=-1===i.indexOf(".")?function(){return this[i]}:function(){return t.pvt.getObject(i,this)},e=e.sort(),Object.prototype.toString=a,s&&e.reverse()},T=function(e){return e?e.toLowerCase?e.toLowerCase():e.toString().toLowerCase():0===e||!1===e?e.toString():""},R=function(e,i,s){return i?t.pvt.getObject(i,e[s]):e[s]},k=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&1===e.nodeType&&"object"==typeof e&&"string"==typeof e.nodeName},O=function(e,t){return e instanceof t},D=function(e,i,s,a){return function(r){return"object"==typeof r&&(a=r,r=null),new t.TableModel(r||e,i,s,a)}},I=function(t){return function(i,s){(s=s||window.ko)||M("Knockout is undefined");for(var a,r,n,o=[],l=0;l<t.length;l++){a={};for(r in t[l])r.startsWith("_")||(a[r]=s.observable(t[l][r]));for(r in i)n=i[r],e.isPlainObject(n)?(n.owner||(n.owner=a),n=s.computed(n)):n=s.computed(n,a),a[r]=n;o.push(a)}return s.observableArray(o)}},j=0,L=function(e){return j+=1,e+j};t.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var s=new Uint8Array(1);window.crypto.getRandomValues(s),t=s[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]})};var A=function(e,t){return function(){var i=[].slice.call(arguments,0);return i.push(this),e.apply(t||this,i)}},E=function(e,t,i){return"bind"in e?i?e.bind(t,i):e.bind(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}};t.merge=function(e,t){e&&t&&Array.prototype.push.apply(e,t)};var P=function(e){return void 0===e||null===e},M=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}}(window.jQuery,window.Syncfusion,window.document),function(e,t,i){t.widget("ejDatePicker","ej.DatePicker",{element:null,_rootCss:"e-datepicker",model:null,validTags:["input","div","span"],_setFirst:!1,_addToPersist:["value"],_cancelValue:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{dayHeaderFormat:"min",showPopupButton:!0,enableAnimation:!0,showFooter:!0,displayInline:!1,htmlAttributes:{},dateFormat:"",watermarkText:"Select date",value:null,minDate:new Date("01/01/1900"),maxDate:new Date("12/31/2099"),startLevel:"month",depthLevel:"",cssClass:"",startDay:-1,stepMonths:1,locale:"en-US",showOtherMonths:!0,enableStrictMode:!1,enablePersistence:!1,enabled:!0,width:"",height:"",enableRTL:!1,showRoundedCorner:!1,headerFormat:"MMMM yyyy",buttonText:"Today",readOnly:!1,specialDates:null,fields:{date:"date",tooltip:"tooltip",iconClass:"iconClass",cssClass:"cssClass"},showTooltip:!0,showDisabledRange:!0,highlightSection:"none",highlightWeekend:!1,validationRules:null,validationMessage:null,validationMessages:null,allowEdit:!0,tooltipFormat:"ddd MMM dd yyyy",allowDrillDown:!0,blackoutDates:[],beforeDateCreate:null,open:null,close:null,select:null,change:null,focusIn:null,focusOut:null,beforeOpen:null,beforeClose:null,navigate:null,create:null,destroy:null,weekNumber:!1,timeZone:!0},dataTypes:{startDay:"number",stepMonths:"number",showOtherMonths:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",displayInline:"boolean",showPopupButton:"boolean",locale:"string",readOnly:"boolean",cssClass:"string",dateFormat:"string",watermarkText:"string",headerFormat:"string",buttonText:"string",specialDates:"data",showTooltip:"boolean",highlightSection:"enum",highlightWeekend:"boolean",enableAnimation:"boolean",validationRules:"data",validationMessage:"data",validationMessages:"data",htmlAttributes:"data",tooltipFormat:"string",allowEdit:"boolean",allowDrillDown:"boolean",weekNumber:"boolean"},_renderPopup:function(){this.sfCalendar=t.buildTag("div.e-datepicker e-popup e-widget "+this.model.cssClass+" e-calendar "+(this.model.specialDates&&this.model.specialDates[0][this._mapField._icon]?"e-icons ":""),"",{},{id:this._id?"e-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}).insertBefore(this.element),this.model.displayInline&&!this.element.is("input")&&this.sfCalendar.addClass("e-inline"),this.popup=this.sfCalendar,t.isTouchDevice()||this.sfCalendar.addClass("e-ntouch"),this._setRestrictDateState(this.model.showDisabledRange),this._createCalender(),this._setDisplayInline(this.model.displayInline),this._resizeCalender(),this._setRTL(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner),this._wireCalendarEvents()},_setModel:function(i){var s=!1,a=!1,r=!1;for(var n in i)switch("showPopupButton"!=n&&"width"!=n&&"dateFormat"!=n&&"height"!=n&&"readOnly"!=n&&"allowEdit"!=n&&"enabled"!=n&&"watermarkText"!=n&&"htmlAttributes"!=n&&"validationMessages"!=n&&"validationRules"!=n&&t.isNullOrUndefined(this.sfCalendar)&&this._renderPopup(),n){case"dayHeaderFormat":this.model.dayHeaderFormat=i[n],s=a=!0;break;case"weekNumber":this.model.weekNumber=i[n],this._refreshDatepicker();break;case"showPopupButton":this._renderDateIcon(i[n],!0);break;case"displayInline":i[n]||this._bindDateButton(),this._setDisplayInline(i[n]),this.model.allowEdit||i[n]||!this._isInputBox||this.element.on("mousedown",e.proxy(this._showDatePopUp,this));break;case"value":t.isPlainObject(i[n])&&(i[n]=null),t.isNullOrUndefined(i.minDate)&&t.isNullOrUndefined(i.maxDate)?(this._setDateValue(i[n]),this._specificFormat()&&(this._stopRefresh=!0),i[n]=this.model.value):this._updateDateValue(i[n]),this.model.value&&this.sfCalendar?e(this.element).attr("aria-activedescendant",e(this.sfCalendar.find(".e-active")).attr("id")):e(this.element).removeAttr("aria-activedescendant"),r=s=a=!0;break;case"specialDates":this.model.specialDates=i[n],this._createSpecialDateObject(),s=a=!0;break;case"fields":this.model.fields=i[n],this._mapField=this._getMapper(),s=a=!0;break;case"showTooltip":this.model.showTooltip=i[n],s=a=!0;break;case"highlightWeekend":this.model.highlightWeekend=i[n],s=a=!0;break;case"highlightSection":this.model.highlightSection=i[n],s=a=!0;break;case"dateFormat":this.model.dateFormat=i[n],this._ensureValue();break;case"minDate":this._setMinDate(i[n]),i[n]=this.model.minDate,this._ensureValue(),r=s=a=!0;break;case"maxDate":this._setMaxDate(i[n]),i[n]=this.model.maxDate,this._ensureValue(),r=s=a=!0;break;case"locale":this.model.locale=i[n],this.model.startDay=t.isNullOrUndefined(this._options.startDay)&&this.model.startDay===this.culture.calendar.firstDay?-1:this._options.startDay===this.defaults.startDay?-1:this.model.startDay,this.model.dateFormat=t.isNullOrUndefined(this._options.dateFormat)&&this.model.dateFormat===this.culture.calendar.patterns.d?"":this.model.dateFormat,this._setCulture(i[n]),this.model.value&&this._setDateValue(this.model.value),i[n]=this.model.locale,s=a=!0;break;case"showOtherMonths":this.model.showOtherMonths=i[n],this._otherMonthsVisibility();break;case"enableStrictMode":this.model.enableStrictMode=i[n],r=s=a=!0;break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessages=null),this.model.validationRules=i[n],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessages":case"validationMessage":this.model.validationMessages=i[n],null!=this.model.validationRules&&null!=this.model.validationMessages&&(this._initValidator(),this._setValidation());break;case"readOnly":this.model.readOnly=i[n],this._disbleMaualInput();break;case"width":this._setWidth(i[n]);break;case"height":this._setHeight(i[n]);break;case"cssClass":this._setSkin(i[n]);break;case"enableRTL":this._setRTL(i[n]);break;case"showRoundedCorner":this._setRoundedCorner(i[n]);break;case"enabled":i[n]?this.enable():this.disable();break;case"buttonText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.buttonText=this.model.buttonText=i[n],this._localizedLabels.buttonText=this.model.buttonText,this._setFooterText(i[n]);break;case"showFooter":this._enableFooter(i[n]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.watermarkText=this.model.watermarkText=i[n],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"startDay":var o=i[n];(parseInt(i[n])<0||parseInt(i[n])>6)&&(i[n]=this.culture.calendar.firstDay,o=-1),this.model.startDay=i[n],t.isNullOrUndefined(this._options)&&(this._options={}),this._options.startDay=o,s=a=!0;break;case"startLevel":this.model.startLevel=i[n],s=a=!0;break;case"headerFormat":this.model.headerFormat=i[n],s=a=!0;break;case"depthLevel":this.model.depthLevel=i[n],s=a=!0;break;case"htmlAttributes":this._addAttr(i[n]);break;case"allowEdit":this._changeEditable(i[n]);break;case"tooltipFormat":this.model.tooltipFormat=i[n],s=a=!0;break;case"allowDrillDown":this._allowQuickPick(i[n]),s=a=!0;break;case"showDisabledRange":this._setRestrictDateState(i[n]);break;case"blackoutDates":this.model.blackoutDates=i[n],this._initDisableObj(this.model.blackoutDates),s=a=!0}r&&(this._validateMinMaxDate(),i.value=this.model.value,i.maxDate=this.model.maxDate,i.minDate=this.model.minDate),this._setWaterMark(),s&&(this.isValidState||this.model.displayInline)&&this._refreshDatepicker(),a&&!this._startNavigate&&this._startLevel(this.model.startLevel),this._triggerChangeEvent(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.model.displayInline&&e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._isOpen&&this.hide(),this.sfCalendar&&this.sfCalendar.remove(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this.element.removeClass("e-datepicker e-input"),this.element.removeAttr("aria-atomic aria-live aria-activedescendant aria-expanded role placeholder tabindex"),!this._cloneElement.hasAttribute("name")&&this.element.removeAttr("name")},_init:function(e){this._options=e,this._cloneElement=this.element.clone(),this._dt_drilldown=!1,this._ISORegex(),this._initDisableObj(this.model.blackoutDates),this.animation={open:{duration:200},close:{duration:100}},this._animating=!1,this._isInputBox=this._isInputBox(),this._startNavigate=!1,this._keyboardInteraction=!1,this._isSupport=void 0!=document.createElement("input").placeholder,this._checkAttribute(),this._setValues(),this._createDatePicker(),t.isNullOrUndefined(e)||t.isNullOrUndefined(e.validationMessage)||(this.model.validationMessages=this.model.validationMessage),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),e&&void 0!=e.value&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._isISODate=/[T]/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,
this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_initValidator:function(){!this.element.closest("form").data("validator")&&this.element.closest("form").validate()},_setValidation:function(){this.element.rules("add",this.model.validationRules);var i=this.element.closest("form").data("validator");i=i||this.element.closest("form").validate();var s=this.element.attr("name");i.settings.messages[s]={};for(var a in this.model.validationRules){var r=null;if(!t.isNullOrUndefined(this.model.validationRules[a])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[a])){i.settings.messages[s][a]=e.validator.messages[a];for(var n in this.model.validationMessages)a==n&&(r=this.model.validationMessages[a])}else r=this.model.validationRules.messages[a];i.settings.messages[s][a]=null!=r?r:e.validator.messages[a]}}},setValue:function(e){"string"==typeof e&&(e=new Date(e));var t=this.model.value;this._setDateValue(e),this._checkErrorClass(),t!=this.model.value&&this._triggerChangeEvent()},_checkAttribute:function(){for(var e,i,s=["min","max","readonly","disabled"],a=["minDate","maxDate","readOnly","enabled"],r=0;r<s.length;r++)e=this.element.attr(s[r]),i=a[r],t.isNullOrUndefined(e)||(t.isNullOrUndefined(this._options)?this.model[i]="enabled"!=i&&"readOnly"!=i?new Date(e):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]"):t.isNullOrUndefined(this._options[i])&&(this.model[i]="enabled"!=i&&"readOnly"!=i?new Date(e):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]")))},_updateDateValue:function(e){var t=this._checkDateObject(e);null!=t?(this.isValidState=!0,""==t?(this.element.val(""),this.model.value=null):(this.model.value=t,this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat)))):("string"==typeof t&&this.model.enableStrictMode?this.element.val(e):this.element.val(""),this.model.value=null,this.isValidState=""==this.element.val()),this._removeWatermark()},_ensureValue:function(){var e=this._parseDate(this.element.val(),this.model.dateFormat);this.model.value?this._setDateValue(this.model.value):e&&this._setDateValue(e)},_changeEditable:function(t){var i=t?"_on":"_off";this.element.is(":input")&&(t?(this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",e.proxy(this._showDatePopUp,this))):(this.model.readOnly||this.element.attr("readonly","readonly"),this.model.displayInline||this.element.on("mousedown",e.proxy(this._showDatePopUp,this))),this[i](this.element,"blur",this._onFocusOut),this[i](this.element,"focus",this._onFocusIn),this[i](this.element,"keydown",this._onKeyDown))},_allowQuickPick:function(t){e(".e-datepicker-headertext",this.sfCalendar)[t?"on":"off"]("click",e.proxy(this._forwardNavHandler,this))},_setRestrictDateState:function(e){var t=e?"addClass":"removeClass";this.sfCalendar[t]("e-dp-restrict-show")},_setValues:function(){this.Date=new Date,this._id=this.element[0].id,this.isValidState=!0,this._setCulture(this.model.locale),this._setMinDate(this.model.minDate),this._setMaxDate(this.model.maxDate),this._calendarDate=this._zeroTime(new Date),(this.model.startDay<0||this.model.startDay>6)&&(this.model.startDay=0),this.Date.firstDayOfWeek=this.model.startDay,this.Date.fullYearStart="20",this._showHeader=!0,t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._validateMinMaxDate(),this._dateValue=new Date(this._calendarDate.toString()),this._isIE7=this._checkIE7(),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._isIE9="msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version,this._getInternalEvents=!1,this._flag=!0,this._ejHLWeekEnd=!1,this._isOpen=!1,this._prevDate=null,this._preValue=null,this._isFocused=!1},_addAttr:function(i){var s=this;e.map(i,function(e,i){var a=i.toLowerCase();"class"==a?s.wrapper.addClass(e):"disabled"==a?s.disable():"readOnly"==a?s.model.readOnly=!0:"style"==a?s.wrapper.attr(i,e):"id"==a?(s.wrapper.attr(i,e+"_wrapper"),s.element.attr(i,e)):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_createDatePicker:function(){this._createWrapper(),this._wireEvents(),this.model.displayInline&&this.show(),this.model.enableRTL&&this._setRTL(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0)},_checkNameAttr:function(){!this.element.attr("name")&&this._isInputBox&&this.element.attr("name",this.element[0].id),this.model.displayInline&&!this._isInputBox&&this._hiddenInput.attr("name",this.element[0].id)},_createWrapper:function(){if(this._getMapper(),this.model.specialDates&&this._createSpecialDateObject(),this.element[0].hasAttribute("tabindex")||this.element.attr("tabindex","0"),this._isInputBox&&(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive","aria-expanded":"false",role:"combobox"}),this.wrapper=t.buildTag("span.e-datewidget e-widget "+this.model.cssClass),this.wrapper.attr("style",this.element.attr("style")),this.element.removeAttr("style"),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.innerWrapper=t.buildTag("span.e-in-wrap e-box e-padding"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this.dateIcon=t.buildTag("span.e-select#"+this._id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-icon e-calendar","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element)),!this._isSupport||this.model.displayInline&&!this._isInputBox){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._isInputBox&&this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}this._checkNameAttr(),this.model.height||(this.model.height=this.element.attr("height")),this.model.width||(this.model.width=this.element.attr("width")),this._setHeight(this.model.height),this._setWidth(this.model.width),this._id&&e("#e-"+this._id).remove(),this._setDateValue(this.model.value),this._preValue=this._parseDate(this.element.val(),this.model.dateFormat),this._setWaterMark(),this._dateValue=new Date(this._calendarDate.toString()),this.model.displayInline?this._renderPopup():this._isInputBox&&this._renderDateIcon(this.model.showPopupButton,!1),this.model.readOnly&&this._disbleMaualInput(),this.model.enabled?this.model.enabled&&e(this.element).hasClass("e-disable")&&this.enable():this.disable(),this._layoutChanged(),this._checkErrorClass(),this._addAttr(this.model.htmlAttributes)},_isInputBox:function(){return this.element.is("input[type=date]")&&this.element.attr("type","text"),this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))},_renderDateIcon:function(e,t){t&&this.model.showPopupButton==e||(!e&&this.dateIcon?(this._bindInputEvent(),this.dateIcon.css("display","none"),this.innerWrapper.removeClass("e-padding")):(this.innerWrapper&&(this.innerWrapper.addClass("e-padding"),this.dateIcon.css("display","block")),this.model.displayInline||this._bindDateButton()),this.model.showPopupButton=e)},_resizeCalender:function(){"short"==this.model.dayHeaderFormat||"min"==this.model.dayHeaderFormat||"none"==this.model.dayHeaderFormat?this.sfCalendar.removeClass("e-headerlong"):"long"==this.model.dayHeaderFormat&&this.sfCalendar.addClass("e-headerlong")},_setWidth:function(e){e?this.wrapper?this.wrapper.width(e):this.element.width(e):this.model.width=this.wrapper?this.wrapper.outerWidth():this.element.width()},_setHeight:function(e){e?this.wrapper?this.wrapper.height(e):this.element.height(e):this.model.height=this.wrapper?this.wrapper.outerHeight():this.element.height(),this._isIE7&&this.element.height(this.innerWrapper.height())},_setRTL:function(e){e?(this.wrapper&&this.wrapper.addClass("e-rtl"),this.sfCalendar&&this.sfCalendar.addClass("e-rtl")):(this.wrapper&&this.wrapper.removeClass("e-rtl"),this.sfCalendar&&this.sfCalendar.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.innerWrapper&&this.innerWrapper.addClass("e-corner"),this.sfCalendar&&this.sfCalendar.addClass("e-corner")):(this.innerWrapper&&this.innerWrapper.removeClass("e-corner"),this.sfCalendar&&this.sfCalendar.removeClass("e-corner"))},_refreshDatepicker:function(){if(this._stopRefresh)return void(this._stopRefresh=!1);var t=this.element.val(),i=!1;if(null!==this.model.navigate&&void 0!==this.sfCalendar.find("table")[0]){var s=this.sfCalendar.find("table")[0].className;if("e-dp-viewdays"===s&&+this._dateValue!=+this._calendarDate)this._calendarDate=this._dateValue,i=!0;else if("e-dp-viewdays"!==s)return void("e-dp-viewmonths"!==s&&"e-dp-viewyears"!==s&&"e-dp-viewallyears"!==s||(this._startNavigate=!0))}if(this._specificFormat()&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=t)var a=this._parseDate(t,!0);else var a=this._parseDate(t);a=this._validateYearValue(a),null!==this.model.navigate&&null!==a&&a!==this._calendarDate&&(a=this._calendarDate),this._setDateValue(a),this._specificFormat()&&this._compareDate(this.model.value,this._calendarDate)&&this.element.val(t),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._calendarDate,this.model.headerFormat)),this._resizeCalender(),this._dateValue=new Date(this._calendarDate.toString()),this._hoverDate=this._calendarDate.getDate()-1,this._renderCalendar(this,this._dateValue),i&&""===t&&this._addFocus("day",this._hoverDate),this._setFooterText(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter),this._layoutChanged()},_removeCurrentMonthFromHideDate:function(){for(var t=this.sfCalendar.find("tbody.e-datepicker-days tr").length,i=0;i<t;i++)for(var s=this.sfCalendar.find("tbody.e-datepicker-days tr")[i].cells.length,a=0;a<s;a++){var r=e(this.sfCalendar.find("tbody.e-datepicker-days tr")[i].cells[a]);r.hasClass("e-hidedate")&&r.hasClass("current-month")&&r.removeClass("current-month")}},_validateYearValue:function(e){if(null!=e){var i=t.preferredCulture(this.model.locale).calendars.standard.twoDigitYearMax;i="string"==typeof i?(new Date).getFullYear()%100+parseInt(i,10):i,this._calendarDate.getFullYear()-e.getFullYear()==100&&this._calendarDate.getFullYear()>i&&e.setFullYear(this._calendarDate.getFullYear())}return e},_setFooterText:function(t){e(".e-footer-text",this.sfCalendar).html(t)},_setSkin:function(e){this.wrapper?(this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)):(this.element.removeClass(this.model.cssClass),this.element.addClass(e)),this.sfCalendar.removeClass(this.model.cssClass),this.sfCalendar.addClass(e)},_setDisplayInline:function(t){this.model.displayInline=t,t&&this._isInputBox?(this.sfCalendar.insertAfter(this.wrapper),this._setDatePickerPosition()):t?(this.element.append(this.sfCalendar),this._isSupport&&this._isInputBox||this._hiddenInput.css("display","none")):(this.sfCalendar.css("display","none"),e("body").append(this.sfCalendar),this._isOpen=!1),t&&(this.show(),this._off(this.dateIcon,"mousedown",this._showDatePopUp),this.element.off("mousedown",e.proxy(this._showDatePopUp,this)))},_disbleMaualInput:function(){this.model.readOnly?(e(this.element).attr("readonly","readonly"),this.model.displayInline||this.hide()):this.model.allowEdit&&e(this.element).prop("readonly",!1)},_checkDateObject:function(e,t){if(!e||"object"==typeof JSON&&"{}"===JSON.stringify(e))return e=null;if(!(e instanceof Date)){if(this._specificFormat())var t=this._parseDate(e,!0);else var t=this._parseDate(e,t);e=t||((t=this._checkJSONString(e))?t:null)}return!isNaN(Date.parse(e))&&(this._dateValue=this._calendarDate=this._zeroTime(e),this._validateDate(e))?this._dateValue:null},_checkJSONString:function(e){if(isNaN(Date.parse(e))){if(this.model.enableStrictMode&&null==t.parseDate(e,this.model.value,this.model.locale))return null;if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else if(new Date(e).toJSON()===e||new Date(e).toDateString()===e||new Date(e).toGMTString()===e||new Date(e).toISOString()===e||new Date(e).toLocaleString()===e||new Date(e).toString()===e||new Date(e).toUTCString()===e){if(this.model.timeZone)return new Date(new Date(e).getTime()+60*t.serverTimezoneOffset*60*1e3);if(e.match(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i)&&e.match(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i).length>0)return e=e.split("T"),e=e[0],t.parseDate(e,"yyyy-MM-dd",this.model.locale)}else if("string"==typeof e)return this._dateFromISO(e)},_dateFromISO:function(e){var t,i=this._isISODate.test(e)&&(this._extISORegex.exec(e)||this._basicISORegex.exec(e)),s="",a="",r="";if(i){for(var n=0;n<this._dates.length;n++)if(this._dates[n][1].exec(i[1])){s=this._dates[n][0];break}if(i[3])for(var o=0;o<this._times.length;o++)if(this._times[o][1].exec(i[3])){a=(i[2]||" ")+this._times[o][0];break}i[4]&&this._zeroRegex.exec(i[4])&&(r="Z"),t=s+a+r;for(var l,d,h=t.match(this._tokens),c=[],u=0;u<h.length;u++){var p=h[u];d=this._checkLiteral(h[u]);var m=this._numberRegex[d?h[u].toLowerCase():p.length]||new RegExp("^\\d{1,"+p.length+"}");l=e.match(m),l&&(e.substr(0,e.indexOf(l))>=0&&!d&&(h[u].indexOf("M")>=0?c.push(parseInt(l[0])-1):c.push(parseInt(l[0]))),e=e.slice(e.indexOf(l[0])+l[0].length))}return"Z"==i[4]?new Date(Date.UTC.apply(null,c)):new Date(c[0],c[1],c[2],c[3],c[4],c[5])}return new Date(e+"")},_checkLiteral:function(e){var t=e.toLowerCase();return"t"==t||"z"==t||":"==t||"-"==t},_checkInstanceType:function(e){return(e=this._stringToObject(e))?(e instanceof Date||(e=this._parseDate(e)),isNaN(Date.parse(e))?null:this._zeroTime(e)):null},_stringToObject:function(e){if("string"==typeof e){var i=t.parseDate(e,this.model.dateFormat,this.model.locale);e=null!=i?i:new Date(e)}return e},_validateMinMaxDate:function(){var e=!1,t=!1;this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode?this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.minDate,this.isValidState=!1,t=!0):this.model.value>this.model.maxDate?(this._calendarDate=this.model.maxDate,this.isValidState=!1,t=!0):this.isValidState=!0:this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate):(this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.value=this.model.minDate,e=!0):this.model.value>this.model.maxDate&&(this._calendarDate=this.model.value=this.model.maxDate,e=!0):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),e&&this.element.val(this._formatter(this.model.value,this.model.dateFormat)),t&&this._getInternalEvents&&this._trigger("outOfRange")},_setCulture:function(e){this.culture=t.preferredCulture(e),this.culture&&(this.model.locale="en"==this.culture.name?"en-US":this.culture.name,this.Date.dayNames=this.culture.calendar.days.names,this.Date.dayNamesMin=this.culture.calendar.days.namesShort,this.Date.abbrDayNames=this.culture.calendar.days.namesAbbr,this.Date.monthNames=this.culture.calendar.months.names,this.Date.abbrMonthNames=this.culture.calendar.months.namesAbbr,this.Date.format=this.culture.calendar.patterns.d,""==this.model.dateFormat&&(this.model.dateFormat=this.culture.calendar.patterns.d),-1==this.model.startDay&&(this.model.startDay=this.culture.calendar.firstDay)),this._separator=this._getSeparator(),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),t.isNullOrUndefined(this._options.buttonText)||(this._localizedLabels.buttonText=this._options.buttonText)),this._localizedLabelToModel()},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_setDatePickerPosition:function(){if(!this.model.displayInline||this._isInputBox){var i,s,a=this.element.is("input")?this.wrapper:this.element,r=this._getOffset(a),n=e(document).scrollTop()+e(window).height()-(r.top+e(a).outerHeight()),o=r.top-e(document).scrollTop(),l=this.sfCalendar.outerHeight(),d=this.sfCalendar.outerWidth(),h=r.left,c=a.outerHeight(),u=(a.height(),this._getZindexPartial()),p=l<n||l>o?r.top+c+3:r.top-l-3;i=e(document).scrollLeft()+e(window).width()-h,s=e(document).scrollLeft()+h+a.width(),(this.model.enableRTL||d>i&&d<h+a.outerWidth()&&!t.isNullOrUndefined(this.wrapper))&&(h+=this.wrapper.width()-this.sfCalendar.width()),d>s&&(h=r.left),this.sfCalendar.css({left:h+"px",top:p+"px","z-index":u})}},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.sfCalendar)},_setMinDate:function(e){this.model.minDate=this._checkInstanceType(e),this.model.minDate||(this.model.minDate=new Date("11/31/1899"))},_setMaxDate:function(e){this.model.maxDate=this._checkInstanceType(e),this.model.maxDate||(this.model.maxDate=new Date("12/31/2099"))},_setDateValue:function(e,i){var s=this._checkDateObject(e,i);null!=s?(this.isValidState=!0,this.model.value=new Date(s),this.model.displayInline||this.wrapper.addClass("e-valid"),this._validateMinMaxDate(),this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat))):(e instanceof Date&&(this._validateMinMaxDate(),e=this._formatter(e,this.model.dateFormat)),this.model.enableStrictMode?this.element.val(e):this.element.val(null),this.model.value=null,this.model.displayInline||this.wrapper.removeClass("e-valid"),this._triggerChangeEvent(),this.isValidState=!(""!=this.element.val()&&!t.isNullOrUndefined(this.element.val()))),this._removeWatermark()},_updateInputVal:function(){null==this._validateValue()&&this.model.enableStrictMode||!this.sfCalendar||!this.sfCalendar.find(".e-datepicker-days").is(":visible")||this._refreshDatepicker()},_validateInputVal:function(){var e=this._validateValue();null!=e&&(this.model.enableStrictMode||(e<=this.model.maxDate&&e>=this.model.minDate?this.isValidState=!0:(this.model.value=null,this.isValidState=!0)))},_validateValue:function(){if(this._specificFormat()&&this.element.val()!=this._formatter(this._preValue,this.model.dateFormat,this.model.locale))var e=this._parseDate(this.element.val(),!0);else var e=this._parseDate(this.element.val());return this._validateYearValue(e)},_getSeparator:function(){var e;e=this.culture?this.culture.calendar.patterns.d:this.model.dateFormat;for(var t=new RegExp("^[a-zA-Z0-9]+$"),i=0;i<e.length;i++)if(!t.test(e[i]))return e[i]},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),t=-1;if(null!=e.exec(navigator.userAgent)&&(t=parseFloat(RegExp.$1)),t>=7&&t<8)return!0}return!1},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_formatter:function(e,i){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)},_parseDate:function(e,i){var s=this._checkFormat(this.model.dateFormat),a=e;return this._specificFormat()&&void 0!=a&&""!=e&&1!=i&&t.format(t.parseDate(a,s,this.model.locale),this.model.dateFormat,this.model.locale)!=a?this._dateValue:t.parseDate(e,s,this.model.locale)},_checkFormat:function(e){var i=this,s=this._regExp();return e.replace(s,function(e){return e="/"===e&&"/"!==t.preferredCulture(i.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[\/]/g},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},_zeroTime:function(e){var t="string"==typeof e?this._parseDate(e):new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_getDaysInMonth:function(e){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][e.getMonth()]},_addDays:function(e,t){return e.setDate(e.getDate()+t),e},_addYears:function(e,t){return e.setFullYear(e.getFullYear()+t),e},_addMonths:function(e,t){var i=e.getDate();return e.setMonth(e.getMonth()+t),i>e.getDate()&&this._addDays(e,-e.getDate()),e},_isWeekend:function(e){return 0==e.getDay()||6==e.getDay()},_isSpecialDates:function(e){if(this.model.specialDates)for(var t=0;t<this.model.specialDates.length;t++)if(this.model.specialDates[t]&&this.model.specialDates[t][this._mapField._date]&&e.getDate()==this.model.specialDates[t][this._mapField._date].getDate()&&e.getMonth()==this.model.specialDates[t][this._mapField._date].getMonth()&&e.getFullYear()==this.model.specialDates[t][this._mapField._date].getFullYear())return this._getIndex=t,!0;return!1},_getMapper:function(){var e=this.model.fields;this._mapField={},this._mapField._date=e&&e.date?e.date:"date",this._mapField._tooltip=e&&e.tooltip?e.tooltip:"tooltip",this._mapField._icon=e&&e.iconClass?e.iconClass:"iconClass",this._mapField._custom=e&&e.cssClass?e.cssClass:"cssClass"},_createSpecialDateObject:function(){for(var e=0;e<this.model.specialDates.length;e++)this.model.specialDates[e][this._mapField._date]=this._checkInstanceType(this.model.specialDates[e][this._mapField._date])},_getMonthName:function(e,t){return e?this.Date.abbrMonthNames[t.getMonth()]:this.Date.monthNames[t.getMonth()]},_displayNewMonth:function(e,t){return this._setDisplayedMonth(this.displayedMonth+e,this.displayedYear+t,!0),!1},_setDisplayedMonth:function(e,t,i){if(void 0!=this.model.minDate&&void 0!=this.model.maxDate){var s=new Date(this.model.minDate.getTime());s.setDate(1);var a=new Date(this.model.maxDate.getTime());a.setDate(1);var r;!e&&!t||isNaN(e)&&isNaN(t)?(r=this._zeroTime(new Date),r.setDate(1)):r=isNaN(e)?new Date(t,this.displayedMonth,1):isNaN(t)?new Date(this.displayedYear,e,1):new Date(t,e,1),r.getTime()<s.getTime()?r=s:r.getTime()>a.getTime()&&(r=a);var n=this.displayedMonth,o=this.displayedYear;this.displayedMonth=r.getMonth(),this.displayedYear=r.getFullYear();var l=r;!i||this.displayedMonth==n&&this.displayedYear==o||(this._renderCalendar(this,l),this._dateValue=l,this._trigger("monthChanged",[this.displayedMonth,this.displayedYear]))}},_clearSelected:function(){this.numSelected=0,t.isNullOrUndefined(this.sfCalendar)||("week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().parent().removeClass("e-selected-month"):"workdays"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-work-week"):e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1))},_addSelected:function(){"week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).parent().addClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active, this.sfCalendar").parent().parent().addClass("e-selected-month"):"workdays"==this.model.highlightSection&&e("td.e-active",this.sfCalendar).parent().addClass("e-work-week")},_hideOtherMonths:function(t){e("td.other-month",t).css("visibility","hidden")},_showOtherMonths:function(t){e("td.other-month",t).css({visibility:"visible"})},_otherMonthsVisibility:function(){this.model.showOtherMonths?this._showOtherMonths(this.sfCalendar):this._hideOtherMonths(this.sfCalendar)},_createCalender:function(){t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-datepicker-headertext").text(this._formatter(this._calendarDate,this.model.headerFormat)).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this.sfCalendar),this._enableHeader(this._showHeader);var i=t.buildTag("table.e-dp-viewdays","",{}).data("e-table","data").attr({role:"grid"}).attr(this._isIE8?{unselectable:"on"}:{});this.sfCalendar.append(i),this._renderCalendar(this),this._startLevel(this.model.startLevel),t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this.sfCalendar),e(".e-footer-text",this.sfCalendar).html(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter)},_enableHeader:function(t){t?e(".e-header",this.sfCalendar).show():e(".e-header",this.sfCalendar).hide()},_enableFooter:function(t){t?e(".e-footer",this.sfCalendar).show():e(".e-footer",this.sfCalendar).hide(),this._todayBtnDisable()},_todayBtnDisable:function(){var t=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),0,0,0);+this.model.minDate<=+t&&+this.model.maxDate>=+t?e(".e-footer",this.sfCalendar).removeClass("e-footer-disable"):e(".e-footer",this.sfCalendar).addClass("e-footer-disable")},_checkArrows:function(e,t){this._preArrowCondition(e,this.model.minDate.getFullYear()),this._nextArrowCondition(t,this.model.maxDate.getFullYear())},_checkDateArrows:function(){this._preArrowCondition(this._tempMinDate,this.model.minDate),this._nextArrowCondition(this._tempMaxDate,this.model.maxDate)},_preArrowCondition:function(e,t){e<=t?this.sfCalendar.find(".e-prev").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-prev").removeClass("e-disable").attr({"aria-disabled":!1})},_nextArrowCondition:function(e,t){e>=t?this.sfCalendar.find(".e-next").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-next").removeClass("e-disable").attr({"aria-disabled":!1})},_previousNextHandler:function(t){if(this.model.readOnly||!this.model.enabled||e(t.target).hasClass("e-disable")||e(t.currentTarget).hasClass("e-disable"))return!1;t.preventDefault(),this._keyboardInteraction=!1;var i,s=e("table",this.sfCalendar);i=this._navigateFrom(s);var a=e(e(t.target).is("a")?t.target.parentNode:t.target),r=!!a.hasClass("e-prev");this._processNextPrevDate(r);var n,o=e("table",this.sfCalendar);switch(o.get(0).className){case"e-dp-viewdays":n="month";break;case"e-dp-viewmonths":n="year";break;case"e-dp-viewyears":n="decade";break;case"e-dp-viewallyears":n="century"}this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:n,navigateFrom:i})},_processNextPrevDate:function(t){if(this._DRPdisableFade){var i=new Date(this.sfCalendar.find("td.current-month").attr("data-date"));this._dateValue=i}if(t&&this.sfCalendar.find(".e-arrow-sans-left").hasClass("e-disable"))return!1;if(!t&&this.sfCalendar.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;var s,a=e("table",this.sfCalendar);switch(a.get(0).className){case"e-dp-viewdays":var r=this.model.stepMonths;if(t){if(this._dateValue<=this.model.minDate)return this._flag=!1,!1}else if(this._dateValue>=this.model.maxDate)return this._flag=!1,!1;this._flag=!0,this._addMonths(this._dateValue,t?-r:r),this._clickedDate&&(this._calendarDate=this._clickedDate),this._dateValue=this._dateValue<this.model.minDate?new Date(this.model.minDate.toString()):this._dateValue,this._dateValue=this._dateValue>this.model.maxDate?new Date(this.model.maxDate.toString()):this._dateValue,this._renderCalendar(this,this._dateValue),this._keyboardInteraction&&(this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat)}),this._removeCurrentMonthFromHideDate(),this._keyboardInteraction=!1),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),this._addFocus("day",this._hoverDate);var n=this._findFirstLastDay(new Date(this._dateValue.toString()));this._preArrowCondition(n.firstDay,this.model.minDate),this._nextArrowCondition(n.lastDay,this.model.maxDate);break;case"e-dp-viewmonths":var o=this._dateValue;if(o.setFullYear(e(".e-datepicker-headertext",this.sfCalendar).text()),t){if(o.getFullYear()<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(o.getFullYear()>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,this._addYears(o,t?-1:1),this._renderCalendar(this,o),s=o.getFullYear(),e(".e-datepicker-headertext",this.sfCalendar).text(s),e("tbody,tr.e-week-header",a).not(".e-datepicker-months").hide(),e(e(a).find(".e-datepicker-months")).show(),this._addFocus("month",this._hoverMonth),this._checkArrows(s,s);break;case"e-dp-viewyears":var l;if(l=this._dateValue,l.setFullYear(e(a).find(".e-state-hover").text()),t){if(parseInt(this.popup.find("td.e-year-first:first").text())<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(parseInt(e("td.e-year-last:first").prev().text())>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,e(a).find(".e-state-hover").hasClass("e-year-first")&&t||e(a).find(".e-state-hover").hasClass("e-year-last")&&!t?this._dateValue.setFullYear(l.getFullYear()):e(a).find(".e-state-hover").hasClass("e-year-first")&&!t?this._dateValue.setFullYear(l.getFullYear()+11):e(a).find(".e-state-hover").hasClass("e-year-last")&&t?this._dateValue.setFullYear(l.getFullYear()-11):this._dateValue.setFullYear(l.getFullYear()+(t?-10:10)),this._renderCalendar(this,this._dateValue);var d=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1);e(".e-datepicker-headertext",this.sfCalendar).text(d+1+" - "+(d+10)),e("tbody,tr.e-week-header",a).not(".e-datepicker-years").hide(),e(e(a).find(".e-datepicker-years")).show(),this._addFocus("year",this._hoverYear+(e(".e-year-first.e-hidedate").length?-1:0)),this._checkArrows(d+1,d+10);break;case"e-dp-viewallyears":if(t){if(parseFloat(e("td.e-allyear-first",a.get(0)).text().split("-")[1])<=this.model.minDate.getFullYear())return this._flag=!1,!1;this._flag=!0}else{if(parseFloat(e("td.e-allyear-last",a.get(0)).prev().text().split("-")[1])>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0}this._dateValue.setFullYear((this._lastHoveredYear?this._lastHoveredYear:this._dateValue.getFullYear())+(t?-100:100)),this._lastHoveredYear=this._dateValue.getFullYear(),this._renderCalendar(this,this._dateValue);var d=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%100+1);s=parseFloat(e("td.e-allyear-last",a.get(0)).prev().text().split("-")[1]),e(".e-datepicker-headertext",this.sfCalendar).text(d+1+" - "+s),
e("tbody,tr.e-week-header",a).not(".e-datepicker-allyears").hide(),e(e(a).find(".e-datepicker-allyears")).show(),this._addFocus("allyear",this._hoverAllYear+(e(".e-allyear-first.e-hidedate").length?-1:0)),this._checkArrows(d+1,s)}this._layoutChanged()},_addFocus:function(t,i){var s="e-current-"+t;"day"==t&&(s="current-month");var a=this.sfCalendar.find("tbody tr td."+s);"month"==t&&e(a).each(function(t,s){if(parseInt(e(s).attr("data-index"))==parseInt(i))return void(i=t)});var r=a[i];return r||(r=a.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(r).hasClass("e-hidedate")||e(r).addClass("e-state-hover"),this._setActiveState(t),i},_setActiveState:function(t){if(this.model.value instanceof Date){var i,s=this.sfCalendar.find("tbody tr td.e-current-"+t),a=this,r=-1;switch(t){case"month":this.model.value.getFullYear()===parseInt(e(".e-text",this.sfCalendar).text())&&e(s).each(function(t,i){if(parseInt(e(i).attr("data-index"))==parseInt(a.model.value.getMonth()))return void(r=t)});break;case"year":var n=this.model.value.getFullYear();e(s).each(function(e,t){if(parseInt(t.innerHTML)==parseInt(n))return void(r=e)});break;case"allyear":var o=parseInt(this.model.value.getFullYear())-(parseInt(this.model.value.getFullYear())%10+1),l=o+1+" - "+(o+10);e(s).each(function(e,t){if(parseInt(t.innerHTML)==parseInt(l))return void(r=e)})}i=s[r],i&&(this.sfCalendar.find("table td").removeClass("e-active"),e(i).hasClass("e-hidedate")||e(i).addClass("e-active"))}},_setFocusByName:function(t,i){var s,a,r=this.sfCalendar.find("tbody tr td.e-current-"+t);return e(r).each(function(e,t){if(parseInt(t.innerHTML)==parseInt(i))return void(s=e)}),a=r[s],a||(a=r.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(a).addClass("e-state-hover"),this._setActiveState(t),s},_getHeaderTxt:function(){return this.sfCalendar.find(".e-datepicker-headertext").text()},_findFirstLastDay:function(e){var t=e.getFullYear(),i=e.getMonth();return{firstDay:new Date(t,i,1),lastDay:new Date(t,i+1,0)}},_forwardNavHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t&&t.preventDefault();var i,s,a=e("table",this.sfCalendar),r=e("table",this.sfCalendar).get(0).className,n=this._navigateFrom(a);switch(r){case"e-dp-viewdays":this._hoverMonth=this._getDateObj(a.find(".e-state-hover")).getMonth()||this._getDateObj(a.find(".e-active")).getMonth()||0,this._DRPdisableFade&&(this._renderCalendar(this,this._calendarDate),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat))),this._startLevel("year"),s="year",this._addFocus("month",this._hoverMonth);break;case"e-dp-viewmonths":i=this._getHeaderTxt(),this._startLevel("decade"),s="decade",this._hoverYear=this._setFocusByName("year",i);break;case"e-dp-viewyears":i=this._getHeaderTxt(),this._startLevel("century"),s="century",this._hoverAllYear=this._setFocusByName("allyear",i)}"century"!=n&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:s,navigateFrom:n}),this._layoutChanged()},_cellSelection:function(){e("table",this.sfCalendar);switch(e("table",this.sfCalendar).get(0).className){case"e-dp-viewmonths":this._hoverMonth=this._addFocus("month",this._dateValue.getMonth());break;case"e-dp-viewyears":var t=new Date(this._dateValue.toString());this._navigationToPrevNext("year"),this._dateValue=t,this._hoverYear=this._setFocusByName("year",this._dateValue.getFullYear());break;case"e-dp-viewallyears":var t=new Date(this._dateValue.toString());this._navigationToPrevNext("allyear"),this._dateValue=t;var i=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1);this._hoverAllYear=this._setFocusByName("allyear",i+1+" - "+i+10)}this._layoutChanged()},_navigationToPrevNext:function(t){var i,s,a=this.sfCalendar.find("tbody tr td.e-current-"+t),r=this._dateValue.getFullYear();e(a).each(function(e,t){if(parseInt(t.innerHTML)==parseInt(r))return void(i=e)}),(s=a[i])&&(e(s).hasClass("e-"+t+"-last")?this._processNextPrevDate(!1):e(s).hasClass("e-"+t+"-first")&&this._processNextPrevDate(!0))},_navigateFrom:function(e){var t,i=e.get(0).className;switch(i){case"e-dp-viewdays":t="month";break;case"e-dp-viewmonths":t="year";break;case"e-dp-viewyears":t="decade";break;case"e-dp-viewallyears":t="century"}return t},_backwardNavHandler:function(i){if(this._animating=!0,this.model.readOnly||!this.model.enabled)return!1;var s;i.type?(i.preventDefault(),s=e(i.currentTarget)):s=i;var a,r,n=e("table",this.sfCalendar),o=e("table",this.sfCalendar).get(0).className,l=this,d=this._navigateFrom(n);switch(o){case"e-dp-viewmonths":n.removeClass("e-dp-viewmonths").addClass("e-dp-viewdays"),this._lastHoveredMonth=parseInt(e(s).attr("data-index")),this._dateValue=new Date(this._dateValue.getFullYear(),this._lastHoveredMonth,1),this._DRPdisableFade&&this._trigger("_month_Loaded",{currentTarget:i.currentTarget}),this._renderCalendar(this,this._dateValue),e("tbody",n).not(".e-datepicker-days,.e-week-header").hide(),e(e(n).find(".e-datepicker-days,.e-week-header")).fadeIn("fast",function(){l._addFocus("day",l._hoverDate||0),l._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),r="month";break;case"e-dp-viewyears":n.removeClass("e-dp-viewyears").addClass("e-dp-viewmonths"),this._lastHoveredYear=parseInt(s.text()),this._dateValue.setFullYear(this._lastHoveredYear),this._renderCalendar(this,this._dateValue),e("tbody,tr.e-week-header",n).not(".e-datepicker-months").hide(),t.isNullOrUndefined(this._hoverMonth)&&!t.isNullOrUndefined(this._dateValue)&&(this._hoverMonth=this._dateValue.getMonth()),e(e(n).find(".e-datepicker-months")).fadeIn("fast",function(){l._addFocus("month",l._hoverMonth||0),l._animating=!1}),a=s.text(),e(".e-datepicker-headertext",this.sfCalendar).text(a),this._checkArrows(a,a),r="year";break;case"e-dp-viewallyears":var h=s.text().split("-");n.removeClass("e-dp-viewallyears").addClass("e-dp-viewyears"),h[0]<this.model.minDate.getFullYear()?h[0]=this.model.minDate.getFullYear().toString():h[0]>this.model.maxDate.getFullYear()&&(h[0]=this.model.maxDate.getFullYear().toString()),this._renderCalendar(this,new Date(h[0],0,1)),e("tbody,tr.e-week-header",n).not(".e-datepicker-years").hide(),e(e(n).find(".e-datepicker-years")).fadeIn("fast",function(){l._addFocus("year",l._hoverYear||0),l._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(h[0]+" - "+h[1]),this._checkArrows(h[0],h[1]),r="decade",this._dateValue=new Date(this._dateValue.setFullYear(parseInt(e.trim(h[0]))+(this._lastHoveredYear?this._lastHoveredYear%10:this._dateValue.getFullYear()%10)));break;default:this._clearSelected(),this.sfCalendar.find("table td").removeClass("e-state-hover"),s.not("td.e-hidedate").addClass("e-active").attr("aria-selected",!0),this._addSelected(),this._hoverDate=this._getDateObj(s).getDate()-1,this._dateValue=new Date(s.attr("data-date")),this._clickedDate=new Date(s.attr("data-date")),this._animating=!1}"month"!=d&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:r,navigateFrom:d}),this._layoutChanged()},_startLevel:function(t){var i,s,a=e("table",this.sfCalendar),r=e(".e-datepicker-headertext",this.sfCalendar),n=this._dateValue;switch(t){case"decade":a.removeClass("e-dp-viewallyears e-dp-viewmonths e-dp-viewdays").addClass("e-dp-viewyears"),e("tbody,tr.e-week-header",a).not(".e-datepicker-years").hide(),e(e(a).find(".e-datepicker-years")).show(),n=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:n;var o=parseInt(n.getFullYear())-(parseInt(n.getFullYear())%10+1);i=o+1,s=o+10,r.text(i+" - "+s),this._checkArrows(i,s),this._hoverYear=this._setFocusByName("year",n.getFullYear());break;case"century":this._calendarDate<this._dateValue||this._renderCalendar(this,n),a.removeClass("e-dp-viewyears e-dp-viewdays e-dp-viewmonths").addClass("e-dp-viewallyears"),e("tbody,tr.e-week-header",a).not(".e-datepicker-allyears").hide(),e(e(a).find(".e-datepicker-allyears")).show(),i=parseFloat(e("td.e-allyear-first",a.get(0)).text().split("-")[1])+1,s=parseFloat(e("td.e-allyear-last",a.get(0)).prev().text().split("-")[1]);var l=i+" - "+s;r.text(l),this._checkArrows(i,s);var o=parseInt(n.getFullYear())-(parseInt(n.getFullYear())%10+1);this._hoverAllYear=this._setFocusByName("allyear",o+1+" - "+(o+10));break;case"year":a.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewdays").addClass("e-dp-viewmonths"),e("tbody,tr.e-week-header",a).hide(),e(e(a).find(".e-datepicker-months")).show(),i=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate.getFullYear():n.getFullYear(),r.text(i),this._checkArrows(i,i),this._hoverMonth=n.getMonth(),this._addFocus("month",this._hoverMonth);break;case"month":a.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewmonths").addClass("e-dp-viewdays ")}},_depthLevel:function(t){var i=this.sfCalendar;switch(t){case"year":e(i.find(".e-current-year,.e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),this._on(e(".e-current-month",this.sfCalendar),"click",e.proxy(this._onDepthSelectHandler,this));break;case"decade":e(i.find(".e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),e(".e-current-year",this.sfCalendar).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"century":e(i.find(".e-current-allyear")).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"month":this._on(i.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(i.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))}},_onDepthSelectHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;e(t.target).hasClass("e-current-month")?this._dateValue=new Date(this._dateValue.setMonth(parseInt(t.target.attributes["data-index"].value))):e(t.target).hasClass("e-current-year")?this._dateValue=new Date(this._dateValue.setFullYear(parseInt(t.target.innerHTML))):e(t.target).hasClass("e-current-allyear")&&(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(t.target.innerHTML)))),this._onSetCancelDateHandler(t)},_datepickerMonths:function(t,i,s){for(var a=function(e){return document.createElement(e)},r=0,n=0;n<3;n++){for(var o=e(a("tr")),l=0;l<4;l++){var d=e(a("td")).addClass("e-current-month e-state-default").attr({"data-index":r}).attr(this._isIE8?{unselectable:"on"}:{}).html(this.Date.abbrMonthNames[r++]);s.getFullYear()<this.model.minDate.getFullYear()||s.getFullYear()>this.model.maxDate.getFullYear()?(d.addClass("e-hidedate"),d.removeClass("e-current-month")):(s.getFullYear()<=this.model.minDate.getFullYear()&&r<this.model.minDate.getMonth()+1||s.getFullYear()>=this.model.maxDate.getFullYear()&&r>this.model.maxDate.getMonth()+1)&&(d.addClass("e-hidedate"),d.removeClass("e-current-month")),o.append(d)}t.append(o)}i.append(t);var h=s.getFullYear();this._checkArrows(h,h)},_datepickerYears:function(t,i,s){for(var a=function(e){return document.createElement(e)},r=parseInt(s)-(parseInt(s)%10+1),n=[],o=0;o<12;o++)n.push(r+o);for(var l=0,d=0;d<3;d++){for(var h=e(a("tr")),o=0;o<4;o++){var c=e(a("td"));c.attr(this._isIE8?{unselectable:"on"}:{}),0==l?c.addClass("e-year-first e-current-year "):11==l?c.addClass("e-year-last e-current-year "):c.addClass("e-current-year e-state-default"),(n[l]<this.model.minDate.getFullYear()||n[l]>this.model.maxDate.getFullYear())&&(c.addClass("e-hidedate"),c.removeClass("e-current-year")),c.html(n[l++]),h.append(c)}t.append(h)}i.append(t),this._checkArrows(n[0],n[n.length])},_datepickerAllYears:function(t,i,s){for(var a=parseInt(s)-(parseInt(s)%100+10),r=[],n=this._isIE8||this._isIE9?"":"\n",o=0;o<12;o++)r.push(parseInt(a)+" -"+n+parseInt(a+9)),a+=10;for(var l=0,d=0;d<3;d++){for(var h=e(document.createElement("tr")),o=0;o<4;o++){var c=e(document.createElement("td"));c.attr(this._isIE8?{unselectable:"on"}:{}),0==l?c.addClass("e-allyear-first e-current-allyear "):11==l?c.addClass("e-allyear-last e-current-allyear "):c.addClass("e-current-allyear e-state-default"),(parseInt(r[l].split("-\n")[1])<this.model.minDate.getFullYear()||parseInt(r[l].split("-\n")[0])>this.model.maxDate.getFullYear())&&(c.addClass("e-hidedate"),c.removeClass("e-current-allyear")),c.html(r[l++]),h.append(c)}t.append(h)}i.append(t)},_renderHeader:function(i){var s=e(document.createElement("thead")),a=t.preferredCulture(this.model.locale).calendars.standard.days;if("none"!=i.model.dayHeaderFormat){var r=t.buildTag("tr.e-week-header").attr({role:"row"}).attr(this._isIE8?{unselectable:"on"}:{});if(1==this.model.weekNumber){var n,o=t.preferredCulture(this.model.locale).calendars.standard.week,l=o.name;n="short"==i.model.dayHeaderFormat?o.nameAbbr:"long"==i.model.dayHeaderFormat?week:o.nameShort;var d=t.buildTag("th","",{},{scope:"col",abbr:l,"data-date":l,title:this._formatter(l,"dddd")}).attr(this._isIE8?{unselectable:"on"}:{}).html(n);r.append(d)}for(var h=this.Date.firstDayOfWeek;h<this.Date.firstDayOfWeek+7;h++){var n,c=h%7,l=a.names[c];n="short"==i.model.dayHeaderFormat?a.namesAbbr[c]:"long"==i.model.dayHeaderFormat?l:a.namesShort[c];var u=t.buildTag("th","",{},{scope:"col",abbr:l,"data-date":l,title:this._formatter(l,"dddd"),class:0==c||6==c?"e-week-end":"e-week-day"}).attr(this._isIE8?{unselectable:"on"}:{}).html(n);r.append(u)}}return s.append(r)},_renderCalendar:function(i,s){var a,r=this;i=e.extend({},t.DatePicker.prototype.defaults,i),this.Date.firstDayOfWeek=this.model.startDay,a=s||(this._calendarDate?this._calendarDate:r._zeroTime(new Date));var n=e("table",this.sfCalendar);n.empty(),n.append(this._renderHeader(i));var o=t.buildTag("tbody.e-datepicker-allyears","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});this._datepickerAllYears(o,n,a.getFullYear()),o=t.buildTag("tbody.e-datepicker-years","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerYears(o,n,a.getFullYear());var l=void 0==i.model.month?a.getMonth():i.model.month,d=i.model.year||a.getFullYear(),h=new Date(d,l,1,0,0,0),c=this.Date.firstDayOfWeek-h.getDay()+1;c>1&&(c-=7);var u=Math.ceil((-1*c+1+this._getDaysInMonth(h))/7);this._addDays(h,c-1);var p=r._zeroTime(new Date),m=this._calendarDate;o=t.buildTag("tbody.e-datepicker-months","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerMonths(o,n,a),o=t.buildTag("tbody.e-datepicker-days","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});for(var g=0,f=!0,_=!0;g++<u;){var v=jQuery(document.createElement("tr")).attr({role:"row"});if(1==this.model.weekNumber){var b=this._weekDate(h);b=e(document.createElement("td")).attr({}).addClass("e-weeknumber").html(b),v.append(b)}for(var x=0;x<7;x++){var y=h.getMonth()==l,w=this._isSpecialDates(h),C=this._checkDisableRange(h),S=this._getIndex,T=e(document.createElement("td")).html(w?"<span></span>"+h.getDate():h.getDate()+"").attr({"data-date":h.toDateString(),title:this.model.showTooltip?w&&this.model.specialDates[S][this._mapField._tooltip]?this.model.specialDates[S][this._mapField._tooltip]:this._formatter(h,this.model.tooltipFormat):"","aria-selected":!1,role:"gridcell",id:this._formatter(h,"yyyyddMM")}).attr(this._isIE8?{unselectable:"on"}:{}).addClass((y?"current-month e-state-default ":"other-month e-state-default ")+(this._isWeekend(h)?this._ejHLWeekEnd?"e-dp-weekend e-week-end ":this.model.highlightWeekend?"e-week-end ":"":"e-week-day ")+(y&&h.getTime()==p.getTime()?"today ":""));T.find("span:first-of-type").addClass(w?this.model.specialDates[S][this._mapField._icon]?"e-special-date-icon "+this.model.specialDates[S][this._mapField._icon]+" ":"e-special-day":""),T.addClass(w&&this.model.specialDates[S][this._mapField._custom]?this.model.specialDates[S][this._mapField._custom]:""),C&&this._disableDates({date:h,element:T}),m.getTime()==h.getTime()&&y&&(T.hasClass("e-hidedate")||(this.model.value?(T.addClass("e-active").attr({"aria-selected":!0}),"week"==this.model.highlightSection&&v.addClass("e-selected-week"),"month"==this.model.highlightSection&&o.addClass("e-selected-month"),"workdays"==this.model.highlightSection&&v.addClass("e-work-week")):null!=this.model.value&&T.addClass("e-state-hover").attr({"aria-selected":!1})),this._hoverDate||(T.hasClass("e-hidedate")||T.addClass("e-state-hover"),this._hoverDate=h.getDate()-1));var R=!0;(h<this.model.minDate||h>this.model.maxDate)&&(T.addClass("e-hidedate"),T.removeClass("current-month"),this.model.showOtherMonths&&T.removeClass("other-month"),R=_=!1),y&&(R&&f&&(this._tempMinDate=h,f=!1,_=!0),_&&(this._tempMaxDate=h)),this._trigger("beforeDateCreate",{date:h,value:this._formatter(h,this.model.dateFormat),element:T}),v.append(T),h=new Date(h.getFullYear(),h.getMonth(),h.getDate()+1,0,0,0)}o.append(v)}n.append(o),this._DRPdisableFade?(e(o).css("display","block"),e(o).css({display:"table-row-group","vertical-align":"middle","border-color":"inherit"})):this._isIE8||this._isIE7?e(o).css("display","table-row-group"):e(o).fadeIn("fast"),this.model.startLevel===this.model.depthLevel?this._depthLevel(this.model.depthLevel):"month"!=this.model.depthLevel&&""!=this.model.depthLevel?"century"==this.model.startLevel?this._depthLevel(this.model.depthLevel):"decade"==this.model.startLevel&&"century"!=this.model.depthLevel?this._depthLevel(this.model.depthLevel):"year"==this.model.startLevel&&"decade"!=this.model.depthLevel&&"century"!=this.model.depthLevel?this._depthLevel(this.model.depthLevel):(this._on(n.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(n.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))):(this._on(n.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(n.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))),this._otherMonthsVisibility(),this._checkDateArrows()},_checkDisableRange:function(e){return!t.isNullOrUndefined(this._disableCollection[e.getFullYear()])&&-1!==jQuery.inArray(e.getMonth(),this._disableCollection[e.getFullYear()])},_initDisableObj:function(e){this._disableCollection={};for(var i=0;i<this.model.blackoutDates.length;i++){var s=this._checkInstanceType(this.model.blackoutDates[i]);if(s){var a=s.getFullYear(),r=s.getMonth();t.isNullOrUndefined(this._disableCollection[a])&&(this._disableCollection[a]=[]),-1==jQuery.inArray(r,this._disableCollection[a])&&this._disableCollection[a].push(r)}}},_disableDates:function(e){for(var t=0;t<this.model.blackoutDates.length;t++){var i=this._checkInstanceType(this.model.blackoutDates[t]);i&&+e.date==+i&&e.element.addClass("e-hidedate")}},_keyboardNavigation:function(e){if(this._keyboardInteraction=!0,this._animating)return!1;if(!this._isOpen||37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode)if(this.model.displayInline||27!=e.keyCode&&9!=e.keyCode){if(e.altKey&&40==e.keyCode)return this.show(),!1}else this.hide();else{if(e.preventDefault&&e.preventDefault(),e.altKey)return 13==e.keyCode?(this._setCurrDate(e),!1):void 0;var t={row:null,col:null};t.col=this.sfCalendar.find("tbody tr td.e-state-hover").index(),t.row=this.sfCalendar.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this.sfCalendar.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this.sfCalendar.find("tbody tr td.e-active").parent().index()+1;var i,s=this.sfCalendar.find("table")[0].className,a=3,r=4;switch(s){case"e-dp-viewallyears":i=this._changeRowCol(t,e.keyCode,a,r,"yearall",e.ctrlKey),e.ctrlKey||(this._hoverAllYear=this.sfCalendar.find("tbody.e-datepicker-allyears tr td").index(i));break;case"e-dp-viewyears":i=this._changeRowCol(t,e.keyCode,a,r,"year",e.ctrlKey),e.ctrlKey||(this._hoverYear=this.sfCalendar.find("tbody.e-datepicker-years tr td").index(i));break;case"e-dp-viewmonths":i=this._changeRowCol(t,e.keyCode,a,r,"month",e.ctrlKey),e.ctrlKey||(this._hoverMonth=this.sfCalendar.find("tbody.e-datepicker-months tr td").index(i));break;case"e-dp-viewdays":a=this.sfCalendar.find("tbody.e-datepicker-days tr").length,r=7,i=this._changeRowCol(t,e.keyCode,a,r,"day",e.ctrlKey),e.ctrlKey||(this._hoverDate=this._getDateObj(i).getDate()-1)}e.ctrlKey||(this.sfCalendar.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"),this._setAriaAttributes(i))}},_setAriaAttributes:function(t){this._popupOpen&&(this.sfCalendar.find("[aria-selected=true]").attr("aria-selected",!1),this.sfCalendar.find("[aria-label]").removeAttr("aria-label"),e(this.element).attr("aria-activedescendant",t.attr("id")),e(t).attr("aria-selected",!0),e(t).attr("aria-label","The current focused date is "+this._formatter(this._getDateObj(t),"dddd, dd MMMM, yyyy")))},_changeRowCol:function(t,i,s,a,r,n){var o,l={parent:null,child:null};switch(r){case"day":o="tbody.e-datepicker-days tr td.current-month",l.parent=".e-datepicker-days",l.child=".current-month";break;case"month":o="tbody.e-datepicker-months tr td.e-current-month",l.parent=".e-datepicker-months",l.child=".e-current-month";break;case"year":o="tbody.e-datepicker-years tr td.e-current-year",l.parent=".e-datepicker-years",l.child=".e-current-year";break;case"yearall":o="tbody.e-datepicker-allyears tr td.e-current-allyear",l.parent=".e-datepicker-allyears",l.child=".e-current-allyear"}if(t.row<=0&&t.col<=0)return this._removeCurrentMonthFromHideDate(),this.sfCalendar.find(o+":first");var d;switch(i){case 36:return this.sfCalendar.find(o+":first");case 35:return this.sfCalendar.find(o+":last");case 38:if(n&&this.model.allowDrillDown)this._forwardNavHandler();else{if(!(t.row>1))return this._processNextPrevDate(!0),d=this.sfCalendar.find(o+":nth-child("+t.col+"):last");t.row-=1}if(d=this._getCell(t,l),d.length<=1){if(null!==(d=this._findVisible(t,l,"up")))return d;this._processNextPrevDate(!0),d=this.sfCalendar.find(o+":nth-child("+t.col+"):last")}return d;case 37:if(n)return this._processNextPrevDate(!0),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else{if(!(t.row>1))return this._processNextPrevDate(!0),d=this.sfCalendar.find(o+":last");t={row:t.row-1,col:a}}if(d=this._getCell(t,l),d.length<=1){if(null!==(d=this._findVisible(t,l,"left")))return d;this._processNextPrevDate(!0),d=this.sfCalendar.find(o+":last")}return d;case 39:if(n)return this._processNextPrevDate(!1),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col<a)t.col+=1;else{if(!(t.row<s))return this._processNextPrevDate(!1),d=this.sfCalendar.find(o+":first");t={row:t.row+1,col:1}}if(d=this._getCell(t,l),d.length<=1){if(null!==(d=this._findVisible(t,l,"right")))return d;this._processNextPrevDate(!1),d=this.sfCalendar.find(o+":first")}return d;case 40:if(!n){if(!(t.row<s))return this._processNextPrevDate(!1),d=this.sfCalendar.find(o+":nth-child("+t.col+"):first");if(t.row+=1,d=this._getCell(t,l),d.length<=1){if(null!==(d=this._findVisible(t,l,"down")))return d;this._processNextPrevDate(!1),d=this.sfCalendar.find(o+":nth-child("+t.col+"):first")}return d}case 13:var h,c,u=e("table",this.sfCalendar).get(0).className;h=this._getCell(t,l),c=e(h)[0],"e-dp-viewmonths"==u&&"year"==this.model.startLevel&&"year"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setMonth(parseInt(c.attributes["data-index"].value))),this._onSetCancelDateHandler({type:null,target:h})):"e-dp-viewyears"==u&&"decade"==this.model.startLevel&&"decade"==this.model.depthLevel||"e-dp-viewallyears"==u&&"century"==this.model.startLevel&&"century"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(c.innerHTML))),this._onSetCancelDateHandler({type:null,target:h})):"e-dp-viewdays"==u?(this._backwardNavHandler(h),this._onSetCancelDateHandler({type:null,target:h})):this._backwardNavHandler(h)}return this._getCell(t,l)},_findVisible:function(e,t,i){for(var s=e.col,a=e.row,r=t.child.slice(1,t.child.length),n=0;n>=0;n++){var o=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+a+") td:nth-child("+s+")");if(o.length<=0)return null;if(o.hasClass("e-hidedate")||!o.is(":visible")){if("right"==i||"left"==i?"right"==i?s++:s--:"down"==i?a++:a--,a<=0||a>this.sfCalendar.find("tbody"+t.parent+" tr").length)return null;if(s>this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+a+") td").length&&(a++,s=1),s<=0&&(a--,s=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+a+") td").length),a<=0||a>this.sfCalendar.find("tbody"+t.parent+" tr").length)return null}else{if(o.hasClass("other-month"))return null;if(o.hasClass(r))return e.col=s,e.row=a,o}}},_getCell:function(e,t){return this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+e.row+") td"+t.child+":nth-child("+e.col+")")},_getDateObj:function(e){return new Date(e.attr("data-date"))},_touchCalendar:function(e){var t=this.sfCalendar.find("table")[0].className;switch(e.type){case"pinchin":"e-dp-viewdays"!=t&&this._keyboardNavigation({keyCode:13});break;case"pinchout":"e-dp-viewallyears"!=t&&this.model.allowDrillDown&&this._forwardNavHandler();break;case"swipeleft":this._processNextPrevDate(!1);break;case"swiperight":this._processNextPrevDate(!0)}},show:function(i){if(t.isNullOrUndefined(this.sfCalendar)&&this._renderPopup(),this._isOpen)return!1;var s=this;this._popupOpen=!0,e(this.element).attr("aria-expanded",!0);var a=null!=this._preValue?new Date(this._preValue.toString()):this._preValue;if(this.model.enabled){if(this.model.displayInline||this._setDatePickerPosition(),this._trigger("beforeOpen",{element:this.sfCalendar,events:i}))return!1;this.sfCalendar.attr({"aria-hidden":"false"}),s._isOpen=!0,this.sfCalendar.slideDown(this.model.enableAnimation?this.animation.open.duration:0,function(){s.model&&!s.model.displayInline&&e(document).on("mousedown",e.proxy(s._onDocumentClick,s))}),this._isIE8?this.element.val()&&this._compareDate(new Date(this.element.val()),a)&&this._updateInputVal():this._updateInputVal(),this._refreshLevel(a),this._trigger("open",{prevDate:a,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).on("resize",e.proxy(this._OnWindowResize,this)),this.model.displayInline||(this._on(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._on(t.getScrollableParents(this.wrapper),"touchmove",this.hide)),this._isInputBox&&this.wrapper.addClass("e-active"),null!=this.model.value?e(this.element).attr("aria-activedescendant",e(this.sfCalendar.find(".e-active")).attr("id")):e(this.element).attr("aria-activedescendant",e(this.sfCalendar.find(".today")).attr("id"))}},hide:function(i){if(!this._isOpen||this._getInternalEvents)return!1;if(this._trigger("beforeClose",{element:this.sfCalendar,events:i}))return!1;var s=this;this._popupOpen=!1,e(this.element).attr("aria-expanded",!1),this.sfCalendar.attr({"aria-hidden":"true"}),this._popClose&&void 0!=i&&"click"!=i.type||(this.sfCalendar.slideUp(this.model.enableAnimation?this.animation.close.duration:0,function(){s._isOpen=!1,e(document).off("mousedown",e.proxy(s._onDocumentClick,s)),s._setWaterMark()}),""!=this.element.val()&&this._validateInputVal(),this._trigger("close",{prevDate:this._prevDate,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._off(t.getScrollableParents(this.wrapper),"touchmove",this.hide),this._isInputBox&&this.wrapper.removeClass("e-active"),this.model.value?e(this.element).attr("aria-activedescendant",e(this.sfCalendar.find(".e-active")).attr("id")):e(this.element).removeAttr("aria-activedescendant"))},enable:function(){this.model.enabled=!0,this.wrapper&&this.wrapper.removeClass("e-disable"),this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.prop("disabled",!1),this.dateIcon&&this.dateIcon.removeClass("e-disable").attr({"aria-disabled":!1}),this._isIE8&&this.dateIcon&&this.dateIcon.children().removeClass("e-disable"),this.element.prop("disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.sfCalendar&&this.sfCalendar.removeClass("e-disable").attr({"aria-disabled":!1})},disable:function(){this.model.enabled=!1,this.wrapper&&this.wrapper.addClass("e-disable"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.element.attr("disabled","disabled"),this.dateIcon&&this.dateIcon.addClass("e-disable").attr({"aria-disabled":!0}),this._isIE8&&this.dateIcon&&this.dateIcon.children().addClass("e-disable"),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.sfCalendar&&this.sfCalendar.addClass("e-disable").attr({"aria-disabled":!0}),this._isOpen&&(this.element.is(":input")&&this.element.blur(),this.model.displayInline||this.hide())},getValue:function(){return this._formatter(this.model.value,this.model.dateFormat)},_wireCalendarEvents:function(){this._allowQuickPick(this.model.allowDrillDown),this._on(e(".e-next",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this._on(e(".e-prev",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this.model.displayInline||(this.sfCalendar.on("mouseenter touchstart",e.proxy(function(){this._popClose=!0},this)),this.sfCalendar.on("mouseleave touchend",e.proxy(function(){this._popClose=!1},this))),this.model.showFooter&&this._on(e(".e-footer",this.sfCalendar),"click",this._setCurrDate),this.sfCalendar&&this._on(this.sfCalendar,"pinchin pinchout swipeleft swiperight",e.proxy(this._touchCalendar,this))},_wireEvents:function(){this.element.is(":input")&&this.model.allowEdit&&(this._on(this.element,"blur",this._onFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keydown",this._onKeyDown)),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",e.proxy(this._showDatePopUp,this)))},_bindDateButton:function(){this._on(this.dateIcon,"mousedown",this._showDatePopUp),this.model.allowEdit&&this.element.off("mousedown",e.proxy(this._showDatePopUp,this))},_bindInputEvent:function(){this._off(this.dateIcon,"mousedown",this._showDatePopUp)},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return e.inArray("dddd",i.groups)>-1||e.inArray("ddd",i.groups)>-1},_onFocusOut:function(i){this._isFocused=!1;var s=null!=this._preValue?new Date(this._preValue.toString()):this._preValue;if(this.model.enableStrictMode&&this.element.val()&&!isNaN(+new Date(this.element.val()))){this._formatArray=this.model.dateFormat.split(this._getSeparator()),this._valArray=this.element.val().split(this._getSeparator());for(var a=0;a<this._formatArray.length;a++)this._formatArray[a].startsWith("y")&&this._valArray.length>1&&(4==this._formatArray[a].length&&2==this._valArray[a].length||2==this._formatArray[a].length&&2==this._valArray[a].length)&&(this._valArray[a]=(parseInt(this._valArray[a])+2e3).toString(),this.element.val(this._valArray.join(this._getSeparator())))}this._validateOnFocusOut(this._validateValue(),i),this.wrapper.removeClass("e-focus"),t.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid"),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),this._isOpen&&!this.model.displayInline||this._refreshLevel(s),""==this.element.val()||this._isOpen&&!this.model.displayInline||this._validateInputVal(),this.element.off("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this._off(this.element,"click",this._elementClick);var r=this.element.val(),n={
prevDate:this._prevDate,value:r};this._specificFormat()?this._prevDate!=r&&this._setDateValue(r,!0):this._setDateValue(r),this.model.value||this._clearSelected(),this._trigger("focusOut",n),this._checkErrorClass()},_onFocusIn:function(t){this._isSupport&&(t.preventDefault(),this._isFocused=!0),this.wrapper.removeClass("e-error"),this.isValidState=!0,this.wrapper.addClass("e-focus"),this.wrapper.addClass("e-valid"),this.model.readOnly||(this._isSupport||this._hiddenInput.css("display","none"),this.element.on("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this.model.readOnly||this.show(t),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}))},_elementClick:function(e){this._popupOpen||this.show(e)},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_refreshPopup:function(){this._refreshDatepicker(),this._startLevel(this.model.startLevel)},_weekDate:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},_refreshLevel:function(e){if(this.model.startLevel==this.model.depthLevel&&"month"!=this.model.startLevel){var t=this._stringToObject(this.element.val());t=this._validateYearValue(t),t&&(this._compareDate(e,t)||this._refreshPopup())}},_validateOnFocusOut:function(e,i){var s=null!=this._preValue?this._calendarDate:this._preValue,a=this._formatter(s,this.model.dateFormat);this._prevDate=this._formatter(this._preValue,this.model.dateFormat);var r=a,n={prevDate:this._prevDate,value:r,isInteraction:!!i};if(this._specificFormat()&&e>this.model.minDate&&e<this.model.maxDate)if(null==e)this.model.value=s;else{this.model.value=e;this._formatter(e,this.model.dateFormat,this.model.locale)}else{this._formatter(this._parseDate(this._formatter(new Date,"MM/dd/yyyy")),this.model.dateFormat)}var o=!1,l=!1;null==e||this.model.enableStrictMode?null!=e||this.model.enableStrictMode?e?(e<this.model.minDate||e>this.model.maxDate?(this.isValidState=!1,l=!0,this._calendarDate=e<this.model.minDate?this.model.minDate:this.model.maxDate):this.isValidState=!0,this._triggerChangeEvent(i),l&&this._getInternalEvents&&this._trigger("outOfRange")):(this.isValidState=!1,this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)):(null==this._preTxtValue||""==this.element.val()?(this.element.val(""),this._isSupport||this._hiddenInput.css("display","block")):this.element.val(a),this._triggerChangeEvent(i),null!=this.model.value&&this._trigger("change",n)):(t.isNullOrUndefined(this.model.value)&&(this.model.value=this._parseDate(this.element.val())),this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode||(e?(e<this.model.minDate||e>this.model.maxDate)&&(o=!0,this._calendarDate=e=e<this.model.minDate?this.model.minDate:this.model.maxDate):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),o&&this.element.val(this._formatter(e,this.model.dateFormat)),this._compareDate(this._preValue,this._parseDate(this.element.val(),!0))||this._triggerChangeEvent(i))},_onKeyDown:function(e){if(13===e.keyCode){var t=null!=this._preValue?new Date(this._preValue.toString()):this._preValue;this._validateOnFocusOut(this._validateValue(),e),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),this._isOpen&&!this.model.displayInline||this._refreshLevel(t),""==this.element.val()||this._isOpen&&!this.model.displayInline||this._validateInputVal(),this._checkErrorClass()}},_showhidePopup:function(e){if(!this.model.enabled)return!1;this._isOpen?(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this._cancelValue||this.hide(e)):(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this.show(e))},_compareDate:function(e,t){return+e==+t},_validateDate:function(e){var t=!0;if(null!=e){for(var i=0;i<this.model.blackoutDates.length;i++){var s=this._checkInstanceType(this.model.blackoutDates[i]);s&&+e==+s&&(t=!1)}(e<this.model.minDate||e>this.model.maxDate)&&this.model.enableStrictMode&&(t=!1,this.isValidState=!1)}return t},_triggerChangeEvent:function(e){var t,i=""==this.element.val()?null:this.element.val();this._prevDate=this._formatter(this._preValue,this.model.dateFormat);var s={prevDate:this._prevDate,value:i,isInteraction:!!e};t=this._specificFormat()&&void 0!=e&&"keydown"==e.type&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=this.element.val()?this._parseDate(this.element.val(),!0):this._specificFormat()&&void 0!=e&&"blur"==e.type?this.model.value:this._parseDate(i),t=this._validateYearValue(t),this._validateDate(t)||(t=null),this._compareDate(this._preValue,t)?""==this.element.val()&&null==this._prevDate||this.element.val()==this._prevDate||(s.value=this.element.val(),this._trigger("_change",s)):(this._preValue=this.model.value=t,s.value=this._formatter(this.model.value,this.model.dateFormat),this.model.value&&(this._clickedDate=this._calendarDate=this.model.value),this.model.displayInline&&!this._isInputBox&&this._hiddenInput.attr("value",i),this.model.value||this.model.enableStrictMode||this._setDateValue(this.model.value),s.value=i,this._trigger("_change",s),s.value=this._formatter(this.model.value,this.model.dateFormat),this._trigger("change",s),this._checkErrorClass())},_triggerSelectEvent:function(t){var i=this.element.val();if(this._parseDate(i)){var s={prevDate:this._prevDate,date:this.model.value,value:i,isSpecialDay:this._isSpecialDates(this.model.value)};this._prevDate!=i&&this._parseDate(s.value)&&this.model.value>=this.model.minDate&&this.model.value<=this.model.maxDate&&(this._cancelValue=this._trigger("select",s)),this._dt_drilldown&&this._trigger("dt_drilldown",s)}this.model.value&&e(this.element).attr("aria-activedescendant",e(this.sfCalendar.find(".e-active")).attr("id"))},_onDocumentClick:function(t){this.model&&(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-datewidget").is(this.wrapper)?(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup))&&t.preventDefault():this.hide(t))},_OnWindowResize:function(e){this.sfCalendar&&this._setDatePickerPosition()},_showDatePopUp:function(e){var t=!1;if(e.button?t=2==e.button:e.which&&(t=3==e.which),!t&&(this._isSupport||this.model.showPopupButton||(e.preventDefault(),this._onFocusIn()),!this.model.readOnly)){if(e.preventDefault(),!this.model.enabled&&this.model.displayInline)return!1;this._showhidePopup(e)}},_layoutChanged:function(e){this._getInternalEvents&&this._trigger("layoutChange")},_setCurrDate:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e&&e.preventDefault();this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._dateValue=this._zeroTime(new Date),this.model.value=this._calendarDate=new Date(this._dateValue.toString()),this._setDateValue(this.model.value),this._triggerSelectEvent(e),this._triggerChangeEvent(e),this._refreshDatepicker(),this._changeDayClass(),this._startLevel(this.model.startLevel),this._onSetCancelDateHandler(e),this._layoutChanged()},_changeDayClass:function(){var e=this.popup.children("table")[0].className;"e-dp-viewdays"!=e&&this.popup.children("table").removeClass(e).addClass("e-dp-viewdays")},_onSetCancelDateHandler:function(t){return!(this.model.readOnly||!this.model.enabled)&&((!t||!e(t.target).hasClass("e-disable")&&!e(t.target).hasClass("e-hidedate"))&&(t&&t.type&&t.preventDefault(),this._specificFormat()?this._prevDate=this.element.val():this.model.value=this._parseDate(this.element.val()),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._setDateValue(this._dateValue),this._triggerSelectEvent(t),this._triggerChangeEvent(t),this._dateValue=null==this.model.value?null:new Date(this.model.value.toString()),this.element.is(":input")&&!this.model.displayInline&&this._showhidePopup(t),t&&e(t.currentTarget).hasClass("other-month")&&this._refreshDatepicker(),void this._cellSelection()))},_closeCalendar:function(e){e&&e!=this.element||this.sfCalendar.empty().remove()},_checkErrorClass:function(){this.wrapper&&(this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error"))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.DatePicker.Locale=t.DatePicker.Locale||{},t.DatePicker.Locale.default=t.DatePicker.Locale["en-US"]={watermarkText:"Select date",buttonText:"Today"},t.DatePicker.Header={None:"none",Short:"short",Min:"min",Long:"long"},t.DatePicker.HighlightSection={Month:"month",Week:"week",WorkDays:"workdays",None:"none"},t.DatePicker.Level={Month:"month",Year:"year",Decade:"decade",Century:"century"}}(jQuery,Syncfusion),function(e,t,i){t.widget("ejCheckBox","ej.CheckBox",{_rootCSS:"e-checkbox",element:null,model:null,validTags:["input"],_addToPersist:["checked","checkState"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,htmlAttributes:{},checked:!1,enabled:!0,enableTriState:!1,showRoundedCorner:!1,enablePersistence:!1,cssClass:"",text:"",enableRTL:!1,idPrefix:"ej",size:"small",checkState:"uncheck",validationRules:null,validationMessage:null,validationMessages:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",enableTriState:"boolean",size:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",validationMessages:"data",htmlAttributes:"data"},observables:["checked","checkState"],checked:t.util.valueFunction("checked"),checkState:t.util.valueFunction("checkState"),_init:function(e){this._cloneElement=this.element.clone();var i=t.browserInfo();this._isIE8="msie"==i.name&&"8.0"==i.version,this._isIE9="msie"==i.name&&"9.0"==i.version,this._isDevice=this._checkDevice(),this._setValue(),this._renderControl(),this.model.enableRTL&&this._setRTL(),this.model.enabled&&this._wireEvents(),this._setEnabled(this.model.enabled),t.isNullOrUndefined(e)||t.isNullOrUndefined(e.validationMessage)||(this.model.validationMessages=this.model.validationMessage),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._addAttr(this.model.htmlAttributes),(this._isIE9||this._isIE8)&&this.wrapper.addClass("e-tb-cell")},_checkDevice:function(){return t.isDevice()&&t.isTouchDevice()},_setRTL:function(){e(this.maindiv).addClass("e-rtl")},_initValidator:function(){!this.wrapper.closest("form").data("validator")&&this.wrapper.closest("form").validate()},_setValidation:function(){this.wrapper.find("input").rules("add",this.model.validationRules);var i=this.wrapper.closest("form").data("validator");i=i||this.wrapper.closest("form").validate();var s=this.wrapper.find("input").attr("name");i.settings.messages[s]={};for(var a in this.model.validationRules){var r=null;if(!t.isNullOrUndefined(this.model.validationRules[a])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[a])){i.settings.messages[s][a]=e.validator.messages[a];for(var n in this.model.validationMessages)a==n&&(r=this.model.validationMessages[a])}else r=this.model.validationRules.messages[a];i.settings.messages[s][a]=null!=r?r:e.validator.messages[a]}}},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"name"==t?i.element.attr(t,e):"required"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._setEnabled(!1):"checked"==t&&"checked"==e?i.checked()instanceof Array?i._updateCheckedItem():i._checked(!0):i.wrapper.attr(t,e)})},_triggerBeforeChange:function(){var e={isChecked:this._isChecked,isInteraction:!1};if(1==this._trigger("beforeChange",e))return!1},_triggerChange:function(){var e={isChecked:this._isChecked,checkState:this.checkState(),isInteraction:!1};this._trigger("change",e)},_setModel:function(i){for(var s in i)switch(s){case"checked":if(e(this.maindiv).removeClass("e-material-animate"),this.model.beforeChange&&this._triggerBeforeChange(),this.checked()instanceof Array){var a=t.util.getVal(i[s]),r=a[a.length-1];this.model.value==r&&(this._isChecked=!0)}else this._isChecked=t.util.getVal(i[s]),this.checked(this._isChecked);this._isChecked?this._checked():this._unChecked(),this.model.change&&this._triggerChange();break;case"enableTriState":i[s]&&(this.model.enableTriState=i[s],this._indeterminateState=i[s]);break;case"checkState":this.model.enableTriState&&(this.model.beforeChange&&this._triggerBeforeChange(),this._isChecked=t.util.getVal(i[s]),this.checkState(this._isChecked),this._changeState(this._isChecked),this._setCheckBoxState(),this.checked(this._isChecked),"indeterminate"==this.model.checkState&&this._setIndeterminate(this._indeterminateState),this.checked()instanceof Array?this._updateCheckedItem():"check"==i[s]?this._hiddenInput.removeAttribute("name"):this._hiddenInput.setAttribute("name",this.model.name),this.model.change&&(this.checked()instanceof Array||(this._isChecked="uncheck"!=this.checkState()),this._triggerChange()));break;case"cssClass":this._changeSkin(i[s]);break;case"enableRTL":i[s]?this._setRTL():e(this.maindiv).removeClass("e-rtl");break;case"text":this._setText(i[s]);break;case"validationRules":null!=this.model.validationRules&&(this.wrapper.find("input").rules("remove"),this.model.validationMessages=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":case"validationMessages":this.model.validationMessages=i[s],null!=this.model.validationRules&&null!=this.model.validationMessages&&(this._initValidator(),this._setValidation());break;case"id":this._setIdAttr(i[s]);break;case"name":this.element.attr("name",i[s]),this._isChecked&&!this.spanImg.hasClass("e-chk-indeter")||this._hiddenInput.setAttribute("name",i[s]),this.model.name=i[s];break;case"value":this.element.attr("value",i[s]);break;case"size":this._setSize(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enabled":this._setEnabled(i[s]);break;case"htmlAttributes":this._addAttr(i[s])}},_destroy:function(){this.element.removeClass("e-checkbox e-input"),!this._cloneElement.attr("name")&&this.element.attr("name")&&this.element.removeAttr("name"),!this._cloneElement.attr("value")&&this.element.attr("value")&&this.element.removeAttr("value"),this.element.insertBefore(this.wrapper),this.wrapper.remove()},_changeSkin:function(t){this.model.cssClass!=t&&(this.wrapper.removeClass(this.model.cssClass).addClass(t),e("#"+this.model.idPrefix+this.model.id+"_wrapper").removeClass(this.model.cssClass).addClass(t))},_setValue:function(){this._indeterminateState=!1,this._isChecked=!1;var e=this.element[0].getAttribute("id"),i=this.element[0].getAttribute("name"),s=this.element[0].getAttribute("value");!t.isNullOrUndefined(e)&&(this.model.id=e),!t.isNullOrUndefined(i)&&(this.model.name=i),t.isNullOrUndefined(s)||""==s||(this.model.value=s),this.checked()||t.isNullOrUndefined(this.element.attr("checked"))||(this._isChecked=!0),t.isNullOrUndefined(this.model.name)&&(this.model.name=this.model.id),this.model.enabled=this.model.enabled&&!this.element.attr("disabled")},_setSize:function(i){i==t.CheckboxSize.Medium?(e(this.innerdiv).removeClass("e-chkbox-small").addClass("e-chkbox-medium"),e(this.maindiv).removeClass("e-check-small").addClass("e-check-medium")):(e(this.innerdiv).removeClass("e-chkbox-medium").addClass("e-chkbox-small"),e(this.maindiv).removeClass("e-check-medium").addClass("e-check-small"))},_setRoundedCorner:function(e){e?this.span.addClass("e-corner"):this.span.removeClass("e-corner")},_setEnabled:function(e){e?this.enable():this.disable()},_setCheckBoxState:function(){this.model.enableTriState?"indeterminate"==this.checkState()?this._indeterminateState=!0:"check"==this.checkState()?this._isChecked=!0:"uncheck"==this.checkState()&&(this._isChecked=!1):"indeterminate"==this.checkState()&&this.checkState("uncheck")},_createElement:function(e,t){var i=document.createElement(e);return this._setAttributes(i,t),i},_setAttributes:function(e,t){for(var i in t)e.setAttribute(i,t[i])},_renderControl:function(){this._setCheckBoxState(),this.maindiv=this._createElement("span",{class:"e-chkbox-wrap e-widget "+this.model.cssClass,role:"checkbox",tabindex:0}),this._isValid(this.model.id)&&(this.maindiv.setAttribute("id",this.model.idPrefix+this.model.id),this.element[0].setAttribute("id",this.model.id)),this.innerdiv=document.createElement("div"),this._setSize(this.model.size),this.span=document.createElement("span"),this.span=e(this.span),this.spanImg=this._createElement("span",{class:"e-chk-image e-icon",role:"presentation"}),this.spanImg=e(this.spanImg),this.element.addClass("e-input"),this.model.name=t.isNullOrUndefined(this.model.name)?this.model.id:this.model.name,this.model.value=!!t.isNullOrUndefined(this.model.value)||this.model.value,this._setAttributes(this.element[0],{name:this.model.name,value:this.model.value});var i=e("#"+this._id+"_hidden");this._hiddenInput=i.length?i[0]:this._createElement("input",{type:"checkbox",value:!1,style:"display:none"}),"hidden"==this.element.attr("data-type")&&this._hiddenInput.setAttribute("type","hidden"),this._isValid(this.model.name)&&this._hiddenInput.setAttribute("id",this.model.name+"_hidden"),this._setRoundedCorner(this.model.showRoundedCorner),this.checked()&&this._setCheckedItem(this.checked()),this._isChecked?(this.spanImg.addClass("e-checkmark"),this.span.addClass("e-chk-act"),this.maindiv.setAttribute("aria-checked",!0),this.element.attr("checked","checked")):(this.span.addClass("e-chk-inact"),this.maindiv.setAttribute("aria-checked",!1),this._hiddenInput.setAttribute("name",this.model.name)),this.checked()instanceof Array||this.checked(this._isChecked),this.span[0].appendChild(this.spanImg[0]),this.innerdiv.appendChild(this.span[0]),this.element[0].parentNode&&this.element[0].parentNode.insertBefore(this.maindiv,this.element[0]),this.maindiv.appendChild(this.element[0]),this.maindiv.appendChild(this._hiddenInput),this.maindiv.appendChild(this.innerdiv),this.wrapper=e(this.maindiv),this._setTextWrapper(this.model.text),this.chkbx=this.element,1==this.model.enableTriState&&1==this._indeterminateState&&this._setIndeterminate(this._indeterminateState),this.checked()instanceof Array&&this._updateCheckedItem()},_changeState:function(e){"indeterminate"==e?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.checked()instanceof Array||this.checked(null)):"check"==e?(this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.span.removeClass("e-chk-act e-chk-inact e-chk-indeter").addClass("e-chk-act"),this.wrapper[0].setAttribute("aria-checked",!0)):"uncheck"==e&&(this.spanImg.removeClass("e-checkmark e-stop"),this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1))},_setIndeterminate:function(e){e?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.checkState("indeterminate"),this.checked()instanceof Array||this.checked(null),this._hiddenInput.setAttribute("name",this.model.name)):(this.span.removeClass("e-chk-indeter"),this.spanImg.removeClass("e-stop"),this.wrapper.find("input").removeAttr("enableTriState"),this.wrapper.find("input").prop("enableTriState",!1),this.checked()?this._checked():this._unChecked())},_setTextWrapper:function(e){""!=e&&(this.txtSpan=t.buildTag("div.e-text",e),this.wrapper.append(this.txtSpan),this.model.enableRTL&&this._setRTL())},_setText:function(e){""==this.model.text&&""!=e?this._setTextWrapper(e):this.txtSpan.html(e)},_setIdAttr:function(t){e("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper"),this.element[0].setAttribute("id",t)},_isValid:function(e){return!t.isNullOrUndefined(e)&&""!=e},_wireEvents:function(){this._on(this.wrapper,"click",this._checkedHandler),this._isIE8&&this._isValid(this.model.id)&&this._on(e("label[for="+this.model.id+"]"),"click",function(){this.wrapper.click()}),this._on(this.wrapper,"focus",this._focusIn),this._on(this.wrapper,"focusout",this._focusOut)},_unWireEvents:function(){this._off(this.wrapper,this._isDevice&&e.isFunction(e.fn.tap)?"tap":"click"),this._isIE8&&this._isValid(this.model.id)&&this._off(e("label[for="+this.model.id+"]"),"click"),this._off(this.wrapper,"focus"),this._off(this.wrapper,"focusout")},_focusIn:function(t){e(this.wrapper).addClass("e-focus"),e(this.wrapper).on("keydown",e.proxy(this._checkUnCheck,this))},_focusOut:function(t){e(this.wrapper).removeClass("e-focus"),e(this.wrapper).off("keydown",e.proxy(this._checkUnCheck,this))},_checkUnCheck:function(e){32==e.keyCode&&(e.preventDefault(),this._checkedHandler())},_checkedHandler:function(t){var i={isChecked:this._isChecked,isInteraction:!0,event:t};if(1==this._trigger("beforeChange",i))return!1;this.span.hasClass("e-chk-inact")?(this._checked(),this.checked()instanceof Array||this.checked(!0),this.model.enableTriState&&(this._indeterminateState=!0,this.checkState("check"))):this.span.hasClass("e-chk-act")?1==this.model.enableTriState&&"check"==this.model.checkState&&1==this.model.checked?(this._setIndeterminate(!0),this.checked()instanceof Array||(this.checked(!0),this.checkState("indeterminate"))):(this._unChecked(),this.checked()instanceof Array||(this.checked(!1),this.checkState("uncheck"))):this.span.hasClass("e-chk-indeter")&&(this.checked()instanceof Array?this._isChecked=!1:this.checked(!1),this._setIndeterminate(!1),this._indeterminateState=!1),this.checked()instanceof Array?this._updateCheckedItem():this._isChecked=this.checked(),e(this.maindiv).addClass("e-material-animate");var i={isChecked:this._isChecked,checkState:this.checkState(),isInteraction:!0,event:t};return this._trigger("change",i),!0},_checked:function(){this.span.removeClass("e-chk-inact").addClass("e-chk-act"),this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.wrapper[0].setAttribute("aria-checked",!0),this.wrapper.find("input[type=checkbox]").prop("checked",!0),this.checkState("check"),this._hiddenInput.removeAttribute("name")},_unChecked:function(){this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1),this.spanImg.removeClass("e-checkmark e-stop"),this.wrapper.find("input[type=checkbox]").prop("checked",!1),this.checkState("uncheck"),this._hiddenInput.setAttribute("name",this.model.name)},_setCheckedItem:function(e){if("boolean"!=typeof e||e instanceof Array){if(e instanceof Array&&!t.isNullOrUndefined(this.model.value)&&""!=this.model.value)for(var i=0;i<e.length;i++)e[i]==this.model.value&&(this._isChecked=!0)}else this._isChecked=!0},_updateCheckedItem:function(){var i=void 0===this.model.checked.splice?this.model.checked():this.model.checked;t.isNullOrUndefined(this.model.value)||""==this.model.value||this.wrapper.find("span:first").hasClass("e-chk-indeter")||(e.inArray(this.model.value,this.checked())<0&&this.wrapper.find("span:first").hasClass("e-chk-act")?(i.push(this.model.value),this._isChecked=!0,this._hiddenInput.removeAttribute("name")):e.inArray(this.model.value,this.checked())>-1&&this.wrapper.find("span:first").hasClass("e-chk-inact")&&(this._isChecked=!1,i.splice(e.inArray(this.model.value,this.model.checked()),1),this._hiddenInput.setAttribute("name",this.model.name)))},disable:function(){this.wrapper.hasClass("e-disable")||(this.wrapper.addClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!0),this.element[0].setAttribute("disabled","disabled"),this._isIE8&&this.span.addClass("e-disable"),this._unWireEvents(),this.model.enabled=!1)},enable:function(){this.wrapper.hasClass("e-disable")&&(this.wrapper.removeClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!1),this.element.prop("disabled",!1),this._isIE8&&this.span.removeClass("e-disable"),this._wireEvents(),this.model.enabled=!0)},isChecked:function(){if(null!=this._isChecked&&void 0!=this._isChecked)return this._isChecked}}),t.CheckboxSize={Small:"small",Medium:"medium"},t.CheckState={Check:"check",Uncheck:"uncheck",Indeterminate:"indeterminate"}}(jQuery,Syncfusion),function(t,i,s){i.widget("ejPager","ej.Pager",{_rootCSS:"e-pager",validTags:["div"],defaults:{pageSize:12,pageSizeList:null,pageCount:10,currentPage:1,enableExternalMessage:!1,externalMessage:"",pageSizeMessage:"",enableQueryString:!1,locale:"en-US",masterObject:null,pageSizeSelected:null,enableRTL:!1,totalRecordsCount:null,totalPages:null,customText:"",showPageInfo:!0,cssClass:"",enabled:!0,showGoToPage:!1,isResponsive:!1,change:null,click:null,template:""},_init:function(){this._index=-1,this.element.attr("role","navigation"),this.element.attr("tabindex","0"),this.element.attr("aria-label","pager"),this._initPrivateProperties(),this.model.enableQueryString&&this._queryStringValue(),this.renderPager(),this.model.isResponsive&&this._reSizeHandler(),this._wireResizing(),this._wireEvents(),this.refreshPager()},_initPrivateProperties:function(){"string"==typeof this.model.pageSizeList&&(this.model.pageSizeList=JSON.parse(this.model.pageSizeList)),this._pageSize=this.model.pageSize,this._links=[],this._$prev=null,this._$first=null,this._$PP=null,this._$NP=null,this._lastNP=!1,this._lastpageCount=null,this._$last=null,this._$next=null,this._prevPageNo=1,this.localizedLabels=this._getLocalizedLabels(),this._intervalWid=0,this._msgWidth=0,this._gotoWid=0,this._temp=this.model.template},_wireEvents:function(){var e=this;this._on(this.element,"click",this._pagerClickHandler),t(document).on("click",t.proxy(e._hidedrop,e)),this._pagerContainer&&(this._touchPrev=!1,this._pagerContainer.on("touchstart",this._touchHandler),this._pagerContainer.on("keydown",this._pagerClickHandler.bind(this)),this._pagerContainer.on("mouseover",this._mouseOverHandler),this._pagerContainer.on("mouseout",this._mouseOutHandler))},_touchHandler:function(e){this._touchPrev=!0},_mouseOverHandler:function(e){if(0==this._touchPrev){var i=t(e.target);!i.hasClass("e-icon")&&!i.hasClass("e-link")||i.hasClass("e-hover")||i.addClass("e-hover")}this._touchPrev=!1},_mouseOutHandler:function(e){var i=t(e.target);(i.hasClass("e-icon")||i.hasClass("e-link"))&&i.hasClass("e-hover")&&i.removeClass("e-hover")},_hidedrop:function(e){t(e.target.parentElement).hasClass("e-drpdwndiv")||t(e.target).hasClass("e-drpdwndiv")||this.$dropItem&&"none"!=this.$dropItem.css("display")&&this.$dropItem.hide()},_wireResizing:function(){this._refreshDropandTextItems(),t(window).bind("resize",this.model.isResponsive?t.proxy(this._reSizeHandler,this):t.proxy(this._unWireResizing,this))},_unWireResizing:function(){this._refreshDropandTextItems(),this.$dropItem&&"none"!=this.$dropItem.css("display")&&this.$dropItem.hide(),t(window).unbind("resize",t.proxy(this._reSizeHandler,this))},_reSizeHandler:function(){this.$dropItem&&"none"!=this.$dropItem.css("display")&&this.$dropItem.hide(),this._intervalWid+this._gotoWid+this.element.find(".e-pagercontainer").outerWidth()+this._msgWidth>this.element.outerWidth()-20?this._msgWidth>0&&this.element.find(".e-parentmsgbar").addClass("e-msg-res"):this._msgWidth>0&&this.element.find(".e-parentmsgbar").removeClass("e-msg-res"),this.element.outerWidth()-t(this.element.find(".e-pagercontainer")).outerWidth()<40&&(this._flag=!0,this._fillScreen()),this.element.outerWidth()-t(this.element.find(".e-pagercontainer")).outerWidth()>40&&(!t(this._templateElement).find(".e-textbox-paging").length>0&&(this._maxPageCount||(this._maxPageCount=this.model.pageCount)),this.option("pageCount",this._maxPageCount),this.element.outerWidth()-t(this.element.find(".e-pagercontainer")).outerWidth()<40&&(this._flag=!0,this._fillScreen())),this._refreshDropandTextItems()},_refreshDropandTextItems:function(){this.numTextbox&&!this.model.template&&(this.element.find(".e-pagercontainer").position().top!=this.element.find(".e-parentmsgbar").position().top?this.numTextbox.addClass("e-pager-goto-res"):this.numTextbox.removeClass("e-pager-goto-res")),this.pageInterval_wrap&&!this.model.template&&(this.element.find(".e-pagercontainer").position().top!=this.element.find(".e-pager-itemsinterval").position().top?this.element.find(".e-pager-itemsinterval").addClass("e-pager-goto-res"):this.element.find(".e-pager-itemsinterval").removeClass("e-pager-goto-res"))},renderPager:function(){var e;if(this.model.template){if(this._templateElement=i.buildTag("div.e-template","",{}),e=t(this.model.template.startsWith(".")||this.model.template.startsWith("#")?t(this.model.template).html():this.model.template),e.appendTo(this._templateElement),t(this._templateElement).find(".e-default-paging").length>0){var s=i.buildTag("div.e-pagercontainer","",{});this._renderPagerContainer(s),s.appendTo(t(this._templateElement).find(".e-default-paging"))}if(t(this._templateElement).find(".e-textbox-paging").length>0){var a=this,r=t(this._templateElement).find(".e-textbox-paging");r.addClass("e-pagercontainer");var n=i.buildTag("div.e-firstpage e-icon e-mediaback  e-firstpagedisabled e-disable","",{},{title:a.localizedLabels.firstPageTooltip,"aria-label":a.localizedLabels.firstPageTooltip,role:"link"}),o=i.buildTag("div.e-prevpage e-icon e-arrowheadleft-2x  e-prevpagedisabled e-disable","",{},{title:a.localizedLabels.previousPageTooltip,"aria-label":a.localizedLabels.previousPageTooltip,role:"link"}),l=i.buildTag("input.e-gototextbox",{},{type:"textbox"}),d=i.buildTag("div.e-nextpage e-icon e-arrowheadright-2x  e-default","",{},{title:a.localizedLabels.nextPageTooltip,"aria-label":a.localizedLabels.nextPageTooltip,role:"link"}),h=i.buildTag("div.e-lastpage e-icon e-mediaforward  e-default","",{},{title:a.localizedLabels.lastPageTooltip,"aria-label":a.localizedLabels.lastPageTooltip,role:"link"}),c=i.buildTag("div.e-newrecord e-icon e-plus e-default","",{},{title:"Add New Record","aria-label":"Add New Record",role:"button"});r.append(n),r.append(o),r.append(l),r.append(d),r.append(h),r.append(c),l.focus(function(){l.val(a.model.currentPage)})}var u=this.element;t(this._templateElement).addClass("e-template"),this._pagerContainer=s=t(this._templateElement).find(".e-pagercontainer")?t(this._templateElement).find(".e-pagercontainer"):t(this._templateElement),u.append(t(this._templateElement)),t(this._templateElement).find(".e-prevpage").length>0&&(this._$prev=t(this._templateElement).find(".e-prevpage")),t(this._templateElement).find(".e-nextpage").length>0&&(this._$next=t(this._templateElement).find(".e-nextpage")),t(this._templateElement).find(".e-firstpage").length>0&&(this._$first=t(this._templateElement).find(".e-firstpage")),t(this._templateElement).find(".e-lastpage").length>0&&(this._$last=t(this._templateElement).find(".e-lastpage")),t(this._templateElement).find(".e-gototextbox").length>0&&(this.numTextbox=t(this._templateElement).find(".e-gototextbox").addClass("e-pager-goto-res e-textbox").attr("type","textbox"),!t(this._templateElement).find(".e-textbox-paging").length>0&&this.numTextbox.width(35),this._on(t(this.numTextbox),"keydown",this._mouseScroll),
this._on(this.numTextbox,"focusout",this._onTextboxBlur)),this._$prev&&this._$prev.hasClass("e-prevpagedisabled")&&this._$prev.removeClass("e-prevpage"),this._$last&&this._$last.hasClass("e-lastpagedisabled")&&this._$prev.removeClass("e-lastpage"),this._$first&&this._$first.hasClass("e-firstpagedisabled")&&this._$prev.removeClass("e-firstpage"),this._$next&&this._$next.hasClass("e-nextpagedisabled")&&this._$prev.removeClass("e-nextpage"),t(this._templateElement).find(".e-drpdwndiv").length>0&&this.model.pageSizeList&&this._renderDropdownlist(),this._templatePageCount=t(this._templateElement).find(".e-pagenumbers").length,this._templatePageCount>1&&(a=this,t(this._templateElement).find(".e-previouspager").length>0&&(this._$PP=t(this._templateElement).find(".e-previouspager").addClass("e-nextprevitemdisabled e-disable e-spacing e-PP")),t(this._templateElement).find(".e-nextpager").length>0&&(this._$NP=t(this._templateElement).find(".e-nextpager").addClass("e-NP e-spacing e-nextprevitemdisabled e-disable")),t(this._templateElement).find(".e-pagenumbers").each(function(e){t(this).attr("role","link").addClass("e-numericitem e-spacing e-default").data("index",e)}),a._links=t(this._templateElement).find(".e-numericitem[role=link]"))}else{var s=i.buildTag("div.e-pagercontainer","",{});this._pagerContainer=s,this._renderPagerContainer(s),this.element[0].appendChild(s[0])}this.model.enabled||this._disable(),this.model.pageSizeList&&this.model.pageSizeList.length>0&&this._renderDropdownlist(),this._pageInfo(),this.model.enableExternalMessage&&this._renderPagerMessage(),this.model.showGoToPage&&this._renderTextboxItem(),this.model.enableRTL&&this.element.addClass("e-rtl"),this._cssClass=this.model.cssClass,this.element.addClass(this.model.cssClass)},_onTextboxBlur:function(e){var i=this;if(e.currentTarget.value=parseInt(e.currentTarget.value),!/^[0-9]*$/.test(parseInt(e.currentTarget.value)))return i.numTextbox.val(i.model.currentPage),!1;i.model.currentPage!=parseInt(e.currentTarget.value)&&(parseInt(e.currentTarget.value)>=1&&parseInt(e.currentTarget.value)<=i.model.totalPages?(i.model.currentPage=parseInt(e.currentTarget.value),i.refreshPager(),i._prevPageNo!=i.model.currentPage&&i._trigger("change",{currentPage:i.model.currentPage,isInteraction:!0,event:e})):i.numTextbox.val(this.model.currentPage)),t(this._templateElement).find(".e-textbox-paging").length>0&&this.numTextbox.val(this.model.currentPage+" of "+this.model.totalPages)},_removeDropdownlist:function(){this.pageInterval_wrap.remove(),this.pageInterval_wrap=null,this.$textspan=null,this.$dropItem=null},_renderDropdownlist:function(){var e=this;if(this.pageInterval_wrap=i.buildTag("div.e-pager-itemsinterval","",{},{tabindex:"0","aria-label":"PageSizeList Dropdown",role:"listbox","aria-expanded":!1,"aria-haspopup":!0,"aria-owns":e.element[0].id+"_pagelist"}),this.model.template&&t(this._templateElement).find(".e-drpdwndiv").length>0)var s=t(this._templateElement).find(".e-drpdwndiv").addClass("e-icon e-arrow-sans-down");else var s=i.buildTag("div.e-drpdwndiv e-icon e-arrow-sans-down","",{});if(null!=e.model.totalRecordsCount&&0!=e.model.totalRecordsCount||s.addClass("e-disable"),this.$textspan=i.buildTag("span.e-text"),this.sizeIntervals=this.model.pageSizeList,e.model.template)var a=t(e._templateElement).find(".e-drpdwndiv").prev().length>0?t(e._templateElement).find(".e-drpdwndiv").prev():t(e._templateElement);s.appendTo(this.pageInterval_wrap),e.model.template?a.after(this.pageInterval_wrap):this.pageInterval_wrap.appendTo(this.element),this.pageInterval_wrap.insertBefore(this._parentMsgBar),this.$textspan.appendTo(s),e.$textspan.text(this.model.pageSize||this.model.pageSizeList[0]),this.$dropItem=i.buildTag("ul.e-drpdwn e-ul","",{},{role:"list",id:e.element[0].id+"_pagelist",tabindex:"-1"}),this._renderItems(),this.$dropItem.appendTo(s),this._renderPageSizeMessage(),s.on("click",function(){e._showPageDropdown(e,s)}),e.pageInterval_wrap.on("keydown",function(i){i.altKey&&40==i.keyCode?e._showPageDropdown(e,s):i.altKey||40!=i.keyCode||"none"==e.$dropItem.css("display")?i.altKey||38!=i.keyCode||"none"==e.$dropItem.css("display")?i.altKey||13!=i.keyCode||"none"==e.$dropItem.css("display")||(t(e.$dropItem).find("li.e-active").removeClass("e-active"),t(e.$dropItem.find("li")[e._index]).addClass("e-active").removeClass("e-hover"),e._pageSize=parseInt(t(e.$dropItem.find("li")[e._index]).text()),e.$textspan.text(t(e.$dropItem.find("li")[e._index]).text()),e._updatedFromDropDown(e),e.$dropItem.hide(),e.pageInterval_wrap.focus()):(e._index=e._index-1,e._index<0&&(e._index=0),t(e.$dropItem).find("li.e-hover").removeClass("e-hover"),t(e.$dropItem.find("li")[e._index]).addClass("e-hover"),t(e.$dropItem.find("li")[e._index]).focus()):(e._index=e._index+1,e._index>=t(e.$dropItem.find("li")).length&&(e._index=t(e.$dropItem.find("li")).length-1),t(e.$dropItem).find("li.e-hover").removeClass("e-hover"),t(e.$dropItem.find("li")[e._index]).addClass("e-hover"),t(e.$dropItem.find("li")[e._index]).focus())}),this.$dropItem.hide(),this._intervalWid=this.element.find(".e-pager-itemsinterval").outerWidth()},_getOffset:function(e){return i.util.getOffset(e)},_showPageDropdown:function(e,t){"none"!=e.$dropItem.css("display")?(e.$dropItem.hide(),this.pageInterval_wrap.attr("aria-expanded",!1)):e.model.enabled&&!t.hasClass("e-disable")&&(this.pageInterval_wrap.attr("aria-expanded",!0),e.$dropItem.show(),e._setListPosition())},_getZindexPartial:function(){return i.util.getZindexPartial(this.pageInterval_wrap,this.$dropItem)},_setListPosition:function(){var e=this.pageInterval_wrap,i=this._getOffset(e),s=t(document).scrollTop()+t(window).height()-(i.top+t(e).outerHeight()),a=i.top-t(document).scrollTop(),r=this.$dropItem.outerHeight(),n=(this.$dropItem.outerWidth(),e.outerHeight()),o=n-e.height(),l=this._getZindexPartial(),d=r<s||r>a?this.$dropItem.position().top:-(r+o+3);this.$dropItem.css({top:d+"px","z-index":l})},_renderPageSizeMessage:function(){this.pageInterval_wrap.children().hasClass("e-interval-msg")||(this._msgwrapper=i.buildTag("div.e-interval-msg")),this._msgwrapper.appendTo(this.pageInterval_wrap),this.model.pageSizeMessage.toString().length?(this._msgwrapper.html(this.model.pageSizeMessage),"none"==this._msgwrapper.css("display")&&this._msgwrapper.show()):this._msgwrapper.remove()},_renderItems:function(){var e=this;t(this.model.pageSizeList).each(function(){var t=i.buildTag("li");t.text(this),t.attr("aria-label",this.toString()),t.attr("role","listitem"),t.attr("tabindex","-1"),e.$dropItem.append(t),e.model.pageSize==this&&t.addClass("e-active")}),this.$dropItem.find("li").on("click",function(i){e.$dropItem.find("li.e-active").removeClass("e-active"),t(this).addClass("e-active"),e._pageSize=parseInt(t(this).text()),e.$textspan.text(t(this).text()),e._updatedFromDropDown(e)})},_updatedFromDropDown:function(t){t.refreshPager(),t._trigger("pageSizeSelected",{pageSize:t._pageSize}),t._prevPageNo!=t.model.currentPage&&t._trigger("change",{currentPage:t.model.currentPage,isInteraction:!0,event:e})},_queryStringValue:function(){var e=new RegExp("[\\?&]page=([^&#]*)").exec(window.location.href);this.model.currentPage=e?parseInt(e[1]||1):1},_renderPagerMessage:function(){this.element.find("e-pagermessage").length<=1&&(this._messageDiv=i.buildTag("div.e-pagermessage")),this.model.externalMessage.toString().length?(this._messageDiv.html(this.model.externalMessage),"none"==this._messageDiv.css("display")&&this._messageDiv.show()):this._messageDiv.hide(),this.element.append(this._messageDiv)},_removePagerMessage:function(){this.element.find("div.e-pagermessage").remove()},_mouseScroll:function(e){if(this.model.enabled){"38"==e.keyCode?this._updateField("increment"):"40"==e.keyCode?this._updateField("decrement"):"13"==e.keyCode&&this._onTextboxBlur(e)}},_updateField:function(e){var t=this.model.currentPage;if(""==this.numTextbox.val()?this.numTextbox.val(1):this.numTextbox.val().indexOf(" ")>=1&&this.numTextbox.val(this.numTextbox.val().replace(" ","")),this.model.currentPage=i.parseInt(this.numTextbox.val(),this.model.locale),isNaN(this.model.currentPage)&&!this.model.currentPage&&(this.model.currentPage=1),this.model.currentPage>=1&&this.model.currentPage>this.model.totalPages)this.model.currentPage=this.model.totalPages,this.numTextbox.val(this.model.currentPage);else if(this.model.currentPage<1&&this.model.currentPage<=this.model.totalPages)this.model.currentPage=1,this.numTextbox.val(this.model.currentPage);else if(this.model.currentPage>=1&&this.model.currentPage<=this.model.totalPages){var s="increment"==e?this.model.currentPage+1:this.model.currentPage-1;s>=1&&s<=this.model.totalPages&&(this.numTextbox.val(s),this.model.currentPage=s)}this.refreshPager(),t!=this.model.currentPage&&this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!0,event:event})},_renderTextboxItem:function(){var e=i.buildTag("input#"+this.element[0].id+"_numtext","",{},{type:"textbox",role:"textbox","aria-label":"Go to Textbox"});t(e).appendTo(this._parentMsgBar).insertBefore(t(this._parentMsgBar).find("span")),this.numTextbox=e,this.numTextbox.height(this.element.find(".e-pagercontainer .e-numericcontainer a").outerHeight()),this.numTextbox.width(35),this.numTextbox.addClass("e-gototextbox e-textbox"),this.model.showGoToPage||this.numTextbox.hide(),this._gotoWid=t(this.numTextbox).outerWidth(),this._on(t(this.numTextbox),"keydown",this._mouseScroll),this._on(this.numTextbox,"focusout",this._onTextboxBlur)},_renderPagerContainer:function(e){this._renderBackwardButton(e),this._renderpreviousPager(e),this._renderNumericItem(e),this._renderForwardPager(e),this._renderForwardButton(e)},_renderMsgBar:function(){var e=i.buildTag("span.e-pagermsg",String.format(this.localizedLabels.pagerInfo,this.model.currentPage,this.model.totalPages||0,this.model.totalRecordsCount||0));this._parentMsgBar.appendChild(e[0]),this._parentMsgBar.style.textAlign=i.TextAlign.Right},_renderpreviousPager:function(e){this._$PP=i.buildTag("a.e-link e-nextprevitemdisabled e-disable e-spacing e-PP","...",{},{title:this.localizedLabels.previousPagerTooltip,"aria-label":this.localizedLabels.previousPagerTooltip}),this._$PP.attr("tabindex","0"),e.append(this._$PP)},_renderForwardPager:function(e){this._$NP=i.buildTag("a.e-link e-NP e-numericitem e-spacing e-default","...",{},{title:this.localizedLabels.nextPagerTooltip,"aria-label":this.localizedLabels.nextPagerTooltip}),this._$NP.attr("tabindex","0"),e.append(this._$NP)},_renderBackwardButton:function(e){this._$first=i.buildTag("div.e-firstpage e-icon e-mediaback  e-firstpagedisabled e-disable","",{},{title:this.localizedLabels.firstPageTooltip,"aria-label":this.localizedLabels.firstPageTooltip,role:"link"}),this._$prev=i.buildTag("div.e-prevpage e-icon e-arrowheadleft-2x  e-prevpagedisabled e-disable","",{},{title:this.localizedLabels.previousPageTooltip,"aria-label":this.localizedLabels.previousPageTooltip,role:"link"}),this._$first.attr("tabindex","0"),this._$prev.attr("tabindex","0"),e.append(this._$first),e.append(this._$prev)},_renderNumericItem:function(e){var t=i.buildTag("div.e-numericcontainer e-default","",{});this._renderNumericLinks(t,this.model.pageCount),e.append(t),this._maxPageCount=this.model.pageCount},_renderNumericLinks:function(e){e.empty(),this.model.pageCount=Math.round(this.model.pageCount),""!=this.model.customText?e.addClass("e-customtext"):e.removeClass("e-customtext");for(var t=1;t<=this.model.pageCount;t++){var s=i.buildTag("a.e-link",this.model.customText+t,{},{role:"link","aria-label":"Go To page "+t.toString()}).addClass("e-numericitem e-spacing e-default").data("index",t);s.attr("tabindex","0"),t==this.model.currentPage&&s.removeClass("e-default").addClass("e-currentitem e-active"),e.append(s)}this._links=e.children()},_renderForwardButton:function(e){this._$next=i.buildTag("div.e-nextpage e-icon e-arrowheadright-2x  e-default","",{},{title:this.localizedLabels.nextPageTooltip,role:"link","aria-label":this.localizedLabels.nextPageTooltip}),this._$last=i.buildTag("div.e-lastpage e-icon e-mediaforward  e-default","",{},{title:this.localizedLabels.lastPageTooltip,role:"link","aria-label":this.localizedLabels.lastPageTooltip}),this._$next.attr("tabindex","0"),this._$last.attr("tabindex","0"),e.append(this._$next),e.append(this._$last)},_setLocale:function(){this.localizedLabels=this._getLocalizedLabels(),this._$first.attr("title",this.localizedLabels.firstPageTooltip),this._$prev.attr("title",this.localizedLabels.previousPageTooltip),this._$next.attr("title",this.localizedLabels.nextPageTooltip),this._$last.attr("title",this.localizedLabels.lastPageTooltip),this._$NP.attr("title",this.localizedLabels.nextPagerTooltip),this._$NP.attr("title",this.localizedLabels.previousPagerTooltip),this._$first.attr("aria-label",this.localizedLabels.firstPageTooltip),this._$prev.attr("aria-label",this.localizedLabels.previousPageTooltip),this._$next.attr("aria-label",this.localizedLabels.nextPageTooltip),this._$last.attr("aria-label",this.localizedLabels.lastPageTooltip),this._$NP.attr("aria-label",this.localizedLabels.nextPagerTooltip),this._$NP.attr("aria-label",this.localizedLabels.previousPagerTooltip)},_applyCss:function(){if(null==this.model.totalRecordsCount)return this._$prev&&this._$prev.addClass("e-prevpagedisabled e-disable").removeClass("e-prevpage").removeClass("e-default"),this._$first&&this._$first.addClass("e-firstpagedisabled e-disable").removeClass("e-firstpage").removeClass("e-default"),this._$last&&this._$last.addClass("e-lastpagedisabled e-disable").removeClass("e-lastpage").removeClass("e-default"),this._$next&&this._$next.addClass("e-nextpagedisabled e-disable").removeClass("e-nextpage").removeClass("e-default"),this._$NP&&this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),void(this.model.pageSizeList&&this.element.find(".e-drpdwndiv").addClass("e-disable"));0==this.model.totalRecordsCount&&this.model.pageSizeList?this.element.find(".e-drpdwndiv").addClass("e-disable"):0!=this.model.totalRecordsCount&&this.model.pageSizeList&&this.element.find(".e-drpdwndiv").hasClass("e-disable")&&this.element.find(".e-drpdwndiv").removeClass("e-disable"),this.model.currentPage>1&&this._$prev&&this._$first?(this._$prev.removeClass("e-prevpagedisabled").removeClass("e-disable").addClass("e-prevpage e-default"),this._$first.removeClass("e-firstpagedisabled").removeClass("e-disable").addClass("e-firstpage e-default")):(this._$prev&&this._$prev.addClass("e-prevpagedisabled e-disable").removeClass("e-prevpage").removeClass("e-default"),this._$first&&this._$first.addClass("e-firstpagedisabled e-disable").removeClass("e-firstpage").removeClass("e-default")),this._$PP&&(this.model.currentPage>this.model.pageCount?this._$PP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"):this._$PP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")),this._links.length&&parseInt(this._links[0].innerHTML.replace(this.model.customText,""),10)+this.model.pageCount>this.model.totalPages?this._lastNP=!0:this._lastNP=!1,0==this._lastNP&&(this._$NP?this._$NP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"):this._$NP&&this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")),this._lastpageCount=this.model.totalPages%this.model.pageCount,0==this._lastpageCount&&(this._lastpageCount=this.model.pageCount),this.model.currentPage>this.model.totalPages-this._LastpageCount&&(this._$PP&&this._$PP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"),this._$NP&&this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")),this.model.currentPage==this.model.totalPages||0==this.model.totalRecordsCount?(this._$last&&this._$last.addClass("e-lastpagedisabled e-disable").removeClass("e-lastpage").removeClass("e-default"),this._$next&&this._$next.addClass("e-nextpagedisabled e-disable").removeClass("e-nextpage").removeClass("e-default"),this._$NP&&this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")):(this._$last&&this._$last.addClass("e-lastpage e-default").removeClass("e-lastpagedisabled").removeClass("e-disable"),this._$next&&this._$next.addClass("e-nextpage e-default").removeClass("e-nextpagedisabled").removeClass("e-disable")),this._links.length&&(this._links.removeClass("e-currentitem").removeClass("e-active").addClass("e-default"),t(this._links[(this.model.currentPage-1)%this.model.pageCount]).removeClass("e-default").addClass("e-currentitem e-active"),t(this._links[(this._prevPageNo-1)%this.model.pageCount]).removeClass("e-default").addClass("e-numericitem")),this._pageSize>=this.model.totalRecordsCount/this.model.pageCount&&null!=this._$PP&&0!=this._$PP.length&&(this._$PP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"))},_SetTotalPages:function(){this.model.totalPages=this.model.totalRecordsCount%this._pageSize==0?this.model.totalRecordsCount/this._pageSize:parseInt(this.model.totalRecordsCount/this._pageSize,10)+1},_refreshNumericItem:function(){if(0!=this._links.length&&null!=this._links){this.model.currentPage=1==this.model.totalPages?1:this.model.currentPage,this.model.currentPage>this.model.totalPages&&0!=this.model.totalPages&&(this.model.currentPage=this.model.totalPages);var e=parseInt(this.model.currentPage/this.model.pageCount,10);this.model.currentPage%this.model.pageCount==0&&e>0&&(e-=1),this._links.css("display","none");for(var i=0;i<this.model.pageCount;i++){var s=e*this.model.pageCount+1+i;s<=this.model.totalPages&&(this._links[i].style.display="",t(this._links[i]).data("index",s),t(this._links[i]).html(this.model.customText+s),t(this._links[i]).attr("aria-label","Go to page "+s.toString()))}}},_refreshPagerInfo:function(){0==this.model.totalRecordsCount&&(this.model.currentPage=0),this.element.find(".e-pagermsg").text(String.format(this.localizedLabels.pagerInfo,this.model.currentPage,this.model.totalPages||0,this.model.totalRecordsCount||0))},_refreshExternalMessage:function(){this.model.externalMessage.toString().length?this.element.find(".e-pagermessage").empty().html(this.model.externalMessage).show():this.element.find(".e-pagermessage").hide()},refreshPager:function(){this._templateElement&&(this._links=t(this._templateElement).find(".e-numericitem[role=link]")),this._SetTotalPages(),this._refreshNumericItem(),this._refreshPagerInfo(),this._applyCss(),this.model.enableExternalMessage&&this._refreshExternalMessage(),this.model.enableRTL?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl"),this.numTextbox&&(t(this._templateElement).find(".e-textbox-paging").length>0?(this.model.currentPage>this.model.totalPages&&0!=this.model.totalPages&&(this.model.currentPage=this.model.totalPages),this.numTextbox.is(":focus")||this.numTextbox.val(String.format("{0} of {1}",this.model.currentPage,this.model.totalPages))):this.numTextbox.val(this.model.currentPage)),""===this._temp||i.isNullOrUndefined(this._temp)||(this._temp.startsWith(".")||this._temp.startsWith("#"))&&null!=t(this._temp)[0]&&void 0!=t(this._temp)[0]&&this.option("template",t(this._temp).render([this.model]))},_kDownHandler:function(e){var t;if(t=e.keyCode?e.keyCode:e.which?e.which:e.charCode,e.target=null,this.model.masterObject.checkKey("firstPage",t,e))e.target=this._$first;else if(this.model.masterObject.checkKey("previousPager",t,e))e.target=this._$PP;else if(this.model.masterObject.checkKey("previousPage",t,e))e.target=this._$prev;else if(this.model.masterObject.checkKey("lastPage",t,e))e.target=this._$last;else if(this.model.masterObject.checkKey("nextPager",t,e))e.target=this._$NP;else{if(!this.model.masterObject.checkKey("nextPage",t,e))return!1;e.target=this._$next}this._pagerClickHandler(e)},_pageInfo:function(e){!this.model.showPageInfo&&!this.model.showGoToPage||this._parentMsgBar?this.model.showPageInfo||this.model.showGoToPage?t(this._parentMsgBar).find(".e-pagermsg").remove():(this._parentMsgBar&&this._parentMsgBar.remove(),this._parentMsgBar=null):(this._parentMsgBar=document.createElement("div"),this._parentMsgBar.className+="e-parentmsgbar",this.model.showPageInfo&&this._renderMsgBar(),this.element[0].appendChild(this._parentMsgBar),this.element[0].className+=this.model.enableRTL?" e-pager e-rtl":" e-pager"),this._msgWidth=t(this._parentMsgBar).outerWidth()},_doClickAnimation:function(e){var i=t(e.target);void 0!=i&&void 0!=e.type&&i.addClass("e-animate")},_pagerClickHandler:function(e){if(!this.model.enabled)return!1;if("keydown"!=e.type||13==e.keyCode){this._prevPageNo=this.model.currentPage;var i=t(e.target);this.element.find(".e-animate").removeClass("e-animate"),this._doClickAnimation(e),-1!=t.inArray(e.target,this._links)?this.model.currentPage=parseInt(t(e.target).data("index"),10):i.hasClass("e-nextpage")&&1!=i.hasClass("e-nextpagedisabled")?this.model.currentPage%this.model.pageCount==0?(this.model.currentPage++,void 0!=this._links&&0!=this._links.length&&(this.model.currentPage=parseInt(t(this._links[0]).data("index"),10)+this.model.pageCount),this.model.currentPage+this.model.pageCount>=this.model.totalPages&&(this._lastNP=!0)):this.model.currentPage++:i.hasClass("e-prevpage")&&1!=i.hasClass("e-prevpagedisabled")?(this.model.currentPage%this.model.pageCount==1&&(this._lastNP=!1),--this.model.currentPage<0&&(this.model.currentPage=0)):i.hasClass("e-lastpage")&&1!=i.hasClass("e-lastpagedisabled")?(this._LastpageCount=this.model.totalPages%this.model.pageCount,0==this._LastpageCount&&(this._LastpageCount=this.model.pageCount),this.model.currentPage=this.model.totalPages,this._lastNP=!0):i.hasClass("e-firstpage")&&1!=i.hasClass("e-firstpagedisabled")?(this.model.currentPage=1,this._lastNP=!1):i.hasClass("e-NP")&&1!=i.hasClass("e-nextprevitemdisabled")?(void 0!=this._links&&(this.model.currentPage=parseInt(t(this._links[0]).data("index"),10)+this.model.pageCount),parseInt(this._links[this.model.pageCount-1].innerHTML.replace(this.model.customText,""),10)+this.model.pageCount>=this.model.totalPages&&(this._lastNP=!0,this.model.totalRecordsCount-this._pageSize<this._pageSize?this._LastpageCount=this.model.totalRecordsCount-this._pageSize:this._LastpageCount=this.model.totalRecordsCount/this._pageSize%this.model.pageCount,0==this._LastpageCount&&(this._LastpageCount=this.model.pageCount),void 0!=this._links&&(this.model.currentPage=parseInt(t(this._links[this.model.pageCount-1]).data("index"),10)+1))):i.hasClass("e-PP")&&1!=i.hasClass("e-nextprevitemdisabled")&&(void 0!=this._links&&(this.model.currentPage=parseInt(t(this._links[0]).data("index"),10)-this.model.pageCount),this._lastNP=!1),this._trigger("click",{currentPage:this.model.currentPage,event:e}),i.hasClass("e-newrecord")&&this._trigger("addRecord",{currentPage:this.model.currentPage,event:e}),this.goToPage(this.model.currentPage,e)}},goToPage:function(e,t){e!=this.model.currentPage&&(this._prevPageNo=this.model.currentPage),this._prevPageNo!==e&&e>=1&&e<=this.model.totalPages&&(this.model.currentPage=e,this.model.enableQueryString&&this._updateQueryString(this.model.currentPage)),this._prevPageNo!=this.model.currentPage&&(this.refreshPager(),this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!0,event:t}))},goToNextPage:function(){0!=this.model.totalRecordsCount&&this.model.currentPage>=1&&this.model.currentPage<this.model.totalPages&&(this.model.currentPage=this.model.currentPage+1,this.refreshPager(),this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!1}))},goToLastPage:function(){0!=this.model.totalRecordsCount&&this.model.currentPage>=1&&this.model.currentPage<this.model.totalPages&&(this.model.currentPage=this.model.totalPages,this.refreshPager(),this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!1}))},goToFirstPage:function(){0!=this.model.totalRecordsCount&&this.model.currentPage>1&&(this.model.currentPage=1,this.refreshPager(),this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!1}))},goToPrevPage:function(){0!=this.model.totalRecordsCount&&this.model.currentPage>1&&(this.model.currentPage=this.model.currentPage-1,this.refreshPager(),this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!1}))},_updateQueryString:function(e){var t=this._getUpdatedURL(window.location.href,"page",e);history.pushState?window.history.pushState({path:t},"",t):window.location.href=t},_getUpdatedURL:function(e,t,i){var s=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");if(e.match(s))return e.replace(s,"$1"+t+"="+i+"$2");var a="",r=-1!==e.indexOf("?")?"&":"?";return-1!==e.indexOf("#")&&(a=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+r+t+"="+i+a},_getLocalizedLabels:function(e){return i.getLocalizedConstants(this.sfType,this.model.locale)},_fillScreen:function(){if(!t(this._templateElement).find(".e-textbox-paging").length>0){var e=this.element.find(".e-pagercontainer").outerWidth()-(this._$first.outerWidth(!0)+this._$last.outerWidth(!0)+this._$next.outerWidth(!0)+this._$prev.outerWidth(!0));e-=!this._$NP||this._$NP.hasClass("e-disable")?0:this._$NP.outerWidth(!0),e-=!this._$PP||this._$PP.hasClass("e-disable")?0:this._$PP.outerWidth(!0),this.model.template?this.element.outerWidth()-t(this.element.find(".e-pagercontainer")).outerWidth()<40&&(Math.floor(e/this.element.find(".e-numericitem.e-spacing.e-default").outerWidth(!0))-1<1?this._flag?this.option("pageCount",1):this.model.pageCount=1:this._flag?this.option("pageCount",Math.floor(e/this.element.find(".e-numericitem.e-spacing.e-default").outerWidth(!0))-1):this.model.pageCount=Math.floor(e/this.element.find(".e-numericitem.e-spacing.e-default").outerWidth(!0))-1):this.element.outerWidth()-t(this.element.contents()[0]).outerWidth()<40&&(Math.floor(e/this.element.find(".e-numericcontainer .e-numericitem.e-spacing.e-default").outerWidth(!0))-1<1?this._flag?this.option("pageCount",1):this.model.pageCount=1:this._flag?this.option("pageCount",Math.floor(e/this.element.find(".e-numericcontainer .e-numericitem.e-spacing.e-default").outerWidth(!0))-1):this.model.pageCount=Math.floor(e/this.element.find(".e-numericcontainer .e-numericitem.e-spacing.e-default").outerWidth(!0))-1)}},_enable:function(){this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.prop("disabled",!1),this.numTextbox&&this.numTextbox.removeAttr("disabled")},_disable:function(){this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.element.prop("disabled","disabled"),this.numTextbox&&this.numTextbox.attr("disabled","disabled"),this.$dropItem&&"none"!=this.$dropItem.css("display")&&this.$dropItem.hide(),this.model.template&&t(this._templateElement).addClass(".e-disable")},_setFirst:!0,_setModel:function(e){for(var i in e)switch(this._preval=this.model.currentPage,i){case"pageCount":this._renderNumericLinks(this.element.find(".e-numericcontainer")),this.model.isResponsive&&!this._flag&&(this._maxPageCount=this.model.pageCount,this._fillScreen()),this._flag=!1;break;case"template":this.element.children().remove(),this.renderPager();break;case"enableExternalMessage":e[i]?this._renderPagerMessage():this._removePagerMessage();break;case"showPageInfo":this._pageInfo();break;case"pageSizeMessage":null!=e[i]&&this._renderPageSizeMessage();break;case"pageSize":if(this._pageSize=this.model.pageSize,this.model.pageSizeList&&this.model.pageSizeList.length>0){var s=this;this.$textspan.text(this.model.pageSize),this.$dropItem.find(".e-active").removeClass("e-active"),t(".e-drpdwn.e-ul").find("li").each(function(){t(this).text()==s.model.pageSize&&t(this).addClass("e-active")})}break;case"pageSizeList":this.model.pageSizeList=e[i],e[i].length>0?(this._pageSize=this.model.pageSize,this.$dropItem?(this.$dropItem.empty(),this._renderItems()):this._renderDropdownlist()):this.$dropItem&&this._removeDropdownlist();break;case"enabled":e[i]?this._enable():this._disable();break;case"cssClass":this.element.removeClass(this._cssClass).addClass(e[i]),this._cssClass=this.model.cssClass;case"isResponsive":this._wireResizing(),e[i]?this.model.isResponsive&&!this._flag&&(this._maxPageCount=this.model.pageCount,this._fillScreen()):this.option("pageCount",this._maxPageCount),this._flag=!1;break;case"showGoToPage":e[i]?this._renderTextboxItem():this.numTextbox&&(this.numTextbox.remove(),this.numTextbox=null);break;case"locale":this._setLocale();break;case"currentPage":this.refreshPager(),this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!1})}"currentPage"!=i&&(this.refreshPager(),this._preval!=this.model.currentPage&&this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!1}))},_destroy:function(){this.element.empty().removeClass("e-pager"),this._unWireResizing()}}),i.Pager.Locale=i.Pager.Locale||{},i.Pager.Locale.default=i.Pager.Locale["en-US"]={pagerInfo:"{0} of {1} pages ({2} items)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager"}}(jQuery,Syncfusion),function(e,t,i){t.widget("ejDropDownList","ej.DropDownList",{element:null,model:null,validTags:["select","input"],_addToPersist:["value","text","selectedIndex","selectedItemIndex","selectedItems","selectedIndices","popupWidth","popupHeight","itemValue"],_setFirst:!1,_rootCSS:"e-dropdownlist",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},_requiresID:!0,defaults:{cssClass:"",value:null,htmlAttributes:{},text:null,itemValue:"",itemsCount:0,dataSource:null,delimiterChar:",",query:null,fields:{id:null,text:null,value:null,category:null,groupBy:null,imageUrl:null,imageAttributes:null,spriteCssClass:null,htmlAttributes:null,selected:null,tableName:null},locale:"en-US",watermarkText:null,height:"",loadOnDemand:!1,width:"",popupHeight:"152px",popupWidth:"auto",maxPopupHeight:null,minPopupHeight:"20",maxPopupWidth:null,minPopupWidth:"0",targetID:null,template:null,headerTemplate:null,selectedItemIndex:-1,selectedIndex:-1,disableItemsByIndex:null,enableItemsByIndex:null,selectedItems:[],selectedIndices:[],cascadeTo:null,enablePopupResize:!1,allowVirtualScrolling:!1,virtualScrollMode:"normal",showRoundedCorner:!1,showPopupOnLoad:!1,enableRTL:!1,enabled:!0,filterType:"contains",sortOrder:"ascending",caseSensitiveSearch:!1,showCheckbox:!1,checkAll:!1,uncheckAll:!1,enablePersistence:!1,enableFilterSearch:!1,enableServerFiltering:!1,enableIncrementalSearch:!0,incrementalSearchDelay:500,readOnly:!1,enableAnimation:!1,multiSelectMode:"none",allowGrouping:!1,enableSorting:!1,validationRules:null,validationMessage:null,actionBegin:null,actionComplete:null,actionFailure:null,actionSuccess:null,create:null,popupHide:null,popupShown:null,beforePopupShown:null,beforePopupHide:null,popupResizeStart:null,popupResize:null,popupResizeStop:null,change:null,select:null,dataBound:null,search:null,checkChange:null,cascade:null,destroy:null},dataTypes:{cssClass:"string",itemsCount:"number",watermarkText:"string",template:"string",disableItemsByIndex:"string",enableItemsByIndex:"string",enableIncrementalSearch:"boolean",incrementalSearchDelay:"number",cascadeTo:"string",delimiterChar:"string",showRoundedCorner:"boolean",showPopupOnLoad:"boolean",enableRTL:"boolean",enablePersistence:"boolean",allowVirtualScrolling:"boolean",virtualScrollMode:"enum",enabled:"boolean",readOnly:"boolean",multiSelectMode:"enum",dataSource:"data",query:"data",fields:"data",selectedItems:"array",selectedIndices:"array",enableAnimation:"boolean",allowGrouping:"boolean",enableSorting:"boolean",validationRules:"data",
validationMessage:"data",htmlAttributes:"data",locale:"string"},observables:["value","selectedItemIndex","selectedIndex","dataSource"],value:t.util.valueFunction("value"),selectedItemIndex:t.util.valueFunction("selectedItemIndex"),selectedIndex:t.util.valueFunction("selectedIndex"),_dataSource:t.util.valueFunction("dataSource"),enable:function(){this._visibleInput.hasClass("e-disable")&&(this.target.disabled=!1,this.model.enabled=!0,this.container.removeClass("e-disable"),this._visibleInput.removeClass("e-disable"),this.dropdownbutton.removeClass("e-disable"),t.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.removeClass("e-disable"),this._isIE8&&this.drpbtnspan.removeClass("e-disable"),this.container.on("mousedown",e.proxy(this._OnDropdownClick,this)),"visualmode"==this.model.multiSelectMode&&this._ulBox.removeClass("e-disable"),this.wrapper.attr("tabindex","0")),this._wireEvents()},disable:function(){this._visibleInput.hasClass("e-disable")||(this.target.disabled=!0,this.model.enabled=!1,this.container.addClass("e-disable"),this._visibleInput.addClass("e-disable"),t.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.addClass("e-disable"),this.dropdownbutton.addClass("e-disable"),this._isIE8&&this.drpbtnspan.addClass("e-disable"),"visualmode"==this.model.multiSelectMode&&this._ulBox.addClass("e-disable"),this.container.off("mousedown",e.proxy(this._OnDropdownClick,this)),this._unwireEvents(),this.wrapper.removeAttr("tabindex"),this._isPopupShown()&&this._hideResult())},getValue:function(){return this._visibleInput.val()},_setValue:function(e){t.isNullOrUndefined(e)||(this.model.loadOnDemand&&(t.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),this._raiseEvents=!1,t.isNullOrUndefined(this.model.text)||this.unselectItemByText(this.model.text),this._raiseEvents=!0,this.model.allowVirtualScrolling&&this._addValue(e),this.selectItemByValue(e))},_addValue:function(e){if(this.model.itemsCount>0&&""!=e){this._checkValue=!0;var i="number"==typeof e?e:e.split(this.model.delimiterChar);t.isNullOrUndefined(this._mapFields())||this._mapFields();this.mapFld._value;if(t.isNullOrUndefined(this._rawList)||this._addListItems(i,this._rawList,"local"),this._checkValue){var s=this._dataSource();if(t.DataManager&&s instanceof t.DataManager)if(s.dataSource.offline&&s.dataSource.json&&s.dataSource.json.length>0)this._addListItems(i,s.dataSource.json,"remote");else{var a=this,r=e;s.executeQuery(t.Query()).done(function(e){a._addListItems(i,e.result,"remote"),a.selectItemByValue(r)})}else this._addListItems(i,s,"remote")}}},_addListItems:function(e,t,i){for(var s=0;s<e.length;s++)for(var a=0;a<t.length;a++)"local"==i&&t[a][this.mapFld._value]==e[s]&&(this._checkValue=!1),"remote"==i&&t[a][this.mapFld._value]==e[s]&&this.addItem(t[a])},_setText:function(e){t.isNullOrUndefined(e)||(this.model.loadOnDemand&&(t.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),this._raiseEvents=!1,this.unselectItemByText(this.model.text),this._raiseEvents=!0,this.selectItemByText(e))},_setItemValue:function(e){this.model.itemValue=e},_changeWatermark:function(e){if(!this.model.enabled)return!1;this._isWatermark?this._visibleInput.attr("placeholder",e):this._hiddenSpan.text(e)},hidePopup:function(){if(!this.model.enabled)return!1;this.ultag.find("li").length>0&&this._hideResult()},showPopup:function(){if(!this.model.enabled)return!1;(t.isNullOrUndefined(this.ultag)?!!this.model.loadOnDemand:this.ultag.find("li").length>0)&&this._showResult()},clearText:function(){this._clearTextboxValue(),this._isWatermark||this._setWatermark()},addItem:function(i){if(this.model.loadOnDemand&&(t.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),!this.model.enabled||!i)return!1;this._mapFields();var s=e.isArray(i)?i:[i];if(s.length<1)return!1;var a=this.mapFld,r={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null,_category:null};r._id=s[0][a._id]?a._id:"id",r._imageUrl=s[0][a._imageUrl]?a._imageUrl:"imageUrl",r._imageAttributes=s[0][a._imageAttributes]?a._imageAttributes:"imageAttributes",r._spriteCSS=s[0][a._spriteCSS]?a._spriteCSS:"spriteCssClass",r._text=s[0][a._text]?a._text:"text",r._value=s[0][a._value]?a._value:"value",r._htmlAttributes=s[0][a._htmlAttributes]?a._htmlAttributes:"htmlAttributes",r._selected=s[0][a._selected]?a._selected:"selected",r._category=s[0][a._category]?a._category:"groupBy",this._generateLi(s,r);for(var n,o=this.dummyUl,n=0;n<s.length;n++)this._listItem(s[n],"add");if(this.model.showCheckbox?this._appendCheckbox(o,!0):this._isSingleSelect()||this._multiItemSelection(o,!0),this._virtualUl.append(e(this.dummyUl).clone(!0)),this.ultag.append(this.dummyUl),this._isPopupShown()){var l=this.scrollerObj?this.scrollerObj.scrollTop():0;this._refreshScroller(),this.scrollerObj&&this.scrollerObj.option("scrollTop",l)}},_toArray:function(i,s){var a;return"function"==typeof i&&(i=t.util.getVal(i)),e.isArray(i)?a=i:"string"==typeof i?s&&("visualmode"==this.model.multiSelectMode||"delimiter"==this.model.multiSelectMode||this.model.showCheckbox)?(a=this._getUpdatedListData(i),0==a.length&&(a=[i])):s?a=[i]:(a=this._getUpdatedListData(i),0==a.length&&(a=[i])):a=[i],a},_trim:function(t){return"string"==typeof t?e.trim(t):t},selectItemByIndex:function(e){this._selectItemByIndex(e)},selectItemsByIndices:function(e){this._selectItemByIndex(e)},_selectItemByIndex:function(i){if(this.model.loadOnDemand&&(t.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),this.listitems=this._getLi(),this._selectedIndices=e.map(this._selectedIndices,function(e){return parseInt(e)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,-1==parseInt(i)&&this.model.selectedItems.length>0)this._clearTextboxValue(),this._trigger("change",{text:this._visibleInput[0].value,selectedText:"",selectedValue:"",value:""});else for(var s,a=this._toArray(i,!0),r=0;r<a.length;r++)if(null!=(s=parseInt(a[r]))&&s>=0){if(-1==e.inArray(s,this._selectedIndices))for(var n=0;n<this.listitems.length;n++)e(this.listitems[n]).hasClass("e-disable")||n==s&&(this.selectedIndexValue=n,this._activeItem=s,this._enterTextBoxValue())}else!this.model.showCheckbox&&"none"==this.model.multiSelectMode&&this.model.selectedItems.length>0&&(this._clearTextboxValue(),this._trigger("change",{text:this._visibleInput[0].value,selectedText:"",selectedValue:"",value:""}))},unselectItemsByIndices:function(e){this._unselectItemByIndex(e)},unselectItemByIndex:function(e){this._unselectItemByIndex(e)},_unselectItemByIndex:function(i){this.model.loadOnDemand&&(t.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),this._selectedIndices=e.map(this._selectedIndices,function(e){return parseInt(e)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices;var s,a,r=this._toArray(i,!0);this.listitems=this._getLi();for(var n=0;n<r.length;n++)for(a=parseInt(r[n]),s=0;s<this.listitems.length;s++)s==a&&(this.selectedIndexValue=s,this._activeItem=a,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue())},setSelectedValue:function(e){this.selectItemByValue(e)},selectItemByValue:function(i){this.model.loadOnDemand&&(t.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList();var s;if(this.listitems=this._getLi(),this.inputSearch&&""!=this.inputSearch.val()&&this.model.enableServerFiltering&&!t.isNullOrUndefined(this._searchresult)){var a=this.model.fields&&this.model.fields.value?this.model.fields.value:"value";for(s=0;s<this._searchresult.length;s++)for(var r=0;r<this.listitems.length;r++)e(this.listitems[r]).attr("data-value")==this._searchresult[s][a]&&(this._searchresult=null);this.addItem(this._searchresult)}t.isNullOrUndefined(i)?this._clearTextboxValue():this._selectUnSelectValue(i,"selectValue")},_selectUnSelectValue:function(i,s,a){for(var r=this._toArray(i,!0),n=0;n<r.length;n++)for(var o=0;o<this.listitems.length;o++)if(e(this.listitems[o]).hasClass("e-disable")||"selectValue"!=s&&"selectText"!=s){if(this._getAttributeValue(this.listitems[o])&&("unselectValue"==s&&(this._selectedValue=this._getAttributeValue(this.listitems[o]),this._selectedValue=this._selectedValue==r[n]),"unselectText"==s&&(this.unselectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[o]:this._getField(this.popupListItems[o],this.mapFld._text),this._selectedValue=this.unselectedTextValue==r[n]||a&&this.unselectedTextValue.toString().toLowerCase()==r[n].toString().toLowerCase()),this._selectedValue)){this._activeItem=o,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue();break}}else{if("selectValue"==s){var l=t.isNullOrUndefined(this._getAttributeValue(this.listitems[o]))?e(this.listitems[o]).text():this._getAttributeValue(this.listitems[o]);this._selectedValue=l==r[n]}if("selectText"==s&&(this.selectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[o]:this._getField(this.popupListItems[o],this.mapFld._text),this._selectedValue=this.selectedTextValue==r[n]||a&&this.selectedTextValue.toString().toLowerCase()==r[n].toString().toLowerCase()),this._selectedValue){this._activeItem=o,this._aselectedItem=this._activeItem,this._enterTextBoxValue();break}}},unselectItemByValue:function(e){this.model.loadOnDemand&&(t.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList();this.listitems=this._getLi(),this._selectUnSelectValue(e,"unselectValue")},setSelectedText:function(e){this.selectItemByText(e)},selectItemByText:function(e,i){this.model.loadOnDemand&&(t.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList();this.listitems=this._getLi(),this._mapFields(),t.isNullOrUndefined(e)?this._clearTextboxValue():this._selectUnSelectValue(e,"selectText",i)},unselectItemByText:function(e,t){this.listitems=this._getLi(),this._mapFields(),this._selectUnSelectValue(e,"unselectText",t)},getSelectedValue:function(){return this.element.val()},getSelectedItem:function(){var e,t=[];for(this.listitems=this._getLi(),e=0;e<this._selectedIndices.length;e++)t.push(this.listitems[this._selectedIndices[e]]);return t},getItemDataByValue:function(e){var i,s,a=this._toArray(e,!1),r=t.isNullOrUndefined(this.resultList)?this._rawList:this._rawList.concat(this.resultList),n=[],o=this.model.fields&&this.model.fields.value?this.model.fields.value:"value";if(a.length>0&&(r.indexOf(a[0])>-1||r.indexOf(Number(a[0]))>-1))for(i=0;i<a.length&&(r.indexOf(a[i])>-1||r.indexOf(Number(a[i]))>-1);i++)n.push({text:a[i],value:a[i]});else{if(r.length>0&&t.isNullOrUndefined(r[0][o])){var l=this.model.fields&&this.model.fields.text?this.model.fields.text:"text";t.isNullOrUndefined(r[0][l])||(o=l)}for(i=0;i<a.length;i++)for(s=0;s<r.length;s++)r[s][o]!=a[i]&&r[s][o]!=Number(a[i])||n.push(r[s])}return n},getListData:function(){return this._rawList},getSelectedItemsID:function(){return this._selectedItemsID},disableItemsByIndices:function(e){this._getLi().length>0&&this._disableItemByIndex(e)},disableItemByIndex:function(e){this._getLi().length>0&&this._disableItemByIndex(e,!0)},_disableItemByIndex:function(i,s){if(this._isInteralCall||(this._initDisabledItems=s?this._initDisabledItems.push(i):i),!this.model.enabled)return!1;this.model.loadOnDemand&&(t.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList();for(var a=this._toArray(i,!1),r=0;r<a.length;r++)null==a[r]||isNaN(parseInt(a[r]))||a.length>0&&!(e.inArray(parseInt(a[r]),this._disabledItems)>-1)&&(e.inArray(a[r],this._disabledItems),this._setClass(this._getLi()[parseInt(a[r])],"e-disable"),this._disabledItems.push(parseInt(a[r])),this.model.disableItemsByIndex=String(this._disabledItems.join(",")));this._prevDisabledItems=this._disabledItems},enableItemsByIndices:function(e){this._enableItemByIndex(e)},enableItemByIndex:function(e){this._enableItemByIndex(e)},_enableItemByIndex:function(i){this.model.loadOnDemand&&(t.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList();var s,a=this._toArray(i,!1);this.model.enableItemsByIndex=i;for(var r=0;r<a.length;r++)a.length>0&&e.inArray(parseInt(a[r]),this._disabledItems)>-1&&!isNaN(parseInt(a[r]))&&(s=e.inArray(parseInt(a[r]),this._disabledItems),this._removeClass(this._getLi()[parseInt(a[r])],"e-disable"),this._disabledItems.splice(s,1));this.model.enableItemsByIndex=null,this.model.disableItemsByIndex=this._disabledItems.join(this.model.delimiterChar)},_validateDelimiter:function(e){if(1==this._trim(e).length){if(!/^[a-zA-Z0-9]+$/.test(e))return e}return","},_removeText:function(i){this.removeVal=!this.checkChange||!this.model.fields.text&&!this.model.fields.value;var s=this._getUpdatedListData(this.element[0].value,!0);this.removeVal=this.checkChange&&(this.model.fields.text||this.model.fields.value);var a=this._getUpdatedListData(this._visibleInput[0].value,!1),r=this.getItemDataByValue(i)[0],n=this.model.fields&&this.model.fields.text?this.model.fields.text:"text";e.inArray(i,s)>=0&&s.splice(e.inArray(i,s),1),!t.isNullOrUndefined(r[n])&&e.inArray(this._decode(r[n]).toString(),a)>=0&&a.splice(e.inArray(this._decode(r[n]).toString(),a),1),e.inArray(i,this._valueContainer)>=0&&this._valueContainer.splice(e.inArray(i,this._valueContainer),1),!t.isNullOrUndefined(r[n])&&e.inArray(r[n].toString(),this._textContainer)>=0&&this._textContainer.splice(e.inArray(r[n].toString(),this._textContainer),1),this.element[0].value=s.join(this.model.delimiterChar),this._visibleInput[0].value=a.join(this.model.delimiterChar),this.removeVal=!1},_getUpdatedListData:function(e,t){var i;i=t?e.split(this.model.delimiterChar):e;var s,a,r=this.getListData(),n=0,o=0,l=[],d=[],h="";for((this.model.fields.value||this.model.fields.text)&&(s=this.model.fields.text,this.removeVal||(s=this.model.fields.value?this.model.fields.value:s));n<r.length;){if(h=s?this._decode(r[n][s]):this._decode(r[n].text?r[n].text:r[n]),-1!==i.indexOf(h))t?i[i.indexOf(h)]=o:i=i.replace(h,o),l.push(h),o++;else if(!t&&""===i)break;n++}for(t||(i=i.split(this.model.delimiterChar)),n=0;n<o;)t?d[i.indexOf(n)]=l[n]:(a=i.indexOf(""+n),d[a]=l[n]),n++;return d},_addText:function(t){if(this._checkContains(this._hiddenValue))return!1;for(var i,s=["element","_visibleInput"],a=0;a<s.length;a++){i="element"==s[a]?this._hiddenValue:t;var r="element"==s[a]?this._valueContainer:this._textContainer;if(this[s[a]][0].value&&""!=this[s[a]][0].value){var n=this[s[a]][0].value.split(this.model.delimiterChar);"element"==s[a]&&-1===e.inArray(i,n)?n.push(i):"_visibleInput"==s[a]&&n.push(i),this[s[a]][0].value=n.join(this.model.delimiterChar)}else if(""==i)this[s[a]][0].value=i;else if(""!=i&&""==this[s[a]][0].value)if(-1!=e.inArray("",r)){var n=this[s[a]][0].value.split(this.model.delimiterChar);n.push(i),this[s[a]][0].value=n.join(this.model.delimiterChar)}else this[s[a]][0].value=i;r.push(i)}},_checkContains:function(e){if(this.contains=!1,void 0!==this._rawList&&(null!==this.model.dataSource||void 0!==this.selectOptions||null!==this.model.targetID))for(var t=0;t<this._valueContainer.length;t++)if(this._parseValue(this._valueContainer[t])===this._parseValue(e)){this.contains=!0;break}return this.contains},_parseValue:function(e){return isNaN(parseInt(e))||this.mapFld&&"string"==typeof this._rawList[0][this.mapFld._value]?e:parseInt(e)},_updateLocalConstant:function(){this._localizedLabels=t.getLocalizedConstants("ej.DropDownList",this.model.locale)},_init:function(){var i=t.browserInfo();this._updateLocalConstant(),this._isIE8="msie"==i.name&&"8.0"==i.version,this._textContent=this._isIE8?"innerText":"textContent",(this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))||this.element.is("select"))&&(this._isWatermark="placeholder"in e(document.createElement("input")).attr("placeholder","")[0],this._id=this.element[0].id,this._initialize(),this._render(),this._addAttr(this.model.htmlAttributes),this._enabled(this.model.enabled),this._initValue=!1,this._checkboxValue=!1,null!=this.model.validationRules&&(this._initValidator(),this._setValidation()))},_initValidator:function(){!this.element.closest("form").data("validator")&&this.element.closest("form").validate()},_setValidation:function(){if(0!=this.element.closest("form").length){this.element.rules("add",this.model.validationRules);var i=this.element.closest("form").data("validator");i||(i=this.element.closest("form").validate());var s=this.element.attr("name");i.settings.messages[s]={};for(var a in this.model.validationRules){var r=null;if(!t.isNullOrUndefined(this.model.validationRules[a])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[a])){i.settings.messages[s][a]=e.validator.messages[a];for(var n in this.model.validationMessage)a==n&&(r=this.model.validationMessage[a])}else r=this.model.validationRules.messages[a];i.settings.messages[s][a]=null!=r?r:e.validator.messages[a]}}}},_setInitialPopup:function(e){this.model.enabled&&!this.model.readOnly&&(0==e?this._hideResult():this._showResult())},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),t.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.removeClass(this.model.cssClass).addClass(e)},_setRTL:function(e){this.model.enableRTL!=e&&(this.model.enableRTL=e,this._RightToLeft(),t.isNullOrUndefined(this.popupListWrapper)||this._dropbtnRTL())},_changeHeight:function(e){this.wrapper.height(e),this._setListHeight()},_changeWidth:function(e){this.wrapper.width(e),this._setListWidth()},_setModel:function(i){var s;for(s in i)switch(s){case"dataSource":this._isEqualDataSource(t.util.getVal(i[s]))||this._checkModelDataBinding(t.util.getVal(i[s]),this.model.query),this._refreshScroller();break;case"query":this._checkModelDataBinding(this._dataSource(),i[s]);break;case"fields":this.model.fields=e.extend(this.model.fields,i[s]),this._checkModelDataBinding(this._dataSource(),this.model.query);break;case"itemsCount":this.model.itemsCount=i[s],this._checkModelDataBinding(this._dataSource(),this.model.query);break;case"template":this.model.template=i[s],this._checkModelDataBinding(this._dataSource(),this.model.query);break;case"value":var a=t.util.getVal(i[s]);(t.isNullOrUndefined(a)||""===a)&&this._clearTextboxValue(),t.isNullOrUndefined(a)||""===a?this._clearTextboxValue():(this._setValue(t.util.getVal(i[s])),i[s]=this.model.value);break;case"incrementalSearchDelay":this.model.incrementalSearchDelay=i[s];break;case"delimiterChar":var r=this.model.delimiterChar;i[s]=this._validateDelimiter(i[s]),this.model.delimiterChar=i[s],this._isSingleSelect()||(this.model.text&&(this.model.text=this.model.text.split(r).join(this.model.delimiterChar),this._visibleInput.val(this.model.text)),t.isNullOrUndefined(this.value())||(this.value(this.value().split(r).join(this.model.delimiterChar)),this.element.val(this.value())));break;case"text":t.isNullOrUndefined(i[s])||""===i[s]?this._clearTextboxValue():(this._setText(i[s]),i[s]=this.model.text);break;case"itemValue":this._setItemValue(i[s]);break;case"enableRTL":this._setRTL(i[s]);break;case"enabled":this._enabled(i[s]);break;case"height":this._changeHeight(i[s]);break;case"width":this._changeWidth(i[s]);break;case"popupHeight":this.model.popupHeight=i[s],this._setListHeight(i[s]);break;case"popupWidth":this.model.popupWidth=i[s],this._setListWidth();break;case"minPopupHeight":this.model.minPopupHeight=i[s],this._setListHeight(i[s]);break;case"minPopupWidth":this.model.minPopupWidth=i[s],this._setListWidth();break;case"maxPopupHeight":this.model.maxPopupHeight=i[s],this._setListHeight(i[s]);break;case"maxPopupWidth":this.model.maxPopupWidth=i[s],this._setListWidth();break;case"cssClass":this._changeSkin(i[s]);break;case"showCheckbox":this.model.showCheckbox=i[s];var n=this.model.text,o=this.model.text?this.model.text.split(this.model.delimiterChar):this.model.text;this._raiseEvents=!1,this._clearTextboxValue(),this._raiseEvents=!0,this._checkboxHideShow(i[s]),this.model.showCheckbox||"none"!=this.model.multiSelectMode?("visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),this._setText(n)):o&&o.length&&this._setText(o[0]),this._isPopupShown()&&this._setListPosition();break;case"checkAll":return this._setCheckAll(i[s]),!1;case"uncheckAll":return this._setUncheckAll(i[s]),!1;case"watermarkText":this._changeWatermark(i[s]);break;case"validationRules":0!=this.element.closest("form").length&&(null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation()));break;case"locale":this.model.locale=i[s],this._updateLocalConstant();break;case"validationMessage":0!=this.element.closest("form").length&&(this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation()));break;case"showRoundedCorner":this._roundedCorner(i[s]),this.model.showRoundedCorner=i[s];break;case"showPopupOnLoad":this._setInitialPopup(i[s]);break;case"targetID":this.model.targetID=i[s],this._showFullList();break;case"selectedItemIndex":case"selectedIndex":this._selectItemByIndex(i[s]),this.model.selectedItemIndex=this.model.selectedIndex=i[s];break;case"unselectItemByIndex":this._unselectItemByIndex(i[s]);break;case"disableItemsByIndex":this._disableItemByIndex(i[s]);break;case"enableItemsByIndex":this._enableItemByIndex(i[s]);break;case"selectedItems":case"selectedIndices":this._selectCheckedItem(i[s]),i[s]=this.model.selectedItems=this.model.selectedIndices=this._selectedIndices;break;case"multiSelectMode":"visualmode"==this.model.multiSelectMode&&(this._swapUlandInput(!1),this._ulBox.remove(),this._ulBox=null),this.model.multiSelectMode=i[s];var n=this.model.text,o=this.model.text?this.model.text.split(this.model.delimiterChar):this.model.text;this._raiseEvents=!1,this._clearTextboxValue(),this._raiseEvents=!0,this.model.showCheckbox||"none"!=this.model.multiSelectMode?("visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),this._setText(n)):(this._setText(o[0]),this.wrapper.find("input[name="+this._name+"]").remove()),this._isPopupShown()&&this._setListPosition();break;case"allowGrouping":this._setGroupingAndSorting("allowGrouping",i[s]);break;case"enableSorting":this._setGroupingAndSorting("enableSorting",i[s]);break;case"htmlAttributes":this._addAttr(i[s]);break;case"enablePopupResize":this.model.enablePopupResize=i[s],i[s]?this._enablePopupResize():this.popupListWrapper.removeClass("e-resizable").find(".e-resizebar").remove()&&this._hideResult();break;case"enableFilterSearch":if(i[s]){this.model.enableFilterSearch=!0,this._enableSearch();break}this._removeSearch();case"enableServerFiltering":this._enableSearch()}},_clearTextboxValue:function(){this.element.val(""),this._visibleInput.val(""),this._updateValue(""),this._valueContainer=[],this._textContainer=[],this.selectedTextValue=this._selectedValue=this._hiddenValue=this.model.itemValue="",this._updateText(),this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1,this._selectedItemsID=[],this._selectedIndices=[],this.model.selectedItems=[],this.model.selectedIndices=[],this.selectedIndex(null),t.isNullOrUndefined(this.ultag)||(this.ultag.children("li").removeClass("e-hover").removeClass("e-active"),this.model.showCheckbox&&this._resetCheck()),0!=this.wrapper.find("ul.e-ul.e-boxes").length&&(this._ulBox.children("li").remove(),""===this._name?this.wrapper.find("input:hidden[id^='#']").remove():this.wrapper.find("input:hidden[id^='#'][name="+this._name+"]").remove(),e(this.element).attr("name",this._name))},_destroy:function(){this.selectOptions?(!this._dataSource()&&this.docbdy?this.docbdy.append(this.selectOptions.removeClass("e-dropdownlist e-js").show()).show():this.selectOptions.insertAfter(this.wrapper).removeClass("e-dropdownlist e-js").show(),this.element.remove()):(this.element.insertAfter(this.wrapper),this.element.width(this.element.width()+this.dropdownbutton.outerWidth()),this._visibleInput.removeClass("e-input "),this._setAttr(this.element[0],{accesskey:this.wrapper.attr("accesskey"),type:"text"}),this._isWatermark&&this._visibleInput.removeAttr("placeholder"),this.element[0].value="",this.element.removeAttr("aria-expanded aria-autocomplete aria-haspopup aria-owns accesskey role").css({width:"",display:"block"}),!this._dataSource()&&this.docbdy&&this.ultag.find("li").removeClass("e-active")&&this.docbdy.append(this.ultag.html()).show()),this.wrapper.remove(),this.container.off("mousedown",e.proxy(this._OnDropdownClick,this)),this._hideResult(),this.popupPanelWrapper.remove(),this._unwireEvents()},_finalize:function(){""==this.value()&&""!==this._visibleInput[0].value&&this._updateValue(this.element[0].value),(!t.isNullOrUndefined(this.value())&&""==this.value()||this.value()!==this.element.val())&&this._setValue(this.value()),(!t.isNullOrUndefined(this.model.text)&&""==this.model.text||this.model.text!=this._visibleInput.val())&&this._setText(this.model.text),this.selectedIndex(-1!=this.selectedIndex()?this.selectedIndex():this.selectedItemIndex()),-1!=this.selectedIndex()?this._selectItemByIndex(this.selectedIndex()):this._selectedIndices.length>0&&this._selectCheckedItem(this._selectedIndices),null!=this.model.disableItemsByIndex&&this._disableItemByIndex(this.model.disableItemsByIndex),null!=this.model.enableItemsByIndex&&this._enableItemByIndex(this.model.enableItemsByIndex)},_initialize:function(){this._selectedIndices=this.model.selectedIndices.length>0?this.model.selectedIndices:this.model.selectedItems,this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,this.model.selectedIndex=-1!=this.model.selectedIndex?this.model.selectedIndex:this.model.selectedItemIndex,this.element.is("select")&&(this.selectelement=!0,this._renderSelectToDropdown()),this._initDisabledItems=[],this._isInteralCall=!1,this._prevSearchValue="",this._selectedItemsID=[],this._hiddenInputElement=[],this._valueContainer=[],this._textContainer=[],this.target=this.element[0],this._disabledItems=new Array,this._queryString=null,this.suggLen=0,this._itemId=null,this.checkedStatus=!1,this._incqueryString="",this._activeItem=null,this.ddWidth=0,this._initValue=!0,this._virtualCount=0,this._raiseEvents=!0,this.popUpShow=!1,this._matchedListItems=[],this._prevQueryString=""},_renderSelectToDropdown:function(){var i,s,a,r;if(this.inputElement=t.buildTag("input.e-dropdownlist#"+this._id+"_input","",{},{type:"text","data-role":"none"}),this.inputElement.insertAfter(this.element),this.element.attr("name")&&(this.inputElement.attr("name",this.element.attr("name")),this.element.removeAttr("name")),this.selectOptions=this.element,this.selectOptions.attr("id",this._id),null==this._dataSource()){for(this.optionDiv=t.buildTag("div#"+this._id+"_list"),this.optionDiv.insertAfter(this.inputElement),this.optionUl=t.buildTag("ul"),this.optionDiv.append(this.optionUl),this.selectOptionItems=this.element.children("option"),s=this.selectOptionItems.length,this.optionDummyUl=e(),i=0;i<s;i++)r=this.selectOptionItems[i],a=e(r).attr("label")?e(r).attr("label"):r.innerHTML,null!=a&&(this.optionLi=t.buildTag("li",a,{},{"data-value":r.value,unselectable:"on"}),this.optionDummyUl.push(this.optionLi[0]),e(r).attr("selected")&&this.model.showCheckbox&&(-1==e.inArray(i,this._selectedIndices)?(this._selectedIndices.push(i),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices):t.isNullOrUndefined(this.selectedIndex())&&this.selectedIndex(i)));this.optionUl.append(this.optionDummyUl)}this.element.css("display","none"),this.element=this.inputElement},_render:function(){if(this._renderDropdown(),this._setWatermark(),this.model.loadOnDemand&&(!this._dataSource()||0!==this._dataSource().length&&this._dataSource().length<1)){var i=this.element.parents().last();this.docbdy=this.model.targetID?i.find("#"+this.model.targetID):this.optionDiv?this.optionDiv:null,this.itemsContainer="UL"==this.docbdy[0].nodeName?this.docbdy:this.docbdy.children("ol,ul"),this.itemsContainer.css("display","none")}this.model.loadOnDemand||(this._renderPopupPanelWrapper(),this._showFullList()),this._roundedCorner(this.model.showRoundedCorner);var s=this._dataSource();if(t.DataManager&&s instanceof t.DataManager){if(s.dataSource.offline&&s.dataSource.json&&s.dataSource.json.length>0){var a=this;a._finalize()}}else this._finalize();t.DataManager&&this._dataSource()instanceof t.DataManager||this._finalize(),this.model.loadOnDemand&&t.DataManager&&this._dataSource()instanceof t.DataManager&&!this._dataSource().dataSource.offline&&this._finalize(),this._setCheckAll(this.model.checkAll),(this.element.attr("disabled")||e(this.selectOptions).attr("disabled"))&&this.disable(),this.model.loadOnDemand&&this.model.showPopupOnLoad&&this._showResult()},_isEqualDataSource:function(e){if(!this._dataSource()||!e||this._rawList&&this._rawList.length!==e.length||t.DataManager&&e instanceof t.DataManager)return!1;if(t.isNullOrUndefined(this._rawList)||0===this._dataSource().length)return!1;for(var i=!0,s=0,a=this._dataSource().length;s<a;s++)if(this._dataSource()[s]!==e[s]){i=!1;break}return i},_checkModelDataBinding:function(e,i){this.element.val(""),this._visibleInput.val(""),null!==this.value()&&""!==this.value()&&this._updateValue(""),this.selectedTextValue=this._selectedValue=this._hiddenValue="",this._updateText(),this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1,this._selectedItemsID=[],this._textContainer=[],this._valueContainer=[],t.isNullOrUndefined(e)&&t.isNullOrUndefined(this.model.query)&&t.isNullOrUndefined(this.model.template)&&0==this.model.itemsCount&&(this._rawList=[],this.popupListItems=[],this.listitems=[],this.ultag=this.popupListWrapper.find(".e-ul")),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices=[],this.model.selectedIndex=this.model.selectedItemIndex=-1,"visualmode"==this.model.multiSelectMode&&this._destroyBoxModel(),JSON.stringify(this._dataSource())!=JSON.stringify(e)&&this._dataSource(e),this.model.query=i,!t.isNullOrUndefined(this.ultag)&&this.ultag.empty(),this._showFullList()},_initDataSource:function(e){var i=this;if(t.DataManager&&e instanceof t.DataManager&&(i._addLoadingClass(),!i._trigger("actionBegin",{requestFrom:"default"}))){e.executeQuery(this._getQuery()).done(function(e){i._trigger("actionSuccess",{e:e,requestFrom:"default"}),i._totalCount=e.count,i._listItem(e.result),i._removeLoadingClass(),i._renderPopupList(),i._finalize()}).fail(function(e){i._dataSource(null),i._addLoadingClass(),i._trigger("actionFailure",{e:e,requestFrom:"default"})}).always(function(e){i._trigger("actionComplete",{e:e,requestFrom:"default"})})}},_listItem:function(t,i){"add"==i?(this.popupListItems.push(t),this._rawList.push(t)):e.isArray(t)&&(this.popupListItems=t.slice(0),this._rawList=t.slice(0))},_getQuery:function(e){var i,s=this.model.fields,a=t.Query();if(!t.isNullOrUndefined(this.model.query)||this.model.template||e)this.model.query&&(a=this.model.query.clone());else{var r=[];for(var n in s)"tableName"!==n&&s[n]&&r.push(s[n]);r.length>0&&a.select(r)}return this.model.allowVirtualScrolling&&a.requiresCount(),this.model.itemsCount>0&&a.take(this.model.itemsCount),i=this._dataSource().dataSource,s&&(i&&i.url&&!i.url.match(s.tableName+"$")||i&&!i.url||!i)&&!t.isNullOrUndefined(s.tableName)&&a.from(s.tableName),a},_addLoadingClass:function(){this._isPopupShown()?this.popupListWrapper.addClass("e-load"):(this.dropdownbutton.addClass("e-load"),this.drpbtnspan.removeClass("e-icon e-arrow-sans-down")),this._readOnly=!0},_removeLoadingClass:function(){this.dropdownbutton.removeClass("e-load"),this.drpbtnspan.addClass("e-icon e-arrow-sans-down"),this._readOnly=!1,
t.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.removeClass("e-load")},_renderDropdown:function(){if(this.wrapper=t.buildTag("span.e-ddl e-widget "+this.model.cssClass+"#"+this._id+"_wrapper","",{},{tabindex:"0",accesskey:this.element.attr("accesskey")}),this.container=t.buildTag("span.e-in-wrap e-box #"+this._id+"_container"),this.element.removeAttr("accesskey"),null==this.model.value&&null!=this.element.attr("value")&&(this.model.value=this.element.attr("value")),this.element.attr("value","").val(""),this._isIE8?this._setAttr(this.element[0],{role:"combobox","aria-expanded":!1,"aria-autocomplete":"list","aria-haspopup":!0,"aria-owns":this._id+"_popup"}).element.hide():this._setAttr(this.element[0],{type:"hidden",role:"combobox","aria-expanded":!1,"aria-autocomplete":"list","aria-haspopup":!0,"aria-owns":this._id+"_popup"}).element.hide(),this.drpbtnspan=t.buildTag("span.e-icon e-arrow-sans-down","",{},{"aria-label":"select",unselectable:"on"}),this.dropdownbutton=t.buildTag("span.e-select#"+this._id+"_dropdown","",{},{role:"button",unselectable:"on"}).append(this.drpbtnspan),this.container.insertAfter(this.element),this.container.append(this.element),this.container.append(this.dropdownbutton),this.wrapper.insertBefore(this.container),this.wrapper.append(this.container),this.selectelement&&this.selectOptions.insertBefore(this.element),this._visibleInput=t.buildTag("input#"+this._id+"_hidden","",{}).insertAfter(this.element),this._visibleInput.addClass("e-input "),this._setAttr(this._visibleInput[0],{readonly:"readonly",tabindex:-1,"data-role":"none"}),!this._isWatermark){var i=null!=this.model.watermarkText?this.model.watermarkText:this._localizedLabels.watermarkText;this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(i),this._hiddenSpan.css("display","none"),this._hiddenSpan.on("mousedown",e.proxy(this._OnDropdownClick,this))}this._checkNameAttr(),this._setDimentions(),this._RightToLeft(),this.ddWidth=this.dropdownbutton.outerWidth()>0?this.dropdownbutton.outerWidth():24,this.container.on("mousedown",e.proxy(this._OnDropdownClick,this))},_checkNameAttr:function(){this._name=t.isNullOrUndefined(this.element.attr("name"))?this._id:this.element.attr("name"),this.element.attr("name",this._name)},_addAttr:function(i){var s=this;e.map(i,function(i,a){var r=a.toLowerCase();"class"==r?s.wrapper.addClass(i):"disabled"==r&&"disabled"==i?s.disable():"readOnly"==r&&"readOnly"==i?s.model.readOnly=!0:"style"==r?s.wrapper.attr(a,i):"name"==r?e(s.element).attr(a,i):t.isValidAttr(s._visibleInput[0],a)?e(s._visibleInput).attr(a,i):s.wrapper.attr(a,i)})},_renderBoxModel:function(){if(!t.isNullOrUndefined(this._ulBox)||"visualmode"!=this.model.multiSelectMode)return!1;this._ulBox=t.buildTag("ul.e-ul e-boxes"),this.container.prepend(this._ulBox),this._ulBox.css("min-height","30px"),this._ulBox.css("display","none"),this._on(this.container,"click",function(t){if(!this.model.enabled)return!1;var i=e(t.target);i.hasClass("e-options")&&(!t.ctrlKey&&i.siblings().hasClass("e-active")&&this._removeActive(),i.hasClass("e-active")?i.removeClass("e-active"):i.addClass("e-active")),!t.ctrlKey&&i.hasClass("e-boxes")&&this._removeActive()})},_renderPopupPanelWrapper:function(){var i=e("#"+this.element[0].id+"_popup_wrapper").get(0);i&&e(i).remove(),this.popupPanelWrapper=t.buildTag("div#"+this._id+"_popup_wrapper"),e("body").append(this.popupPanelWrapper),this.popupListWrapper=t.buildTag("div.e-ddl-popup e-box e-widget  e-popup#"+this._id+"_popup_list_wrapper","",{display:"none",overflow:"hidden"}),this.popupList=t.buildTag("div#"+this._id+"_popup",{tabIndex:0}),this.popupListWrapper.addClass(this.model.cssClass),this.popup=this.popupList,this.popupScroller=t.buildTag("div"),t.isNullOrUndefined(this.ultag)&&(this.ultag=t.buildTag("ul.e-ul","",{},{role:"listbox"})),this.popupScroller.append(this.ultag),this.popupList.append(this.popupScroller),this.model.headerTemplate&&(this.headerTemplate=e("<div>").append(this.model.headerTemplate),this.popupListWrapper.append(this.headerTemplate)),this.popupListWrapper.append(this.popupList),this.popupPanelWrapper.append(this.popupListWrapper),this.ultag.on({mouseenter:e.proxy(this._OnMouseEnter,this),mouseleave:e.proxy(this._OnMouseLeave,this),click:e.proxy(this._OnMouseClick,this)},"li:not('.e-category')"),t.isTouchDevice()&&this.ultag.on({tap:e.proxy(this._OnMouseEnter,this)},"li:not('.e-category')"),e(window).on("resize",e.proxy(this._OnWindowResize,this))},_updateText:function(){var e=this._visibleInput.val();this.model.text=""==e?0==this._textContainer.length?null:"":e},_updateValue:function(e){this.value(""==e?0==this._valueContainer.length?null:"":e)},_setGroupingAndSorting:function(e,t){this.model[e]=t;var i=this.model.text;if(this._updateValue(""),this._selectedIndices=[],this.ultag.empty(),this._showFullList(),this.model.showCheckbox&&i)for(var s=i.split(this.model.delimiterChar),a=0;a<s.length;a++)this.selectItemByText(s[a]);else this.selectItemByText(i)},_setSortingList:function(){var t,i,s=document.createElement("ul");if(e(s).append(this.itemsContainer.children()),this.model.allowGrouping||e(s).find(">.e-category").length>0)for(this.popupListWrapper.addClass("e-atc-popup"),t=0;t<e(s).find(">.e-category").length;t++)i=e(s).find(">.e-category").eq(0).first().nextUntil(".e-category").get(),this._setSortList(s,i);else e(s).children(">.e-category").remove(),i=e(s).children("li").get(),this._setSortList(s,i);this.itemsContainer=e(s)},_setSortList:function(t,i){i.sort(function(t,i){var s=e(t).text().toUpperCase(),a=e(i).text().toUpperCase();return s<a?-1:s>a?1:0}),"descending"==this.model.sortOrder&&i.reverse(),(this.model.allowGrouping||e(t).find(">.e-category").length>0)&&(e(t).append(e("<li>").text(e(t).find(">.e-category").eq(0).text()).addClass("e-category")),e(t).find(">.e-category").eq(0).remove()),e.each(i,function(i,s){e(t).append(s)})},_renderPopupList:function(){this._doDataBind(),this.model.loadOnDemand&&t.DataManager&&this._dataSource()instanceof t.DataManager&&!this._dataSource().dataSource.offline&&this.model.showCheckbox&&this._checkboxHideShow(this.model.showCheckbox),(t.isNullOrUndefined(this.scrollerObj)||null==this._ulBox)&&this._renderRemaining(),this.model.loadOnDemand&&this.popUpShow&&t.DataManager&&this._dataSource()instanceof t.DataManager&&!this._dataSource().dataSource.offline&&(this._refreshPopup(),this._refreshScroller())},_renderRemaining:function(){var i=this;t.isNullOrUndefined(this.popupListWrapper)||this._dropbtnRTL(),this.model.enableFilterSearch&&this._enableSearch(),this.model.enablePopupResize&&this._enablePopupResize(),this.model.allowVirtualScrolling&&"normal"==this.model.virtualScrollMode&&this._totalCount&&this._totalCount>0&&(this._totalHeight=29*this._totalCount,this._totalPages=this._totalCount/(29*this.model.itemsCount),this._loadedItemHeight=29*this._getLi().length,this._getLi().attr("page",0),this._virtualPages=[0],this.ultag.append(e("<span>").addClass("e-virtual").css({height:this._totalHeight-this._loadedItemHeight,display:"block"}))),this._virtualUl=this.ultag.clone(!0),t.isNullOrUndefined(this.popupListWrapper)||(this._setListWidth(),this._setListHeight()),this._isSingleSelect()||(this.model.showCheckbox?this._checkboxHideShow(this.model.showCheckbox):this._multiItemSelection(this._getLi())),this._setUncheckAll(this.model.uncheckAll),t.isNullOrUndefined(this.popupListWrapper)||(this.popupScroller.css({height:"",width:""}),this.popupList.ejScroller({height:this._getPopupHeight(),width:0,scrollerSize:20,scroll:function(e){i.model.allowVirtualScrolling&&i._onScroll(e)},preventDefault:!0}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.find("div.e-scrollbar div").attr("unselectable","on"),this._setListPosition(),!this.popUpShow&&this.popupListWrapper.css({display:"none",visibility:"visible"}),this._changeSkin(this.model.cssClass)),this.model.loadOnDemand||this.model.showPopupOnLoad&&this._showResult()},_enableSearch:function(){if(this.model.enableFilterSearch&&!t.isNullOrUndefined(this.popupListWrapper)&&!this.inputSearch){this.inputSearch=t.buildTag("input#"+this._id+"_inputSearch.e-input","",{},{type:"text","data-role":"none"}),this.popupListWrapper.prepend(e("<span>").addClass("e-atc e-search").append(e("<span>").addClass("e-in-wrap ").append(this.inputSearch).append(e("<span>").addClass(" e-icon e-search"))));var i=this.model.enableServerFiltering?this._debounce(this._OnSearchEnter,200):this._OnSearchEnter;this._on(this.inputSearch,"keyup",i)._on(this.inputSearch,"keydown",function(e){9==(e.keyCode||e.which)&&(e.preventDefault(),this.wrapper.focus(),this._hideResult())})}},_removeSearch:function(){this.model.enableFilterSearch=!1,this.popupListWrapper.find(".e-atc.e-search").remove(),this._isPopupShown()&&this.hidePopup(),this.inputSearch=null},_OnSearchEnter:function(i){if(""==this._prevSearchValue||this._prevSearchValue!=this.inputSearch.val()){this._prevSearchValue=this.inputSearch.val(),8==i.keyCode&&this.model.enableFilterSearch&&(this._disabledItems=this._initDisabledItems,this._prevDisabledItems=this._disabledItems);var s=this;if(-1!=e.inArray(i.keyCode,[38,40,13])&&this.ultag.find("li.e-nosuggestion").length<=0)13==i.keyCode?this._OnKeyUp(i):this._OnKeyDown(i);else if(this._activeItem=-1,this._queryString=this.inputSearch.val(),""==this._queryString&&this._virtualUl){var a={searchString:this._queryString,searchQuery:null,items:this._rawList};this._trigger("search",a),this._resetList(),this._updateSelectedIndexByValue(this.value()),this._refreshScroller(),this._setListPosition(),this._prevDisabledItems&&this._prevDisabledItems.length>0&&(this._disabledItems=[],this._isInteralCall=!0,this.disableItemsByIndices(this._prevDisabledItems),this._isInteralCall=!1,this._prevDisabledItems=this._disabledItems)}else{this._mapFields();var r=this._addSearchQuery(t.Query(),!this._isPlainType(this._rawList)),a={searchString:this._queryString,items:this._rawList,searchQuery:r};this.popupListWrapper.find(".e-atc.e-search .e-search").addClass("e-cross-circle").removeClass("e-search"),this._on(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch),this._trigger("search",a)||s._onActionComplete(a)}}},_debounce:function(e,t){var i,s=this;return function(){var a=arguments,r=function(){return i=null,e.apply(s,a)};clearTimeout(i),i=setTimeout(r,t)}},_onActionComplete:function(e){var i=this;this._queryString=this.inputSearch.val();var s=this._addSearchQuery(t.Query(),!this._isPlainType(this._rawList)),e={searchString:this._queryString,items:this._rawList,searchQuery:s};if(t.DataManager&&this._dataSource()instanceof t.DataManager&&this.model.enableServerFiltering&&("Caret"==window.getSelection().type||"msie"==t.browserInfo().name)){var s=e.searchQuery.clone();i._dataSource().executeQuery(s).done(function(t){i._filterSearch(e.searchQuery,t)})}else i._filterSearch(s,e)},_refreshSearch:function(){this._resetSearch(),this._refreshPopup(),this._initDisabledItems.length>0&&(this._disabledItems=[],this.disableItemsByIndices(this._initDisabledItems),this._prevDisabledItems=this._disabledItems)},_filterSearch:function(e,i){var s=!1;this.resultList=i.result?i.result:t.DataManager(this._rawList).executeLocal(e),0==this.resultList.length&&(s=!0,this.resultList.push(this._getLocalizedLabels("emptyResultText")));var a=[];this._initDisabledItems.forEach(function(e){this._rawList.forEach(function(t){this._rawList.indexOf(t)==e&&a.push(t)},this)},this);var r=[];a.length>0&&this.resultList.forEach(function(e){a.indexOf(e)>=0&&r.push(this.resultList.indexOf(e))},this),this.popupListItems=this.resultList,this.ultag.empty(),this._valueContainer=[],this._isPlainType(this.popupListItems)?this._plainArrayTypeBinding(this.resultList):this._objectArrayTypeBinding(this.resultList,"search"),s&&1==this.ultag.find("li").length&&this.ultag.find("li").eq(0).addClass("e-nosuggestion"),this.model.showCheckbox&&!s&&this._appendCheckbox(this._getLi()),this._onSearch=!0;var n=this.value(),o=this._visibleInput[0].value;this._setValue(this.value()),("function"==typeof this.model.value?this.model.value():this.model.value)!=n&&(this.element[0].value=n,this._visibleInput[0].value=o,this.model.text=""==o?null:o,this.value()==n||null==this.value()&&""==n||this._updateValue(n)),this._onSearch=!1,this._updateSelectedIndexByValue(this.value()),this._refreshScroller(),this._setListPosition(),this._prevDisabledItems=this._disabledItems,this._disabledItems=[],r.length>0&&(this._isInteralCall=!0,this.disableItemsByIndices(r),this._isInteralCall=!1)},_updateSelectedIndexByValue:function(e){if(e&&this.model.enableFilterSearch){this._selectedIndices=this.model.selectedItems=this.model.selectedIndices=[],this._virtualList=this._virtualUl.children("li:not('.e-category')");for(var t=this._toArray(e),i=0;i<t.length;i++)for(var s=0;s<this._virtualList.length;s++)if(t[i]==this._getIndexedValue(this._virtualList[s])){this._selectedIndices.push(s);break}this.model.selectedItems=this.model.selectedIndices=this._selectedIndices}},_getIndexedValue:function(e){return this._getAttributeValue(e)?this._getAttributeValue(e):e.innerText},_resetSearch:function(){this.inputSearch&&this.model&&this.model.enableFilterSearch&&""!=this.inputSearch.val()&&this._virtualUl&&(this.inputSearch.val(""),this._resetList())},_resetList:function(){if(1==this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").length&&(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").addClass("e-search").removeClass("e-cross-circle"),this._off(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch)),this.model.enableServerFiltering){for(var e=this.model.fields&&this.model.fields.value?this.model.fields.value:"value",i=0;i<this._rawList.length;i++)this._rawList[i][e]==this._selectedValue&&(this._searchresult=null);t.isNullOrUndefined(this._searchresult)||this.model.allowVirtualScrolling&&"normal"==this.model.virtualScrollMode||this.addItem(this._searchresult)}if(this._listItem(this._rawList),this.model.enableSorting){var s=t.Query().sortBy(this.mapFld._text,this.model.sortOrder,!0);this._rawList=t.DataManager(this._rawList).executeLocal(s),this.popupListItems=this._rawList}this.ultag.empty().append(this._virtualUl.children().clone(!0)),this._onSearch=!0,this._setValue(this.value()),this._onSearch=!1,this._searchresult=[]},_addSearchQuery:function(e,t){var i="";if(t){var s=this.model.fields;i=s&&s.text?s.text:"text"}return this._queryString&&e.where(i,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch),this.model.itemsCount>0&&e.take(this.model.itemsCount),e},_targetElementBinding:function(){var t=this.element.parents().last();if(this.docbdy=this.model.targetID?t.find("#"+this.model.targetID):this.optionDiv?this.optionDiv:null,!this.docbdy)return!1;if(this.itemsContainer="UL"==this.docbdy[0].nodeName?this.docbdy:this.docbdy.children("ol,ul"),(this.model.allowGrouping||this.itemsContainer.find(">.e-category").length>0)&&!this.model.enableSorting){this.popupListWrapper.addClass("e-atc-popup");for(var i=0;i<this.itemsContainer.find(">.e-category").length;i++){var s=this.itemsContainer.find(">.e-category").eq(i);s.replaceWith(e("<li>").text(s.text()).addClass("e-category"))}}else this.model.enableSorting&&this._setSortingList();this.itemsContainer.children("ol,ul").remove(),this.model.loadOnDemand?this.items=this.itemsContainer.children().length>0?this.itemsContainer.children("li"):this.items:this.items=this.itemsContainer.children("li"),this.items.children("img,div").addClass("e-align"),this._listItem([]);for(var a=0;a<this.items.length;a++){var r=e(this.items[a]).text(),n=this._getAttributeValue(this.items[a]);e(this.items[a]).attr("data-value")||e(this.items[a]).attr("data-value",n||r),this._listItem({text:r,value:n||r},"add")}this.model.loadOnDemand?this.ultag.empty().append(this.items):this.ultag.empty().append(this.itemsContainer.children()),this.ultag.children("li").attr("role","option").attr("unselectable","on"),this.docbdy.css({display:"none"}).children("ol,ul").remove()},_plainArrayTypeBinding:function(i){if(this.dummyUl=e(),this.model.enableSorting&&(i.sort(),"descending"==this.model.sortOrder&&i.reverse()),i.length>0){for(var s=0;s<i.length;s++)if(!t.isNullOrUndefined(i[s])){var a=t.buildTag("li",i[s],{},{"data-value":i[s],unselectable:"on"});this.dummyUl.push(a[0])}this.ultag.append(this.dummyUl),this._trigger("dataBound",{data:i})}},_mapFields:function(){this.model.fields.groupBy=this.model.fields.groupBy?this.model.fields.groupBy:this.model.fields.category;var e=this.model.fields;this.mapFld={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null},this.mapFld._id=e&&e.id?e.id:"id",this.mapFld._imageUrl=e&&e.imageUrl?e.imageUrl:"imageUrl",this.mapFld._imageAttributes=e&&e.imageAttributes?e.imageAttributes:"imageAttributes",this.mapFld._spriteCSS=e&&e.spriteCssClass?e.spriteCssClass:"spriteCssClass",this.mapFld._text=e&&e.text?e.text:"text",this.mapFld._value=e&&e.value?e.value:"value",this.mapFld._htmlAttributes=e&&e.htmlAttributes?e.htmlAttributes:"htmlAttributes",this.mapFld._selected=e&&e.selected?e.selected:"selected",this.mapFld._category=e&&e.groupBy?e.groupBy:"groupBy"},_doDataBind:function(){var e=this._dataSource(),t=this.popupListItems;!e||!t||!t.length||t.length<1?this._targetElementBinding():this._isPlainType(t)?this._plainArrayTypeBinding(t):this._objectArrayTypeBinding(t)},_isPlainType:function(e){return"object"!=typeof e[0]},_objectArrayTypeBinding:function(i,s){if(this.dummyUl=e(),this._mapFields(),this.model.enableSorting){var a=t.Query().sortBy(this.mapFld._text,this.model.sortOrder,!0);i=t.DataManager(i).executeLocal(a),this.popupListItems=i}if(this.model.allowGrouping||this.model.fields.groupBy){t.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.addClass("e-atc-popup");var r,n,o=this.mapFld._category;n=t.Query().group(o),this.model.enableSorting||n.queries.splice(0,1),r=t.DataManager(i).executeLocal(n),this._swapUnCategorized(r),"search"==s?this.popupListItems=[]:this._listItem([]);for(var l=0;l<r.length;l++){r[l].key&&this.ultag.append(t.buildTag("li.e-category",r[l].key).attr("role","option")[0]),this._generateLi(r[l].items,this.mapFld),this.ultag.append(this.dummyUl);for(var d=0;d<r[l].items.length;d++)"search"==s?this.popupListItems.push(r[l].items[d]):this._listItem(r[l].items[d],"add")}}else this._generateLi(i,this.mapFld),this.ultag.append(this.dummyUl);this._trigger("dataBound",{data:i})},_onScroll:function(i){if(i.scrollTop){var s=i.scrollTop,a=this,r=this._dataSource();if(a.model.allowVirtualScrolling&&"continuous"==a.model.virtualScrollMode){var n,o,l=t.Query().skip(a._rawList.length).take(a.model.itemsCount).clone();s>=Math.round(e(a.popupList).find("ul,ol").height()-e(a.popupList).height())&&a._rawList.length<a._totalCount&&(a._addLoadingClass(),t.DataManager&&a._dataSource()instanceof t.DataManager&&!t.isNullOrUndefined(a._dataSource().dataSource.url)?(l=a.inputSearch&&""!=a.inputSearch.val()&&this.model.enableServerFiltering?a._addSearchQuery(t.Query(),!a._isPlainType(a._rawList)).skip(a._getLi().length).clone():a._getQuery().skip(a._rawList.length).take(a.model.itemsCount).clone(),a._trigger("actionBegin",{requestFrom:"scroll"})||(o=a._dataSource().executeQuery(l),o.done(function(e){!t.isNullOrUndefined(a.model.value)&&a.model.enableServerFiltering&&(e.result=a._removeSelectedValue(e.result)),a.addItem(e.result),a._removeLoadingClass(),a._trigger("actionSuccess",{e:e,requestFrom:"scroll"})}).fail(function(){a._dataSource(null),a._removeLoadingClass(),a._trigger("actionFailure",{e:i,requestFrom:"scroll"})}).always(function(e){a._trigger("actionComplete",{e:e,requestFrom:"scroll"})}))):t.DataManager&&r instanceof t.DataManager&&r.dataSource.offline&&r.dataSource.json&&r.dataSource.json.length>0?(a.addItem(this._localDataVirtualScroll()),window.setTimeout(function(){a._removeLoadingClass()},100)):(n=t.DataManager(a._dataSource()).executeLocal(l),a.addItem(a._removeSelectedValue(n)),a._removeLoadingClass()))}else a.model.allowVirtualScrolling&&"normal"==a.model.virtualScrollMode&&window.setTimeout(function(){0==a._virtualCount&&a._loadList()},300)}},_localDataVirtualScroll:function(){var e=this,i=t.isNullOrUndefined(e.value())?0:"number"==typeof e.value()?1:e.value().split(e.model.delimiterChar).length,s=e._checkValue?e._rawList.length-i:e._rawList.length,a=t.DataManager(e._dataSource().dataSource.json).executeLocal(t.Query().skip(s).take(e.model.itemsCount).clone());return e._removeSelectedValue(a)},_removeSelectedValue:function(e){if(t.isNullOrUndefined(this.value()))return e;for(var i="number"==typeof this.value()?this.value():this.value().split(this.model.delimiterChar),s=0;s<i.length;s++)for(var a=0;a<e.length;a++)e[a][this.mapFld._value]==i[s]&&e.splice(e.indexOf(e[a]),1);return e},_loadList:function(){this._virtualCount++;var i,s=this._dataSource(),a=this.scrollerObj.scrollTop(),r=this,n=0,o=null;if(this._currentPage=Math.round(a/(29*this.model.itemsCount)),this._virtualPages){if(-1!=e.inArray(this._currentPage,this._virtualPages.sort(function(e,t){return e-t})))if(0==this._currentPage){if(-1!=e.inArray(this._currentPage+1,this._virtualPages))return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else if(-1!=e.inArray(this._currentPage-1,this._virtualPages)){if(-1!=e.inArray(this._currentPage+1,this._virtualPages))return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else this._currentPage=this._currentPage-1;i=!(-1!=e.inArray(this._currentPage-1,this._virtualPages)),this._addLoadingClass();for(var l=this._virtualPages.length-1;l>=0;l--)if(this._virtualPages[l]<this._currentPage){n=this._virtualPages[l],l+1!=this._virtualPages.length&&(o=this._virtualPages[l+1]);break}}var d,h,c=i?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount,u=t.Query().range(c,this._currentPage*this.model.itemsCount+this.model.itemsCount);if(t.DataManager&&r._dataSource()instanceof t.DataManager&&!t.isNullOrUndefined(r._dataSource().dataSource.url)){var p=i?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount;if(u=this._getQuery().skip(p),i){for(l=0;l<u.queries.length;l++)if("onTake"==u.queries[l].fn){u.queries.splice(l,1);break}u.take(2*this.model.itemsCount)}if(!r._trigger("actionBegin",{requestFrom:"scroll"})){if(r.inputSearch&&""!=r.inputSearch.val()&&this.model.enableServerFiltering)var u=r._addSearchQuery(t.Query(),!r._isPlainType(r._rawList)).skip(r._getLi().length).clone();d=r._dataSource().executeQuery(u),d.done(function(e){e.result=r._removeSelectedValue(e.result),r._appendVirtualList(e.result,n,r._currentPage,o,i),r._removeLoadingClass(),r._trigger("actionSuccess",{e:e,requestFrom:"scroll"})}).fail(function(e){r._virtualCount--,r._removeLoadingClass(),r._trigger("actionFailure",{e:e,requestFrom:"scroll"})}).always(function(e){r._trigger("actionComplete",{e:e,requestFrom:"scroll"})})}}else t.DataManager&&s instanceof t.DataManager&&s.dataSource.offline&&s.dataSource.json&&s.dataSource.json.length>0?(r._appendVirtualList(this._localDataVirtualScroll(),n,r._currentPage,o,i),window.setTimeout(function(){r._removeLoadingClass()},100)):(h=t.DataManager(r._dataSource()).executeLocal(u),r._appendVirtualList(r._removeSelectedValue(h),n,r._currentPage,o,i),r._removeLoadingClass())},_appendVirtualList:function(i,s,a,r,n){if(this._virtualPages){if(this._virtualCount--,this.ultag.find("span.e-virtual").remove(),t.isNullOrUndefined(this.activeItem)||this.activeItem.attr("page","0"),-1!=e.inArray(a,this._virtualPages.sort(function(e,t){return e-t})))return!1;n&&-1!=e.inArray(a-1,this._virtualPages.sort())&&(i.splice(0,this.model.itemsCount),n=!1);var o,l,d=this.model.itemsCount,h=e("<ul>");if(o=n?(a-1)*d*29-29*(s*d+d):a*d*29-29*(s*d+d),0!=o&&h.append(e("<span>").addClass("e-virtual").css({display:"block",height:o})),this._mapFields(),this._generateLi(i,this.mapFld),e(this.dummyUl).attr("page",a),n&&e(this.dummyUl).slice(0,d).attr("page",a-1),this.model.showCheckbox&&this._appendCheckbox(this.dummyUl),h.append(this.dummyUl),l=29*(a*d+d),l=null!=r?r*d*29-l:this.ultag.height()-l,0!=l&&h.append(e("<span>").addClass("e-virtual").css({display:"block",height:l})),this.model.itemsCount>0&&""!=this.value()&&this._dataSource()instanceof t.DataManager&&this._dataSource().dataSource.offline)var c=this.ultag.find("li").last();else var c=this.ultag.find("li[page="+s+"]").last();c.next().remove(),h.children().insertAfter(c),this._virtualPages.push(a),n&&this._virtualPages.push(a-1);for(var u=0;u<i.length;u++)this._listItem(i[u],"add");this._virtualUl=this.ultag.clone(!0),this._renderBoxModel()}},_generateLi:function(i,s){if(this.mapFld=s,this.dummyUl=[],!i||!i.length||i.length<1)return!1;for(var a=0;a<i.length;a++){var r=this._getField(i[a],this.mapFld._id),n=this._getField(i[a],this.mapFld._imageUrl),o=this._getField(i[a],this.mapFld._imageAttributes),l=this._getField(i[a],this.mapFld._spriteCSS),d=this._getField(i[a],this.mapFld._text),h=this._getField(i[a],this.mapFld._value),c=this._getField(i[a],this.mapFld._htmlAttributes),u=this._getField(i[a],this.mapFld._selected),p=document.createElement("li");if(t.isNullOrUndefined(h)?p.setAttribute("data-value",d):p.setAttribute("data-value","object"==typeof h?JSON.stringify(h):h),t.isNullOrUndefined(r)||""===r||p.setAttribute("id",r),t.isNullOrUndefined(c)||""==c||this._setAttr(p,c),this.model.template)e(p).append(this._getTemplatedString(i[a]));else{if(!t.isNullOrUndefined(n)&&""!=n){var m=document.createElement("img");this._setClass(m,"e-align")._setAttr(m,{src:n,alt:d}),o&&""!=o&&this._setAttr(m,o),p.appendChild(m)}if(!t.isNullOrUndefined(l)&&""!=l){var g=document.createElement("div");this._setClass(g,"div.e-align "+l+" sprite-image"),p.appendChild(g)}u&&this._setClass(p,"chkselect"),t.isNullOrUndefined(d)&&(d=String(d));var f=document.createElement("span");f.appendChild(document.createTextNode(d)),this._setClass(f,"e-ddltxt"),p.appendChild(f)}this._setAttr(p,{role:"option",unselectable:"on"}),this.dummyUl.push(p)}},_setAttr:function(t,i){if("string"==typeof i){var s=i.replace(/['"]/g,"").split("=");2==s.length&&(t.hasAttribute(s[0])&&"class"==s[0]?e(t).addClass(s[1]):t.setAttribute(s[0],s[1]))}else for(var a in i)if("styles"!=a&&"style"!=a||"object"!=typeof i[a])t.setAttribute(a,i[a]);else for(var r in i[a])t.style[r]=i[a][r];return this},_setClass:function(e,t){return e.className+=" "+t,this},_removeClass:function(e,t){var i=e.className.indexOf(t);return i>=0&&(0!=i&&" "===e.className[i-1]?e.className=e.className.replace(" "+t,""):e.className=e.className.replace(t,"")),this},_hasClass:function(e,t){return e.className.indexOf(t)>=0},_swapUnCategorized:function(t){e(t).each(function(e,i){if(!i.key){for(var s=e;s>0;s--)t[s]=t[s-1];return t[s]=i,!1}})},_getField:function(e,i){return t.pvt.getObject(i,e)},_getTemplatedString:function(e){for(var t=this.model.template,i=t.indexOf("${"),s=t.indexOf("}");-1!=i&&-1!=s;){var a=t.substring(i,s+1),r=a.replace("${","").replace("}","");t=t.replace(a,this._getField(e,r)),i=t.indexOf("${"),s=t.indexOf("}")}return t},_setWatermark:function(){if(""==this.element.val()&&""==this._trim(this._visibleInput.val())){var e=null!=this.model.watermarkText?this.model.watermarkText:this._localizedLabels.watermarkText;this._isWatermark?this._visibleInput.attr("placeholder",e):this._hiddenSpan.css("display","block").text(e),"visualmode"==this.model.multiSelectMode&&this._ulBox&&0==this._ulBox.find("li").length&&this._swapUlandInput(!1)}},_checkboxHideShow:function(e){if(!t.isNullOrUndefined(this.ultag)){if(e){this.listitems=this._getLi();0==this.listitems.find("input[type=checkbox]").length&&this._appendCheckbox(this.listitems)}else this._removeCheck(this.popupList);this.model.showCheckbox=e,this._virtualUl=this.ultag.clone(!0)}},_setCheckAll:function(e){!this._isSingleSelect()&&e?this.checkAll():this.model.checkAll=!1},_setUncheckAll:function(e){!this._isSingleSelect()&&e?this.uncheckAll():this.model.uncheckAll=!1},checkAll:function(){this.model.loadOnDemand&&(t.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList();var i=this._selectedIndices,s=!1;if(this._mapFields(),this.listitems=this._getLi(),this._isWatermark||this._hiddenSpan.css("display","none"),!this._isSingleSelect()){for(var a=0;a<this.listitems.length;a++){if(this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[a]:this._decode(this._getField(this.popupListItems[a],this.mapFld._text)),this._hiddenValue=this._getAttributeValue(this.listitems[a])||this._currentText,this._checkContains(this._hiddenValue))s=!0;else if(this.model.showCheckbox){var r=e(this.listitems[a]).children(".e-checkwrap")[0];r&&!this._isChecked(r)?(this._setClass(r,"e-check-act"),this._setAttr(r,{"aria-checked":!0}),r.firstChild.checked=!0,s=!1):s=!0}else s=!1,e(this.listitems[a]).addClass("e-active");if(!s){this.checkedStatus=!0,this._itemID=e(this.listitems[a]).attr("id"),t.isNullOrUndefined(this._itemID)||""==this._itemID||this._selectedItemsID.push(this._itemID),this._createListHidden(this._hiddenValue),"visualmode"==this.model.multiSelectMode&&(this._ulBox.append(this._createBox(this._currentText,this._hiddenValue)),this._isPopupShown()&&this._setListPosition()),this._addText(this._currentText),-1==e.inArray(a,i)&&(this._selectedIndices.push(a),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[a])||"",this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model});var n={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:a,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus};this._updateValue(this.element.val()),this._updateText(),this._initValue||this._trigger("change",n),this._activeItem=a,this.activeItem=this._getActiveItem(),this._cascadeAction()}}this.model.itemValue=this._selectedValue,this.model.uncheckAll=!1,this.model.checkAll=!0,this._activeItem=-1,this._setWatermark()}},_createListHidden:function(t){var i=document.createElement("input"),s=/'/;s.test(t)&&(t=t.replace(s,"&apos;")),this._setAttr(i,{type:"hidden",name:this._name,value:t,id:"#"+t}),-1==e.inArray(i.value,this._hiddenInputElement)&&(this._hiddenInputElement.push(i.value),this.container.append(i),e(this.element).attr("name","hiddenEle"))},_removeListHidden:function(t){var i=/'/;i.test(t)&&(t=t.replace(i,"&apos;"));var s=this.container.find("[id='#"+t+"']");this._hiddenInputElement.splice(e.inArray(s.value,this._hiddenInputElement),1),e(s).remove(),this._isSingleSelect()||""!=this.element.val()||this.element.attr("name",this._name)},_getAttributeValue:function(e){if(!t.isNullOrUndefined(e))var i=t.isNullOrUndefined(e.getAttribute("data-value"))?e.getAttribute("value"):e.getAttribute("data-value");return e?i:null},_selectCheckedItem:function(e){this.model.loadOnDemand&&(t.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList();for(var i=0;i<e.length;i++)this._activeItem=e[i],this._enterTextBoxValue()},unCheckAll:function(){this.uncheckAll()},uncheckAll:function(){var i=!1;if(this.listitems=this._getLi(),this._mapFields(),!this._isSingleSelect()){for(var s=0;s<this.listitems.length;s++){if(this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[s]:this._getField(this.popupListItems[s],this.mapFld._text),this._hiddenValue=this._getAttributeValue(this.listitems[s])||this._currentText,this._checkContains(this._hiddenValue))if(this.model.showCheckbox){var a=e(this.listitems[s]).children(".e-checkwrap")[0];a&&this._isChecked(a)?(this._removeClass(a,"e-check-act"),this._setAttr(a,{"aria-checked":!1}),a.firstChild.checked=!1,i=!0):i=!1}else e(this.listitems[s]).removeClass("e-active"),i=!0;else i=!1;if(i){
this.checkedStatus=!1,this._activeItem=s,this.activeItem=this._getActiveItem(),this._removeText(this._hiddenValue),this._removeListHidden(this._hiddenValue);var r=this._selectedIndices;e.inArray(s,r)>-1&&(this._selectedIndices.splice(e.inArray(s,r),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[s])||"",this._itemID=e(this.listitems[s]).attr("id"),t.isNullOrUndefined(this._itemID)||""==this._itemID||this._removeSelectedItemsID(),this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model});var n={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:s,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus};this._updateValue(this.element.val()),this._updateText(),this._initValue||this._trigger("change",n),this._cascadeAction(),"visualmode"==this.model.multiSelectMode&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition())}}this.model.itemValue=this._selectedValue,this.model.checkAll=!1,this.model.uncheckAll=!0,this._setWatermark(),this._activeItem=-1}},_removeSelectedItemsID:function(){var e;e=this._selectedItemsID.indexOf(this._itemID),this._selectedItemsID.splice(e,1),this._itemID=""},_refreshScroller:function(){if(!t.isNullOrUndefined(this.popupListWrapper)){this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto")),this.popupList.find(".e-content, .e-vhandle").removeAttr("style"),this.popupList.find(".e-vhandle div").removeAttr("style"),this.popupList.children(".e-content").removeClass("e-content");var e=this._isPopupShown();this.popupListWrapper.css("display","block"),this.popupList.css({display:"block"}),this.scrollerObj.model.height=Math.ceil(this._getPopupHeight()),this.scrollerObj.refresh(),this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto")),this.scrollerObj.option("scrollTop",0),e||this.popupListWrapper.css("display","none")}},_enablePopupResize:function(){this.model.enablePopupResize&&!t.isNullOrUndefined(this.popupListWrapper)&&(this.popupListWrapper.addClass("e-resizable").append(t.buildTag("div.e-resizebar").append(t.buildTag("div.e-icon e-resize-handle"))).find(".e-resize-handle").addClass(this.model.enableRTL?"e-rtl-resize":""),this._resizePopup())},_resizePopup:function(){var t=this,i=!1;this.popupListWrapper.find("div.e-resize-handle").ejResizable({minHeight:t._validatePixelData(t.model.minPopupHeight),minWidth:t._validatePixelData(t.model.minPopupWidth),maxHeight:t._validatePixelData(t.model.maxPopupHeight),maxWidth:t._validatePixelData(t.model.maxPopupWidth),handle:"e-ddl-popup",resizeStart:function(e){if(!t.model.enabled)return!1;!i&&t._trigger("popupResizeStart",{event:e}),i=!0},resize:function(i){var s=e(i.element).parents("div.e-ddl-popup");t._refreshPopupOnResize(e(s).outerHeight(),e(s).outerWidth()),t._trigger("popupResize",{event:i})},resizeStop:function(e){i&&(t._refreshPopupOnResize(t.model.popupHeight,t.model.popupWidth),i&&t._trigger("popupResizeStop",{event:e}),i=!1)},helper:function(i){var s=e(i.element).parents("div.e-ddl-popup");return t._refreshPopupOnResize(e(s).outerHeight(),e(s).outerWidth()),e(t.popupListWrapper)}})},_refreshPopupOnResize:function(e,t){e&&(this.model.popupHeight=e),t&&(this.model.popupWidth=t),this.popupListWrapper.css({height:this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight)}),this._setListWidth(),this._refreshScroller()},_setListWidth:function(){if(!t.isNullOrUndefined(this.popupListWrapper)){var e=this.model.popupWidth;"auto"!=e?this.popupListWrapper.css({width:e}):this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)}),this.popupListWrapper.css({"max-width":this._validatePixelData(this.model.maxPopupWidth)})}},_setListHeight:function(){t.isNullOrUndefined(this.popupListWrapper)||(this.model.enablePopupResize&&this.model.enableFilterSearch&&this.model.minPopupHeight&&this.model.minPopupHeight.toString().indexOf("%")<0&&20==this._validatePixelData(this.model.minPopupHeight)&&(this.model.minPopupHeight="65"),this.model.enablePopupResize?this.popupListWrapper.css({"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight),height:this._validatePixelData(this.model.popupHeight)}):this.popupListWrapper.css({"max-height":this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight)}))},_validatePixelData:function(e){return e&&!isNaN(e)?Number(e):e},_getPopupHeight:function(){var e=this.popupListWrapper.height();if(this.model.enablePopupResize&&(e-=this.popupListWrapper.find(">div.e-resizebar").height()),this.model.headerTemplate&&this.headerTemplate&&(e-=this.headerTemplate.height()),this.model.enableFilterSearch&&this.inputSearch){var t=this.inputSearch.parent(".e-in-wrap");e-=parseInt(t.css("height"))+parseInt(t.css("margin-top"))+parseInt(t.css("margin-bottom"))}return e},_refreshPopup:function(){"auto"!=this.model.popupWidth||this._validatePixelData(this.model.minPopupWidth)?this._validatePixelData(this.model.minPopupWidth)&&this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)}):this.popupListWrapper.css({"min-width":this.wrapper.width()}),void 0!=this.scrollerObj&&this._refreshScroller(),this._setListPosition()},_setListPosition:function(){var t,i=this.wrapper,s=this._getOffset(i),a=e(document).scrollTop()+e(window).height()-(s.top+e(i).outerHeight()),r=s.top-e(document).scrollTop(),n=this.popupListWrapper.outerHeight(),o=this.popupListWrapper.outerWidth(),l=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),u=(n<a||n>r?s.top+d+3:s.top-n-3)-h;t=e(document).scrollLeft()+e(window).width()-l,(this.model.enableRTL||o>t&&o<l+i.outerWidth())&&(l-=this.popupListWrapper.outerWidth()-i.outerWidth()),this.popupListWrapper.css({left:l+"px",top:u+"px","z-index":c})},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popupListWrapper)},_showResult:function(){var i=this;this.popUpShow=!0,this.model.loadOnDemand&&(t.isNullOrUndefined(this.popupListWrapper)&&this._renderPopupPanelWrapper(),(t.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),this._renderRemaining()),(this.model.allowGrouping||this.model.fields.groupBy)&&this.popupListWrapper.addClass("e-atc-popup");var s={text:this._visibleInput[0].value,value:this._selectedValue,refreshPopup:!0};this._trigger("beforePopupShown",s)||(s.refreshPopup&&this._refreshPopup(),e(this.popupListWrapper).slideDown(this.model.enableAnimation?200:1,function(){e(document).on("mousedown",e.proxy(i._OnDocumentClick,i)),t.isDevice()||i._on(t.getScrollableParents(i.wrapper),"scroll",i._hideResult)}),this.element[0].setAttribute("aria-expanded",!0),this._listSize=this._getLi().length,this.wrapper.addClass("e-popactive"),this._trigger("popupShown",{text:this._visibleInput[0].value,value:this._selectedValue}),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")}))},_OnWindowResize:function(e){!t.isNullOrUndefined(this.model)&&this._isPopupShown()&&this._refreshPopup()},_hideResult:function(i){if(this.model&&this._isPopupShown()){if(!t.isNullOrUndefined(i)&&!t.isNullOrUndefined(this.inputSearch)&&e(this.inputSearch).is(":focus")&&"scroll"==i.type&&t.isTouchDevice())return!1;var s=this;if(this._trigger("beforePopupHide",{text:this._visibleInput[0].value,value:this._selectedValue}))return;e(this.popupListWrapper).slideUp(this.model.enableAnimation?100:0,function(){e(document).off("mousedown",e.proxy(s._OnDocumentClick,s))}),null!=this.element&&this.element.attr("aria-expanded",!1),t.isDevice()||this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),null!=this._visibleInput&&this.wrapper.removeClass("e-popactive"),this.popUpShow=!1,this._trigger("popupHide",{text:this._visibleInput[0].value,value:this._selectedValue}),setTimeout(function(){s._resetSearch()},100),this._getLi().find(".e-ddl-anim").removeClass("e-ddl-anim")}},_isPopupShown:function(){if(!t.isNullOrUndefined(this.popupListWrapper))return"block"==this.popupListWrapper.css("display")},_enterTextBoxValue:function(){var t,i=!0;if(this.removeID=!1,this.checkedStatus=!1,this._isWatermark||this._hiddenSpan.css("display","none"),this._chooseSelectionType(),this._activeItem>=0||null!=this._activeItem)if(this.model.showCheckbox){var s=this.activeItem.find(".e-checkwrap")[0];e(s).removeClass("e-check-inact"),this.checkedStatus=this._isChecked(s)}else this.checkedStatus=this.activeItem.hasClass("e-active");if(t={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract},!this._initValue&&!this._onSearch&&this._raiseEvents&&this._trigger("select",t))return void this._setWatermark();if(this._activeItem>=0||null!=this._activeItem){if(this._isSingleSelect()||this._checkContains(this._selectedValue))this._isSingleSelect()?(this.ultag.children("li").removeClass("e-hover").removeClass("e-active"),this.activeItem.addClass("e-active"),this._maintainHiddenValue(),this._visibleInput.val(this._currentText),this.element.val(this._hiddenValue),this.selectedItemIndex(this.selectedIndexValue),this.selectedIndex(this.selectedIndexValue),this._selectedIndices[0]=this.selectedIndexValue):i=!1;else{if(this.model.showCheckbox){var s=this.activeItem.find(".e-checkwrap")[0];this._isChecked(s)||(this._removeClass(s,"e-ddl-anim"),this._setClass(s,"e-check-act e-ddl-anim"),this._setAttr(s,{"aria-checked":!0}),e(s).find(".e-check-input")[0].checked=!0)}else this.activeItem.addClass("e-active");if("visualmode"==this.model.multiSelectMode){var a=this._createBox(this._currentText,this._selectedValue);this._ulBox.children()&&this._ulBox.children().length>0&&!this._checkForDuplicates(a)||this._ulBox.append(a),this._isPopupShown()&&this._setListPosition()}this._maintainHiddenValue(),this._addText(this._currentText),this._createListHidden(this._hiddenValue),-1==e.inArray(this.selectedIndexValue,this._selectedIndices)&&(this._selectedIndices.push(this.selectedIndexValue),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices)}i&&(this.checkedStatus=!0,this._onValueChange(),this._cascadeAction(),this.selectelement&&e("#"+this._id).children().length>this.selectedIndexValue&&(e("#"+this._id).children()[this.selectedIndexValue].selected=!0))}this.model.uncheckAll=!1,this._setWatermark(),this._uiInteract=!1},_checkForDuplicates:function(t){var i=!0;return this._ulBox.children().toArray().forEach(function(s){if(t.attr("data-value")==e(s).attr("data-value"))return i=!1,!1},this),i},_onValueChange:function(){if(this.model.itemValue=this._selectedValue,this._updateText(),this.value()!=this.element.val()||null==this.value()&&-1!=e.inArray("",this._valueContainer)){this._updateSelectedIndexByValue(this.element.val()),this._updateValue(this.element.val()),this.model.showCheckbox||"none"!=this.model.multiSelectMode||null!=this.model.value&&""!=this.model.value||(this.model.itemValue="");var t={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:this.selectedIndexValue,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract};this._initValue||this._onSearch||!this._raiseEvents||("function"==typeof this.model._change&&this._trigger("_change",{isChecked:this.checkedStatus,text:this._visibleInput.val(),itemId:this.selectedIndexValue,selectedText:this._currentText,selectedValue:this._selectedValue,value:this.value(),data:this.model,isInteraction:!!this._uiInteract}),this._trigger("change",t),this.model.showCheckbox&&this._trigger("checkChange",{isChecked:this.checkedStatus,text:this._visibleInput.val(),itemId:this.selectedIndexValue,selectedText:this._currentText,selectedValue:this._selectedValue,value:this._selectedValue,data:this.model})),this._uiInteract=!1,this.model.enableFilterSearch&&this.model.enableServerFiltering&&(this._searchresult=[],this._searchresult=this.getItemDataByValue(this.value()))}},_decode:function(t){return e("<span>").html(t).text()},_chooseSelectionType:function(){this.activeItem=this._getActiveItem(),this.selectedIndexValue=this._activeItem,this._mapFields(),null==this._dataSource()||this._isPlainType(this._dataSource())&&this._isPlainType(this.popupListItems)?(this._currentText=this.activeItem.text(),this._getAttributeValue(this.activeItem[0])?this._selectedValue=this._getAttributeValue(this.activeItem[0]):null!=this._currentText?(t.isNullOrUndefined(this.activeItem[0])||this.activeItem[0].setAttribute("value",this._currentText),this._selectedValue=this._currentText):this._selectedValue="",this._itemID=e(this.activeItem).attr("id")):(this.model.enableFilterSearch?this._currentText=this._decode(this.ultag.children()[this._activeItem].textContent):this._currentText=this._decode(this._getField(this.popupListItems[this._activeItem],this.mapFld._text)),this._currentText=""===this._currentText||null==this._currentText?this.activeItem.text():this._currentText,this._selectedValue=this._getField(this.popupListItems[this._activeItem],this.mapFld._value),this._selectedValue=null!=this._selectedValue?this._selectedValue:this._currentText,this._itemID=this._getField(this.popupListItems[this._activeItem],this.mapFld._id)),t.isNullOrUndefined(this._itemID)||""==this._itemID||(this.model.showCheckbox?this.removeID?this._removeSelectedItemsID():this._selectedItemsID.push(this._itemID):(this._selectedItemsID=[],!this.removeID&&this._selectedItemsID.push(this._itemID))),this.selectedTextValue=this._currentText},_maintainHiddenValue:function(){var e=this._getAttributeValue(this.activeItem[0]);this._hiddenValue=t.isNullOrUndefined(e)?this._currentText:e},_removeTextBoxValue:function(i){if(this._uiInteract=!0,this.removeID=!0,this.checkedStatus=!0,this._isFilterInput())for(var s=0;s<this._getLi().length;s++)e(this._getLi()[s]).attr("data-value")==i&&(this._activeItem=s);if(this._chooseSelectionType(),this._activeItem>=0||null!=this._activeItem)if(this.model.showCheckbox){var a=this.activeItem.find(".e-checkwrap")[0];e(a).removeClass("e-ddl-anim").addClass("e-check-inact e-ddl-anim"),this.checkedStatus=this._isChecked(a)}else this.checkedStatus=this.activeItem.hasClass("e-active");var r={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus};if(!this._initValue&&!this._onSearch&&this._raiseEvents&&this._trigger("select",r))return void this._setWatermark();if(this._maintainHiddenValue(),this._hiddenValue=this._isFilterInput()&&!t.isNullOrUndefined(i)?i:this._hiddenValue,this._removeText(this._hiddenValue),this._removeListHidden(this._hiddenValue),this._isFilterInput()&&!this.activeItem.attr("data-value")==i&&this.activeItem.removeClass("e-active"),!this._isSingleSelect()){if(this.model.showCheckbox){var a=this.activeItem.find(".e-checkwrap")[0];this._isChecked(a)&&(this._removeClass(a,"e-check-act"),this._setAttr(a,{"aria-checked":!1}),e(a).find(".e-check-input")[0].checked=!0)}else this.activeItem.removeClass("e-active");e.inArray(this.selectedIndexValue,this._selectedIndices)>-1&&(this._selectedIndices.splice(e.inArray(this.selectedIndexValue,this._selectedIndices),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),"visualmode"==this.model.multiSelectMode&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition())}this.checkedStatus=!1,this._onValueChange(),null==this.model.cascadeTo||this._isSingleSelect()||this._initValue||this._cascadeAction(),this.model.checkAll=!1,this._setWatermark()},_createBox:function(i,s){if(!this._checkContains(s)){"none"==this._ulBox.css("display")&&"none"!=this._visibleInput.css("display")&&this._swapUlandInput(!0);var a=t.buildTag("span.e-icon e-close","",{},{unselectable:"on"}),r=t.buildTag("li.e-options").text(i).attr("data-value",s).append(a);return this._on(a,"click",function(t){if(!this.model.enabled)return!1;this._deleteBox(e(t.target).parent())}),r}},_deleteBoxCheck:function(t){for(var i=this._ulBox.children("li"),s=0;s<i.length;s++)e(i[s]).attr("data-value")==t&&e(i[s]).remove()},_deleteLastBox:function(){var e=this._ulBox.children("li:not(.e-search-box)"),t=e.last();t.hasClass("e-active")?this._deleteBox(t):(this._removeActive(),t.addClass("e-active"))},_deleteBox:function(t){for(var i=0;i<t.length;i++){var s=e(t[i]).attr("data-value");if(this._isFilterInput())for(var a=this.getListData(),r=0;r<a.length;r++){var n=this._getField(a[r],this.mapFld._value)?this._getField(a[r],this.mapFld._value):this._getField(a[r],this.mapFld._text);if(n==s){this._removeTextBoxValue(s);break}}else for(var o=this._getLi(),r=0;r<o.length;r++)if(e(o[r]).attr("data-value")==s){this._activeItem=r,this._removeTextBoxValue();break}}this._isFocused||this._isPopupShown()||this._setWatermark()},_isFilterInput:function(){return!(!this.model.enableFilterSearch||!this.inputSearch)&&(""==!this.inputSearch.val()||void 0)},_swapUlandInput:function(e){e?(this._visibleInput.css("display","none"),this._ulBox.css("display","block"),this.wrapper.css({height:"auto"})):(this._visibleInput.css("display","block"),this._ulBox.css("display","none"),this.wrapper.css({height:this.model.height}))},_removeActive:function(){this._ulBox.children("li").removeClass("e-active")},_adjustWidth:function(){var e=t.buildTag("span",this._visibleInput.val());this.container.append(e),this._visibleInput.width(e.width()+30),e.remove()},_destroyBoxModel:function(){this._visibleInput.css("display","block"),this.wrapper.height(this.model.height),this._ulBox.remove(),this._ulBox=null,this._off(this.container,"click")},_removeListHover:function(){this.ultag.children("li").removeClass("e-hover")},_addListHover:function(){var e=this._getActiveItem();e.addClass("e-hover"),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("hover")}),e.focus()},_getLi:function(){if(this.ultag)return this.ultag.children("li:not('.e-category'):not('.e-nosuggestion')")},_calcScrollTop:function(t){var i,s,a,r=(this.ultag.outerHeight(),this.ultag.find("li")),n=0;if(this._selectedIndices&&this._selectedIndices.length>0&&"active"==t){var o=this._getLi();i=this._selectedIndices.length==o.length?0:this._selectedIndices[this._selectedIndices.length-1],(null!=this.model.fields.groupBy||this.ultag.find("li.e-category").length>0)&&(i=e.inArray(o.eq(i)[0],r))}else i=this.ultag.find("li.e-"+t).index();for(a=0;a<i;a++)n+=r.eq(a).outerHeight(!0);return s=n-(this.popupList.outerHeight()-r.eq(i).outerHeight(!0))/2,s<0?0:s},_getActiveItem:function(){return this._getLi().eq(this._activeItem)},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_roundedCorner:function(e){e?(this.container.addClass("e-corner"),t.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.addClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").addClass("e-corner")):(this.container.removeClass("e-corner"),t.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.removeClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").removeClass("e-corner"))},_enabled:function(e){e?this.enable():this.disable()},_RightToLeft:function(){this.model.enableRTL?this.wrapper.addClass("e-rtl"):this.wrapper.removeClass("e-rtl")},_dropbtnRTL:function(){this.model.enableRTL?(this.popupListWrapper.addClass("e-rtl").find(".e-resize-handle").addClass("e-rtl-resize"),this.popupList.addClass("e-rtl")):(this.popupListWrapper.removeClass("e-rtl").find(".e-resize-handle").removeClass("e-rtl-resize"),this.popupList.removeClass("e-rtl"))},_OnDropdownClick:function(i){return this._preventDefaultAction(i),!(e(i.target).is("li")&&e(i.target).parent().hasClass("e-boxes")||e(i.target).parents("ul").hasClass("e-boxes")&&e(i.target).hasClass("e-icon e-close"))&&(!this.model.readOnly&&!this._readOnly&&void((t.isNullOrUndefined(this.ultag)?!!(this.model.loadOnDemand&&!t.isNullOrUndefined(this.model.dataSource)&&this.model.dataSource.length>0):this.ultag.find("li").length>0)&&(i.which&&1==i.which||i.button&&0==i.button)&&this._OnPopupHideShow()))},_OnPopupHideShow:function(){if(this._isPopupShown())this._hideResult();else if(this._showResult(),this.model.enableFilterSearch){if(0==this.getSelectedItem().length)this.ultag.find("li:first").addClass("e-hover");else{var t=this.getSelectedItem().length;e(this.getSelectedItem()[t-1]).addClass("e-hover")}e(this.inputSearch).focus()}else this.wrapper.focus()},_showFullList:function(){var e=this._dataSource();if(t.isNullOrUndefined(this.ultag)&&(this.ultag=t.buildTag("ul.e-ul","",{},{role:"listbox"})),t.DataManager&&e instanceof t.DataManager)if(e.dataSource.offline||e.dataSource.json&&e.dataSource.json.length>0)this._getFilteredList(e.dataSource.json);else{var i=this;i._initDataSource(e)}else this._getFilteredList(e)},_getFilteredList:function(e){if(!e||!e.length||e.length<1)this._targetElementBinding(),this._renderRemaining();else{var i=t.DataManager(e).executeLocal(this._isPlainType(e)?t.Query():this._getQuery(!0));this._totalCount=i.count,this._listItem(i.result?i.result:i),this._renderPopupList(),this._rawList=this.popupListItems.slice()}},_cascadeAction:function(){if(this.model.cascadeTo){var i,s=this.model.cascadeTo.split(",");for(i=0;i<s.length;i++)e("#"+s[i]).hasClass("e-dropdownlist")?this._doCascadeAction(s[i],this,this.checkedStatus):e("#"+s[i]).on("ejDropDownListcreate",{Obj:this,status:this.checkedStatus},function(e){t.isNullOrUndefined(e.data.Obj.getValue())||""==e.data.Obj.getValue()||e.data.Obj._doCascadeAction(this.id,e.data.Obj,e.data.status)})}},_doCascadeAction:function(i,s,a){s._currentValue=s._getField(s.popupListItems[s._activeItem],s.mapFld._value),s.selectDropObj=e("#"+i).ejDropDownList("instance");var r={cascadeModel:s.selectDropObj.model,cascadeValue:s._currentValue,setCascadeModel:{},requiresDefaultFilter:!0};this._trigger("cascade",r),s.selectDropObj._setCascadeModel=r.setCascadeModel,t.isNullOrUndefined(s[i])&&(s[i]=s.selectDropObj._dataSource()),t.DataManager&&s[i]instanceof t.DataManager?s._cascadeOdataInit(s[i],r.requiresDefaultFilter,a,r.cascadeQuery):s._cascadeJsonInit(s.selectDropObj,s[i],s.mapFld._value,r.requiresDefaultFilter,a,r.cascadeQuery)},_cascadeOdataInit:function(e,t,i,s){var a,r,n=this;n._dQuery=this.selectDropObj._getQuery().clone(),r=n._dQuery.clone(),t?r.where(n.mapFld._value,"equal",n._currentValue):r=s,n.selectDropObj._addLoadingClass(),n._trigger("actionBegin",{requestFrom:"cascade"})||(a=e.executeQuery(r),a.fail(function(e){n._changedSource=null,n.selectDropObj.setModel({dataSource:n._changedSource,enabled:!1}),n._trigger("actionFailure",{e:e,requestFrom:"cascade"})}).done(function(e){n._trigger("actionSuccess",{e:e,requestFrom:"cascade"}),n._cascadeDataBind(n.selectDropObj,e.result,i),n.selectDropObj._removeLoadingClass()}).always(function(e){n._trigger("actionComplete",{e:e,requestFrom:"cascade"})}))},_cascadeJsonInit:function(e,i,s,a,r,n){var o=a?t.Query().where(s,"==",this._currentValue):n,l=t.DataManager(i).executeLocal(o);this._cascadeDataBind(e,l,r)},_cascadeDataBind:function(i,s,a){var r=i.value();if(this.model.showCheckbox&&a||"none"!=this.model.multiSelectMode&&this.activeItem.hasClass("e-active"))this._changedSource=t.isNullOrUndefined(this._changedSource)?s:this._changedSource.concat(s);else if(this.model.showCheckbox||"none"!=this.model.multiSelectMode){for(var n=0;n<s.length;n++)if(this._isPlainType(s)&&this._isPlainType(this._changedSource))this._changedSource.splice(this._changedSource.indexOf(s[n]),1);else for(var o=0;o<this._changedSource.length;o++)JSON.stringify(this._changedSource[o])==JSON.stringify(s[n])&&this._changedSource.splice(o,1);i.setModel({dataSource:null})}else this._changedSource=s;var l=i.model.value,d=JSON.parse(JSON.stringify(i.model));if(i.setModel({dataSource:this._changedSource,enabled:this._changedSource.length>0}),this._isSingleSelect()||i.selectItemByValue(r),(i.model.showCheckbox||"none"!=i.model.multiSelectMode)&&e("input:hidden[id^='#'][name="+i._id+"]").remove(),i._setSelectedItem)i.setModel(i._setCascadeModel);else{for(var h=["value","text","selectedIndex","selectedIndices"],c=0;c<h.length;c++)i.model[h[c]]=d[h[c]];i.model.value=l,i._finalize()}i._setSelectedItem=!0},_OnMouseEnter:function(t){if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;var i;this.ultag.children("li").removeClass("e-hover"),e(t.target).is("li:not('.e-category')")&&e(t.target).addClass("e-hover"),e(t.target).hasClass("e-disable")?e(t.target).removeClass("e-hover"):"li"!=t.target.tagName&&(i=e(t.target).parents("li:not('.e-category')"),e(i).addClass("e-hover"));var s;this.ultag.children("li:not('.e-category')").each(function(t){if(e(this).hasClass("e-hover"))return s=t,!1}),this._activeItem=s},_OnMouseLeave:function(e){if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;this.ultag.children("li").removeClass("e-hover")},_OnMouseClick:function(t){if(this._uiInteract=!0,!this.model.enabled||this.model.readOnly||this._readOnly)return!1;if(this.model.enableFilterSearch&&e(t.target).is("li")&&e(t.target).hasClass("e-nosuggestion"))return!1;if(e(t.target).is("li")&&!e(t.target).hasClass("e-disable")||!e(t.target).is("li")&&!e(t.target).closest("li").hasClass("e-disable"))if(this._isSingleSelect())this._enterTextBoxValue(),this._hideResult();else if(this.model.showCheckbox){var i="LI"===t.target.nodeName?t.target:e(t.target).parents("li.e-hover"),s=e(i).find(".e-checkwrap")[0];this._onCheckChange({target:s})}else{var a=e(t.target).is("li")?t.target:e(t.target).closest("li")[0];this._activeItem=e.inArray(a,this._getLi()),e(a).hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue()}},_OnDocumentClick:function(t){if(this.model&&(!this.model.enabled||this.model.readOnly||this._readOnly))return!1;e(t.target).is(this.popupList)||e(t.target).parents(".e-ddl-popup").is(this.popupListWrapper)||e(t.target).is(this._visibleInput)||e(t.target).parents(".e-ddl").is(this.wrapper)?e(t.target).is(this.inputSearch)?this.inputSearch.focus():(e(t.target).is(this.popupList)||e(t.target).parents(".e-ddl-popup").is(this.popupListWrapper))&&this._preventDefaultAction(t):this._hideResult()},_OnKeyPress:function(e){this.model.enableIncrementalSearch&&13!=e.keyCode&&this._OnTextEnter("mozilla"==t.browserInfo().name?e.charCode:e.keyCode),32==e.keyCode&&this._preventDefaultAction(e)},_OnTextEnter:function(i){var s=this;this._incqueryString+=String.fromCharCode(i),this._incqueryString.length>0&&setTimeout(function(){s._incqueryString=""},this.model.incrementalSearchDelay);var a,r=this._getLi(),n=null,o=this.model.caseSensitiveSearch,l=this._incqueryString,d=this._incqueryString.length;if(o||(l=l.toLowerCase()),this._prevQueryString==l){for(var a=0;a<this._matchedListItems.length;a++)if(e(this._matchedListItems[a]).hasClass("e-active")||this.model.showCheckbox&&e(this._matchedListItems[a]).hasClass("e-hover")){n=a==this._matchedListItems.length-1?this._matchedListItems[0]:this._matchedListItems[a+1];break}}else if(!t.isNullOrUndefined(r)){this._matchedListItems=[];for(var h,c=this.selectedIndex(),a=0;a<r.length;a++)if(a!=c){a!=r.length&&-1!=a||(a=-1),-1==c&&(c=r.length,a=0),h=-1==a?0:a;var u=(r[h],e(r[h]).text());u=o?u:u.toLowerCase(),u.substr(0,d)==l&&this._matchedListItems.push(r[h])}this._prevQueryString=l,n=this._matchedListItems[0]}t.isNullOrUndefined(n)||(this._activeItem=e.inArray(n,r),this._isSingleSelect()&&!t.isNullOrUndefined(this.scrollerObj)?(this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")})):this._isPopupShown()&&(this._removeListHover(),this._addListHover()))},_selectItem:function(e){this._isSingle||this._clearTextboxValue(),this._activeItem=e,this._addListHover(),this._enterTextBoxValue()},_focusItem:function(e){this._removeListHover(),this._activeItem=e,this._addListHover()},_selectFocusedItem:function(e){this._focusItem(e),this._enterTextBoxValue()},_selectShiftDown:function(t,i,s){s||this._clearTextboxValue();for(var a=t;a<=i;a++)e.inArray(a,this._disabledItems)<0&&e.inArray(a,this.model.selectedIndices)<0&&this._selectFocusedItem(a)},_selectShiftUp:function(t,i,s){s||this._clearTextboxValue();for(var a=i;a>=t;a--)e.inArray(a,this._disabledItems)<0&&e.inArray(a,this.model.selectedIndices)<0&&this._selectFocusedItem(a)},_selectShiftHome:function(t,i,s){if(s||this._clearTextboxValue(),t>=0&&t<=this._listSize-1){if(0==t)this._clearTextboxValue();else for(var a=t;a>=i;a--)e.inArray(a,this._disabledItems)<0&&e.inArray(a,this.model.selectedIndices)<0&&(this._activeItem=a,this._enterTextBoxValue());this._activeItem=t,0==t&&this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:0})}},_selectShiftEnd:function(t,i,s){if(s||this._clearTextboxValue(),t<=this._listSize-1){if(t==i)this._clearTextboxValue();else for(var a=t;a<=i;a++)e.inArray(a,this._disabledItems)<0&&e.inArray(a,this.model.selectedIndices)<0&&(this._activeItem=a,this._enterTextBoxValue());this._activeItem=t,t==i&&this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:this.ultag.outerHeight()})}},_getLastFocusedLi:function(){return this._selectedIndices&&this._selectedIndices.length>0?this._selectedIndices[this._selectedIndices.length-1]:null},_getLastShiftFocusedLi:function(t,i){var s=i?t-1:t+1;return e.inArray(s,this._selectedIndices)<0?t:this._getLastShiftFocusedLi(s,i)},_shiftUp:function(e,t,i){if(null==e||e<0)this._checkDisableStep(0,t,!1,!1,!0);else if(e>0&&e<=this._listSize-1){var s=this._disableItemSelectUp(e-t);if(null!=s)if(null!=this._getLastFocusedLi())if(this._selectedIndices.length>1&&e-1==this._selectedIndices[this._selectedIndices.length-2])for(var a=1;a<=t&&e-a==this._selectedIndices[this._selectedIndices.length-2];a++)this._activeItem=e+1-a,this._removeTextBoxValue(),this._focusItem(e-a);else{var r=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!1);this._selectShiftUp(s,r,i)}else this._moveUp(e,t,!1)}},_shiftDown:function(e,t,i){if(null==e||e<0)this._checkDisableStep(-1,t,!0,!1,!0);else if(e<this._listSize-1){var s=this._disableItemSelectDown(e+t);if(null!=s)if(null!=this._getLastFocusedLi())if(this._selectedIndices.length>1&&e+1==this._selectedIndices[this._selectedIndices.length-2])for(var a=1;a<=t&&e+a==this._selectedIndices[this._selectedIndices.length-2];a++)this._activeItem=e-1+a,this._removeTextBoxValue(),this._focusItem(e+a);else{var r=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!0);this._selectShiftDown(r,s,i)}else this._moveDown(e,t,!1)}},_moveUp:function(e,t,i){null==e||e<=0?this._checkDisableStep(0,t,!1,i):e>this._listSize-1?this._checkDisableStep(this._listSize-1,t,!1,i):e>0&&e<=this._listSize-1&&this._checkDisableStep(e,t,!1,i)},_moveDown:function(e,t,i){null==e||e<0?this._checkDisableStep(-1,t,!0,i):0==e?this._checkDisableStep(0,t,!0,i):e>=this._listSize-1?this._checkDisableStep(this._listSize-1,t,!0,i):e<this._listSize-1&&this._checkDisableStep(e,t,!0,i)},_checkDisableStep:function(e,t,i,s,a){var r=i?"_disableItemSelectDown":"_disableItemSelectUp",n=i?e+t:e-t,o=this[r](n);if(null==o)for(var l=t;l>=0&&(n=i?e+l:e-l,null==(o=this[r](n)));l--);null!=o&&(s?this._focusItem(o):this._selectItem(o),a&&s&&this._enterTextBoxValue())},_disableItemSelectDown:function(t){return(null==t||t<0)&&(t=0),t<this._listSize?e.inArray(t,this._disabledItems)<0?t:this._disableItemSelectDown(t+1):this._listSize-1},_disableItemSelectUp:function(t){if((null==t||t<0)&&(t=0),t<this._listSize){if(e.inArray(t,this._disabledItems)<0)return t;if(t>0)return this._disableItemSelectUp(t-1)}},
_preventDefaultAction:function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},_OnKeyDown:function(e){if(this._uiInteract=!0,this.model.enabled&&!t.isNullOrUndefined(this.popupListWrapper)){this._itemId=null;var i,s,a,r=this._getLi();if(this._listSize=r.length,s=this.popupList.height(),i=this.ultag.children("li").outerHeight(),a=0!=Math.round(s/i)?Math.round(s/i):5,this._isSingle=this._isSingleSelect(),this._isSingle)switch(e.keyCode){case 38:if(e.altKey){this.ultag.find("li").length>0&&this._hideResult();break}case 33:var n=33==e.keyCode?a:1;this._moveUp(this._activeItem,n),this._preventDefaultAction(e,!0);break;case 8:this._preventDefaultAction(e);break;case 40:if(e.altKey){this.ultag.find("li").length>0&&this._showResult();break}case 34:var n=34==e.keyCode?a:1;this._moveDown(this._activeItem,n),this._preventDefaultAction(e,!0);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1):this._moveUp(this._activeItem,1),this._preventDefaultAction(e);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1):this._moveDown(this._activeItem,1),this._preventDefaultAction(e);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:this._moveDown(this._listSize-1,0),this._preventDefaultAction(e);break;case 36:var n=null!=this._activeItem?this._activeItem:this._listSize-1;this._moveUp(n,n),this._preventDefaultAction(e)}else switch(e.keyCode){case 38:e.altKey?this.ultag.find("li").length>0&&this._hideResult():e.shiftKey?this._shiftUp(this._activeItem,1,e.ctrlKey):this._moveUp(this._activeItem,1,e.ctrlKey),this._preventDefaultAction(e);break;case 33:e.shiftKey?this._shiftUp(this._activeItem,a,e.ctrlKey):this._moveUp(this._activeItem,a,e.ctrlKey),this._preventDefaultAction(e);break;case 8:this._preventDefaultAction(e);break;case 40:e.altKey?this.ultag.find("li").length>0&&this._showResult():e.shiftKey?this._shiftDown(this._activeItem,1,e.ctrlKey):this._moveDown(this._activeItem,1,e.ctrlKey),this._preventDefaultAction(e);break;case 34:e.shiftKey?this._shiftDown(this._activeItem,a,e.ctrlKey):this._moveDown(this._activeItem,a,e.ctrlKey),this._preventDefaultAction(e);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1,!1):this._moveUp(this._activeItem,1,!1),this._preventDefaultAction(e);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1,!1):this._moveDown(this._activeItem,1,!1),this._preventDefaultAction(e);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:e.shiftKey?this._selectShiftEnd(this._activeItem,this._listSize-1,e.ctrlKey):this._moveDown(this._activeItem,this._listSize,e.ctrlKey),this._preventDefaultAction(e);break;case 36:var n=null!=this._activeItem?this._activeItem:this._listSize-1;e.shiftKey?this._selectShiftHome(this._activeItem,0,e.ctrlKey):this._moveUp(this._activeItem,n,e.ctrlKey),this._preventDefaultAction(e)}}},_OnKeyUp:function(i){if(this.model.enabled&&!t.isNullOrUndefined(this.popupListWrapper)){this._preventDefaultAction(i);i.target;if(null==this._activeItem&&(this._activeItem=this._getLi().index(this.popupList.find("ol,ul").children("li.e-hover"))),""==this._trim(this._visibleInput.val())&&38==i.keyCode&&40==i.keyCode)return this._hideResult(),!1;switch(i.keyCode){case 38:case 40:case 37:case 39:case 20:case 16:case 17:case 18:case 35:case 36:case 144:case 27:case 9:break;case 13:if(!this._isSingle&&this._isPopupShown()&&(i.ctrlKey||i.shiftKey)&&this._activeItem>=0)this._selectAndUnselect();else if(!this._isPopupShown()||i.ctrlKey||i.shiftKey)this._isPopupShown()&&this._hideResult();else{if(!t.isNullOrUndefined(this.inputSearch))if(0==this.getSelectedItem().length||!this.listitems[0].classList.contains("e-active")&&this._activeItem>=0)this.selectItemByIndex(this._activeItem),e(this.listitems[this._activeItem]).removeClass("e-hover");else{var s=this._getLastFocusedLi();("none"!=this.model.multiSelectMode||this.model.showCheckbox)&&(this.unselectItemByIndex(s),e(this.listitems[s]).removeClass("e-hover"))}this._hideResult()}this._preventDefaultAction(i);break;case 32:this._isPopupShown()&&this._isSingle&&this._hideResult(),!this._isSingle&&this._isPopupShown()&&this._activeItem>=0&&this._selectAndUnselect(),this._preventDefaultAction(i);break;case 8:"visualmode"==this.model.multiSelectMode&&this._deleteLastBox(),this._preventDefaultAction(i);break;case 46:if("visualmode"==this.model.multiSelectMode||this.model.showCheckbox){this._deleteBox(this._ulBox.children("li.e-active"));break}}}},_isSingleSelect:function(){return!this.model.showCheckbox&&"none"==this.model.multiSelectMode},_selectAndUnselect:function(){this.model.showCheckbox?this._isChecked(this._getActiveItem().find(".e-checkwrap")[0])?this._removeTextBoxValue():this._enterTextBoxValue():"none"!=this.model.MultiSelectMode&&(this._getActiveItem().hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue())},_targetFocus:function(){this.model.enabled&&!this._isFocused&&(this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus e-popactive"),this._isFocused=!0,this._trigger("focusIn"))},_targetBlur:function(){this.model.enabled&&(this._isFocused=!1,this.wrapper.removeClass("e-focus e-popactive"),this._setWatermark(),this._trigger("focusOut"))},_getLocalizedLabels:function(e){return void 0===this._localizedLabels[e]?t.DropDownList.Locale["en-US"][e]:this._localizedLabels[e]},_wireEvents:function(){this._on(this.wrapper,"focus",this._targetFocus),this._on(this.wrapper,"blur",this._targetBlur),this._on(this.wrapper,"keydown",this._OnKeyDown),!t.isNullOrUndefined(this.popupList)&&this._on(this.popupList,"keydown",this._OnKeyDown),!t.isNullOrUndefined(this.popupList)&&this._on(this.popupList,"keyup",this._OnKeyUp),this._on(this.wrapper,"keyup",this._OnKeyUp),!t.isNullOrUndefined(this.popupList)&&this._on(this.popupList,"keypress",this._OnKeyPress),this._on(this.wrapper,"keypress",this._OnKeyPress)},_unwireEvents:function(){this._off(this.wrapper,"focus",this._targetFocus),this._off(this.wrapper,"blur",this._targetBlur),this._off(this.wrapper,"keydown",this._OnKeyDown),!t.isNullOrUndefined(this.popupList)&&this._off(this.popupList,"keydown",this._OnKeyDown),!t.isNullOrUndefined(this.popupList)&&this._off(this.popupList,"keyup",this._OnKeyUp),this._off(this.wrapper,"keyup",this._OnKeyUp),!t.isNullOrUndefined(this.popupList)&&this._off(this.popupList,"keypress",this._OnKeyPress),this._off(this.wrapper,"keypress",this._OnKeyPress),e(window).off("resize",e.proxy(this._OnWindowResize,this))},_multiItemSelection:function(e,t){this._ulBox||"visualmode"!=this.model.multiSelectMode||this._renderBoxModel();for(var i=0;i<e.length;i++){var s=t?this._rawList.length-(e.length-i):i;this._hasClass(e[i],"chkselect")&&(this._activeItem=s,this._enterTextBoxValue(),this._removeClass(e[i],"chkselect"))}this._setWatermark()},_appendCheckbox:function(e,t){this._ulBox||"visualmode"!=this.model.multiSelectMode||this._renderBoxModel();for(var i=0;i<e.length;i++){var s=t?this._rawList.length-(e.length-i):i,a=document.createElement("input"),r=document.createElement("span");this._setAttr(a,{type:"checkbox",name:"list"+s,"data-role":"none",id:this._id+"_check"+s})._setClass(a,"e-check-input")._setAttr(r,{name:"list"+s+"_wrap","data-role":"none",id:this._id+"_check"+s+"wrap",unselectable:"on","aria-checked":!1})._setClass(r,"e-checkwrap e-icon "),r.appendChild(a),e[i].insertBefore(r,e[i].childNodes[0]),this._hasClass(e[i],"chkselect")&&(this._activeItem=s,this._enterTextBoxValue(),this._removeClass(e[i],"chkselect"))}this._setWatermark()},_onCheckChange:function(t){this.checkChange=!0;var i="INPUT"===t.target.nodeName?t.target.parentElement:t.target;this._activeItem=e.inArray(e(i).parents("li")[0],this._getLi()),this._hasClass(i,"e-check-act")?this._removeTextBoxValue():this._enterTextBoxValue(),this.checkChange=!1},_isChecked:function(t){return this._hasClass(t,"e-check-act")&&1==e(t).children(".e-check-input")[0].checked},_removeCheck:function(){this._getLi().find(".e-checkwrap").remove()},_resetCheck:function(){var e,t=this._getLi();t.find(".e-check-act").removeClass("e-check-act").attr("aria-checked",!1),e=t.find(".e-check-input:checked");for(var i=0;i<e.length;i++)e[i].checked=!1}}),t.DropDownList.Locale=t.DropDownList.Locale||{},t.DropDownList.Locale.default=t.DropDownList.Locale["en-US"]={emptyResultText:"No suggestions",watermarkText:""},t.MultiSelectMode={None:"none",Delimiter:"delimiter",VisualMode:"visualmode"},t.VirtualScrollMode={Normal:"normal",Continuous:"continuous"}}(jQuery,Syncfusion),function(e,t,i){t.widget({ejNumericTextbox:["ej.NumericTextbox","e-numerictextbox"],ejPercentageTextbox:["ej.PercentageTextbox","e-percentagetextbox"],ejCurrencyTextbox:["ej.CurrencyTextbox","e-currencytextbox"]},{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0,requireParser:!0},defaults:{width:"",height:"",value:null,name:null,htmlAttributes:{},minValue:-Number.MAX_VALUE,maxValue:Number.MAX_VALUE,incrementStep:1,decimalPlaces:0,validateOnType:!1,cssClass:"",enablePersistence:!1,showSpinButton:!0,locale:"en-US",enableStrictMode:!1,showRoundedCorner:!1,readOnly:!1,enabled:!0,enableRTL:!1,watermarkText:"Enter value",validationRules:null,validationMessage:null,groupSeparator:null,groupSize:null,positivePattern:null,currencySymbol:null,negativePattern:null,change:null,focusIn:null,focusOut:null,create:null,destroy:null},dataTypes:{minValue:"number",maxValue:"number",incrementStep:"number",decimalPlaces:"number",showSpinButton:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",locale:"string",watermarkText:"string",cssClass:"string",readOnly:"boolean",enabled:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",validateOnType:"boolean",groupSeparator:"string"},observables:["value"],_setModel:function(e){var i=!1;for(var s in e)switch(s){case"value":t.isNullOrUndefined(e.minValue)&&t.isNullOrUndefined(e.maxValue)?(this._setValue(e[s],!0),e[s]=this.model.value):(this.model.value=this._checkNumValue(e[s]),this._localizedFormat(),this._raiseChangeEvent(!0),i=!0);break;case"enableRTL":this._enableRTL(e[s]);break;case"width":this._setWidth(e[s]);break;case"height":this._setHeight(e[s]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"minValue":if(isNaN(e[s]))return;this.model.minValue=-1==this.model.decimalPlaces?e[s]:parseFloat(e[s].toFixed(this.model.decimalPlaces)),this._updateValueAttributes(this.model.minValue,this.model.maxValue,this.model.value),i=!0;break;case"maxValue":if(isNaN(e[s]))return;this.model.maxValue=-1==this.model.decimalPlaces?e[s]:parseFloat(e[s].toFixed(this.model.decimalPlaces)),this._updateValueAttributes(this.model.minValue,this.model.maxValue,this.model.value),i=!0;break;case"incrementStep":if(isNaN(e[s]))return;this.model.incrementStep=-1==this.model.decimalPlaces?e[s]:parseFloat(e[s].toFixed(this.model.decimalPlaces));break;case"enableStrictMode":this.model.enableStrictMode=e[s],i=!0;break;case"showSpinButton":this._showSpin(e[s]);break;case"showRoundedCorner":this._roundedCorner(e[s]);break;case"locale":this.model.decimalPlaces=t.isNullOrUndefined(this._options.decimalPlaces)&&this.model.decimalPlaces===this.culture.numberFormat.decimals?-1:-1===this._options.decimalPlaces?-1:this.model.decimalPlaces,this._setLocalize(e[s]),this._options.decimalPlaces=this.model.decimalPlaces,e[s]=this.model.locale;break;case"decimalPlaces":this._setDecimal(e[s]),t.isNullOrUndefined(this._options)&&(this._options={}),this._options.decimalPlaces=e[s];break;case"cssClass":this._setSkin(e[s]);break;case"readOnly":this._setReadOnly(e[s]);break;case"enabled":e[s]?this.enable():this.disable();break;case"watermarkText":t.isNullOrUndefined(this._options)||(this._options=[]),this._options.watermarkText=this.model.watermarkText=e[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._changeWatermark(e[s]);break;case"htmlAttributes":this._addAttr(e[s]);break;case"groupSeparator":this._checkSeparator(e[s]),e[s]=this.model.groupSeparator;break;case"positivePattern":case"negativePattern":case"groupSize":case"currencySymbol":this.model[s]=e[s],this._options[s]=e[s],this._initCustomValue(),e[s]=this.model[s],this._setValue(this.model.value,!0)}i&&(this._validateMinMaxValue(!0,!0),e.value=this.model.value,e.maxValue=this.model.maxValue,e.minValue=this.model.minValue,this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),this._updateValueAttributes(this.model.minValue,this.model.maxValue,this.model.value)),this._checkSeparator(this.model.groupSeparator),this.element.val(this._removeSeparator(this.model.value)),this._updateSeparator(),this._checkErrorClass()},_destroy:function(){this.wrapper&&(this.element.insertBefore(this.wrapper),this.wrapper.remove()),this._isWatermark&&this.element.removeAttr("placeholder"),this.element.val("").removeClass("e-input e-disable e-no-spin").empty(),this.element.removeAttr("disabled aria-disabled"),this.wrapper.removeAttr("aria-valuemin aria-valuemax aria-valuenow aria-live"),this._cloneElement.attr("role")||this.element.removeAttr("role"),this.element.css("display","block")},_init:function(e){if(this._cloneElement=this.element.clone(),this._options=t.isNullOrUndefined(e)?{}:e,!this.element.is("input")||!this.element.is("input[type=text]")&&!this.element.is("input[type=number]")&&this.element.attr("type"))return this._destroy(),!1;this.model.decimalPlaces>0&&(this.element.is("input[type=number]")?this.element[0].type="tel":this.element[0].type="text"),this.element.is("input[type=number]")&&this.element.addClass("e-no-spin"),this._isWatermark="placeholder"in document.createElement("input"),this.model.locale="en"==t.preferredCulture(this.model.locale).name?"en-US":t.preferredCulture(this.model.locale).name,this._localizedLabels=this._getLocalizedLabels(),this.culture=t.preferredCulture(this.model.locale),this._browsername=t.browserInfo().name,this._initCustomValue(),this._prevSeparator=null,this._checkSeparator(this.model.groupSeparator),this._checkAttribute(),this._renderControl(),this._setValues(),this._wireEvents(),this._initObjects(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._updateSeparator(),e&&void 0!=e.value&&this._trigger("_change",{value:this.model.value})},_checkAttribute:function(){for(var e,i,s=["min","max","step","readonly","disabled","placeholder"],a=["minValue","maxValue","incrementStep","readOnly","enabled","watermarkText"],r=0;r<s.length;r++)e=this.element.attr(s[r]),i=a[r],t.isNullOrUndefined(e)||t.isNullOrUndefined(this._options)||!t.isNullOrUndefined(this._options[i])||("watermarkText"==i?this._options[i]=e:this.model[i]="disabled"!=i&&"readOnly"!=i?t.parseFloat(e,this.model.locale):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_addAttr:function(i){var s=this;e.map(i,function(e,i){var a=i.toLowerCase();"class"==a?s.wrapper.addClass(e):"accesskey"==a?s._hiddenInput.attr(i,e):"disabled"==a&&"disabled"==e?s.disable():"readonly"==a&&"readOnly"==e?s._setReadOnly(!0):"tabindex"==a?(s._hiddenInput.attr(i,e),s.element.attr(i,e)):"style"==a||"id"==a?s.wrapper.attr(i,e):"aria-label"==a?s.element.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_setValues:function(){this._id=this.element[0].id,this._textBox=this._hiddenInput[0],this._error=!1,this._timeout=null,this.isValidState=!0,this._allowkeyboard=!0,this._validateOnType=!1,this._focused=!1,this._startValue=0,"ej.CurrencyTextbox"===this.sfType&&this.model.minValue==-Number.MAX_VALUE&&(this.model.minValue=0),t.isNullOrUndefined(this.model.decimalPlaces)&&("ej.CurrencyTextbox"===this.sfType?this.model.decimalPlaces=t.preferredCulture(this.model.locale).numberFormat.currency.decimals:this.model.decimalPlaces=t.preferredCulture(this.model.locale).numberFormat.decimals),this.model.decimalPlaces>=0&&(this.model.minValue=parseFloat(this.model.minValue.toFixed(this.model.decimalPlaces)),this.model.maxValue=parseFloat(this.model.maxValue.toFixed(this.model.decimalPlaces))),this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this._localizedFormat(),this._validateMinMaxValue(!0),this._updateSymbol(this.model.locale);var e;t.isNullOrUndefined(this.model.value)?(e=this.model.value,this.wrapper.removeClass("e-valid")):(e=-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.wrapper.addClass("e-valid")),this.element.val(e)},_initValidator:function(){!this.element.closest("form").data("validator")&&this.element.closest("form").validate()},_setValidation:function(){var i=this.model.validationRules;this.element.rules("add",i);var s=this.element.closest("form").data("validator");s=s||this.element.closest("form").validate();var a=this.element.attr("name");s.settings.messages[a]={};for(var r in i){var n=null;if(!t.isNullOrUndefined(i[r])){if(t.isNullOrUndefined(i.messages&&i.messages[r])){s.settings.messages[a][r]=e.validator.messages[r];for(var o in this.model.validationMessage)r==o&&(n=this.model.validationMessage[r])}else n=i.messages[r];s.settings.messages[a][r]=null!=n?n:e.validator.messages[r]}}},_updateValueAttributes:function(e,t,i){e&&e!=-Number.MAX_VALUE&&this.wrapper.attr({"aria-valuemin":e}),t&&t!=Number.MAX_VALUE&&this.wrapper.attr({"aria-valuemax":t}),i&&this.wrapper.attr({"aria-valuenow":i})},_renderControl:function(){this.wrapper=t.buildTag("span.e-widget e-pinch"),this.innerWrap=t.buildTag("span.e-in-wrap e-box "),this.wrapper.attr("style",this.element.attr("style")),"ej.NumericTextbox"===this.sfType?this.wrapper.addClass("e-numeric"):"ej.PercentageTextbox"===this.sfType?this.wrapper.addClass("e-percent"):"ej.CurrencyTextbox"===this.sfType&&this.wrapper.addClass("e-currency"),this.wrapper.append(this.innerWrap).insertAfter(this.element),this.innerWrap.append(this.element),this._hiddenInput=t.buildTag("input","",{},{type:"text"}).insertBefore(this.element),this._hiddenInput.attr("data-role","none"),this._hiddenInput[0].tabIndex=this.element[0].tabIndex,this._hiddenInput.attr("accesskey",this.element[0].accessKey),this.element[0].accessKey="",this._hiddenInput.css("display","block"),this.element.css("display","none"),this._isWatermark||(this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this._localizedLabels.watermarkText),this._hiddenSpan.css("display","none"),this._on(this._hiddenSpan,"mousedown",this._focusIn),this._on(this._hiddenSpan,"mousewheel",this._mouseWheel),this._on(this._hiddenSpan,"DOMMouseScroll",this._mouseWheel)),this.model.name=null!=this.element.attr("name")?this.element.attr("name"):null!=this.model.name?this.model.name:this.element[0].id,null==this.element.attr("name")&&this.element.attr("name",this.model.name),this.element.addClass("e-input"),t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value?("."==t.preferredCulture(this.model.locale).numberFormat[","]&&(this.element[0].value=this.element[0].value.replace(".",",")),this.model.value=this._checkNumValue(this.element[0].value)):("string"==typeof this.model.value&&"."==t.preferredCulture(this.model.locale).numberFormat[","]&&(this.model.value=this.model.value.replace(".",",")),this.model.value=this._checkNumValue(this.model.value)),this._hiddenInput.attr({value:this.model.value}).addClass("e-input"),this.wrapper.attr({role:"spinbutton"}),this._updateValueAttributes(this._options.minValue,this._options.maxVal,this.model.value),this.element.attr({"aria-live":"assertive",value:this.model.value});var i=e('<span class="e-select"><span class="e-spin e-spin-up " role="button" aria-label="Increase Value" unselectable="on" /><span class="e-spin e-spin-down" role="button" aria-label="Decrease Value" unselectable="on" /></span>');i.find(".e-spin-up").append(t.buildTag("span.e-icon e-arrow e-arrow-sans-up").attr({role:"presentation",unselectable:"on"})),i.find(".e-spin-down").append(t.buildTag("span.e-icon e-arrow e-arrow-sans-down").attr({role:"presentation",unselectable:"on"})),this.innerWrap.append(i),this.spin=this.wrapper.find(".e-select"),this.spinUp=this.wrapper.find(".e-spin-up"),this.spinDown=this.wrapper.find(".e-spin-down"),this._setWidth(this.model.width),this._setHeight(this.model.height),""!=this.model.cssClass&&this._setSkin(this.model.cssClass),this._showSpin(this.model.showSpinButton),this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner),this.model.enableRTL&&this._enableRTL(this.model.enableRTL),this.model.readOnly&&this._setReadOnly(this.model.readOnly),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this.enable():this.disable()},_initObjects:function(){this._preVal=this.model.value,null===this.model.value?(this.isValidState=!0,this._hiddenInput.val(null)):(this.model.value<this.model.minValue||this.model.value>this.model.maxValue)&&(this.isValidState=!1),this._checkErrorClass(),this._setWaterMark()},_showSpin:function(e){e?(this.spin&&(this.spin.show(),this.innerWrap.addClass("e-padding")),this._spinEvents("_on")):(this.spin&&(this.spin.hide(),this.innerWrap.removeClass("e-padding")),this._spinEvents("_off"))},_roundedCorner:function(e){e&&!this.innerWrap.hasClass("e-corner")?this.innerWrap.addClass("e-corner"):this.innerWrap.hasClass("e-corner")&&this.innerWrap.removeClass("e-corner")},_enableRTL:function(e){e?this.spin?this.wrapper.addClass("e-rtl"):this.element.addClass("e-rtl"):this.spin?this.wrapper.removeClass("e-rtl"):this.element.removeClass("e-rtl")},_setWidth:function(e){""!=e?this.wrapper.width(e):this.model.width=this.wrapper.outerWidth()},_setHeight:function(e){""!=e?this.wrapper.height(e):this.model.height=this.wrapper.outerHeight()},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)},_setValue:function(e,t){this._isWatermark||this._hiddenSpan.css("display","none"),this.model.value=this._checkNumValue(e),this._validateMinMaxValue(!1),this._checkErrorClass(),this._localizedFormat(),this._raiseChangeEvent(t),this._setWaterMark()},_setLocalize:function(e){var i=t.preferredCulture(this.model.locale).numberFormat[","];if(this.model.locale="en"==t.preferredCulture(e).name?"en-US":t.preferredCulture(e).name,this.model.groupSeparator=t.isNullOrUndefined(this._options.groupSeparator)&&i===this.model.groupSeparator?t.preferredCulture(this.model.locale).numberFormat[","]:this.model.groupSeparator,this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this.culture=t.preferredCulture(this.model.locale),this._initCustomValue(),this._updateSymbol(this.model.locale),this._localizedFormat(),this._changeWatermark(this.model.watermarkText),t.isNullOrUndefined(this.model.value))var s=this.model.value;else s=-1==this.model.value.toString().indexOf("e")?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue;this.element.val(s)},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText},_updateSymbol:function(e){this._percentSymbol=t.preferredCulture(e).numberFormat.percent.symbol,this._currencySymbol=t.preferredCulture(e).numberFormat.currency.symbol},_setDecimal:function(e){this.model.decimalPlaces=e,this._localizedFormat()},_validateMinMaxValue:function(e,i){var s,a=!1;this.model.minValue>this.model.maxValue&&(this.model.minValue=this.model.maxValue),!t.isNullOrUndefined(this.model.value)&&this.model.minValue>this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this._startValue=this.model.value=this.model.minValue):this.isValidState=!1,a=!0):!t.isNullOrUndefined(this.model.value)&&this.model.maxValue<this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this.model.value=this.model.maxValue):this.isValidState=!1,a=!0):this.isValidState=!0,this.model.minValue==this.model.maxValue&&(this._startValue=this.model.minValue),a&&e&&(s=this._formatValue(this.model.value,"n",!0),this._hiddenInput.val(s),s=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(s),this._localizedFormat(),this._raiseChangeEvent(i))},_convertToExponetial:function(e){var i,s,a,r,n="",o=e<0;e=e.toString(),s=t.preferredCulture(this.model.locale).numberFormat,e=e.replace(".",s["."]),a=e;var l=null;"ej.NumericTextbox"===this.sfType?(i=o?s.pattern[0]:t.isNullOrUndefined(s.pattern[1])?"n":s.pattern[1],e=o?e.replace("-",""):e,r=""):"ej.PercentageTextbox"===this.sfType?(i=o?s.percent.pattern[0]:s.percent.pattern[1],e=o?e.replace("-",""):e,r=s.percent.symbol):"ej.CurrencyTextbox"===this.sfType&&(i=o?s.currency.pattern[0]:s.currency.pattern[1],e=o?e.replace("-",""):e,r=s.currency.symbol);for(var d=0,l=i.length;d<l;d++){var h=i.charAt(d);n+="n"===h?e:"$"===h||"%"===h?r:h}return{formattedValue:n,unformattedValue:a}},_localizedFormat:function(){if(this.culture=t.preferredCulture(this.model.locale),this._decimalSep=t.preferredCulture(this.model.locale).numberFormat["."],t.isNullOrUndefined(this.model.value))return void(this._textBox.value="");if(-1==this.model.value.toString().indexOf("e"))if(this._textBox.value=this._removeSeparator(this.model.value),this._focused||""==this._textBox.value){var e=this._convertToExponetial(this.model.value);this._textBox.value=e.unformattedValue,this._focused||""==this._textBox.value||(this._textBox.value=e.formattedValue)}else{this._textBox.value=this._formatValue(this.model.value,"n",!0),"ej.PercentageTextbox"===this.sfType?this._appendPercentSymbol(this._textBox.value):"ej.CurrencyTextbox"===this.sfType&&this._appendCurrencySymbol(this._textBox.value);var i="ej.CurrencyTextbox"===this.sfType?this._textBox.value.indexOf(this._currencySymbol):"ej.PercentageTextbox"===this.sfType?this._textBox.value.indexOf(this._percentSymbol):-1;if(-1==this.model.decimalPlaces&&0!=this._afterDec&&(this._textBox.value=this._textBox.value.substr(0,this._textBox.value.lastIndexOf(this._decimalSep)),i>1&&(t.isNullOrUndefined(this._afterDec)||""==this._afterDec)&&("ej.CurrencyTextbox"===this.sfType&&(this._textBox.value=this._textBox.value+" "+this._currencySymbol),"ej.PercentageTextbox"===this.sfType&&(this._textBox.value=this._textBox.value+" "+this._percentSymbol)),-1==this.model.decimalPlaces&&!t.isNullOrUndefined(this._afterDec)&&""!=this._afterDec)){var s=this._textBox.value.lastIndexOf(this._decimalSep);s>=0&&(this._textBox.value=this._textBox.value.substr(0,s));var a=this._afterDec;i>1&&("ej.CurrencyTextbox"===this.sfType&&(a=a+" "+this._currencySymbol),"ej.PercentageTextbox"===this.sfType&&(a=a+" "+this._percentSymbol)),this._textBox.value=this._textBox.value+this._decimalSep+a}}else this._textBox.value=this.model.value.toString()},_checkNumValue:function(e){return"string"==typeof e&&(e=this._changeSeparator?this._replaceSeparator(e,this.model.groupSeparator,t.preferredCulture(this.model.locale).numberFormat[","]):e),"string"!=typeof e||isNaN(this._parseValue(e))?"number"!=typeof e||isNaN(e)?null:e:(e=this._parseValue(e),parseFloat(e))},_setReadOnly:function(e){this.model.readOnly=e,e?(this.element.attr("readonly",!0),this._hiddenInput.attr("readonly",!0)):(this.element.prop("readonly",!1),this._hiddenInput.prop("readonly",!1))},_setWaterMark:function(){null!=this._localizedLabels.watermarkText&&""===this._textBox.value&&""===e.trim(this._hiddenInput.val())&&(this._isWatermark?(this._hiddenInput.attr("placeholder",this._localizedLabels.watermarkText),this.element.attr("placeholder",this._localizedLabels.watermarkText)):this._hiddenSpan.css("display","block").text(this._localizedLabels.watermarkText))},_changeWatermark:function(e){if(!this.model.enabled)return!1;this._isWatermark?(this._hiddenInput.attr("placeholder",e),this.element.attr("placeholder",e)):this._hiddenSpan.text(e)},_setSelectionRange:function(e,t){function i(i){i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select()}var s=this._textBox;try{if(s.setSelectionRange)"edge"==this._browsername?setTimeout(function(){s.setSelectionRange(e,t)}):s.setSelectionRange(e,t);else if(s.createTextRange){var a=s.createTextRange();i(a)}}catch(e){var r=this;window.setTimeout(function(){if(document.body.focus(),r._textBox.select(),document.selection){i(document.selection.createRange())}},1)}},_getSelection:function(e){if("number"!=this._textBox.type){var t=null;return document.selection?(t=document.selection.createRange(),""===t.text?t.text:this._removeFormats(t.text)):null==e?this.model.value:t=this._removeFormats(e.substring(this._textBox.selectionStart,this._textBox.selectionEnd))}},_caretPosition:function(){var e=this._textBox,t=0;if("number"!=e.type){if(document.selection){e.focus();var i=document.selection.createRange();i.moveStart("character",-e.value.length),t=i.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionEnd);return t}},_appendPercentSymbol:function(e){this._percentSymbol&&(e=e.replace(this._percentSymbol,"")),e.indexOf(t.preferredCulture(this.model.locale).numberFormat.percent.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e)/100,"p",!0)),this._percentSymbol=t.preferredCulture(this.model.locale).numberFormat.percent.symbol},_appendCurrencySymbol:function(e){this._currencySymbol&&(e=e.replace(this._currencySymbol,"")),e.indexOf(t.preferredCulture(this.model.locale).numberFormat.currency.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e),"c",!0)),this._currencySymbol=t.preferredCulture(this.model.locale).numberFormat.currency.symbol},_removeFormats:function(e){var i=t.preferredCulture(this.model.locale).numberFormat[","];return null!=e?"."==i?e.toString().replace(/["."]/g,""):e.toString().match(new RegExp(i,"g"))?e.toString().replace(new RegExp(i,"g"),""):e:null},_checkErrorClass:function(e){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},enable:function(){this.model.enabled=!0,this.element[0].disabled=!1,this.element.prop("disabled",!1),this._hiddenInput.prop("disabled",!1),this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this._hiddenInput.removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select").removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select span.e-icon.e-arrow").removeClass("e-disable"),this.wrapper.removeClass("e-disable-wrap")},disable:function(){this.model.enabled=!1,this.element[0].disabled=!0,this.element.attr("disabled","disabled"),this._hiddenInput.attr("disabled","disabled"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this._hiddenInput.addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select").addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select span.e-icon.e-arrow").addClass("e-disable"),this.wrapper.addClass("e-disable-wrap")},getValue:function(){return this.model.value},_wireEvents:function(){
this._on(this._hiddenInput,"focus",this._focusIn),this._on(this.element,"paste",this._paste),this._on(this.element,"blur",this._focusOut),this._on(this.element,"keydown",this._keyDown),this._on(this.element,"keypress",this._keyPress),this._on(this.element,"mousewheel",this._mouseWheel),this._on(this.element,"DOMMouseScroll",this._mouseWheel)},_spinEvents:function(e){this[e](this.spinUp,"mousedown mouseup touchstart touchend",this._spinUpClick),this[e](this.spinDown,"mousedown mouseup touchstart touchend",this._spinDownClick)},_isIE8:function(){var e=!1,i=t.browserInfo();return"msie"==i.name&&"8.0"==i.version&&(e=!0),e},_spinUpClick:function(t){var i=!1;if(t.button?i=this._isIE8()?1!=t.button:0!=t.button:t.which&&(i=3==t.which),!i){var s=this;if(t.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly){this.wrapper.find(".e-animate").removeClass("e-animate"),this.spinUp.addClass("e-animate"),this._on(this.spinUp,"mouseleave",this._mouseUpClick),this.spinUp.addClass("e-active");var s=this;"mouseup"==t.type||"touchend"==t.type?(this._updateInputField("increment"),this.spinUp.removeClass("e-active"),this._off(e(document),"mouseup",this._mouseUpClick)):"mousedown"!=t.type&&"touchstart"!=t.type||(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){s._updateInputField("increment")},150),this._on(e(document),"mouseup",this._mouseUpClick))}}},_spinDownClick:function(t){var i=!1;if(t.button?i=this._isIE8()?1!=t.button:0!=t.button:t.which&&(i=3==t.which),!i){var s=this;t.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly&&(this.wrapper.find(".e-animate").removeClass("e-animate"),this.spinDown.addClass("e-animate"),this._on(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.addClass("e-active"),"mouseup"==t.type||"touchend"==t.type?(this._updateInputField("decrement"),this.spinDown.removeClass("e-active"),this._off(e(document),"mouseup",this._mouseUpClick)):"mousedown"!=t.type&&"touchstart"!=t.type||(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){s._updateInputField("decrement")},150),this._on(e(document),"mouseup",this._mouseUpClick)))}},_mouseUpClick:function(e){e.stopPropagation(),clearTimeout(this._timeout),this._off(this.spinUp,"mouseleave",this._mouseUpClick),this._off(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.removeClass("e-active"),this.spinUp.removeClass("e-active")},_mouseWheel:function(e){if(e.preventDefault(),this._focused||this.element[0].focus(),this.model.enabled&&!this.model.readOnly){var t,i=e.originalEvent;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this._updateInputField("increment"):t<0&&this._updateInputField("decrement"),this._cancelEvent(e)}},_numberValue:function(){var e=this._textBox.value;return"ej.NumericTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"n",!0)),"ej.PercentageTextbox"===this.sfType?e=this._formatValue(this.model.value,"n",!0):"ej.CurrencyTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"n",!0)),e="string"!=typeof e||isNaN(this._parseValue(e))?"":e},_formatValue:function(e,i,s){s&&this._updateCultureInfo();var e;return e=-1!=this.model.decimalPlaces||-1==this.model.decimalPlaces&&null==this.model.value?t.format(e,i+this.model.decimalPlaces,this.model.locale):t.format(e,i+this._afterDec.length,this.model.locale),s&&this._restCultureInfo(),e},_parseValue:function(e){this._updateCultureInfo();var e=t.parseFloat(e,this.model.locale);return this._restCultureInfo(),e},_initCustomValue:function(){var e,i="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";switch(i){case"percent":case"currency":e=this.culture.numberFormat[i],t.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),t.isNullOrUndefined(this._options.positivePattern)&&(this.model.positivePattern=e.pattern[1]),t.isNullOrUndefined(this._options.currencySymbol)&&"currency"==i&&(this.model.currencySymbol=e.symbol),t.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0]);break;case"numeric":e=this.culture.numberFormat,t.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),t.isNullOrUndefined(this._options.positivePattern)&&(this.model.positivePattern=t.isNullOrUndefined(e.pattern[1])?"n":e.pattern[1]),t.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0])}},_updateCultureInfo:function(e){var t,i="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";t="numeric"==i?this.culture.numberFormat:this.culture.numberFormat[i],this._oldNegativePattern=t.pattern[0],this._oldGroupSize=t.groupSizes[0],t.pattern[0]=this.model.negativePattern,t.groupSizes[0]=this.model.groupSize,this._oldPositivePattern=t.pattern[1],t.pattern[1]=this.model.positivePattern,"currency"==i&&(this._oldcurrencySymbol=t.symbol,t.symbol=this.model.currencySymbol)},_restCultureInfo:function(){var e,t="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";e="numeric"==t?this.culture.numberFormat:this.culture.numberFormat[t],e.pattern[0]=this._oldNegativePattern,e.groupSizes[0]=this._oldGroupSize,e.pattern[1]=this._oldPositivePattern,"currency"==t&&(e.symbol=this._oldcurrencySymbol)},_toggleTextbox:function(e){var t=this;t._hiddenInput.toggle(e),t.element.toggle(!e)},_paste:function(e){var i;window.clipboardData&&window.clipboardData.getData?i=window.clipboardData.getData("Text"):e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(i=e.originalEvent.clipboardData.getData("text/plain"));var s=t.parseFloat(i,this.model.locale);isNaN(s)&&i&&this._cancelEvent(e)},_focusIn:function(e){if(!this.model.readOnly){if(this._focused=!0,t.isNullOrUndefined(this.model.value)||this.element.val(this._removeSeparator(this.model.value)),this._toggleTextbox(!1),this._textBox=this.element[0],this.element[0].focus(),this._preVal=this.model.value,this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),!this._error){if(""!=this._textBox.value){var i=this._formatValue(this._textBox.value,"n",!0);-1==this.model.decimalPlaces&&(this._separateValue(this._textBox.value.toString(),!0,!0),t.isNullOrUndefined(this._afterDec)||""==this._afterDec||(i=this._beforeDec+this._decimalSep+this._afterDec)),this._textBox.value=i,this._hiddenInput.val(i)}this._setSelectionRange(0,this._textBox.value.length)}this._trigger("focusIn",{value:this.model.value})}},_separateValue:function(e,t,i){var s=t?e.lastIndexOf(this._decimalSep):e.lastIndexOf(".");this._beforeDec=s>=0?e.substr(0,s):e,!t&&i&&(this._afterDec=s>=0?e.substr(s+1):"")},_focusOut:function(e){if(this._focused=!1,this.wrapper.removeClass("e-focus"),this._separateValue(this._textBox.value,!1,!0),!this._error){if(""!=this._textBox.value){var i=t.parseFloat(this._textBox.value,this.model.locale);i<this.model.minValue?this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.minValue,"n",!1):i>this.model.maxValue&&(this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.maxValue,"n",!1)),this.model.value=-1!=this.model.decimalPlaces||t.isNullOrUndefined(this._afterDec)||-1!=this._textBox.value.lastIndexOf(this._decimalSep)||-1!=i.toString().indexOf("e")?t.parseFloat(this._textBox.value,this.model.locale):t.parseFloat(this._textBox.value+this._decimalSep+this._afterDec,this.model.locale),isNaN(this.model.value)&&!this.model.value&&(this.model.value=null,this.isValidState=!1),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0],this._localizedFormat(),this._checkErrorClass()}else{var i=""==this._textBox.value?null:this._textBox.value;this.model.value=i,this._hiddenInput.val(i),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0]}null===this.model.value||this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue?this.isValidState=!0:this.model.enableStrictMode&&(this.isValidState=!1),this._raiseChangeEvent(),this._setWaterMark(),i=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(i),this._updateSeparator(),this._trigger("focusOut",{value:this.model.value})}this._checkErrorClass(),this._afterDec=""},_cancelEvent:function(e){return e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation(),e.preventDefault(),!1},_updateInputField:function(i){this.isValidState=!0,this._focused||e(this._hiddenInput[0]).focus();var s=this.model.incrementStep;this.model.value;if(""===this._textBox.value?(this._textBox.value=this._formatValue(this._startValue,"n",!0),s=0):this._textBox.value.indexOf(" ")>=0&&(this._textBox.value=this._textBox.value.replace(" ","")),"ej.PercentageTextbox"===this.sfType||"ej.CurrencyTextbox"===this.sfType){var a=this._textBox.value,r=a;a.indexOf(t.preferredCulture(this.model.locale).numberFormat.percent.symbol)>-1&&(r=a.substring(0,a.length-1)),this.model.value=this._parseValue(r)}else"ej.NumericTextbox"==this.sfType&&(this.model.value=t.parseFloat(this._textBox.value,this.model.locale));isNaN(this.model.value)&&!this.model.value&&(this.model.value=this._startValue),this.model.value>=this.model.minValue&&this.model.value>this.model.maxValue?(this.model.value=this.model.maxValue,this._setValue(this.model.value)):this.model.value<this.model.minValue&&this.model.value<=this.model.maxValue?(this.model.value=this.model.minValue,this._setValue(this.model.value)):this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue&&(r="increment"==i?this.model.value+s:this.model.value-s,-1==this.model.decimalPlaces&&(void 0==this.value&&this._setValue(this.model.value),r=-1==this.model.value.toString().indexOf("e")?parseFloat(r.toFixed(this._afterDec.length)):parseFloat(r)),r>=this.model.minValue&&r<=this.model.maxValue&&this._setValue(r)),this._checkErrorClass()},_validateDecimal:function(e){var i=String.fromCharCode(e.keyCode);return i=188==e.keyCode?",":190==e.keyCode?".":110==e.keyCode?t.preferredCulture(this.model.locale).numberFormat["."]:i,t.preferredCulture(this.model.locale).numberFormat["."].charCodeAt(0)==i.charCodeAt(0)},_allowKeyCodes:function(e){for(var t=new Array(38,40,35,36,109,189,46,8,127,37,39,190,9,13,16,17,18,20,110,173,86,88,67),i=0;i<t.length;i++)if(e.keyCode==t[i]||this._validateDecimal(e)&&0!=this.model.decimalPlaces)return!0;return!1},_raiseChangeEvent:function(e){var i,s=this.model.value;this._checkNumValue(this._preVal)!==this._checkNumValue(s)&&(this._preVal=s,this.model.value=-1!=this.model.decimalPlaces||t.isNullOrUndefined(this.model.value)?this._checkNumValue(this._formatValue(this._preVal,"n",!1)):parseFloat(this.model.value),this._updateHiddenField(),t.isNullOrUndefined(this.model.value)?(i=this.model.value,this.wrapper.removeClass("e-valid")):(i=-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,-1==this.model.decimalPlaces&&(this._separateValue(this.model.value.toString(),!1,!0),t.isNullOrUndefined(this._afterDec)||""==this._afterDec||(i=this._beforeDec+this._decimalSep+this._afterDec)),this.wrapper.addClass("e-valid")),this.element.val(i),this.wrapper.attr("aria-valuenow",i),this._updateSeparator(),this.element.trigger("change"),this._trigger("_change",{value:this.model.value,isInteraction:!e}),this._trigger("change",{value:this.model.value,isInteraction:!e}))},_updateHiddenField:function(){var e=this._textBox;this._textBox=this._hiddenInput[0],this._localizedFormat(),this._textBox=e},_removeSeparator:function(e){if(!t.isNullOrUndefined(e)){var i,s;return-1==this.model.decimalPlaces&&this._separateValue(e.toString(),!1,!0),-1==e.toString().indexOf("e")&&(e=this._checkNumValue(this._formatValue(e,"n",!1))),i=e.toString(),s=t.preferredCulture(this.model.locale).numberFormat,i=i.replace(".",s["."])}},_updateSeparator:function(){if(this._changeSeparator&&this.model.value){var e;if("ej.NumericTextbox"===this.sfType?e=this._formatValue(this.model.value,"n",!0):"ej.PercentageTextbox"===this.sfType?e=this._formatValue(this.model.value/100,"p",!0):"ej.CurrencyTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"c",!0)),-1==this.model.decimalPlaces){var i=e.lastIndexOf(this._decimalSep),s=e.substr(i+1);this._separateValue(e,!0,!1);var a="ej.CurrencyTextbox"===this.sfType?e.indexOf(this._currencySymbol):"ej.PercentageTextbox"===this.sfType?this._textBox.value.indexOf(this._percentSymbol):-1,r=this._afterDec;a>1&&("ej.CurrencyTextbox"===this.sfType&&(r=r+" "+this._currencySymbol),"ej.PercentageTextbox"===this.sfType&&(r=r+" "+this._percentSymbol)),t.isNullOrUndefined(this._afterDec)||""==this._afterDec||(e=this._beforeDec+this._decimalSep+r),t.isNullOrUndefined(this._afterDec)||""!=this._afterDec||(e=this._beforeDec+this._decimalSep+s)}this._hiddenInput.val(this._replaceSeparator(e,t.preferredCulture(this.model.locale).numberFormat[","],this.model.groupSeparator))}},_replaceSeparator:function(e,i,s){this._decimalSep=t.preferredCulture(this.model.locale).numberFormat["."];var a=""===i?new RegExp("\\s","g"):new RegExp("\\"+i,"g");if(this.model.groupSeparator==t.preferredCulture(this.model.locale).numberFormat["."]){var r=this.model.decimalPlaces;if(-1==this.model.decimalPlaces){var n=e.lastIndexOf(this._decimalSep);r=e.substr(n+1).length}var o=e.length-r-1;return e.substring(0,o).replace(a,s)+e.substring(o,e.length)}return e.replace(a,s)},_checkSeparator:function(e){this.model.groupSeparator=null!=e?this._validateSeparator(e):t.preferredCulture(this.model.locale).numberFormat[","],this._changeSeparator=t.preferredCulture(this.model.locale).numberFormat[","]!=this.model.groupSeparator,this._prevSeparator=this.model.groupSeparator},_validateSeparator:function(e){var i=e.toString(),s=new RegExp("[a-zA-Z0-9]");return i=i.length>1?i[0]:i,i=s.test(i)?null!=this._prevSeparator?this._prevSeparator:t.preferredCulture(this.model.locale).numberFormat[","]:i},_keyPress:function(e){if(0!==e.which&&!e.metaKey&&!e.ctrlKey&&8!==e.keyCode&&13!==e.keyCode){var i,s,a,r,n,o=this,l=null;i=this._caretPosition(),s=this._textBox.value.toString().substring(0,i),a=this._textBox.value.toString().substring(i),r=t.preferredCulture(this.model.locale).numberFormat;n=s+String.fromCharCode(e.which)+a;var d=r["."];return d="."===d?"\\"+d:d,l=0===o.model.decimalPlaces?new RegExp("^((-)?(\\d*)(-)?)?$"):new RegExp("^(-)?(((\\d+("+d+"\\d*)?)|("+d+"\\d*)))?((-)?)$"),!!l.test(n)&&void 0}},_validateDecimalOnType:function(e){var i,s,a,r;i=this._caretPosition(),this._textBox.value.toString().substring(0,i),this._textBox.value.toString().substring(i),a=this._getSelection(this._textBox.value);var n=t.preferredCulture(this.model.locale).numberFormat["."];if(r=t.isNullOrUndefined(this.model.value)?"":this.model.value.toString(),0!=this.model.decimalPlaces){var o=this._textBox.value.split(n)[1];s=r.indexOf(n)>0?r.substring(r.indexOf(n)+1,r.length).length>this.model.decimalPlaces||!!(0==a.length&&i>this._textBox.value.indexOf(n)&&o&&o.length>=this.model.decimalPlaces):!!(0==a.length&&i>this._textBox.value.indexOf(n)&&o&&o.length>=this.model.decimalPlaces)}else s=!1;if(s)return this._keypressFlag=!1,this._cancelEvent(e),!1},_keyDown:function(i){if(!this.model.readOnly){this._CurrentCultureInfo=JSON.parse(JSON.stringify(t.preferredCulture()));var s,a,r;if(i.keyCode>=48&&i.keyCode<=57||i.keyCode>=96&&i.keyCode<=105||this._allowKeyCodes(i)){if(i.shiftKey&&(35==i.keyCode||36==i.keyCode||37==i.keyCode||39==i.keyCode||46==i.keyCode||127==i.keyCode)||i.ctrlKey&&(86==i.keyCode||118==i.keyCode||67==i.keyCode||88==i.keyCode))return!0;if(1==i.ctrlKey&&9!=i.keyCode&&17!=i.keyCode&&86!=i.keyCode&&67!=i.keyCode||67==i.keyCode||86==i.keyCode||88==i.keyCode)return this._keypressFlag=!1,this._cancelEvent(i),!1;if((i.keyCode>=48&&i.keyCode<=57||i.keyCode>=96&&i.keyCode<=105||110==i.keyCode)&&(s=this._caretPosition(),this._textBox.value.toString().substring(0,s),this._textBox.value.toString().substring(s),r=this._getSelection(this._textBox.value),i.keyCode>=96&&i.keyCode<=105&&(i.keyCode-=48),this.model.validateOnType&&-1!=this.model.decimalPlaces&&this._validateDecimalOnType(i),this._validateOnType)){var n=t.preferredCulture(this.model.locale).numberFormat["."],o=this.model.value.toString(),l=o.indexOf(n),d=this.model.value,h=-1==this.model.decimalPlaces?this.model.minValue:this.model.minValue.toFixed(this.model.decimalPlaces),c=-1==this.model.decimalPlaces?this.model.maxValue:this.model.maxValue.toFixed(this.model.decimalPlaces),u=!1;if((h.toString().indexOf("e")>0||c.toString().indexOf("e")>0)&&(u=!0),u)if(0!=this.model.decimalPlaces){var p=this._textBox.value.split(".")[1];a=o.indexOf(n)>0||Number(o)<Number(h)||Number(o)>Number(c)?o.substring(o.indexOf(n)+1,o.length).length>this.model.decimalPlaces||!!(0==r.length&&s>this._textBox.value.indexOf(n)&&p&&p.length>=this.model.decimalPlaces):!!(0==r.length&&s>this._textBox.value.indexOf(n)&&p&&p.length>=this.model.decimalPlaces)}else a=!1;else if("."!=n&&(o=this._textBox.value.toString(),this.model.minValue.toString().match(new RegExp(".","g"))&&(h=this.model.minValue.toString().replace(/["."]/g,n)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(c=this.model.maxValue.toString().replace(/["."]/g,n))),_=h.toString().indexOf(n)>0?Number(h.toString().substring(0,h.toString().indexOf(n))):this.model.minValue,v=c.toString().indexOf(n)>0?Number(c.toString().toString().substring(0,c.toString().indexOf(n))):this.model.maxValue,l>0){d=Number(o.substring(o.indexOf(n)+1,o.toString().length)),_=h.toString().indexOf(n)>0?Number(h.toString().substring(h.toString().indexOf(n)+1,h.toString().length)):0,v=c.toString().indexOf(n)>0?Number(c.toString().substring(c.toString().indexOf(n)+1,c.toString().length)):0;var m=Number(o.substring(0,o.indexOf(n))),g=Number(h.toString().substring(0,h.toString().indexOf(n))),f=Number(c.toString().substring(0,c.toString().indexOf(n)));a=!this._validateValue(d,_,v,!0,m,g,f)}else a=!this._validateValue(d,_,v,!1);if(a)return this._keypressFlag=!1,this._cancelEvent(i),!1}if(38==i.keyCode&&this._allowkeyboard&&(this._updateInputField("increment"),this._cancelEvent(i)),40==i.keyCode&&this._allowkeyboard&&(this._updateInputField("decrement"),this._cancelEvent(i)),8==i.keyCode&&(s=this._caretPosition(),this._textBox.value.substring(0,s),this._textBox.value.substring(s),r=this._getSelection(this._textBox.value)),46!=i.keyCode&&127!=i.keyCode||(s=this._caretPosition(),this._textBox.value.substring(0,s),this._textBox.value.substring(s),r=this._getSelection(this._textBox.value)),this._validateDecimal(i)&&0!=this.model.decimalPlaces&&46!=i.keyCode){var _,v,b=t.preferredCulture(this.model.locale).numberFormat["."],x=this._textBox.value.split(b),y=this._caretPosition();if(this._textBox.selectionEnd-this._textBox.selectionStart==this._textBox.value.length)return this._textBox.value=b,this._setSelectionRange(y+1,y+1),this._keypressFlag=!1,this._cancelEvent(i),!1;if(void 0==x[1]){var w=x[0].substring(0,y),C=x[0].substring(y);if((this.model.minValue.toString().indexOf("e")>0||this.model.maxValue.toString().indexOf("e")>0)&&(u=!0),-1!=this.model.decimalPlaces&&C.length>this.model.decimalPlaces&&1==this.model.validateOnType)return this._keypressFlag=!1,this._cancelEvent(i),!1;if(this._validateOnType&&!u){if(this.model.minValue.toString().match(new RegExp(".","g"))&&(_=this.model.minValue.toString().replace(/["."]/g,b)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(v=this.model.maxValue.toString().replace(/["."]/g,b)),_=_.indexOf(b)>0?Number(_.substring(0,_.indexOf(b))):Number(_),v=v.indexOf(b)>0?Number(v.substring(0,v.indexOf(b))):Number(v),!this._validateValue(this.model.value,_,v,"DecimalKeyPressed"))return this._keypressFlag=!1,this._cancelEvent(i),!1;this._textBox.value=w+b+C}else this._textBox.value=w+b+C;this._setSelectionRange(y+1,y+1)}this._cancelEvent(i)}else 190!=i.keyCode&&110!=i.keyCode||this._cancelEvent(i);109!=i.keyCode&&189!=i.keyCode&&173!=i.keyCode||(this.model.value!==this._preVal&&null!==this.model.value||(this.model.value=this._textBox.value),0!=this._caretPosition()&&this._getSelection(this._removeFormats(this._textBox.value))!=this.model.value||this.model.minValue>=0&&!this.model.enableStrictMode||this._textBox.value.toString().match(new RegExp("-","g"))&&""===this._getSelection(this._textBox.value)?(this._preVal=this.model.value,this.model.value=this._textBox.value,this._cancelEvent(i)):this._getSelection()==this.model.value&&(this._preVal=this.model.value,this.model.value=null)),13==i.keyCode&&this._checkNumValue(this._preVal)!==this._checkNumValue(this._textBox.value)&&this._setValue(this._textBox.value)}else(27!=i.keyCode&&!i.ctrlKey||i.ctrlKey&&90==i.keyCode&&""===e.trim(this._textBox.value))&&(this._keypressFlag=!1,this._cancelEvent(i))}},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.NumericTextbox.Locale=t.NumericTextbox.Locale||{},t.NumericTextbox.Locale.default=t.NumericTextbox.Locale["en-US"]={watermarkText:"Enter value"},t.PercentageTextbox.Locale=t.PercentageTextbox.Locale||{},t.PercentageTextbox.Locale.default=t.PercentageTextbox.Locale["en-US"]={watermarkText:"Enter value"},t.CurrencyTextbox.Locale=t.CurrencyTextbox.Locale||{},t.CurrencyTextbox.Locale.default=t.CurrencyTextbox.Locale["en-US"]={watermarkText:"Enter value"}}(jQuery,Syncfusion),function(e,t,i,s){"use strict";t.widget("ejScrollBar","ej.ScrollBar",{defaults:{orientation:"horizontal",viewportSize:0,height:18,width:18,smallChange:57,largeChange:57,value:0,maximum:0,minimum:0,buttonSize:18,infiniteScrolling:!1},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",smallChange:"number",largeChange:"number"},observables:["value"],value:t.util.valueFunction("value"),_enabled:!0,content:function(){return this._content&&this._content.length||("horizontal"===this.model.orientation?this._content=this.element.find(".e-hhandle"):this._content=this.element.find(".e-vhandle")),this._content},_init:function(){this.element.addClass("e-widget"),this._ensureScrollers(),this.content(),this._setInitialValues()},_setInitialValues:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal?this.element.addClass("e-hscrollbar"):this.element.addClass("e-vscrollbar"),0===this.value()&&0===this.model.minimum||(this.value()<this.model.minimum&&this.value(this.model.minimum),this.scroll(this.value(),"none"))},_ensureScrollers:function(){e.fn.jquery;this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width);this._scrollData||("vertical"===this.model.orientation?this._scrollData=this._createScroller("Height","Y","Top","e-v"):this._scrollData=this._createScroller("Width","X","Left","e-h"))},_setModel:function(e){for(var t in e){if("value"!==t){this.refresh();break}this.value()&&this.scroll(this.value(),"none")}},_createScroller:function(t,i,s,a){var r={};e.fn.jquery;r.dimension=t,r.xy=i,r.position=s,r.css=a,r.uDimension=t,this._calculateLayout(r),this._createLayout(r);var n=this[r.main].find(".e-button");return this._off(n,"mousedown")._on(n,"mousedown",{d:r,step:1},this._spaceMouseDown),this._off(this[r.scroll],"mousedown")._on(this[r.scroll],"mousedown",{d:r},this._spaceMouseDown),this._off(this[r.handler],"mousedown touchstart")._on(this[r.handler],"mousedown touchstart",{d:r},this._mouseDown),r},_createLayout:function(i){var s="<div class='"+i.css+"{0}' style='"+i.dimension+":{1}px'>{2}</div>",a=e.fn.jquery,r={};r[i.dimension]=i.modelDim;var n=t.buildTag("div."+i.css+"scroll e-box",String.format(s,"up e-chevron-up_01 e-icon e-box e-button",i.buttonSize)+String.format(s,"handlespace",i.handleSpace,String.format(s,"handle e-box e-pinch",i.handle))+String.format(s,"down e-chevron-down_01 e-icon e-box e-button",i.buttonSize),r);this.element.append(n),this.element.find(".e-vhandle").addClass("e-v-line e-icon"),this.element.find(".e-hhandle").addClass("e-h-line e-icon"),"1.7.1"===a||"1.7.2"===a?i.uDimension.toLowerCase():i.uDimension,this[i.handler]=this.element.find("."+i.handler),this[i.handler].css("transition","none"),this[i.scroll]=this[i.handler].parent(),this[i.main]=this[i.scroll].parent(),this[i.main].find(".e-button")["outer"+i.uDimension](i.buttonSize)},_calculateLayout:function(e){e.scrollDim="scroll"+e.dimension,e.lPosition=e.position.toLowerCase(),e.clientXy="page"+e.xy,e.scrollVal="scroll"+e.position,e.scrollOneStepBy=this.model.smallChange,e.modelDim=this.model[e.dimension=e.dimension.toLowerCase()],e.handler=e.css+"handle",e.buttonSize=this.model.buttonSize,e.main=e.css+"scroll",e.scroll=e.css+"ScrollSpace",e.handleSpace=e.modelDim-2*e.buttonSize,e.scrollable=this.model.maximum-this.model.minimum;var i=this.model.height;"horizontal"===this.model.orientation&&(i=this.model.width),e.handle=this.model.viewportSize/(this.model.maximum-this.model.minimum+this.model.viewportSize)*(i-2*this.model.buttonSize);var s;s=!t.isNullOrUndefined(this.model.elementHeight)&&"string"==typeof this.model.elementHeight&&-1!=this.model.elementHeight.indexOf("%"),e.handle<20&&!s&&(e.handle=20),e.onePx=e.scrollable/(e.handleSpace-e.handle),e.fromScroller=!1,e.up=!0,e.vInterval=void 0},_updateLayout:function(e){this.element.height(this.model.height),this.element.width(this.model.width);var t=this.element.find("."+e.css+"handle"),i=this.element.find("."+e.css+"handlespace"),s="width"==e.dimension?t.css("left"):t.css("top"),a="width"==e.dimension?i.outerWidth():i.outerHeight();void 0!==s&&"auto"!==s&&(a>=e.handle+parseFloat(s)||(this.model.enableRTL?t.css("width"===e.dimension?"left":"top",parseFloat(a)-e.handle):t.css("width"===e.dimension?"left":"top",parseFloat(a)-e.handle>0?parseFloat(a)-e.handle:0))),this.element.find("."+e.css+"scroll").css(e.dimension,e.modelDim+"px").find(".e-button").css(e.dimension,this.model.buttonSize).end().find("."+e.css+"handlespace").css(e.dimension,e.handleSpace+"px").find("."+e.css+"handle").css(e.dimension,e.handle+"px")},refresh:function(){this._ensureScrollers(),this.value()&&this.scroll(this.value(),"none"),this._scrollData&&(this._calculateLayout(this._scrollData),this._updateLayout(this._scrollData))},scroll:function(e,i,s,a){var r=this._scrollData;if(!s)if(this.model.orientation===t.ScrollBar.Orientation.Horizontal){if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollLeft:e,originalEvent:a}))return}else if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollTop:e,originalEvent:a}))return;if(this._scrollData&&(!this._scrollData.enableRTL||"mousemove"!=a&&"touchmove"!=a||"msie"==t.browserInfo().name?!this._scrollData.enableRTL||"mousemove"!=a&&"touchmove"!=a||"msie"!=t.browserInfo().name?this.value(e):this.value(-1*e):this.value(-r.scrollable+e),this.content().length>0))if(this.model.orientation===t.ScrollBar.Orientation.Horizontal){var n=this.element.find(".e-hhandlespace").width()-this.element.find(".e-hhandle").outerWidth();e=n<(e-this.model.minimum)/this._scrollData.onePx?n:(e-this.model.minimum)/this._scrollData.onePx,!this._scrollData.enableRTL||"mousemove"!=a&&"touchmove"!=a||"msie"==t.browserInfo().name||(e=n-e)>0&&(e*=-1),!this._scrollData.enableRTL||"mousemove"!=a&&"touchmove"!=a||"msie"!=t.browserInfo().name||(e=-e),this._scrollData.enableRTL&&e>0&&!this._scrollData._scrollleftflag&&(e=0),this._scrollData._scrollleftflag&&(e>0&&(e*=-1),this.value(e)),this.content()[0].style.left=e+"px",this._scrollData._scrollleftflag=!1}else{var o=this.element.find(".e-vhandlespace").height()-this.element.find(".e-vhandle").outerHeight();e=o<(e-this.model.minimum)/this._scrollData.onePx?o:(e-this.model.minimum)/this._scrollData.onePx,"msie"==t.browserInfo().name&&isNaN(e)&&(e=""),this.content()[0].style.top=e+"px"}},_changeTop:function(e,t,i){var s,a;return s=(e.dimension,this.value()),a=s+t,e.step=t,e.enableRTL&&t<0||t>0&&!e.enableRTL?e.enableRTL?a<-1*this.model.maximum&&(a=-1*this.model.maximum):a>this.model.maximum&&(a=this.model.maximum):e.enableRTL?a>this.model.minimum&&(a=this.model.minimum):a<this.model.minimum&&(a=this.model.minimum),(a!==s||this.model.infiniteScrolling)&&this.scroll(a,i),a!==s},_mouseUp:function(i){if(i.data){var s=i.data.d;clearInterval(s.vInterval),"touchend"==i.type&&e(i.target).removeClass("e-touch"),"mouseup"!==i.type&&"touchend"!==i.type&&(i.toElement||i.relatedTarget||i.target)||(this._prevY=this._d=this._data=null,this._off(e(document),"mousemove touchmove",this._mouseMove),e(document).off("mouseup touchend",t.proxy(this._mouseUp,this)),s.fromScroller=!1,this[s.scroll].off("mousemove"),this[s.handler].off("mousemove").css("transition",""),"thumb"!==i.data.source||t.isNullOrUndefined(this.model)||e.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:i,scrollData:s})},this))),s.up=!0}},_mouseDown:function(i){this._enabled&&(this._d=i,this._data=this._d.data.d,this._data.target=this._d.target,this._data.fromScroller=!0,this[this._data.handler].css("transition","none"),this._on(e(document),"mousemove touchmove",{d:this._data,source:"thumb"},this._mouseMove),this._trigger("thumbStart",{originalEvent:this._d,scrollData:this._data}),e(document).one("mouseup touchend",{d:this._data,source:"thumb"},t.proxy(this._mouseUp,this)),"touchstart"==i.type&&e(i.target).addClass("e-touch"))},_mouseCall:function(e){e.type="mouseup",this._mouseUp(e)},_mouseMove:function(i){var s,a=0,r=parseInt(this[this._data.handler].css(this._data.lPosition))||0;i.preventDefault();if(t.isNullOrUndefined(i.target.tagName)){if(e(i.target).is(document))return void this._mouseCall(i)}else if("iframe"===i.target.tagName.toLowerCase())return void this._mouseCall(i);var n="mousemove"==i.type?i[this._data.clientXy]:i.originalEvent.changedTouches[0][this._data.clientXy];this._prevY&&n!==this._prevY&&(a=n-this._prevY,this.model.infiniteScrolling?(r+=a,this._data.step=a,(this._data.enableRTL?r>0:r<0)&&(r=0),r*(this._data.enableRTL?-1:1)+this._data.handle>=this._data.handleSpace&&(r=(this._data.handleSpace-this._data.handle)*(this._data.enableRTL?-1:1)),s=Math.ceil(r*this._data.onePx),this.scroll(s,"thumb")):(s=a*this._data.onePx,this._changeTop(this._data,s,"thumb",this._d)),this._trigger("thumbMove",{originalEvent:i,direction:this._data.step>0?1:-1,scrollData:this._data})),this._prevY=n},_spaceMouseDown:function(s){if(s.data&&this._enabled){var a=s.data.d,r=this[a.handler][0].getBoundingClientRect();if(1===s.which&&s.target!==this[a.handler][0]){var n=s.data.step?this.model.smallChange:this.model.largeChange,o=s.data.top||r[a.lPosition];s[a.clientXy]=s[a.clientXy]||0,s[a.clientXy]-i.pageYOffset<o&&(n*=-1),a.target=s.target,this._changeTop(a,n,3===n?"track":"button",s),1!==s.data.step&&this[a.scroll].mousemove(function(){a.up=!0}),a.up=!1,a.vInterval=setInterval(t.proxy(function(){if((n<0?o+n/a.onePx<s[a.clientXy]:o+a.handle+n/a.onePx>s[a.clientXy])&&(a.up=!0),a.up)return void clearInterval(a.vInterval);this._changeTop(a,n,3===n?"track":"button",s),o=s.data?s.data.top||r[a.lPosition]:r[a.lPosition]},this),150),e(document).one("mouseup",{d:a},t.proxy(this._mouseUp,this)),e(document).mouseout({d:a},t.proxy(this._mouseUp,this))}}},_remove:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal&&this.element.find(".e-hscroll").remove(),this.model.orientation===t.ScrollBar.Orientation.Vertical&&this.element.find(".e-vscroll").remove(),this._scrollData=null,this._content=null},_destroy:function(){this.element.remove()}}),t.ScrollBar.Orientation={Horizontal:"horizontal",Vertical:"vertical"}}(jQuery,Syncfusion,window),function(e,t,i,s){"use strict";t.widget("ejScroller","ej.Scroller",{_addToPersist:["scrollLeft","scrollTop"],defaults:{height:250,autoHide:!1,
animationSpeed:600,width:0,scrollOneStepBy:57,buttonSize:18,scrollLeft:0,scrollTop:0,targetPane:null,scrollerSize:18,enablePersistence:!1,enableRTL:void 0,enableTouchScroll:!0,preventDefault:!1,enabled:!0,create:null,destroy:null,wheelStart:null,wheelMove:null,wheelStop:null},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",scrollOneStepBy:"number"},observables:["scrollTop","scrollLeft"],scrollTop:t.util.valueFunction("scrollTop"),scrollLeft:t.util.valueFunction("scrollLeft"),keyConfigs:{up:"38",down:"40",left:"37",right:"39",pageUp:"33",pageDown:"34",pageLeft:"ctrl+37",pageRight:"ctrl+39"},content:function(){return!this._contentOffsetParent&&this._content&&this._content[0]&&(this._contentOffsetParent=this._content[0].offsetParent),this._content&&this._content.length&&this._contentOffsetParent||(this._content=this.element.children().first().addClass("e-content")),this._content},_setFirst:!0,_updateScroll:!1,_init:function(){t.isNullOrUndefined(this.content()[0])||(this._isJquery3=parseInt(e.fn.jquery)>=3,this._tempWidth=this.model.width,this._prevScrollWidth=this.content()[0].scrollWidth,this._prevScrollHeight=this.content()[0].scrollHeight,this.element.addClass("e-widget"),this.content(),this._browser=t.browserInfo().name,this._wheelStart=!0,this._eleHeight=this.model.height,this._eleWidth=this.model.width,this._isNativeScroll=t.isDevice(),null!=this.model.targetPane&&this.content().find(this.model.targetPane).addClass("e-target-pane"),void 0===this.model.enableRTL&&(this.model.enableRTL="rtl"===this.element.css("direction")),this.model.autoHide&&this._on(this.element,"mousedown",this._mouseDownInitContent),this._ensureScrollers(),this.model.enableRTL&&(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft()),this._isNativeScroll&&this.element.addClass("e-native-scroll"),this._on(this.content(),"scroll",this._scroll),null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this.scrollLeft()&&this._setScrollLeftValue(this.scrollLeft()),this.scrollTop()&&this.scrollTop(this._isJquery3?Math.ceil(this.scrollTop()):this.scrollTop()),this.content().scrollTop(this.scrollTop()),this.model.autoHide&&this._autohide(),this.model.enabled?this.enable():this.disable(),this._setDimension(),this._prevScrollWidth===this.content()[0].scrollWidth&&this._prevScrollHeight===this.content()[0].scrollHeight||this.refresh()),this._addActionClass(),this._isNativeScroll&&this._on(this.content(),"scrollstop",this._touchDown)},_mouseDownInitContent:function(){this.model.autoHide&&this._on(e(document),"mouseup",this._mouseUpContent),this.element.addClass("e-scroll-focus")},_addActionClass:function(){"msie"==this._browser&&(this.content().removeClass("e-pinch e-pan-x e-pan-y"),this._vScrollbar&&this._hScrollbar?this.content().addClass("e-pinch"):this._vScrollbar&&!this._hScrollbar?this.content().addClass("e-pan-x"):this._hScrollbar&&!this._vScrollbar&&this.content().addClass("e-pan-y"))},_setDimension:function(){t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")||(this._vScroll||this._hScroll?this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),this.element.parent().height()):e(this.content()[0]).height("")),t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")||(this._hScroll||this._vScroll?this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),this.element.parent().width()):e(this.content()[0]).width(""))},_setScrollLeftValue:function(e){this.model.enableRTL&&(e="mozilla"==t.browserInfo().name?e<0?e:-1*e:!t.isNullOrUndefined(this._rtlScrollLeftValue)&&("chrome"==t.browserInfo().name||this._rtlScrollLeftValue>0)?e<0?this._rtlScrollLeftValue+e:this._rtlScrollLeftValue-e:Math.abs(e)),this.content().scrollLeft(e)},_ensureScrollers:function(){var s=e.fn.jquery;if(this.model.height="string"==typeof this.model.height&&-1!=this.model.height.indexOf("px")?parseInt(this.model.height):this.model.height,this.model.width="string"==typeof this.model.width&&-1!=this.model.width.indexOf("px")?parseInt(this.model.width):this.model.width,this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._off(this.content(),"mousedown touchstart"),this.content().length>0){if(this.isVScroll()?(this._tempVscrollbar||(this._vScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Vertical,this.isHScroll()),this._tempVscrollbar=this._vScrollbar),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent)):(this._vScrollbar=null,this._tempVscrollbar=this._vScrollbar,this.element.children(".e-vscrollbar").remove()),this.isHScroll()?(this._tempHscrollbar||(this._hScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Horizontal,this.isVScroll()),this._tempHscrollbar=this._hScrollbar),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):(this._hScrollbar=null,this._tempHscrollbar=this._hScrollbar,this.element.children(".e-hscrollbar").remove()),this._vScrollbar||this._hScrollbar||this.content().css({width:"auto",height:"auto"}),this.element.find(".e-hscroll").length>0||this._vScrollbar&&this.content().outerHeight(this.content().outerHeight()-1),"1.7.1"===s||"1.7.2"===s?(this._contentHeight="height",this._contentWidth="width"):(this._contentHeight="outerHeight",this._contentWidth="outerWidth"),this._hScroll=this.isHScroll(),this._vScroll=this.isVScroll(),this._hScroll||this._vScroll){this.content().addClass("e-content");var a=this._exactElementDimension(this.element);this._elementDimension(a),null!==this.model.targetPane&&void 0!==this.content().find(this.model.targetPane)[0]?this.content().find(this.model.targetPane)[0].scrollLeft=this.scrollLeft():!this.isHScroll()&&this.element.children(".e-hscrollbar").length>0&&this._ensureScrollers(),isNaN(this._eleWidth)&&this._eleWidth.indexOf("%")>0&&isNaN(this._eleHeight)&&this._eleHeight.indexOf("%")>0&&e(i).on("resize",e.proxy(this._resetScroller,this))}else this.content().removeClass("e-content");this._setDimension(),this._parentHeight=e(this.element).parent().height(),this._parentWidth=e(this.element).parent().width()}},_elementDimension:function(e){this._ElementHeight=e.height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.content()[this._contentHeight](this._ElementHeight-(this._hScroll&&!this.model.autoHide?this.model.scrollerSize:this.element.find(".e-hscrollbar").is(":visible")?this.model.scrollerSize:0)),this._ElementWidth=e.width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.content()[this._contentWidth](this._ElementWidth-(this._vScroll&&!this.model.autoHide?this.model.scrollerSize:this.element.find(".e-vscrollbar").is(":visible")?this.model.scrollerSize:0))},_convertPercentageToPixel:function(e,t){return Math.floor(e*t/100)},isHScroll:function(){var i=parseFloat(e.fn.jquery)>=3?Math.ceil(this.element.width()):this.element.width(),s=this.model.width;if(t.isNullOrUndefined(this.model.width)||(s="string"==typeof this.model.width&&-1!=this.model.width.indexOf("%")?i:parseFloat(e.fn.jquery)>=3&&!isNaN(parseFloat(this.model.width))?Math.ceil(parseFloat(this.model.width)):this.model.width),t.isNullOrUndefined(this._tempWidth)||"string"!=typeof this._tempWidth||-1==this._tempWidth.indexOf("%")){if(s>0){var a=this.content().find(this.model.targetPane);if(null!=this.model.targetPane&&a.length)return a[0].scrollWidth+a.siblings().width()>s;if(this.content()[0].scrollWidth>s)return!0;if(this.content()[0].scrollWidth==s){if(this.model.autoHide&&e(this.content()[0]).find("> *").length>0)return e(this.content()[0]).find("> *")[0].scrollWidth>e(this.content()[0]).width();if(e(this.content()[0]).find("> *").length>0)return e(this.content()[0]).find("> *")[0].scrollWidth>(t.isNullOrUndefined(this._tempVscrollbar)?s:s-this.model.scrollerSize)}return!1}return!1}return t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")?this.content()[0].scrollWidth>i||void 0:this.content()[0].scrollWidth>i},isVScroll:function(){if(!t.isNullOrUndefined(this.model.height)&&"string"==typeof this.model.height&&-1!=this.model.height.indexOf("%"))return this.content()[0].scrollHeight>this.element.outerHeight();if(this.model.height>0){if(this.content()[0].scrollHeight>Math.ceil(this.model.height))return!0;if(this.isHScroll()&&(this.content()[0].scrollHeight==this.model.height||this.content()[0].scrollHeight>this.model.height-(this.model.scrollerSize-2)))return!0}return!1},_setModel:function(e){for(var i in e)switch(i){case"enableRTL":e[i]?(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!0)):(this.element.removeClass("e-rtl"),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!1)),this._hScrollbar&&(this.element.find(".e-hhandle").css("left",0),this._hScrollbar.value(0));break;case"preventDefault":this.model.preventDefault=e[i];break;case"scrollLeft":(parseFloat(t.util.getVal(e[i]))<0||!this._hScroll)&&(e[i]=0),this._hScrollbar&&(e[i]=parseFloat(t.util.getVal(e[i]))>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(t.util.getVal(e[i]))),this._setScrollLeftValue(parseFloat(e[i])),this.scrollLeft(e[i]),!this._hScrollbar||this._hScrollbar._scrollData._scrollleftflag&&this.model.enableRTL||this.scrollX(e[i],!0);break;case"scrollTop":this._vScrollbar&&(e[i]=parseFloat(t.util.getVal(e[i]))>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(t.util.getVal(e[i]))),(parseFloat(e[i])<0||!this._vScroll)&&(e[i]=0),this.content().scrollTop(parseFloat(e[i])),this.scrollTop(e[i]),this.scrollY(e[i],!0);break;case"touchScroll":this.model.enableTouchScroll?(this._vScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent),this._hScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):this._off(this.content(),"mousedown touchstart");break;case"scrollOneStepBy":this._vScrollbar&&(this._vScrollbar._scrollData.scrollOneStepBy=e[i],this._vScrollbar.model.smallChange=e[i]),this._hScrollbar&&(this._hScrollbar._scrollData.scrollOneStepBy=e[i],this._hScrollbar.model.smallChange=e[i]);break;case"buttonSize":this._vScrollbar&&(this._vScrollbar.model.buttonSize=this.model.buttonSize),this._hScrollbar&&(this._hScrollbar.model.buttonSize=this.model.buttonSize),this.refresh();break;case"height":this._eleHeight=e[i],this.refresh();break;case"width":this._eleWidth=e[i],this.refresh();break;case"enabled":e[i]?this.enable():this.disable();break;default:this.refresh()}},_createScrollbar:function(i,s){var a,r,n,o,l,d=this,h=document.createElement("div");if(i===t.ScrollBar.Orientation.Vertical)r=this.model.scrollerSize,n=a=t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")?this.model.height-(s?this.model.scrollerSize:0):this.element.height()-(s?this.model.scrollerSize:0),o=this.content()[0].scrollHeight,l=this.scrollTop();else{if(r=a=this.model.width-(s?this.model.scrollerSize:0),n=this.model.scrollerSize,t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")){var c=this.content().find(this.model.targetPane);o=null!=this.model.targetPane&&c.length?c[0].scrollWidth+c.parent().width()-c.width():this.content()[0].scrollWidth}else r=a=this.element.width()-(s?this.model.scrollerSize:0),o=this.content()[0].scrollWidth;l=this.scrollLeft()}this.element.children(".e-hscrollbar").length>0?e(this.element.children(".e-hscrollbar")).before(h):this.element.append(h),e(h).ejScrollBar({elementHeight:d._eleHeight,elementWidth:d._eleWidth,buttonSize:d.model.buttonSize,orientation:i,viewportSize:a,height:n,width:r,maximum:o-a,value:l,smallChange:this.model.scrollOneStepBy,largeChange:3*this.model.scrollOneStepBy,scroll:t.proxy(this._scrollChanged,this),thumbEnd:t.proxy(this._thumbEnd,this),thumbStart:t.proxy(this._thumbStart,this),thumbMove:t.proxy(this._thumbMove,this)});var u=e(h).ejScrollBar("instance");return(i===t.ScrollBar.Orientation.Vertical||!s)&&this._off(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",this._mouseWheel)._on(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",{d:u._scrollData},this._mouseWheel),i===t.ScrollBar.Orientation.Horizontal?this._scrollXdata=u._scrollData:this._scrollYdata=u._scrollData,i===t.ScrollBar.Orientation.Horizontal&&this.model.enableRTL&&(u._scrollData.enableRTL=!0),u._enabled=this.model.enabled,u},_updateScrollbar:function(i,s){var a=i===t.ScrollBar.Orientation.Vertical?this._vScrollbar:this._hScrollbar;a&&(i===t.ScrollBar.Orientation.Vertical?(a.model.width=this.model.scrollerSize,a.model.height=a.model.viewportSize=this.model.height-(s?this.model.scrollerSize:0),a.model.maximum=this.content()[0].scrollHeight-a.model.viewportSize,a.model.value=this.scrollTop()):(a.model.width=a.model.viewportSize=this.model.width-(s?this.model.scrollerSize:0),a.model.height=this.model.scrollerSize,a.model.maximum=(null!=this.model.targetPane&&this.content().find(this.model.targetPane).length>0?this.content().find(this.model.targetPane)[0].scrollWidth+(this.content().width()-this.content().find(e(this.model.targetPane)).outerWidth()):this.content()[0].scrollWidth)-a.model.viewportSize,this.model.enableRTL||(a.model.value=this.scrollLeft())))},_autohide:function(){this.model.autoHide?(this.element.addClass("e-autohide"),this._on(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),e(":hover").filter(this.element[0]).length||this.content().siblings(".e-scrollbar.e-js").hide(),this._elementDimension(this._exactElementDimension(this.element))):(this.element.removeClass("e-autohide"),this._off(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").show())},_mouseUpContent:function(t){"mouseup"==t.type&&(this.element.removeClass("e-scroll-focus"),this._autohide(),this._off(e(document),"mouseup",this._mouseUpContent))},_scrollChanged:function(i){this._updateScroll=!0,void 0!==i.scrollTop?this.scrollY(i.scrollTop,!0,"",i.source):void 0!==i.scrollLeft&&this.scrollX(i.scrollLeft,!0,"",i.source),this._updateScroll=!1;var s=this;e.when(this.content()).done(t.proxy(function(){s._trigger("scrollEnd",{scrollData:i})}))},_bindBlurEvent:function(s,a){this._scrollEle=e(s).data("ejScrollBar"),this._event=a;this._listener=function(s){this._scrollEle._off(e(document),"mousemove touchmove",this._scrollEle._mouseMove),e(document).off("mouseup touchend",t.proxy(this._scrollEle._mouseUp,this._scrollEle)),this._scrollEle._prevY=null,this._off(e(document),"mousemove touchmove",this._mouseMove),this._off(e(document),"mouseup touchend",this._mouseUp),this._off(e(i),"blur"),this._evtData.handler,this._scrollEle._trigger("thumbEnd",{originalEvent:this._event,scrollData:this._evtData})},this._on(e(i),"blur",this._listener)},_thumbStart:function(e){this._evtData=e.scrollData;var t=(e.scrollData.handler,this.element.find("."+e.scrollData.handler).closest(".e-scrollbar")),t=(e.scrollData.handler,this.element.find("."+e.scrollData.handler).closest(".e-scrollbar"));this._bindBlurEvent(t,e),this._trigger("thumbStart",e)},_thumbMove:function(e){this._trigger("thumbMove",e)},_thumbEnd:function(t){this._trigger("thumbEnd",t),this._off(e(i),"blur")},refresh:function(i){if(i?(this._tempVscrollbar=null,this.element.children(".e-vscrollbar").remove(),this._tempHscrollbar=null,this.element.children(".e-hscrollbar").remove()):this.element.find(">.e-content").removeAttr("style"),!t.isNullOrUndefined(this._eleHeight)&&"string"==typeof this._eleHeight&&-1!=this._eleHeight.indexOf("%")&&this._parentHeight!=e(this.element).parent().height()){var s=this._exactElementDimension(this.element.parent());s=s.height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),s)}if(!t.isNullOrUndefined(this._eleWidth)&&"string"==typeof this._eleWidth&&-1!=this._eleWidth.indexOf("%")&&this._parentWidth!=e(this.element).parent().width()){var s=this._exactElementDimension(this.element.parent());s=s.width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),s)}this._ensureScrollers();var a=this.model.scrollLeft;this.model.enableRTL?(!this.element.hasClass("e-rtl")&&this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),a>0?this.content().scrollLeft(this._rtlScrollLeftValue-a):this._setScrollLeftValue(a)):this.content().scrollLeft(a),(this.scrollTop()&&t.isNullOrUndefined(this._vScrollbar)||!t.isNullOrUndefined(this._vScrollbar)&&this._vScrollbar&&null!=this._vScrollbar._scrollData&&!this._vScrollbar._scrollData.skipChange)&&this.scrollTop(this._isJquery3?Math.ceil(this.scrollTop()):this.scrollTop()),this.content().scrollTop(this.scrollTop()),this._vScrollbar&&(this._vScrollbar._scrollData.dimension="Height",this._updateScrollbar(t.ScrollBar.Orientation.Vertical,this._hScroll),this._vScroll&&!this._vScrollbar._calculateLayout(this._vScrollbar._scrollData)&&this._vScrollbar._updateLayout(this._vScrollbar._scrollData)),this._hScrollbar&&(this._hScrollbar._scrollData.dimension="Width",this._updateScrollbar(t.ScrollBar.Orientation.Horizontal,this._vScroll),this._hScroll&&!this._hScrollbar._calculateLayout(this._hScrollbar._scrollData)&&this._hScrollbar._updateLayout(this._hScrollbar._scrollData)),"msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version?this.element.find(".e-hhandle").css("left","0px"):null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this._addActionClass(),this._autohide()},_exactElementDimension:function(e){var t,i,s=e.get(0).getBoundingClientRect(),a=["left","right","top","bottom"];t=s.width?s.width:s.right-s.left,i=s.height?s.height:s.bottom-s.top;for(var r=0;r<a.length;r++)this["border_"+a[r]]=isNaN(parseFloat(e.css("border-"+a[r]+"-width")))?0:parseFloat(e.css("border-"+a[r]+"-width")),this["padding_"+a[r]]=isNaN(parseFloat(e.css("padding-"+a[r])))?0:parseFloat(e.css("padding-"+a[r]));return s={width:t,height:i}},_keyPressed:function(e,i){if(this.model.enabled){if(-1!==["input","select","textarea"].indexOf(i.tagName.toLowerCase()))return!0;var s,a;if(-1!==["up","down","pageUp","pageDown"].indexOf(e))this._vScrollbar&&("msie"==t.browserInfo().name&&this.model.allowVirtualScrolling&&this._content.focus(),s=this._vScrollbar._scrollData),a="o";else{if(-1===["left","right","pageLeft","pageRight"].indexOf(e))return!0;this._hScrollbar&&(s=this._hScrollbar._scrollData),a="i"}return!s||!this._changeTop(s,(e.indexOf(a)<0?-1:1)*("p"!==e[0]?1:3)*s.scrollOneStepBy,"key")}},scrollY:function(e,i,s,a,r){var n=this;if(""!==e){if(i){var r={source:a||"custom",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:e,originalEvent:r};if(e=this._isJquery3?Math.ceil(r.scrollTop):r.scrollTop,this.scrollTop(e),this._trigger("scroll",r))return;return void this.content().scrollTop(e)}(t.isNullOrUndefined(s)||""===s)&&(s=100),this._vScrollbar&&(e=parseFloat(e)>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(e)),e=this._isJquery3?Math.ceil(e):e,this.scrollTop(e),this.content().stop().animate({scrollTop:e},s,"linear",function(){n._trigger("scroll",{source:a||"custom",scrollData:n._vScrollbar?n._vScrollbar._scrollData:null,scrollTop:e,originalEvent:r})})}},scrollX:function(e,i,s,a,r){var n=this;if(""!==e){this._hScrollbar&&(e=parseFloat(e)>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(e));var o=t.browserInfo().name;if(this.model.enableRTL&&"mozilla"!=o){e<0&&(e=Math.abs(e));null!=this.model.targetPane?this.content().find(this.model.targetPane)[0]:this.content()[0];"mousemove"!=r&&"touchmove"!=r&&"msie"!=o&&"msie"!=o&&(e=this._hScrollbar._scrollData.scrollable-e)}if(this.scrollLeft(e),i){if(this._trigger("scroll",{source:a||"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:r}))return;return void(null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).scrollLeft(e):this.content().scrollLeft(e))}(t.isNullOrUndefined(s)||""===s)&&(s=100),null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).stop().animate({scrollLeft:e},s,"linear"):this.content().stop().animate({scrollLeft:e},s,"linear",function(){n._trigger("scroll",{source:a||"custom",scrollData:n._hScrollbar?n._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:r})})}},enable:function(){var e=this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon");e.hasClass("e-disable")&&(e.removeClass("e-disable").attr({"aria-disabled":!1}),this.model.enabled=!0),this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},disable:function(){this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon").addClass("e-disable").attr({"aria-disabled":!0}),this.model.enabled=!1,this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},_changeTop:function(e,i,s,a){var r,n=Math.ceil(null!=this.model.targetPane&&"height"!=e.dimension?this.content().find(this.model.targetPane)[e.scrollVal]():this.content()[e.scrollVal]());return"height"==e.dimension&&0==n&&(n=0!=this.scrollTop()?this.scrollTop():0),r=n+i,(e.enableRTL?r<e.scrollable:r>e.scrollable)&&(r=Math.round(e.scrollable)),(e.enableRTL?r>0:r<0)&&(r=0),r!==n&&(this["scroll"+e.xy](r,!0,"",s,a),"X"!==e.xy||t.isNullOrUndefined(this._hScrollbar)?t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(r,s,!0,a):this._hScrollbar.scroll(r,s,!0,a)),r!==n},_mouseWheel:function(t){if((!this._vScrollbar||!t.ctrlKey)&&(this._vScrollbar||t.shiftKey)&&t.data&&this.model.enabled){var s,a=0,r=t.data.d,n=t;if(t=t.originalEvent,this._wheelStart&&this._trigger("wheelStart",{originalEvent:t,scrollData:n.data.d}),this._wheelStart=!1,clearTimeout(e.data(this,"timer")),1==this._wheelx||0!=t.wheelDeltaX&&0!=t.wheelDeltaY||(this._wheelx=1),0==navigator.platform.indexOf("Mac")&&0==this._wheelx&&("webkit"==this._browser||"chrome"==this._browser))return!0;if("mozilla"==this._browser?t.axis==t.HORIZONTAL_AXIS?r=this._scrollXdata:this._scrollYdata:"msie"==this._browser?("wheel"==t.type&&(a=t.deltaX/120),"mousewheel"==t.type&&t.shiftKey&&(r=this._scrollXdata,t.preventDefault?t.preventDefault():t.returnValue=!1)):this._wheelx&&0!=t.wheelDeltaX&&0==t.wheelDeltaY&&this._scrollXdata&&(r=this._scrollXdata),0==t.wheelDeltaX&&(this._wheelx=t.wheelDeltaX),t.wheelDelta?(a=this._normalizingDelta(t),i.opera&&parseFloat(i.opera.version,10)<10&&(a=-a)):t.detail&&(a=t.detail/3),a){n.originalEvent&&(s=n.originalEvent.wheelDelta&&n.originalEvent.wheelDelta>0||n.originalEvent.detail&&n.originalEvent.detail<0?-1:1),this._changeTop(r,a*r.scrollOneStepBy,"wheel",t)?(t.preventDefault?t.preventDefault():n.preventDefault(),this._trigger("wheelMove",{originalEvent:t,scrollData:n.data.d,direction:s})):(this._trigger("scrollEnd",{originalEvent:t,scrollData:n}),this._wheelx=0);var o=this;e.data(this,"timer",setTimeout(function(){o._wheelStart=!0,o._trigger("wheelStop",{originalEvent:t,scrollData:n.data.d,direction:s})},250))}}},_normalizingDelta:function(e){return 0==navigator.platform.indexOf("Mac")?-e.wheelDelta/3:-e.wheelDelta/120},_contentHeightWidth:function(){"block"==this.content().siblings().css("display")&&this.model.autoHide?(this._hScroll&&this.content()[this._contentHeight](this._ElementHeight-this.model.scrollerSize),this._vScroll&&this.content()[this._contentWidth](this._ElementWidth-this.model.scrollerSize)):"none"==this.content().siblings().css("display")&&this.model.autoHide&&(this._vScroll||this._hScroll)&&(this.content()[this._contentHeight](this._ElementHeight),this.content()[this._contentWidth](this._ElementWidth))},_scrollerHover:function(e){this.model.enabled&&("mouseenter"!=e.type&&"touchstart"!=e.type||this.content().siblings().is(":visible")?"mouseleave"!=e.type&&"touchend"!=e.type||this.element.hasClass("e-scroll-focus")||(this.content().siblings().hide(),this._contentHeightWidth(),this._trigger("scrollHide",{originalEvent:e})):(this.content().siblings().css("display","block"),this._contentHeightWidth(),this._ensureScrollers(),this._setScrollLeftValue(this.model.scrollLeft),this._trigger("scrollVisible",{originalEvent:e})))},_mouseUp:function(s){if(s.data){var a=s.data.d;!this.model.enableRTL||"mouseup"!=s.type&&"touchend"!=s.type||(this.model.scrollLeft=this._rtlScrollLeftValue-this.model.scrollLeft),"mouseup"!==s.type&&"touchend"!==s.type&&(s.toElement||s.relatedTarget)||(this.content().css("cursor","default"),this._off(e(document),"mousemove touchmove"),this._off(this.content(),"touchmove",this._touchMove),this._off(e(document),"mouseup touchend",this._mouseUp),a.fromScroller=!1,!0!==this._mouseMoved||"thumb"!==s.data.source||t.isNullOrUndefined(this.model)||(e.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:s,scrollData:a})},this)),this._off(e(i),"blur"))),a.up=!0,this._mouseMoved=!1,i.ontouchmove=null}},_mouseDownOnContent:function(s){if(this._startX=void 0!=s.clientX?s.clientX:s.originalEvent.changedTouches[0].clientX,this._startY=void 0!=s.clientY?s.clientY:s.originalEvent.changedTouches[0].clientY,this._timeStart=s.timeStamp||Date.now(),this.model.enabled){var a=s.data.d;this._evtData=s.data;var r=(a.handler,this.element.find("."+a.handler).closest(".e-scrollbar"));if(this._bindBlurEvent(r,s),!this._trigger("thumbStart",{originalEvent:s,scrollData:a})&&(3!=s.which||2!=s.button)){a.fromScroller=!0;var n,o=null,l=1;this._document=e(document),this._window=e(i),this._mouseMove=function(e){if(this.model.enableRTL&&this._UpdateScrollLeftValue(s),this._startX+this._startY!=e.clientX+e.clientY){if(this._relDisX=(void 0!=e.clientX?this._startx=e.clientX:this._startx=e.originalEvent.changedTouches[0].clientX)-this._startX,this._relDisY=(void 0!=e.clientY?this._starty=e.clientY:this._starty=e.originalEvent.changedTouches[0].clientY)-this._startY,this._duration=(e.timeStamp||Date.now())-this._timeStart,this._velocityY=Math.abs(this._relDisY)/this._duration,this._velocityX=Math.abs(this._relDisX)/this._duration,Math.abs(this._relDisX)>Math.abs(this._relDisY)?this._swipe=this._relDisX>0?"left":"right":this._swipe=this._relDisY>0?"up":"down",!t.isNullOrUndefined(e.target.tagName)&&"iframe"===e.target.tagName.toLowerCase())return e.type="mouseup",void this._mouseUp(e);var r="mousemove"==e.type?e[a.clientXy]:e.originalEvent.changedTouches[0][a.clientXy];if(o&&r!==o){this._mouseMoved=!0;var d=r-o,h=this.model[a.scrollVal]-d;if(1==l&&Math.abs(d)>5&&(n=a.position,l=0),0==l&&(o=r),h>=0&&h<=a.scrollable&&n===a.position){var c=this._velocityY>.5&&this._duration<50&&"Top"==a.position,u=this._velocityX>.5&&this._duration<50&&"Left"==a.position;(this._velocityY>.5||this._velocityX>.5)&&this._duration<50?c?(h=Math.abs(this._relDisY)+this._duration*this._velocityY,this._startY>this._starty?(h+=this.scrollTop())>a.scrollable&&(h=a.scrollable):(h<this.scrollTop()&&(h=Math.abs(h-this.scrollTop())),h>this.scrollTop()&&(h=0)),this.scrollTop()<=a.scrollable&&this.scrollY(h,!1,this.model.animationSpeed,"thumb")):u&&(h=Math.abs(this._relDisX),this._startX>this._startx?(h+=this.scrollLeft())>a.scrollable&&(h=a.scrollable):(h-=this.scrollLeft(),((h=Math.abs(h))>a.scrollable||h>=this.scrollLeft())&&(h=0)),this.scrollLeft()<=a.scrollable&&this.scrollX(h,!1,this.model.animationSpeed,"thumb")):(this["scroll"+a.xy](h,!0,"","thumb",e.type),"X"===a.xy?this._hScrollbar.scroll(h,"thumb",!0,e.type):t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(h,"thumb",!0,e.type),this.content().css("cursor","pointer"),this._trigger("thumbMove",{originalEvent:e,direction:"down"==this._swipe||"right"==this._swipe?1:-1,scrollData:a}))}}i.ontouchmove=function(e){e=e||i.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1},null==o&&(o=r),(0==Math.round(this._content.scrollTop())&&"down"==this._swipe||(Math.ceil(this._content.scrollTop())==a.scrollable||Math.ceil(this._content.scrollTop())+1==a.scrollable)&&"up"==this._swipe)&&(this._trigger("scrollEnd",{originalEvent:e.originalEvent,scrollData:e}),i.ontouchmove=null)}},this._trigger("touchStart",{originalEvent:s,direction:"down"==this._swipe||"right"==this._swipe?1:-1,scrollData:this._scrollData,scrollTop:this.content().scrollTop(),scrollLeft:this.content().scrollLeft()}),this._on(e(document),"mousemove",{d:a,source:"thumb"},this._mouseMove),this._isNativeScroll?this._on(this.content(),"touchmove",{d:a,source:"thumb"},this._touchMove):this._on(e(document),"touchmove",{d:a,source:"thumb"},this._mouseMove),this._on(e(document),"mouseup touchend",{d:a,source:"thumb"},this._mouseUp)}}},_touchMove:function(e){this.content().css("cursor","pointer"),this._mouseMoved=!0,this._tempLeft=null!=this.model.targetPane?this.content().find(this.model.targetPane).scrollLeft():this.content().scrollLeft(),this._tempTop=this.content().scrollTop()},_touchDown:function(e){var t;t=this._tempLeft!=this.scrollLeft()?this._scrollXdata:this._tempTop!=this.scrollTop()?this._scrollYdata:this._scrollYdata?this._scrollYdata:this._scrollXdata,this._trigger("scrollStop",{source:"thumb",originalEvent:e,scrollData:t,scrollTop:this.content().scrollTop(),scrollLeft:this.content().scrollLeft()})},_speedScrolling:function(e){if(this._mouseMoved){if(this.element.find(".e-vhandle").length>0){var t=this.content().scrollTop();if(this._tempTop!==t){this._trigger("thumbMove",{originalEvent:e,direction:"down"==this._swipe||"right"==this._swipe?1:-1,scrollData:this._scrollData}),this._vScrollbar.scroll(this.content().scrollTop(),"thumb",!0,"touchmove");var e={source:"thumb",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:this.content().scrollTop(),originalEvent:e},i=this._isJquery3?Math.ceil(e.scrollTop):e.scrollTop;if(this.scrollTop(i),this._trigger("scroll",e))return}}if(this.element.find(".e-hhandle").length>0){var s=null!=this.model.targetPane?this.content().find(this.model.targetPane):this.content(),a=s.scrollLeft();if(this._tempLeft!==a){this._trigger("thumbMove",{originalEvent:e,direction:"down"==this._swipe||"right"==this._swipe?1:-1,scrollData:this._scrollData}),this._hScrollbar.scroll(s.scrollLeft(),"thumb",!0,"touchmove");var e={source:"thumb",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:this.content().scrollLeft(),originalEvent:e},i=this._isJquery3?Math.ceil(e.scrollLeft):e.scrollLeft;if(this.scrollLeft(i),this._trigger("scroll",e))return}}this.content().css("cursor","pointer")}},_scroll:function(s){var a=[this._vScrollbar?this._vScrollbar._scrollData:null,this._hScrollbar?this._hScrollbar._scrollData:null];if(this._evtData)var r=this._evtData.d?this._evtData.d:this._evtData;for(var n=0;n<2;n++){var o=a[n];if(o&&!o.skipChange&&(this.model&&(!this.model.targetPane||this.model.targetPane&&r&&"X"!=r.xy)&&("height"===o.dimension?this.scrollTop(s.target[o.scrollVal]):this.scrollLeft(s.target[o.scrollVal])),
this.model&&null!=this.model.targetPane&&1==n&&this.content().find(this.model.targetPane).length?o.sTop=this.content().find(this.model.targetPane)[0][o.scrollVal]:"scrollTop"==o.scrollVal?o.sTop=this.scrollTop():o.sTop=this.scrollLeft(),this[o.scrollVal](o.sTop),!o.fromScroller)){if(1===n){var l=this.content()[0];this._rtlScrollLeftValue&&l.scrollWidth-l.clientWidth!=this._rtlScrollLeftValue&&(this._rtlScrollLeftValue=l.scrollWidth-l.clientWidth),o.sTop=this.model&&"mozilla"!=t.browserInfo().name&&this.model.enableRTL&&!this._hScrollbar._scrollData._scrollleftflag?0==this._rtlScrollLeftValue?-1*o.sTop:o.sTop-this._rtlScrollLeftValue:o.sTop,this._hScrollbar.scroll(o.sTop,"",!0)}else this._vScrollbar.scroll(o.sTop,"",!0);(2==a.length&&1==n||1==a.length&&0==n)&&(this._externalScroller=!1,this.model&&this._trigger("scroll",{source:"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:this.scrollLeft(),originalEvent:s}))}}this._isNativeScroll&&this.model.enableTouchScroll&&this._speedScrolling(s),this._UpdateScrollLeftValue(s);var d=this;this._vScrollbar&&this._scrollYdata&&this.model&&this._scrollYdata.scrollable-this.model.scrollOneStepBy>=this.scrollTop()&&(e(":hover").filter(this.element[0]).length||d._off(t.getScrollableParents(d.wrapper),"scroll",null),i.onmousewheel=function(t){d.model&&d.model.preventDefault&&e(":hover").filter(d.element[0]).length})},_UpdateScrollLeftValue:function(e){this.model&&"touchstart"!=e.type&&"mousedown"!=e.type&&this.model.enableRTL&&this._rtlScrollLeftValue&&this.model.scrollLeft!=this._previousScrollLeft&&(this.model.scrollLeft=this._rtlScrollLeftValue-this.model.scrollLeft,this._previousScrollLeft=this.model.scrollLeft),(this.model&&"touchstart"==e.type||"mousedown"==e.type)&&this.model.enableRTL&&(this.model.scrollLeft=this.content().scrollLeft(),this.option("scrollLeft",this.content().scrollLeft()))},_changevHandlerPosition:function(e){var t=this._vScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&e>=0&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_changehHandlerPosition:function(e){var t=this._hScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&top>=0&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_destroy:function(){this._off(this.content(),"scrollstop",this._touchDown),this._off(e(document),"mouseup",this._mouseUpContent),this.element.css({width:"",height:""}).children(".e-vscrollbar,.e-hscrollbar").remove(),this.content().removeClass("e-content").css({width:"",height:""}),this.element.removeClass("e-widget")},_preventDefault:function(e){e=e||i.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}})}(jQuery,Syncfusion,window),function(e,t,i){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.gridResize=function(t){this.$headerTable=t.getHeaderTable(),this.gridInstance=t,this._colMinWidth=15,this._$visualElement=e(),this._currentCell=-1,this._allowStart=!1,this._oldWidth=null,this._orgX=null,this._orgY=null,this._extra=null,this._expand=!1,this._target=null,this._cellIndex=-1},t.gridFeatures.gridResize.prototype={_mouseHover:function(t){if(!this._$visualElement.is(":visible")){this._allowStart=!1,e(t.target).is(".e-headercelldiv")&&(t.target=t.target.parentNode);var i=e(t.target);if(!e(t.target).hasClass("e-filtericon")||"col-resize"!=e(t.target).css("cursor")&&"col-resize"!=e(t.target).closest("tr").css("cursor")||(e(t.target).css("cursor","pointer"),e(t.target).closest("tr").css("cursor","pointer")),i.hasClass("e-headercell")){var s=t.target,a=s.getBoundingClientRect(),r=0,n=0;if((t.type="mousemove")?(r=t.clientX,n=t.clientY):(t.type="touchmove")?(r=evt.originalEvent.changedTouches[0].clientX,n=evt.originalEvent.changedTouches[0].clientY):(t.type="MSPointerMove")&&(r=t.originalEvent.clientX,n=t.originalEvent.clientY),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns)var o=this.gridInstance.getHeaderContent().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left;else var o=this.gridInstance.getHeaderTable().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left;if((r>=a.left+document.documentElement.scrollLeft+s.offsetWidth-5||r<=a.left+3)&&r<o&&r>=a.left&&n<=a.top+document.documentElement.scrollTop+t.target.offsetHeight){if(r>a.left+3)var l=e(t.target).find(".e-headercelldiv");else var l=e(t.target).prevAll("th:visible:first").find(".e-headercelldiv");var d=window.pageXOffset||document.documentElement.scrollTop||document.body.scrollTop,h=this.gridInstance.element.find(".e-headercell").not(".e-detailheadercell").offset().left+10-d;(this.gridInstance.model.enableRTL&&r<=h||!this.gridInstance.model.enableRTL&&r>=h)&&((this.gridInstance.model.showStackedHeader||l.length)&&-1==e.inArray(e(l).attr("data-ej-mappingname"),this.gridInstance._disabledResizingColumns)?(this.gridInstance.model.showStackedHeader&&e(i.parents("thead")).find("tr").addClass("e-resizedragicon"),!this.gridInstance.model.showStackedHeader&&i.parent().addClass("e-resizedragicon"),e(t.target).hasClass("e-stackedHeaderCell")?this._currentCell=this.gridInstance.getHeaderContent().find(".e-headercell:visible").index(s):this._currentCell=this.gridInstance.getHeaderContent().find(".e-headercell:visible").not(".e-stackedHeaderCell,.e-detailheadercell").index(s),this.gridInstance.model.enableRTL&&(this._currentCell=this._currentCell-1),this._allowStart=!0):(i.parent().css("cursor","pointer"),this._currentCell=-1))}else this.gridInstance.element.find(".e-columnheader").removeClass("e-resizedragicon"),this._currentCell=-1}}},_start:function(t,i){var s,a,r,n=this.gridInstance.getHeaderTable().find(".e-columnheader");if(a=e(this._target).hasClass("e-stackedHeaderCell")?n.find(".e-headercell").not(".e-hide"):n.find(".e-headercell").not(".e-stackedHeaderCell,.e-hide"),-1!=this._currentCell&&this._currentCell<a.length&&(r=a[this._currentCell]),void 0!==r){var o=r.getBoundingClientRect();if(s=this._tableY=o.top+parseInt(-1!=navigator.userAgent.indexOf("WebKit")?document.body.scrollTop:document.documentElement.scrollTop),this._allowStart){var l=this._$visualElement=e(document.createElement("div")),d=this.gridInstance.element.find(".e-gridcontent").first().height()+this.gridInstance.element.find(".e-gridheader").height();if(this.gridInstance.model.showStackedHeader&&this.gridInstance.model.stackedHeaderRows.length>0)for(var h=this.gridInstance.getHeaderTable().find("tr.e-columnheader"),c=(h.length,e(this._target).parent("tr")[0].rowIndex),u=0;u<c;u++)d-=e(h[u]).height();l.addClass("e-reSizeColbg").appendTo(this.gridInstance.element).attr("unselectable","on").css("visibility","hidden"),this.gridInstance._resizeTimeOut=setTimeout(function(){l.css({visibility:"visible",height:d+"px",cursor:"col-resize",left:t,top:s,position:"fixed"})},100),this._oldWidth=r.offsetWidth,this._orgX=t,this._orgY=i,this._extra=t-this._orgX,this._expand=!0}else this._currentCell=-1}},_mouseMove:function(e){if(this._expand){var t=0,i=0;"mousemove"==e.type?(t=e.clientX,i=e.clientY):"MSPointerMove"==e.type?(t=e.originalEvent.clientX,i=e.originalEvent.clientY):"touchmove"==e.type&&(t=e.originalEvent.changedTouches[0].clientX,i=e.originalEvent.changedTouches[0].clientY),0==t&&0==i&&-1!=navigator.userAgent.indexOf("WebKit")&&(t=e.pageX,i=e.pageY),t+=document.documentElement.scrollLeft,e.preventDefault(),this._moveVisual(t)}else this._mouseHover(e)},_touchStart:function(t){if(!this._$visualElement.is(":visible")){this._allowStart=!1,e(t.target).is(".e-headercelldiv")&&(t.target=t.target.parentNode);var i=e(t.target);if(i.hasClass("e-headercell")){var s=t.target,a=s.getBoundingClientRect(),r=0,n=0;"touchstart"==t.type&&(r=t.originalEvent.changedTouches[0].clientX,n=t.originalEvent.changedTouches[0].clientY);var o=this.gridInstance.element.children(".e-gridheader");if(this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns)var l=this.gridInstance.getHeaderContent().width()+o.find(".e-columnheader").offset().left;else var l=this.gridInstance.getHeaderTable().width()+o.find(".e-columnheader").offset().left;if((r>=a.left+document.documentElement.scrollLeft+s.offsetWidth-10||r<=a.left+8)&&r<l&&r>=a.left&&n<=a.top+document.documentElement.scrollTop+t.target.offsetHeight){if(r>a.left+8)var d=e(t.target).find(".e-headercelldiv");else var d=e(t.target).prevAll("th:visible:first").find(".e-headercelldiv");var h=window.pageXOffset||document.documentElement.scrollTop||document.body.scrollTop,c=this.gridInstance.element.find(".e-headercell").not(".e-detailheadercell").offset().left+10-h;(this.gridInstance.model.enableRTL&&r<=c||!this.gridInstance.model.enableRTL&&r>=c)&&((this.gridInstance.model.showStackedHeader||d.length)&&-1==e.inArray(e(d).attr("data-ej-mappingname"),this.gridInstance._disabledResizingColumns)?(e(t.target).hasClass("e-stackedHeaderCell")?this._currentCell=this.gridInstance.getHeaderContent().find(".e-headercell:visible").index(s):this._currentCell=this.gridInstance.getHeaderContent().find(".e-headercell:visible").not(".e-stackedHeaderCell,.e-detailheadercell").index(s),this.gridInstance.model.enableRTL&&(this._currentCell=this._currentCell-1),this._allowStart=!0):this._currentCell=-1)}else this._currentCell=-1}if(this._allowStart){if(this._target=i,"ejGrid"==this.gridInstance.pluginName&&this.gridInstance.model.allowResizing){if(this._triggerResizeEvents("resizeStart",r))return}else if("ejTreeGrid"==this.gridInstance.pluginName&&this.gridInstance.model.allowColumnResize&&this.gridInstance._triggerColumnResize("columnResizeStart",r,t))return;return r+=document.documentElement.scrollLeft,2!=t.button&&this._start(r,n),!1}return!0}},_getCellIndex:function(t){var i=(e(t._target),t._target),s=i.getBoundingClientRect(),a=-1!=navigator.userAgent.indexOf("WebKit")?document.body.scrollLeft:document.documentElement.scrollLeft;this._orgX<s.left+5+a&&(i=e(i).prevAll(":visible:first")[0]);var r=i.cellIndex,n=r;return t.gridInstance.model.groupSettings.groupedColumns.length&&(n=r-t.gridInstance.model.groupSettings.groupedColumns.length),n},_reSize:function(i,s){var a;if(this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this._initialTableWidth=this.gridInstance.getHeaderTable().first().parent().width()+this.gridInstance.getHeaderTable().last().parent().width():this._initialTableWidth=this.gridInstance.getHeaderTable().parent().width(),this.gridInstance.model.enableRTL&&(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell=this._currentCell-1:!this.gridInstance.model.enableRTL&&this._getResizableCell(),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns>0)var r=this.gridInstance.getHeaderTable().find("thead");else var r=e(this._target).parents("thead");if(-1!=this._currentCell&&this._expand){this._expand=!1;var n=e(this._target).hasClass("e-stackedHeaderCell")?r.find(".e-headercell:not(.e-detailheadercell)").filter(":visible"):r.find(".e-headercell:not(.e-detailheadercell,.e-stackedHeaderCell)").filter(":visible"),o=n[this._currentCell],l=o.offsetWidth,d=i-this._orgX;if(this.gridInstance.model.enableRTL&&(d=-d),parseInt(d)+parseInt(l)>this._colMinWidth){0!=d&&r.css("cursor","default");var h,c;if("nextcolumn"==t.getObject("resizeSettings.resizeMode",this.gridInstance.model)){var u=this.gridInstance.getHeaderTable().find("colgroup").find("col");t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),u=this.gridInstance._$headerCols);var h=u.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell),c=parseInt(h[0].style.width)}this._resizeColumnUsingDiff(l,d),a=this.gridInstance.element.find(".e-gridcontent").first();var p=a.find("div").hasClass("e-content"),m=!t.isIOSWebView()&&this.gridInstance.getBrowserDetails();if(m&&"msie"==m.browser&&this.gridInstance.model.allowScrolling){var g=this.gridInstance.getContentTable().width(),f=this.gridInstance._calculateWidth();this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns>0?this.gridInstance.model.showSummary&&!t.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterTable().last().width(f-this.gridInstance.getFooterContent().find(".e-frozenfootertdiv").width()):f>g&&this.gridInstance.model.showSummary&&this.gridInstance.getFooterTable().width(f),parseInt(m.version,10)>8&&this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length&&(f>g?this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",20/a.find("table").first().width()*100+"%"):(this.gridInstance.getContentTable().css("width","100%"),this.gridInstance._groupingAction(!0),this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",(this.gridInstance.getHeaderTable().find("colgroup").find("col").first().width()/a.find("table").first().width()*100).toFixed(2)+"%"))),this.gridInstance.getHeaderTable().parent().scrollLeft(a.find(".e-content").scrollLeft()-1)}if(this.gridInstance._colgroupRefresh(),this.gridInstance.model.allowTextWrap&&(this.gridInstance._isResized=!0,this.gridInstance.rowHeightRefresh()),this.gridInstance.model.groupSettings.groupedColumns.length&&!this.gridInstance.model.isEdit&&this.gridInstance._recalculateIndentWidth(),"normal"!=t.getObject("resizeSettings.resizeMode",this.gridInstance.model))if("nextcolumn"==t.getObject("resizeSettings.resizeMode",this.gridInstance.model)){var _=this.gridInstance.getHeaderTable().find("colgroup").find("col"),v=this.gridInstance.getContentTable().find("colgroup").find("col");t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),_=this.gridInstance._$headerCols,v=this.gridInstance._$contentCols);var b,x=this._currentCell+1,y=_.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)?x+this.gridInstance.model.groupSettings.groupedColumns.length:x),w=parseInt(y[0].style.width)+(c-parseInt(h[0].style.width));if(w<this._colMinWidth&&(w=this._colMinWidth),y.width(w),this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length){var C=this.gridInstance.getContentTable().find(".e-recordtable"),S=C.find("colgroup"),T=this.gridInstance.getVisibleColumnNames().length;this.gridInstance.getContentTable().find(".e-detailrow").length&&(S=S.not(C.find(".e-detailrow").find("colgroup")).get());for(var R=0;R<S.length;R++){var k=e(S[R]).find("col").filter(this._diaplayFinder);k.length>T&&k.splice(0,k.length-T),e(k[x]).width(w)}}if(this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){if(x>=0&&x<this.gridInstance.model.scrollSettings.frozenColumns&&this._getFrozenResizeWidth()+d>this.gridInstance.element.find(".e-headercontent").first().width())return;b=v.filter(this._diaplayFinder).eq(x)}else b=v.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)?x+this.gridInstance.model.groupSettings.groupedColumns.length:x);if(b.width(w),this.gridInstance._findColumnsWidth(),this.gridInstance.model.scrollSettings.frozenColumns>0&&e(o).is(":last-child")&&"ejGrid"==this.gridInstance.pluginName){var O=h.width()-c,D=this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width()+O,I=this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width()-O,j=parseInt(this.gridInstance.getHeaderContent().find(".e-movableheader")[0].style["margin-left"])+O;this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(D),this.gridInstance.getContent().find(".e-frozencontentdiv").width(D),this.gridInstance.model.showSummary&&!t.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterContent().find(".e-frozenfooterdiv").width(D),this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width(I),this.gridInstance.getContent().find(".e-movablecontentdiv").width(I),this.gridInstance.model.showSummary&&!t.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterContent().find(".e-movablefooterdiv").width(I),this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",j),this.gridInstance.getContent().find(".e-movablecontent").css("margin-left",j),this.gridInstance.model.showSummary&&!t.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterContent().find(".e-movablefooter").css("margin-left",j)}if(this.gridInstance.model.scrollSettings.frozenColumns>0&&e(o).is(":last-child")&&"ejTreeGrid"==this.gridInstance.pluginName){var O=h.width()-c,D=this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width()+O,I=this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width()-O,j=parseInt(this.gridInstance.getHeaderContent().find(".e-movableheader")[0].style["margin-left"])+O;this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(D),this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",j),this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width(I),this.gridInstance.getContent().find(".e-frozencontainer").width(D).next().css("margin-left",j+"px"),this.gridInstance.getContent().find(".e-movablecontent").width(I),this.gridInstance.model.showTotalSummary&&(this.gridInstance._$totalSummaryRowContainer.find(".e-frozenfooterdiv").width(D),this.gridInstance._$totalSummaryRowContainer.find(".e-movablefooter").css("margin-left",j+"px")),this.gridInstance._renderScroller(!0)}this.gridInstance.model.scrollSettings.frozenColumns>0&&e(this._target).parent("tr").parents("div:first").hasClass("e-frozenheaderdiv")&&"ejGrid"==this.gridInstance.pluginName&&(this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(this._newWidth),this.gridInstance.getContent().find(".e-frozencontentdiv").width(this._newWidth),this.gridInstance.model.showSummary&&!t.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterContent().find(".e-frozenfooterdiv").width(this._newWidth))}else if(!this.gridInstance.model.scrollSettings.frozenColumns){var L=this.gridInstance.getHeaderTable().width();"ejTreeGrid"==this.gridInstance.pluginName||this.gridInstance.model.allowScrolling||this.gridInstance.model.isResponsive?this.gridInstance.model.showSummary&&!t.isNullOrUndefined(this.gridInstance.getFooterTable())&&this.gridInstance.getFooterTable().css("width",L+parseInt(d)):e("#"+this.gridInstance._id).css("width",L+parseInt(d)),this.gridInstance.model.scrollSettings.width+=parseInt(d),this.gridInstance.getContent().width()>this.gridInstance.getContentTable().width()?(this.gridInstance.getContentTable().addClass("e-tableLastCell"),this.gridInstance.getHeaderTable().addClass("e-tableLastCell")):(this.gridInstance.getContentTable().removeClass("e-tableLastCell"),this.gridInstance.getHeaderTable().removeClass("e-tableLastCell"))}if("msie"!=m.browser&&m&&this.gridInstance.model.allowScrolling&&0==this.gridInstance.model.scrollSettings.frozenColumns){"fixed"!=this.gridInstance.model.columnLayout&&(this.gridInstance.getHeaderTable().width("100%"),this.gridInstance.getContentTable().width("100%")),this.gridInstance.model.showSummary&&!t.isNullOrUndefined(this.gridInstance.getFooterTable())&&this.gridInstance.getFooterTable().width("100%");var A=this.gridInstance._calculateWidth();(A<=this.gridInstance.getContentTable().width()||this.gridInstance.getHeaderTable().width()>this.gridInstance.getContentTable().width())&&this.gridInstance.model.showSummary&&!t.isNullOrUndefined(this.gridInstance.getFooterTable())&&this.gridInstance.getFooterTable().width(A)}if(this.gridInstance.model.allowResizing&&"default"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")){var E=this._currentCell,P=e(this._target),M=[],F=[],w=l+d,N={};if(this.gridInstance.model.showStackedHeader&&P.hasClass("e-stackedHeaderCell")){for(var z,V=P.parent(".e-stackedHeaderRow").index(),B=P.text(),H=this.gridInstance.model.stackedHeaderRows[V].stackedHeaderColumns,R=0;R<H.length;R++)H[R].headerText==B&&(z=H[R].column);var Y=z|[];t.isNullOrUndefined(z)||z instanceof Array||(Y=z.split(","));for(var R=0;R<Y.length;R++){var U=this.gridInstance.getColumnIndexByField(Y[R]);M.push(U),F.push(this.gridInstance.model.columns[U])}N={columnIndex:M,column:F,oldWidth:l,newWidth:w}}else N={columnIndex:E,column:this.gridInstance.model.columns[E],oldWidth:l,newWidth:w};this.gridInstance._trigger("resized",N)}this.gridInstance.model.allowScrolling&&(this.gridInstance.getScrollObject().refresh(this.gridInstance.model.scrollSettings.frozenColumns>0),this.gridInstance.model.isResponsive&&this.gridInstance.model.minWidth&&this.gridInstance.windowonresize(),!p&&a.find("div").hasClass("e-content")&&this.gridInstance.refreshScrollerEvent(),this.gridInstance._isHscrollcss())}}this._target=null,this._$visualElement.remove(),this._expand=!1,this._currentCell=-1,this._allowStart=!1},_getFrozenResizeWidth:function(){for(var e=this.gridInstance.getHeaderTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumns:0),t=0,i=0;i<e.length;i++)"none"!=e.eq(i).css("display")&&(t+=parseInt(e[i].style.width.replace("px","")));return t},_diaplayFinder:function(){return"none"!=e(this).css("display")},_resizeColumnUsingDiff:function(i,s){this._currntCe=this._currentCell,this._widthchanges(i,s);var a,r,n=this._newWidth,o=this._extra,l=this._$headerCols,d=this._$ContentCols,h=this._$headerCol;this._$frozenCols;if("ejTreeGrid"==this.gridInstance.pluginName&&s>0&&!t.isNullOrUndefined(this.gridInstance._currentCell)&&1==this.gridInstance.model.columns[this.gridInstance._currentCell].isFrozen){var c=this.gridInstance._frozenWidth();if(c>this.gridInstance._gridWidth-18-50)return}if(n>0&&0!=s){if(n<this._colMinWidth&&(n=this._colMinWidth),"nextcolumn"==t.getObject("resizeSettings.resizeMode",this.gridInstance.model)){var u=h.next(),p=!(!this.gridInstance.model.scrollSettings.frozenColumns||this._currentCell!=this.gridInstance.model.scrollSettings.frozenColumns-1);p&&(u=l.eq(this.gridInstance.model.scrollSettings.frozenColumns)),(p||!h.is(":last-child"))&&u.width()+(h.width()-n)<=this._colMinWidth&&(n=h.width()+(u.width()-this._colMinWidth))}var s=n-i;if(this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){if(this._currentCell>=0&&this._currentCell<this.gridInstance.model.scrollSettings.frozenColumns&&this._getFrozenResizeWidth()+s>this.gridInstance.element.find(".e-headercontent").first().width())return;a=d.filter(this._diaplayFinder).eq(this._currentCell)}else a=d.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell);if(e(this._target).parent("tr").hasClass("e-stackedHeaderRow")?this._resizeStackedHeaderColumn(e(this._target).parent("tr"),o,this._currntCe):h.outerWidth(n),this.gridInstance.model.showSummary&&!t.isNullOrUndefined(this.gridInstance.getFooterTable())){this._$footerCols=this.gridInstance.getFooterTable().find("colgroup").find("col");var m=this.gridInstance.model.columns.length;this._$footerCols.length>m&&this._$footerCols.splice(0,this._$footerCols.length-m);var g=this._$footerCols,r=g.filter(this._diaplayFinder).eq(this._currentCell);if(e(this._target).parent("tr").hasClass("e-stackedHeaderRow"))for(var f=0;f<this._changedcell.length;f++){r=g.filter(this._diaplayFinder).eq(f);var c=parseInt(o)+parseInt(g[f].style.width);c<this._colMinWidth&&(c=this._colMinWidth),r.outerWidth(c)}else r.outerWidth(n)}if(e(this._target).parent("tr").hasClass("e-stackedHeaderRow")){if(this.gridInstance.model.groupSettings.groupedColumns.length)for(var _=this.gridInstance.getContentTable().find(".e-recordtable"),v=_.find("colgroup"),f=0;f<this._changedcell.length;f++)for(var b=this._changedcell[f],x=0;x<v.length;x++){var y=e(v[x]).children().filter(this._diaplayFinder),c=parseInt(o)+parseInt(y[b].style.width);c<this._colMinWidth&&(c=this._colMinWidth),e(y[b]).width(c)}for(var f=(this.gridInstance.getContentTable().find("colgroup").find("col").filter(this._diaplayFinder).length,0);f<this._changedcell.length;f++){var w=this.gridInstance.getContentTable().find("colgroup").find("col").filter(this._diaplayFinder)[this._changedcell[f]],c=parseInt(o)+parseInt(w.style.width);if(c<this._colMinWidth&&(c=this._colMinWidth),e(w).outerWidth(c),this.gridInstance.model.isEdit&&this.gridInstance.model.allowGrouping&&0==this.gridInstance.model.groupSettings.groupedColumns.length){var C=this.gridInstance.getContentTable().find(".gridform").find("colgroup col").filter(this._diaplayFinder)[this._changedcell[f]];e(C).outerWidth(c)}}}else{if(this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length){var _=this.gridInstance.getContentTable().find(".e-recordtable"),v=_.find("colgroup"),b=this._currentCell,m=this.gridInstance.getVisibleColumnNames().length;this.gridInstance.getContentTable().find(".e-detailrow").length&&(v=v.not(_.find(".e-detailrow").find("colgroup")).get());for(var f=0;f<v.length;f++){var S=e(v[f]).find("col").filter(this._diaplayFinder);S.length>m&&S.splice(0,S.length-m),e(S[b]).width(n)}}if(a.outerWidth(n),this.gridInstance.model.isEdit){var T,R=this.gridInstance.getContentTable().find(".e-editedrow,.e-addedrow"),k=R.find("table").find("colgroup col");T=R.hasClass("e-addedrow")&&this.gridInstance.model.groupSettings.groupedColumns.length?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length-1:this._currentCell;k.filter(this._diaplayFinder).eq(T).outerWidth(n)}}if(this.gridInstance._findColumnsWidth(),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns&&"nextcolumn"!=t.getObject("resizeSettings.resizeMode",this.gridInstance.model)&&"ejGrid"==this.gridInstance.pluginName){var O,D=this.gridInstance.getContentTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings.frozenColumns),c=0;for(f=0;f<D.length;f++)c+="none"==D[f].style.display?0:parseInt(D[f].style.width.replace("px",""));this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(c),O=this.gridInstance.model.enableRTL?"margin-right":"margin-left",this.gridInstance.getContent().find(".e-frozencontentdiv").width(c).next().css(O,c+"px"),this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(c).next().css(O,c+"px"),this.gridInstance.model.showSummary&&!t.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterContent().find(".e-frozenfooterdiv").width(c)}if("ejTreeGrid"==this.gridInstance.pluginName&&(!t.isNullOrUndefined(this.gridInstance._currentCell)&&1==this.gridInstance.model.columns[this.gridInstance._currentCell].isFrozen&&"nextcolumn"!=t.getObject("resizeSettings.resizeMode",this.gridInstance.model)||!this.gridInstance._isFrozenStackedResize&&this.gridInstance._isStackedResize&&this.gridInstance._frozenColumnsLength>0)){var c=this.gridInstance._frozenWidth();this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(c),this.gridInstance.getContent().find(".e-frozencontainer").width(c).next().css("margin-left",c+"px"),this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(c).next().css("margin-left",c+"px"),this.gridInstance.model.showTotalSummary&&(this.gridInstance._$totalSummaryRowContainer.find(".e-frozenfooterdiv").width(c),this.gridInstance._$totalSummaryRowContainer.find(".e-movablefooter").css("margin-left",c+"px")),this.gridInstance._findColumnsWidth(),this.gridInstance._renderScroller(!0)}this.gridInstance.getHeaderTable().find(".e-columnheader").hasClass("e-resizedragicon")||this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor","default")}},_resizeStackedHeaderColumn:function(t,i,s){this._changedcell=[];var a=this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-detailheadercell"),r=0,n=0,o=a[s],l=e(o).attr("colspan"),d=e(o).parent("tr"),h=(d.next(),o.cellIndex);for(this.gridInstance.model.groupSettings.showGroupedColumn&&(n=this.gridInstance.model.groupSettings.groupedColumns.length,r+=n);h>n;){h--;var c=e(d).children("th").not(".e-detailheadercell")[h];r+=parseInt(e(c).attr("colspan"))}this._currentCell=r;for(var u=r+parseInt(l),p=r;p<u;p++){var m=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder)[p];this._changedcell.push(p-n);var g=parseInt(i)+parseInt(m.style.width);g<this._colMinWidth&&(g=this._colMinWidth),e(m).outerWidth(g)}},_triggerResizeEvents:function(i,s){var a,r=this.gridInstance.getHeaderTable().find(".e-columnheader"),n=r.find(".e-headercell").filter(":visible"),o=this._cellIndex,l=e(this._target),d=[],h=[];"resizeStart"==i&&(this._orgX=s,o=this._cellIndex=this._getCellIndex(this,s)),this.gridInstance.model.enableRTL&&(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?a=this._currentCell-1:(!this.gridInstance.model.enableRTL&&this._getResizableCell(),a=this._currentCell);var c=n[a],u=c.offsetWidth;if(this.gridInstance.model.showStackedHeader&&l.hasClass("e-stackedHeaderCell")){for(var p,m=l.parent(".e-stackedHeaderRow").index(),g=l.text(),f=this.gridInstance.model.stackedHeaderRows[m].stackedHeaderColumns,_=0;_<f.length;_++)f[_].headerText==g&&(p=f[_].column);var v=p|[];t.isNullOrUndefined(p)||p instanceof Array||(v=p.split(","));for(var _=0;_<v.length;_++){var b=this.gridInstance.getColumnIndexByField(v[_]);d.push(b),h.push(this.gridInstance.model.columns[b])}}if("resizeStart"==i){var x={};return x=this.gridInstance.model.showStackedHeader&&l.hasClass("e-stackedHeaderCell")?{columnIndex:d,column:h,target:l,oldWidth:u}:{columnIndex:o,column:this.gridInstance.model.columns[o],target:e(c),oldWidth:u},this.gridInstance._trigger("resizeStart",x)}var y=(r.find(".e-headercell").not(".e-detailheadercell").filter(":visible"),s-this._orgX);this._widthchanges(u,y),this.gridInstance._colgroupRefresh();var x={};return x=this.gridInstance.model.showStackedHeader&&l.hasClass("e-stackedHeaderCell")?{columnIndex:d,column:h,target:e(c),oldWidth:u,newWidth:this._newWidth,extra:y}:{columnIndex:o,column:this.gridInstance.model.columns[o],target:e(c),oldWidth:u,newWidth:this._newWidth,extra:y},this.gridInstance._trigger("resizeEnd",x)},_widthchanges:function(i,s){var a=this._$headerCols=this.gridInstance.getHeaderTable().find("colgroup").find("col");this._$ContentCols=this.gridInstance.getContentTable().find("colgroup").find("col");t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),a=this._$headerCols=this.gridInstance._$headerCols,this._$ContentCols=this.gridInstance._$contentCols);var r=this._$headerCol=a.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell),n=(this._$frozenCols=a.slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumns:0),
r[0].style.width),o=-1!=n.indexOf("%"),l=!n||o?e(this._target).outerWidth():n,d=o?1:i/parseInt(l);this._extra=s/d,this._newWidth=parseInt(s)+parseInt(l)},_mouseUp:function(e){if(this.gridInstance._resizeTimeOut&&(clearTimeout(this.gridInstance._resizeTimeOut),this.gridInstance._resizeTimeOut=0),this._expand){var i=e.clientX,s=e.clientY;if(-1!=navigator.userAgent.indexOf("WebKit")&&(i=e.pageX,s=e.pageY),"touchend"==e.type&&(i=e.originalEvent.changedTouches[0].clientX,s=e.originalEvent.changedTouches[0].clientY),this.gridInstance.model.allowResizing&&(this.gridInstance.getHeaderTable().find(".e-columnheader").hasClass("e-resizedragicon")||"touchend"==e.type)&&this._triggerResizeEvents("resizeEnd",i))return void this.gridInstance.element.find(".e-reSizeColbg").remove();if(i+=document.documentElement.scrollLeft,this._reSize(i,s),!t.isNullOrUndefined(this._currntCe)&&this._currntCe>=0){var a=t.DataManager(this.gridInstance.model.columns).executeLocal((new t.Query).where("visible","equal",!0)),r=a[this._currntCe],n=this.gridInstance.model.columns.indexOf(r);a.length!=this.gridInstance.model.columns.length?this.gridInstance.model.columns[n].width=this.gridInstance.columnsWidthCollection[n]:this.gridInstance.model.columns[this._currntCe].width=this.gridInstance.columnsWidthCollection[this._currntCe]}}},_getResizableCell:function(){var t,i=this.gridInstance.model.scrollSettings.frozenColumns;t=e(this._target).hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderTable().find(".e-columnheader"):this.gridInstance.getHeaderTable().find(".e-columnheader").not(".e-stackedHeaderRow");var s=t.find(".e-headercell").not(".e-hide,.e-detailheadercell"),a=-1!=navigator.userAgent.indexOf("WebKit")?document.body.scrollLeft:document.documentElement.scrollLeft;if(i&&-1!=this._currentCell&&this._currentCell==i-1)var r=s[this._currentCell].getBoundingClientRect().left+a+5,n=r>this._orgX;if(!i||this._currentCell!=i-1||n){var o=e(this._target).closest(".e-columnheader").index();t=e(this._target).hasClass("e-stackedHeaderCell")?t[o]:t;for(var s=e(t).find(".e-headercell").not(".e-hide,.e-detailheadercell"),l=0;l<s.length;l++){var d=s[l].getBoundingClientRect();if(d.left+a+5>this._orgX&&s[l].offsetHeight+d.top>=this._orgY)return void(this._currentCell=l-1);if(l==s.length-1||this.gridInstance.model.showStackedHeader&&e(this._target).get(0)===s[l])return void(this._currentCell=l)}}},_moveVisual:function(e){var t=this.gridInstance.getHeaderContent().find("div").first()[0].getBoundingClientRect();t.left+document.documentElement.scrollLeft+t.width<e||e<t.left+document.documentElement.scrollLeft?this._$visualElement.remove():-1!=this._currentCell&&this._$visualElement.css({left:e,top:this._tableY})},_mouseDown:function(t){if(this._allowStart&&e(t.target).closest("tr").hasClass("e-resizedragicon")){this._target=t.target;var i=t.clientX,s=t.clientY;if(-1!=navigator.userAgent.indexOf("WebKit")&&(i=t.pageX,s=t.pageY-(window.pageYOffset||document.body.scrollTop||0)),this.gridInstance.model.allowResizing&&this.gridInstance.getHeaderTable().find(".e-columnheader").hasClass("e-resizedragicon")&&(e(t.target).is(".e-headercelldiv")&&(t.target=t.target.parentNode),this._target=t.target,this._triggerResizeEvents("resizeStart",i)))return;return i+=document.documentElement.scrollLeft,2!=t.button&&this._start(i,s),!1}return!0},_columnResizeToFit:function(i){var s=this.gridInstance.getHeaderTable().find(".e-columnheader").filter(function(t){return"col-resize"==e(this).css("cursor")});if(this.gridInstance.model.allowResizeToFit&&s.length){e(i.target).is(".e-headercelldiv")&&(i.target=i.target.parentNode);var a,r=e(i.target),n=0,o=0;if(a=r.hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-detailheadercell"):this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-stackedHeaderCell,.e-detailheadercell"),this._target=r,r.hasClass("e-headercell")){var l=i.target,d=e.inArray(l,a),h=d;this._orgX=i.pageX,this.gridInstance.model.enableRTL?this._currentCell=d:this._getResizableCell(),d!=this._currentCell&&(d=h=this._currentCell,l=i.target.previousSibling);var c=a.filter(":visible")[h],u=[],p=[],m=[];if(o=this.gridInstance.model.groupSettings.groupedColumns.length,t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)&&t.isNullOrUndefined(this.gridInstance.model.childGrid)||(o+=1),e(l).parent("tr").hasClass("e-stackedHeaderRow")){var g=e(c).attr("colspan"),f=e(c).parent("tr"),_=c.cellIndex;for(f.next();_>o;){_--;var v=e(f).children("th")[_];n+=parseInt(e(v).attr("colspan"))}var b=n+parseInt(g)}else n=h,b=h+1;var x=0,y=0,w=0,C=[],S=[];if(-1!=n){var T=a.slice(0,n+1).filter(".e-hide").length,R={columnIndex:n+T,column:this.gridInstance.model.columns[n+T],target:r,oldWidth:D};this.gridInstance._trigger("resizeStart",R);for(var k=n;k<b;k++){T=a.slice(0,k+1).filter(".e-hide").length,w=this._getContentWidth(k+T);var O=this.gridInstance.getHeaderTable().find(".e-headercell:not(.e-hide, .e-stackedHeaderCell)").children(".e-headercelldiv").eq(k);y=this._getHeaderContentWidth(O),x=y>w?y:w,x+=parseInt((O.css("padding-left"),10+(O.css("padding-right"),10)));var D=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder).eq(k+o).width();x=D>x?x:this._colMinWidth<x?x:this._colMinWidth;var I=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder);if((this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)&&I.splice(0,1),I.eq(k+o).width(x),this.gridInstance.model.groupSettings.groupedColumns.length){var j=this.gridInstance.getContentTable().find(".e-recordtable").find("colgroup"),L=this;e.each(j,function(t,i){e(i).find("col").filter(L._diaplayFinder).eq(k).width(x)})}var A=this.gridInstance.getContentTable().find("col").filter(this._diaplayFinder);if((this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)&&A.splice(0,1),A.eq(k+o).width(x),this.gridInstance.model.isEdit)for(var E=this.gridInstance.getContentTable().find(".e-editedrow").find("col"),P=this.gridInstance.element.find(".gridform"),M=0;M<P.length;M++){var E=e(P[M]).find("col");E.eq(k+o).width(x)}if(C.push(this.gridInstance.model.columns[k+T]),S.push(Math.abs(x-D)),u.push(k+T),p.push(x),m.push(D),this.gridInstance.model.scrollSettings.frozenColumns>0||this.gridInstance.model.groupSettings.groupedColumns.length&&this.gridInstance.model.isEdit){var F=k+T;this.gridInstance.columnsWidthCollection[F]=x,this.gridInstance.setWidthToColumns(),this.gridInstance.model.scrollSettings.frozenColumns<=F+1&&(this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",x),this.gridInstance.getContent().find(".e-movablecontent").css("margin-left",x),this.gridInstance.model.showSummary&&!t.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterContent().find(".e-movablefooter").css("margin-left",x))}}}this.gridInstance._colgroupRefresh(),this.gridInstance._recalculateIndentWidth(),R={columnIndex:u,column:C,target:c,oldWidth:m,newWidth:p,extra:S},this.gridInstance._trigger("resizeEnd",R);for(var k=0;k<u.length;k++)this.gridInstance.columnsWidthCollection[u[k]]=p[k],this.gridInstance.model.columns[u[k]].width=p[k];R={columnIndex:u,column:C,target:c,oldWidth:m,newWidth:p,extra:S},this.gridInstance._trigger("resized",R),this.gridInstance.model.summaryRows.length>0&&this.gridInstance._summaryColRrefresh(),this.gridInstance._findColumnsWidth()}}},_getContentWidth:function(i){var s,a=0,r=t.buildTag("span",{},{}),n=this.gridInstance;if(!t.isNullOrUndefined(n._gridRows)){var o=n._gridRows;n.model.scrollSettings.frozenColumns&&n.model.currentViewData.length&&i>=n.model.scrollSettings.frozenColumns&&(o=o[1],i-=n.model.scrollSettings.frozenColumns),e.each(o,function(t,o){if(e(o).is(".e-row,.e-alt_row")&&!e(o).is(".e-editedrow")){var l=e(o).find("td.e-rowcell").eq(i),d=e(l).html();n.model.columns[i].commands?r.html(e(d).children()):l.hasClass("e-validError")?r.html(e(d).attr("value")):r.html(d),e(l).html(r),s=l.find("span:first").width()>0?l.find("span:first").width()+parseFloat(l.css("padding-left"))+parseFloat(l.css("padding-right")):l.find("span:first").width(),s>a&&(a=s),e(l).html(d)}})}return n._refreshUnboundTemplate(this.gridInstance.getContentTable()),a},_getHeaderContentWidth:function(e){var i=0,s=t.buildTag("span",{},{}),a="msie"==this.gridInstance.getBrowserDetails().browser;a&&s.css("position","absolute");var r=e.html();if(s.html(r),e.html(s),i=e.find("span:first").width()+parseFloat(e.css("padding-left"))+parseFloat(e.css("padding-right")),a&&(i+=2),this.gridInstance.model.allowFiltering&&("menu"==this.gridInstance.model.filterSettings.filterType||"excel"==this.gridInstance.model.filterSettings.filterType)){var n=e.parent().find(".e-filtericon");i=i+n.width()+10,n.length&&(i+=parseFloat(n.css("margin-left")))}return e.html(r),i}}}(jQuery,Syncfusion),function(e,t,i){t.widget("ejToolbar","ej.Toolbar",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-toolbar",angular:{terminal:!1},defaults:{height:"",width:"",enabled:!0,hide:!1,disabledItemIndices:[],enabledItemIndices:[],enableSeparator:!1,orientation:"horizontal",enableRTL:!1,isResponsive:!1,showRoundedCorner:!1,htmlAttributes:{},dataSource:null,Items:{id:"id",tooltipText:"tooltipText",imageUrl:"imageUrl",text:"text",imageAttributes:"imageAttributes",spriteCssClass:"spriteCssClass",htmlAttributes:"htmlAttributes",group:"group",template:"template",overflow:"overflow"},query:null,responsiveType:"popup",fields:{id:"id",tooltipText:"tooltipText",imageUrl:"imageUrl",text:"text",imageAttributes:"imageAttributes",spriteCssClass:"spriteCssClass",htmlAttributes:"htmlAttributes",group:"group",template:"template",overflow:"overflow"},tooltipSettings:{associate:"mouseenter",showShadow:!0,position:{stem:{horizontal:"left",vertical:"top"}},tip:{size:{width:5,height:5},adjust:{xValue:17,yValue:17}},isBalloon:!1},cssClass:"",targetID:null,create:null,click:null,itemHover:null,itemLeave:null,overflowOpen:null,overflowClose:null,destroy:null},dataTypes:{enabled:"boolean",hide:"boolean",enableSeparator:"boolean",disabledItemIndices:"data",enabledItemIndices:"data",orientation:"enum",enableRTL:"boolean",showRoundedCorner:"boolean",isResponsive:"boolean",dataSource:"data",query:"data",fields:"data",cssClass:"string",htmlAttributes:"data",targetID:"string",responsiveType:"enum"},hide:function(){if(!this.model.enabled&&"none"==this.element.css("display"))return!1;this.element.css("display","none"),this.model.hide=!0},show:function(){if(!this.model.enabled&&"none"!=this.element.css("display"))return!1;this.element.css("display","block"),this.model.hide=!1},_init:function(){null!=this.model.targetID&&this.element.html(e("#"+this.model.targetID).find("ul,ol")),this._cloneElement=e(this.element).clone(),this._localDataSource=null,null!=this.model.dataSource?this._generateTemplate():null!=this.model.Items&&this._generateTemplate(),!(this.model.dataSource instanceof t.DataManager)&&this._initialize(),this._renderTooltip(this.model.tooltipSettings)},_setModel:function(t){var i;for(i in t)switch(i){case"height":this._setHeight(t[i]);break;case"width":this.model.width=t[i],this._setWidth(),this._bindUnbindWidth();break;case"enabled":this._controlStatus(t[i]);break;case"disabledItemIndices":this._disableItemByIndex(t[i]),t[i]=this.model.disabledItemIndices;break;case"enabledItemIndices":this._enableItemByIndex(t[i]);break;case"isResponsive":this.model.isResponsive=t[i],this.model.isResponsive?(this._responsiveLayout(),this._renderTooltip(this.model.tooltipSettings)):this._removeResponsive();break;case"hide":this._controlVisibleOptions(t[i]);break;case"orientation":this._setOrientation(t[i]),this.model.orientation=t[i],this._wireResizing();break;case"tooltipSettings":this.model.tooltipSettings=e.extend(!0,this.model.tooltipSettings,t[i]),this._renderTooltip(this.model.tooltipSettings);break;case"enableRTL":this._enableRTL(t[i]);break;case"showRoundedCorner":this._roundedCorner(t[i]);break;case"cssClass":this._setSkin(t[i]);break;case"htmlAttributes":this._addAttr(t[i]);break;case"enableSeparator":this.model.enableSeparator=t[i],this._renderToolbarSeparator();break;case"fields":e.extend(this.model.fields,t[i]);break;case"query":this.model.query=t[i];break;case"dataSource":for(var s in t)"fields"==s&&e.extend(this.model.fields,t[s]),"query"==s&&(this.model.query=t[s]);this._refreshTagItems(i,t[i]);break;case"Items":e.extend(this.model.Items,t[i]),this._refreshTagItems(i,t[i]);break;case"targetID":this.model.targetID=t[i],this._setTargetID()}},_setTargetID:function(){this.element.removeAttr("role tabindex aria-disabled style"),e(this._spantag).remove(),e(this._liTemplte).remove(),this._liTemplte=this._tipRes=null,this.element.removeClass("e-widget e-box e-toolbarspan e-rtl"),this.element.find("ul,ol").removeClass("e-ul e-horizontal e-vertical e-separator e-comnrtl"),this.element.find("li").removeClass("e-tooltxt e-comnrtl"),this.element.find("li").removeAttr("aria-label"),this._init()},_refreshTagItems:function(e,t){this.model[e]=t,this.element.empty(),this._generateTemplate(),this._initialize()},_setHeight:function(e){this.element.css("height",e)},_setWidth:function(){if("auto"==this.model.width){var t,i=parseFloat(this.element.css("border-left-width"))+parseFloat(this.element.css("border-right-width")),s=this.element.find("ul").children("li"),a=this.element.find("ul");t="inline"==this.model.responsiveType?this.element.find(".e-arrow-sans-down"):this.element.find(".e-toolbar-res-arrow");for(var r=0,n=a.length;r<n;r++)null!=a[r]&&e(a[r]).hasClass("e-separator")&&(i+=parseFloat(a.eq(r).css("border-right-width"))+parseFloat(a.eq(r).css("border-left-width")));null!=t[0]&&("inline"==this.model.responsiveType?i+=Math.round(this.element.find(".e-arrow-sans-down").outerWidth())+8:i+=Math.round(this.element.find(".e-toolbar-res-arrow").outerWidth())+8);for(var r=0,n=s.length;r<n;r++)null!=s[r]&&(i+=Math.round(s.eq(r).outerWidth()));this.element.css("width",Math.ceil(i))}else this.element.css("width",this.model.width)},_bindUnbindWidth:function(){"auto"!=this.model.width?this._off(e(window),"resize",this._widthHandler):this._on(e(window),"resize",this._widthHandler)},_widthHandler:function(e){this._setWidth(this.model.width)},_setOrientation:function(e){e!=t.Orientation.Vertical?(this.element.removeClass(this.model.cssClass).addClass("e-toolbarspan "+this.model.cssClass),this.itemsContainer.removeClass("e-ul e-vertical").addClass("e-ul e-horizontal")):(this.element.removeClass("e-toolbarspan "+this.model.cssClass).addClass(this.model.cssClass),this.itemsContainer.removeClass("e-ul e-horizontal").addClass("e-ul e-vertical")),this.items.addClass("e-tooltxt")},_reSizeHandler:function(){if(this._isResized&&this._liTemplte.children().length>0){var t=this.element.children("ol.e-show, ul.e-show"),i=this._liTemplte.children("ol.e-show, ul.e-show");t.length>0||i.length>0?e(this._liTemplte.children()).appendTo(this.element):e(this._liTemplte.children()).insertBefore(e(this.element).find("span.e-res-pos")),this._renderToolbarSeparator(),"inline"!=this.model.responsiveType&&this._liTemplte.addClass("e-display-none"),this._contstatus=!1}this._elementWidth="function"==typeof window.getComputedStyle?parseFloat(window.getComputedStyle(this.element[0]).width):this.element.width()-1,this._liWidth=this._spanWidth;var s=this.element.children("ol.e-show:visible, ul.e-show:visible"),a=this.element.children("ol:visible:not(.e-show), ul:visible:not(.e-show)");this._spantag.removeClass("e-display-block").addClass("e-display-none"),this._ensureOverflow(s),this._ensureOverflow(a),"inline"==this.model.responsiveType&&(this._liTemplte.removeClass("e-normal"),this._liTemplte.css("width",this.element.width())),this._isResized=!0},_ensureOverflow:function(t){for(var i=0;i<t.length;i++)this._liWidth+=e(t[i]).outerWidth(!0)+8,this._liWidth>this._elementWidth&&(this._spantag.hasClass("e-display-block")||this._spantag.removeClass("e-display-none").addClass("e-display-block"),this._spantag.addClass("e-res-pos"),this._liTemplte.addClass("e-normal"),this._liTemplte.append(t[i]))},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popup)},_getOffset:function(e){return t.util.getOffset(e)},_btnMouseClick:function(i){var s,a,r,n,o=this.element.outerWidth(),l=this.element.outerHeight(),d=e(this._liTemplte).outerWidth(),h=e(window).width(),c=e(window).scrollLeft();if(!e(i.currentTarget).hasClass("e-disable")){var u=this._getZindexPartial();a=this._getOffset(this.element),r=this.model.enableRTL?a.left:a.left+o-d,n=a.top+l-1+2,r=r<c?c+1:r+d>h+c?h-d+c-1:r,this._contstatus?(this._liTemplte.addClass("e-display-none"),"inline"==this.model.responsiveType&&this._spantag.removeClass("e-active"),this._contstatus=!1,s={currentTarget:i.currentTarget,clientX:i.clientX,clientY:i.clientY,cancel:i.cancellable},this._trigger("overflowClose",s)):(this._liTemplte.removeClass("e-display-none"),"inline"!=this.model.responsiveType&&this._liTemplte.css({top:n+"px",left:r+"px","z-index":u}),"inline"==this.model.responsiveType&&this._spantag.addClass("e-active"),this._contstatus=!0,s={currentTarget:i.currentTarget,clientX:i.clientX,clientY:i.clientY,cancel:i.cancellable},this._trigger("overflowOpen",s),"inline"!=this.model.responsiveType&&this._on(t.getScrollableParents(this.element),"scroll",this._hidecontext),this.element.bind("click",e.proxy(this._hidecontext,this))),this._contstatus&&"inline"!=this.model.responsiveType&&this._on(e(document),"mouseup",this._documentClick),this._contstatus||this._off(e(document),"mouseup",this._documentClick),this._removeListHover()}},_hidecontext:function(i){e(i.target).is(e("#"+this.element[0].id+"_target"))||"inline"==this.model.responsiveType||(this._liTemplte.addClass("e-display-none"),this._contstatus=!1,this.element.unbind("click",e.proxy(this._hidecontext,this)),this._off(t.getScrollableParents(this.element),"scroll",this._hidecontext),this._off(e(document),"mouseup",this._documentClick))},_documentClick:function(t){if(!e(t.target).is(e("#"+this.element[0].id+"_target"))&&0==e(t.target).closest("div#"+this.element[0].id+"_hiddenlist").length&&!e(t.target).parents().hasClass("e-ddl-popup")){this._liTemplte.addClass("e-display-none"),this._contstatus=!1;var i={currentTarget:t.currentTarget,clientX:t.clientX,clientY:t.clientY,cancel:t.cancellable};this._trigger("overflowClose",i),this._off(e(document),"mouseup",this._documentClick)}},_setSkin:function(e){this.element.removeClass(this.model.cssClass).addClass(e);var t="e-toolbarTooltip "+e;this._subControlsSetModel("cssClass",t)},_subControlsSetModel:function(i,s){!t.isNullOrUndefined(this._tipToolbar)&&e(this.target).ejTooltip("option",i,s),!t.isNullOrUndefined(this._tipRes)&&e(this._liTemplte).ejTooltip("option",i,s)},_destroy:function(){this.element.html(""),!t.isNullOrUndefined(this._tipToolbar)&&e(this.target).ejTooltip("destroy"),!t.isNullOrUndefined(this._tipRes)&&e(this._liTemplte).ejTooltip("destroy"),this._cloneElement.removeClass("e-toolbar e-js"),this.element.replaceWith(this._cloneElement),this._liTemplte&&this._liTemplte.remove(),this._unWireResizing()},_initialize:function(){this.element.attr({role:"toolbar",tabindex:"0"});this.element.children().find("li");this._focusEnable=!0,this._renderControl(),this._responsiveLayout(),this._wireEvents()},_responsiveLayout:function(){if(this._roundedCorner(this.model.showRoundedCorner),this.model.isResponsive&&"horizontal"==this.model.orientation){t.isNullOrUndefined(this._liTemplte)||(!t.isNullOrUndefined(this._tipRes)&&this._tipRes.destroy(),e(this._liTemplte).remove()),this._spantag=e("<span id='"+this.element[0].id+"_target' class='e-icon e-toolbar-res-arrow e-rel-position e-display-block' unselectable='on'></span>"),"inline"==this.model.responsiveType&&this._spantag.removeClass("e-toolbar-res-arrow").addClass("e-inlinearrow e-arrow-sans-down");this.element.children("ol.e-show, ul.e-show").length>0?this.element[0].insertBefore(this._spantag[0],this.element[0].childNodes[0]):this._spantag.appendTo(this.element),this._liTemplte=e("<div id='"+this.element[0].id+"_hiddenlist' class='e-responsive-toolbar e-display-none e-abs-position "+e(this.element)[0].className+"'></div>"),"inline"==this.model.responsiveType&&this._liTemplte.removeClass("e-abs-position").addClass("e-inline"),this._spanWidth=this._spantag.outerWidth(!0)+8,this.model.enableRTL&&this._liTemplte.addClass("e-rtl"),this._isResized=!1,this._elementWidth="function"==typeof window.getComputedStyle?parseFloat(window.getComputedStyle(this.element[0]).width):this.element.width()-1,this._liWidth=this._spanWidth;for(var i=0;i<this.itemsContainer.length;i++)this._liWidth+=e(this.itemsContainer[i]).outerWidth(!0);this._liWidth>this._elementWidth?this._reSizeHandler():this._spantag.removeClass("e-display-block").addClass("e-display-none"),"inline"==this.model.responsiveType?e(this.element[0]).append(this._liTemplte):e("body").append(this._liTemplte),this._renderTooltip(this.model.tooltipSettings)}this._on(e("#"+this.element[0].id+"_target"),"mousedown",this._btnMouseClick),this._wireResizing(),this._controlVisibleOptions(this.model.hide),this._enableRTL(this.model.enableRTL),this._disabledItems=this.model.disabledItemIndices,this._controlStatus(this.model.enabled),this.model.disabledItemIndices=this._disabledItems,0!=this.model.disabledItemIndices.length&&this._disableItemByIndex(this.model.disabledItemIndices),0!=this.model.enabledItemIndices.length&&this._enableItemByIndex(this.model.enabledItemIndices),this._setWidth()},_removeResponsive:function(){e(this._spantag).remove(),!t.isNullOrUndefined(this._tipRes)&&e(this._liTemplte).ejTooltip("destroy");var i=e(this._liTemplte).children("ul");e(this._liTemplte).detach(),e(this.element).append(i),this.itemsContainer=this.element.children("ol,ul"),this.items=this.itemsContainer.children("li"),this._off(this.items,"mouseup"),this._off(this.items,"mousedown"),this._off(this.element,"mousedown"),this._wireEvents(),this._wireResizing(),this._setWidth()},_controlVisibleOptions:function(e){0!=e?this.hide():this.show()},_controlStatus:function(e){1!=e?this.disable():this.enable()},_roundedCorner:function(e){e?(this.element.addClass("e-corner"),this._liTemplte&&this._liTemplte.addClass("e-corner")):(this.element.removeClass("e-corner"),this._liTemplte&&this._liTemplte.removeClass("e-corner")),this._subControlsSetModel("showRoundedCorner",e)},_generateTemplate:function(){var e,i=this;this.element.css("visibility","hidden"),this.model.dataSource instanceof t.DataManager?(e=this.model.dataSource.executeQuery(this.model.query),e.done(function(e){i._generateGroup(e.result),i._initialize(),i.element.css("visibility","")})):null!=this.model.dataSource?(i._generateGroup(i.model.dataSource),i.element.css("visibility","")):(i._generateGroup(i.model.Items),i.element.css("visibility",""))},_generateGroup:function(e){var t=this;this._localDataSource=e;for(var i=-1,s=[],a=0;a<e.length;a++)if(this._isNewGroup(e[a][this.model.fields.group],s)){s[++i]=e[a][this.model.fields.group];var r=-1;t.itemsSource=[];for(var n=a;n<e.length;n++)e[a][this.model.fields.group]==e[n][this.model.fields.group]&&(t.itemsSource[++r]=e[n]);t.element.append(t._generateTagitems())}},_isNewGroup:function(e,t){if(!t)return!0;for(var i=0;i<t.length;i++)if(e==t[i])return!1;return!0},_renderControl:function(){this.element.addClass("e-widget e-box"),this._renderToolbarItems(),this._addAttr(this.model.htmlAttributes),this._setOrientation(this.model.orientation),this._renderToolbarSeparator(),this._setHeight(this.model.height),this._bindUnbindWidth()},_renderToolbarItems:function(){this.target=this.element[0],this.itemsContainer=this.element.children("ol,ul"),this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li");for(var i=0;i<this.items.length;i++)t.isNullOrUndefined(e(this.items[i]).attr("title"))&&t.isNullOrUndefined(e(this.items[i]).attr("aria-label"))&&e(this.items[i]).attr("aria-label",this.items[i].id);this._liCount=this.items.length},_generateTagitems:function(){var e,i;for(e=this.itemsSource,this.ultag=t.buildTag("ul"),i=0;i<e.length;i++)"show"==e[i][this.model.fields.overflow]&&this.ultag.addClass("e-show"),this.ultag.append(this._generateLi(e[i]));return this.ultag},_generateLi:function(e){var i,s,a;return i=t.buildTag("li"),e[this.model.fields.id]?i.attr("id",e[this.model.fields.id]):e[this.model.fields.text]&&i.attr("id",e[this.model.fields.text]),e[this.model.fields.tooltipText]&&i.attr("title",e[this.model.fields.tooltipText]),e[this.model.fields.imageUrl]&&""!=e[this.model.fields.imageUrl]&&(s=t.buildTag("img.e-align","",{},{src:e[this.model.fields.imageUrl],alt:e[this.model.fields.text]}),e[this.model.fields.imageAttributes]&&this._setAttributes(e[this.model.fields.imageAttributes],s),i.append(s)),e[this.model.fields.spriteCssClass]&&""!=e[this.model.fields.spriteCssClass]&&(a=t.buildTag("div.e-align "+e[this.model.fields.spriteCssClass]+" e-spriteimg"),i.append(a)),e[this.model.fields.text]&&""!=e[this.model.fields.text]&&i.append(e[this.model.fields.text]),e[this.model.fields.htmlAttributes]&&this._setAttributes(e[this.model.fields.htmlAttributes],i),e[this.model.fields.template]&&(a=t.buildTag("div .e-align",e[this.model.fields.template]),i.append(a)),i},_setAttributes:function(t,i){for(var s in t)e(i).attr(s,t[s])},_renderToolbarSeparator:function(){var t,i;if(this.model.enableSeparator){for(t=0,i=this.itemsContainer.length-1;t<i;t++)e(this.itemsContainer[t]).addClass("e-separator");if(1==this.itemsContainer.length)for(t=0,i=this.itemsContainer[0].children.length;t<i;t++)t==i-1?e(this.itemsContainer[0].children[t]).removeClass("e-separator"):e(this.itemsContainer[0].children[t]).addClass("e-separator")}else this.itemsContainer.removeClass("e-separator").find(".e-separator").removeClass("e-separator");this._setWidth()},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_enableRTL:function(e){e?(this.element.addClass("e-rtl"),this.items.addClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.addClass("e-comnrtl"),this._liTemplte&&this._liTemplte.addClass("e-rtl")):(this.element.removeClass("e-rtl"),this.items.removeClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.removeClass("e-comnrtl"),this._liTemplte&&this._liTemplte.removeClass("e-rtl")),this.model.enableRTL=e,this._subControlsSetModel("enableRTL",e),this._renderToolbarSeparator()},_renderTooltip:function(i){var s=e.extend(!0,{},i);t.isNullOrUndefined(s.cssClass)?s.cssClass="e-toolbarTooltip "+this.model.cssClass:s.cssClass=s.cssClass+" e-toolbarTooltip "+this.model.cssClass,s.enableRTL=this.model.enableRTL,s.showRoundedCorner=this.model.showRoundedCorner,s.target="li[data-content], li[title]",s.beforeOpen=this._showTooltip,this._tipToolbar=e(this.target).ejTooltip(s).data("ejTooltip"),this.model.isResponsive&&!t.isNullOrUndefined(this._liTemplte)&&(this._tipRes=e(this._liTemplte).ejTooltip(s).data("ejTooltip"))},_showTooltip:function(t){var i=e(t.event.currentTarget);t.event.target;i.hasClass("e-disable")&&(t.cancel=!0)},_hideTooltip:function(){t.isNullOrUndefined(this._tipToolbar)||(this._tipToolbar.hide(),this._tipToolbar._isHidden=!1),t.isNullOrUndefined(this._tipRes)||(this._tipRes.hide(),this._tipRes._isHidden=!1)},_addOverlay:function(i){for(var s=0;s<i.length;s++)if(!e(i[s]).hasClass("e-disable")){e(i[s]).addClass("e-disable");var a=t.buildTag("div.e-item-overlay");e(i[s]).append(a)}},_removeOverlay:function(t){for(var i=0;i<t.length;i++)e(t[i]).children(".e-item-overlay").remove()},disableItem:function(t){var i=e(t);null==i||i.length<=0||(i.hasClass("e-disable")||(i.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(i)),i.removeClass("e-hover e-active").attr("data-aria-selected",!1))},enableItem:function(t){var i=e(t);null==i||i.length<=0||(i.removeClass("e-disable").attr("aria-disabled",!1).removeClass("e-disable"),this._removeOverlay(i))},disableItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.disableItem(t)},enableItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.enableItem(t)},_enableItemByIndex:function(t){var i;if(!this.model.enabled)return!1;if(0!=t.length)for(var s=0;s<t.length;s++)e.inArray(t[s],this.model.disabledItemIndices)>-1&&(i=e.inArray(t[s],this.model.disabledItemIndices),this.enableItem(this.items[this.model.disabledItemIndices[i]]),this.model.disabledItemIndices.splice(i,1))},_disableItemByIndex:function(t){if(!this.model.enabled)return!1;this._disabledItems=this.model.disabledItemIndices;for(var i=0;i<t.length;i++)e.inArray(t[i],this.model.disabledItemIndices)<0&&this._disabledItems.push(parseInt(t[i]));for(var i=0;i<this.items.length;i++)e.inArray(i,this.model.disabledItemIndices)>-1&&this.disableItem(this.items[i]);this.model.disabledItemIndices=this._disabledItems},disable:function(){if("true"==this.element.attr("aria-disabled"))return!1;this.element.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(this.items),this.model.isResponsive&&"horizontal"==this.model.orientation&&this._spantag.addClass("e-disable"),this.model.enabled=!1,this._subControlsSetModel("enabled",!1)},enable:function(){if(this.model.disabledItemIndices=[],"false"==this.element.attr("aria-disabled"))return!1;this.items.removeClass("e-disable"),this._removeOverlay(this.items),this.element.attr("aria-disabled",!1),this.model.isResponsive&&"horizontal"==this.model.orientation&&this._spantag.removeClass("e-disable"),this.model.enabled=!0,this._subControlsSetModel("enabled",!0)},refresh:function(){this._reSizeHandler()},selectItem:function(t){var i=e(t);null==i||i.length<=0||(i.addClass("e-active").attr("data-aria-selected",!0),this._activeItem=e(this.items).index(i))},deselectItem:function(t){var i=e(t);null==i||i.length<=0||i.removeClass("e-active").attr("data-aria-selected",!1)},selectItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.selectItem(t)},deselectItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.deselectItem(t)},removeItem:function(t){this.model.disabledItemIndices=[];var i=e(t),s=0;if(!(null==i||i.length<=0)){i.remove(),this.items=this.itemsContainer.children("li");for(var a=0;a<this.items.length;a++)e(this.items[a]).hasClass("e-disable")&&(this.model.disabledItemIndices[s++]=a)}},removeItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.removeItem(t)},_wireResizing:function(){this.model.isResponsive&&"horizontal"==this.model.orientation?e(window).bind("resize",e.proxy(this._reSizeHandler,this)):this._unWireResizing()},_unWireResizing:function(){e(window).unbind("resize",e.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this.element,"mousedown",this._clickEventHandler),this._on(this.element,"focus",this._focusElement),this._on(this.element,"blur",this._targetBlur),this._on(this.items,"mouseenter",this._onItemHover),this._on(this.items,"mouseleave",this._onItemLeave),this._on(this.items,"mousedown",this._onItemClick),this._on(this.items,"mouseup",this._onItemClick)},_onItemHover:function(t){var i=e(t.currentTarget),s=t.target;if(i.hasClass("e-disable"))clearTimeout(this._tipToolbar.mouseTimer);else{this.items.removeClass("e-hover"),i.addClass("e-hover");var a={currentTarget:i,target:s,status:this.model.enabled};this._trigger("itemHover",a)}},_onItemClick:function(i){if(e(i.currentTarget).hasClass("e-disable")||1!=i.which)return!1;var s=i.currentTarget,a=i.target;if(t.isDevice()||this._hideTooltip(),"mousedown"==i.type)this._focusEnable=!1,e(s).addClass("e-active"),this._focusedItem=this._currentItem=e(s),this.mouseDownItem=s;else if("mouseup"==i.type&&this.mouseDownItem==s){if(e(s).hasClass("e-active")&&(this._removeSelection(),
!e(s).hasClass("e-disable"))){var r={currentTarget:s,text:e(s).attr("data-content"),target:a,status:this.model.enabled,event:i};this.model.isResponsive&&this._contstatus&&e(s).closest(".e-responsive-toolbar").length>0?this._activeItem=this._liTemplte.find(".e-tooltxt").index(s):this._activeItem=e(this.items).index(s),this._trigger("click",r)}this.mouseDownItem=void 0}},_onItemLeave:function(t){var i=e(t.currentTarget),s=t.target;if(!i.hasClass("e-disable")){this._removeSelection(),i.removeClass("e-hover");var a={currentTarget:i,target:s,status:this.model.enabled};this._trigger("itemLeave",a)}},_onKeyPress:function(i){var s,a,r,n;if(s=i.keyCode?i.keyCode:i.which?i.which:i.charCode,this.model.isResponsive&&this._liTemplte.find(".e-tooltxt").length>0?(this._keyPressed=!0,this._items=this._contstatus?this._liTemplte.find(".e-tooltxt"):this.element.find(".e-tooltxt"),a=this._items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)")):(this._keyPressed=!1,a=this.items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)")),this._focusedItem?(r=this._focusedItem,this._focusedItem=null):r=a.filter(".e-hover"),"keydown"==i.type)9==s&&i.shiftKey&&e(a[a.index(r)-1]).length>0?(i.preventDefault(),n=e(a[a.index(r)-1])):9==s&&e(a[a.index(r)+1]).length>0&&!i.shiftKey?(i.preventDefault(),n=e(a[a.index(r)+1])):(38==s||39==s)&&this.model.orientation!=t.Orientation.Vertical||(39==s||40==s)&&this.model.orientation==t.Orientation.Vertical?(i.preventDefault(),n=e(a[a.index(r)+1]).length>0?e(a[a.index(r)+1]):a.first()):(37==s||40==s)&&this.model.orientation!=t.Orientation.Vertical||(37==s||38==s)&&this.model.orientation==t.Orientation.Vertical?(i.preventDefault(),n=e(a[a.index(r)-1]).length>0?e(a[a.index(r)-1]):a.last()):33==s||36==s?(i.preventDefault(),n=a.first()):34!=s&&35!=s||(i.preventDefault(),n=a.last()),n&&(this._removeListHover(),n.addClass("e-hover"));else switch(s){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:break;case 13:case 32:if(i.preventDefault(),!r[0])break;var o={currentTarget:r[0],target:e(r)[0],status:this.model.enabled,event:i};this._trigger("click",o);break;case 27:i.preventDefault(),this.element.blur()}},_removeListHover:function(){e(this.items).removeClass("e-hover")},_addListHover:function(){var e=this._getActiveItem();e.hasClass("e-disable")||e.addClass("e-hover").focus()},_getActiveItem:function(){return e(this.model.isResponsive&&this._keyPressed?this._items[this._activeItem]:this.items[this._activeItem])},_targetBlur:function(e){e.preventDefault(),this.element.focusout().removeClass("e-focus"),this._removeListHover(),this._off(this.element,"keyup",this._onKeyPress)._off(this.element,"keydown",this._onKeyPress),this._trigger("focusOut")},_clickEventHandler:function(e){this._clicked=!0},_removeSelection:function(){this._currentItem&&"true"!=this._currentItem.attr("data-aria-selected")&&this._currentItem.removeClass("e-active")},_focusElement:function(t){if(!this.element.hasClass("e-focus")&&(this.element.addClass("e-focus"),this._on(this.element,"keyup",this._onKeyPress)._on(this.element,"keydown",this._onKeyPress),!this._focusEnable))return void(this._focusEnable=!0);this._removeListHover(),this._activeItem=this._clicked?-1:0,(this._getActiveItem().hasClass("e-disable")||this._getActiveItem().is(":hidden"))&&(this._activeItem=e(this.items).filter('li:not([class*="e-disable"])').first().index()),this._addListHover()}}),t.Toolbar.ResponsiveType={Popup:"popup",Inline:"inline"}}(jQuery,Syncfusion);var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)};!function(e){var t=function(t){function i(i,s){if(t.call(this),this._rootCSS="e-tooltip",this._setFirst=!1,this.PluginName="ejTooltip",this.id="null",this.model=null,this.defaults={height:"auto",width:"auto",enabled:!0,content:null,containment:"body",target:null,title:null,closeMode:"none",autoCloseTimeout:4e3,position:{stem:{horizontal:"center",vertical:"bottom"},target:{horizontal:"center",vertical:"top"}},associate:"target",collision:"flipfit",showShadow:!1,cssClass:null,animation:{effect:"none",speed:0},isBalloon:!0,showRoundedCorner:!1,enableRTL:!1,allowKeyboardNavigation:!0,tip:{size:{width:20,height:10},adjust:{xValue:0,yValue:0}},trigger:"hover",create:null,click:null,destroy:null,hover:null,tracking:null,beforeOpen:null,beforeClose:null,open:null,close:null},this.dataTypes={enabled:"boolean",closeMode:"enum",autoCloseTimeout:"number",trigger:"enum",position:{stem:"data",target:"data"},associate:"enum",collision:"enum",showShadow:"boolean",animation:{effect:"enum",speed:"number"},isBalloon:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",allowKeyboardNavigation:"boolean",tip:{size:{width:"number",height:"number"},adjust:{xValue:"number",yValue:"number"}}},this.isTrack=!0,this._isCancel=!1,this._isHidden=!0,this.arrowValue={left:0,top:0,width:0,height:0,display:null},this.tooltipPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.targetPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.mouseTimer=null,this.positionTarget=null,this.positionTooltip=null,this.containerSize=null,this._createTitle=function(){this.tooltipTitle=ej.buildTag("div.e-def e-header"," ",{},{}),this.tooltipHeader=ej.buildTag("div"," ",{},{}),e(this.tooltipTitle).html(this.model.title).appendTo(this.tooltipHeader)},i&&(i.jquery||(i=e("#"+i)),i.length))return e(i).ejTooltip(s).data(this.PluginName)}return __extends(i,t),i.prototype.setModel=function(e,t){this.setModel(e,t)},i.prototype.option=function(e,t){this.option(e,t)},i.prototype.triggerEvents=function(e,t){var i;switch(e){case"click":var s=t;i=this._trigger(e,s);break;case"hover":var a=t;i=this._trigger(e,a);break;case"tracking":var r=t;i=this._trigger(e,r);break;case"beforeOpen":var n=t;i=this._trigger(e,n);break;case"open":var o=t;i=this._trigger(e,o);break;case"beforeClose":case"close":var l=t;i=this._trigger(e,l)}return i},i.prototype.enable=function(e){this.tooltip[0].classList.contains("e-disable")&&(this.model.enabled=!0,this.tooltip[0].classList.remove("e-disable"))},i.prototype.disable=function(e){this.tooltip[0].classList.contains("e-disable")||(this.model.enabled=!1,this.tooltip[0].classList.add("e-disable"))},i.prototype.show=function(t,i){if(this.model.enabled){if(ej.isNullOrUndefined(t)){var s=null==this.model.target?this.element:e(this.element).find(this.model.target+":first");this._positionElement(s)}else this._positionElement(t);ej.isNullOrUndefined(i)?this._showTooltip():"string"==typeof i?e(this.tooltip).show(i):"function"==typeof i&&i.call.apply(this.tooltip)}},i.prototype.hide=function(t){this.model.enabled&&(ej.isNullOrUndefined(t)?this._hideTooltip():"string"==typeof t?e(this.tooltip).hide(t):"function"==typeof t&&t.call.apply(this.tooltip))},i.prototype._destroy=function(){this.mouseTimer&&clearTimeout(this.mouseTimer),this.timer&&clearTimeout(this.timer),e(this.tooltip).remove(),this.tooltip=null},i.prototype._setModel=function(t){var i;for(i in t)switch(i){case"height":this._setHeight(t[i]);break;case"width":this._setWidth(t[i]);break;case"enabled":this._enabled(t[i]);break;case"content":this._setContent(t[i]);break;case"title":this.model.title=t[i],null==this.model.title?(e(this.tooltipHeader).remove(),this.tooltipHeader=null,this.tooltipTitle=null,this.model.closeMode===ej.Tooltip.CloseMode.Sticky&&this._iconRender()):ej.isNullOrUndefined(this.tooltipHeader)?this._createHeader():e(this.tooltipTitle).html(this.model.title),this.tooltipPos.height=e(this.tooltip).outerHeight();break;case"associate":this.model.associate=t[i],this._wireMouseEvents(!1),this._wireMouseEvents(!0);break;case"position":this._setPosition(t[i]);break;case"collision":this.model.collision=t[i];break;case"closeMode":void 0!==t[i]&&(this.model.closeMode=t[i],this.model.closeMode==ej.Tooltip.CloseMode.Sticky?this._iconRender():(e(this.tooltipClose).remove(),this.tooltipClose=null),this.tooltipPos.height=e(this.tooltip).outerHeight());break;case"cssClass":this._setSkin(t[i]);break;case"showShadow":this._shadowEffect(t[i],this.model.position);break;case"isBalloon":ej.isNullOrUndefined(t[i])||(this.model.isBalloon=t[i],this.model.isBalloon?this._renderArrow():(e(this.tip).remove(),this.tip=null));break;case"animation":var s=t[i];this.model.animation=e.extend(!0,this.model.animation,s),this.model.animation.effect!=ej.Tooltip.Effect.None?(this._off(e(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._off(e(this.tooltip),"mouseleave",this._onTooltipMouseLeave)):this.model.animation.effect==ej.Tooltip.Effect.None&&(this._on(e(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._on(e(this.tooltip),"mouseleave",this._onTooltipMouseLeave));break;case"enableRTL":this._setRTL(t[i]);break;case"target":this._wireTriggerEvents(!1),this.model.target=t[i],this._wireTriggerEvents(!0),this._renderTarget();break;case"trigger":this._setTrigger(t[i]);break;case"showRoundedCorner":this.model.showRoundedCorner=t[i],this._roundedCorner(t[i]);break;case"allowKeyboardNavigation":this.model.allowKeyboardNavigation=t[i],this.model.allowKeyboardNavigation?this._on(e(window),"keydown",this._keyDown):this._off(e(window),"keydown",this._keyDown)}},i.prototype._enabled=function(e){e?this.enable(e):this.disable(e),this.model.enabled=e},i.prototype._shadowEffect=function(t,i){this.model.showShadow=t;var s=null;if(e(this.tooltip).removeClass("e-tooltipShadowLeft e-tooltipShadowRight"),this.model.showShadow){if(this.model.isBalloon)switch(i.stem.horizontal){case"center":s="top"==i.stem.vertical?"e-tooltipShadowLeft":"bottom"==i.stem.vertical?"e-tooltipShadowRight":"e-tooltipShadowLeft";break;case"right":s="center"==i.target.horizontal&&"top"==i.stem.vertical?"e-tooltipShadowLeft":"e-tooltipShadowRight";break;case"left":s="center"==i.target.horizontal&&"bottom"==i.stem.vertical?"e-tooltipShadowRight":"e-tooltipShadowLeft"}else s="e-tooltipShadowLeft";e(this.tooltip).addClass(s)}},i.prototype._setContent=function(t){this.model.content=t,e(this.tooltipContent).html(this.model.content),this.tooltipPos.height=e(this.tooltip).outerHeight(),this.tooltipPos.width=e(this.tooltip).outerWidth()},i.prototype._setPosition=function(t){this.model.position.stem=e.extend(!0,this.model.position.stem,t.stem),this.model.position.target=e.extend(!0,this.model.position.target,t.target)},i.prototype._setTrigger=function(e){this._wireTriggerEvents(!1),this.model.trigger=e,this._wireTriggerEvents(!0)},i.prototype._init=function(){this.id=this.element[0].id,this.positionTarget=e.extend(!0,{},this.model.position.target),this.positionTooltip=e.extend(!0,{},this.model.position.stem),this.tipSize=e.extend(!0,{},this.model.tip.size),this._initialize(),this._render(),this.enable(this.model.enabled),this._wireEvents(!0)},i.prototype._initialize=function(){ej.isNullOrUndefined(this.model.target)?ej.isNullOrUndefined(this.model.content)&&!ej.isNullOrUndefined(this.element[0].getAttribute("tittle"))&&(this.model.content=this.element[0].getAttribute("tittle"),this.element[0].setAttribute("data-content",this.model.content),this.element[0].removeAttribute("title")):this._renderTarget()},i.prototype._wireEvents=function(t){var i=t?"_on":"_off";this._wireTriggerEvents(t),this.model.allowKeyboardNavigation&&this[i](e(window),"keydown",this._keyDown),null!=this.model.target?this[i](this.element,"scroll",this.model.target,this._hideTooltip):this[i](this.element,"scroll",this._hideTooltip),this[i](e(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this[i](e(this.tooltip),"mouseleave",this._onTooltipMouseLeave),this[i](e(window),"resize",this._hideTooltip),this[i](e(window),"touchend",this._docTouchEndHandler)},i.prototype._wireTriggerEvents=function(e){var t=e?"_on":"_off";this.model.trigger==ej.Tooltip.Trigger.Focus?null!=this.model.target?this[t](this.element,"blur",this.model.target,this._hideTooltip):this[t](this.element,"blur",this._hideTooltip):null!=this.model.target?this[t](this.element,ej.isDevice()?"touchstart":"mouseleave",this.model.target,this._onMouseOut):this[t](this.element,ej.isDevice()?"touchstart":"mouseleave",this._onMouseOut),this._wireMouseEvents(e);var i=this.model.trigger==ej.Tooltip.Trigger.Click?ej.isDevice()?"touchstart":"click":this.model.trigger==ej.Tooltip.Trigger.Focus?ej.isDevice()?"touchstart":"focus":ej.isDevice()?"touchstart":"mouseenter";null!=this.model.target?this[t](this.element,i,this.model.target,this._targetHover):this[t](this.element,i,this._targetHover)},i.prototype._wireMouseEvents=function(e){var t=e?"_on":"_off";this.model.associate!=ej.Tooltip.Associate.MouseEnter&&this.model.associate!=ej.Tooltip.Associate.MouseFollow||(null!=this.model.target?this[t](this.element,ej.isDevice()?"touchstart":"mousemove",this.model.target,this._tooltipMove):this[t](this.element,ej.isDevice()?"touchstart":"mousemove",this._tooltipMove))},i.prototype._render=function(){this.tooltip=ej.buildTag("div.e-tooltip-wrap e-widget","",{},{role:"tooltip","aria-readonly":"true","aria-hidden":"true","aria-describedby":this.id+"_content",id:this.id+"_Main"}),this.tooltipInter=ej.buildTag("div.e-tipContainer","",{},{}),this.tooltip.append(this.tooltipInter),this.model.isBalloon&&this._renderArrow(),e(this.model.containment).append(this.tooltip),this._setHeight(this.model.height),this._setWidth(this.model.width),this._createHeader(),this._tooltipContent(),this.model.cssClass&&this.tooltip.addClass(this.model.cssClass),this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner),this.model.enableRTL&&this._setRTL(this.model.enableRTL),this.tooltip[0].style.top="auto",this.tooltip[0].style.left="auto";var t=this.tooltip[0].getBoundingClientRect();this.tooltipPos={width:t.width,height:t.height,left:t.left,top:t.top,position:"absolute"},ej.isNullOrUndefined(this.model.target)&&(this._containerCalc(this.element),this._positionElement(this.element))},i.prototype._containerCalc=function(t){ej.isNullOrUndefined(t)&&(t=this.element);var i=e(t).offset();this.containerSize={height:"body"==this.model.containment?e(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight:e(this.model.containment).innerHeight(),width:"body"==this.model.containment?e(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth:e(this.model.containment).innerWidth()},this.containerSize.left="body"!=this.model.containment&&"static"==e(this.model.containment).css("position")?e(this.model.containment).offset().left-e(this.model.containment).offsetParent().offset().left:0,this.containerSize.top="body"!=this.model.containment&&"static"==e(this.model.containment).css("position")?e(this.model.containment).offset().top-e(this.model.containment).offsetParent().offset().top:0,i.left-="body"!=this.model.containment?"static"==e(this.model.containment).css("position")?e(this.model.containment).offsetParent().offset().left:e(this.model.containment).offset().left:0,i.top-="body"!=this.model.containment?"static"==e(this.model.containment).css("position")?e(this.model.containment).offsetParent().offset().top:e(this.model.containment).offset().top:0,this.targetPos.left=i.left,this.targetPos.top=i.top},i.prototype._setHeight=function(e){this.model.height=e,!isNaN(+e)&&isFinite(e)?this.tooltip[0].style.height=e+"px":this.tooltip[0].style.height=e,this.tooltip[0].style.display="block",this.tooltipPos.height=this.tooltip[0].offsetHeight,this.tooltip[0].style.display="none"},i.prototype._setWidth=function(e){this.model.width=e,"auto"!=this.model.width&&(e=!isNaN(+e)&&isFinite(e)?e+"px":e,this.tooltip[0].style.maxWidth=e,this.tooltip[0].style.minWidth="0px"),this.tooltip[0].style.width=e,this.tooltip[0].style.display="block",this.tooltipPos.height=this.tooltip[0].offsetHeight,this.tooltip[0].style.display="none"},i.prototype._setRTL=function(e){this.model.enableRTL=e,e?this.tooltip[0].classList.add("e-rtl"):this.tooltip[0].classList.remove("e-rtl")},i.prototype._setSkin=function(e){this.model.cssClass!=e&&(this.tooltip.removeClass(this.model.cssClass).addClass(e),this.model.cssClass=e)},i.prototype._roundedCorner=function(e){this.model.showRoundedCorner?this.tooltip[0].classList.add("e-corner"):this.tooltip[0].classList.remove("e-corner")},i.prototype._renderArrow=function(){if(ej.isNullOrUndefined(this.tip)){this.tip=ej.buildTag("div.e-arrowTip"," ",{id:this.id+"_eTip"},{});var t=document.createElement("div");t.classList.add("e-arrowTipOuter");var i=document.createElement("div");i.classList.add("e-arrowTipInner"),e(this.tip).append(t).append(i),e(this.tip).insertBefore(this.tooltipInter)}},i.prototype._adjustArrow=function(t){var i,s,a=e(this.tooltip).width(),r=e(this.tooltip).height(),n=t.stem,o=t.target,l={tipHeight:0,tipWidth:0};"right"==o.horizontal||"left"==o.horizontal?(i="left"==n.horizontal?-this.model.tip.size.height:"right"==n.horizontal?a:a/2-this.tipSize.width/2,s="center"!=n.horizontal?"top"==n.vertical?5:"center"==n.vertical?r/2-this.tipSize.width/2:r-5-this.tipSize.width:"top"==n.vertical?-this.tipSize.height:"bottom"==n.vertical?r:this.tooltipPos.height/2-this.tipSize.width/2,l=this._arrowBinding(t,"horizontal")):(s="top"==n.vertical?-this.tipSize.height:"bottom"==n.vertical?r:r/2-this.tipSize.width/2,i="center"==n.vertical?"left"==n.horizontal?-this.model.tip.size.height:a:"left"==n.horizontal?10:"center"==n.horizontal?this.tooltipPos.width/2-this.tipSize.width/2:a-10-this.tipSize.width,l=this._arrowBinding(t,"vertical")),this.arrowValue.left=i,this.arrowValue.top=s,e(this.tip).css({height:l.tipHeight+"px",width:l.tipWidth+"px",left:i+"px",top:s+"px",display:"center"==n.horizontal&&"center"==n.vertical?"none":"block"})},i.prototype._arrowBinding=function(t,i){var s,a,r=t.stem,n="horizontal"==i?"center"!=r.horizontal:"center"==r.vertical,o=e(this.tooltip).css("border-top-color"),l=e(this.tooltip).css("background-color"),d=this.model.tip.size.height,h=this.model.tip.size.height-1,c={"border-top":"none","border-bottom":"none","border-right":"none","border-left":"none"};return n?(s=this.model.tip.size.height,a=this.model.tip.size.width,e(this.tip).find(".e-arrowTipOuter").css(this._arrow(t,d,o,c,"horizontal")),e(this.tip).find(".e-arrowTipInner").css(this._arrow(t,h,l,c,"horizontal"))):(s=this.model.tip.size.width,a=this.model.tip.size.height,e(this.tip).find(".e-arrowTipOuter").css(this._arrow(t,d,o,c,"vertical")),e(this.tip).find(".e-arrowTipInner").css(this._arrow(t,h,l,c,"vertical"))),{tipHeight:a,tipWidth:s}},i.prototype._arrow=function(e,t,i,s,a){var r=e.stem,n="horizontal"==a&&"right"==r.horizontal?"0px":"1px",o="horizontal"==a?"1px":"bottom"==r.vertical?"0px":"1px";return s["border-top"]="horizontal"==a?t+"px solid transparent":"bottom"==r.vertical?t+"px solid "+i:"none",s["border-bottom"]="horizontal"==a?t+"px solid transparent":"top"==r.vertical?t+"px solid "+i:"none",s["border-right"]="horizontal"==a?"left"==r.horizontal?t+"px solid "+i:"none":t+"px solid transparent",s["border-left"]="horizontal"==a?"right"==r.horizontal?t+"px solid "+i:"none":t+"px solid transparent",t==this.model.tip.size.height-1&&(s.left=n,s.top=o),s},i.prototype._iconRender=function(){this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&(ej.isNullOrUndefined(this.tooltipClose)||e(this.tooltipClose).remove(),this.tooltipClose=ej.buildTag("div .e-icon"," ",{},{id:"_closeIcon"}),null!=this.model.title?e(this.tooltipClose).insertAfter(this.tooltipTitle).addClass("e-close"):e(this.tooltipClose).insertBefore(this.tooltipInter).addClass("e-cross-circle"),this._on(e(this.tooltipClose),"click",this._hideTooltip))},i.prototype._renderTarget=function(){this.targetElement=this.element.find(this.model.target);for(var e=0;e<this.targetElement.length;e++)ej.isNullOrUndefined(this.targetElement[e].getAttribute("title"))||(this.targetElement[e].setAttribute("data-content",this.targetElement[e].title),this.targetElement[e].removeAttribute("title"))},i.prototype._tooltipContent=function(){this.tooltipContent=ej.buildTag("div","",{},{id:this.id+"_content",class:"e-tipcontent e-def"}),this.tooltipContent[0].innerHTML=this.model.content,null!=this.model.title?e(this.tooltipContent).insertAfter(this.tooltipHeader):this.tooltipInter[0].appendChild(this.tooltipContent[0])},i.prototype._positionElement=function(t){this.tooltipPos.width=e(this.tooltip).outerWidth(),this.tooltipPos.height=e(this.tooltip).outerHeight(),this.targetPos.width=e(t).outerWidth(),this.targetPos.height=e(t).outerHeight(),this._containerCalc(t),this.model.associate==ej.Tooltip.Associate.Window?this._browserPosition():this.model.associate==ej.Tooltip.Associate.Axis?this._axisPosition():this.model.associate==ej.Tooltip.Associate.Target&&this._tooltipPosition(this.model.position),this.model.collision!=ej.Tooltip.Collision.None&&this.model.associate==ej.Tooltip.Associate.Target&&this._calcCollision(this.model.position,t)},i.prototype._browserPosition=function(){if("body"==this.model.containment){this.containerSize={height:e(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight,width:e(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth};var t=e.extend(!0,{},this.model.position),i={position:"absolute",left:"auto",top:"auto",bottom:"auto",right:"auto"};ej.isNullOrUndefined(this.tip)||e(this.tip).css({display:"none"}),"right"==this.model.position.target.horizontal?i.right=0:"left"==this.model.position.target.horizontal?i.left=0:i.left=this.containerSize.width/2-this.tooltipPos.width/2,"top"==this.model.position.target.vertical?i.top=0:"center"==this.model.position.target.vertical?i.top=this.containerSize.height/2-this.tooltipPos.height/2:i.bottom=0,this.model.showShadow&&this._shadowEffect(this.model.showShadow,t),e(this.tooltip).css(i)}},i.prototype._tooltipMove=function(e){if(this.model.closeMode==ej.Tooltip.CloseMode.None&&this.model.enabled){var t=this;if(this._isCancel)return;this.model.associate==ej.Tooltip.Associate.MouseFollow?this._mousePosition(e):this.model.associate==ej.Tooltip.Associate.MouseEnter&&(clearTimeout(this.mouseTimer),this.mouseTimer=setTimeout(function(){t.isTrack&&t._mousePosition(e)},300))}},i.prototype._mousePosition=function(t){var i,s;"touchstart"==t.type?(t.preventDefault(),i=t.touches[0].pageX,s=t.touches[0].pageY):"mousemove"==t.type&&(i=t.pageX,s=t.pageY),this.isCollision=!0,this._containerCalc(t.currentTarget);var a=0,r=0,n=0,o=e.extend(!0,{},this.model.position.stem),l=e.extend(!0,{},this.model.position),d={left:0,top:0},h={left:i,top:s},c={left:i,top:s},u=this.containerSize.left,p=this.containerSize.top,m="body"!=this.model.containment?i-e(this.model.containment).offset().left:i,g="body"!=this.model.containment?s-e(this.model.containment).offset().top:s;for(l.target.horizontal=l.target.vertical="center","body"!=this.model.containment&&(d="static"==e(this.model.containment).css("position")?e(this.model.containment).offsetParent().offset():e(this.model.containment).offset()),c.left-=d.left,c.top-=d.top;this.isCollision;){h=e.extend(!0,{},c);var f=(this.model.isBalloon&&("top"==o.vertical||"bottom"==o.vertical)&&this.tipSize.height,this.model.isBalloon&&("right"==o.horizontal||"left"==o.horizontal)?10+this.tipSize.width/2:0);if(a=0!=this.model.tip.adjust.xValue?this.model.tip.adjust.xValue:7,r=0!=this.model.tip.adjust.yValue?this.model.tip.adjust.yValue:10,n=this.model.isBalloon?"center"!=o.horizontal?this.model.tip.size.height:"center"!=o.vertical?this.model.tip.size.height:0:2,h.left+="right"==o.horizontal?-this.tooltipPos.width:"left"==o.horizontal?0:-this.tooltipPos.width/2,h.top+="bottom"==o.vertical?-this.tooltipPos.height:"top"==o.vertical?0:-this.tooltipPos.height/2,h.left+="center"!=o.vertical?"right"==o.horizontal?f:"left"==o.horizontal?-f:0:0,h.left+="center"==o.vertical?"right"==o.horizontal?-n:"left"==o.horizontal?+(n+a):0:0,h.top+="top"==o.vertical?+(n+r):"bottom"==o.vertical?-n:0,this.targetElement!=t.currentTarget&&(this.targetElement=t.currentTarget,(h.left<u||h.left+this.tooltipPos.width>u+this.containerSize.width)&&(this.positionTooltip.horizontal=m>=this.tooltipPos.width?"right":this.containerSize.width-m>=this.tooltipPos.width?"left":"center"),(h.top<p||h.top+this.tooltipPos.height>this.containerSize.height+p)&&(this.positionTooltip.vertical=g>=this.tooltipPos.height?"bottom":this.containerSize.height-g>=this.tooltipPos.height?"top":"center")),this.positionTooltip.horizontal!=o.horizontal||this.positionTooltip.vertical!=o.vertical)this.isCollision=!0,o=e.extend(!0,{},this.positionTooltip);else if(this.isCollision=!1,e(this.tooltip).css({top:h.top+"px",left:h.left+"px",position:"absolute",right:"auto",bottom:"auto"}),l.stem=e.extend(!0,{},this.positionTooltip),this.model.showShadow&&this._shadowEffect(this.model.showShadow,l),this.model.isBalloon&&this._adjustArrow(l),this._showTooltip(),this.model.associate==ej.Tooltip.Associate.MouseEnter&&(this.isTrack=!1),this.model.associate==ej.Tooltip.Associate.MouseFollow&&this.triggerEvents("tracking",{position:this.model.position,event:t}))return}},i.prototype._axisPosition=function(){var t=e.extend(!0,{},this.model.position);if("number"==typeof this.model.position.target.horizontal)var i=this.model.position.target.horizontal.toString();if("number"==typeof this.model.position.target.vertical)var s=this.model.position.target.vertical.toString();var a=parseInt(i),r=parseInt(s);ej.isNullOrUndefined(this.tip)||e(this.tip).css({display:"none"}),this.model.showShadow&&this._shadowEffect(this.model.showShadow,t),this.model.isBalloon&&this._adjustArrow(t),isFinite(a)&&isFinite(r)&&e(this.tooltip).css({top:r,left:a,position:"absolute"})},i.prototype._tooltipPosition=function(t){var i=0,s=e.extend(!0,{},t.stem),a=e.extend(!0,{},t.target),r=e.extend(!0,{},this.targetPos),n="top"===s.vertical||"bottom"===s.vertical?5+this.tipSize.width/2:0,o="right"===s.horizontal||"left"===s.horizontal?10+this.tipSize.width/2:0,i=this.model.isBalloon?"center"!==s.horizontal?this.model.tip.size.height:"center"!==s.vertical?this.model.tip.size.height:0:0,l=0!=this.model.tip.adjust.xValue?this.model.tip.adjust.xValue:this.model.isBalloon?0:2,d=0!=this.model.tip.adjust.yValue?this.model.tip.adjust.yValue:this.model.isBalloon?0:2;r.left+="right"===a.horizontal?this.targetPos.width:"left"===a.horizontal?0:this.targetPos.width/2,r.top+="bottom"===a.vertical?this.targetPos.height:"top"===a.vertical?0:this.targetPos.height/2,r.left+="right"===s.horizontal?-this.tooltipPos.width:"left"===s.horizontal?0:-this.tooltipPos.width/2,r.top+="bottom"===s.vertical?-this.tooltipPos.height:"top"===s.vertical?0:-this.tooltipPos.height/2,r.left+="center"!==a.horizontal?"right"===s.horizontal?-i:"left"===s.horizontal?i:0:"center"===s.vertical?"right"===s.horizontal?-i:"left"===s.horizontal?i:0:0,r.top+="center"===a.horizontal?"bottom"===s.vertical?-i:"top"===s.vertical?i:0:"center"===s.horizontal?"bottom"===s.vertical?-i:"top"===s.vertical?i:0:0,r.left+="center"===a.horizontal&&"center"!==s.vertical?"right"===s.horizontal?o:"left"===s.horizontal?-o:0:0,r.top+="center"!==a.horizontal&&"center"!==s.horizontal?"top"===s.vertical?-n:"bottom"===s.vertical?n:0:0,r.left+="center"!==a.horizontal?"right"===s.horizontal?-l:"left"===s.horizontal?l:0:"center"===s.vertical?"right"===s.horizontal?-l:"left"===s.horizontal?l:0:0,r.top+="center"===a.horizontal?"bottom"===s.vertical?-d:"top"===s.vertical?d:0:"center"===s.horizontal?"bottom"===s.vertical?-d:"top"===s.vertical?d:0:0,this.tooltipPos.left=r.left,this.tooltipPos.top=r.top,this.model.collision===ej.Tooltip.Collision.None&&(this.model.isBalloon&&this._adjustArrow(t),this._shadowEffect(this.model.showShadow,t),e(this.tooltip).css({top:r.top+"px",left:r.left+"px",position:"absolute"}))},i.prototype._calcCollision=function(t,i){var t=e.extend(!0,{},t),s=e.extend(!0,{},t),a=this.model.tip.size.height,r=!0,n="body"!=this.model.containment?e(i).offset().left-e(this.model.containment).offset().left:e(i).offset().left,o="body"!=this.model.containment?e(i).offset().top-e(this.model.containment).offset().top:e(i).offset().top,l={topSpace:o,rightSpace:this.containerSize.width-(n+this.targetPos.width),bottomSpace:this.containerSize.height-(o+this.targetPos.height),leftSpace:n,centerRight:this.containerSize.width-(n+this.targetPos.width/2),centerLeft:n+this.targetPos.width/2,centerTop:o+this.targetPos.height/2,centerBottom:this.containerSize.height-(o+this.targetPos.height/2),tooltipWidth:this.tooltipPos.width+a,tooltipHeight:this.tooltipPos.height+a};if(this.model.collision===ej.Tooltip.Collision.Fit)this._collisionFit(t,l);else{for(;r;)s=this._collisionFlip(s,l),s.target.horizontal!=t.target.horizontal||s.target.vertical!=t.target.vertical||s.stem.horizontal!=t.stem.horizontal||s.stem.vertical!=t.stem.vertical?(this._tooltipPosition(s),t=e.extend(!0,{},s)):r=!1;r||(this.model.collision==ej.Tooltip.Collision.FlipFit?this._collisionFit(s,l):(this._adjustArrow(s),this._shadowEffect(this.model.showShadow,s),e(this.tooltip).css({top:this.tooltipPos.top+"px",left:this.tooltipPos.left+"px",position:"absolute"})))}},i.prototype._collisionFlip=function(t,i){var s=e.extend(!0,{},this.tooltipPos),a=e.extend(!0,{},t),r=e(this.model.containment).scrollLeft(),n=e(this.model.containment).scrollTop(),o=this.containerSize.left,l=this.containerSize.top;return(s.left+s.width>o+this.containerSize.width+r||s.left<o)&&("center"!=t.target.horizontal?a.target.horizontal=i.leftSpace>=i.tooltipWidth?"left":i.rightSpace>=i.tooltipWidth?"right":"center":a.stem.horizontal=i.centerLeft>=i.tooltipWidth?"right":i.centerRight>=i.tooltipWidth?"left":"center"),s.top<l&&(a.target.vertical=i.bottomSpace>=i.tooltipHeight?"bottom":"center"),s.top+s.height>this.containerSize.height+n+l&&(a.target.vertical=i.topSpace>=i.tooltipHeight?"top":"center"),a.target.horizontal==t.target.horizontal&&a.target.vertical==t.target.vertical||("center"==a.target.horizontal?a.stem.horizontal=i.centerLeft>=i.tooltipWidth?"right":i.centerRight>=i.tooltipWidth?"left":"center":a.stem.horizontal="right"==a.target.horizontal?"left":"right"),a.target.vertical==t.target.vertical&&a.target.horizontal==t.target.horizontal||("center"==a.target.vertical?a.stem.vertical=i.centerTop>=i.tooltipHeight?"bottom":i.centerBottom>=i.tooltipHeight?"top":i.centerTop>i.centerBottom?"bottom":"top":a.stem.vertical="top"==a.target.vertical?"bottom":"top"),a},i.prototype._collisionFit=function(t,i){var s,a=e.extend(!0,{},this.tooltipPos),r=!1,n=!1,o=1,l=1,d=null,h=e(this.model.containment).scrollLeft();s="body"==this.model.containment?document.documentElement.scrollTop||document.body.scrollTop:e(this.model.containment).scrollTop();var c=this.containerSize.left,u=this.containerSize.top;(a.left<c||a.left+a.width>this.containerSize.width+h+c)&&(o=a.left<c?c:a.left+a.width>this.containerSize.width+h+c?a.left-(a.left+a.width-(this.containerSize.width+c)):1,r=!0),(a.top<u||a.top+a.height>this.containerSize.height+s+u)&&(l=a.top<u?u:a.top+a.height>this.containerSize.height+s+u?a.top-(a.top+a.height-(this.containerSize.height+u)):1,n=!0),e(this.tooltip).css({top:1!=l?l+"px":a.top+"px",left:1!=o?o+"px":a.left+"px",position:"absolute"}),this._adjustArrow(t),d={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:e(this.tip).css("display")},this.tooltipPos.top=l=1!=l?l:a.top,this.tooltipPos.left=o=1!=o?o:a.left;var p=e(this.tooltip).width(),m=e(this.tooltip).height();(r||n&&"none"!=d.display)&&(this.model.isBalloon&&(r&&(this.arrowValue.left=this._horizontalAdjustment(t,i)),n&&(this.arrowValue.top=this._verticalAdjustment(t,i))),this.arrowValue.left==-this.model.tip.size.height||this.arrowValue.left==p?e(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"block"}):this.arrowValue.top==-this.model.tip.size.height||this.arrowValue.top==m?e(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",
display:"block"}):e(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"none"})),this._shadowEffect(this.model.showShadow,t)},i.prototype._horizontalAdjustment=function(t,i){var s={left:this.arrowValue.left,top:this.arrowValue.top};e(this.tooltip).css({display:"block"});var a=(t.target.horizontal,this.model.tip.size.height),r="center"!=t.target.horizontal&&"left"==t.stem.horizontal?e(this.tip).offset().left:"center"!=t.target.horizontal&&"right"==t.stem.horizontal?e(this.tip).offset().left+a:e(this.tip).offset().left;return e(this.tooltip).css({display:"none"}),r>i.leftSpace&&r+a<i.leftSpace+this.targetPos.width?s.left:((r>i.leftSpace+this.targetPos.width||r<i.leftSpace)&&(s.left=i.leftSpace+this.targetPos.width/2-parseInt(this.tooltipPos.left.toString())),s.left)},i.prototype._verticalAdjustment=function(t,i){var s={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:this.arrowValue.display};e(this.tooltip).css({display:"block"});var a=(t.target.horizontal,this.model.tip.size.height),r="center"==t.target.horizontal&&"top"==t.stem.vertical?e(this.tip).offset().top:e(this.tip).offset().top+a;return e(this.tooltip).css({display:"none"}),r>i.topSpace&&r<i.topSpace+this.targetPos.height?s.top:((r<i.topSpace||r+a>i.topSpace+this.targetPos.height)&&(s.top=i.topSpace+this.targetPos.height/2-parseInt(this.tooltipPos.top.toString())),s.top)},i.prototype._createHeader=function(){null!=this.model.title&&(ej.isNullOrUndefined(this.tooltipTitle)&&this._createTitle(),ej.isNullOrUndefined(this.tooltipContent)?e(this.tooltipHeader).appendTo(this.tooltipInter).addClass("e-tooltipHeader"):e(this.tooltipHeader).insertBefore(this.tooltipContent).addClass("e-tooltipHeader")),this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&this._iconRender()},i.prototype._hideTooltip=function(){var t;if(this._isHidden=!0,t=0!=this.model.animation.speed?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0,1==this.model.enabled&&"block"==e(this.tooltip).css("display")){if(this.triggerEvents("beforeClose",{}))return;if(this.model.animation.effect==ej.Tooltip.Effect.Fade?e(this.tooltip).fadeOut(t):this.model.animation.effect==ej.Tooltip.Effect.Slide?e(this.tooltip).slideUp(t):e(this.tooltip).css({display:"none"}),"none"==e(this.tooltip).css("display")&&e(this.tooltip).attr("aria-hidden","true").removeClass("e-customAnimation"),this.triggerEvents("close",{}))return}},i.prototype._showTooltip=function(){if(this._isHidden){var t=0!=this.model.animation.speed?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0;if(this._isHidden=!1,"none"==e(this.tooltip).css("display")&&1==this.model.enabled){if(this.model.animation.effect==ej.Tooltip.Effect.Fade?e(this.tooltip).fadeIn(t):this.model.animation.effect==ej.Tooltip.Effect.Slide?e(this.tooltip).slideDown(t):e(this.tooltip).css({display:"block"}),"block"==e(this.tooltip).css("display")){var i=e(this.tooltip[0]).parents(),s=e("body").children();e(s).each(function(e,t){i.push(t)});var a=e(this.model.target).parents();e(a).each(function(e,t){i.push(t)});var r=Math.max.apply(r,e.map(i,function(t,i){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1}));!r||r<1e4?r=1e4:r+=1,e(this.tooltip).attr("aria-hidden","false").css({zIndex:r}),this.model.animation.effect==ej.Tooltip.Effect.None&&e(this.tooltip).addClass("e-customAnimation");var n=this._getScrollableParents();this._on(n,"scroll",this._hideTooltip)}if(this.triggerEvents("open",{}))return}}},i.prototype._getScrollableParents=function(){return e(this.element).parentsUntil("html").filter(function(){return"visible"!=e(this).css("overflow")}).add(e(window))},i.prototype._tooltipAuto=function(){var e=this;this.timer=setTimeout(function(){e._hideTooltip()},e.model.autoCloseTimeout)},i.prototype._beforeOpenTooltip=function(t){this.positionTooltip=e.extend(!0,{},this.model.position.stem),this.positionTarget=e.extend(!0,{},this.model.position.target),this.targetElement=this.element,ej.isNullOrUndefined(this.model.target)||ej.isNullOrUndefined(e(t.currentTarget).attr("data-content"))||(this.model.content=e(t.currentTarget).attr("data-content"),this._setContent(this.model.content))},i.prototype._targetHover=function(e){if(this.isTrack=!0,this.model.enabled)if(this._isHidden||("msie"==ej.browserInfo().name||"edge"==ej.browserInfo().name)&&this.model.associate==ej.Tooltip.Associate.MouseFollow){if(this.tooltip.stop(!0,!0),this.triggerEvents("beforeOpen",{event:e}))return void(this._isCancel=!0);this._isCancel=!1,this._beforeOpenTooltip(e),this.model.associate!=ej.Tooltip.Associate.MouseEnter&&this.model.associate!=ej.Tooltip.Associate.MouseFollow?(ej.isNullOrUndefined(this.model.target)?this._positionElement(this.element):this._positionElement(e.currentTarget),clearTimeout(this.timer),this._showTooltip(),this.model.closeMode==ej.Tooltip.CloseMode.Auto&&this._tooltipAuto(),"click"==e.type?this.triggerEvents("click",{event:e}):this.triggerEvents("hover",{event:e})):this.isTrack=!0}else ej.isNullOrUndefined(this.model.target)||this._positionElement(e.currentTarget)},i.prototype._onMouseOut=function(e){this.model.enabled&&!this._isHidden&&(this.model.closeMode==ej.Tooltip.CloseMode.None&&this._hideTooltip(),clearTimeout(this.mouseTimer)),this.isTrack=!1},i.prototype._onTooltipMouseEnter=function(t){var i=this;this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&e(i.tooltip).css({display:"block"})},i.prototype._onTooltipMouseLeave=function(t){var i=this;this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&i.model.closeMode==ej.Tooltip.CloseMode.None&&e(i.tooltip).css({display:"none"})},i.prototype._docTouchEndHandler=function(t){e(t.target).closest(".e-tooltip").length||this.model.closeMode!=ej.Tooltip.CloseMode.None||this._hideTooltip()},i.prototype._keyDown=function(e){var t=e.keyCode?e.keyCode:e.which?e.which:e.charCode;if(this.model.enabled)switch(t){case 27:e.preventDefault(),this._hideTooltip()}},i}(ej.WidgetBase);window.ej.widget("ejTooltip","ej.Tooltip",new t),window.ejTooltip=null}(jQuery),ej.Tooltip.CloseMode={Auto:"auto",None:"none",Sticky:"sticky"},ej.Tooltip.Effect={Slide:"slide",Fade:"fade",None:"none"},ej.Tooltip.Trigger={Hover:"hover",Click:"click",Focus:"focus"},ej.Tooltip.Collision={Flip:"flip",FlipFit:"flipfit",None:"none",Fit:"fit"},ej.Tooltip.Associate={Window:"window",MouseFollow:"mousefollow",MouseEnter:"mouseenter",Target:"target",Axis:"axis"},function(e,t,i){t.widget("ejMaskEdit","ej.MaskEdit",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{maskFormat:"",value:null,watermarkText:"",name:null,height:"",width:"",showError:!1,htmlAttributes:{},cssClass:"",customCharacter:null,inputMode:"text",readOnly:!1,textAlign:t.TextAlign.Left,hidePromptOnLeave:!1,showRoundedCorner:!1,enablePersistence:!1,enabled:!0,locale:"en-US",showPromptChar:!0,validationRules:null,validationMessage:null,keydown:null,keyup:null,keyPress:null,change:null,mouseover:null,mouseout:null,focusIn:null,focusOut:null,create:null,destroy:null},dataTypes:{maskFormat:"string",showError:"boolean",enabled:"boolean",customCharacter:"string",cssClass:"string",watermarkText:"string",showRoundedCorner:"boolean",showPromptChar:"boolean",inputMode:"enum",textAlign:"enum",hidePromptOnLeave:"boolean",readOnly:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},_setModel:function(e){for(var i in e)switch(i){case"value":this.temp_index=0,this.indexValue=[],t.isPlainObject(e[i])&&(e[i]=null),this._setValue(e[i]),this._initObjects(),e[i]=this.get_UnstrippedValue(),this._raiseEvents("change",!0);break;case"width":this._setWidth(e[i]);break;case"height":this._setHeight(e[i]);break;case"watermarkText":this.model.watermarkText=e[i],this._changeWatermark(e[i]);break;case"showRoundedCorner":this._roundedCorner(e[i]);break;case"showPromptChar":this._setShowPrompt(e[i]);break;case"validationRules":null!=this.model.validationRules&&(this._hiddenInput.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[i],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[i],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"textAlign":this._setTextAlign(e[i]);break;case"inputMode":this._setInputMode(e[i]);break;case"maskFormat":this.model.maskFormat=e[i],this._valueMapper(),this._maskModel=this.model.maskFormat,this._setMask(e[i]),this._initObjects(),e[i]=this.model.maskFormat;break;case"locale":this.model.value=this.get_StrippedValue(),this.model.locale=e[i],this._setValue(this.model.value),this._initObjects();break;case"cssClass":this._setSkin(e[i]);break;case"readOnly":this._setReadOnly(e[i]);break;case"enabled":this.model.enabled=e[i],this._controlStatus(e[i]);break;case"htmlAttributes":this._addAttr(e[i]);break;case"hidePromptOnLeave":this.model.hidePromptOnLeave=e[i],""!=this._textbox.value&&(this.model.hidePromptOnLeave?(this._unStrippedMask=this._textbox.value,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=this._textbox.value.replace(/[ ]/g,"_"),this.model.value=this._textbox.value)}},observables:["value"],_destroy:function(){t.isNullOrUndefined(this._hiddenInput)||this.element.attr("name",this._hiddenInput.attr("name")),this._isWatermark&&this.element.removeAttr("placeholder"),this.element.insertAfter(this.wrapper),t.isNullOrUndefined(this.wrapper)||this.wrapper.remove(),this.model.textAlign&&this.element.css("text-align",""),this.element.val("").removeClass(" e-mask e-input e-disable").empty(),this.element.removeAttr("aria-invalid aria-disabled")},_init:function(e){if(this.indexValue=[],this.temp_index=0,this._options=e,this._tempMask=this.model.maskFormat,this._keyFlag=!1,this._keyupFlag=!0,this._checkMask=!1,this._isAndroid=/android/i.test(navigator.userAgent.toLowerCase()),!this.element.is("input")||!this.element.is("input[type=text]")&&!this.element.is("input[type=password]")&&this.element.attr("type"))return this._destroy(),!1;this.element.attr("autocomplete","off"),this._isWatermark="placeholder"in document.createElement("input"),this._setValues(),this._valueMapper(),this._renderControl(),this._initObjects(),this._wireEvents(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),e&&void 0!=e.value&&this.model.value!==e.value&&this._trigger("_change",{value:this.get_UnstrippedValue(),unmaskedValue:this.get_StrippedValue()})},_initValidator:function(){!this.element.closest("form").data("validator")&&this.element.closest("form").validate()},_addAttr:function(i){var s=this;e.map(i,function(e,i){var a=i.toLowerCase();"class"==a?s.wrapper.addClass(e):"name"==a?s._hiddenInput.attr(i,e):"disabled"==a&&"disabled"==e?s.disable():"readonly"==a&&"readOnly"==e?s._setReadOnly(!0):"style"==a||"id"==a?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_setValidation:function(){this._hiddenInput.rules("add",this.model.validationRules);var i=this.element.closest("form").data("validator");i=i||this.element.closest("form").validate();var s=this._hiddenInput.attr("name");i.settings.messages[s]={};for(var a in this.model.validationRules){var r=null;if(!t.isNullOrUndefined(this.model.validationRules[a])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[a])){i.settings.messages[s][a]=e.validator.messages[a];for(var n in this.model.validationMessage)a==n&&(r=this.model.validationMessage[a])}else r=this.model.validationRules.messages[a];i.settings.messages[s][a]=null!=r?r:e.validator.messages[a]}}},_setShowPrompt:function(e){this.model.showPromptChar=e,this._textbox.value=this.model.showPromptChar?this._unStrippedMask:this.get_UnstrippedValue()},_controlStatus:function(e){1!=e?this.disable():this.enable()},_setValues:function(){this._unStrippedMask=null,this._charMap={9:"[0-9 ]",a:"[A-Za-z0-9 ]",A:"[A-Za-z0-9]",N:"[0-9]","#":"[0-9]","&":"[^]+","<":"",">":"",C:null!=this.model.customCharacter?"["+this.model.customCharacter+"]":"[A-Za-z ]","?":"[A-Za-z]"}},_renderControl:function(){if(this.model.name=null!=this.element.attr("name")?this.element.attr("name"):null!=this.model.name?this.model.name:this.element[0].id,null!=this.element.attr("name")&&this.element.removeAttr("name"),this.wrapper=t.buildTag("span.e-mask e-widget "+this.model.cssClass),this.innerWrapper=t.buildTag("span.e-in-wrap e-box"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this._hiddenInput=t.buildTag("input#"+this._id+"_hidden","",{},{type:"hidden"}).insertBefore(this.element),this._isWatermark||"password"==this.model.inputMode||(this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this.model.watermarkText),this._hiddenSpan.css("display","none"),this._hiddenSpan.bind("mousedown",e.proxy(this._OnFocusHandler,this))),t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),t.isNullOrUndefined(this.model.value)||(this.wrapper.addClass("e-valid"),"number"==typeof this.model.value&&(this.model.value=this.model.value.toString())),this._hiddenInput.attr({name:this.model.name,value:this.model.value}),this.element.attr({"aria-invalid":!1}).addClass("e-input"),""==this.model.maskFormat&&null==this.model.value){var i=this;setTimeout(function(){""!=i.element.val()&&(i.option("value",i.element.val()),i.previousValue=i.model.value,i._initObjects())},500)}else this.element.attr({value:this.model.value});t.isNullOrUndefined(this._options.inputMode)&&!t.isNullOrUndefined(this.element.attr("type"))?this.model.inputMode=this.element.attr("type"):this._setInputMode(this.model.inputMode),this._setWidth(this.model.width),this._setHeight(this.model.height),this._roundedCorner(this.model.showRoundedCorner),this._setTextAlign(this.model.textAlign),this._setReadOnly(this.model.readOnly),this._controlStatus(this.model.enabled),this.previousValue=this.model.value},_initObjects:function(){if(this._textbox=this.element[0],this._keypressFlag=0,this._selectedTextKeyDown=0,this._keydownFlag=0,this.model.maskFormat.indexOf("\\")>=0){for(var e=0,t=0;t<this.model.maskFormat.length;t++)"\\"==this.model.maskFormat[t]&&(e+=1);this._maskLength=this.model.maskFormat.length-e}else this._maskLength=this.model.maskFormat.length;if(this.model.maskFormat.indexOf("\\")>=0)if(this.model.value){this._maskModel="";for(var i=0;i<this.model.maskFormat.length;++i)"\\"==this.model.maskFormat[i]?this._maskModel+=this.model.maskFormat[++i]:"\\"!=this.model.maskFormat[i]&&(this._maskModel+=this.model.maskFormat[i].replace(/[9?CANa#&]/g,"_"))}else this._maskModel=this._emptyMask;else this._maskModel=this.model.maskFormat.replace(/[9?CANa#&]/g,"_");this._changeMask(this.model.locale),(this._maskModel.indexOf("<")>=0||this._maskModel.indexOf(">")>=0)&&(this._maskModel=this._maskModel.replace(/[<>]/g,""),this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,""),this._valueMapper()),this._validatedValue=this._maskModel,"password"!=this.model.inputMode&&(this._setValue(this.model.value),this._setWaterMark()),this.model.showError&&this.element.addClass("e-error").attr("aria-invalid","true"),this._prevValue=this.model.watermarkText?this._textbox.value?this._textbox.value:this._maskModel:this._textbox.value},_setWidth:function(e){this.wrapper.width(e)},_setHeight:function(e){this.wrapper.height(e)},_roundedCorner:function(e){e&&!this.innerWrapper.hasClass("e-corner")?this.innerWrapper.addClass("e-corner"):this.innerWrapper.hasClass("e-corner")&&this.innerWrapper.removeClass("e-corner")},_setTextAlign:function(e){"right"==e?(this.element.css("text-align",""),this.wrapper.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.element.css("text-align",e))},_setInputMode:function(e){this.element.attr("type",e)},_setReadOnly:function(e){this.model.readOnly=e,e?this.element.attr("readonly",!0):this.element.removeAttr("readonly")},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)},_setWaterMark:function(){var i=this.model.showPromptChar?this._maskModel:""!=this._maskModel&&null!=this._maskModel?this._maskModel.replace(/[_]/g," "):this._maskModel;this.model.maskFormat.indexOf("\\")>=0?this._maskModel=""===this.model.maskFormat?null:i:this._maskModel=""===e.trim(this.model.maskFormat.replace(/[9?CANa#&]/g,"_"))?null:this.model.maskFormat.replace(/[9?CANa#&]/g,"_"),(""!=this._maskModel&&null!=this._maskModel&&this._textbox.value==i||""==i&&""==this._textbox.value&&"password"!=this.model.inputMode)&&(this._textbox.value=""),0!=this.model.watermarkText.length||t.isNullOrUndefined(this.element.attr("placeholder"))||(this.model.watermarkText=this.element.attr("placeholder")),this.model.watermarkText&&(this._isWatermark?this.element.attr("placeholder",this.model.watermarkText):this._textbox.value?this._hiddenSpan.css("display","none").text(this.model.watermarkText):this._hiddenSpan.css("display","block").text(this.model.watermarkText)),this.model.watermarkText||this._textbox.value||!this.model.maskFormat||(this.model.hidePromptOnLeave?(this._unStrippedMask=this._maskModel,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=i)},_changeWatermark:function(t){if(!this.model.enabled)return!1;var i=this.model.showPromptChar?this._maskModel:""!=this._maskModel&&null!=this._maskModel?this._maskModel.replace(/[_]/g," "):this._maskModel;this._textbox.value!=i&&""!=this._textbox.value&&""!=e.trim(this.get_StrippedValue())||"password"==this.model.inputMode||(this._textbox.value=""),this._isWatermark?this.element.attr("placeholder",t):this._hiddenSpan.text(t),!this.model.watermarkText&&""==e.trim(this.get_StrippedValue())&&this.model.maskFormat&&(this.model.hidePromptOnLeave?(this._unStrippedMask=this._maskModel,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=i)},_showAlert:function(){var t=this;this.element.addClass("e-error").attr("aria-invalid","true").animate({Opacity:1},700,null,function(){e(t._textbox).removeClass("e-error").attr("aria-invalid","false")})},_unMask:function(){for(var e,t,i="",s=0,a=0,r=0,n=this.model.value.toString(),o="",l=this._rules.slice(),d=0;d<this._rules.length;d++){for(var h=0;h<n.length;h++)if(l[d].rule&&n[h].match(l[d].rule)||void 0===l[d].rule){o+=l[d].rule?n.charAt(h):l[d],n=l[d].rule?n.slice(h+1,n.length):l[d]===n[h]?n.slice(h+1,n.length):n,s=1;break}0===s&&n.length>0&&(o+=void 0===l[d].rule?l[d]:""),s=0}for(;a<this._rules.length&&(e=o[r],t=this._rules[a],void 0!=e);){if(e===t||"_"===e)i+="_"===e?"_":e,r+=1,a+=1;else if(void 0===t.rule)i+=t,a+=1;else if(void 0!=this._rules[a].rule&&e.match(this._rules[a].rule)){var c=o.charCodeAt(r),u=a;if(">"===this._rules[0]||"<"===this._rules[0])var u=a-1;this._validateChars(c,u)?(i+=o.charAt(r),a++,r++):a++}else if("string"!=typeof t)if(e.match(this._rules[a].rule)){var c=o.charCodeAt(r);this._validateChars(c,a)&&(i+=o.charAt(r),a++,r++)}else r++,a++;else a++;if(r>o.length)break}return i},_validateValue:function(){if(!t.isNullOrUndefined(this.model.value)){var e,i,s=this.model.value,a=this._maskModel,r=f=0,n=this._unMask();if(this._isWatermark||"password"==this.model.inputMode||this._hiddenSpan.css("display","none"),0==this._maskLength)return this._textbox.value=s,this._setWaterMark(),!0;var o=this.model.value.toString();for(s=this.model.maskFormat.indexOf("\\")>=0||null!=this.model.customCharacter?this.model.value:this.model.value=o;r<this._rules.length&&(e=n[f],"_"===e&&"[^]+"===this._rules[r].rule&&(this.indexValue[this.temp_index]=r,this.temp_index++),i=this._rules[r],void 0!=e);)if(e===i||"_"===e){var l=a.substring(0,r),d=a.substring(r);a=l+e+d.substr(1,d.length),f+=1,r+=1}else if(void 0!=this._rules[r].rule){var h=n.charCodeAt(f),c=r;if(">"===this._rules[0]||"<"===this._rules[0])var c=r-1;if(this._validateChars(h,c)){var l=a.substring(0,c),d=a.substring(c);a=l+n.charAt(f)+d.substr(1,d.length),r++,f++}else r++}else if("string"!=typeof i)if(e.match(this._rules[r].rule)){var h=n.charCodeAt(f);if(this._validateChars(h,r)){var l=a.substring(0,r),d=a.substring(r);a=l+n.charAt(f)+d.substr(1,d.length),r++,f++}else r++}else{var l=a.substring(0,r),d=a.substring(r);a=l+"_"+d.substr(1,d.length),f++,r++}else r++;if(this.model.value)if(this._textbox.value=a,this.model.value=this.get_UnstrippedValue(),null===this.model.value&&(this.model.value=a),this.model.maskFormat.indexOf("\\")>=0){this._textbox.value="";for(var u=0,p=0;p<this.model.maskFormat.length;p++)"\\"==this.model.maskFormat[p]&&(u+=1);var m=0;if(this.model.value.length==a.length-u)for(var g=0;g<this.model.maskFormat.length;++g)"\\"==this.model.maskFormat[g]?m+=1:"\\"==this.model.maskFormat[g-1]?this._textbox.value+=s[g-m]:"\\"!=this.model.maskFormat[g]&&(s.length<=g-m?this._textbox.value+=a[g].replace(/[9?CANa#&]/g,"_"):this._textbox.value+=s[g-m].replace(/[9?CANa#&]/g,"_"));else this._textbox.value=a}else this.model.hidePromptOnLeave?(this._unStrippedMask=a.replace(/[ ]/g,"_"),this._textbox.value=a):this._textbox.value=a;else if(this.model.maskFormat.indexOf("\\")>=0)for(var g=0;g<this.model.maskFormat.length;++g){"\\"==this.model.maskFormat[g-1]?this._textbox.value+=this.model.maskFormat[g]:"\\"!=this.model.maskFormat[g]&&(this._textbox.value+=this.model.maskFormat[g].replace(/[9?CANa#&]/g,"_"))}else this._textbox.value=this.model.maskFormat.replace(/[9?CANa#&]/g,"_");if(void 0!=this._textbox.value&&this.model.hidePromptOnLeave&&(this._unStrippedMask=this._textbox.value.replace(/[ ]/g,"_"),this._textbox.value=this.get_UnstrippedValue()),null!=this._maskModel&&(this._textbox.value.indexOf(">")>=0||this._textbox.value.indexOf("<")>=0)&&(this._textbox.value=this._textbox.value.replace(/[<>]/g,""),this._tempMask=this.model.maskFormat,this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,"")),this.model.showPromptChar||(this._textbox.value=this._getUnstrippedValue(!0)),null!=this._tempMask)for(var f=0;f<this._textbox.value.length;f++){var _=this._updateCasing(this._textbox.value[f],f);t.isNullOrUndefined(_)||(this._textbox.value=this._textbox.value.substring(0,f)+_+this._textbox.value.substring(f+_.length))}this._setWaterMark()}},_selectionText:function(e,i){var s=t.isNullOrUndefined(this._maskModel)?"":this._maskModel.substring(e,i);return this._textbox.value=this._textbox.value.substring(0,e)+s+this._textbox.value.substring(i),1==this._keydownFlag?(this._setCaretPosition(e),e):2==this._keydownFlag?(this._setCaretPosition(i),i):e},_caretPosition:function(e){var t=0;if(document.selection){var i=document.selection.createRange(),s=i.text.length;i.moveStart("character",-e.value.length),t=i.text.length-s,0!=s&&(t=this._selectionText(t,i.text.length),this._selectedTextKeyDown=1)}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart,e.selectionStart!=e.selectionEnd&&(this._keydownFlag&&(t=this._selectionText(e.selectionStart,e.selectionEnd)),this._selectedTextKeyDown=1));return t},_setCaretPosition:function(e){var t=this._textbox;if("Microsoft Internet Explorer"==window.navigator.appName){if(t.createTextRange){var i=t.createTextRange();i.move("character",e),i.select()}}else t.selectionStart||"0"==t.selectionStart?(t.focus(),this._isAndroid?setTimeout(function(){t.setSelectionRange(e,e)},0):t.setSelectionRange(e,e)):t.focus()},_validateChars:function(t,i){var s=this._charMap,a=!1;if(this.model.maskFormat.indexOf("\\")>=0)var r=this._getCunrrentPos(i),n=this.model.maskFormat.substr(i+r,1);else var n=this.model.maskFormat.substr(i,1);var o=this.model.customCharacter,l=String.fromCharCode(t);return e.each(s,function(e,t){n==e&&(null!=o&&("C"==e?t="["+o+"]":"A"!=e&&"N"!=e&&"#"!=e||(t=t.replace("]","")+o+"]")),a=!!l.match(new RegExp(t)))}),a},_seekNext:function(e,t){for(var i=this._caretPosition(this._textbox),s=e?t?i-t-1:i-1:i,a=s,r=!0;r;){if(s>=0&&s<this._maskLength){for(var n=0,o=0;o<=s;o++)"\\"==this.model.maskFormat[o]&&(n+=1);if("C"!=this.model.maskFormat.charAt(s)&&(this.model.maskFormat.indexOf("\\")>=0?"\\"!=this.model.maskFormat.charAt(s+n)&&"\\"!=this.model.maskFormat.charAt(s+n-1)?this._charMap[this.model.maskFormat.charAt(s+n)]||s++:"\\"!=this.model.maskFormat.charAt(s+n)&&"\\"==this.model.maskFormat.charAt(s+n-1)&&++s:this._charMap[this.model.maskFormat.charAt(s)]||s++,s!=a)){a=s;continue}}r=!1}return s},_seekBefore:function(e){var t=this._caretPosition(this._textbox),i=e?t+1:t,s=--i,a=!0;for(1==this._selectedTextKeyDown&&(a=!1);a;){if(i>=0&&i<this._maskLength){for(var r=0,n=0;n<=i;n++)"\\"==this.model.maskFormat[n]&&(r+=1);if("C"!=this.model.maskFormat.charAt(i)&&(this.model.maskFormat.indexOf("\\")>=0?"\\"!=this.model.maskFormat.charAt(i+r)&&"\\"!=this.model.maskFormat.charAt(i+r-1)?this._charMap[this.model.maskFormat.charAt(i+r)]||this._setCaretPosition(--i):"\\"==this.model.maskFormat.charAt(i+r-1)&&this._setCaretPosition(--i+r):this._charMap[this.model.maskFormat.charAt(i)]||this._setCaretPosition(--i)),i!=s){s=i;continue}}a=!1}return i},_writeBuffer:function(e,t,i){if(t<=this._maskLength){var s=this._textbox.value;if(null!=this.indexValue&&"95"!=i.keyCode)for(var a=0;a<this.indexValue.length;a++)this.indexValue[a]==t&&("_"==e&&"8"!=i.keyCode||(this.indexValue[a]=""));if("95"==i.keyCode&&(this.indexValue[this.temp_index]=t,this.temp_index++),null!=this._tempMask)var r=this._updateCasing(e,t);e=void 0==r?e:r;var n=s.substring(0,t),o=s.substring(t);if(this.model.maskFormat.indexOf("\\")>=0){for(var l=0,a=0;a<=t;a++)this.model.maskFormat[a].indexOf("\\")>=0&&0!=t&&(l+=1);this.model.maskFormat[t+l].indexOf("\\")>=0?this._textbox.value=n+s[t]+o.substr(1,o.length):this._textbox.value=n+e+o.substr(1,o.length)}else this._textbox.value=n+e+o.substr(1,o.length);this._setCaretPosition(t+1)}},_updateCasing:function(e,t){for(var i=0;i<t+1;i++)"<"!=this._tempMask.substr(i,1)&&">"!=this._tempMask.substr(i,1)||t++;for(var s=t;s>-1;s--){if("<"==this._tempMask.substr(s,1))return e.toLowerCase();if(">"==this._tempMask.substr(s,1))return e.toUpperCase()}},_getStrippedValue:function(t){var i,s,a=this.model.maskFormat,r=t?"":null;if(s=""==this._textbox.value&&"password"!=this.model.inputMode?this._maskModel:this._textbox.value,0==a.length)return s;for(var n=0,i=0;i<a.length;i++)if(r=t?r:e.trim(r),this.model.maskFormat.indexOf("\\")>=0)if("\\"==this.model.maskFormat[i])n+=1;else if("\\"==this.model.maskFormat[i-1])r+=this._textbox.value[i-n];else{var o=a[i],l=null;-1!="9?$a*".indexOf(o)?l=this._charMap[o]:"A"==o||"N"==o||"#"==o?l=this._charMap[o].replace("]","")+this.model.customCharacter+"]":"C"==o?l="["+this.model.customCharacter+"]":"&"==o&&(r+=s[i-n]),l&&s[i-n]&&s[i-n].match(new RegExp(l))&&(r+=s[i-n])}else{var o=a[i],l=null;-1!="9?$a*".indexOf(o)?l=this._charMap[o]:"A"==o||"N"==o||"#"==o?l=this._charMap[o].replace("]","")+this.model.customCharacter+"]":"C"==o?l="["+this.model.customCharacter+"]":"&"==o&&(r+=s[i-n]),l&&s[i]&&s[i].match(new RegExp(l))&&(r+=s[i])}return r},_getUnstrippedValue:function(t){var i=0,s=""==this._textbox.value&&"password"!=this.model.inputMode?this._maskModel:this._textbox.value,a=null;if(0==this.model.maskFormat.length)return s;if(void 0!=s&&(a=""==e.trim(s.replace(/[_]/g," "))?null:s.replace(/[_]/g," ")),"_"==this.model.customCharacter&&null==a&&(a=""),null==a&&null!=this.indexValue[i]&&(a=""),void 0!=s&&null!=this.indexValue[i]&&null!=a)for(;i<this.indexValue.length;i++)""==this.indexValue[i]&&"0"!=this.indexValue[i]||(a=a.substr(0,this.indexValue[i])+"_"+a.substr(this.indexValue[i]+1));return null==a&&t?"":a},get_StrippedValue:function(){return this._getStrippedValue()},get_UnstrippedValue:function(){return this._getUnstrippedValue()},_setValue:function(i){(t.isNullOrUndefined(i)||""==e.trim(i))&&(i=null),this.model.value=i,this._isWatermark||"password"==this.model.inputMode||this._hiddenSpan.css("display","none"),t.isNullOrUndefined(this.model.maskFormat)||""==this.model.maskFormat?(this._textbox.value=t.isNullOrUndefined(i)?"":i,this._unStrippedMask=this._textbox.value):(this._validateValue(),t.isNullOrUndefined(this.model.value)&&(this._textbox.value=t.isNullOrUndefined(i)?"":i,this._unStrippedMask=this._maskModel)),this._setWaterMark(),this._prevValue=this._textbox.value,this._prevPosition=this.element[0].selectionStart},_valueMapper:function(){for(var e,t,i=[],s=0,a=this.model.maskFormat||"",r=a.split(""),n=0,o=0,l="",d=this._charMap;n<a.length;n++)if(e=r[n],t=d[e])i[s]={rule:t},l+="_",s+=1;else{"\\"===e&&(o=n+1,n++,e=r[o]),e=e.split("");for(var h=0;h<e.length;h++)i[s]=e[h],l+=e[h],s+=1}this._rules=i,this._emptyMask=l,this._maskLength=l.length},_changeMask:function(e){if(0!=this._maskModel.length){var i,s,a,r=t.preferredCulture(e),n="";i=r.numberFormat[","],s=r.numberFormat.currency.symbol,a=r.numberFormat["."];for(var o=0;o<this._maskModel.length;o++)","==this._maskModel[o]?n+=i:"."==this._maskModel[o]?n+=a:"$"==this._maskModel[o]?n+=s:n+=this._maskModel[o];this._maskModel=n}},_setMask:function(i){if(this._maskLength=i.length,this.model.maskFormat=i,this._tempMask=this.model.maskFormat,this._maskModel=i.replace(/[9?CANa]/g,"_"),(this._maskModel.indexOf("<")>=0||this._maskModel.indexOf(">")>=0)&&(this._maskModel=this._maskModel.replace(/[<>]/g,""),this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,"")),t.isNullOrUndefined(this.model.maskFormat)||""==this.model.maskFormat){if(!this.model.watermarkText&&this._textbox.value!=this._maskModel)if(this.model.maskFormat)this.model.hidePromptOnLeave?(this._textbox.value=this._maskModel,this._unStrippedMask=this._textbox.value,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=this._maskModel;else{var s=this._unStrippedMask.replace(/[_]/g," ");this._textbox.value=null==this.model.customCharacter?e.trim(s.replace(/[\(\)-]/g,"")):e.trim(s),this._unStrippedMask=this._textbox.value}}else this._validateValue()},enable:function(){this.element.disabled=!1,this.element.removeAttr("disabled").removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-placeholder").length>0&&this.wrapper.find(".e-placeholder").removeAttr("disabled","disabled"),this.wrapper.removeClass("e-disable-wrap"),this.model.enabled=!0},disable:function(){this.element.disabled=!0,this.element.attr("disabled","disabled").addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-placeholder").length>0&&this.wrapper.find(".e-placeholder").attr("disabled","disabled"),this.wrapper.addClass("e-disable-wrap"),this.model.enabled=!1},clear:function(){this._textbox.value=this.model.maskFormat.replace(/[9?aCAN]/g,"_"),this.model.value=this.get_StrippedValue()},_wireEvents:function(){this._on(this.element,"focus",this._OnFocusHandler),this._on(this.element,"blur",this._OnBlurHandler),this._on(this.element,"keydown",this._OnKeyDownHandler),this._on(this.element,"input",this._OnInputHandler),this._on(this.element,"keypress",this._OnKeyPressHandler),this._on(this.element,"keyup",this._OnKeyUpHandler),this._on(this.element,"mouseover",this._OnMouseOverHandler),this._on(this.element,"mouseout",this._OnMouseOutHandler),this._on(this.element,"paste",this._OnPasteHandler),this._on(this.element,"cut",this._OnCutHandler)},_OnCutHandler:function(e){var i=t.isNullOrUndefined(this._maskModel)?"":this._maskModel.substring(this._textbox.selectionStart,this._textbox.selectionEnd),s=this._textbox.value.substring(0,this._textbox.selectionStart),a=this._textbox.value.substring(this._textbox.selectionEnd),r=this._textbox.selectionStart,n=this;setTimeout(function(){n._textbox.value=s+i+a,n._setCaretPosition(r),
n._prevValue=n._textbox.value,n._prevPosition=n.element[0].selectionStart,n._raiseEvents("change")},0)},_OnPasteHandler:function(t){var i=this;return this._keyFlag=!0,setTimeout(function(){var t=e(i._textbox).val();i._setValue(t),i._raiseEvents("change")},0),!0},_OnFocusHandler:function(i){this.wrapper.addClass("e-focus");var s=this.model.showPromptChar?this._maskModel:""!=this._maskModel&&null!=this._maskModel?this._maskModel.replace(/[_]/g," "):this._maskModel;if(!this.model.readOnly){this._focusValue=this.model.value,this._isWatermark||"password"==this.model.inputMode||this._hiddenSpan.css("display","none"),""==this._textbox.value&&""!=this._maskModel&&"password"!=this.model.inputMode&&(this.model.maskFormat.indexOf("\\")>=0?this._textbox.value=s:this._textbox.value=t.isNullOrUndefined(this._maskModel)?"":s),null!=this._maskModel&&(this._textbox.value.indexOf("<")>=0||this._textbox.value.indexOf(">")>=0)&&(this._textbox.value=this._textbox.value.replace(/[<>]/g,""),this._maskModel=this._textbox.value,this._tempMask=this.model.maskFormat,this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,"")),this._textbox.value!=s&&null!=this._unStrippedMask&&this.model.hidePromptOnLeave&&(this._textbox.value=this._unStrippedMask),this.model.showPromptChar||(this._textbox.value=this._getUnstrippedValue(!0)),e.fn.selectRange=function(e,t){return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(e,t);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select()}})},this.model.maskFormat&&e(this.element).selectRange(0,0);var a=this;setTimeout(function(){a._prevPosition=a.element[0].selectionStart},0),this._raiseEvents("focusIn")}},_OnBlurHandler:function(e){this.wrapper.removeClass("e-focus"),this.model.value=this.get_StrippedValue();var i=new Array,s=new Array;if((-1!=this._textbox.value.indexOf("_")||-1!=this._textbox.value.indexOf(" "))&&!t.isNullOrUndefined(this.model.value)){for(var a=0;a<this.model.maskFormat.length;a++)"A"==this.model.maskFormat[a]||"?"==this.model.maskFormat[a]?i.push(a):"9"!=this.model.maskFormat[a]&&"a"!=this.model.maskFormat[a]&&"C"!=this.model.maskFormat[a]||s.push(a);for(var a=0;a<i.length;a++)"_"===this._textbox.value[i[a]]&&(this._showAlert(),this.model.value=this._textbox.value);for(var a=0;a<s.length;a++)if("_"==this.model.value[s[a]]||" "==this.model.value[s[a]]){this.model.value=this.model.value.substr(0,s[a])+this.model.value.substr(s[a]+1,this.model.value.length);for(var r=a;r<s.length;r++)s[r]=s[r]-1}}this.model.value=null!=this.model.value?this.model.value.replace(/\s+/g,""):this.model.value,void 0!=this._textbox.value&&(""==this.model.watermarkText||""!=this.model.watermarkText&&""!=this.model.value)&&(this.model.hidePromptOnLeave?(this._unStrippedMask=this._textbox.value,this._textbox.value=this.get_UnstrippedValue()):this._unStrippedMask=this._textbox.value),"password"!=this.model.inputMode&&this._setWaterMark(),this._raiseEvents("change"),this._raiseEvents("focusOut")},_OnKeyDownHandler:function(e){if(!this.model.readOnly){if(this._keyFlag=!0,this._checkMask){var i=this.element[0].selectionStart,s=this._getStrippedValue(!0);this._setValue(s),this._setCaretPosition(i),this._checkMask=!1}this._keypressFlag=0,this._keyupFlag=!0;var a=t.browserInfo().name,r=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(t.isDevice()&&t.isTouchDevice()&&!r&&(229==e.keyCode||"mozilla"==a&&0==e.keyCode&&0==e.charCode||"edge"==a||"msie"==a)&&(this._keyupFlag=!1),this._raiseEvents("onKeyDown",null,{keyCode:e.keyCode,altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,originalArgs:e}),this._raiseEvents("keyDown",null,{keyCode:e.keyCode,altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,originalArgs:e}),this.element.removeClass("error"),0==this._maskLength)return!0;var n=e.keyCode?e.keyCode:e.charCode,o=(String.fromCharCode(n),this._seekNext()),l=this.model.showPromptChar?"_":" ",a=t.browserInfo().name;if("msie"==a&&""==this._textbox.value){if(this.model.maskFormat.indexOf("\\")>=0)for(var i=0;i<this.model.maskFormat.length;++i){var a;"\\"==this.model.maskFormat[i-1]?this._textbox.value+=this.model.maskFormat[i]:"\\"!=this.model.maskFormat[i]&&(this._textbox.value+=this.model.maskFormat[i].replace(/[9?CANa#&]/g,"_"))}else this._textbox.value=this.model.maskFormat.replace(/[9?CANa#&]/g,"_");this._setCaretPosition(o)}if(n>=35&&n<=41&&("Mozilla"!=window.navigator.appCodeName&&"opera"!=window.navigator.appCodeName||(this._keypressFlag=1)),e.shiftKey&&(35==e.keyCode||36==e.keyCode||37==e.keyCode||39==e.keyCode||46==e.keyCode||127==e.keyCode)||e.ctrlKey&&(86==e.keyCode||65==e.keyCode||67==e.keyCode||88==e.keyCode))return void(this._keypressFlag=1);if(8==n){if("password"!=this.model.inputMode){this._keydownFlag=1;var o=this._seekBefore();return this._selectedTextKeyDown?!this.model.showPromptChar&&this._selectedTextKeyDown&&(8==e.keyCode&&"-1"==o&&null!=this.indexValue&&(this.indexValue=[],this.temp_index=0),this._textbox.value=this.get_UnstrippedValue(),this._setCaretPosition(o+1)):(o>=0&&o<this._maskLength&&this._writeBuffer(l,o,e),o<0&&(o=0),this._setCaretPosition(o)),this._keydownFlag=0,this._selectedTextKeyDown=0,8==e.keyCode&&"-1"==o&&null!=this.indexValue&&(this.indexValue=[],this.temp_index=0),e.preventDefault(),this._prevValue=this._textbox.value,this._prevPosition=this.element[0].selectionStart,this._keyFlag=!1,!1}return this._keypressFlag=1,!0}if(46==e.keyCode||127==e.keyCode){if("password"!=this.model.inputMode){if(this._keydownFlag=2,o=this._seekNext(),this._selectedTextKeyDown)!this.model.showPromptChar&&this._selectedTextKeyDown&&(this._textbox.value=this.get_UnstrippedValue(),this._setCaretPosition(o));else if(o>=0&&o<this._maskLength){var d=this._getCunrrentPos(o);"&"!=this.model.maskFormat[o+d]&&this._writeBuffer(l,o,e)}return this._keydownFlag=0,this._selectedTextKeyDown=0,e.preventDefault(),!1}return this._keypressFlag=1,!0}}},_ErrorHandler:function(e){var t=this.model.showPromptChar?"_":" ";""==this._textbox.value&&(this._textbox.value=this.model.maskFormat.replace(/[9?$CANa*]/g,t)),this._setCaretPosition(e),this._showAlert()},_getCunrrentPos:function(e){for(var t=0,i=0;i<=e+t;i++)"\\"==this.model.maskFormat[i]&&(t+=1);return t},_OnKeyPressHandler:function(e){if(!this.model.readOnly){if(this._keyFlag=!1,this._raiseEvents("keyPress",null,{keyCode:e.keyCode,altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,originalArgs:e}),0==this._maskLength)return!0;var i=e.keyCode?e.keyCode:e.charCode,s=String.fromCharCode(i),a=this.model.showPromptChar?"_":" ",r=this._seekNext(),n=t.browserInfo().name,o=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(t.isDevice()&&t.isTouchDevice()&&!o&&("edge"==n||"msie"==n))return!0;if(this._validateChars(i,r))("mozilla"!=n&&"opera"!=n||35!=e.keyCode&&36!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode)&&("mozilla"!=n&&"opera"!=n||!e.ctrlKey||97!=i&&99!=i&&118!=i&&120!=i)&&(""==this._textbox.value&&(this._textbox.value=this.model.maskFormat.replace(/[9?$CANa&*]/g,a)),this.model.maskFormat.indexOf("\\")>=0?r<this._maskLength&&this._writeBuffer(s,r,e):this._writeBuffer(s,r,e)),this._prevValue=this._textbox.value;else if("mozilla"!=n&&"opera"!=n||35!=e.keyCode&&36!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode)if("mozilla"!=n&&"opera"!=n||!e.ctrlKey||97!=i&&99!=i&&118!=i&&120!=i)if(this.model.maskFormat.indexOf("&")>=0||this.model.maskFormat.indexOf("\\")>=0){var l=this._getCunrrentPos(r);"&"==this.model.maskFormat[r+l]&&127==i||(this.model.maskFormat.indexOf("\\")>=0?r<this._maskLength&&(this._validateChars(i,r+l)||"\\"==this.model.maskFormat[r+l-1]?this._writeBuffer(s,r,e):this._ErrorHandler(r)):this._validateChars(i,r+l)?this._writeBuffer(s,r,e):this._ErrorHandler(r))}else this._ErrorHandler(r);else;else;if(!this._keypressFlag&&9!=i)return this._keypressFlag=0,e.preventDefault(),!1;this._keypressFlag=0}},_OnInputHandler:function(e){var i=t.browserInfo().name,s=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&!this._keyFlag,a=this._keyupFlag&&("edge"==i||"msie"==i);if(0==this._maskLength)return!0;if(t.isDevice()&&t.isTouchDevice()&&(s||a)){var r,n=this._textbox.value.length-this._prevValue.length,o=1==n?this._seekNext(!0):this._seekNext(!0,n-1),l=this._textbox.value[this.element[0].selectionStart-1];if(r=l.charCodeAt(0),this._validateChars(r,o)){this._textbox.value=this._prevValue;var d=String.fromCharCode(r);this._writeBuffer(d,o,e)}else this._textbox.value=this._prevValue,this._setCaretPosition(o),this._ErrorHandler(o);this._prevValue=this._textbox.value,this._prevPosition=this.element[0].selectionStart,this._checkMask=!0}if(t.isDevice()&&t.isTouchDevice()&&!s&&!this._keyupFlag){var h=this.element[0].selectionStart,c=this.element[0].selectionEnd;h!=c&&this._textbox.setSelectionRange(c,c);var r,u=this.model.showPromptChar?"_":" ",n=this._textbox.value.length-this._prevValue.length,p=n<=0,m=p?this._seekBefore(!0):this._seekNext(!0),l=this._textbox.value[this.element[0].selectionStart-1],h=0;if(this.element[0].selectionStart>0&&(r=l.charCodeAt(0)),this._tempMask.length>this._textbox.value.length){if(t.isNullOrUndefined(l)&&this._emptyMask.slice(1,this._emptyMask.length)==this._textbox.value)this._textbox.value=this._emptyMask;else if(p)this._textbox.value=this._prevValue,this._writeBuffer(u,m,e);else{var o=m;if(this._validateChars(r,o)){this._textbox.value=this._prevValue;var d=String.fromCharCode(r);this._writeBuffer(d,o,e)}else this._textbox.value=this._prevValue,this._setCaretPosition(o),this._ErrorHandler(o)}this._setCaretPosition(m)}else{var o=m;if(this._validateChars(r,o)){this._textbox.value=this._prevValue;var d=String.fromCharCode(r);this._writeBuffer(d,o,e);for(var g=0;g<this._emptyMask.length;g++)" "==this._emptyMask[g]&&" "!=this._textbox.value[g]&&l==this._textbox.value[g]&&(this._textbox.value=this._textbox.value.substring(0,startPos-1)+" "+l+this._textbox.value.substring(endPos,this._textbox.value.length),this._setCaretPosition(m+1))}else this._textbox.value=this._prevValue,this._setCaretPosition(o),this._ErrorHandler(o)}this._prevValue=this._textbox.value,this._prevPosition=this.element[0].selectionStart,this._keyupFlag=!0}this._keyFlag=!1},_OnKeyUpHandler:function(e){0==this._maskLength&&this._raiseEvents("change"),this._raiseEvents("keyUp",null,{keyCode:e.keyCode,altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,originalArgs:e}),t.isNullOrUndefined(this.model.validationRules)||this._hiddenInput.valid()},_OnMouseOverHandler:function(e){this._raiseEvents("mouseOver")},_OnMouseOutHandler:function(e){this._raiseEvents("mouseOut")},_raiseEvents:function(i,s,a){var r,n=this.get_StrippedValue(),o=this.get_UnstrippedValue();if(this.model.value=null!==o?null==this.model.customCharacter&&""==e.trim(o.replace(/[\(\)-]/g,""))?null:o:null,"change"==i)if(this.previousValue!=this.model.value)this.previousValue=this.model.value;else if(this._focusValue==this.model.value)return!1;r={value:o,unmaskedValue:n},"change"==i&&(r.isInteraction=!s),"change"==i&&(this._trigger("_change",r),t.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid")),a&&e.extend(!0,r,a),this._hiddenInput.val(n),this._trigger(i,r)},_OnValueChange:function(){""==this._textbox.value&&""!=this._maskModel&&(this._textbox.value=this._maskModel),this._setValue(this._textbox.value)}}),t.InputMode={Password:"password",Text:"text"}}(jQuery,Syncfusion),function(e,t,i){t.widget("ejDateTimePicker","ej.DateTimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,_rootCSS:"e-datetimepicker",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},_requiresID:!0,defaults:{cssClass:"",locale:"en-US",readOnly:!1,showRoundedCorner:!1,enableRTL:!1,htmlAttributes:{},allowEdit:!0,enabled:!0,value:"",name:null,minDateTime:new Date("1/1/1900 12:00:00 AM"),maxDateTime:new Date("12/31/2099 11:59:59 PM"),height:"",width:"",dateTimeFormat:"",showPopupButton:!0,enableStrictMode:!1,buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"},watermarkText:"Select datetime",enablePersistence:!1,interval:30,timeDisplayFormat:"",timePopupWidth:105,popupPosition:"bottom",dayHeaderFormat:"short",startLevel:"month",depthLevel:"",startDay:-1,stepMonths:1,showOtherMonths:!0,specialDates:null,highlightWeekend:!1,enableAnimation:!0,headerFormat:"MMMM yyyy",validationRules:null,validationMessage:null,validationMessages:null,timeDrillDown:{enabled:!1,interval:5,showMeridian:!1,autoClose:!0,showFooter:!0},beforeOpen:null,beforeClose:null,open:null,close:null,change:null,create:null,destroy:null,focusIn:null,focusOut:null,disableDateTimeRanges:null,timeZone:!0,disableTimeRanges:null},dataTypes:{allowEdit:"boolean",cssClass:"string",locale:"string",readOnly:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",enabled:"boolean",enableAnimation:"boolean",dateTimeFormat:"string",showPopupButton:"boolean",buttonText:"data",watermarkText:"string",enablePersistence:"boolean",enableStrictMode:"boolean",interval:"number",timeDrillDown:"data",timeDisplayFormat:"string",dayHeaderFormat:"string",startLevel:"string",depthLevel:"string",startDay:"number",stepMonths:"number",showOtherMonths:"boolean",highlightWeekend:"boolean",specialDates:"data",headerFormat:"string",validationRules:"data",validationMessage:"data",validationMessages:"data",htmlAttributes:"data",disableDateTimeRanges:"data",disableTimeRanges:"data"},_setModel:function(i){var s,a=!1;for(s in i)switch("allowEdit"!=s&&"readOnly"!=s&&"enabled"!=s&&"validationRules"!=s&&"validationMessages"!=s&&"enableStrictMode"!=s&&"height"!=s&&"width"!=s&&"showPopupButton"!=s&&"dateTimeFormat"!=s&&"watermarkText"!=s&&"htmlAttributes"!=s&&(this.popup||this._renderDropdown()),s){case"allowEdit":this._changeEditable(i[s]);break;case"cssClass":this._changeSkin(i[s]);break;case"locale":this._localize(i[s]);break;case"readOnly":this._readOnly(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enableRTL":this._setRtl(i[s]);break;case"enabled":this._enabled(i[s]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessages=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":case"validationMessages":this.model.validationMessages=i[s],null!=this.model.validationRules&&null!=this.model.validationMessages&&(this._initValidator(),this._setValidation());break;case"value":i[s]=this._setValue(i[s]),this._specificFormat()&&(this._stopRefresh=!0),a=!0,this._prevDateTime=this._prevDateTimeVal||this._preVal;break;case"enableStrictMode":this.model.enableStrictMode=i[s],a=!0;break;case"minDateTime":var r=this._stringToObject(i[s]),n=this._getFormat(r,this.timePicker.model.timeFormat);this._isValidDate(r)?(this.datePicker.option("minDate",r),this.datePicker.model.value&&this.datePicker.model.value.toDateString()==this.datePicker.model.minDate.toDateString()&&this.timePicker.option("minTime",n),i[s]=r,this.model.minDateTime=r):i[s]=this.model[s],a=!0;break;case"maxDateTime":var r=this._stringToObject(i[s]),o=this._getFormat(i[s],this.timePicker.model.timeFormat);this._isValidDate(r)?(this.datePicker.option("maxDate",r),this.datePicker.model.value&&this.datePicker.model.value.toDateString()==this.datePicker.model.maxDate.toDateString()&&this.timePicker.option("maxTime",o),i[s]=r,this.model.maxDateTime=r):i[s]=this.model[s],a=!0;break;case"height":this.wrapper.height(i[s]);break;case"width":this.wrapper.width(i[s]);break;case"dateTimeFormat":this.model.dateTimeFormat=i[s],this.isValidState&&this._setValue(this.model.value);break;case"showPopupButton":this._showButton(i[s]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options[s]=this.model.watermarkText=i[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"buttonText":t.isNullOrUndefined(this._options)||(this._options.buttonText=this.model.buttonText=i[s]),this._localizedLabels.buttonText=this.model.buttonText,this._buttonText(i[s]);break;case"interval":this._updateTimeHeight(),this.timePicker.option("interval",i[s]);break;case"timeDisplayFormat":this._updateTimeHeight(),this.timePicker.option("timeFormat",i[s]);break;case"disableDateTimeRanges":this._disabledDate&&(this._disabledDates=!1),this.model.disableDateTimeRanges=i[s],this._setValue(this.model.value);break;case"disableTimeRanges":this.model.disableTimeRanges=i[s],this.timePicker.option("disableTimeRanges",this.model.disableTimeRanges);break;case"timePopupWidth":this._updateTimeHeight();var l=i[s];"string"==typeof l&&-1!=l.indexOf("%")||"string"==typeof l?i[s]=parseInt(l)>0?l:105:i[s]=l>0?l:105,this.timePicker.option("popupWidth",i[s]);break;case"dayHeaderFormat":this.datePicker.option("dayHeaderFormat",i[s]);break;case"startLevel":this.datePicker.option("startLevel",i[s]);break;case"depthLevel":this.datePicker.option("depthLevel",i[s]);break;case"startDay":this.datePicker.option("startDay",i[s]),this.model.startDay=this.datePicker.model.startDay,i[s]=this.model.startDay;break;case"stepMonths":this.datePicker.option("stepMonths",i[s]);break;case"showOtherMonths":this.datePicker.option("showOtherMonths",i[s]);break;case"highlightWeekend":this.datePicker.option("highlightWeekend",i[s]);break;case"specialDates":this.datePicker.option("specialDates",i[s]),this.model.specialDates=this.datePicker.model.specialDates;break;case"headerFormat":this.datePicker.option("headerFormat",i[s]);break;case"htmlAttributes":this._addAttr(i[s]);break;case"popupPosition":this.model.popupPosition=i[s],this._setListPosition();break;case"timeDrillDown":t.isNullOrUndefined(i[s].enabled)||(this.model.timeDrillDown.enabled=i[s].enabled,this._changeDesign()),t.isNullOrUndefined(i[s].interval)||(this.model.timeDrillDown.interval=i[s].interval,this._generateMins(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)))),t.isNullOrUndefined(i[s].showMeridian)||(this.model.timeDrillDown.showMeridian=i[s].showMeridian,this._sfTimeHour.empty(),this._renderHourTable()),t.isNullOrUndefined(i[s].showFooter)||(this.model.timeDrillDown.showFooter=i[s].showFooter,this._changeDesign())}a&&this._validateMinMax(),this._valueChange(!0),"value"==s&&(i[s]=this.model.value),this.popup&&this._updateTimeHeight(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.isPopupOpen&&this._hideResult(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this.element.removeClass("e-js e-input").removeClass(t.util.getNameSpace(this.sfType)),this.element.removeAttr(" type aria-atomic aria-live tabindex aria-expanded aria-disabled placeholder role"),!this._cloneElement[0].hasAttribute("name")&&this.element.removeAttr("name"),t.isNullOrUndefined(this.datePicker)||this.datePicker.destroy(),t.isNullOrUndefined(this.timePicker)||this.timePicker.destroy(),this.popup&&this.popup.remove()},_initDisableTimeRanges:function(e){for(var i=this._getDateObj(e,this.datePicker.model.dateFormat),s=0;s<this.model.disableDateTimeRanges.length;s++){if(t.isNullOrUndefined(this.model.disableDateTimeRanges[s].endDateTime)&&(this.model.disableDateTimeRanges[s].endDateTime=this.model.disableDateTimeRanges[s].startDateTime),this.model.disableDateTimeRanges[s].startDateTime instanceof Date||this.model.disableDateTimeRanges[s].endDateTime instanceof Date)var a=this._getFormat(this.model.disableDateTimeRanges[s].startDateTime,this.datePicker.model.dateFormat),r=this._getFormat(this.model.disableDateTimeRanges[s].endDateTime,this.datePicker.model.dateFormat);else var a=this.model.disableDateTimeRanges[s].startDateTime.split(" ")[0],r=this.model.disableDateTimeRanges[s].endDateTime.split(" ")[0];var n=new Date(this.model.disableDateTimeRanges[s].startDateTime),o=new Date(this.model.disableDateTimeRanges[s].endDateTime);if(a==r){if(this._compare(i,this._setEmptyTime(this.model.disableDateTimeRanges[s].startDateTime))){var l=this._getFormat(n,this.timePicker.model.timeFormat),d=this._getFormat(o,this.timePicker.model.timeFormat),h=[];return h.push({startTime:l,endTime:d}),void this.timePicker.option("disableTimeRanges",h)}this.timePicker.option("disableTimeRanges",this._defaultMinVal()),this._disabledDates||this.model.disableDateTimeRanges[s].endDateTime!=this.model.disableDateTimeRanges[s].startDateTime||this.model.disableDateTimeRanges[s].endDateTime instanceof Date==0&&this._getFormat(this.model.disableDateTimeRanges[s].endDateTime,this.model.dateTimeFormat)==this._getFormat(this.model.disableDateTimeRanges[s].endDateTime,this.model.dateFormat)&&t.isNullOrUndefined(this.model.disableDateTimeRanges[s].endDateTime.split(" ")[1])&&this._between.push(new Date(this.model.disableDateTimeRanges[s].endDateTime))}else if(a!=r){if(this._compare(i,this._setEmptyTime(this.model.disableDateTimeRanges[s].startDateTime))||this._compare(i,this._setEmptyTime(this.model.disableDateTimeRanges[s].endDateTime))){var l=this.timePicker.model.minTime,d=this.timePicker.model.maxTime;this.datePicker.model.value.toDateString()==new Date(this.model.disableDateTimeRanges[s].startDateTime).toDateString()&&(l=this._getFormat(new Date(this.model.disableDateTimeRanges[s].startDateTime),this.timePicker.model.timeFormat)),this.datePicker.model.value.toDateString()==new Date(this.model.disableDateTimeRanges[s].endDateTime).toDateString()&&(d=this._getFormat(new Date(this.model.disableDateTimeRanges[s].endDateTime),this.timePicker.model.timeFormat));var h=[];return h.push({startTime:l,endTime:d}),void this.timePicker.option("disableTimeRanges",h)}if(!this._disabledDates){var l=this._getFormat(new Date(this.model.disableDateTimeRanges[s].startDateTime),this.timePicker.model.timeFormat),d=this._getFormat(new Date(this.model.disableDateTimeRanges[s].endDateTime),this.timePicker.model.timeFormat);l==this.timePicker.model.minTime&&this._between.push(new Date(this.model.disableDateTimeRanges[s].startDateTime)),this.model.disableDateTimeRanges[s].endDateTime instanceof Date==0&&this._getFormat(this.model.disableDateTimeRanges[s].endDateTime,this.model.dateTimeFormat)==this._getFormat(new Date(this.model.disableDateTimeRanges[s].endDateTime),this.datePicker.model.dateFormat)&&(d=this.timePicker.model.maxTime),d==this.timePicker.model.maxTime&&this._between.push(new Date(this.model.disableDateTimeRanges[s].endDateTime))}}}},_disableBetweenDates:function(){for(var e=0;e<this.model.disableDateTimeRanges.length;e++)for(var t=this.model.disableDateTimeRanges[e].startDateTime,i=this._setEmptyTime(t),s=(this._getFormat(new Date(this.model.disableDateTimeRanges[e].startDateTime),this.timePicker.model.timeFormat),this._getFormat(new Date(this.model.disableDateTimeRanges[e].endDateTime),this.timePicker.model.timeFormat),this.model.disableDateTimeRanges[e].endDateTime),a=this._setEmptyTime(s);i<a;)i.setDate(i.getDate()+1),new Date(i)<a&&this._between.push(new Date(i));this._datesDisabled=!0},_init:function(e){if(this._cloneElement=this.element.clone(),!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._options=e,this._ISORegex(),this._isSupport=void 0!=document.createElement("input").placeholder,this._validateMeridian(),this._checkAttribute(),this._initialize(),this._initial=!0,this._interval=60,this._render(),this._wireEvents(),this._addAttr(this.model.htmlAttributes),t.isNullOrUndefined(e)||t.isNullOrUndefined(e.validationMessage)||(this.model.validationMessages=this.model.validationMessage),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._removeWatermark(),e&&void 0!=e.value&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_changeDesign:function(){if(this.model.timeDrillDown.enabled){var t=this.model.timeDrillDown.showFooter?"block":"none";this.popup.addClass("e-drill-down"),this._timeContainer.css("display","none"),this._buttonContainer.css("display","none"),this.datePicker.option("showFooter",this.model.timeDrillDown.showFooter),e(".e-footer",this._sfTimeHour).css("display",t),e(".e-footer",this._sfTimeMins).css("display",t)}else this.popup.removeClass("e-drill-down"),this._sfTimeHour.hide(),this._sfTimeMins.hide(),this._updateTimeHeight(),this._dateContainer.show(),this._timeContainer.show(),this._buttonContainer.show(),this.datePicker.option("showFooter",!1),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()},_initValidator:function(){!this.element.closest("form").data("validator")&&this.element.closest("form").validate()},_checkAttribute:function(){this.model.value=""===this.model.value?this.element[0].value:this.model.value,this._options.minDateTime||(this.model.minDateTime=this.element[0].min),this._options.maxDateTime||(this.model.maxDateTime=this.element[0].max),t.isNullOrUndefined(this._options.readOnly)&&(this.model.readOnly=this.element.is("[readonly]")),t.isNullOrUndefined(this._options.enabled)&&(this.model.enabled=!this.element.is("[disabled]"))},_setValidation:function(){this.element.rules("add",this.model.validationRules);var i=this.element.closest("form").data("validator");i=i||this.element.closest("form").validate();var s=this.element.attr("name");i.settings.messages[s]={};for(var a in this.model.validationRules){var r=null;if(!t.isNullOrUndefined(this.model.validationRules[a])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[a])){i.settings.messages[s][a]=e.validator.messages[a];for(var n in this.model.validationMessages)a==n&&(r=this.model.validationMessages[a])}else r=this.model.validationRules.messages[a];i.settings.messages[s][a]=null!=r?r:e.validator.messages[a]}}},_validateDisableRanges:function(){for(var e=0;e<this.model.disableDateTimeRanges.length;e++){var t=this.model.value;new Date(this.model.value).getTime()>=new Date(this.model.disableDateTimeRanges[e].startDateTime).getTime()&&new Date(this.model.value).getTime()<=new Date(this.model.disableDateTimeRanges[e].endDateTime).getTime()&&(this.model.value=null),null==this.model.value&&null!=t&&this.model.enableStrictMode&&(this.isValidState=!1),this.isValidState&&this.element.val(this._getFormat(this.model.value,this.model.dateTimeFormat))}},_addAttr:function(i){var s=this;e.map(i,function(e,i){var a=i.toLowerCase();"class"==a?s.wrapper.addClass(e):"disabled"==a?s._enabled(!1):"readOnly"==a?s._readOnly(!0):"style"==a?s.wrapper.attr(i,e):"id"==a?(s.wrapper.attr(i,e+"_wrapper"),s.element.attr(i,e)):t.isValidAttr(s.element[0],a)?s.element.attr(a,e):s.wrapper.attr(a,e)})},_validateMeridian:function(){var e=t.preferredCulture(this.model.locale);e&&(this.model.locale="en"==e.name?"en-US":e.name),t.isNullOrUndefined(this._options)?this.model.timeDrillDown.showMeridian=!t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard.AM):t.isNullOrUndefined(this._options.timeDrillDown)?this.model.timeDrillDown.showMeridian=!t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard.AM):t.isNullOrUndefined(this._options.timeDrillDown.showMeridian)&&(this.model.timeDrillDown.showMeridian=!t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard.AM))},_initialize:function(){var i;if(this.popup=null,this.isPopupOpen=!1,this.isValidState=!0,this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.buttonText)||e.extend(this._localizedLabels.buttonText,this._options.buttonText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),-1==this.model.startDay&&(this.model.startDay=t.preferredCulture(this.model.locale).calendar.firstDay),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._isIE9="msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version,this.model.dateTimeFormat&&this.model.timeDisplayFormat||this._getDateTimeFormat(),!this.model.value||"object"==typeof JSON&&"{}"===JSON.stringify(this.model.value))i=null;else if(this.model.value instanceof Date)i=this.model.value;else{var s=t.parseDate(this.model.value,this.model.dateTimeFormat,this.model.locale);i=s||((s=this._checkJSONString(this.model.value))?s:null)}i&&(this.model.value=i);var a=this.model.minDateTime=this._stringToObject(this.model.minDateTime);a&&this._isValidDate(a)||(this.model.minDateTime=this.defaults.minDateTime);var r=this.model.maxDateTime=this._stringToObject(this.model.maxDateTime);r&&this._isValidDate(r)||(this.model.maxDateTime=this.defaults.maxDateTime)},_checkJSONString:function(e){var i=new Date(e);if(isNaN(Date.parse(i))){if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else if(i.toJSON()===this.model.value||i.toGMTString()===this.model.value||i.toISOString()===this.model.value||i.toLocaleString()===this.model.value||i.toString()===this.model.value||i.toUTCString()===this.model.value){if(this.model.timeZone)return new Date(new Date(i).getTime()+60*t.serverTimezoneOffset*60*1e3);if(e.match(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i)&&e.match(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i).length>0){var s=e.split("Z");return s=s[0],new Date(s)}}else if("string"==typeof e)return this._dateFromISO(e)},_render:function(){this._renderWrapper(),this._renderIcon(),this._setDimentions(),this._checkProperties()},_renderWrapper:function(){if(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0",role:"combobox","aria-expanded":"false"}),this.wrapper=t.buildTag("span.e-datetime-wrap e-widget "+this.model.cssClass+"#"+this.element[0].id+"_wrapper").insertAfter(this.element),this._setValue(this.model.value),this.wrapper.attr("style",this.element.attr("style")),this.element.removeAttr("style"),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),!this._isSupport){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}},_removeWatermark:function(){""!=this.element.val()&&!this._isSupport&&this._hiddenInput&&this._hiddenInput.css("display","none")},_renderIcon:function(){if(!this.model.showPopupButton)return!1
;this.datetimeIcon=t.buildTag("span.e-select","",{}).attr(this._isIE8?{unselectable:"on"}:{});var e=t.buildTag("span.e-icon e-datetime","",{},{"aria-label":"select"}).attr(this._isIE8?{unselectable:"on"}:{});this.datetimeIcon.append(e),this.container.append(this.datetimeIcon).addClass("e-padding"),this._on(this.datetimeIcon,"click",this._iconClick),this._on(this.datetimeIcon,"mousedown",function(e){e.preventDefault()})},_setDimentions:function(){this.model.height||(this.model.height=this.element.attr("height")),this.model.width||(this.model.width=this.element.attr("width")),this.wrapper.height(this.model.height),this.wrapper.width(this.model.width)},_renderDropdown:function(){var i=e("#"+this.element[0].id+"_popup").get(0);i&&e(i).remove(),this.popup=t.buildTag("div.e-datetime-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.element[0].id+"_popup").css("visibility","hidden"),t.isTouchDevice()||this.popup.addClass("e-ntouch"),e("body").append(this.popup),this._renderControls();var s,a,r,n,o;s=t.buildTag("div.e-header",this._localizedLabels.buttonText.timeTitle).attr(this._isIE8?{unselectable:"on"}:{}),this._dateContainer=t.buildTag("div.e-datecontainer").append(this.datePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._timeContainer=t.buildTag("div.e-timecontainer").append(s,this.timePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._drillDownContainer=t.buildTag("div.e-drillDowncontainer").append().attr(this._isIE8?{unselectable:"on"}:{}),a=t.buildTag("div.e-popup-container").append(this._dateContainer,this._timeContainer,this._drillDownContainer).attr(this._isIE8?{unselectable:"on"}:{}),r=t.buildTag("div.e-dt-button e-dt-today e-btn e-select e-flat",this._localizedLabels.buttonText.today).attr(this._isIE8?{unselectable:"on"}:{}),n=t.buildTag("div.e-dt-button e-dt-now e-btn e-select e-flat",this._localizedLabels.buttonText.timeNow).attr(this._isIE8?{unselectable:"on"}:{}),o=t.buildTag("div.e-dt-button e-dt-done e-btn e-select e-flat",this._localizedLabels.buttonText.done).attr(this._isIE8?{unselectable:"on"}:{}),this._buttonContainer=t.buildTag("div.e-button-container").append(r,n,o).attr(this._isIE8?{unselectable:"on"}:{}),this._renderDrillDown(),this.popup.append(a,this._buttonContainer),this._checkForResponsive(),this._updateTimeHeight(),this._bindOperations(),this._updateValues(),this.popup.css({visibility:"visible",display:"none"}),this._on(r,"click",this._todayClick),this._on(n,"click",this._nowClick),this._on(o,"click",this._doneClick),this.popup.on("mouseenter touchstart",e.proxy(function(){this._popClose=!0},this)),this.popup.on("mouseleave touchend",e.proxy(function(){this._popClose=!1},this)),this._changeDesign()},_renderControls:function(){this._renderDateControl(),this._renderTimeControl();var e=t.buildTag("span").append(this.datePicker.wrapper,this.timePicker.wrapper);e.find("span").css("display","none"),this.popup.append(e)},_renderDrillDown:function(){this._renderHourPopup(),this._renderMinsPopup()},_renderHourPopup:function(){this._sfTimeHour=t.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-hours ","",{},{id:this._id?"e-hours-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),t.isTouchDevice()||this._sfTimeHour.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeHour),this._renderHourTable()},_renderHourTable:function(){if(t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-hours-headertext").text("October 2015").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour),this._interval<1)return!1;var i,s,a,r,n,o,l=6e4*this._interval,d=this.model.timeDrillDown.showMeridian?2:1;r=this.model.timeDrillDown.showMeridian?6:4;var h=this.model.timeDrillDown.showMeridian?"hh":"HH:00",c=["AM","PM"],u=0,p="";i=this.timePicker._createObject("12:00:00 AM"),s=this.model.timeDrillDown.showMeridian?this.timePicker._createObject("11:59:59 AM"):this.timePicker._createObject("11:59:59 PM");for(var m=0;m<d;m++){if(this.model.timeDrillDown.showMeridian){p=c[m].toLowerCase();var g=t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard[c[m]])?"":t.preferredCulture(this.model.locale).calendars.standard[c[m]][0];t.buildTag("div.e-header-"+p).attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-text").append(t.buildTag("span.e-hours-meridiantxt-"+p).text(g).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour)}n=t.buildTag("table.e-dp-viewhours","",{}).data("e-table","data").attr({role:"grid"}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeHour.append(n);var f=t.buildTag("tbody.e-timepicker-hours").attr(this._isIE8?{unselectable:"on"}:{});for(o=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{});this.timePicker._compareTime(s,i,!0);){a=this._localizeTime(i,h);var _=t.buildTag("td.e-hour e-state-default",a);this.model.timeDrillDown.showMeridian&&_.addClass("e-hour-"+p),this._isIE8&&_.attr("unselectable","on"),o.append(_),u++,u>=r&&(u=0,f.append(o),o=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),i=this.timePicker._createObject(i).getTime()+l}n.append(f),this.model.timeDrillDown.showMeridian&&(i=this.timePicker._createObject("12:00:00 PM"),s=this.timePicker._createObject("11:59:59 PM"))}t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this._sfTimeHour),e(".e-footer-text",this._sfTimeHour).html(this._localizedLabels.buttonText.timeNow),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this.datePicker.model.value,"dd MMM yyyy")),this._on(this._sfTimeHour.find(".e-hour"),"click",e.proxy(this._hourNavHandler,this)),this._on(e(".e-next",this._sfTimeHour),"click",e.proxy(this._prevNextHourHandler,this)),this._on(e(".e-prev",this._sfTimeHour),"click",e.proxy(this._prevNextHourHandler,this)),this._on(e(".e-footer",this._sfTimeHour),"click",this._todayBtn),e(".e-hours-headertext",this._sfTimeHour).on("click",e.proxy(this._forwardNavHandler,this)),this._sfTimeHour.hide()},_localizeTime:function(i,s){return e.trim(t.format(this.timePicker._createObject(i),s,this.model.locale))},_renderMinsPopup:function(){this._sfTimeMins=t.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-minitues ","",{},{id:this._id?"e-time-minitues-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),t.isTouchDevice()||this._sfTimeMins.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeMins),t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-minitues-headertext").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),t.buildTag("div.e-mins-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-text").append(t.buildTag("span.e-minitues-meridiantxt").text("AM").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins);var i=t.buildTag("table.e-dp-viewmins","",{}).data("e-table","data").attr({role:"grid"}).attr(this._isIE8?{unselectable:"on"}:{});this._sfTimeMins.append(i);var s=t.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{});if(this._intervall<1)return!1;var a,r,n,o=6e4*this._interval;a=this.timePicker._createObject("12:00:00 AM"),r=this.timePicker._createObject("11:59:59 PM");for(var l=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),d=0;this.timePicker._compareTime(r,a,!0);){n=this._localizeTime(a,"HH:00");var h=t.buildTag("td.e-mins e-state-default",n);this._isIE8&&h.attr("unselectable","on"),l.append(h),d++,d>=4&&(d=0,s.append(l),l=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),a=this.timePicker._createObject(a).getTime()+o}i.append(s),e(".e-minitues-headertext",this._sfTimeMins).text(e(".e-hours-headertext",this._sfTimeHour).text()),t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this._sfTimeMins),e(".e-footer-text",this._sfTimeMins).html(this._localizedLabels.buttonText.timeNow),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this.datePicker.model.value,"dd MMM yyyy")),!this.model.timeDrillDown.showMeridian&&e(".e-mins-header",this._sfTimeMins).css("display","none"),this._on(i.find(".e-mins"),"click",e.proxy(this._minsNavHandler,this)),this._on(e(".e-next",this._sfTimeMins),"click",e.proxy(this._prevNextMinsHandler,this)),this._on(e(".e-prev",this._sfTimeMins),"click",e.proxy(this._prevNextMinsHandler,this)),this._on(e(".e-footer",this._sfTimeMins),"click",this._todayBtn),e(".e-minitues-headertext",this._sfTimeMins).on("click",e.proxy(this._forwardNavHandler,this)),this._sfTimeMins.hide()},_todayBtn:function(){this._nowClick(),this._hideResult()},_hourNavHandler:function(i){var s;if(this.model.readOnly||!this.model.enabled)return!1;if(i&&e(i.target).hasClass("e-disable"))return!1;if(i&&i.type&&i.preventDefault(),e("table",this._sfTimeHour).find("td").removeClass("e-active"),e(i.target).addClass("e-active"),this._sfTimeHour.hide(),this._sfTimeMins.show(),this._addFocus(this._sfTimeMins),this.model.timeDrillDown.showMeridian){var a=e(i.target).hasClass("e-hour-am")?"AM":"PM";s=e(i.target).text()+":00 "+a}else s=e(i.target).text();this._generateMins(s);var r=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),n=e.trim(t.format(this.timePicker._createObject(r),"HH:mm",this.model.locale)),o=e.trim(t.format(this.timePicker._createObject(r),"HH:00",this.model.locale)),l=(this.timePicker._parse(n)-this.timePicker._parse(o))/(6e4*this.model.timeDrillDown.interval);l=Math.ceil(l),this._hoverMins=this._setFocusByIndex("mins",l,this._sfTimeMins)},_minsNavHandler:function(i){if(this.model.readOnly||!this.model.enabled)return!1;if(i&&e(i.target).hasClass("e-disable"))return!1;if(i&&i.type&&i.preventDefault(),e("table",this._sfTimeMins).find("td").removeClass("e-active").removeClass("e-state-hover"),e(i.target).addClass("e-active"),this.model.timeDrillDown.showMeridian){var s=e(i.target).text()+" "+t.format(this._datetimeValue,"tt","en-US");s=this.timePicker._localizeTime(s)}else s=e(i.target).text();this.timePicker.option("value",s),this.datePicker.option("value",this._datetimeValue),this._datetimeValue=new Date(this.model.value.toString()),this._updateInput(),this.model.timeDrillDown.autoClose&&this._hideResult(i)},_generateMins:function(i){var s=e("table",this._sfTimeMins);s.empty(),this.model.timeDrillDown.showMeridian?e(".e-mins-header",this._sfTimeMins).show():e(".e-mins-header",this._sfTimeMins).hide();var a=this.model.timeDrillDown.showMeridian?"hh:mm":"HH:mm";e(".e-minitues-headertext",this._sfTimeMins).text(e(".e-hours-headertext",this._sfTimeHour).text());var r,n,o,l,d=t.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),h=0,c=6e4*this.model.timeDrillDown.interval;for(r=this.timePicker._createObject(i),this._datetimeValue.setHours(r.getHours()),o=this.timePicker._createObject(r).getTime()+354e4,n=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),d.append(n);this.timePicker._compareTime(o,r,!0);){h>=4&&(h=0,n=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),d.append(n)),l=this._localizeTime(r,a);var u=t.buildTag("td.e-mins e-state-default",l);this._isIE8&&u.attr("unselectable","on"),n.append(u),h++,r=this.timePicker._createObject(r).getTime()+c}s.append(d),e(".e-mins-header",this._sfTimeMins).find(".e-minitues-meridiantxt").text(t.format(this._datetimeValue,"tt",this.model.locale)),this._disableRange("mins"),this._on(s.find(".e-mins"),"click",e.proxy(this._minsNavHandler,this))},_prevNextHourHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t.preventDefault();var i=e(e(t.target).is("a")?t.target.parentNode:t.target),s=!!i.hasClass("e-prev");this._processNextPrev(s,this._sfTimeHour)},_prevNextMinsHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t.preventDefault();var i=e(e(t.target).is("a")?t.target.parentNode:t.target),s=!!i.hasClass("e-prev");this._processNextPrev(s,this._sfTimeMins)},_processNextPrev:function(i,s){if(i&&s.find(".e-arrow-sans-left").hasClass("e-disable"))return!1;if(!i&&s.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;var a,r,n=e("table",s);switch(n.get(0).className){case"e-dp-viewhours":r=i?-1:1,this._datetimeValue.setDate(this._datetimeValue.getDate()+r),this._disableRange("hour"),this._hoverHour=this._setFocusByIndex("hour",this._hoverHour,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"));break;case"e-dp-viewmins":r=i?-1:1,this._datetimeValue.setHours(this._datetimeValue.getHours()+r),this._generateMins(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)));var a=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),o=e.trim(t.format(this.timePicker._createObject(a),"HH:mm",this.model.locale)),l=e.trim(t.format(this.timePicker._createObject(a),"HH:00",this.model.locale)),d=(this.timePicker._parse(o)-this.timePicker._parse(l))/(6e4*this.model.timeDrillDown.interval);d=Math.ceil(d),this._disableRange("mins"),this._hoverMins=this._setFocusByIndex("mins",d,this._sfTimeMins),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"))}},_forwardNavHandler:function(i,s){if(this.model.readOnly||!this.model.enabled)return!1;switch(i&&i.preventDefault(),i?e(i.currentTarget).get(0).className:s.find(".e-text>span").get(0).className){case"e-hours-headertext":this._sfTimeHour.css("display","none"),this._dateContainer.css("display","block"),this._addFocus(this._dateContainer.find(".e-datepicker"));break;case"e-minitues-headertext":this._sfTimeMins.css("display","none"),this._disableRange("hour");var a=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),r=e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),n=(this.timePicker._parse(r)-this.timePicker._parse(a))/(6e4*this._interval);n=Math.floor(n),this._hoverHour=this._setFocusByIndex("hour",n,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy")),this._sfTimeHour.css("display","block"),this._addFocus(this._sfTimeHour)}},_renderDateControl:function(){var e=t.buildTag("input#"+this.element[0].id+"_date","",{},{type:"text"});this.popup.append(e),e.ejDatePicker({height:"0px",width:"0px",displayInline:!0,showDateIcon:!1,showFooter:!!this.model.timeDrillDown.enabled&&this.model.timeDrillDown.showFooter,enableStrictMode:!0,buttonText:this._localizedLabels.buttonText.today,minDate:this._stringToObject(this.model.minDateTime),maxDate:this._stringToObject(this.model.maxDateTime),dayHeaderFormat:this.model.dayHeaderFormat,startLevel:this.model.startLevel,depthLevel:this.model.depthLevel,startDay:this.model.startDay,stepMonths:this.model.stepMonths,showOtherMonths:this.model.showOtherMonths,specialDates:this.model.specialDates,highlightWeekend:this.model.highlightWeekend,headerFormat:this.model.headerFormat,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),t.isNullOrUndefined(this.model.value)||(this._datetimeValue=new Date(this.model.value.toString())),this.datePicker=e.data("ejDatePicker"),this._datetimeValue=new Date(this.datePicker._dateValue.toString()),this.model.startDay=this.datePicker.model.startDay,this.datePicker._getInternalEvents=!0,this.datePicker._dt_drilldown=!0,this.datePicker.popup.css({position:"static",display:"block"})},_renderTimeControl:function(){var e=t.buildTag("input#"+this.element[0].id+"_time","",{},{type:"text"});this.popup.append(e);var i,s=this.model.timePopupWidth;i="string"==typeof s&&-1!=s.indexOf("%")||"string"==typeof s?parseInt(s)>0?s:this.model.timePopupWidth=105:s>0?s:this.model.timePopupWidth=105,e.ejTimePicker({height:"0px",width:"0px",interval:this.model.interval,timeFormat:this.model.timeDisplayFormat,popupWidth:i,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale,disableTimeRanges:this.model.disableTimeRanges}),this.timePicker=e.data("ejTimePicker"),this.timePicker._renderDropdown(),this.timePicker.popup.css({position:"static",display:"block"}),this.timePicker._getInternalEvents=!0,this.timePicker.showDropdown=!0,this.timePicker._dateTimeInternal=!0;this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime},_updateTimeHeight:function(){var e=this.popup.find(".e-timecontainer .e-header").is(":visible")?this.datePicker.popup.height()-this.popup.find(".e-header").height():this.datePicker.popup.height();e=this.popup.hasClass("e-dt-responsive")?"98px":e,this.timePicker.option("popupHeight",e)},_bindOperations:function(){var e=this;this.datePicker.option("layoutChange",function(){e._updateTimeHeight()}),this.datePicker.option("outOfRange",function(){e.isValidState=!1}),this.timePicker.option("outOfRange",function(){e.isValidState=!1}),this.datePicker.option("change",function(t){e._refreshTimes(t)}),this.datePicker.option("select",function(t){e._updateInput(t)}),this.datePicker.option("dt_drilldown",function(t){e.model.timeDrillDown.enabled&&(e._updateInput(t),e._switchToDrilDown(t))}),this.timePicker.option("select",function(){e._updateInput()})},_switchToDrilDown:function(i){this._dateContainer.hide(),this._sfTimeHour.show(),this._addFocus(this._sfTimeHour);var s=new Date(this.model.value.toString());this._datetimeValue=new Date(s.setHours(this._datetimeValue.getHours(),this._datetimeValue.getMinutes(),this._datetimeValue.getSeconds(),this._datetimeValue.getMilliseconds())),this._disableRange("hour");var a=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),r=e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),n=(this.timePicker._parse(r)-this.timePicker._parse(a))/(6e4*this._interval);n=Math.floor(n),this._hoverHour=this._setFocusByIndex("hour",n,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"))},_disableRange:function(i){var s="hour"==i?this._interval:this.model.timeDrillDown.interval,a="hour"==i?this._sfTimeHour:this._sfTimeMins,r="hour"==i?"e-hide-hour e-disable":"e-hide-mins e-disable";a.find("tbody tr td.e-"+i).removeClass(r),a.find(".e-arrow-sans-left").removeClass("e-disable"),a.find(".e-arrow-sans-right").removeClass("e-disable");var n="hour"==i?this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"):this._localizeTime(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),"HH:00");if(this._compareDate(this.model.minDateTime,this._datetimeValue)){if("mins"==i&&this.model.minDateTime.getHours()!==this._datetimeValue.getHours())return!1;var o=e.trim(t.format(this.timePicker._createObject(this.model.minDateTime),"HH:mm",this.model.locale)),l=(this.timePicker._parse(o)-this.timePicker._parse(n))/(6e4*s);l="hour"==i?Math.floor(l):Math.ceil(l);for(var d=0;d<l;d++){var h,c=a.find("tbody tr td.e-"+i);h=c[d],e(h).addClass(r)}a.find(".e-arrow-sans-left").addClass("e-disable")}if(this._compareDate(this.model.maxDateTime,this._datetimeValue)){if("mins"==i&&this.model.maxDateTime.getHours()!==this._datetimeValue.getHours())return!1;var o=e.trim(t.format(this.timePicker._createObject(this.model.maxDateTime),"HH:mm",this.model.locale)),l=(this.timePicker._parse(o)-this.timePicker._parse(n))/(6e4*s);l=Math.floor(l)+1;for(var u=a.find("tbody tr td.e-"+i).length,d=l;d<u;d++){var h,c=a.find("tbody tr td.e-"+i);h=c[d],e(h).addClass(r)}a.find(".e-arrow-sans-right").addClass("e-disable")}},_setFocusByName:function(t,i,s){var a,r,n=s.find("tbody tr td.e-"+t);return e(n).each(function(e,t){if(t.innerHTML==i)return void(a=e)}),r=n[a],r||(r=n.last()),s.find("table td").removeClass("e-state-hover").removeClass("e-active"),e(r).hasClass("e-hide-"+t)||e(r).addClass("e-state-hover"),this._setActiveState(t,s),a},_setFocusByIndex:function(t,i,s){var a,r=s.find("tbody tr td.e-"+t);return a=r[i],a||(a=r.last()),s.find("table td").removeClass("e-state-hover").removeClass("e-active"),e(a).hasClass("e-hide-"+t)||e(a).addClass("e-state-hover"),this._setActiveState(t,s),i},_setActiveState:function(i,s){var a,r=s.find("tbody tr td.e-"+i),n=-1;switch(i){case"hour":if(this._compareDate(this.model.value,this._datetimeValue)){var o=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),l=e.trim(t.format(this.timePicker._createObject(this.model.value),"HH:00",this.model.locale));n=(this.timePicker._parse(l)-this.timePicker._parse(o))/(6e4*this._interval),n=Math.floor(n)}break;case"mins":if(this._compareDate(this.model.value,this._datetimeValue)&&this.model.value.getHours()===this._datetimeValue.getHours()){var d=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),l=e.trim(t.format(this.timePicker._createObject(d),"HH:mm",this.model.locale)),h=e.trim(t.format(this.timePicker._createObject(d),"HH:00",this.model.locale));n=(this.timePicker._parse(l)-this.timePicker._parse(h))/(6e4*this.model.timeDrillDown.interval),n=Math.ceil(n)}}(a=r[n])&&(s.find("table td").removeClass("e-active"),e(a).removeClass("e-state-hover").addClass("e-active"))},_compareDate:function(e,t){return+new Date(e.toString()).setHours(0,0,0,0)==+new Date(t.toString()).setHours(0,0,0,0)},_updateInput:function(e){var t=+new Date<+this.model.minDateTime||+new Date>+this.model.maxDateTime?this.model.minDateTime:(new Date).setHours(0,0,0,0),i=this._getDate()||new Date(t),s=this._getTime()||this.timePicker._createObject(t);this.model.value=new Date(i.getFullYear(),i.getMonth(),i.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()),this._updateDateTime(),this._raiseChangeEvent(),this._updateModel(e,!0),e&&(e.cancel=!0)},_updateDateTime:function(){this.isValidState=!0;var e=this._objectToString(this.model.value);this.element.val(e),this._removeWatermark()},_refreshTimes:function(e){var i=this._getDateObj(e.value,this.datePicker.model.dateFormat);if(!i)return!1;if(this.isValidState=!0,this._compare(i,this._setEmptyTime(this.model.minDateTime))){var s=this._getFormat(this.model.minDateTime,this.timePicker.model.timeFormat);this._getTime();this.timePicker.option("minTime",s),this.model.enableStrictMode||this._updateInput()}else this.timePicker.option("minTime",this._defaultMinVal());if(this._compare(i,this._setEmptyTime(this.model.maxDateTime))){var a=this._getFormat(this.model.maxDateTime,this.timePicker.model.timeFormat);this._getTime();this.timePicker.option("maxTime",a),this.model.enableStrictMode||this._updateInput()}else this.timePicker.option("maxTime",this._defaultMaxVal());this.timePicker._changeActiveEle(),t.isNullOrUndefined(this.model.disableDateTimeRanges)||this._setDisabledTimeRanges(e)},_setDisabledTimeRanges:function(e){var t=e?e.value:this._setEmptyTime(this.model.value);this._between=[],this._initDisableTimeRanges(t),this._datesDisabled||(this._disableBetweenDates(),this.datePicker.option("blackoutDates",this._between))},_defaultMinVal:function(){var e=(new Date).setHours(0,0,0,0);return t.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_defaultMaxVal:function(){var e=(new Date).setHours(23,59,59,59);return t.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_updateValues:function(){var e=this.model.enableStrictMode&&null==this.model.value?this.element.val():this.model.value;null!=this.model.value&&(this.datePicker.option("value",this.model.value),this.timePicker.option("value",this.model.value)),this._setValue(e),this._validateMinMax(),this._preVal=this.element.val(),this._checkErrorClass()},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateTimeFormat);return e.inArray("dddd",i.groups)>-1||e.inArray("ddd",i.groups)>-1},_changeEditable:function(t){var i=t?"_on":"_off";this.element.is(":input")&&(t?(this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",e.proxy(this._showhidePopup,this))):(this.model.readOnly||this.element.attr("readonly","readonly"),this.element.on("mousedown",e.proxy(this._showhidePopup,this))),this[i](this.element,"blur",this._targetBlur),this[i](this.element,"focus",this._targetFocus),this[i](this.element,"keydown",this._keyDownOnInput)),this._change("allowEdit",t)},_setValue:function(e){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?(this.element.val(""),this.model.value=null,this.isValidState=!0,this.wrapper.removeClass("e-valid")):"string"==typeof e?this._extISORegex.exec(e)||this._basicISORegex.exec(e)?this._checkObject(this._dateFromISO(e)):(this.element.val(e),this._updateModel(),this._validateMinMax(),this._checkStrictMode(),this.wrapper.addClass("e-valid")):e instanceof Date&&this._isValidDate(e)&&this._checkObject(e),t.isNullOrUndefined(this.model.disableDateTimeRanges)||this._validateDisableRanges(),this._checkErrorClass(),this.model.value},_checkObject:function(e){e instanceof Date&&this._isValidDate(e)&&(this.model.value=e,this._updateDateTime(),this._validateMinMax(),this._checkStrictMode())},_dateFromISO:function(e){var t,i=this._extISORegex.exec(e)||this._basicISORegex.exec(e),s="",a="",r="";if(i){for(var n=0;n<this._dates.length;n++)if(this._dates[n][1].exec(i[1])){s=this._dates[n][0];break}if(i[3])for(var o=0;o<this._times.length;o++)if(this._times[o][1].exec(i[3])){a=(i[2]||" ")+this._times[o][0];break}i[4]&&this._zeroRegex.exec(i[4])&&(r="Z"),t=s+a+r;for(var l,d,h=t.match(this._tokens),c=[],u=0;u<h.length;u++){var p=h[u];d=this._checkLiteral(h[u]);var m=this._numberRegex[d?h[u].toLowerCase():p.length]||new RegExp("^\\d{1,"+p.length+"}");l=e.match(m),l&&(e.substr(0,e.indexOf(l))>=0&&!d&&(h[u].indexOf("M")>=0?c.push(parseInt(l[0])-1):c.push(parseInt(l[0]))),e=e.slice(e.indexOf(l[0])+l[0].length))}return"Z"==i[4]?new Date(Date.UTC.apply(null,c)):new Date(c[0],c[1],c[2],c[3],c[4],c[5])}return new Date(e+"")},_checkLiteral:function(e){var t=e.toLowerCase();return"t"==t||"z"==t||":"==t||"-"==t},_validateValue:function(e){var i=t.parseDate(e,this.model.dateTimeFormat,this.model.locale),s=null;void 0!=this.timePicker&&(s=this._getFormat(i,this.timePicker.model.timeFormat)),!i||i<this.model.minDateTime||i>this.model.maxDateTime||!t.isNullOrUndefined(this.timePicker)&&this.timePicker._ensureTimeRange(s)?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1):(this._change("value",this.model.value),this.isValidState=!0)},_validateMinMax:function(){var e,t,i;if(e=this.model.value?this._stringToObject(this.model.value):null,t=this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,i=this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime,!e||!t||!i)return!1;t>i&&(this.model.minDateTime=this.model.maxDateTime),e<t&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.popup&&(this.datePicker.option("minDate",this._getFormat(t,this.datePicker.model.dateFormat)),this.timePicker.option("minTime",this._getFormat(t,this.timePicker.model.timeFormat))),this.isValidState=!1):(this._setValue(t),this.isValidState=!0)),e>i&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.popup&&(this.datePicker.option("maxDate",this._getFormat(i,this.datePicker.model.dateFormat)),this.timePicker.option("maxTime",this._getFormat(i,this.timePicker.model.timeFormat))),this.isValidState=!1):(this._setValue(i),this.isValidState=!0)),e<t||e>i||(this.isValidState=!0)},_checkProperties:function(){this.model.readOnly&&this._readOnly(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0),this.model.enableRTL&&this._setRtl(!0),this.model.enabled&&this._enabled(!0),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this._enabled(!0):this._enabled(!1),this.model.name=this._options.name?this.model.name:this.element.attr("name")?this.element.attr("name"):this.element[0].id,this.element.attr("name",this.model.name),this._checkStrictMode(),this._checkErrorClass(),this._setWaterMark()},_checkStrictMode:function(){this.model.enableStrictMode?this.model.enableStrictMode&&(this.isValidState||(this.model.value=null,this.isValidState=!1)):this.isValidState||(this.model.value<this.model.minDateTime?(this.element.val(this._objectToString(this.model.minDateTime)),this.model.value=this.model.minDateTime,this.isValidState=!0):this.model.value>this.model.maxDateTime?(this.element.val(this._objectToString(this.model.maxDateTime)),this.model.value=this.model.maxDateTime,this.isValidState=!0):(this.model.value="",this.element.val(""),this.isValidState=!0))},_targetFocus:function(e){e.preventDefault(),this.isFocused=!0,this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),this._isSupport||this._hiddenInput.css("display","none"),this._prevDateTimeVal=this.element.val(),this.model.showPopupButton||this.model.readOnly||this._showResult(),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),!this.model.showPopupButton&&this.model.readOnly&&this._off(this.element,"click",this._elementClick),this._trigger("focusIn",{value:this.model.value}),this.wrapper.addClass("e-valid")},_targetBlur:function(){this.isFocused=!1,this.wrapper.removeClass("e-focus"),this.model.showPopupButton||this._hideResult();var e=t.parseDate(this.element.val(),this.model.dateTimeFormat,this.model.locale);e&&!this.model.enableStrictMode&&(e<this.model.minDateTime||e>this.model.maxDateTime)&&(e=e<this.model.minDateTime?this.model.minDateTime:this.model.maxDateTime,this.element.val(this._objectToString(e))),null!=t.parseDate(this.element.val(),this.model.dateTimeFormat,this.model.locale)||this.model.enableStrictMode||(null==this._prevDateTimeVal||""==this.element.val()?this.element.val(""):this.element.val(this._preVal)),this._valueChange(),this.model.enableStrictMode?""!=this.element.val()&&this._validateValue(this.element.val()):this.isValidState?this._prevDateTimeVal=this.element.val():(this.element.val(this._prevDateTimeVal),this._preVal=this._prevDateTimeVal,this.model.value=this._stringToObject(this._prevDateTimeVal),this.isValidState=!0),this._isSupport||""!=this.element.val()||this._hiddenInput.css("display","block"),
this._checkErrorClass(),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),this._trigger("focusOut",{value:this.model.value}),t.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid"),this._previousDateUpdate()},_previousDateUpdate:function(){return+t.parseDate(this._prevDateTime,this.model.dateTimeFormat)!=+t.parseDate(this.element.val(),this.model.dateTimeFormat)&&(this._preValString=this._prevDateTime,this._prevDateTime=this.element.val()),this._preValString},_elementClick:function(){this.isPopupOpen||this._showResult()},_keyDownOnInput:function(e){switch(e.keyCode){case 40:e.altKey&&this._showhidePopup();break;case 37:case 39:this.model.timeDrillDown.enabled||e.altKey&&this.isPopupOpen&&(e.preventDefault(),this._addPrevNextFocus(37==e.keyCode));break;case 27:e.preventDefault();case 9:this._hideResult();break;case 13:if(null!=t.parseDate(this.element.val(),this.model.dateTimeFormat)||this.model.enableStrictMode||(null==this._prevDateTimeVal||""==this.element.val()?this.element.val(""):this.element.val(this._preVal)),this._valueChange(),!this.model.timeDrillDown.enabled){this._valueChange(),this.model.enableStrictMode&&this._checkErrorClass();break}}},_addFocus:function(t){t.hasClass("e-focus")||(this._removeFocus(),t.addClass("e-focus"),t.hasClass("e-datepicker e-popup")?e(document).on("keydown",e.proxy(this.datePicker._keyboardNavigation,this.datePicker)):t.hasClass("e-timecontainer")?e(document).on("keydown",e.proxy(this.timePicker._keyDownOnInput,this.timePicker)):t.hasClass("e-time-hours")?e(document).on("keydown",e.proxy(this._keyDownOnHours,this)):t.hasClass("e-time-minitues")?e(document).on("keydown",e.proxy(this._keyDownOnMinutes,this)):t.hasClass("e-dt-button")&&e(document).on("keydown",e.proxy(this._buttonClick,this)))},_removeFocus:function(){var t=this._getFocusedElement();t.length>0&&(t.removeClass("e-focus"),t.hasClass("e-datepicker e-popup")?e(document).off("keydown",e.proxy(this.datePicker._keyboardNavigation,this.datePicker)):t.hasClass("e-timecontainer")?e(document).off("keydown",e.proxy(this.timePicker._keyDownOnInput,this.timePicker)):t.hasClass("e-time-hours")?e(document).off("keydown",e.proxy(this._keyDownOnHours,this)):t.hasClass("e-time-minitues")?e(document).off("keydown",e.proxy(this._keyDownOnMinutes,this)):t.hasClass("e-dt-button")&&e(document).off("keydown",e.proxy(this._buttonClick,this)))},_addPrevNextFocus:function(e){var t,i=this._getFocusedElement();i.length>0?i.hasClass("e-datepicker e-popup")?t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-timecontainer"):i.hasClass("e-timecontainer")?t=e?this.popup.find(".e-datecontainer >.e-datepicker.e-popup"):this.popup.find(".e-dt-today"):i.hasClass("e-dt-today")?t=e?this.popup.find(".e-timecontainer"):this.popup.find(".e-dt-now"):i.hasClass("e-dt-now")?t=e?this.popup.find(".e-dt-today"):this.popup.find(".e-dt-done"):i.hasClass("e-dt-done")&&(t=e?this.popup.find(".e-dt-now"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup")):t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup"),this._addFocus(t)},_getFocusedElement:function(){return this.popup.children("div").find("div.e-focus")},_keyDownOnHours:function(e){if(37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode||13==e.keyCode||36==e.keyCode||35==e.keyCode){e.preventDefault&&e.preventDefault();var t={row:null,col:null};t.col=this._sfTimeHour.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeHour.find("tbody tr td.e-state-hover").parent().index(),-1!=t.col?t.col=t.col+1:t.col=this._sfTimeHour.find("tbody tr td.e-active").index()+1,-1!=t.row?(t.row=t.row+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-state-hover").hasClass("e-hour-pm")&&(t.row=t.row+2)):(t.row=this._sfTimeHour.find("tbody tr td.e-active").parent().index()+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-active").hasClass("e-hour-pm")&&(t.row=t.row+2));var i,s=(this._sfTimeHour.find("table")[0].className,this._sfTimeHour.find("tbody.e-timepicker-hours tr").length),a=this.model.timeDrillDown.showMeridian?6:4;i=this._changeRowCol(t,e.keyCode,s,a,"hours",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeHour.find("tbody.e-timepicker-hours tr td").index(i)),e.ctrlKey||(this._sfTimeHour.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"))}},_changeRowCol:function(t,i,s,a,r,n){var o,l,d,h={parent:null,child:null};switch(r){case"hours":o="tbody.e-timepicker-hours tr td.e-hour",h.parent=".e-timepicker-hours",h.child=".e-hour",d=".e-hide-hour",l=this._sfTimeHour;break;case"mins":o="tbody.e-timepicker-mins tr td.e-mins",h.parent=".e-timepicker-mins",h.child=".e-mins",d=".e-hide-mins",l=this._sfTimeMins,a=l.find("tbody"+h.parent+" tr:nth-child("+t.row+") td"+h.child).length}if(t.row<=0&&t.col<=0)return l.find(o+":not(.e-disable):first");var c;switch(i){case 36:return l.find(o+":not(.e-disable):first");case 35:return l.find(o+":not(.e-disable):last");case 38:if(n)this._forwardNavHandler(null,l);else{if(!(t.row>1))return this._processNextPrev(!0,l),c=l.find(o+":nth-child("+t.col+"):last");t.row-=1}if(c=this._getCell(t,h,l).not(d),c.length<=0){if(null!==(c=this._findVisible(t,h,"up",l)))return c;this._processNextPrev(!0,l),c=l.find(o+":nth-child("+t.col+"):last")}return c;case 37:if(n)return this._processNextPrev(!0,l),l.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else{if(!(t.row>1))return this._processNextPrev(!0,l),c=l.find(o+":not(.e-disable):last");t={row:t.row-1,col:a},"mins"==r&&(t.col=a=l.find("tbody"+h.parent+" tr:nth-child("+t.row+") td"+h.child).length)}if(c=this._getCell(t,h,l).not(d),c.length<=0){if(null!==(c=this._findVisible(t,h,"left",l)))return c;this._processNextPrev(!0,l),c=l.find(o+":not(.e-disable):last")}return c;case 39:if(n)return this._processNextPrev(!1,l),l.find("tbody tr td.e-state-hover");if(t.col<a)t.col+=1;else{if(!(t.row<s))return this._processNextPrev(!1,l),c=l.find(o+":not(.e-disable):first");t={row:t.row+1,col:1}}if(c=this._getCell(t,h,l).not(d),c.length<=0){if(null!==(c=this._findVisible(t,h,"right",l)))return c;this._processNextPrev(!1,l),c=l.find(o+":not(.e-disable):first")}return c;case 40:if(!n){if(!(t.row<s))return this._processNextPrev(!1,l),c=l.find(o+":nth-child("+t.col+"):first");if(t.row+=1,c=this._getCell(t,h,l).not(d),c.length<=0){if(null!==(c=this._findVisible(t,h,"down",l)))return c;this._processNextPrev(!1,l),c=l.find(o+":nth-child("+t.col+"):first")}return c}case 13:var u,p;u=this._getCell(t,h,l),e(u)[0],p={type:null,target:u},"hours"==r&&this._hourNavHandler(p),"mins"==r&&this._minsNavHandler(p)}return this._getCell(t,h,l).not(d)},_getCell:function(t,i,s){var a=t.row;this.model.timeDrillDown.showMeridian&&t.row>2&&s.hasClass("e-time-hours")&&(a-=2);var r=s.find("tbody"+i.parent+" tr:nth-child("+a+") td"+i.child+":nth-child("+t.col+")");return this.model.timeDrillDown.showMeridian&&r.length>0&&s.hasClass("e-time-hours")&&(r=e(t.row<=2?r[0]:r[1])),r},_findVisible:function(e,t,i,s){for(var a=e.col,r=e.row,n=t.child.slice(1,t.child.length),o=0;o>=0;o++){var l=this._getCell({row:r,col:a},t,s);if(l.length<=0)return null;if(l.hasClass("e-disable")||!l.is(":visible")){if("right"==i||"left"==i?"right"==i?a++:a--:"down"==i?r++:r--,r<=0||r>s.find("tbody"+t.parent+" tr").length)return null;if(a>s.find("tbody"+t.parent+" tr:nth-child("+r+") td").length&&(r++,a=1),a<=0&&(r--,a=s.find("tbody"+t.parent+" tr:nth-child("+r+") td").length),r<=0||r>s.find("tbody"+t.parent+" tr").length)return null}else if(l.hasClass(n))return e.col=a,e.row=r,l=this._getCell(e,t,s)}},_keyDownOnMinutes:function(e){if(37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode||13==e.keyCode||36==e.keyCode||35==e.keyCode){e.preventDefault&&e.preventDefault();var t={row:null,col:null};t.col=this._sfTimeMins.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeMins.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this._sfTimeMins.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this._sfTimeMins.find("tbody tr td.e-active").parent().index()+1;var i,s=(this._sfTimeMins.find("table")[0].className,this._sfTimeMins.find("tbody.e-timepicker-mins tr").length);i=this._changeRowCol(t,e.keyCode,s,4,"mins",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeMins.find("tbody.e-timepicker-mins tr td").index(i)),e.ctrlKey||(this._sfTimeMins.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"))}},_valueChange:function(e){this.model.enableStrictMode?this.model.enableStrictMode&&(this._preVal!=this.element.val()||this.model.value<this.model.minDateTime||this.model.value>this.model.maxDateTime)&&(this._updateModel(),this._raiseChangeEvent(e)):(this._preVal!=this.element.val()&&(this._preVal=this.element.val(),this._updateModel(),this._validateMinMax(),this._raiseChangeEvent(e)),this._setWaterMark())},_updateModel:function(e,i){if(this._stopRefresh)return void(this._stopRefresh=!1);var s=this.element.val();if(""==s)this.model.value=null,this._change("value",this.model.value),this.isValidState=!0;else{var a;a=void 0!=e&&"select"==e.type||this._prevDateTimeVal==this.element.val()?this.model.value:t.parseDate(s,this.model.dateTimeFormat,this.model.locale),a?(this.model.value=a,this.isValidState=!0,this._refreshPopup(i),this._specificFormat()&&this._prevDateTimeVal!=this.element.val()&&this.element.val(this._objectToString(this.model.value))):(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1,this.model.enableStrictMode||this.element.val(this._objectToString(this.model.value)))}},_refreshPopup:function(e){if(this.isValidState&&this.isPopupOpen){var t=this._setEmptyTime(this.model.value),i=this._setEmptyDate(this.model.value),s=this._getDate(),a=this._getTime();s&&this._compare(s,t)||this.datePicker.option("value",t),a&&this._compare(a,i)||e||this.timePicker.option("value",i)}},_buttonClick:function(e){if(13==e.keyCode){e.preventDefault();var t=this._getFocusedElement();t.hasClass("e-dt-today")?this._todayClick():t.hasClass("e-dt-now")?this._nowClick():t.hasClass("e-dt-done")&&this._doneClick()}},_todayClick:function(){if(!this.model.enabled||this.model.readOnly)return!1;this.datePicker.popup.find(".today").hasClass("e-active")&&this.datePicker.popup.children("table").hasClass("e-dp-viewdays")&&""!=this.element.val()&&this.isValidState||(this.datePicker._setCurrDate(),this._updateInput())},_nowClick:function(){if(!this.model.enabled||this.model.readOnly)return!1;this.timePicker.setCurrentTime();var e=this.model.minDateTime,i=this.model.maxDateTime,s=this.datePicker.model.value,a=new Date;s=t.isNullOrUndefined(s)?new Date:s;var r=new Date(s.getFullYear(),s.getMonth(),s.getDate(),a.getHours(),a.getMinutes(),a.getSeconds());r<e?this.timePicker.option("value",this.timePicker._localizeTime(e)):r>i&&this.timePicker.option("value",this.timePicker._localizeTime(i)),this._updateInput()},_doneClick:function(){this._hideResult()},_iconClick:function(e){e.preventDefault(),this.isFocused||t.isTouchDevice()||this.element.focus(),this._showhidePopup(),this.model.disableDateTimeRanges&&t.isNullOrUndefined(this.model.value)&&this._setDisabledTimeRanges(this.datePicker.model.value),this._isIE9&&this.popup.find(".e-popup-container").css("display","inline-block")},_setInitialSelection:function(){var t=this.timePicker.ul.find("li");if(t.hasClass("e-hover"))return void this._calcScrollTop();var i,s=this.timePicker._setEmptyDate(new Date);i=s,this.timePicker.minTime&&!this._compareTime(this._createObject(s),this.timePicker.minTime,!0)&&(i=this.timePicker.minTime),this.timePicker.maxTime&&!this._compareTime(this.timePicker.maxTime,this._createObject(s),!0)&&(i=this.timePicker.maxTime);var a,r=t.first().html();a=(this.timePicker._parse(i)-this.timePicker._parse(r))/(6e4*this.timePicker.model.interval),a=Math.round(a);var n=a==t.length?a:a+1;(n<0||n>t.length||isNaN(n))&&(n=1),e(this.timePicker.ul.find("li")[n-1]).addClass("e-hover"),this._calcScrollTop()},_calcScrollTop:function(){var e,t,i=(this.timePicker.ul.outerHeight(),this.timePicker.ul.find("li").outerHeight());e=this.timePicker.ul.find("li.e-hover").index(),t=i*e-(this.timePicker.popupList.outerHeight()-i)/2,this.timePicker.scrollerObj.setModel({scrollTop:t})},_showhidePopup:function(){if(this.model.readOnly)return!1;this.isPopupOpen?this._hideResult():this._showResult()},_showResult:function(){if(this.popup||this._renderDropdown(),this.isPopupOpen||!this.model.enabled)return!1;if(this._setRtl(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner),this._trigger("beforeOpen",{element:this.popup}))return!1;this.isPopupOpen=!0,this.element.attr({"aria-expanded":"true"}),this._setListPosition(),this._checkForResponsive();var i=this;this.popup.slideDown(this.model.enableAnimation?200:0,function(){i._on(e(document),"mousedown",i._OnDocumentClick),i.model.timeDrillDown.enabled&&i._addFocus(i._dateContainer.find(".e-datepicker")),i.timePicker.model.value||i._setInitialSelection()}),this._updateModel(),this._updateTimeHeight(),this._validateMinMax(),this._on(e(window),"resize",this._OnWindowResize),this._on(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._on(t.getScrollableParents(this.wrapper),"touchmove",this._hideResult),this._raiseEvent("open"),this._initial&&(this.timePicker._refreshScroller(),this.timePicker._changeActiveEle(),this._initial=!1),this.wrapper.addClass("e-active")},_hideResult:function(i){if(!i||"touchmove"!=i.type&&"scroll"!=i.type||!(e(i.target).parents("#"+this.popup[0].id).length>0)){var s=this;if(!this.isPopupOpen)return!1;if(this._trigger("beforeClose",{element:this.popup}))return!1;if(this.isPopupOpen=!1,this.element.attr({"aria-expanded":"false"}),this._removeFocus(),this._popClose&&i&&"click"!=i.type)return void(this.isPopupOpen=!0);this.popup.slideUp(this.model.enableAnimation?100:0,function(){s.model&&(s.model.timeDrillDown.enabled&&(s._sfTimeHour.hide(),s._sfTimeMins.hide(),s._dateContainer.show()),t.isNullOrUndefined(s.model.value)||(s._datetimeValue=new Date(s.model.value.toString())))}),this._raiseEvent("close"),this._off(e(document),"mousedown",this._OnDocumentClick),this._off(e(window),"resize",this._OnWindowResize),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._off(t.getScrollableParents(this.wrapper),"touchmove",this._hideResult),this.wrapper.removeClass("e-active")}},_setListPosition:function(){var i,s=this.wrapper,a=this._getOffset(s),r=e(document).scrollTop()+e(window).height()-(a.top+e(s).outerHeight()),n=a.top-e(document).scrollTop(),o=this.popup.outerHeight(),l=this.popup.outerWidth(),d=a.left,h=s.outerHeight(),c=(h-s.height())/2,u=this._getZindexPartial();this.model.popupPosition;if(this.model.popupPosition==t.PopupPosition.Bottom)var p=(o<r||o>n?a.top+h+3:a.top-o-3)-c;else var p=(o>n?a.top+h+3:a.top-o-3)-c;i=e(document).scrollLeft()+e(window).width()-d,(this.model.enableRTL||l>i&&l<d+s.outerWidth())&&(d-=this.popup.outerWidth()-s.outerWidth()),this.popup.css({left:d+"px",top:p+"px","z-index":u})},_getOffset:function(e){return t.util.getOffset(e)},_OnDocumentClick:function(t){this.model&&(e(t.target).is(this.popup)||e(t.target).parents(".e-datetime-popup").is(this.popup)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-datetime-wrap").is(this.wrapper)?(e(t.target).is(this.popup)||e(t.target).parents(".e-datetime-popup").is(this.popup))&&(t.preventDefault(),e(t.target).parents(".e-datepicker").length>0?this._addFocus(e(t.target).parents(".e-datepicker")):e(t.target).parents(".e-timecontainer").length>0?this._addFocus(e(t.target).parents(".e-timecontainer")):e(t.target).hasClass("e-dt-button")?this._addFocus(e(t.target)):e(t.target).parents(".e-time-hours").length>0?this._addFocus(e(t.target).parents(".e-time-hours")):e(t.target).parents(".e-time-minitues").length>0?this._addFocus(e(t.target).parents(".e-time-minitues")):this._removeFocus()):this._hideResult())},_OnWindowResize:function(e){this._setListPosition(),this._checkForResponsive(),this._updateTimeHeight()},_raiseChangeEvent:function(i){var s=t.parseDate(this._prevDateTimeVal,this.model.dateTimeFormat),a=t.parseDate(this.element.val(),this.model.dateTimeFormat);if(+s!=+a){this._preVal=this.element.val();var r={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isInteraction:!i,isValidState:this.isValidState};if(this.timePicker&&this.timePicker.model){var n=this._getFormat(a,this.timePicker.model.timeFormat);this.timePicker._ensureTimeRange(n)?(this._prevDateTimeVal="",this.model.value=null,this.isValidState=!1):this._prevDateTimeVal=this.element.val()}else this._prevDateTimeVal=this.element.val();this._trigger("_change",r),r.value=""==e.trim(this.element.val())?null:this.element.val(),r.value=this._formatter(this.model.value,this.model.dateTimeFormat),this._trigger("change",r)}else if(this._prevDateTimeVal!=this.element.val()){var r={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isValidState:this.isValidState};this._prevDateTimeVal=this.element.val(),this._trigger("_change",r)}},_formatter:function(e,i){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)},_raiseEvent:function(e){var i=this._previousDateUpdate();return!(null==this.element||!this.model[e])&&this._trigger(e,{prevDateTime:t.isNullOrUndefined(i||this._preValString)?"":i||this._preValString,value:this.element.val()})},_getDateTimeFormat:function(){var e=t.preferredCulture(this.model.locale).calendar.patterns;this.model.dateTimeFormat||(this.model.dateTimeFormat=e.d+" "+e.t),this.model.timeDisplayFormat||(this.model.timeDisplayFormat=e.t)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popup)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},_getDate:function(){return this.datePicker.model.value},_getTime:function(){return this._getDateObj(this.timePicker.model.value,this.timePicker.model.timeFormat)},_setEmptyTime:function(e){var t=new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_setEmptyDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(2e3),t},_objectToString:function(e){return this._getFormat(e,this.model.dateTimeFormat)},_stringToObject:function(e){return this._getDateObj(e,this.model.dateTimeFormat)},_getFormat:function(e,i){if(e instanceof Date){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)}return e},_checkFormat:function(e){var i=this,s=this._regExp();return e.replace(s,function(e){return e="/"===e&&"/"!==t.preferredCulture(i.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[\/]/g},_getDateObj:function(e,i){if("string"!=typeof e)return e;var s=this._checkFormat(i),a=t.parseDate(e,s,this.model.locale);if(null!=a)return a;if(""==e||null==e)return null;var r,n=/^\s*(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d).*Z\s*$/,o=n.exec(e),l=new Date;return o&&(l=new Date,r=+o[2],l.setUTCFullYear(o[1],r-1,o[3]),l.setUTCHours(o[4],o[5],o[6]),r!=l.getUTCMonth()+1&&l.setTime()),this._isValidDate(l)?l:void 0},_compare:function(e,t){return e&&t&&e.getTime()==t.getTime()},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_change:function(e,t){this.popup&&(this.datePicker.option(e,t),this.timePicker.option(e,t))},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popup.removeClass(this.model.cssClass).addClass(e),this._change("cssClass",e)},_localize:function(i){this.model.locale=i,t.isNullOrUndefined(this._options.timeDisplayFormat)&&(this.model.timeDisplayFormat=""),t.isNullOrUndefined(this._options.dateTimeFormat)&&(this.model.dateTimeFormat="");var s=["AM","PM"];if(this._getDateTimeFormat(),this.timePicker.option("timeFormat",this.model.timeDisplayFormat),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.buttonText)||e.extend(this._localizedLabels.buttonText,this._options.buttonText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),this._buttonText(this._localizedLabels.buttonText),(this.isValidState||this.model.value instanceof Date&&this._isValidDate(this.model.value))&&this.element.val(this._objectToString(this.model.value)),this._preVal=this.element.val(),this._change("locale",i),this.model.startDay=this.datePicker.model.startDay,this._validateMeridian(),this._sfTimeHour.empty(),this._renderHourTable(),this.model.timeDrillDown.showMeridian)for(var a=0;a<2;a++){var r=t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard[s[a]])?"":t.preferredCulture(this.model.locale).calendars.standard[s[a]][0];e("span.e-hours-meridiantxt-"+s[a].toLowerCase(),this._sfTimeHour).text(r)}},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_readOnly:function(e){this.model.readOnly=e,e?this.element.attr("readonly","readonly"):this.element.prop("readonly",!1),this._change("readOnly",e)},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popup&&this.popup.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popup&&this.popup.removeClass("e-corner")),!t.isNullOrUndefined(this.datePicker)&&this.datePicker.option("showRoundedCorner",e),!t.isNullOrUndefined(this.timePicker)&&this.timePicker.option("showRoundedCorner",e)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popup&&this.popup.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popup&&this.popup.removeClass("e-rtl")),this._change("enableRTL",e)},_enabled:function(e){e?(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable())},_showButton:function(e){this.model.showPopupButton=e,e?(this.container.addClass("e-padding"),this._renderIcon()):(this.container.removeClass("e-padding"),this.datetimeIcon.remove(),this.datetimeIcon=null)},_buttonText:function(t){e.extend(this.model.buttonText,t),this.popup.find(".e-dt-today").html(this.model.buttonText.today),this.popup.find(".e-dt-now").html(this.model.buttonText.timeNow),this.popup.find(".e-dt-done").html(this.model.buttonText.done),this.popup.find(".e-timecontainer").find(".e-header").html(this.model.buttonText.timeTitle)},_checkForResponsive:function(){if(e(window).outerWidth()>200&&e(window).outerWidth()<=500)this.popup.hasClass("e-dt-responsive")||(this.popup.addClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.datePicker.popup.outerWidth()),this.timePicker.option("popupHeight",98),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle());else if(this.popup.hasClass("e-dt-responsive")){this.popup.removeClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.model.timePopupWidth);var t=this.datePicker.popup.height()-this.popup.find(".e-header").height();this.timePicker.option("popupHeight",t),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()}},enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.model.enabled=!0,this.element.prop("disabled",!1),this.wrapper.removeClass("e-disable"),this.element.removeClass("e-disable").attr("aria-disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.datetimeIcon&&this.datetimeIcon.removeClass("e-disable").attr("aria-disabled",!1),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().removeClass("e-disable"),this.popup&&(this.popup.children("div").removeClass("e-disable").attr("aria-disabled",!1),this._change("enabled",!0)))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.wrapper.addClass("e-disable"),this.element.addClass("e-disable").attr("aria-disabled",!0),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.datetimeIcon&&this.datetimeIcon.addClass("e-disable").attr("aria-disabled",!0),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().addClass("e-disable"),this._hideResult(),this._change("enabled",!1),this.popup&&(this.popup.children("div").addClass("e-disable").attr("aria-disabled",!0),this.datePicker.popup.removeClass("e-disable").attr("aria-disabled",!1),this.timePicker.popup.removeClass("e-disable").attr("aria-disabled",!1)))},getValue:function(){return this._objectToString(this.model.value)},setCurrentDateTime:function(){this.model.readOnly||this._setValue(new Date)},show:function(){this._showResult()},hide:function(){this._hideResult()},_wireEvents:function(){this.model.allowEdit&&(this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"keydown",this._keyDownOnInput)),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",e.proxy(this._showhidePopup,this)))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.DateTimePicker.Locale=t.DateTimePicker.Locale||{},t.DateTimePicker.Locale.default=t.DateTimePicker.Locale["en-US"]={watermarkText:"Select datetime",buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"}},t.PopupPosition={Bottom:"bottom",Top:"top"}}(jQuery,Syncfusion),function(e,t,i){t.widget("ejDialog","ej.Dialog",{_rootCSS:"e-dialog",element:null,_ignoreOnPersist:["drag","dragStart","dragStop","resizeStop","resizeStart","resize","beforeClose","beforeOpen","collapse","expand","close","open","destroy","create","ajaxSuccess","ajaxError","contentLoad","actionButtonClick","enableResize"],model:null,validTags:["div","span"],_setFirst:!1,angular:{terminal:!1},defaults:{showOnInit:!0,closeOnEscape:!0,closeIconTooltip:"close",enableAnimation:!0,allowDraggable:!0,backgroundScroll:!0,height:"auto",minHeight:120,minWidth:200,maxHeight:null,maxWidth:null,enableModal:!1,position:{X:"",Y:""},containment:null,enableResize:!0,htmlAttributes:{},showHeader:!0,showFooter:!1,contentType:null,contentUrl:null,ajaxSettings:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},title:"",width:400,zIndex:1e3,cssClass:"",enableRTL:!1,allowKeyboardNavigation:!0,showRoundedCorner:!1,actionButtons:["close"],animation:{show:{effect:"fade",duration:400},hide:{effect:"fade",duration:400}},tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},footerTemplateId:null,locale:"en-US",faviconCSS:null,content:null,target:null,enablePersistence:!1,enabled:!0,isResponsive:!1,actionButtonClick:null,beforeClose:null,close:null,expand:null,collapse:null,beforeOpen:null,open:null,drag:null,dragStart:null,dragStop:null,resize:null,resizeStart:null,resizeStop:null,contentLoad:null,ajaxSuccess:null,ajaxError:null,create:null,destroy:null,Close:null},dataTypes:{showOnInit:"boolean",closeOnEscape:"boolean",enableAnimation:"boolean",backgroundScroll:"boolean",position:"data",animation:"data",closeIconTooltip:"string",tooltip:"data",allowDraggable:"boolean",enableModal:"boolean",enableResize:"boolean",isResponsive:"boolean",showHeader:"boolean",showFooter:"boolean",title:"string",faviconCSS:"string",zIndex:"number",cssClass:"string",enablePersistence:"boolean",contentUrl:"string",contentType:"string",enableRTL:"boolean",enabled:"boolean",allowKeyboardNavigation:"boolean",showRoundedCorner:"boolean",locale:"string",htmlAttributes:"data",ajaxSettings:"data",actionButtons:"array",footerTemplateId:"string"},_setModel:function(i){for(var s in i)switch(s){case"closeIconTooltip":this._dialogClose.attr("title",i[s]);break;case"tooltip":this._tooltipText(i[s]);break;case"title":this.model.title=i[s],this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(i[s]),this._updateCaptionWidth();break;case"width":this.model.width=i[s],this._changeSize(),this._updateCaptionWidth(),i[s]=this.model.width;break;case"height":this.model.height=i[s],this._changeSize(),i[s]=this.model.height;break;case"position":this.model.position=i[s],this._dialogPosition();break;case"cssClass":this._changeSkin(i[s]);break;case"showRoundedCorner":this.model.showRoundedCorner=i[s],this._roundedCorner(i[s]);break;case"contentType":this.model.contentType=i[s],this._appendContent(i[s]);break;case"enabled":this.model.enabled=i[s],this._enabledAction(i[s]);break;case"contentUrl":this.model.contentUrl=i[s],this._appendContent(this.model.contentType);break;case"backgroundScroll":this.model.backgroundScroll=i[s],!this.model.backgroundScroll&&this.model.enableModal?e("body").addClass("e-dialog-modal"):e("body").removeClass("e-dialog-modal");break;case"content":case"target":this._ejDialog.appendTo(e(i[s])),this.model.target=this.model.content=i[s],this._dialogPosition();break;case"containment":this._setDragArea(i[s]),t.isNullOrUndefined(this._target)?this._ejDialog.appendTo(document.body):this._ejDialog.appendTo(this._target),this.model.position.X=this.model.position.Y="",this._dialogPosition(),this.model.containment=i[s]=this._target,this.model.enableModal&&this._createOverlay(),this._dialogTitlebar.ejDraggable({dragArea:this._target});break;case"locale":this.model.locale=i[s],this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels,!0),this._tooltipText(this.model.tooltip),this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(this.model.title),this._updateCaptionWidth();break;case"minHeight":this.model.minHeight=i[s],this._ejDialog.css("minHeight",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"minWidth":this.model.minWidth=i[s],this._ejDialog.css("minWidth",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxHeight":this.model.maxHeight=i[s],this._ejDialog.css("maxHeight",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxWidth":this.model.maxWidth=i[s],this._ejDialog.css("maxWidth",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"zIndex":this._ejDialog.css("z-index",i[s]);break;case"faviconCSS":this.model.faviconCSS=i[s],this._favIcon(),this._updateCaptionWidth();break;case"isResponsive":this.model.isResponsive=i[s],this.model.isResponsive?this._ejDialog.addClass("e-dialog-resize"):this._ejDialog.removeClass("e-dialog-resize"),this._wireResizing();break;case"allowDraggable":this.model.allowDraggable=i[s],i[s]?this._enableDrag():this._dialogTitlebar.removeClass("e-draggable");break;case"enableResize":this.model.enableResize=i[s],i[s]?this._enableResize():(this._ejDialog.removeClass("e-resizable"),this._ejDialog.find(".e-resize-handle").remove()),this._reRenderScroller();break;case"showHeader":this.model.showHeader=i[s],i[s]?(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&(this._dialogFavIcon=!1,this._favIcon()),this._enableDrag(),this._maximize||this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1-this._dialogTitlebar.outerHeight(!0):"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))):(this._ejDialog.find(".e-titlebar").remove(),
this._maximize?this.refresh():this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1:"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))),this._roundedCorner(this.model.showRoundedCorner),this.model.showFooter&&this._setContainerSize()._resetScroller();break;case"showFooter":this.model.showFooter=i[s],i[s]?(this._appendContent(),this._ejDialog.find(".e-resizable").remove()):this._ejDialog.find(".e-footerbar").remove(),this._enableResize()._enableDrag()._sizeInPercent(),this._reRenderScroller(),this._setContainerSize()._resetScroller(),this._roundedCorner(this.model.showRoundedCorner);break;case"footerTemplateId":if(this.model.footerTemplateId=i[s],this.model.showFooter){this._ejDialog.find(".e-footerbar").empty();var a=e("body").find("#"+this.model.footerTemplateId).html();this._dialogFooterbar.append(a),this._enableResize()}break;case"enableRTL":this.model.enableRTL=i[s],this.model.faviconCSS&&this._favIcon(),i[s]?(this._ejDialog.addClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","rtl"),this.scroller&&this._resetScroller()):(this._ejDialog.removeClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","ltr"),this.scroller&&this._resetScroller());break;case"actionButtons":t.isNullOrUndefined(this._dialogTitlebar)||(this._removeAllIcons(),this._iconsRender(i[s])),this.model.actionButtons=i[s],this._updateCaptionWidth();break;case"enableModal":this._enableModal(i[s]);break;case"htmlAttributes":this._addAttr(i[s])}},_destroy:function(){this._overLay&&this._overLay.remove(),this._cloneElement.appendTo(this._ejDialog.parent()),this._ejDialog.remove(),this.model.enableAnimation&&this._ejDialog.stop(),this._cloneElement.removeClass("e-dialog"),this.element=this._cloneElement,this._isOpen=!1,e(window).off("resize",e.proxy(this._reSizeHandler,this))},keyConfigs:[37,38,39,40],_init:function(){this._init=!0,this._widthPercent=null,this._heightPercent=null,this._windowSize={outerWidth:e(window).outerWidth(),outerHeight:e(window).outerHeight()},this._initSize={width:this.model.width,height:this.model.height},this._sizeType={width:isNaN(this.model.width)?this.model.width.match(/px|%|auto/g)[0]:null,height:isNaN(this.model.height)?this.model.height.match(/px|%|auto/g)[0]:null},this._isOpen=this._maximize=this._minimize=!1,this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels),this._setDimension(),this.model.close||(this.model.close=this.model.Close),this.model.target||(this.model.target=this.model.content),this._responsive(),this._renderControl(),this._wireEvents(),this.scrObj=this._ejDialog.closest(".e-dialog.e-js").data("ejDialog"),this.scrObj&&this.scrObj._resetScroller(),this.hidden=!1,this._init=!1,this._keyNavigation=!1},_responsive:function(){this.width=this.model.width,e(this.element).width(this.width),this.height=this.model.height,e(this.element).height(this.height),e(window).on("resize",e.proxy(this._resizeHandler,this))},_resizeHandler:function(){this._maximize&&(this.width=e(this._dialogTitlebar).outerWidth(),e(this.contentDiv).width(this.width),e(this.contentDiv).children().width(this.width),this.model.height=this.height=e(window).height(),this._ejDialog.css({height:this.height}),this.contentDiv.height(this._ejDialog.height()-e(this._dialogTitlebar).outerHeight()-e(this._dialogFooterbar).outerHeight()),this.element.height(this.contentDiv.height())),t.isNullOrUndefined(this.element)||this._collapsible||this._resetScroller()},_setLocaleCulture:function(e,t){this.defaults.closeIconTooltip===this.model.closeIconTooltip&&(this.model.closeIconTooltip=e.closeIconTooltip),t&&(this.model.tooltip=this.localizedLabels.tooltip,this.model.title=this.localizedLabels.title),JSON.stringify(this.model.tooltip)===JSON.stringify(this.defaults.tooltip)&&(this.model.tooltip=e.tooltip),this.model.title===this.defaults.title&&(this.model.title=e.title)},_setDragArea:function(i){t.isNullOrUndefined(i)?this._target=null:"string"==typeof i?("parent"==i&&(this._target=e(this.element).parent()),"document"==i.toLowerCase()&&(this._target=e(document)),"window"==i.toLowerCase()?this._target=e(window):e(i).length>0&&(this._target=e(i))):"object"==typeof i?i.length>0&&(this._target=i):this._target=null},_addAttr:function(t){var i=this;e.map(t,function(e,t){if("class"==t)i._ejDialog.addClass(e);else if("disabled"==t&&"disabled"==e)i.model.enabled=!1,i._enabledAction(!1);else if(i._ejDialog[0].hasAttribute("style")){var s=i._ejDialog[0].getAttribute("style")+e;i._ejDialog.attr(t,s)}})},_tooltipText:function(i){e.extend(this.model.tooltip,i),!t.isNullOrUndefined(this._dialogClose)&&this._dialogClose.hasClass("e-close")&&this._dialogClose.attr("title",this.model.tooltip.close),t.isNullOrUndefined(this._dialogCollapsible)||!i.collapse&&!i.expand||(this._dialogCollapsible.hasClass("e-arrowhead-up")&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._dialogCollapsible.hasClass("e-arrowhead-down")&&this._dialogCollapsible.attr("title",this.model.tooltip.expand)),t.isNullOrUndefined(this._dialogMaximize)||!i.maximize&&!i.restore||(this._dialogMaximize.hasClass("e-maximize")&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogMaximize.hasClass("e-restore")&&this._dialogMaximize.attr("title",this.model.tooltip.restore)),t.isNullOrUndefined(this._dialogMinimize)||!i.minimize&&!i.restore||(this._dialogMinimize.hasClass("e-minus")&&this._dialogMinimize.attr("title",this.model.tooltip.minimize),this._dialogMinimize.hasClass("e-restore")&&this._dialogMinimize.attr("title",this.model.tooltip.restore)),t.isNullOrUndefined(this._dialogPin)||!i.pin&&!i.unPin||(this._dialogPin.hasClass("e-unpin")&&this._dialogPin.attr("title",this.model.tooltip.pin),this._dialogPin.hasClass("e-pin")&&this._dialogPin.attr("title",this.model.tooltip.unPin))},_renderControl:function(){if(this._cloneElement=this.element.clone(),this.element.attr("tabindex",0).attr({role:"dialog"}),this.model.showHeader&&this.element.attr({"aria-labelledby":this.element.prop("id")+"_title"}),this._ejDialog=t.buildTag("div.e-dialog e-widget e-box "+this.model.cssClass+" e-dialog-wrap e-shadow#"+(""==this.element.prop("id")?"":this.element.prop("id")+"_wrapper"),"",{display:"none",zIndex:this.model.zIndex},{tabindex:0}),this.model.isResponsive&&this._ejDialog.addClass("e-dialog-resize"),this.wrapper=this._ejDialog,this._addAttr(this.model.htmlAttributes),this._setDragArea(this.model.containment),t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)){if(!t.isNullOrUndefined(this.model.target))var i=this.model.target}else var i=this._target;var s=t.isNullOrUndefined(i)?document.body:i,a=e(s).find("#"+this._id+"_wrapper").get(0);a&&e(a).remove(),this._ejDialog.appendTo(s),this.model.enableRTL&&this._ejDialog.addClass("e-rtl"),this.model.showHeader&&(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&this._favIcon()),this._appendContent(this.model.contentType),this._enableResize()._enableDrag()._setSize(),"auto"!=this.model.height&&this._sizeInPercent(),"ajax"!=this.model.contentType&&(this.model.showOnInit&&this.open()?this._setContainerSize()._resetScroller():this._setHiddenDialogSize()),this._roundedCorner(this.model.showRoundedCorner),this._enabledAction(this.model.enabled),"auto"==this._sizeType.width&&(this._maxWidth=this.model.width),"auto"==this._sizeType.height&&(this._maxHeight=this.model.height)},_setContainerSize:function(){if("auto"!=this.model.height){var t=this._ejDialog.outerHeight()-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)+(this.model.showFooter?e(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0)-1;this.contentDiv.height(t),this.element.outerHeight(t)}return this},_changeSize:function(){this._initSize={width:this.model.width,height:this.model.height},this._sizeType.width=isNaN(this.model.width)?this.model.width.match(/px|%|auto/g):null,this._sizeType.height=isNaN(this.model.height)?this.model.height.match(/px|%|auto/g):null,this._setSize()._sizeInPercent()._setContainerSize()._resetScroller()},_enableDrag:function(){return this.model.allowDraggable&&this.model.showHeader&&(this._dialogTitlebar.addClass("e-draggable"),this._dragDialog()),this},_enableResize:function(){if(this.model.enableResize){this._ejDialog.addClass("e-resizable");var e=t.buildTag("div.e-icon e-resize-handle");this.model.showFooter?e.appendTo(this._dialogFooterbar):e.appendTo(this._ejDialog),this._resizeDialog()}return this},_changeSkin:function(e){this.model.cssClass!=e&&this._ejDialog.removeClass(this.model.cssClass).addClass(e)},_enableModal:function(e){e?this._isOpen&&this._createOverlay():this._overLay&&this._overLay.remove()},_enabledAction:function(e){e?(this._ejDialog.removeClass("e-disable"),this.wrapper.children(".e-disable-overlay").remove(),t.isNullOrUndefined(this.scroller)||this.scroller.enable()):(this._ejDialog.addClass("e-disable"),t.buildTag("div.e-disable-overlay").appendTo(this.wrapper),t.isNullOrUndefined(this.scroller)||this.scroller.disable())},_renderTitleBar:function(){this._elementTitle=this.element.attr("title"),"string"!=typeof this._elementTitle&&(this._elementTitle=""),this.model.title=this.model.title||this._elementTitle,this._dialogTitlebar=t.buildTag("div#"+this.element.prop("id")+"_title.e-titlebar e-header e-dialog").prependTo(this._ejDialog),this._addTitleText()},_renderFooterBar:function(){this._dialogFooterbar=t.buildTag("div#"+this.element.prop("id")+"_foot.e-footerbar e-dialog e-js").appendTo(this._ejDialog)},_addTitleText:function(){return this.model.title&&(this._titleText=t.buildTag("span.e-title",this.model.title).prependTo(this._dialogTitlebar)),this},_updateCaptionWidth:function(){var e=this.model.faviconCSS&&!t.isNullOrUndefined(this._dialogFavIcon)?this._dialogFavIcon.outerWidth():0;return this._titleText&&!t.isNullOrUndefined(this._dialogTitlebar)&&this._titleText.css("max-width",this._dialogTitlebar.width()-20-this._dialogTitlebar.find(".e-dialog-icon").width()*this._dialogTitlebar.find(".e-dialog-icon").length-e),this},_iconsRender:function(i){for(var s=0;s<i.length;s++)switch("msie"==t.browserInfo().name&&t.browserInfo().version<=8?e.trim(i[s]):i[s].trim()){case"close":this._closeIcon();break;case"collapse":case"collapsible":this._collapsibleIcon();break;case"maximize":this._maximizeIcon();break;case"minimize":this._minimizeIcon();break;case"pin":this._pinIcon();break;default:this._customIconsRender(i[s])}},_customIconsRender:function(e){this._customIcon=t.util.buildTag("div#"+this.element[0].id+"_"+e+"button.e-dialog-icon e-icon e-"+e,null,null).attr("tabIndex","0").attr("title",e),this._customIcon.appendTo(this._dialogTitlebar),this._on(this._customIcon,"touchstart click",this._iconClick)},_iconClick:function(t){if(!this.element.hasClass("e-disable")){var i={cancel:!1,buttonID:e(t.target).attr("id"),event:t.type,model:this.model,currentTarget:t.currentTarget.title};this._trigger("actionButtonClick",i)}},_removeAllIcons:function(){this._dialogTitlebar.find("div.e-dialog-icon").remove()},_appendContent:function(i){this.contentDiv=t.isNullOrUndefined(this.contentDiv)?t.buildTag("div.e-dialog-scroller"):this.contentDiv,this.element.removeAttr("title").addClass("e-widget-content e-box");var s=this;if(t.isNullOrUndefined(this.model.contentUrl)||t.isNullOrUndefined(i))this.dialogIframeContent=this.element.children().find("iframe").contents()[0],t.isNullOrUndefined(this.dialogIframeContent)?this.element.show().appendTo(this.contentDiv):this.element.show().appendTo(this.contentDiv).find("iframe").append(this.dialogIframeContent.lastChild);else if("ajax"==i)this.model.ajaxSettings.url=this.model.contentUrl,this._sendAjaxOptions(this.element,this.model.ajaxSettings.url);else if("iframe"==i)this.element.children(".e-iframe").length>0?(this.iframe=this.element.find("iframe.e-iframe"),this.iframe.attr("src",this.model.contentUrl)):(this.iframe=t.buildTag("iframe.e-iframe","",{width:"100%",height:"100%"},{scrolling:"auto",frameborder:0,src:this.model.contentUrl}),this.element.appendTo(this.contentDiv).append(this.iframe).show()),this.model.enableRTL&&e(this.iframe).load(function(){s.iframe.contents().find("body").css("direction","rtl")}),this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl});else if("image"==i){var a=t.buildTag("img.e-images","","",{src:this.model.contentUrl});this.element.append(a).show().appendTo(this.contentDiv),e(a).on("load",function(){s._dialogPosition()}),this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl})}else this.element.show().appendTo(this.contentDiv);if(this._ejDialog.find("div.e-resize-handle").length>0)0==this._ejDialog.find(".e-footerbar").length&&this.contentDiv.insertBefore(this._ejDialog.find("div.e-resize-handle"));else{var r=this.element.children().find("iframe").contents()[0];if(t.isNullOrUndefined(r))0==this._ejDialog.find(".e-footerbar").length?this.contentDiv.appendTo(this._ejDialog):this.contentDiv.insertBefore(this._dialogFooterbar);else{this.contentDiv.appendTo(this._ejDialog);var n=e("#"+this.contentDiv.find("iframe").attr("id"));e(n[0].contentDocument.lastChild).remove(),n[0].contentDocument.appendChild(r),"mozilla"==t.browserInfo().name&&setTimeout(function(){e(n[0].contentDocument.lastChild).remove(),n[0].contentDocument.appendChild(r)},500)}}if(this.model.showFooter&&0==this._ejDialog.find(".e-footerbar").length&&(this._renderFooterBar(),null!=this.model.footerTemplateId)){var o=e("body").find("#"+this.model.footerTemplateId).html();this._dialogFooterbar.append(o)}},_roundedCorner:function(e){this._ejDialog[e?"addClass":"removeClass"]("e-corner"),this.contentDiv.removeClass("e-dialog-top e-dialog-bottom e-dialog-content"),this.model.showRoundedCorner&&(this.model.showHeader&&!this.model.showFooter?this.contentDiv.addClass("e-dialog-bottom"):!this.model.showHeader&&this.model.showFooter?this.contentDiv.addClass("e-dialog-top"):!(!this.model.showHeader&&!this.model.showFooter)||this.contentDiv.addClass("e-dialog-content"))},_reRenderScroller:function(){if(void 0!=this.scroller&&(this.scroller.refresh(!0),!this.model.enableRTL)){if(this.scroller._vScrollbar&&this.scroller._vScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter)var e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=0,i=0;else var e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=2,i=this._ejDialog.find("div.e-resize-handle").outerHeight();Math.floor(this.contentDiv.outerHeight())===Math.floor(this.scroller._vScrollbar.model.height+1)&&(this.scroller._vScrollbar.model.height-=i+t,this.scroller._vScrollbar._scrollData.handle-=i,this.scroller._vScrollbar._scrollData.handleSpace-=i+t,this.scroller._vScrollbar._updateLayout(this.scroller._vScrollbar._scrollData),this.scroller._vScrollbar.element.find("> div.e-vscroll").height(e-i-t))}if((!this.scroller._vScrollbar||!this.scroller._vScrollbar._scrollData)&&this.scroller._hScrollbar&&this.scroller._hScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter)var s=this.scroller._hScrollbar.element.find("> div.e-hscroll").width(),t=0,i=0;else var s=this.scroller._hScrollbar.element.find("> div.e-hscroll").width(),t=2,i=this._ejDialog.find("div.e-resize-handle").outerWidth();this.scroller._hScrollbar.model.width-=i+t,this.scroller._hScrollbar._scrollData.handle-=i+t,this.scroller._hScrollbar._scrollData.handleSpace-=i+t,this.scroller._hScrollbar._updateLayout(this.scroller._hScrollbar._scrollData),this.scroller._hScrollbar.element.find("> div.e-hscroll").width(s-i-t)}}},_dialogMaxZindex:function(){var t,i,s=this.element.parents();t=e("body").children(),e(t).each(function(e,t){s.push(t)}),i=e(this.model.target).children(),e(i).each(function(e,t){s.push(t)});var a=Math.max.apply(a,e.map(s,function(t,i){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1}));return!a||a<1e4?a=1e4:a+=1,a},_setZindex:function(){var e=this._dialogMaxZindex();this.model.zIndex<=e&&this._ejDialog.css({zIndex:e+1})},_createOverlay:function(){var i,s,a=this._ejDialog.css("zIndex");!t.isNullOrUndefined(this._overLay)&&this._overLay.remove(),this.model.backgroundScroll||e("body").addClass("e-dialog-modal"),this._overLay=t.buildTag("div#"+this.element.attr("id")+"_overLay.e-overlay","",{zIndex:a-1}),e(this._overLay).addClass("e-widget"),t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?t.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target,this._overLay.appendTo(t.isNullOrUndefined(i)?document.body:i);var s=t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?"fixed":"absolute",r=t.isNullOrUndefined(i)||"fixed"==s?0:"static"!=e(i).css("position").toLowerCase()?0:e(i).offset().left,n=t.isNullOrUndefined(i)||"fixed"==s?0:"static"!=e(i).css("position").toLowerCase()?0:e(i).offset().top;this._overLay.css({top:n,left:r,position:s})},_sendAjaxOptions:function(t,i){t.addClass("e-load");var s=this,a=this.model.title,r={success:function(e){try{s._ajaxSuccessHandler(e,t,i,a)}catch(e){}},error:function(e){try{s._ajaxErrorHandler({status:e.status,responseText:e.responseText,statusText:e.statusText},t,i,a)}catch(e){}},complete:function(){try{s._setContainerSize(),s._resetScroller(),s.model.showOnInit||s._setHiddenDialogSize()}catch(e){}}};e.extend(!0,r,this.model.ajaxSettings),this._sendAjaxRequest(r)},_setHiddenDialogSize:function(){this._isOpen||(this._ejDialog.css({display:"block",visibility:"hidden"}),this._setContainerSize()._resetScroller(),this._ejDialog.css({display:"none",visibility:""}))},_sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(e,t,i,s){t.removeClass("e-load"),t.html(e).addClass("e-dialog-loaded").appendTo(this._ejDialog),t.appendTo(this.contentDiv),this._dialogPosition(),this.model.showOnInit&&this.open(),this._trigger("ajaxSuccess",{data:e,url:i})},_ajaxErrorHandler:function(e,t,i,s){t.addClass("e-dialog-loaded").appendTo(this.contentDiv),this._dialogPosition().open(),this._trigger("ajaxError",{data:e,url:i})},_closeIcon:function(){this._dialogClose=t.util.buildTag("div#"+this.element[0].id+"_closebutton.e-dialog-icon e-icon e-close",null,null).attr("tabIndex","0"),"close"==this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close):"close"!=this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.closeIconTooltip):("close"==this.model.closeIconTooltip&&this.model.tooltip.close,this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close)),this._on(this._dialogClose,"touchstart click",this._closeClick)},_collapsibleIcon:function(){this._dialogCollapsible=t.util.buildTag("div#"+this.element[0].id+"_collapsbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._collapsible?this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.expand).addClass("e-arrowhead-down").removeClass("e-arrowhead-up"):this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.collapse).addClass("e-arrowhead-up").removeClass("e-arrowhead-down"),this._on(this._dialogCollapsible,"touchstart click",this._collapsibleClick)},_maximizeIcon:function(){this._dialogMaximize=t.util.buildTag("div#"+this.element[0].id+"_maximizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._maximize?this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-maximize"):this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.maximize).addClass("e-maximize").removeClass("e-restore"),this._on(this._dialogMaximize,"touchstart click",this._maximizeClick)},_minimizeIcon:function(){this._dialogMinimize=t.util.buildTag("div#"+this.element[0].id+"_minimizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._minimize?this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-minus"):this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.minimize).addClass("e-minus").removeClass("e-restore"),this._on(this._dialogMinimize,"touchstart click",this._minimizeClick)},_pinIcon:function(){this._dialogPin=t.util.buildTag("div#"+this.element[0].id+"_pinbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._dialogPin.appendTo(this._dialogTitlebar).attr("title",this.dialogPin?this.model.tooltip.unPin:this.model.tooltip.pin).addClass(this.dialogPin?"e-pin":"e-unpin").removeClass(this.dialogPin?"e-unpin":"e-pin"),this._on(this._dialogPin,"touchstart click",this._pinClick)},_favIcon:function(){if(this._dialogFavIcon)e=this._dialogFavIcon.find("span").removeClass().addClass("e-dialog-custom");else{this._dialogFavIcon=t.util.buildTag("div.e-dialog-favicon","",{},{style:"float:"+(this.model.enableRTL?"right":"left")});var e=t.util.buildTag("span.e-dialog-custom","",{},{role:"presentation"});e.appendTo(this._dialogFavIcon),this._dialogFavIcon.appendTo(this._dialogTitlebar)}this.model.faviconCSS?e.addClass(this.model.faviconCSS):this._dialogFavIcon.remove(),this._dialogFavIcon.css("float",this.model.enableRTL?"right":"left")},_minMaxValidation:function(){var e=parseInt(this.model.minWidth),t=parseInt(this.model.minHeight),i=parseInt(this.model.maxWidth),s=parseInt(this.model.maxHeight),a=parseInt(this.model.width),r=parseInt(this.model.height),n=this._getParentObj();isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(e=this._convertPercentageToPixel(n.outerWidth(),e)),isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(t=this._convertPercentageToPixel(n.outerHeight(),t)),isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(i=this._convertPercentageToPixel(n.innerWidth(),i)),isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(s=this._convertPercentageToPixel(n.innerHeight(),s)),isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&(a=this._convertPercentageToPixel(n.innerWidth(),a)),isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&(r=this._convertPercentageToPixel(n.innerHeight(),r)),(i&&a>i||e&&a<e)&&(this.model.width=a>i?i:e),(s&&r>s||t&&r<t)&&(this.model.height=r>s?s:t)},_setSize:function(){var e=this.model;return this._minMaxValidation(),this._ejDialog.css({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth}),this._ejDialog.css({height:e.height,minHeight:e.minHeight,maxHeight:e.maxHeight}),this._dialogPosition(),this},_resetScroller:function(){this.element.css({height:"auto","max-width":"","max-height":"",width:""});var i,s=this._ejDialog.outerHeight(!0)-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)-(this.model.showFooter?e(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0),a={width:"0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?Math.round(this._ejDialog.width()):Math.round(this._ejDialog.width()-2),enableRTL:this.model.enableRTL,height:"0px"==this.contentDiv.css("border-width")?s:s-1,enableTouchScroll:!1};"auto"!=this.model.height||!(this.element.height()<this.model.maxHeight)&&this.model.maxHeight||this._maximize||(a.height="auto"),"auto"!=this.model.width||this._maximize||(a.width=this.model.width),this.contentDiv.ejScroller(a),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._padding=parseInt(e(this.element).css("padding-top"))+parseInt(e(this.element).css("padding-bottom")),"none"==e(this._ejDialog).css("display")&&(this.hidden=!0,this._ejDialog.css({display:"block"})),!t.isNullOrUndefined(this.contentDiv.height())&&this.contentDiv.height()>0&&(i=t.isNullOrUndefined(this.scroller)?this.contentDiv.outerHeight()-this._padding:!this.scroller._hScrollbar&&this.scroller._vScrollbar?this.contentDiv.outerHeight():this.scroller._hScrollbar?this.contentDiv.outerHeight()-this.scroller.model.buttonSize:this.contentDiv.outerHeight(),"auto"!=this.model.height&&"100%"!=this.model.height?this.element.css({height:i-1}):this.element.css("height",this.model.height),"auto"!=this.model.height&&"100%"!=this.model.height||this.scroller._vScrollbar||this.element.css({"min-height":this.model.minHeight-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)}),this.scroller._vScrollbar||"auto"==this.model.width||"100%"==this.model.width?this.scroller._vScrollbar||this.element.css("width",this.model.width):this.element.outerWidth("0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?this._ejDialog.width():this._ejDialog.width()-2),this.element.css({"max-width":this.model.maxWidth,"max-height":this.model.maxHeight})),this.hidden&&this._ejDialog.css({display:"none"}),this.hidden=!1},_updateScroller:function(e,t){this.contentDiv.ejScroller({width:t,height:e,enableRTL:this.model.enableRTL,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._changeSize()},_dragDialog:function(){var i=this;this._ejDialog.parents(".e-dialog-scroller");return this._dialogTitlebar.ejDraggable({handle:".e-titlebar",cursorAt:{top:0,left:0},dragArea:i._target,dragStart:function(e){return e.element.attr("aria-grabbed",!0),i._clickHandler(),!i.dialogPin&&i.model.allowDraggable&&i.model.enabled?i._trigger("dragStart",{event:e})?(e.cancel=!0,!1):void 0:(e.cancel=!0,!1)},drag:function(e){i._trigger("drag",{event:e})},dragStop:function(s){if(i._ejDialog.focus(),s.element.attr("aria-grabbed",!1),i.element.find("> .e-draggable.e-titlebar")){var a=e("#"+i.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable");a&&a.option("cursorAt",i.element.offset())}var r=this.helper.offsetParent().offset();i._trigger("dragStop",{event:s}),i.model.position.X=t.isNullOrUndefined(this.position.left)?parseInt(this.helper.css("left")):this.position.left-[r.left+parseFloat(this.helper.offsetParent().css("border-left-width"))],i.model.position.Y=t.isNullOrUndefined(this.position.top)?parseInt(this.helper.css("top")):this.position.top-[r.top+parseFloat(this.helper.offsetParent().css("border-top-width"))],i._positionChanged=!0,i.dlgresized=!0},helper:function(t){return e(i._ejDialog).addClass("dragClone")}}),this},_resizeDialog:function(){if(this.model.enableResize){var t,i=this,s=!1,a=parseInt(this.model.minWidth),r=parseInt(this.model.minHeight),n=parseInt(this.model.maxWidth),o=parseInt(this.model.maxHeight);return t=this._getParentObj(),isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(a=this._convertPercentageToPixel(t.outerWidth(),a)),isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(r=this._convertPercentageToPixel(t.outerHeight(),r)),isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(n=this._convertPercentageToPixel(t.innerWidth(),n)),isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(o=this._convertPercentageToPixel(t.innerHeight(),o)),this._ejDialog.find("div.e-resize-handle").ejResizable({minHeight:r,minWidth:a,maxHeight:o,maxWidth:n,handle:"e-widget-content",resizeStart:function(e){if(i.dlgresized=!0,!i.model.enabled)return!1;!s&&i._trigger("resizeStart",{event:e}),s=!0,i.model.position={X:i._ejDialog.css("left"),Y:i._ejDialog.css("top")},i._dialogPosition()},resize:function(t){i.dlgresized=!0;var s=e(t.element).parents("div.e-dialog-wrap");i.model.height=e(s).outerHeight(),i.model.width=e(s).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),i._updateCaptionWidth(),i._trigger("resize",{event:t}),i._sizeType={width:"px",height:"px"},this.scrObj&&this.scrObj._resetScroller()},resizeStop:function(t){i.dlgresized=!0,i._ejDialog.focus(),i._sizeInPercent();var a=e(t.element).parents("div.e-dialog-wrap");i.model.height=e(a).outerHeight(),i.model.width=e(a).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),s&&i._trigger("resizeStop",{event:t}),s=!1,i._setDimension()},helper:function(t){return e(i._ejDialog)}}),this}},_dialogPosition:function(){if(this._ejDialog.parents("form").length>0&&t.isNullOrUndefined(this.model.containment)&&t.isNullOrUndefined(this.model.target)&&this._ejDialog.appendTo(this._ejDialog.parents("form")),""!=this.model.position.X||""!=this.model.position.Y)if(this._ejDialog.css("position","absolute"),t.isNullOrUndefined(this.model.target)&&t.isNullOrUndefined(this.model.containment))this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y);else{var i=t.isNullOrUndefined(this.model.containment)?this.model.target:this.model.containment;this.dlgresized||this._keyNavigation?(this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y)):(this._ejDialog.css("left",e(i).offset().left+parseInt(this.model.position.X)),this._ejDialog.css("top",e(i).offset().top+parseInt(this.model.position.Y)))}else this._centerPosition();return this},_centerPosition:function(){var i=0,s=0;if(t.isNullOrUndefined(this.model.target)&&(t.isNullOrUndefined(this._target)||e(this._target).is(e(document))||e(this._target).is(e(window)))){var a=document.documentElement;i=(e(window).outerWidth()>this._ejDialog.width()?(e(window).outerWidth()-this._ejDialog.outerWidth())/2:0)+(window.pageXOffset||a.scrollLeft),s=(e(window).outerHeight()>this._ejDialog.height()?(e(window).outerHeight()-this._ejDialog.outerHeight())/2:0)+(window.pageYOffset||a.scrollTop)}else{var r=e(t.isNullOrUndefined(this._target)?this.model.target:this._target);if("static"==r.css("position")){var n=r.offsetParent().offset(),o=r.offset();i=o.left-n.left,s=o.top-n.top}r.outerWidth()>this._ejDialog.width()&&(i+=(r.outerWidth()-this._ejDialog.width())/2),r.outerHeight()>this._ejDialog.height()&&(s+=(r.outerHeight()-this._ejDialog.height())/2)}this._ejDialog.css({top:s,left:i}),this._ejDialog.css("position","absolute")},_closeClick:function(e){"touchstart"==e.type&&e.preventDefault(),this.model.enabled&&(e.stopPropagation(),this.close(e))},_collapsibleClick:function(t){this.model.enabled&&(e(t.target).hasClass("e-arrowhead-up")?this._actionCollapse(t):e(t.target).hasClass("e-arrowhead-down")&&this._actionExpand(t))},_actionCollapse:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-up").addClass("e-arrowhead-down"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.expand),this._ejDialog.find("div.e-resize-handle").hide(),this._ejDialog.find(".e-widget-content").parent().slideUp("fast"),this.model.showFooter&&this._dialogFooterbar.slideUp("fast"),this._ejDialog.removeClass("e-shadow"),this._ejDialog.css("minHeight","0"),this._ejDialog.height("auto"),this._trigger("collapse",{isInteraction:!!e}),this._collapsible=!0)},_actionExpand:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._ejDialog.addClass("e-shadow"),this._ejDialog.find(".e-widget-content").parent().slideDown("fast"),this.model.showFooter&&this._dialogFooterbar.slideDown("fast"),this._maximize?(this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"})):this._ejDialog.height(this.model.height),this._ejDialog.find("div.e-resize-handle").show(),this._trigger("expand",{isInteraction:!!e}),this._collapsible=!1)},_maximizeClick:function(i){if(this.model.enabled){
var s=e(i.target),a=this._dialogMaximize;s.hasClass("e-maximize")?(this._actionMaximize(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-minus"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.minimize)),s.removeClass("e-maximize").addClass("e-restore"),this._dialogMaximize.attr("title",this.model.tooltip.restore),this._hideIcon(!0)):s.hasClass("e-restore")&&(this._actionRestore(),s.removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize.attr("title",this.model.tooltip.maximize),!t.isNullOrUndefined(a)&&e(a).hasClass("e-arrowhead-down")&&(e(a).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMaximize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}this._resetScroller()},_actionMaximize:function(){this._ejDialog.css("top","0px").css("left","0px").css("overflow","hidden").css("position",this.model.containment?"absolute":this.model.target?"absolute":"fixed"),this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"}),this._maximize=!0,this._minimize=!1;var i=this;this._dialogCollapsible&&!t.isNullOrUndefined(this._dialogCollapsible.hasClass("e-arrowhead-down"))&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._collapseValue=!0),1==this._collapseValue&&this._ejDialog.find(".e-widget-content").parent().slideDown("fast",function(){i.refresh(),i._reRenderScroller()}),this._resetScroller(),e(this.contentDiv).is(":hidden")&&this.contentDiv.show()},_actionRestore:function(){this.element.height("").width(""),this.contentDiv.height("").width(""),this._restoreDialog(),this._maximize=this._minimize=!1},_minimizeClick:function(i){if(this.model.enabled){var s=e(i.target),a=this._dialogMinimize.hasClass("e-icon")&&this._dialogMinimize;s.hasClass("e-minus")?(this._maximize&&this._setSize(),this._actionMinimize()):s.hasClass("e-restore")&&(this._actionRestore(),s.removeClass("e-restore").addClass("e-minus"),this._dialogMinimize.attr("title",this.model.tooltip.minimize),!t.isNullOrUndefined(a)&&e(a).hasClass("e-arrowhead-down")&&(e(a).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMinimize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}},_actionMinimize:function(){var t;e(window).height(),this._ejDialog.height(),this.element.height();this._ejDialog.css("top","").css("bottom","0").css("left","0").css("position",this.model.containment?"absolute":this.model.target?"absolute":"fixed"),this._ejDialog.css("minHeight","0"),this._dialogTitlebar?(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogTitlebar.find(".e-minus").removeClass("e-minus").addClass("e-restore"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.restore),this._isOpen?t=this._dialogTitlebar.outerHeight():(this._ejDialog.css({display:"block",visibility:"hidden"}),t=this._dialogTitlebar.outerHeight(),this._ejDialog.css({display:"none",visibility:""})),this._ejDialog.css("height",t+2),this._hideIcon(!1)):this._ejDialog.css("height",""),this.contentDiv.hide(),this.model.showFooter&&this._dialogFooterbar.hide(),this._maximize=!1,this._minimize=!0},_hideIcon:function(i){var s=this._dialogCollapsible?this._dialogCollapsible:null;i?(t.isNullOrUndefined(s)||e(s).parent(".e-dialog-icon").show(),this._ejDialog.find("div.e-resize-handle").show()):(t.isNullOrUndefined(s)||e(s).parent(".e-dialog-icon").hide(),this._ejDialog.find("div.e-resize-handle").hide())},_pinClick:function(t){if(this.model.enabled){var i=e(t.target);i.hasClass("e-unpin")?(this.dialogPin=!0,i.removeClass("e-unpin").addClass("e-pin"),this._dialogPin.attr("title",this.model.tooltip.unPin)):i.hasClass("e-pin")&&(this.dialogPin=!1,i.removeClass("e-pin").addClass("e-unpin"),this._dialogPin.attr("title",this.model.tooltip.pin))}},_restoreDialog:function(){this.contentDiv.show(),this.model.showFooter&&this._dialogFooterbar.show(),this._ejDialog.css({position:"absolute",bottom:""}).addClass("e-shadow"),this._setSize()._resetScroller(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-minus").parent().show(),this._dialogCollapsible&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse)))},_clickHandler:function(e){var t=this._dialogMaxZindex();parseInt(this._ejDialog.css("zIndex"))<t&&this._ejDialog.css({zIndex:t+1})},_mouseClick:function(t){t.currentTarget==this._id&&(e(t.target).hasClass("e-dialog")||e(t.target).hasClass("e-icon e-resize-handle"))&&(this._setZindex(),e(t.target).closest(".e-dialog.e-widget").focus())},_keyDown:function(t){var i;i=t.keyCode?t.keyCode:t.which?t.which:t.charCode,this.model.allowKeyboardNavigation&&this.model.enabled&&e(t.target).hasClass("e-dialog")&&e.inArray(i,this.keyConfigs)>-1&&this.model.allowDraggable&&!this.dialogPin&&(this._keyPressed(i,t.ctrlKey),t.preventDefault()),this.model.closeOnEscape&&27===i&&this.model.enabled&&(this.element.find(".e-js.e-dialog").first().is(":visible")||(this.close(t),t.preventDefault())),13===i&&this.model.enabled&&(e(t.target).hasClass("e-close")?this.close(t):(e(t.target).hasClass("e-arrowhead-up")||e(t.target).hasClass("e-arrowhead-down"))&&this._collapsibleClick(t),e(t.target).hasClass("e-maximize")||e(t.target).hasClass("e-restore")&&e(t.target).is(this._dialogMaximize)?this._maximizeClick(t):(e(t.target).hasClass("e-minus")||e(t.target).hasClass("e-restore")&&e(t.target).is(this._dialogMinimize))&&this._minimizeClick(t),(e(t.target).hasClass("e-pin")||e(t.target).hasClass("e-unpin"))&&this._pinClick(t)),9==i&&this.model.enableModal&&this._focusOnTab(t)},_focusOnTab:function(t){var i=this._ejDialog.find("a, button, :input, select, [tabindex]:not('-1')");i=e(i).find("a, button, :input, select, [tabindex]:not('')"),t.shiftKey?i[i.index(t.target)-1]||(t.preventDefault(),i.last().focus()):i[i.index(t.target)+1]||(t.preventDefault(),i[0].focus())},_keyPressed:function(e,t){switch(this._keyNavigation=!0,e){case 40:t?this._resizing("height",this._ejDialog.outerHeight()+3):this.option("position",{X:this._ejDialog.position().left,Y:this._ejDialog.position().top+3});break;case 39:t?this._resizing("width",this._ejDialog.outerWidth()+3):this.option("position",{X:this._ejDialog.position().left+3,Y:this._ejDialog.position().top});break;case 38:t?this._resizing("height",this._ejDialog.outerHeight()-3):this.option("position",{X:0==this._ejDialog.position().left?0:this._ejDialog.position().left,Y:this._ejDialog.position().top>3?this._ejDialog.position().top-3:0});break;case 37:t?this._resizing("width",this._ejDialog.outerWidth()-3):this.option("position",{X:this._ejDialog.position().left>3?this._ejDialog.position().left-3:0,Y:0==this._ejDialog.position().top?0:this._ejDialog.position().top})}},_resizing:function(e,t){this.model.enableResize&&this.option(e,t)},_sizeInPercent:function(){if(!this._enableWindowResize())return this;var e=this._getParentObj();return"%"==this._sizeType.width?this._widthPercent=parseFloat(this.model.width):this._widthPercent=this._convertPixelToPercentage(e.outerWidth(),this._ejDialog.outerWidth()),"%"==this._sizeType.height?this._heightPercent=parseFloat(this.model.height):this._heightPercent=this._convertPixelToPercentage(e.outerHeight(),this._ejDialog.outerHeight()),this._widthPercent>=100&&(this._widthPercent=100,this._ejDialog.outerWidth(e.outerWidth()),this.model.width=this._ejDialog.width()),this._heightPercent>=100&&(this._heightPercent=100,this._ejDialog.outerHeight(e.outerHeight()),this.model.height=this._ejDialog.height()),this},_getParentObj:function(){return e(t.isNullOrUndefined(this.model.containment)?t.isNullOrUndefined(this.model.target)?document:this.model.target:this.model.containment)},_convertPercentageToPixel:function(e,t){return Math.round(t*e/100)},_convertPixelToPercentage:function(e,t){return Math.round(t/e*100)},_reSizeHandler:function(){var t;if(this._maximize)return void this._resetScroller();(""==this.model.position.X||""==this.model.position.Y&&!this._minimize)&&this._centerPosition(),t=this._getParentObj(),this._change=!1,this._windowSize.outerWidth!=e(window).outerWidth()?"%"==this._sizeType.width?this._percentageWidthDimension(t):this._pixelsWidthDimension(t):this._windowSize.outerHeight!=e(window).outerHeight()&&("%"==this._sizeType.height?this._percentageHeightDimension(t):this._pixelsHeightDimension(t)),this._change&&this._resizeContainer(t),this._windowSize={outerWidth:e(window).outerWidth(),outerHeight:e(window).outerHeight()},this._centerPosition()},_setDimension:function(){t.isNullOrUndefined(this.model.maxWidth)?t.isNullOrUndefined(this._sizeType.width)?this._maxWidth=+this.model.width:"px"!=this._sizeType.width&&"auto"!=this._sizeType.width||(this._maxWidth=this.model.width):this._maxWidth=this.model.maxWidth,t.isNullOrUndefined(this.model.maxHeight)?t.isNullOrUndefined(this._sizeType.height)?this._maxHeight=+this.model.height:"px"!=this._sizeType.height&&"auto"!=this._sizeType.height||(this._maxHeight=this.model.height):this._maxHeight=this.model.maxHeight},_percentageWidthDimension:function(e){this._ejDialog.outerWidth(this._convertPercentageToPixel(e.outerWidth(),this._widthPercent)),this._change=!0},_percentageHeightDimension:function(e){this._ejDialog.outerHeight(this._convertPercentageToPixel(e.outerHeight(),this._heightPercent)),this._change=!0},_pixelsWidthDimension:function(t){e(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t),e(t).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(t),parseInt(this._ejDialog.css("width"))<parseInt(this._maxWidth)&&(parseInt(this._maxWidth)<e(t).outerWidth()?this._ejDialog.outerWidth(parseInt(this._maxWidth)):this._ejDialog.outerWidth(t.outerWidth()),this._change=!0)},_pixelsHeightDimension:function(t){e(t).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(t),e(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t),parseInt(this._ejDialog.css("height"))<parseInt(this._maxHeight)&&(parseInt(this._maxHeight)<e(t).outerHeight()?this._ejDialog.outerWidth(parseInt(this._maxHeight)):this._ejDialog.outerHeight(t.outerHeight()),this._change=!0)},_setWidth:function(e){this._ejDialog.outerWidth(e.outerWidth()),this._change=!0},_setHeight:function(e){this._ejDialog.outerHeight(e.outerHeight()),this._change=!0},_resizeContainer:function(i){this.contentDiv.width(this._ejDialog.width()),this.element.outerWidth(this.contentDiv.width());var s=this._ejDialog.height()-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0);this.contentDiv.height(t.isNullOrUndefined(this.contentDiv)?s-1:"0px"==this.contentDiv.css("border-width")),this.element.outerHeight(t.isNullOrUndefined(this.contentDiv)?s-1:"0px"==this.contentDiv.css("border-width")),this.scroller=this.contentDiv.ejScroller({width:!t.isNullOrUndefined(this.contentDiv)&&("0px"==this.contentDiv.css("border-width")?this._ejDialog.width():this._ejDialog.width()-2),height:!t.isNullOrUndefined(this.contentDiv)&&("0px"==this.contentDiv.css("border-width")?this.element.outerHeight():this.element.outerHeight()-2),rtl:this.model.rtl,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),""==this.model.position.X||""==this.model.position.Y&&!this._minimize||this._positionChanged?this._centerPosition():this._ejDialog.css("height",this._dialogTitlebar.outerHeight()),this._updateCaptionWidth(),this._change=!1},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_enableWindowResize:function(){return!!(this.model.isResponsive||isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&"auto"!=this.model.height)},_wireResizing:function(){e(window)[this._enableWindowResize()?"on":"off"]("resize",e.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this._ejDialog,"keydown",this._keyDown),this._on(this._ejDialog,"click",this._mouseClick),this._wireResizing()},refresh:function(){this._resetScroller()},open:function(){if(this._isOpen)return!0;if(1==this._trigger("beforeOpen"))return!1;this.element.css("display","block"),this._setZindex(),this._minimize||this._maximize||this._init||this._dialogPosition();var i,s=this,a={};if(this._ejDialog.show(),this.model.enableAnimation)if(this._ejDialog.css({opacity:0}),"slide"==this.model.animation.show.effect){var r=this._ejDialog.css("left");this._ejDialog.css({left:-this._ejDialog.width()}),a={left:r,opacity:1}}else a={opacity:1};if(this._ejDialog.animate(a,this.model.enableAnimation?Number(this.model.animation.show.duration):0,function(){s.model&&("none"==s._ejDialog.css("display")&&s._ejDialog.show(),s._ejDialog.eq(0).focus(),s._ejDialog.css({opacity:""}),s.contentDiv.find("a:visible:enabled, button:visible:enabled, :input:visible:enabled, select:visible:enabled, .e-input").first().focus(),s._trigger("open"),s._updateCaptionWidth(),s.model.enableModal&&!s.model.backgroundScroll&&(s._ejDialog.height()>e(window).height()&&s._ejDialog.css("height",e(window).height()),s.model.height=e(window).height(),s._overLay.css("position","fixed"),s.scroller.refresh(!0),s.refresh()),(s.model.maxHeight||s.model.maxWidth)&&(i=s._ejDialog.outerHeight(!0)-(s._dialogTitlebar?s._dialogTitlebar.outerHeight(!0):0),"auto"!=s.model.height&&"100%"!=s.model.height||(i=s.model.height),s._updateScroller(t.isNullOrUndefined(this.contentDiv)?i-2:"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?s._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width")),s.scroller.refresh()))}),1==this.model.enableModal&&this._createOverlay(),this._isOpen=!0,this.element.find("> .e-draggable.e-titlebar")){var n=e("#"+this.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable");n&&n.option("cursorAt",this.element.offset())}return this},close:function(t){if(!this._isOpen||!this.model.enabled)return!0;var i=!!t;if(1==this._trigger("beforeClose",{event:t,isInteraction:i}))return!1;this._isOpen=!1;var s=this,a={};return this.model.enableAnimation&&(a="slide"==this.model.animation.hide.effect?{left:-this._ejDialog.width(),opacity:0}:{opacity:0}),this._ejDialog.animate(a,this.model.enableAnimation?Number(this.model.animation.hide.duration):0,function(){s._trigger("close",{event:t,isInteraction:i}),s._ejDialog.hide()}),this.model.enableModal&&(this._overLay&&this._overLay.remove(),this.model.backgroundScroll||e("body").removeClass("e-dialog-modal")),this},isOpened:function(){return this.isOpen()},isOpen:function(){return this._isOpen},setTitle:function(e){return this.model.title=e,this._titleText.text(e),this._updateCaptionWidth(),this},setContent:function(e){return!!this.model.enabled&&(this.element.html(e),this._resetScroller(),this)},focus:function(){return this._setZindex(),this.element.focus(),this},minimize:function(){if(this.model.showHeader)return this._actionMinimize(),e(this.wrapper.find(".e-minus")[0]).parent().hide(),this},maximize:function(){if(this.model.showHeader)return this._actionMaximize(),e(this.wrapper.find(".e-maximize")[0]).removeClass("e-maximize").addClass("e-restore"),e(this.wrapper.find(".e-restore")[1]).removeClass("e-restore").addClass("e-minus"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.restore),this._dialogTitlebar&&this._dialogTitlebar.find(".e-minus").parent().show(),this._hideIcon(!0),this},restore:function(){if(this.model.showHeader){var t=this._minimize;return this._actionRestore(),e(this.wrapper.find(".e-restore")[0]).removeClass("e-restore").addClass(t?"e-minus":"e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._hideIcon(!0),this}},pin:function(){if(this.model.showHeader)return this.dialogPin=!0,e(this.wrapper.find(".e-unpin")[0]).removeClass("e-unpin").addClass("e-pin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.unPin),this},unpin:function(){if(this.model.showHeader)return this.dialogPin=!1,e(this.wrapper.find(".e-pin")[0]).removeClass("e-pin").addClass("e-unpin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.pin),this},collapse:function(){if(this.model.showHeader)return this._actionCollapse(),this._collapseValue=!0,this},expand:function(){if(this.model.showHeader)return this._actionExpand(),this}}),t.Dialog.Locale=t.Dialog.Locale||{},t.Dialog.Locale.default=t.Dialog.Locale["en-US"]={tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},title:"",closeIconTooltip:"close"}}(jQuery,Syncfusion),function(e,t,i){t.widget("ejTimePicker","ej.TimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_rootCSS:"e-timepicker",_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},_requiresID:!0,defaults:{cssClass:"",timeFormat:"",value:null,enableAnimation:!0,locale:"en-US",htmlAttributes:{},readOnly:!1,showPopupButton:!0,enableStrictMode:!1,interval:30,hourInterval:1,minutesInterval:1,secondsInterval:1,height:"",width:"",minTime:"12:00 AM",maxTime:"11:59 PM",showRoundedCorner:!1,enableRTL:!1,popupHeight:"191px",popupWidth:"auto",enabled:!0,enablePersistence:!1,disableTimeRanges:null,validationRules:null,validationMessages:null,focusIn:null,focusOut:null,beforeChange:null,change:null,select:null,create:null,destroy:null,beforeOpen:null,beforeClose:null,open:null,close:null,watermarkText:"select a time"},dataTypes:{timeFormat:"string",minTime:"string",maxTime:"string",readOnly:"boolean",interval:"number",showPopupButton:"boolean",locale:"string",hourInterval:"number",minutesInterval:"number",secondsInterval:"number",enabled:"boolean",enablePersistence:"boolean",enableAnimation:"boolean",enableStrictMode:"boolean",disableTimeRanges:"data",htmlAttributes:"data",validationRules:"data",validationMessages:"data",watermarkText:"string"},observables:["value"],enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.element.prop("disabled",!1),this.model.enabled=!0,this.wrapper.removeClass("e-disable"),this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.showPopupButton&&(this.timeIcon.removeClass("e-disable").attr("aria-disabled",!1),this.popupList&&this.popupList.removeClass("e-disable").attr("aria-disabled",!1)),this._isIE8&&this.timeIcon.children().removeClass("e-disable"))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.attr("disabled","disabled"),this.wrapper.addClass("e-disable"),this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.showPopupButton&&(this.timeIcon.addClass("e-disable").attr("aria-disabled",!0),this.popupList&&this.popupList.addClass("e-disable").attr("aria-disabled",!0)),this._isIE8&&this.timeIcon.children().addClass("e-disable"),this._hideResult())},getValue:function(){return this.element.val()},setCurrentTime:function(){this.model.readOnly||this._setMask()},setValue:function(e){var i=this.model.value;if(this.model.value=t.format(this._createObject(e,!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(e,!0)){var s=this._isValid(this.model.value)?this._localizeTime(this.model.value):this.model.value;this.element.val(s)}i!=this.model.value&&this._raiseChangeEvent(i,!0),this._checkErrorClass()},show:function(){!this.showDropdown&&!this._getInternalEvents&&this._showResult()},hide:function(){this.showDropdown&&this._hideResult()},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_timeFormat:function(e){e||(e=t.preferredCulture(this.model.locale).calendars.standard.patterns.t);var i=this._validateTimeFormat(e);if(i)if(this.model.timeFormat=i,this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),this.model.value)this._setModelOption=!0,this.model.value=this._localizeTime(this.model.value),this.element.val(this.model.value);else{this._setModelOption=!1;var s=this._localizeTime(this.element.val());s&&this._checkMinMax(s)&&(this.model.value=s,this.element.val(s))}return i},_getTimeFormat:function(){this._prevTimeFormat&&(this.model.timeFormat=t.preferredCulture(this.model.locale).calendar.patterns.t||"h:mm tt"),this.seperator=this._getSeperator()},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popupList&&this.popupList.removeClass(this.model.cssClass).addClass(e)},_localize:function(e){var i=this._createObject(this.model.value,!0);this.model.locale=e,this._getTimeFormat(),this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),i?(this.model.value=this._localizeTime(i),this.element.val(this.model.value)):(i=this._localizeTime(this.element.val()))&&this._checkMinMax(i)&&(this.model.value=i,this.element.val(i)),this._getAmPm()},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_setLocalize:function(e){var e=t.preferredCulture(e);e&&(this.model.locale="en"==e.name?"en-US":e.name,t.isNullOrUndefined(this._options)||!t.isNullOrUndefined(this._options.timeFormat)&&this._options.timeFormat||(this.model.timeFormat=t.preferredCulture(this.model.locale).calendars.standard.patterns.t),this._prevTimeFormat=!(!t.isNullOrUndefined(this._options.timeFormat)&&""!=this._options.timeFormat))},_updateInput:function(){if(!t.isNullOrUndefined(this._options)){var e=this._localizeTime(this._options.value);t.isNullOrUndefined(e)||"string"==typeof e&&this.model.enableStrictMode&&!this.model.value&&(this.element.val(this._options.value),this.isValidState=""==this.element.val(),this._checkErrorClass())}},_createMinMaxObj:function(){this._minTimeObj=this._createObject(this.model.minTime),this._minTimeObj||(this.model.minTime=t.format(this._createObject((new Date).setHours(0,0,0,0)),this.model.timeFormat,this.model.locale)),this._maxTimeObj=this._createObject(this.model.maxTime),this._maxTimeObj||(this.model.maxTime=t.format(this._createObject((new Date).setHours(23,59,59,59)),this.model.timeFormat,this.model.locale))},_setMinMax:function(){var e=(new Date).setHours(0,0,0,0),i=(new Date).setHours(23,59,59,59);!t.isNullOrUndefined(this._options)&&t.isNullOrUndefined(this._options.minTime)&&(this.model.minTime=t.format(this._createObject(e),this.model.timeFormat,this.model.locale)),!t.isNullOrUndefined(this._options)&&t.isNullOrUndefined(this._options.maxTime)&&(this.model.maxTime=t.format(this._createObject(i),this.model.timeFormat,this.model.locale)),this._createMinMaxObj()},_init:function(e){if(this._options=e,this._cloneElement=this.element.clone(),this._ISORegex(),this._isSupport=void 0!=document.createElement("input").placeholder,!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._initialize(),this._render(),this._wireEvents(),e&&void 0!=e.value&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()}),this._updateInput(),this._updateTextbox(),null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation())},_updateTextbox:function(){if(this._options.disableTimeRanges){for(var e=!0,t=0;t<this._options.disableTimeRanges.length;t++)if((this.model.minTime>=this._options.disableTimeRanges[t].startTime||this.model.minTime<=this._options.disableTimeRanges[t].endTime)&&this._options.disableTimeRanges[t].startTime==this.model.minTime){e=!1;break}(void 0===this._options||void 0===this._options.value&&!this.model.value&&e)&&this._setTime(this._localizeTime(this.model.minTime))}else(void 0===this._options||void 0===this._options.value&&!this.model.value)&&this._setTime(this._localizeTime(this.model.minTime))},_setMinMaxTime:function(i,s){!t.isNullOrUndefined(s.minTime)&&e.trim(s.minTime)&&this._isValid(s.minTime)&&(this.model.minTime=s.minTime,this._minTimeObj=this._createObject(this.model.minTime),this._validateTimes()),!t.isNullOrUndefined(s.maxTime)&&e.trim(s.maxTime)&&this._isValid(s.maxTime)&&(this.model.maxTime=s.maxTime,this._maxTimeObj=this._createObject(this.model.maxTime),this._validateTimes()),this._validateMinMax(),this._createMinMaxObj(),t.isNullOrUndefined(s.minTime)||(s.minTime=this.model.minTime),t.isNullOrUndefined(s.maxTime)||(s.maxTime=this.model.maxTime),this._checkMinMax(this.model.value)||(this.model.enableStrictMode?(this.isValidState=!1,this.model.value=null):(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime))),i!==this.model.value&&this._isValid(this.model.value,!0)&&this.element.val(this.model.value)},_setModel:function(e){var i=!1,s=this.model.value;for(var a in e)switch("height"!=a&&"width"!=a&&"htmlAttributes"!=a&&"watermarkText"!=a&&"enabled"!=a&&"validationRules"!=a&&"validationMessages"!=a&&t.isNullOrUndefined(this.popupList)&&this._renderDropdown(),a){case"timeFormat":var r=this._createObject(this.model.value);this._preTimeformat=this.model.timeFormat;var n=this._timeFormat(e[a]);e[a]=this.model.timeFormat,n&&(this.seperator=this._getSeperator());var o=this._createObject(this.model.value);i=+r!=+o;break;case"locale":var r=this._createObject(this.model.value);this._localize(e[a]),this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale);var o=this._createObject(this.model.value);i=+r!=+o;break;case"interval":this.model.interval=e[a];break;case"cssClass":this._changeSkin(e[a]);break;case"showRoundedCorner":this._setRoundedCorner(e[a]);break;case"enableRTL":this._setRtl(e[a]);break;case"height":this._setHeight(e[a]);break;case"width":this.wrapper.width(e[a]),this._setListWidth();break;case"value":if(t.isPlainObject(e[a])&&(e[a]=null),this.model.value=t.format(this._createObject(e[a],!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(e[a],!0)){var l=this._isValid(e[a])?this._localizeTime(e[a]):e[a];this.element.val(l)}e[a]=this.model.value,i=!0;break;case"enableStrictMode":this.model.enableStrictMode=e[a];break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessages=null),this.model.validationRules=e[a],null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation());break;case"validationMessages":this.model.validationMessages=e[a],null!=this.model.validationRules&&null!=this.model.validationMessages&&(this._initTimeValidator(),this._setTimeValidation());break;case"popupHeight":this.model.popupHeight=e[a],this._setListHeight();break;case"popupWidth":this.model.popupWidth=e[a],this._setListWidth();break;case"enabled":e[a]?this.enable():this.disable();break;case"htmlAttributes":this._addAttr(e[a]);break;case"disableTimeRanges":this.model.disableTimeRanges=e[a],this._initStartEnd(),this.model.value=t.format(this._createObject(this.element.val(),!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(this.element.val(),!0)&&this.element.val(this.element.val()),i=!0;break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options[a]=this.model.watermarkText=e[a],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark()}t.isNullOrUndefined(e.minTime)&&t.isNullOrUndefined(e.maxTime)||(this._setMinMaxTime(s,e),i=!0),t.isNullOrUndefined(e.showPopupButton)?!this.model.showPopupButton||!n&&t.isNullOrUndefined(e.minTime)&&t.isNullOrUndefined(e.maxTime)&&t.isNullOrUndefined(e.locale)&&t.isNullOrUndefined(e.interval)&&t.isNullOrUndefined(e.disableTimeRanges)||this._reRenderDropdown():this._showButton(e[a]),i&&(this._raiseChangeEvent(s,!0),e.value=this.model.value),this._checkErrorClass()},_destroy:function(){this.element.insertAfter(this.wrapper),this.wrapper.remove(),this.element.removeClass("e-input").removeAttr("ondragstart draggable aria-atomic aria-live aria-readonly").val(this.element.attr("value")),this._cloneElement.attr("name")||this.element.removeAttr("name"),this.popupList&&this.popupList.remove()},_initialize:function(){this.target=this.element[0],this.timeIcon=null,this._disabledItems=[],this.popupList=null,this.focused=!1,this.start=0,this.end=0,this.min=null,this.max=null,this.incomplete=!1,this.downPosition=0,this._setLocalize(this.model.locale),this._setMinMax(),this._getAmPm(),this.showDropdown=!1,this._activeItem=0,this.isValidState=!0,this._manualFocus=!1,this._isIE7=this._checkIE7(),this._initStartEnd(),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._getInternalEvents=!1,this._dateTimeInternal=!1,this.model.timeFormat?this.seperator=this._getSeperator():this._getTimeFormat()},_render:function(){this._renderWrapper(),this._setDimentions(),this._renderTimeIcon(),this._validateTimes(),this._createMinMaxObj(),this._addAttr(this.model.htmlAttributes),this._checkProperties(),this._enableMask(),this._checkErrorClass(),this.element.attr({
"aria-atomic":"true","aria-live":"assertive","aria-readonly":this.model.readOnly,value:this.model.value}),t.isNullOrUndefined(this.model.value)?this.wrapper.addClass("e-valid"):this.wrapper.removeClass("e-valid")},_renderWrapper:function(){if(this.element.addClass("e-input").attr({tabindex:"0",role:"combobox","aria-expanded":"false"}),this.wrapper=t.buildTag("span.e-timewidget e-widget "+this.model.cssClass+"#"+this.target.id+"_timewidget").insertAfter(this.element),this.wrapper.attr("style",this.element.attr("style")),this.element.removeAttr("style"),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),!this._isSupport){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}},_addAttr:function(i){var s=this;e.map(i,function(e,i){var a=i.toLowerCase();"class"==a?s.wrapper.addClass(e):"disabled"==a&&"disabled"==e?s.disable():"readOnly"==a&&"readOnly"==e?s.model.readOnly=!0:"style"==a?s.wrapper.attr(i,e):"id"==a?(s.wrapper.attr(i,e+"_wrapper"),s.element.attr(i,e)):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_initTimeValidator:function(){!this.element.closest("form").data("validator")&&this.element.closest("form").validate()},_setTimeValidation:function(){this.element.rules("add",this.model.validationRules);var i=this.element.closest("form").data("validator");i=i||this.element.closest("form").validate();var s=this.element.attr("name");i.settings.messages[s]={};for(var a in this.model.validationRules){var r=null;if(!t.isNullOrUndefined(this.model.validationRules[a])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[a])){i.settings.messages[s][a]=e.validator.messages[a];for(var n in this.model.validationMessages)a==n&&(r=this.model.validationMessages[a])}else r=this.model.validationRules.messages[a];i.settings.messages[s][a]=null!=r?r:e.validator.messages[a]}}},_renderTimeIcon:function(){if(this.model.showPopupButton){this.timeIcon=t.buildTag("span.e-select").attr({role:"button","aria-label":"select"});var e=t.buildTag("span.e-icon e-clock").attr("role","presentation");this._isIE8&&(this.timeIcon.attr("unselectable","on"),e.attr("unselectable","on")),this.timeIcon.append(e),this.container.append(this.timeIcon).addClass("e-padding"),this._on(this.timeIcon,"mousedown",this._timeIconClick)}},_elementClick:function(e){this.showDropdown||this._showResult()},_renderDropdown:function(){var i=e("#"+this.element[0].id+"_popup").get(0);if(i&&e(i).remove(),this.popupList)return!1;this.popupList=t.buildTag("div.e-time-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_popup","",{},{tabindex:0,role:"listbox"}),t.isTouchDevice()||this.popupList.addClass("e-ntouch"),this.popup=this.popupList,this.ul=t.buildTag("ul.e-ul"),this._isIE8&&this.ul.attr("unselectable","on");var s=t.buildTag("div").append(this.ul);e("body").append(this.popupList.append(s)),this._renderLiTags(),this._setListHeight(),this._setListWidth(),this.popupList.ejScroller({height:this.popupList.height(),width:0,scrollerSize:20}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.css("display","none"),this._listSize=this.ul.find("li").length},_renderLiTags:function(){this._disabledItems=[];var i,s,a,r=6e4*this.model.interval,n=!t.isNullOrUndefined(this.model.disableTimeRanges)&&this.model.disableTimeRanges.length>0;i=this._minTimeObj,s=this._maxTimeObj;for(var o=0;this._compareTime(s,i,!0);){a=this._localizeTime(i);var l=e(document.createElement("li"));l[0].appendChild(document.createTextNode(a)),this._isIE8&&l.attr("unselectable","on"),n&&(this._ensureTimeRange(a)?(l.addClass("e-disable"),this._disabledItems.push(o)):l.removeClass("e-disable")),this.ul[0].appendChild(l[0]),i=new Date(i).getTime()+r,o++}var d=this.ul.find("li");t.isTouchDevice()||(this._on(d,"mouseenter",e.proxy(this._OnMouseEnter,this)),this._on(d,"mouseleave",e.proxy(this._OnMouseLeave,this))),this._on(d,"click",e.proxy(this._OnMouseClick,this)),!this.model.showPopupButton&&t.isNullOrUndefined(this.popupList)||this.ul.find("li").attr({tabindex:-1,"aria-selected":!1,role:"option"})},_ensureTimeRange:function(e){if(!t.isNullOrUndefined(this.model.disableTimeRanges))for(var i=this._makeDateTimeObj(e),s=0;s<this.model.disableTimeRanges.length;s++)if(+i>=+this._makeDateTimeObj(this.model.disableTimeRanges[s].startTime)&&+i<=+this._makeDateTimeObj(this.model.disableTimeRanges[s].endTime))return!0;return!1},_initStartEnd:function(){if(this._startTime=[],this._endTime=[],!t.isNullOrUndefined(this.model.disableTimeRanges))for(var e=0;e<this.model.disableTimeRanges.length;e++)this._startTime[e]=this._makeDateTimeObj(this.model.disableTimeRanges[e].startTime),this._endTime[e]=this._makeDateTimeObj(this.model.disableTimeRanges[e].endTime)},_makeDateTimeObj:function(e){if("string"==typeof e){var i=t.preferredCulture(this.model.locale).calendar.patterns.d,s=t.format(new Date("1/1/2000"),i,this.model.locale),a=t.parseDate(s+" "+e,i+" "+this.model.timeFormat,this.model.locale);if(!a){var r=new Date(e);if(!isNaN(Date.parse(r))&&!t.isNullOrUndefined(e))return this._setEmptyDate(e);a=new Date("1/1/2000 "+e)}return a}return e instanceof Date?this._setEmptyDate(e):null},_reRenderDropdown:function(){this.ul.empty(),this._renderLiTags(),this._refreshScroller(),this._changeActiveEle()},_refreshScroller:function(){var t="none"==this.popupList.css("display");this.popupList.css("height","auto"),this.popupList.find(".e-content, .e-vscroll").removeAttr("style"),this.popupList.find(".e-vscroll div").removeAttr("style"),t&&this.popupList.css("display","block"),this.scrollerObj.model.height=this.popupList.height(),this.scrollerObj.model.scrollTop=0,this.scrollerObj.refresh(),this._isIE8&&(e("#"+this.scrollerObj._id).children(".e-vscroll").children().attr("unselectable","on"),e("#"+this.scrollerObj._id).find(".e-vhandle").attr("unselectable","on")),t&&this.popupList.css("display","none")},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_setListWidth:function(){if(this.popupList){var e,t=this.model.popupWidth;e="string"==typeof t&&-1!=t.indexOf("%")||"string"==typeof t?parseInt(t)>0?t:this.model.popupWidth="auto":t>0?t:this.model.popupWidth="auto",e&&"auto"!=e?this.popupList.css({width:e}):this.popupList.css({width:this.wrapper.width()})}this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_setListHeight:function(){this.popupList&&this.popupList.css({"max-height":this.model.popupHeight||"191px"}),this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_updateScrollTop:function(){this.scrollerObj.setModel({scrollTop:this._calcScrollTop()})},_refreshPopup:function(){"auto"==this.model.popupWidth&&this.popupList.css({width:this.wrapper.width()}),this._setListPosition(),this._refreshScroller()},_setListPosition:function(){var t,i=this.wrapper,s=this._getOffset(i),a=e(document).scrollTop()+e(window).height()-(s.top+e(i).outerHeight()),r=s.top-e(document).scrollTop(),n=this.popupList.outerHeight(),o=this.popupList.outerWidth(),l=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),u=(n<a||n>r?s.top+d+3:s.top-n-3)-h;t=e(document).scrollLeft()+e(window).width()-l,(this.model.enableRTL||o>t&&o<l+i.outerWidth())&&(l-=this.popupList.outerWidth()-i.outerWidth()),this.popupList.css({left:l+"px",top:u+"px","z-index":c})},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popupList)},_enableMask:function(){this.model.minTime&&this._compareTime(this.model.minTime,this.model.value)||this.model.maxTime&&this._compareTime(this.model.value,this.model.maxTime)?this.isValidState=!1:this.isValidState=!0,this._setTime(this.model.value),t.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid"),this._getInternalEvents&&!this.isValidState&&this._trigger("outOfRange"),this._changeActiveEle(),this._preVal=this.element.val()},_setTime:function(e){var t=this._localizeTime(e);this.element.val(t),this.model.enableStrictMode?this.model.value=this._compareTime(this.model.value,this.model.minTime,!0)&&this._compareTime(this.model.maxTime,this.model.value,!0)?t:null:this.model.value=t,this._setWaterMark()},_timeFromISO:function(e){var t,i=this._extISORegex.exec(e)||this._basicISORegex.exec(e),s="",a="",r="";if(i){for(var n=0;n<this._dates.length;n++)if(this._dates[n][1].exec(i[1])){s=this._dates[n][0];break}if(i[3])for(var o=0;o<this._times.length;o++)if(this._times[o][1].exec(i[3])){a=(i[2]||" ")+this._times[o][0];break}i[4]&&this._zeroRegex.exec(i[4])&&(r="Z"),t=s+a+r;for(var l,d,h=t.match(this._tokens),c=[],u=0;u<h.length;u++){var p=h[u];d=this._checkLiteral(h[u]);var m=this._numberRegex[d?h[u].toLowerCase():p.length]||new RegExp("^\\d{1,"+p.length+"}");l=e.match(m),l&&(e.substr(0,e.indexOf(l))>=0&&!d&&(h[u].indexOf("M")>=0?c.push(parseInt(l[0])-1):c.push(parseInt(l[0]))),e=e.slice(e.indexOf(l[0])+l[0].length))}return"Z"==i[4]?new Date(Date.UTC.apply(null,c)):new Date(c[0],c[1],c[2],c[3],c[4],c[5])}return new Date(e+"")},_checkLiteral:function(e){var t=e.toLowerCase();return"t"==t||"z"==t||":"==t||"-"==t},_setMask:function(){this.model.value=new Date,this._enableMask()},_validateTimes:function(){var e=this._validateTimeFormat(this.model.timeFormat);this.model.timeFormat=e||"h:mm tt",this._isValid(this.model.minTime)||(this.model.minTime="12:00 AM"),this._isValid(this.model.maxTime)||(this.model.maxTime="11:59 PM"),this._isValid(this.model.value,!0)||(this.model.value=null),this._checkMinMax(this.model.value)||this.model.enableStrictMode||(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)),this._validateMinMax()},_ensureValue:function(){!this._checkMinMax(this.model.value)&&this._isValid(this.model.value,!0)&&(this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)))},_validateMinMax:function(){this.model.minTime&&this.model.maxTime&&this._compareTime(this.model.minTime,this.model.maxTime)&&(this.model.minTime=this.model.maxTime)},_checkProperties:function(){this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable()),this._addProperty(),this._checkAttributes()},_addProperty:function(){this._setRtl(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popupList&&this.popupList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popupList&&this.popupList.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popupList&&this.popupList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popupList&&this.popupList.removeClass("e-corner"))},_showButton:function(t){this.model.showPopupButton=t,t?(this.container.addClass("e-padding"),this._renderTimeIcon(),this._renderDropdown(),this._addProperty()):(this.container.removeClass("e-padding"),this.timeIcon.remove(),this.popupList.remove(),this.timeIcon=this.popupList=null,e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)))},_checkAttributes:function(){this.element.attr("name")||this.element.attr({name:this.element[0].id}),"ondragstart"in document.createElement("input")&&this.element.attr({ondragstart:"return false"}),"draggable"in document.createElement("input")&&this.element.attr({draggable:"false"})},_getAmPm:function(){var t=new Date;t.setHours(0),this.ttAM=e.trim(this._localizeMeridian(t)),t.setHours(23),this.ttPM=e.trim(this._localizeMeridian(t))},_setDimentions:function(){this.model.height||(this.model.height=this.element.attr("height")),this.model.width||(this.model.width=this.element.attr("width")),this._setHeight(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_setHeight:function(e){e&&this.wrapper.height(e),this._isIE7&&this.element.height(this.container.height())},_validateTimeFormat:function(t){var i=t.split(" "),s="";return 1==i.length||2==i.length?(e(i).each(function(t,i){s+=e.trim(i)+" "}),e.trim(s)):null},_getSeperator:function(){for(var e=this._getElePlace(),t=this._formatparts[e.time],i=new RegExp("^[a-zA-Z0-9]+$"),s=0;s<t.length;s++)if(!i.test(t.charAt(s)))return t.charAt(s)},_checkInComplete:function(){var e=this._getCaretSelection(),t=this._getStartEnd(e),i="00",s=this._getSelectedValue(t),a=this._getCategory(t);e.end-e.start==this.element.val().length&&this._checkAll(),a&&"tt"!=a&&(this._findCategoryPosition(a),"__"==s?("h"!=a&&"hh"!=a||(i="12"),this._changeToDefault(i)):1!=a.length&&1==s.length&&(s=this._changeWhole(s),this.element.val(this._replaceAt(this.target.value,this.start,this.end,s))))},_checkAll:function(){var e,t=this._getElePlace(),i=this._formatparts[t.time].split(this.seperator);for(e=0;e<i.length;e++){this._findCategoryPosition(i[e]);var s=this._getSelectedValue({start:this.start,end:this.end});1!=i[e].length&&1==s.length&&(s=this._changeWhole(s),this.element.val(this._replaceAt(this.element.val(),this.start,this.end,s)))}},_changeToDefault:function(e){this.incomplete=!0;var t=this.element[0].value;this.element[0].value=this._replaceAt(this.target.value,this.start,this.end,e);var i=this._checkExceedRange(this.target.value);i&&this._setTime(this.model[i]),this._setSelection(this.start,this.end),this._raiseChangeEvent(t)},_setSelection:function(e,t){var i=this.element[0];i.setSelectionRange?i.setSelectionRange(e,t):i.createTextRange&&(i=i.createTextRange(),i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())},_getSelectedValue:function(e){return this.target.value.substring(e.start,e.end)},_getMinMax:function(e,t){"hh"==e||"h"==e?(this.min=1,this.max=11,t&&(this.max=12)):"HH"==e||"H"==e?(this.min=0,this.max=23):"mm"!=e&&"m"!=e&&"ss"!=e&&"s"!=e||(this.min=0,this.max=59)},_focusElement:function(){this._manualFocus=!0,this.element.focus()},_targetFocus:function(t){this._clearRange(),t.preventDefault(),this.focused=!0,this.element.on("mousewheel DOMMouseScroll",e.proxy(this._mouseWheel,this)),this.wrapper.addClass("e-focus").removeClass("e-error").attr("aria-invalid","false"),this._getExactPostions(),this._manualFocus||(this._findCategoryPosition(this._getLeast(!1)),this._setSelection(this.start,this.end)),this._manualFocus=!1,this._prevTimeVal=this.element.val(),this._raiseEvent("focusIn"),this.wrapper.addClass("e-valid"),this.model.showPopupButton||this._showResult(),this.model.showPopupButton||this._on(this.element,"click",this._elementClick)},_targetBlur:function(){this.focused=!1,this.element.off("mousewheel DOMMouseScroll",e.proxy(this._mouseWheel,this)),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),this.wrapper.removeClass("e-focus"),this.model.enableStrictMode||this.target.value.indexOf("_")>-1&&this.element.val(""),!this._checkMinMax(this.target.value)&&this._isValid(this.target.value,!0)?this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this._createObject(this.target.value),this.model.minTime,!0)&&this.element.val(this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this._createObject(this.target.value),!0)&&this.element.val(this.model.maxTime),this._isValid(this.model.value,!0)||this.element.val(null),this.isValidState=!0,t.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid")):this.isValidState=!0,this._ensureValue(),this._raiseChangeEvent(),this._checkErrorClass(),this._raiseEvent("focusOut"),this.model.enableStrictMode||this._checkInComplete(),t.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid")},_clearRange:function(){var e=this.element[0];isNaN(e.selectionStart)||(e.selectionStart=0,e.selectionEnd=0)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true")},_getExactPostions:function(){var e=this.model.timeFormat;this.model.timeFormat.split(" ");if(this._formatparts=[],this._valueparts=[],this._amPMPosition=e.match("([t][t]+)")?e.match("([t][t]+)").index:null,void 0==this._amPMPosition)this._formatparts=this.model.timeFormat.split(" "),this._valueparts=this.element.val().split(" "),this._noTT=!0;else if(this._amPMPosition==this.model.timeFormat.length-2?(this._ttAtEnd=!0,this._isSpace=" "==this.model.timeFormat[this.model.timeFormat.split("").indexOf("t")-1]):(this._ttAtEnd=!1,this._isSpace=" "==this.model.timeFormat[this.model.timeFormat.split("").indexOf("t")+2]),1==this._ttAtEnd){this._ttStartPostion=this.model.timeFormat.match("([t]?[t]+)").index,this._ttEndPosition=this.model.timeFormat.length,this._formatStartPosition=0;var t=0;this.element&&this.element.val()&&(t=this.element.val().length-this.model.timeFormat.length),this._updatedttStartPosition=this._ttStartPostion+t,this._formatEndPostion=this.model.timeFormat.match("([t][t]+)").index,this._formatparts[0]=this.model.timeFormat.substr(this._formatStartPosition,this._formatEndPostion).trim(),this._formatparts[1]=this.model.timeFormat.substr(this._ttStartPostion,this._ttEndPosition).trim(),this._valueparts[0]=this.element.val().substr(this._formatStartPosition,this._formatEndPostion+t).trim(),this._valueparts[1]=this.element.val().substr(this._ttStartPostion+t,this._ttEndPosition).trim()}else this._ttStartPostion=0,this._ttEndPosition=this.model.timeFormat.match("([t]?[t]+)")?this._ttStartPostion+this.model.timeFormat.match("([t]?[t]+)")[0].length:0,this._formatStartPosition=this._isSpace?this._ttEndPosition+1:this._ttEndPosition,this._formatEndPostion=this.model.timeFormat.length,this._formatparts[1]=this.model.timeFormat.substr(this._formatStartPosition,this._formatEndPostion).trim(),this._formatparts[0]=this.model.timeFormat.substr(this._ttStartPostion,this._ttEndPosition).trim(),this._valueparts[1]=this.element.val().substr(this._formatStartPosition,this._formatEndPostion).trim(),this._valueparts[0]=this.element.val().substr(this._ttStartPostion,this._ttEndPosition).trim()},_getCaretSelection:function(){var e=this.element[0],t=0,i=0;if(!isNaN(e.selectionStart))return t=e.selectionStart,i=e.selectionEnd,{start:Math.abs(t),end:Math.abs(i)};var s=document.selection.createRange().getBookmark(),a=e.createTextRange();a.moveToBookmark(s);var r=e.createTextRange();r.collapse(!0),r.setEndPoint("EndToStart",a);var n=r.text.length;return{start:n,end:n+a.text.length}},_mouseDownOnInput:function(i){this.focused||t.isTouchDevice()||this._focusElement(),this._getExactPostions(),this.downPosition=this._getCaretSelection(),e(document).on("mouseup",e.proxy(this._mouseUpOnInput,this))},_mouseUpOnInput:function(t){t.preventDefault(),e(document).off("mouseup",e.proxy(this._mouseUpOnInput,this));var i=this._getCaretSelection();this.incomplete&&(this.incomplete=!1,i=this.downPosition),this.target.value!=this._getSelectedText()&&(i=this._getStartEnd(i),this._setSelection(i.start,i.end))},_getCategoryPosition:function(e){var t=0,i=0,s=this._getTimeParts(),a=this._getElePlace(),r=this.seperator,n=!1,o=this._getFormatParts()[a.time].split(r),l=s[a.time].split(r);if(o.length>l.length)return{start:t,end:i,isValid:n};if("tt"==e)s[a.tt]!=this.ttAM&&s[a.tt]!=this.ttPM||(t=0==a.tt?0:s[a.time].length+1,i=t+s[a.tt].length,!this._isSpace&&this._ttAtEnd&&(t-=1,i-=1),n=!0);else{t=0==a.time?0:s[a.tt].length+1;var d=o.indexOf(e);if(-1!=d){for(var h=0;h<o.length&&(i=l[h].length+1,h!=d);h++)t+=i;i+=t-1,this._noTT||this._isSpace||this._ttAtEnd||(t-=1,i-=1),n=!0}}return{start:t,end:i,isValid:n}},_getCategory:function(e){var t=this._getFormatParts(),i=this.seperator,s=this._getElePlace();return e.isTT?t[s.tt]:t[s.time].split(i)[e.index]},_getTimeParts:function(){if("h:mm tt"==this.model.timeFormat||"h:m tt"==this.model.timeFormat||"hh:m tt"==this.model.timeFormat||"hh:mm:s tt"==this.model.timeFormat)var e=this.element.val().split(" ");else var e=this._valueparts;return e},_getFormatParts:function(){if("h:mm tt"==this.model.timeFormat||"h:m tt"==this.model.timeFormat||"hh:m tt"==this.model.timeFormat||"hh:mm:s tt"==this.model.timeFormat)var e=this.model.timeFormat.split(" ");else var e=this._formatparts;return e},_getStartEnd:function(e){this._getExactPostions();var t,i,s,a=this.seperator,r=(this.element.val(),this._valueparts),n=0,o=0,l=t=null;for(s=0;s<r.length;s++)if(r[s]!=this.ttAM&&r[s]!=this.ttPM){var d=r[s].split(a),h=n,c=n+d[0].length;for(i=0;i<d.length;i++)if(o=d[i].length+n,!this._isSpace&&this._ttAtEnd&&e.start>=this._updatedttStartPosition&&e.end<=this._ttEndPosition&&this._formatparts[0].split(this._getSeperator())[1].length==this._valueparts[0].split(this._getSeperator())[1].length)n+=d[i].length+1;else{if(e.start<=o){l=i,t=!1,s=r.length;break}n+=d[i].length+1}}else{if(this._isSpace||this._ttAtEnd?e.start<=n+r[s].length:e.start<n+r[s].length){o=r[s].length+n,l=0,t=!0,s=r.length,!this._isSpace&&this._ttAtEnd&&(n-=1,o-=1);break}n+=r[s].length+1,this._isSpace||this._ttAtEnd||(n-=1)}return null==l&&(n=h,o=c,l=0,t=!1),{start:n,end:o,index:l,isTT:t}},_modifyValue:function(e){if(this._isValid(this.target.value)){this.model.enableStrictMode||this._checkInComplete();var t,i=this._getCaretSelection();if(i.start==i.end){var s=this._getLeast(!0),a=this._getCategoryPosition(s);t=this._getStartEnd(a)}else t=this._getStartEnd(i);this.start=t.start,this.end=t.end,this._changeValue(t,e)}},_keyUpOnInput:function(e){e.preventDefault(),this._preVal!=this.element.val()&&(this._preVal=this.element.val());var t=this._getCaretSelection(),i=this._getStartEnd(t),s=this._getCategory(i);var a=this._getSelectedValue(i),r=this.element.val();r.split(":"),r[0]<3&&(1==isNaN(r[0]+r[1])&&r[0]<10?this._poschange=!0:this._poschange=!1),"h"==s&&2==t.start&&2==t.end&&a>9&&a<13||"H"==s&&a>9&&a<24||"H"==s&&a<9&&2==t.start&&2==t.end||"mm"==s&&1==this._poschange&&4==t.start&&4==t.end||"ss"==s&&8==t.start&&8==t.end||"ss"==s&&1==this._poschange&&7==t.start&&7==t.end||"mm"==s&&5==t.start&&5==t.end?("mm"!=s||"HH:mm"!=this.model.timeFormat&&"hh:mm"!=this.model.timeFormat&&"H:mm"!=this.model.timeFormat&&"h:mm"!=this.model.timeFormat)&&("ss"!=s||"HH:mm:ss"!=this.model.timeFormat&&"hh:mm:ss"!=this.model.timeFormat&&"H:mm:ss"!=this.model.timeFormat&&"h:mm:ss"!=this.model.timeFormat)&&this._movePosition(t,null):("hh"==s||"HH"==s)&&t.start&&2==t.end&&a<24&&this._movePosition(t,null)},_getNextCategory:function(t,i){var s=[],a=this.seperator,r=this._getFormatParts();e(r).each(function(e,t){if("tt"==t)s.push(t);else{var i=t.split(a);s=i.concat(s)}});var n,o=s.indexOf(t);return-1!=o?(n=i?0==o?s.length-1:o-1:o==s.length-1?0:o+1,s[n]):t},_getElePlace:function(){this._getExactPostions();var e,t,i=this._getFormatParts();return"tt"==i[0]?(e=1,t=0):(e=0,t=1),{time:e,tt:t}},_movePosition:function(e,t){var i=this._getStartEnd(e),s=this._getCategory(i);s||(s=this._getLeast(t));var a=this._getNextCategory(s,t),i=this._getCategoryPosition(a);i.isValid&&this._setSelection(i.start,i.end)},_findActiveIndex:function(){var e,t=this.ul.find("li"),i=this.element.val(),s=t.first().html();e=(this._parse(i)-this._parse(s))/(6e4*this.model.interval),e=Math.round(e),this._activeItem=e==t.length?e:e+1,(this._activeItem<0||this._activeItem>t.length||isNaN(this._activeItem))&&(this._activeItem=0)},_keyDownOnInput:function(e){if(this.model.readOnly&&!this._readOnlyKeys(e))return!1;var t,i,s,a,r,n=e.keyCode;if(this._getInternalEvents&&38!=n&&40!=n&&36!=n&&35!=n&&9!=n)return!1;if(!this.model.enableStrictMode){if(this.showDropdown&&38!=n&&40!=n&&27!=n&&!this._readOnlyKeys(e))return!1;!this.showDropdown||37!=n&&39!=n||(e.keyCode=37==n?38:40)}switch(t=this._getCaretSelection(),i=this._getStartEnd(t),s=this._getCategory(i),e.keyCode){case 38:e.preventDefault(),this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),r=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=r),this._addListHover(),a=this._getActiveItem(),a.length&&this._selectTimeItem(a)):this._isValid(this.target.value)&&this._modifyValue(!0);break;case 40:e.preventDefault(),e.altKey&&this.model.showPopupButton?this._showhidePopup():this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),r=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=r,this._addListHover(),this._selectTimeItem(this._getActiveItem())):this._isValid(this.target.value)&&this._modifyValue(!1);break;case 37:e.preventDefault(),t.start==t.end?this._setSelection(t.start-1,t.start-1):this._movePosition(t,!0);break;case 39:e.preventDefault(),t.start==t.end?this._setSelection(t.start+1,t.start+1):this._movePosition(t,!1);break;case 36:if(e.preventDefault(),this.showDropdown)this._activeItem=0,r=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=r,this._addListHover(),this._selectTimeItem(this._getActiveItem());else{var o=this._firstlastVal(!0),l=this._getCategoryPosition(o);l.isValid&&this._setSelection(l.start,l.end)}break;case 35:if(e.preventDefault(),this.showDropdown)this._activeItem=this._listSize+1,r=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=r),this._addListHover(),this._selectTimeItem(this._getActiveItem());else{var d=this._firstlastVal(!1),h=this._getCategoryPosition(d);h.isValid&&this._setSelection(h.start,h.end)}break;case 9:if(this._getInternalEvents)break;this._hideResult();var c=null;e.shiftKey&&t.start>0?c=!0:!e.shiftKey&&t.end<this.element.val().length&&(c=!1),null!=c&&(e.preventDefault(),this._checkInComplete(),this._movePosition(t,c));break;case 13:if(!this.showDropdown){this._raiseChangeEvent();break}case 27:e.preventDefault(),this._hideResult();break;case 8:case 46:if(this.model.enableStrictMode)return;if(this.target.value!=this._getSelectedText()&&(e.preventDefault(),s&&"tt"!=s)){this._findCategoryPosition(s);var u,p=8==n&&t.start!=this.start,m=46==n&&t.end!=this.end;if(u=this.end-this.start,t.start==t.end&&1!=u||!p&&!m&&t.start==t.end)p?(this.element[0].value=this._replaceAt(this.target.value,t.start-1,t.start,""),this._setSelection(t.start-1,t.start-1)):m&&(this.element[0].value=this._replaceAt(this.target.value,t.end,t.end+1,""),this._setSelection(t.end,t.end));else{var g,f=this.start,_=this.end;this.element[0].value=this._replaceAt(this.target.value,f,_,"__"),g=_-f!=2?_+1:_,this._setSelection(f,g)}}}var v,b=this._getSelectedValue(i),x=e.keyCode?e.keyCode:e.charCode;if(e.keyCode>47&&e.keyCode<58?v=String.fromCharCode(x):e.keyCode>95&&e.keyCode<106&&(v=String.fromCharCode(x-48)),"tt"==s&&(!e.shiftKey&&!e.ctrlKey&&!e.altKey&&e.keyCode>64&&e.keyCode<91||e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106)){e.preventDefault();var y=this._getCategoryPosition(s);this.start=y.start,this.end=y.end,this._changeAmPm(b),this._raiseChangeEvent()}if(this.target.value==this._getSelectedText()&&!e.shiftKey&&!e.ctrlKey&&!e.altKey&&(e.keyCode>64&&e.keyCode<91&&!this.model.enableStrictMode&&e.preventDefault(),e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106)){var i=this._getStartEnd(t);this._setSelection(i.start,i.end)}if(!e.shiftKey&&!e.ctrlKey&&!e.altKey&&e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106){if("tt"!=s)if(this._getMinMax(s,!0),t.start==t.end){this._findCategoryPosition(s);var w;if(t.start==this.start){w=v+b,0==this.model.enableStrictMode&&(this._validateTimes(),this._targetBlur()),null==this.model.value&&this.element.val(this.model.minTime);var i=this._getStartEnd(t);this._setSelection(i.start,i.end)}else w=b+v;(w.length>2||!(Number(w)>=this.min&&this.max>=Number(w)))&&!this.model.enableStrictMode&&e.preventDefault()}else Number(v)>=this.min&&this.max>=Number(v)||!this.model.enableStrictMode&&e.preventDefault()}else this._allowKeyCodes(e)||(this.model.enableStrictMode?e.stopPropagation():8==e.keyCode||46==e.keyCode?e.stopPropagation():e.preventDefault())},_getSelectedText:function(t){if(window.getSelection){var i=e("#"+this.element[0].id).get(0);return i.value.substring(i.selectionStart,i.selectionEnd)}return document.selection.createRange().text},_allowKeyCodes:function(e){return!((!e.ctrlKey||65!=e.keyCode&&67!=e.keyCode&&90!=e.keyCode&&89!=e.keyCode)&&9!=e.keyCode&&116!=e.keyCode&&13!=e.keyCode)},_readOnlyKeys:function(e){return!(35!=e.keyCode&&36!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode&&!this._allowKeyCodes(e))},_firstlastVal:function(e){var t=this._getFormatParts(),i=this.seperator;if(e)return"tt"!=t[0]?t[0].split(i)[0]:"tt";if("tt"!=t[0])return"tt";if(t[1]){var s=t[1].split(i);return s.length?s[s.length-1]:"tt"}return"tt"},_mouseWheel:function(e){if(e.preventDefault(),this.model.readOnly)return!1;var t,i=e.originalEvent;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this._modifyValue(!0):t<0&&this._modifyValue(!1)},_addListHover:function(){this._addSelected(),this._updateScrollTop()},_addSelected:function(){this.ul.find("li").removeClass("e-active e-hover");var e=this._getActiveItem();e.length&&!e.hasClass("e-disable")&&e.addClass("e-active")},_disableItemSelectDown:function(t){return(null==t||t<0)&&(t=0),t<this._listSize?e.inArray(t,this._disabledItems)<0?t:this._disableItemSelectDown(t+1):this._listSize},_disableItemSelectUp:function(t){if(t-=1,(null==t||t<0)&&(t=0),t<this._listSize){if(e.inArray(t,this._disabledItems)<0)return t+1;if(t>0)return this._disableItemSelectUp(t)}return 0},_getActiveItem:function(){return e(this.ul.find("li")[this._activeItem-1])},_timeIconClick:function(e){t.isNullOrUndefined(this.popupList)&&(this._renderDropdown(),this._addProperty());var i=!1;if(e.button?i=2==e.button:e.which&&(i=3==e.which),!i){if(e.preventDefault(),!this.model.enabled||this.model.readOnly||this.ul.find("li").length<1)return!1;this._showhidePopup();var s=this.element.val().length;t.isTouchDevice()||this._setSelection(s,s)}},_showhidePopup:function(){if(this._getInternalEvents)return!1;this.showDropdown?this._hideResult():this._showResult()},_showResult:function(){if(null==this.popupList&&this._renderDropdown(),this._raiseEvent("beforeOpen"))return!1;this.focused||t.isTouchDevice()||this._focusElement(),this.model.value?this._changeActiveEle():this.ul.find("li").removeClass("e-active");var i=this,s=this._visibleAndCalculateTop();this.popupList.slideDown(this.model.enableAnimation?200:0,function(){e(document).on("mousedown",e.proxy(i._OnDocumentClick,i))}),this.scrollerObj.setModel({scrollTop:s}),this.showDropdown=!0,this._listSize=this.ul.find("li").length,e(window).on("resize",e.proxy(this._OnWindowResize,this)),this._on(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._on(t.getScrollableParents(this.wrapper),"touchmove",this._hideResult),this._raiseEvent("open"),this.wrapper.addClass("e-active")},_hideResult:function(i){if(this._raiseEvent("beforeClose"))return!1;i&&("touchmove"==i.type||"scroll"==i.type)&&e(i.target).parents("#"+this.popupList[0].id).length>0||this.showDropdown&&!this._getInternalEvents&&(this.showDropdown=!1,this.popupList.slideUp(this.model.enableAnimation?100:0),
e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._off(t.getScrollableParents(this.wrapper),"touchmove",this._hideResult),this._raiseEvent("close"),this.wrapper.removeClass("e-active"))},_visibleAndCalculateTop:function(){this.popupList.css({display:"block"});var e=this._calcScrollTop();return this._refreshPopup(),this.popupList.css({display:"none"}),e},_calcScrollTop:function(){var e,t=(this.ul.outerHeight(),this.ul.find("li").outerHeight());return e=this.ul.find("li.e-active").index(),t*e-(this.popupList.outerHeight()-t)/2},_changeActiveEle:function(){if(!this.popupList)return!1;var e,t=this.ul.find("li"),i=this.element.val(),s=t.first().html();e=(this._parse(i)-this._parse(s))/(6e4*this.model.interval),e=Math.round(e),this._activeItem=e==t.length?e:e+1,(this._activeItem<0||this._activeItem>t.length||isNaN(this._activeItem)||this._ensureTimeRange(i))&&(this._activeItem=0),this._addListHover()},_OnDocumentClick:function(t){e(t.target).is(this.popupList)||e(t.target).parents(".e-time-popup").is(this.popupList)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-timewidget").is(this.wrapper)?(e(t.target).is(this.popupList)||e(t.target).parents(".e-time-popup").is(this.popupList))&&t.preventDefault():this._hideResult()},_OnWindowResize:function(e){this._refreshPopup()},_OnMouseEnter:function(t){var i=t.target;this.ul.find("li").removeClass("e-hover"),e(i).hasClass("e-disable")||e(i).addClass("e-hover")},_OnMouseLeave:function(e){this._dateTimeInternal&&!this.model.value||this.ul.find("li").removeClass("e-hover")},_OnMouseClick:function(t){t.preventDefault(),e(t.target).hasClass("e-disable")||(this.model.enabled&&!this.model.readOnly&&(this._activeItem=e(t.target).index()+1,this.ul.find("li").attr({tabindex:-1,"aria-selected":!1}),e(t.target).attr({"aria-selected":!0,tabindex:0}),this._addSelected(),this._selectTimeItem(e(t.target))),this._showhidePopup())},_selectTimeItem:function(e){this._beforeChange(e),this._raiseChangeEvent()&&this._trigger("select",{value:this.model.value,prevTime:this._previousValue})},_findCategoryPosition:function(e){"least"==e&&(e=this._getLeast(!0));var t=this._getCategoryPosition(e);this.start=t.start,this.end=t.end},_getLeast:function(t){var i=this._getFormatParts(),s=this.seperator,a=null;return e(i).each(function(e,i){if("tt"!=i){var r=i.split(s);a=t?r[r.length-1]:r[0]}}),a},_changeValue:function(e,i){var s,a=(this.target.value,this._getCategory(e));if(!a)return!1;if(this._setSelection(this.start,this.end),s=this.target.value.substring(this.start,this.end),this._checkMinMax(this.target.value))if(s!=this.ttAM&&s!=this.ttPM){if(s=this._changeCurrentValue(s,a,i),1!=a.length&&(s=this._changeWhole(s)),this._findCategoryPosition(a),this.element.val(this._replaceAt(this.target.value,this.start,this.end,s)),this.end=this.start+s.toString().length,this._setSelection(this.start,this.end),this._ensureTimeRange(this.target.value)&&this._checkMinMax(this.target.value)){var r=this._createObject(this.target.value),n=r.getHours(),o=i?this._startTime:this._endTime,l=i?this._endTime:this._startTime;if(!t.isNullOrUndefined(this.model.disableTimeRanges))for(var d=0;d<this.model.disableTimeRanges.length;d++)(o[d].getHours()===n||+r>=+this._startTime[d]&&+r<=+this._endTime[d])&&(this.target.value=this._localizeTime(l[d]),this._findCategoryPosition(a),this._setSelection(this.start,this.end),this._changeValue(e,i))}}else this._changeAmPm(s);else{var h=this._checkExceedRange(this.target.value);this._setTime(this.model[h]),this._findCategoryPosition(a),this._setSelection(this.start,this.end)}this._checkMinMax(this.target.value)?this._raiseChangeEvent():(this.element.val(this.model.value),this._findCategoryPosition(a),this._setSelection(this.start,this.end))},_checkMinMax:function(e){var t=this._checkExceedRange(e);return null==t&&(t=!1),!t},_checkExceedRange:function(e){if(e){if(this.model.minTime&&!this._compareTime(e,this.model.minTime,!0))return"minTime";if(this.model.maxTime&&!this._compareTime(this.model.maxTime,e,!0))return"maxTime"}return null},_changeWhole:function(e){return e>9?""+e:"0"+e},_changeAmPm:function(e){e=e==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e)),this._setSelection(this.start,this.end)},_changeMinute:function(e){var t=["mm","m"],i=this._getExactFormat(t);if(i){this._findCategoryPosition(i);var s=Number(this.target.value.substring(this.start,this.end));this._getMinMax(i),e?s==this.max?(s=this.min,this._changeHour(e)):s+=1:s==this.min?(s=this.max,this._changeHour(e)):s-=1,this._findCategoryPosition(i),1!=i.length&&(s=this._changeWhole(s)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,s))}},_changeHour:function(e){var t=["hh","h","HH","H"],i=this._getExactFormat(t);if(i){this._findCategoryPosition(i);var s=Number(this.target.value.substring(this.start,this.end));this._getMinMax(i),e?s==this.max?(s+=1,this._changeMeridian()):s>this.max?s=this.min:s+=1:s==this.min?s=this.max+1:s>this.max?(s=this.max,this._changeMeridian()):s-=1,this._findCategoryPosition(i),1!=i.length&&(s=this._changeWhole(s)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,s))}},_getExactFormat:function(e){for(var t=this.model.timeFormat,i=0;i<e.length;i++)if(-1!=t.indexOf(e[i]))return e[i];return null},_changeMeridian:function(){if(-1!=this.model.timeFormat.indexOf("tt")){this._findCategoryPosition("tt");var e=this.target.value.substring(this.start,this.end);e=e==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e))}},_changeCurrentValue:function(e,t,i){e=Number(e);var s=t,a=1,r=!0;return this._getMinMax(s),"hh"==s||"h"==s||"HH"==s||"H"==s?a=this.model.hourInterval:"mm"==s||"m"==s?a=this.model.minutesInterval:"ss"!=s&&"s"!=s||(a=this.model.secondsInterval),a<=0?e:(i?(("hh"==s||"h"==s)&&e>this.max?e=this.min-1+a:e<this.max?e+=a:(r=!1,"hh"!=s&&"h"!=s?e=this.min-1+a:e+=a,this._changeAdjacent(s,i)),"hh"!=s&&"h"!=s||e!=this.max+1?e>this.max+1&&(e-=this.max+1,r&&this._changeAdjacent(s,i)):r&&this._changeAdjacent(s,i),"hh"!=s&&"h"!=s&&e==this.max+1&&(e=this.min,r&&this._changeAdjacent(s,i))):("hh"!=s&&"h"!=s&&e>this.min?e-=a:("hh"==s||"h"==s)&&e>this.min&&e<=this.max?e-=a:"hh"!=s&&"h"!=s||e!=this.min?(r=!1,e=this.max+1-a,this._changeAdjacent(s,i)):e=this.max+2-a,e<this.min&&(e+=this.max+1,r&&this._changeAdjacent(s,i))),e)},_changeAdjacent:function(e,t){"ss"==e||"s"==e?this._changeMinute(t):"mm"==e||"m"==e?this._changeHour(t):"hh"!=e&&"h"!=e&&"HH"!=e&&"H"!=e||this._changeMeridian()},_valueChange:function(e){this._raiseChangeEvent()},_beforeChange:function(e){return this._raiseEvent("beforeChange")||this.element.val(e.text()),!0},_raiseChangeEvent:function(e,t){return e=void 0===e?this.model.value:e,this._previousValue=e,e!=(this.target.value?this.target.value:null)&&(this._checkMinMax(this.target.value)&&this._isValid(this.target.value,this.model.enableStrictMode)||!this.target.value?this.isValidState=!0:this.isValidState=!1,this.model.value=this._isValid(this.target.value,!0)&&this._checkMinMax(this.target.value)?this.target.value:null,this.model.value||this.model.enableStrictMode||this._setTime(this.model.value),this.model.value!=this._previousValue&&(this._raiseEvent("change",t),this._raiseEvent("_change",t),!0))},_raiseEvent:function(e,t){var i={value:this.model.value,prevTime:this._previousValue};return"change"==e&&(i.isInteraction=!t),this._trigger(e,i)},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),t=-1;if(null!=e.exec(navigator.userAgent)&&(t=parseFloat(RegExp.$1)),t>=7&&t<8)return!0}return!1},_replaceAt:function(e,t,i,s){return e.substring(0,t)+s+e.substring(i)},_localizeTime:function(i){return i?e.trim(t.format(this._createObject(i),this.model.timeFormat,this.model.locale)):null},_localizeMeridian:function(i){return e.trim(t.format(i,"tt",this.model.locale))},_compareTime:function(e,t,i){return i=!!i,i?this._parse(e)>=this._parse(t):this._parse(e)>this._parse(t)},_isValid:function(e,t){return(e=this._createObject(e,t))&&"function"==typeof e.getTime&&isFinite(e.getTime())},_parse:function(e){return Date.parse(this._createObject(e))},_setEmptyDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(2e3),t},_createObject:function(e,i){var s=null;if("string"==typeof e){var a=this._setModelOption?this._preTimeformat:this.model.timeFormat,r=t.preferredCulture(this.model.locale).calendar.patterns.d,n=t.format(new Date("1/1/2000"),r,this.model.locale);if(s=t.parseDate(n+" "+e,r+" "+a,this.model.locale),(this._extISORegex.exec(e)||this._basicISORegex.exec(e))&&(this.model.value=s=this._timeFromISO(e)),this._setModelOption=!1,!s){var o=new Date(e);s=isNaN(Date.parse(o))||t.isNullOrUndefined(e)?this._dateTimeInternal&&""!=e?new Date("1/1/2000 "+e):null:this._setEmptyDate(e)}}else"number"==typeof e?s=new Date(e):e instanceof Date&&(s=this._setEmptyDate(e));if(s&&!this._dateTimeInternal&&i){var l=this._localizeTime(s);this._ensureTimeRange(l)&&(s=null)}return s},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"mousedown",this._mouseDownOnInput),this._on(this.element,"keydown",this._keyDownOnInput),this._on(this.element,"keyup",this._keyUpOnInput)}}),t.TimePicker.Locale=t.TimePicker.Locale||{},t.TimePicker.Locale.default=t.TimePicker.Locale["en-US"]={watermarkText:"select a time"}}(jQuery,Syncfusion),function(e,t,i){"use strict";t.widget("ejTreeGrid","ej.TreeGrid",{_rootCSS:"e-treegrid",element:null,validTags:["div"],model:null,_requiresID:!0,_tags:[{tag:"columns",attr:["field","headerText","allowSorting","editType","allowFiltering","filterEditType","width","visible","editParams","format","isFrozen","allowFreezing","headerTemplateID","allowCellSelection","showCheckbox","showInColumnChooser","validationRules.minlength","isTemplateColumn","validationRules.maxlength","validationRules.range","validationRules.number","validationRules.required","displayAsCheckbox","editTemplate","priority","filterType",[{tag:"commands",attr:["type","buttonOptions"]}]],content:"template"},{tag:"summaryRows",attr:["title","summaryColumns"],content:"template"},{tag:"stackedHeaderRows",attr:["stackedHeaderColumns"],content:"template"},{tag:"summaryRows.summaryColumns",attr:["summaryType","dataMember","displayColumn","prefix","suffix","format","customSummaryValue"],content:"template"},{tag:"sortSettings.sortedColumns",attr:["field","direction"]},{tag:"sizeSettings",attr:["height","width"]},{tag:"columnResizeSettings",attr:["columnResizeMode"]}],_columns:function(e,i,s,a){var r=this,n=r.model,o=n.columns,l=!1,d=o.length,h=["allowCellSelection","allowEditing","allowFilteringBlankContent","allowFreezing","allowSorting","editParams","headerTooltip","tooltip","validationRules"];if(!t.isNullOrUndefined(e)){if("object"==typeof e)for(var c=0;c<e.length;c++){var u=e[c];if(!t.isNullOrUndefined(u.index)&&!t.isNullOrUndefined(u.change))for(var p=0;p<d;p++){var m=o[p];if(m.index&&m.index==u.index){for(var g in u.change)-1==h.indexOf(g)&&(l=!0);break}}}else i&&s?-1==h.indexOf(g)&&(l=!0):l=!0;l&&r.updateColumns()}},keyConfigs:{focus:"e",editRecord:"113",saveRequest:"13",cancelRequest:"27",firstRowSelection:"36",lastRowSelection:"35",leftArrow:"37",upArrow:"38",rightArrow:"39",downArrow:"40",moveCellRight:"9",moveCellLeft:"shift+9",shiftDownArrow:"shift+40",shiftUpArrow:"shift+38",shiftRightArrow:"shift+39",shiftLeftArrow:"shift+37",shiftHomeButton:"shift+36",shiftEndButton:"shift+35",selectedRowExpand:"alt+40",totalRowExpand:"ctrl+40",selectedRowCollapse:"alt+38",totalRowCollapse:"ctrl+38",deleteRecord:"46",spaceBar:"32",topRowSelection:"ctrl+36",bottomRowSelection:"ctrl+35",nextPage:"33",prevPage:"34"},defaults:{expandStateMapping:"",allowFiltering:!1,allowDragAndDrop:!1,dragTooltip:{showTooltip:!1,tooltipItems:[],tooltipTemplate:""},allowSorting:!1,allowColumnResize:!1,allowSelection:!0,allowPaging:!1,allowSearching:!1,dataSource:null,query:t.Query(),idMapping:"",parentIdMapping:"",hierarchyRowIndexMapping:"",readOnly:!1,showGridCellTooltip:!1,cellTooltipTemplate:null,showGridExpandCellTooltip:!1,showColumnChooser:!1,showColumnOptions:!1,enableAltRow:!0,enableLoadOnDemand:!1,totalSummaryHeight:90,collapsibleTotalSummary:!1,hasChildMapping:"",selectedItem:null,showStackedHeader:!1,stackedHeaderRows:[],toolbarSettings:{showToolbar:!1,toolbarItems:[],customToolbarItems:[]},editSettings:{allowEditing:!1,allowAdding:!0,allowDeleting:!0,editMode:"cellEditing",rowPosition:"top",beginEditAction:"dblclick",dialogEditorTemplateID:"",showDeleteConfirmDialog:!1,showConfirmDialog:!0,batchEditSettings:{editMode:"cell"}},enableVirtualization:!1,allowMultiSorting:!1,sortSettings:{sortedColumns:[]},filterSettings:{filterBarMode:"immediate",filteredColumns:[],filterType:"filterbar",maxFilterChoices:1e3,enableCaseSensitivity:!1,enableComplexBlankFilter:!0,blankValue:"",filterHierarchyMode:"parent"},printingEnabled:!1,selectionType:"single",selectionMode:"row",selectionSettings:{selectionType:"single",selectionMode:"row",enableHierarchySelection:!0,enableSelectAll:!0},searchSettings:{fields:[],key:"",operator:"contains",ignoreCase:!0,searchHierarchyMode:"parent"},selectedCellIndexes:[],selectedRowIndex:-1,showSummaryRow:!1,summaryRows:[],showTotalSummary:!1,allowKeyboardNavigation:!0,cssClass:"",locale:"en-US",isEdit:!1,allowScrolling:!1,scrollSettings:{frozenColumns:0},groupSettings:{groupedColumns:[]},sizeSettings:{height:"",width:""},enableResize:!0,allowTextWrap:!1,isResponsive:!0,showDetailsRow:!1,showDetailsRowInfoColumn:!1,detailsTemplate:"",detailsRowHeight:100,rowDataBound:null,load:null,create:null,queryCellInfo:null,rowSelecting:null,rowSelected:null,cellSelecting:null,cellSelected:null,beginEdit:null,endEdit:null,expanding:null,expanded:null,collapsing:null,collapsed:null,dataBound:null,beforePrint:null,actionComplete:null,actionBegin:null,actionFailure:null,currentViewData:[],flatRecords:[],parentRecords:[],updatedRecords:[],summaryRowRecords:[],selectedItems:[],ids:[],columns:[{field:"",headerText:"",editType:"",filterEditType:"",allowFiltering:!1,allowFilteringBlankContent:!0,allowSorting:!1,visible:"",textAlign:t.TextAlign.Left,headerTextAlign:t.TextAlign.Left,allowCellSelection:!0,clipMode:"",headerTooltip:"",tooltip:"",showInColumnChooser:!0,commands:[{type:"",buttonOptions:{}}],filterType:null}],columnDialogFields:[],commonWidth:150,dateFormat:"MM/dd/yyyy",rowHeight:30,emptyRecordText:"No Records To Display",treeColumnIndex:0,workingTimeScale:"TimeScale8Hours",childMapping:"",enableCollapseAll:!1,rowTemplateID:"",altRowTemplateID:"",parseRowTemplate:!0,contextMenuSettings:{showContextMenu:!1,contextMenuItems:[]},contextMenuOpen:null,rowDragStart:null,rowDrag:null,rowDragStop:null,rowDropActionBegin:null,detailsDataBound:null,detailsShown:null,detailsHidden:null,toolbarClick:null,columnResizeStart:null,columnResizeEnd:null,columnResized:null,recordClick:null,recordDoubleClick:null,exportToPdfAction:"",exportToExcelAction:"",allowMultipleExporting:!1,headerTextOverflow:"none",pageSettings:{pageSize:12,pageCount:8,currentPage:1,totalPages:0,totalRecordsCount:null,pageSizeMode:"all",template:null,printMode:"allPages"},allowColumnReordering:!1,columnResizeSettings:{columnResizeMode:"normal"}},dataTypes:{columns:"array",totalSummaryHeight:"number",collapsibleTotalSummary:"boolean",summaryRows:"array",sortSettings:{sortedColumns:"array"},searchSettings:{fields:"array"},dragTooltip:{tooltipItems:"array"},columnDialogFields:"array",filterSettings:{filteredColumns:"array",filterType:"string"},dataSource:"data",query:"data",currentViewData:"array",flatRecords:"array",parentRecords:"array",updatedRecords:"array",summaryRowRecords:"array",ids:"array",contextMenuSettings:{contextMenuItems:"array"},toolbarSettings:{toolbarItems:"array",customToolbarItems:"array"},stackedHeaderRows:"array",selectedItem:"data"},ignoreOnExport:["isEdit","toolbarClick","query","queryCellInfo","selectionType","currentViewData","enableRTL","rowDataBound","rowTemplate","parseRowTemplate","detailsTemplate","editSettings","localization","cssClass","dataSource","allowKeyboardNavigation","pageSettings","columnResizeSettings"],observables:["selectedRowIndex","dataSource","selectedCellIndexes","pageSettings.currentPage"],selectedItem:t.util.valueFunction("selectedItem"),selectedRowIndex:t.util.valueFunction("selectedRowIndex"),selectedCellIndexes:t.util.valueFunction("selectedCellIndexes"),dataSource:t.util.valueFunction("dataSource"),_currentPage:t.util.valueFunction("pageSettings.currentPage"),_dataSource:t.util.valueFunction("dataSource"),_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},getHeaderTable:function(){return this._$gridHeaderTable},setGridHeaderTable:function(e){this._$gridHeaderTable=e},getHeaderContent:function(){return this._$gridHeaderContent},setGridHeaderContent:function(e){this._$gridHeaderContent=e},getContentTable:function(){return this._$gridContentTable},getContent:function(){return this._$gridContent},setGridContentTable:function(e){this._$gridContentTable=e},getRows:function(){return this._excludeDetailRows()},getSelectedCells:function(){var t=this,i=t.model,s=[];return this._selectedCellDetails.forEach(function(a){var r=a.data,n=i.currentViewData.indexOf(r),o=e(a.cellElement);-1!=n&&(t._frozenColumnsLength>0?o.closest(".e-frozencontentdiv").length>0?a.cellElement=t.getRows()[0][n].childNodes[a.cellIndex]:o.closest(".e-movablecontentdiv").length>0&&(a.cellElement=t.getRows()[1][n].childNodes[a.cellIndex-t._frozenColumnsLength]):a.cellElement=t.getRows()[n].childNodes[a.cellIndex]),s.push(a.cellElement)}),s},setGridRows:function(e){this._$gridRows=e},getCurrentViewData:function(){return this.model.currentViewData},getUpdatedCurrentViewData:function(){return this._updateCurrentViewData(),this.model.currentViewData},getFlatRecords:function(){return this.model.flatRecords},setHeight:function(e){this._totalHeight=e},getUpdatedRecords:function(){var e=this.model;return!this._isFromGantt&&e.allowPaging?this._updatedPageData:this._isHierarchyFiltering&&e.enableVirtualization?this._updateFilterParent:e.updatedRecords},getsummaryRowRecords:function(){return this.model.summaryRowRecords},getDataSource:function(){return this.dataSource()},getUpdatedIds:function(){return this.model.ids},getRecordsCount:function(){return this._recordsCount},setRecordsCount:function(e){this._recordsCount=e},setFocusOnTreeGridElement:function(){this._focusTreeGridElement()},updateCollapsedRecordCount:function(){var e=this,t=this.model,i=[];i=t.updatedRecords.filter(function(t){return 0==e.getExpandStatus(t)}),e._totalCollapsedRecordCount=i.length},_getDetailsExpandedRecords:function(e){return e.filter(function(e){return 1==e.isDetailsExpanded})},_getExpandedDetailsRowHeight:function(){var e,t,i=this,s=i.getUpdatedRecords();return e=this.getExpandedRecords(s),t=this._getDetailsExpandedRecords(e),t=i._spliceSummaryRows(t),i._detailsRowHeight*t.length},getCollapsedRecordCount:function(e){return this._totalCollapsedRecordCount},_colgroupRefresh:function(){var t,i;this._frozenColumnsLength>0?(t=e(this.getHeaderTable()).find("colgroup"),i=e(this.getContentTable()).find("colgroup")):(t=e(this.getHeaderTable()).find("colgroup")[0],i=e(this.getContentTable()).find("colgroup")[0]);var s=e(t).clone(),a=e(i).clone(),r=e(i).clone();e(i).remove(),e(t).remove(),this._frozenColumnsLength>0?(e(s[0]).prependTo(this.getHeaderTable()[0]),e(s[1]).prependTo(this.getHeaderTable()[1]),e(a[0]).prependTo(this.getContentTable()[0]),e(a[1]).prependTo(this.getContentTable()[1]),this._$footertableContent&&(e(this._$footertableContent).find("colgroup").remove(),e(r[0]).prependTo(this._$footertableContent[0]),e(r[1]).prependTo(this._$footertableContent[1])),this._$totalSummaryRowContainer&&(this.mobileDevice()||"safari"!=this.getBrowserDetails().browser||this._$totalSummaryRowContainer.find("#e-movablefooter"+this._id).css("margin-left","auto")),this.mobileDevice()||"safari"!=this.getBrowserDetails().browser||this.getHeaderContent().find("#e-movableheader"+this._id).add(this.getContent().find("#e-movablecontainer"+this._id)).css("margin-left","auto"),e("#e-frozencontentdiv"+this._id).length&&e("#e-frozencontentdiv"+this._id).css("width","100%")):(e(s).prependTo(this.getHeaderTable()),e(a).prependTo(this.getContentTable()),this._$footertableContent&&(e(this._$footertableContent).find("colgroup").remove(),e(r).prependTo(this._$footertableContent)))},_detailColsRefresh:function(){if(this._$headerCols=this.getHeaderTable().children("colgroup").find("col"),this._$contentCols=this.getContentTable().children("colgroup").find("col"),this.model.detailsTemplate&&this.model.showDetailsRow&&this.model.showDetailsRowInfoColumn||this.model.isFromGantt){var e=this.model.columns.length;this._$headerCols.length>e&&this._$headerCols.splice(e,1),this._$contentCols.length>e&&this._$contentCols.splice(e,1)}},_swipeAction:function(e){var t=this,i=this._currentPage(),s=!0,a=(this.getScrollObject()||{})._scrollXdata;switch(a&&(s="swipeleft"==e.type?a.scrollable-a.sTop==0:0==a.sTop),e.type){case"swipeleft":!this.model.allowPaging||i==this.model.pageSettings.totalPages||this.model.isEdit||this._isRowEdit||!s&&t.getScrollElement().ejScroller("isHScroll")||this.element.ejTreeGrid("gotoPage",i+1);break;case"swiperight":this.model.allowPaging&&i>1&&!this.model.isEdit&&!this._isRowEdit&&(!s&&t.getScrollElement().ejScroller("isHScroll")||this.element.ejTreeGrid("gotoPage",i-1))}},gotoPage:function(i){var s=this,a=s.model,r={};if(this.model.allowPaging){if(this._isLoadonDemand&&i&&i!=this._currentPage())return this._currentPage(i),s._refreshDataSource(),void(this._prevPageNo!=i&&(this._prevPageNo=i));t.isNullOrUndefined(i)?i=s._currentPage():i<=0?i=1:i>a.pageSettings.totalPages&&(i=a.pageSettings.totalPages),i=t.isNullOrUndefined(i)?s._currentPage():i,this._currentPage(i),r.previousPage=this._prevPageNo,r.currentPage=i,a.allowPaging&&(r.requestType=t.TreeGrid.Actions.Paging),s._setScrollTop(),s._updateCurrentViewData(),a.enableVirtualization&&a.pageSettings.pageSizeMode==t.TreeGrid.PageSizeMode.Root&&-1==e.inArray(i,s._expandCollapsePages)&&(s._isInExpandCollapseAll=!0,"collapseAll"==s._expandCollapseSettings.state?s._collapseAllData():"expandAll"==s._expandCollapseSettings.state&&s._expandAllData(),"collapseAtLevel"==s._expandCollapseSettings.atLevel?s._collapsePageLevelData():"expandAtLevel"==s._expandCollapseSettings.atLevel&&s._expandPageLevelData(),a.enableAltRow&&s.updateAltRow()),s.renderRecords(r),s._isInExpandCollapseAll=!1,s._updateWrapRowHeights("total,header"),s.updateHeight(),s._updateScrollCss(),a.allowTextWrap&&a.enableVirtualization&&s._updateWrapRowHeights("header","refreshAll"),r.previousPage!=r.currentPage&&(s.clearSelection(-1),s.selectedRowIndex(-1),s.model.selectedItem=null,s._cancelSaveTools(),s._clearContextMenu(),s.model.allowSelection&&"multiple"==s.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&s._clearMultiSelectPopup(),this._prevPageNo=r.currentPage)}},_pagerClickHandler:function(e){var i=this;if(i.model.pageSettings.pageSizeMode==t.TreeGrid.PageSizeMode.Root&&i._batchEditStarts&&!i._confirmDialog.is(":visible"))return i._batchSaveLostWarning("Paging"),i._batchTempDetails.currentPage=e.currentPage,!0;if(this._prevPageNo!=e.currentPage)return i._isNextPage=!0,i._isRowEdit?i.cancelRowEditCell():i.model.isEdit&&i.cancelEditCell(),this.gotoPage(e.currentPage),!1},_init:function(){var e=this;if(e.model.isdesignMode){e.model.columns=[{field:"Column1",HeaderText:"Column1"},{field:"Column2",HeaderText:"Column2"},{field:"Column3",HeaderText:"Column3"},{field:"Column4",HeaderText:"Column4"}],e.model.childMapping="Children";for(var i=[{Column1:"Value 1",Column2:"Value 2",Column3:"Value 3",Column4:"Value 4",Children:[]}],s=1;s<4;s++){var a={Column1:"Value 1",Column2:"Value 2",Column3:"Value 3",Column4:"Value 4"};i[0].Children.push(a)}this.dataSource(i),this.model.sizeSettings.height="250px",this.model.sizeSettings.width="600px"}if(e._detailsColumnWidth=35,e._summaryColumnIndex=0,e.model.summaryRows.length<=1&&(e.model.collapsibleTotalSummary=!1),e._trigger("load"),e._validateColumnFields(),e.model.isFromGantt||e._validateColumnVisible(!0),e._initPrivateProperties(),e._setCultureInfo(),this.dataSource()instanceof t.DataManager&&void 0!=this.dataSource().ready){var e=this;e._renderWaitingPopup(),this.dataSource().ready.done(function(i){e.model.dataSource=t.DataManager(i.result),e._initDatasource()})}else e._initDatasource();e._processEditing(),e.model.showColumnChooser&&e.model.showColumnOptions&&(e.columnAddDialogTemplate(),e._renderUpdateConfirmDialog()),e._createDragTooltipTemplate(),e._createTooltipTemplate()},_renderEditDialog:function(){return t.buildTag("div.e-editdialog-padding","",{display:"none"},{id:this._id+"_dialogEdit"})},_validateColumnFields:function(){var e=this,i=e.model.columns;if(!t.isNullOrUndefined(i))for(var s=0;s<i.length;s++)t.isNullOrUndefined(i[s].field)&&(i[s].field="",i[s].allowEditing=!1,i[s].allowSorting=!1,i[s].allowFiltering=!1),e._isCommandColumn(i[s])&&(i[s].allowEditing=!1,i[s].allowSorting=!1,i[s].allowFiltering=!1,i[s].showCheckbox=!1),t.isNullOrUndefined(i[s].editType)&&(i[s].editType="stringedit"),"maskedit"==i[s].editType&&t.isNullOrUndefined(i[s].filterEditType)&&(i[s].filterEditType="stringedit")},_validateColumnVisible:function(e){var i=this,s=i.model;if(i._autoHideColumns=[],i._autoShowColumns=[],s.isResponsive&&s.enableResize){var a=document.body.clientWidth,r=null;a>=960&&a<=1120?r=6:a>=800&&a<=959?r=5:a>=640&&a<=799?r=4:a>=480&&a<=639?r=3:a>=0&&a<=479&&(r=2);var n=s.columns,o=n.length;if(e)for(var l=0;l<o;l++)null!=r?n[l].priority&&(n[l].priority>=r?n[l].visible=!1:n[l].visible=!0):t.isNullOrUndefined(n[l].priority)||(n[l].visible=!0);else for(var l=0;l<o;l++)null!=r?n[l].priority&&(n[l].priority>=r?0!=n[l].visible&&i._autoHideColumns.push(n[l]):0==n[l].visible&&i._autoShowColumns.push(n[l])):t.isNullOrUndefined(n[l].priority)||0==n[l].visible&&i._autoShowColumns.push(n[l])}},_hideColumns:function(t){var i=this,s=i.model;if(t.reverse(),t.sort(function(e,t){return t.priority-e.priority}),t&&t.length>0){var a=t.length;i.getHeaderTable().removeClass("e-table"),i.getContentTable().removeClass("e-table");for(var r=0;r<a;r++){var n=t[r],o=e.inArray(n,s.columns),l=n.headerText,d=e.inArray(l,i._hiddenColumns);n&&!i._isColumnHidable(n)||(-1!=o&&o!=s.treeColumnIndex&&-1==d&&i._autoHideShowColumn(l,o,!0),-1!=(o=e.inArray(l,i._visibleColumns))&&i._visibleColumns.splice(o,1))}i.getHeaderTable().addClass("e-table"),i.getContentTable().addClass("e-table"),i._updateHideShowColumnAlignment()}},_showColumns:function(t){var i=this,s=i.model;if(t&&t.length>0){for(var a=t.length,r=0;r<a;r++){var n=t[r],o=e.inArray(n,s.columns),l=n.headerText,d=e.inArray(l,i._visibleColumns);-1!=o&&-1==d&&i._autoHideShowColumn(l,o,!1),o=e.inArray(l,i._hiddenColumns),-1!=o&&i._hiddenColumns.splice(o,1)}i._updateHideShowColumnAlignment()}},_autoHideShowColumn:function(t,i,s){var a=this,r=a.model;a._cancelEditState(),s?(a._hiddenColumns.push(t),r.columns[i].visible=!1):(a._visibleColumns.push(t),r.columns[i].visible=!0);var n,o=a.getHeaderTable().find("colgroup").find("col"),l=a.getHeaderTable().find("thead").find("th.e-headercell");r.allowFiltering&&"filterbar"==r.filterSettings.filterType&&(n=a.getHeaderTable().find("thead").find("th.e-filterbarcell")),1==a.model.columns[i].isFrozen&&(a._updateFrozenColumnOnResize(i),a.setWidthToColumns());var d,h,c=a.getContentTable().find("colgroup").find("col"),u=!0,p=i;if(h=a.getRows(),d=a._getFooterRows(),s?(e(o).eq(i).hide(),e(l).eq(i).addClass("e-hide"),n&&e(n).eq(i).addClass("e-hide"),e(c).eq(i).hide()):(e(o).eq(i).show(),e(l).eq(i).removeClass("e-hide"),n&&e(n).eq(i).removeClass("e-hide"),e(c).eq(i).show()),a._frozenColumnsLength>0){if(i<a._frozenColumnsLength){if(h=e(a.getRows()[0]),d=e(d[0]),a._gridRows&&e(a.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length>0){var m=parseInt(e(a.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan"));m=s?m-1:m+1,e(a.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",m)}}else if(h=e(a.getRows()[1]),d=e(d[1]),u=!1,p=i-this._frozenColumnsLength,a._gridRows&&e(a.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length>0){var m=parseInt(e(a.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan"));m=s?m-1:m+1,e(a.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",m)}}else if(a._gridRows&&e(a.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length>0){var m=parseInt(e(a.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan"));m=s?m-1:m+1,e(a.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",m)}if(h.each(function(){var t=e(this).children("td").eq(p);s?e(t).addClass("e-hide"):e(t).removeClass("e-hide"),r.showSummaryRow&&e(t).hasClass("e-summaryrowcell")&&u&&a._updateSummaryRowTitleCell(o,t[0].parentElement)}),r.showTotalSummary){var g=a._$footertableContent.find("colgroup").find("col");s?e(g).eq(i).hide():e(g).eq(i).show(),d.each(function(){var t=e(this).children("td").eq(p);s?e(t).addClass("e-hide"):e(t).removeClass("e-hide"),e(t).hasClass("e-footersummaryrowcell")&&a._updateSummaryRowTitleCell(g,t[0].parentElement)})}},_updateHideShowColumnAlignment:function(){var e=this,i=e.model;e._addInitTemplate();var s=e.getScrollElement();i.columnResizeSettings.columnResizeMode!=t.TreeGrid.ColumnResizeMode.FixedColumns||i.isFromGantt||e._updateTableWidth(),s.ejScroller("refresh"),e._updateScrollCss(),e._updateHeaderScrollLeft(),i.showColumnChooser&&(e._renderColumnChooserList(!0),e._updateColumnMenuVisibility())},_treeGridAddEditDialog:function(){if(0!=this.model.columns.length){for(var i,s,a,r,n,o=t.buildTag("div"),l=t.buildTag("form.e-treegridform","",{},{id:this._id+"EditFormDialog"}),d=t.buildTag("table","",{margin:"0 auto"},{}),h=0;h<this.model.columns.length;h++)!this.model.columns[h].visible&&!t.isNullOrUndefined(this.model.columns[h].visible)||"checkboxState"==this.model.columns[h].field||this._isCommandColumn(this.model.columns[h])||(r="tr",n="td",i=t.buildTag(r),s=t.buildTag(n+".e-editdialoglabel","",{"text-align":"right"}),a=t.buildTag(n+".e-editdialogrowcell","",{"text-align":"left"}),0!=this.model.columns[h].allowEditing&&i.append(s.get(0)).append(a.get(0)),void 0==this.model.columns[h].headerText&&(this.model.columns[h].headerText=this.model.columns[h].field),s.append("<label>"+this.model.columns[h].headerText+"</label>"),0!=this.model.columns[h].allowEditing&&this.model.columns[h].field&&t.TreeGrid._initCellEditType(this,a,this._id,h),0==this.model.columns[h].allowEditing&&a.find(".e-field").attr("disabled",!0).addClass("e-disable"),!1===this.model.columns[h].visible&&i.addClass("e-hide"),d.append(i));l.append(d),l.appendTo(o),o=this._renderDiaglogButton(l,o,d),e.templates(this._id+"_JSONDialogEditingTemplate",o.html())}},_treeGridAddEditDialogTemplate:function(){if(0!=this.model.columns.length){var i=t.buildTag("div","",{display:"none"}),s=t.buildTag("form.e-treegridform","",{},{id:this._id+"EditFormDialog"}),a=this.model.editSettings.dialogEditorTemplateID;s.html(e(a).html()),i=this._renderDiaglogButton(s,i),e.templates(this._id+"_JSONdialogTemplateMode",i.html())}},_renderDiaglogButton:function(e,i,s){
var a,r,n,o=this._contextMenuTexts;a="EditFormDialog_",t.isNullOrUndefined(s)?(r=t.buildTag("input.e-save e-button e-btnsub e-flat","",{"margin-left":"33%"},{type:"button",id:a+this._id+"_Save"}),r.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:o.saveText,width:"30%"}),n=t.buildTag("input.e-cancel e-button e-btncan e-flat","",{"margin-left":"7%"},{type:"button",id:a+this._id+"_Cancel"}),n.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:o.cancelText,width:"30%"})):(r=t.buildTag("input.e-save e-button e-btnsub e-flat","",{"margin-left":"0px"},{type:"button",id:a+this._id+"_Save"}),r.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:o.saveText,width:"45%"}),n=t.buildTag("input.e-cancel e-button e-btncan e-flat","",{"margin-left":"10%"},{type:"button",id:a+this._id+"_Cancel"}),n.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:o.cancelText,width:"45%"}));var l,d,h,c=t.buildTag("div","",{},{class:"e-editform-btn e-editdialogbutton"});return t.isNullOrUndefined(s)||(l=t.buildTag("tr"),d=t.buildTag("td.e-editdialoglabel"),h=t.buildTag("td.e-editdialogrowcell")),c.append(r),c.append(n),t.isNullOrUndefined(s)||(h.append(c),l.append(d),l.append(h),s.append(l)),e.appendTo(i),t.isNullOrUndefined(s)?e.append(c):e.append(s),i},updateAllowKeyboardNavigation:function(e){this.model.allowKeyboardNavigation=e},_updateSummaryTitleColumn:function(){var t=this,i=this.model;i.collapsibleTotalSummary&&0==this._summaryColumnIndex&&(i.columns[this._summaryColumnIndex].visible&&!e("#"+t._id+"-footersummaryrow").find(".e-summarytitle").hasClass("e-summarycell")?(e("#"+t._id+"-footersummaryrow").find(".e-summarytitle").addClass("e-summarycell"),e("#"+t._id+"-footersummaryrow").find(".e-summarycell").css({overflow:"hidden","padding-left":"25px",float:"none"}),e("#"+t._id+"-footersummaryrow").find(".e-summarytitle").parent().addClass("e-summaryindend").css({"padding-left":"0px"})):!i.columns[this._summaryColumnIndex].visible&&e("#"+t._id+"-footersummaryrow").find(".e-summarytitle").hasClass("e-summarycell")&&(e("#"+t._id+"-footersummaryrow").find(".e-summarytitle").removeClass("e-summarycell"),e("#"+t._id+"-footersummaryrow").find(".e-summarytitle").css({"padding-left":"0px",float:"left"}),e("#"+t._id+"-footersummaryrow").find(".e-summarytitle").parent().removeClass("e-summaryindend").css({"padding-left":"10px"})))},_refreshFooterSummaryRecords:function(){var i=this;if(this.model.showTotalSummary&&i._$footerContainer.length>0){if(this._frozenColumnsLength>0)i._$footerContainer.html(this._renderSummaryByFrozenDesign()),this._renderFrozenSummary();else{var s=t.buildTag("table.e-table e-zerospace#"+i._id+"summarye-table","",{top:"0px"}),a=t.buildTag("tbody");s.append(i.getContentTable().find("colgroup").clone()).append(a),a.html(e.render[this._id+"_Template"](i._footerSummaryRecord)),i._$footerContainer.empty().append(s)}i._$footertableContent=i._$footerContainer.find(".e-table"),i._updateSummaryTitleColumn()}},_updateHeaderScrollLeft:function(e){var i=this;t.isNullOrUndefined(e)&&(e=i.getScrollElement().ejScroller("option","scrollLeft")),this._frozenColumnsLength>0?(i._$gridHeaderContainer.find("#e-movableheader"+this._id).scrollLeft(e),i.model.showTotalSummary&&i._$footerContainer&&i._$footerContainer.find("#e-movablefooter"+this._id).scrollLeft(e)):(i._$gridHeaderContainer.scrollLeft(e),i.model.showTotalSummary&&i._$footerContainer&&i._$footerContainer.scrollLeft(e))},updateColumns:function(e){var i=this,s=this.model;t.isNullOrUndefined(e)||(s.columns=e),s.isFromGantt&&s.enableSerialNumber&&i._updateTreeColumnIndex(),i._refreshFrozenColumns(),i._updateWrapRowHeights(null,"refreshAll"),s.isFromGantt&&i._updateAddEditDialogTemplate()},updateToGanttColumns:function(){var t=this,i=t.model,s=i.columns;e("#"+t._id.replace("ejTreeGrid","")).data("ejGantt").updateGanttColumns(s)},_updateAddEditDialogTemplate:function(){var t,i=this;t=e("#"+i._id.replace("ejTreeGrid","")).data("ejGantt"),t.addDialogTemplate(),t.editDialogTemplate()},_refreshFrozenColumns:function(i){var s=this,a=this.model,r=!1;if(s._initFrozenColumns(),s._processEditing(),s._$gridHeaderContent.replaceWith(s._renderGridHeader()),s._addInitTemplate(),a.isFromGantt&&s._$gridContent.removeClass("e-borderbox"),this._frozenColumnsLength>0&&0==s._$frozenTableContent.length){r=!0;var n=s._$gridContent.css("width"),o=s._$gridContent.css("height");s._$gridContent.ejScroller("destroy"),s._$gridContent.css("width",n),s._$gridContent.css("height",o),s._$gridContainer.html(s._renderByFrozenDesign()),s.setGridContentTable(s._$gridContainer.find(".e-table")),a.allowTextWrap&&!a.enableVirtualization?s._$gridContainer.find("#e-movablecontent"+s._id+",#e-movablecontentdiv"+s._id+",#e-frozencontentdiv"+s._id).css("height","auto"):s._$gridContainer.find("#e-movablecontent"+s._id+",#e-movablecontentdiv"+s._id+",#e-frozencontentdiv"+s._id).css("height",s._$gridContainer.css("height")),s._renderScroller(!0)}else if(s._$frozenTableContent.length>0&&0==this._frozenColumnsLength){r=!0,s._$gridContent.find("#e-movablecontainer"+s._id).ejScroller("destroy");var l=t.buildTag("table.e-table e-zerospace#"+s._id+"e-table","",{top:"0px",position:"relative"}),d=t.buildTag("tbody");l.append(s.getHeaderTable().find("colgroup").clone()).append(d),s._$gridContainer.html(l),s.setGridContentTable(l),s._renderScroller(!0)}if(s._$frozenTableContent=e("#"+s._id+"frozene-table"),s._$movableTableContent=e("#"+s._id+"movablee-table"),s._$tableContent=e("#"+s._id+"e-table"),a.showTotalSummary&&s._$footerContainer.length>0&&!i&&s._refreshFooterSummaryRecords(),r&&s.onScrollHelper(0),!i){var h={};h.requestType=t.TreeGrid.Actions.Refresh,s._isRendered=!1,s.sendDataRenderingRequest(h),s._isRendered=!0}s.setWidthToColumns(),s._trigger("headerRefresh"),s._isRendered=!0,i||(s._trigger("refresh"),this._eventBindings()),this._hideCollapsedDetailsRows(),i||(s.getScrollElement().ejScroller("refresh"),s._updateScrollCss(),a.isFromGantt&&s._trigger("refreshScrollCss")),(a.showColumnChooser||a.contextMenuSettings.showContextMenu)&&s._renderColumnChooserList(!0),s._updateHeaderScrollLeft(),a.isFromGantt&&(s._addEmptyColumntoGrid(),s.updateToGanttColumns())},freezePrecedingColumns:function(e){var i=this,s=this.model,a=s.columns,r=this.getColumnByField(e),n=a.indexOf(r);if(i._saveEditedElements(),this._clearContextMenu(),this._removeDetailsRow(),this._clearColumnMenu(),t.isNullOrUndefined(r)||-1==n)return!1;if(0==n&&n<=this._frozenColumnsLength)return!1;var o=this._getFrozenColumnWidth(n);if((o+=18)>this._gridWidth)return!1;for(var l=0;l<n;l++)a[l].isFrozen=!0;i._refreshFrozenColumns(),i._updateWrapRowHeights(null,"virtualRefresh")},freezeColumn:function(e,i){var s=this,a=this.model,r=a.columns,n=this.getColumnByField(e);if(s._saveEditedElements(),this._clearContextMenu(),this._removeDetailsRow(),this._clearColumnMenu(),"cell"==a.selectionSettings.selectionMode&&s.clearSelection(),t.isNullOrUndefined(n))return!1;if(s._frozenColumnsLength==a.columns.length-1&&i)return!1;if(n.isFrozen==i)return!1;var o=this._getFrozenColumnWidth(),l=r.indexOf(n);if((o+=i?this.columnsWidthCollection[l]+18:-this.columnsWidthCollection[l])>this._gridWidth)return!1;n.isFrozen=i,s._refreshFrozenColumns(),i&&(s._allowFreezingDefault=this._frozenColumnsLength>0),s._off(s.element,"mousewheel DOMMouseScroll",s._mouseWheel),this._frozenColumnsLength&&s._on(s.element,"mousewheel DOMMouseScroll",s._mouseWheel),s._updateWrapRowHeights(null,"virtualRefresh")},updateCheckboxColumn:function(i){var s=this,a=s.model,r=a.columns,n=s.getColumnByField(i);if(s._checkboxSelection){if(e.each(r,function(e,t){t.showCheckbox=!1}),!t.isNullOrUndefined(n)){var o=r.indexOf(n);o>-1&&(r[o].showCheckbox=!0)}var l={},d={};l.selectionType=t.TreeGrid.SelectionType.Checkbox,d.selectionSettings=l,s._refreshSelectionSettings(d,"selectionSettings")}},_refreshSelectionSettings:function(i,s){var a=this,r=a.model,n=!1;n=!t.isNullOrUndefined(i[s].selectionType)||!t.isNullOrUndefined(i[s].selectionMode),"selectionType"==s?(r.selectionSettings.selectionType=i[s],n=!0):"selectionMode"==s?(r.selectionSettings.selectionMode=i[s],n=!0,r.showColumnChooser&&r.showColumnOptions&&a.columnAddDialogTemplate()):e.extend(r.selectionSettings,i[s]);var o=r.selectionSettings.selectionType==t.TreeGrid.SelectionType.Checkbox&&r.selectionSettings.selectionMode==t.TreeGrid.SelectionMode.Row;if((!t.isNullOrUndefined(i[s].enableHierarchySelection)&&r.selectedItems.length>0||!o&&a._checkboxSelection)&&(a._isFromSetmodel=!0,a.selectAllRows(!1),a._isFromSetmodel=!1),a._checkboxSelection||o){if(a._checkboxSelection=o,a._processEditing(),!o&&"checkboxState"==a._checkboxColumnName||r.columns[0].nonColumn&&"checkboxState"!=a._checkboxColumnName){var l=r.columns[r.treeColumnIndex];if(r.columns[0].isFrozen){r.columns[0].isFrozen=!1,a._frozenColumnsLength-=1;var d=a._frozenColumns.indexOf(r.columns[0]);a._frozenColumns.splice(d,1),r.scrollSettings.frozenColumns=this._frozenColumnsLength}r.columns.splice(0,1),l&&(r.treeColumnIndex=r.columns.indexOf(l))}a._checkboxSelection||(a._checkboxColumnName=null),a._$gridHeaderContent.replaceWith(a._renderGridHeader()),a._setWidthToHeaders(),a._trigger("headerRefresh"),r.allowFiltering&&a._resizeFilteringElements(),n&&(a._addInitTemplate(),this.renderRecords()),a.setWidthToColumns(),a.getScrollElement().ejScroller("refresh"),a._updateScrollCss(),a._updateHeaderScrollLeft(),r.selectedItems.length>0&&a.selectAllRows()}r.isFromGantt&&a._processEditing()},_setModel:function(i){var s=this,a=s.model,r=s.getUpdatedRecords();for(var n in i)switch(n){case"enableAltRow":a.enableAltRow=i[n],s._addInitTemplate(),s.renderRecords(m),s._updateWrapRowHeights("header","refreshAll");break;case"allowFiltering":!a.allowFiltering&&s._filteredColumnValueID.length>0&&s._clearAllFilter(s._filteredColumnValue),a.allowFiltering=i[n],s._initiateSetModel(),a.allowFiltering=i[n];var o=s.getScrollElement().ejScroller("instance"),l=o.scrollLeft(),d=0,h=o.scrollTop();if(s._$gridHeaderContent.replaceWith(s._renderGridHeader()),s._setWidthToHeaders(),s._trigger("headerRefresh"),a.showTotalSummary&&(d=s.element.find(".e-footersummaryrowdiv").outerHeight()),e("#"+s._id).addClass("e-treegrid-overflow"),s._viewPortHeight=s.element.height()-(s._getNonContentHeight()+d),e("#"+s._id).removeClass("e-treegrid-overflow"),s._frozenColumnsLength>0&&s._$gridContent.css("height",s._viewPortHeight),o.option("height","auto"==a.sizeSettings.height?0:s._viewPortHeight),a.enableVirtualization){var c=a.currentViewData.length,u=a.rowHeight;u+=a.showDetailsRow&&!a.showDetailsRowInfoColumn?a.detailsRowHeight:0,c*u<s._viewPortHeight&&(c>0?(h-=s._viewPortHeight-(c-1)*u)<0&&(h=0):(s.processBindings(),s.renderRecords()))}a.showColumnChooser&&a.showColumnOptions&&s.columnAddDialogTemplate(),a.allowFiltering&&"menu"==a.filterSettings.filterType&&0==s._renderedFilterMenuDialog.length&&s._renderFilterMenu(),this.setWidthToColumns(),o.scrollY(h,!0),o.scrollX(l,!0),s._updateHeaderScrollLeft(l),s._updateScrollCss(),s._updateWrapRowHeights("row,total","refreshAll");break;case"enableResize":s.model.enableResize=i[n],a.enableResize?s._on(e(window),"resize",s._windowResize):s._off(e(window),"resize",s._windowResize);break;case"isResponsive":s.model.isResponsive=i[n],a.isResponsive?(s._on(e(window),"resize",s._windowResize),e("#"+s._id+"_toolbarItems").addClass("e-treegridadaptivetoolbar"),s._mediaQueryUpdate()):(s._off(e(window),"resize",s._windowResize),e("#"+s._id+"_toolbarItems").removeClass("e-treegridadaptivetoolbar"),s._mediaQueryUpdate());break;case"enableVirtualization":a.enableVirtualization=i[n];var p=(s._prevSelectedItem,s.selectedRowIndex()&&r[s.selectedRowIndex()]);s._vScrollDist=1,s.processBindings(),a.enableVirtualization||(this._frozenColumnsLength>0?(s._$frozenTableContent.css({top:0}),s._$movableTableContent.css({top:0})):s._$tableContent.css({top:0})),p&&s.selectedRowIndex(r.indexOf(p));var m={};m.requestType=t.TreeGrid.Actions.Refresh,s.sendDataRenderingRequest(m),s._updateWrapRowHeights(null,"refreshAll"),s._isRowEdit=a.isEdit=!1,s._cancelSaveTools(),s._clearColumnMenu(),s._clearContextMenu(),this._removeDetailsRow(),s._vScrollDist=0;break;case"allowColumnResize":a.allowColumnResize=i[n],a.allowColumnResize&&(s._resizer=new t.gridFeatures.gridResize(s)),s._enableColumnResizeEvents();break;case"allowSorting":a.allowSorting=i[n],s.sortSetting(i[n]),a.showColumnChooser&&a.showColumnOptions&&s.columnAddDialogTemplate();break;case"allowPaging":var g=s.element.find("#"+s._id+"Pager");if(a.allowPaging){s._updateTotalRecordsCount(),s.element.append(s._renderGridPager()),s.element.append(g),s.element.find(".e-pager").css({width:s._gridWidth-2});var o=s.getScrollElement().ejScroller("instance"),l=o.scrollLeft(),h=o.scrollTop();s._viewPortHeight=s._getViewPortHeight(),a.showTotalSummary&&(s._viewPortHeight-=s._$totalSummaryRowContainer.outerHeight()),s._frozenColumnsLength>0&&s._$gridContent.css("height",s._viewPortHeight),o.option("height","auto"==a.sizeSettings.height?0:s._viewPortHeight),o.scrollY(h,!0),o.scrollX(l,!0),s._pagerHeight=e(g).outerHeight(),s.gotoPage()}else{var f=e(g).outerHeight();e(g).remove(),s._viewPortHeight=s._viewPortHeight+f,this._frozenColumnsLength>0&&s._$gridContent.css("height",s._viewPortHeight),s.getScrollElement().ejScroller({height:s._viewPortHeight}),a.pageSettings.totalRecordsCount>0?(a.pageSettings.totalRecordsCount=null,s._refreshDataSource()):s.refreshContent(),s.renderRecords(),s._isRefreshAddedRecord=!1}s._updateWrapRowHeights("header","refreshAll");break;case"dragTooltip":var _=i[n].tooltipItems;_&&!Array.isArray(_)&&(_=_.length>0?_.split(","):[],i[n].tooltipItems=_),e.extend(a.dragTooltip,i[n]),s._createDragTooltipTemplate(),s.refreshContent();break;case"allowDragAndDrop":a.allowDragAndDrop=i[n];jQuery.uaMatch(navigator.userAgent);s.refreshContent();break;case"sortSettings":e.extend(a.sortSettings,i[n]),s.refreshContent();var v={};v.requestType=t.TreeGrid.Actions.Sorting,s.sendDataRenderingRequest(v);break;case"allowSelection":a.allowSelection=i[n],a.allowSelection||(s._checkboxSelection&&a.selectedItems.length>0&&(s._isFromSetmodel=!0,s.selectAllRows(!1),s._isFromSetmodel=!1),s.clearSelection(-1),s.selectedRowIndex(-1),s.model.selectedItem=null,s._cancelSaveTools());break;case"allowTextWrap":case"headerTextOverflow":"allowTextWrap"==n&&(a.allowTextWrap=i[n]),"headerTextOverflow"==n&&(a.headerTextOverflow=i[n],s._$gridHeaderContent.replaceWith(s._renderGridHeader()),s.setWidthToColumns(),s._trigger("headerRefresh"),s.getScrollElement().ejScroller("refresh"),s._updateScrollCss()),"allowTextWrap"==n&&(s._addInitTemplate(),s.renderRecords(m),s.model.showTotalSummary&&s._createTotalSummaryRow()),s._updateWrapRowHeights(null,"refreshAll");break;case"selectionType":case"selectionMode":case"selectionSettings":this._initiateSetModel(),s.clearAllSelection(),s._refreshSelectionSettings(i,n),s.model.allowSelection&&"multiple"==s.model.selectionSettings.selectionType&&0==e("#"+s._id+"_selectionpopup").length&&!s.model.isFromGantt&&s._renderMultiSelectionIndicator();break;case"showSummaryRow":if(a.showSummaryRow=i[n],a.showSummaryRow){s._createSummaryRow();var v={};v.requestType=t.TreeGrid.Actions.Refresh,s.sendDataRenderingRequest(v)}else if(e(s.element).find(".e-summaryrow").hide(),a.updatedRecords=s._spliceSummaryRows(a.updatedRecords),a.allowPaging){s._updateCurrentViewData();var v={};v.requestType=t.TreeGrid.Actions.Refresh,s.sendDataRenderingRequest(v)}s.updateCollapsedRecordCount(),s._updateWrapRowHeights("header"),s.updateHeight(),(a.allowTextWrap||"wrap"==a.headerTextOverflow)&&s._updateGridContentHeight();break;case"totalSummaryHeight":if(!a.showTotalSummary)return;s._createTotalSummaryRow(),s._viewPortHeight=s._getViewPortHeight(),s._viewPortHeight-=s._$totalSummaryRowContainer.outerHeight(),s._updateSummaryHeight();break;case"collapsibleTotalSummary":if(!a.showTotalSummary)return;if(1==a.summaryRows.length)return void(a.collapsibleTotalSummary=!1);s._addInitTemplate(),s._createTotalSummaryRow(),a.collapsibleTotalSummary||(s._viewPortHeight=s._getViewPortHeight(),s._viewPortHeight-=e(s._$totalSummaryRowContainer).outerHeight(),s._updateSummaryHeight());break;case"showTotalSummary":a.showTotalSummary=i[n],a.showTotalSummary?(s._createTotalSummaryRow(),s._viewPortHeight=s._getViewPortHeight(),s._viewPortHeight-=e(s._$totalSummaryRowContainer).outerHeight()):(e(s.element).find(".e-footersummaryrowdiv").remove(),s._$totalSummaryRowContainer=null,s._$footertableContent=null,s._$footerContainer=null,s._footerSummaryRecord=[],s._footerSummaryRows=[],s._viewPortHeight=s._getViewPortHeight()),s._updateSummaryHeight();break;case"selectedRowIndex":if(this.isEdit||this._isRowEdit)this.selectedRowIndex(r.indexOf(s._prevSelectedItem));else{if(this.selectedRowIndex()>=0&&!t.isNullOrUndefined(this.selectedRowIndex())&&a.allowSelection&&r.length>this.selectedRowIndex()&&this.getExpandStatus(r[this.selectedRowIndex()])){var b=this.selectedRowIndex();if(!s._rowSelectingEventTrigger(this._previousIndex,b)){if(a.showSummaryRow){var x=s._spliceSummaryRows(a.updatedRecords),y=x[b];b=r.indexOf(y)}s.selectRows(b),s._rowSelectedEventTrigger(b)}}else s.clearSelection(-1),s.selectedRowIndex(-1),s.model.selectedItem=null,s._previousIndex=-1;s._cancelSaveTools()}break;case"selectedCellIndexes":a.allowSelection&&"cell"==a.selectionSettings.selectionMode&&s.selectCells(i[n]);break;case"showStackedHeader":case"stackedHeaderRows":a.showStackedHeader&&(a.stackedHeaderRows&&a.stackedHeaderRows.length>0||i.stackedHeaderRows&&i.stackedHeaderRows.length>0)?(t.getObject("stackedHeaderRows.length",i)&&(a.stackedHeaderRows=i.stackedHeaderRows),s.getHeaderTable().find(".e-stackedHeaderRow").length>0&&s.getHeaderTable().find(".e-stackedHeaderRow").remove(),s._refreshStackedHeader()):s.getHeaderTable().find(".e-stackedHeaderRow").length>0&&s.getHeaderTable().find(".e-stackedHeaderRow").remove();break;case"editSettings":e.extend(a.editSettings,i[n]),s._processEditing(),s._enableEditingEvents(),s._updateToolbarItems(),a.editSettings.allowDeleting&&a.editSettings.showDeleteConfirmDialog&&t.isNullOrUndefined(s._confirmDialog)&&s._renderConfirmDialog();break;case"allowKeyboardNavigation":a.allowKeyboardNavigation=i[n];break;case"dataSource":var w={};w.requestType=t.TreeGrid.Actions.RefreshDataSource,w.isUpdateColumns=!1,s._isRowEdit||s.model.isEdit||s._trigger("actionBegin",w)||(s._fieldNamesToQuery=[],s._assignedIdCollections=[],s._assignedParendIDs=[],s._refreshDataSource(w));break;case"columns":a.columns=i[n].slice(0),s._validateColumnFields(),s._validateColumnVisible(!0),s._refreshFrozenColumns(),s._updateWrapRowHeights(null,"refreshAll");break;case"rowHeight":a.rowHeight=i[n],s._addInitTemplate(),s.renderRecords(m),s.model.showTotalSummary&&(s._createTotalSummaryRow(),s._viewPortHeight=s._getViewPortHeight(),s._viewPortHeight-=s._$totalSummaryRowContainer.outerHeight(),s._updateSummaryHeight()),s.updateHeight();break;case"treeColumnIndex":s.columnIndex(i[n]);break;case"showColumnChooser":a.showColumnChooser=i[n],s._$gridHeaderContent.replaceWith(s._renderGridHeader()),s.setWidthToColumns(),s._trigger("headerRefresh"),s.getScrollElement().ejScroller("refresh"),s._updateScrollCss(),a.showColumnChooser?(s._renderColumnChooser(),a.allowFiltering&&"menu"==a.filterSettings.filterType&&0==s._renderedFilterMenuDialog.length&&s._renderFilterMenu()):(s._clearColumnMenu(),e("#"+s._id+"ccDiv_wrapper").remove(),e("#"+s._id+"filterMenu_wrapper").remove()),s._updateWrapRowHeights("row,total","refreshAll"),a.isFromGantt&&(s._addEmptyColumntoGrid(),this._updateHeaderScrollLeft(this.getScrollElement().ejScroller("model.scrollLeft")));break;case"showColumnOptions":a.showColumnOptions=i[n],s._$gridHeaderContent.replaceWith(s._renderGridHeader()),s.setWidthToColumns(),s._trigger("headerRefresh"),s.getScrollElement().ejScroller("refresh"),s._updateScrollCss(),a.showColumnChooser&&a.showColumnOptions?(s.columnAddDialogTemplate(),s._renderUpdateConfirmDialog()):(s._clearColumnMenu(),e("#"+s._id+"ccDiv_wrapper").remove(),e("#"+s._id+"filterMenu_wrapper").remove()),s._updateWrapRowHeights("row,total","refreshAll"),a.isFromGantt&&s._addEmptyColumntoGrid();break;case"locale":s._clearContextMenu(),s._clearColumnMenu(),s._removeDetailsRow(),a.locale=i[n],s._setCultureInfo(),s._processEditing(),s._addInitTemplate(),s.refreshContent(),s._$gridHeaderContent.replaceWith(s._renderGridHeader()),s.renderRecords(m),s.setWidthToColumns(),s._trigger("headerRefresh"),s.getScrollElement().ejScroller("refresh"),s._updateScrollCss(),a.showColumnChooser&&s._renderColumnChooserList(!0),a.toolbarSettings.showToolbar&&s._updateToolbar(),a.allowPaging&&s.getPager().ejPager("option",i[n]).ejPager("refreshPager"),s.model.showColumnChooser&&s.model.showColumnOptions&&(s.columnAddDialogTemplate(),s._renderUpdateConfirmDialog()),a.allowFiltering&&"menu"==a.filterSettings.filterType&&s._renderFilterMenu(),s._updateWrapRowHeights(null,"refreshAll");break;case"toolbarSettings":e.extend(s.model.toolbarSettings,i[n]),s._updateToolbar(),s._updateWrapRowHeights("header","refreshAll");break;case"contextMenuSettings":e.extend(s.model.contextMenuSettings,i[n]),a.contextMenuSettings.showContextMenu||s._clearContextMenu(),this._removeDetailsRow();break;case"enableCollapseAll":a.enableCollapseAll=i[n],a.enableCollapseAll?s.collapseAll():s.expandAll();break;case"showDetailsRow":a.showDetailsRow=i[n],this._updateDetailsRowProperties("showDetailsRow");break;case"detailsRowHeight":a.detailsRowHeight=i[n],this._updateDetailsRowProperties("detailsRowHeight");break;case"detailsTemplate":a.detailsTemplate=i[n],this._updateDetailsRowProperties("detailsTemplate");break;case"showDetailsRowInfoColumn":a.showDetailsRowInfoColumn=i[n],this._updateDetailsRowProperties("showDetailsRowInfoColumn");break;case"altRowTemplateID":this._initiateSetModel(),a.altRowTemplateID=i[n],s._addInitTemplate(),s.renderRecords(m),s._updateWrapRowHeights("header"),this.updateHeight(),(a.allowTextWrap||"wrap"==a.headerTextOverflow)&&s._updateGridContentHeight();break;case"rowTemplateID":this._initiateSetModel(),a.rowTemplateID=i[n],s._addInitTemplate(),s.renderRecords(m),s._updateWrapRowHeights("header"),this.updateHeight(),(a.allowTextWrap||"wrap"==a.headerTextOverflow)&&s._updateGridContentHeight();break;case"pageSettings":if(this._initiateSetModel(),a.allowPaging){var C={};e.extend(a.pageSettings,i[n]),e.extend(C,a.pageSettings),delete C.template,this.getPager().ejPager("option",C).ejPager("refreshPager"),i[n].totalRecordsCount>0?s._refreshDataSource():s.gotoPage()}break;case"sizeSettings":this._initiateSetModel(),e.extend(a.sizeSettings,i[n]),this._calculateDimensions(),this._getViewPortHeight()<=0&&(a.sizeSettings.height="450px",this._updateElementHeight()),this._windowResize();break;case"readOnly":a.readOnly=i[n];break;case"showGridCellTooltip":a.showGridCellTooltip=i[n];break;case"showGridExpandCellTooltip":a.showGridExpandCellTooltip=i[n];break;case"allowMultiSorting":a.allowMultiSorting=i[n];break;case"query":t.isNullOrUndefined(i[n])?a.query=t.Query():a.query=i[n],s._refreshDataSource();break;case"filterSettings":if(a.allowFiltering){if(i.filterSettings.filterType||"filterbar"!=a.filterSettings.filterType)if(i.filterSettings.filterType){s.clearFilter(),a.allowFiltering=!0,e.extend(s.model.filterSettings,i[n]),s._initiateSetModel(),s._isExcelFilter&&(s._isExcelFilter=!1,s._excelFilter.resetExcelFilter(),s._excelFilter=null,s._excelColTypes=[]);var o=s.getScrollElement().ejScroller("instance"),l=o.scrollLeft(),h=o.scrollTop();if(s._$gridHeaderContent.replaceWith(s._renderGridHeader()),s._setWidthToHeaders(),s._trigger("headerRefresh"),e("#"+s._id).addClass("e-treegrid-overflow"),s._viewPortHeight=s._getViewPortHeight(),e("#"+s._id).removeClass("e-treegrid-overflow"),"menu"==a.filterSettings.filterType&&0==s._renderedFilterMenuDialog.length?s._renderFilterMenu():"excel"==a.filterSettings.filterType&&s._renderExcelFilter(),s._frozenColumnsLength>0&&s._$gridContent.css("height",s._viewPortHeight),o.option("height","auto"==a.sizeSettings.height?0:s._viewPortHeight),a.enableVirtualization){var c=a.currentViewData.length,u=a.rowHeight;u+=a.showDetailsRow&&!a.showDetailsRowInfoColumn?a.detailsRowHeight:0,c*u<s._viewPortHeight&&(c>0?(h-=s._viewPortHeight-(c-1)*u)<0&&(h=0):(s.processBindings(),s.renderRecords()))}a.showColumnChooser&&a.showColumnOptions&&s.columnAddDialogTemplate(),this.setWidthToColumns(),o.scrollY(h,!0),o.scrollX(l,!0),s._updateHeaderScrollLeft(l),s._updateScrollCss()}else"excel"==a.filterSettings.filterType&&(s._excelColTypes=[],s._excelFilter.resetExcelFilter(),s._excelFilter=null,s._renderExcelFilter());else{var S,T,m={};e.extend(s.model.filterSettings,i[n]),S=s.model.filterSettings,T=t.isNullOrUndefined(S.filterBarMode)?"immediate":S.filterBarMode;for(var R=e.extend([],S.filteredColumns),k=0;k<a.columns.length;k++)a.columns[k].allowFiltering&&s._clearFilterElementValue(a.columns[k]);S.filteredColumns=R,S.filterBarMode=T,m.requestType="filtering";for(var O=0;O<R.length;O++)e("#"+s._id+"_"+R[O].field.split(".").join("")+"_filterbarcell").val(R[O].value);s._ensureDataSource(m),s._off(s.element,"keyup",".e-filterbarcell input",s._filterBarHandler),s._off(s.element,"click",".e-filterbarcell .e-checkbox",s._filterBarHandler),"immediate"==T&&(s._on(s.element,"keyup",".e-filterbarcell input",s._filterBarHandler),s._off(s.element,"click",".e-filterbarcell .e-checkbox")._on(s.element,"click",".e-filterbarcell .e-checkbox",s._filterBarHandler))}i.filterSettings.filterHierarchyMode&&s.clearFilter()}break;case"searchSettings":var D=i[n];for(var I in D)switch(I){case"searchHierarchyMode":s.model.searchSettings.searchHierarchyMode=D[I],s.element.find("input.e-searchinput").val(""),e("span.e-searchcancel").addClass("e-hide"),s.search("")}case"columnResizeSettings":var j,L,A;this._initiateSetModel(),e.extend(a.columnResizeSettings,i[n]),this._updateGridResizeSettings();a.columnResizeSettings.columnResizeMode==t.TreeGrid.ColumnResizeMode.FixedColumns?this._updateTableWidth():(this._frozenColumnsLength>0?(j=e(this.getHeaderTable()[1]),L=e(this.getContentTable()[1]),A=a.showTotalSummary?e(this._$footertableContent[1]):null):(j=this.getHeaderTable(),L=this.getContentTable(),A=a.showTotalSummary?e(this._$footertableContent[0]):null),j.css("width","").removeClass("e-tableLastCell"),L.css("width","").removeClass("e-tableLastCell"),A&&A.css("width","").removeClass("e-tableLastCell")),this._updateScrollCss();break;case"cssClass":this.element.removeClass(s._cssClass).addClass(i[n]),this.model.allowPaging&&e("#"+this._id+"Pager").ejPager("model.cssClass",i[n]),a.toolbarSettings.showToolbar&&e("#"+s._id+"_toolbarItems").ejToolbar("model.cssClass",i[n]),s._updateConfirmDialog&&s._updateConfirmDialog.data("ejDialog")&&s._updateConfirmDialog.ejDialog("model.cssClass",i[n]);for(var E=0;E<s._renderedFilterMenuDialog.length;E++)"stringedit"==s._renderedFilterMenuDialog[E]?(e("#"+this._id+"filterStringMenuDiv_wrapper").find(".e-dropdownlist").ejDropDownList("model.cssClass",i[n]),e("#"+this._id+"filterStringMenuDiv_wrapper").find(".e-button").ejButton("model.cssClass",i[n]),e("#"+this._id+"filterStringMenuDiv_wrapper").find(".e-autocomplete").ejAutocomplete("model.cssClass",i[n])):"numericedit"==s._renderedFilterMenuDialog[E]?(e("#"+this._id+"filterNumericMenuDiv_wrapper").find(".e-dropdownlist").ejDropDownList("model.cssClass",i[n]),e("#"+this._id+"filterNumericMenuDiv_wrapper").find(".e-button").ejButton("model.cssClass",i[n]),e("#"+this._id+"filterNumericMenuDiv_wrapper").find(".e-numerictextbox").ejNumericTextbox("model.cssClass",i[n])):"datepicker"==s._renderedFilterMenuDialog[E]?(e("#"+this._id+"filterDatepickerMenuDiv_wrapper").find(".e-dropdownlist").ejDropDownList("model.cssClass",i[n]),e("#"+this._id+"filterDatepickerMenuDiv_wrapper").find(".e-button").ejButton("model.cssClass",i[n]),e("#"+this._id+"filterDatepickerMenuDiv_wrapper").find(".e-datepicker").ejDatePicker("model.cssClass",i[n])):"datetimepicker"==s._renderedFilterMenuDialog[E]?(e("#"+this._id+"filterDatetimePickerMenuDiv_wrapper").find(".e-dropdownlist").ejDropDownList("model.cssClass",i[n]),e("#"+this._id+"filterDatetimePickerMenuDiv_wrapper").find(".e-button").ejButton("model.cssClass",i[n]),e("#"+this._id+"filterDatetimePickerMenuDiv_wrapper").find(".e-datetimepicker").ejDateTimePicker("model.cssClass",i[n])):"#"+s._renderedFilterMenuDialog[E]=="dropdownedit"?(e("#"+this._id+"filterDropdownMenuDiv_wrapper").find(".e-dropdownlist").ejDropDownList("model.cssClass",i[n]),e("#"+this._id+"filterDropdownMenuDiv_wrapper").find(".e-button").ejButton("model.cssClass",i[n])):"#"+s._renderedFilterMenuDialog[E]=="booleanedit"&&(e("#"+this._id+"filterBooleanMenuDiv_wrapper").find(".e-dropdownlist").ejDropDownList("model.cssClass",i[n]),e("#"+this._id+"filterBooleanMenuDiv_wrapper").find(".e-button").ejButton("model.cssClass",i[n]));this.columnAddDialogTemplate(),e("#"+s._id+"ConfirmDialog_wrapper").find(".e-button").ejButton("model.cssClass",i[n]),this.model.editSettings.allowEditing&&"dialogEditing"==this.model.editSettings.editMode&&(t.isNullOrUndefined(s.model.editSettings.dialogEditorTemplateID)||""==s.model.editSettings.dialogEditorTemplateID)?s._treeGridAddEditDialog():this.model.editSettings.allowEditing&&"dialogEditing"==this.model.editSettings.editMode&&!t.isNullOrUndefined(s.model.editSettings.dialogEditorTemplateID)&&""!=s.model.editSettings.dialogEditorTemplateID&&s._treeGridAddEditDialogTemplate(),a.showColumnChooser&&this._renderColumnChooserList(!0),s._cssClass=i[n];break;case"enableLoadOnDemand":a.enableLoadOnDemand=i[n],s._refreshDataSource()}},_updateSummaryHeight:function(){var e,i=this,s=this.model,a=i.getScrollElement().ejScroller("instance"),r=a.scrollLeft(),n=a.scrollTop();if(e=n,i._frozenColumnsLength>0&&i._$gridContent.css("height",i._viewPortHeight),a.option("height","auto"==s.sizeSettings.height?0:i._viewPortHeight),s.enableVirtualization){var o=s.currentViewData.length,l=s.rowHeight;l+=s.showDetailsRow&&!s.showDetailsRowInfoColumn?s.detailsRowHeight:0,o*l<i._viewPortHeight&&(o>0?(n-=i._viewPortHeight-(o-1)*l)<0&&(n=0):(i.processBindings(),i.renderRecords()))}if(a.scrollY(n,!0),a.scrollX(r,!0),i._updateHeaderScrollLeft(r),i._updateScrollCss(),i._updateWrapRowHeights("header","refreshAll"),e==n){i._updateCurrentViewData();var d={};d.requestType=t.TreeGrid.Actions.Refresh,i.sendDataRenderingRequest(d)}},_initiateSetModel:function(){var e=this;e._saveEditedElements(),e._clearContextMenu(),e._clearColumnMenu(),e._removeDetailsRow()},_updateDetailsRowProperties:function(e){var i=this,s=this.model;if((s.isEdit||this._isRowEdit)&&(this.cancelRowEditCell(),this._cancelSaveTools()),this.clearColumnMenu(),this._clearContextMenu(),this._removeDetailsRow(),s.showDetailsRow&&s.detailsTemplate&&!s.showDetailsRowInfoColumn?i._detailsRowHeight=s.detailsRowHeight:i._detailsRowHeight=0,s.flatRecords.forEach(function(e){s.showDetailsRow&&s.detailsTemplate?e.isDetailsExpanded=!s.showDetailsRowInfoColumn:e.isDetailsExpanded=!1}),"detailsTemplate"!=e&&"detailsRowHeight"!=e||!s.showDetailsRowInfoColumn){i._$gridHeaderContent.replaceWith(i._renderGridHeader()),i._addInitTemplate(),this.onScrollHelper(0),i.refreshContent(),i._isRendered=!1;var a={};a.requestType=t.TreeGrid.Actions.Refresh,i.sendDataRenderingRequest(a),i.setWidthToColumns(),i._isRendered=!0,i._trigger("headerRefresh"),i._trigger("refresh"),this._eventBindings(),this._hideCollapsedDetailsRows(),i.getScrollElement().ejScroller("refresh"),i._updateScrollCss()}else i._addInitTemplate();i._updateWrapRowHeights(null,"refreshAll")},_hideCollapsedDetailsRows:function(){var t=this,i=this.model
;i.showDetailsRow&&i.detailsTemplate&&!i.showDetailsRowInfoColumn&&(this._frozenColumnsLength>0?e(t.getTreeGridRows()[0]).add(t.getTreeGridRows()[1]).filter("tr.e-collapsedrowexpandeddetailsrow").css("display","none"):e(t.getTreeGridRows()).filter("tr.e-collapsedrowexpandeddetailsrow").css("display","none"))},_updateToolbar:function(){var t=this,i=t.model,s=t.getScrollElement().ejScroller("instance"),a=s.scrollLeft(),r=s.scrollTop();e("#"+t._id+"_toolbarItems").remove(),e("#"+t._id+"_toolbarItems_Main").remove(),i.toolbarSettings.showToolbar&&t._renderToolbarTemplate().insertBefore(e("#"+t._id+"e-gridheader")),i.isEdit&&t.cancelEditCell(),t._isRowEdit&&(t.cancelRowEditCell(),t._cancelSaveTools()),t._viewPortHeight=t._getViewPortHeight(),t._frozenColumnsLength>0&&t._$gridContent.css("height",t._viewPortHeight),s.option("height","auto"==i.sizeSettings.height?0:t._viewPortHeight),i.enableVirtualization&&(t.processBindings(),t.renderRecords()),s.option("scrollTop",r),s.option("scrollLeft",a),t._clearContextMenu(),this._removeDetailsRow()},_refreshDataSource:function(i){var s,a=this,r=this.model;(a._isRowEdit||a.model.isEdit)&&a.cancelRowEditCell(),a.resetModelCollections(),a._createdAt="load",i&&i.isUpdateColumns&&(a._validateColumnFields(),a._validateColumnVisible(!0),a._refreshFrozenColumns(!0)),a._dataManager=a.dataSource()instanceof t.DataManager?a.dataSource():null!=a.dataSource()?t.DataManager(a.dataSource()):null,this.dataSource()instanceof t.DataManager||this.dataSource()?(a._isForDataSourceRefresh=!0,a._initDatasource()):null==this.dataSource()&&(s={},s.requestType=t.TreeGrid.Actions.RefreshDataSource,a._ensureDataSource(s),a._createdAt=null,(r.showSummaryRow||r.showTotalSummary)&&a._summaryRow()),e(".e-tooltiptable").remove()},refreshContent:function(){var e=this,i={};i.requestType=t.TreeGrid.Actions.Refresh,e.processBindings(i)},resetModelCollections:function(){var e=this,t=e.model;t.currentViewData=[],t.flatRecords=[],t.parentRecords=[],t.updatedRecords=[],t.summaryRowRecords=[],t.ids=[],e.secondaryDatasource=[],e._parentRecords=[],e._storedIndex=-1,e._idGenerator=-1,e._taskIds=[],e._jsonData=null,e._lastInsertedId=-1},_initPrivateProperties:function(){var i=this,s=this.model;i._isInManualExpandCollapse=!1,i._id=i.element.attr("id"),i.columnsWidthCollection=[],i._cSortedColumn=null,i._taskIds=[],i._maxZIndex=0,i._cSortedDirection=null,i._dataManager=null,i._persistCollapseState=!1,i._filteredRecords=[],i._disabledToolItems=[],i._currentFilterColumn=[],i._fieldColumnNames=[],i._multiSortRequest=null,i._$gridContainer=null,i._$gridContent=null,i._$gridContentTable=null,i._$gridHeaderTable=null,i._$gridHeaderContainer=null,i._$totalSummaryRowContainer=null,i._recordsCount=null,i._$gridRows=null,i._gridRows=null,i._commandColumnLength=0,this._frozenColumnsLength=0,i._initFrozenColumns(),i._allowFreezingDefault=this._frozenColumnsLength>0,i._calculateDimensions(),i._headerColumnNames=[],i._hiddenColumns=[],i._multiSelectCtrlRequest=!1,i._multiSelectShiftRequest=!1,i._ganttTouchTrigger=!1,i._moveRow=!1,i._draggedRecords=[],i._offset=0,i._previousIndex=-1,i._prevRBottom=0,i._prevRTop=0,i._prevScrollTop=0,i._prevScrollLeft=0,i._prevVBottom=0,i._resizer=null,i._scrollTop=0,i._scrollLeft=0,i._searchString="",i._fieldName="",i._selectedCellsinARow=[],i._currentRecordIndex=-1,i._sortedRecords=[],i._storedIndex=-1,i._rowIndex=-1,i._$tableContent=null,i._$footertableContent=null,i._$footerContainer=null,i._summaryExpanded=!0,i._tempsortedrecords=[],i._totalHeight=0,i._viewPortHeight=0,i._recordIndexCount=0,i._totalCollapsedRecordCount=0,i._visibleColumns=[],i._visibleRange=null,i._vScrollDir=1,i._vScrollDist=0,i._cellEditTemplate=e(),i._tooltipTimer,i._totalBorderWidth=2,i._totalBorderHeight=1,i._toolboxTooltipTexts=null,i._contextMenuTexts=null,i._columnMenuTexts=null,i._deleteColumnText=null,i._okButtonText=null,i._cancelButtonText=null,i._confirmDeleteText=null,i._dropDownListBlanksText=null,i._editTypeText=null,i._textAlignType=null,i._clipMode=null,i._dropDownListClearText=null,i._trueText=null,i._falseText=null,i._rowDragIndexes=[],i._dropCancel=!1,i._cellEditingDetails={cellValue:null,rowIndex:-1,columnIndex:-1,fieldName:null,_data:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],data:null},i._previousSelectedCellDetails={rowElement:null,cellElement:null,cellIndex:-1,rowIndex:-1},i._shiftKeyFirstElementDetails={firstElementRowIndex:-1,firstElementCellIndex:-1},i._selectedCellDetails=[],i._focusingRowIndex=-1,i._rowIndexOfLastSelectedCell=-1,i._lastSelectedCellIndex=-1,i._isEnterKeyPressed=!1,i._isShiftKeyNavigation=!1,i._scrollBarHeight=18,i._removedCount=0,i._$gridHeaderContent=null,i.secondaryDatasource=[],i._contextMenuItems=null,i._subContextMenuItems=null,i._createContextMenuTemplate(),i._createColumnMenuTemplate(),i._retrivedData=this.dataSource(),i._createdAt="load",i._isInExpandCollapseAll=!1,i._isLoadonDemand=!1,i._assignedIdCollections=[],i._totalItemCounts=null,i._assignedParendIDs=[],i._fieldNamesToQuery=[],i._isForDataSourceRefresh=!1,i._allParentItems=[],i._queryForLoadonDemand=[],i._pageRecordCountOnDemand=null,i._isFromDemandMethod=!1,i._dataManager=i.dataSource()instanceof t.DataManager?i.dataSource():null!=i.dataSource()?t.DataManager(i.dataSource()):null,i._dragMouseDown=!1,i._dragTooltip=!1,i._dragMouseLeave=!1,i._timerDragDown=null,i._timerDragUp=null,i._isDataManagerUpdate=!1,i._jsonData=null,i._isRefreshAddedRecord=!1,i._isInAdd=!1,i._maxRowIndex=0,i._isRendered=!1,this._updateGridResizeSettings(),i.batchChanges={added:[],deleted:[],changed:[],updatedHierarchyRowIndexData:[]},i._batchEditCancel=!1,i._isSummaryRow=!1,i._flatChildRecords=[],i._footerSummaryRecord=[],i._filteredChildRecords=[],i._parentRecords=[],i._zerothLevelParentRecords=[],i._detailsRowHeight=0,s.showDetailsRow&&s.detailsTemplate&&!s.showDetailsRowInfoColumn&&(i._detailsRowHeight=s.detailsRowHeight),i._isEmptyRow=!1,i._prevSelectedItem=null,i._dataSourcefields=[],i._columnDialogTexts=null,i._columnDialogTitle=null,i._addColumnFields=[],i._addColumnFieldsTxt=[],i._targetColumnIndex=0,i._insertPosition=null,i._updateconfirmDialog=null,i._columnRenameDialog=null,i._renderedSubMenuType=null,i.localizedLabels=i._getLocalizedLabels(),i._gridRecordsCount=s.pageSettings.totalRecordsCount,i._gridPager=null,i._summaryRowsCount=0,i._updatedPageData=[],i._isNextPage=!1,s.selectionSettings.selectionType="single"!=s.selectionSettings.selectionType?s.selectionSettings.selectionType:"single"!=s.selectionType?s.selectionType:s.selectionSettings.selectionType,s.selectionSettings.selectionMode="row"!=s.selectionSettings.selectionMode?s.selectionSettings.selectionMode:"row"!=s.selectionMode?s.selectionMode:s.selectionSettings.selectionMode,i._idGenerator=-1,i._checkboxColumnName=null,i._isFromSetmodel=!1,i._flatFilteredRecords=[],i._checkboxSelection=s.selectionSettings.selectionType==t.TreeGrid.SelectionType.Checkbox&&s.selectionSettings.selectionMode==t.TreeGrid.SelectionMode.Row,i._addCheckboxColumn=this._getDefaultCheckboxColumn(),i._filteredColumnValue=[],i._filteredColumnValueID=[],i._filterIconTarget=null,i._renderedFilterMenuDialog=[],i._filtermenutext=null,i._headerDragStatus="",i._draggedColumn=null,i._mouseDragged=!1,!t.isNullOrUndefined(s.indentLevelWidth)&&s.isFromGantt?i.treeIndentLevelWidth=s.indentLevelWidth:i.treeIndentLevelWidth=i.treeIndentLevelWidth?i.treeIndentLevelWidth:10,i._draggedColumnTemplate=null,i._viewPortWidth=i._gridLeft=0,i._responsiveMinWidth=768,i._dy=i._dx=0,i._isTouchEvent=!1,i._isTouchTrigger=!1,i._currentEditRecordDialogIndex=-1,i._isTreeAddEditDialogSave=!1,i._displayContextMenu=!!s.contextMenuSettings.showContextMenu,i._isEmptyRowDeleted=!1,i._cssClass=this.model.cssClass,i._batchEditStarts=!1,i._batchSaveCancel="",i._batchSaveConfirmText=null,i._batchSaveLostChangesText=null,i._cancelEditText=null,i._batchTempDetails={},i._autoHideColumns=[],i._autoShowColumns=[],i._textWrapRowsDatas=[],i._textWrapNoCalculate=!1,i._expandCollapsePages=[],i._expandCollapseSettings={state:"",atLevel:"",level:0},i._excelFilter=null,i._menuColTypes=[],i._excelColTypes=[],i._isExcelFilter=!1,i._customFilter=null,i._mediaStatus=!1,i._filterString="",i._isCloseFilterMenu=!1,i._isRemoteData=!1,i._lastInsertedId=-1,i._confirmDialog=null,i._shiftSelectedRecord=null,i._deleteRowIndex=-1,i._isFromContextmenu=!1,i._emptyRowIndex=-1},_getDefaultCheckboxColumn:function(){return{field:"checkboxState",headerText:"",allowEditing:!1,allowDelete:!1,allowSorting:!1,allowFiltering:!1,allowCellSelection:!1,isFrozen:!1,nonColumn:!0,editType:"booleanedit",width:50,textAlign:"center"}},_updateGridResizeSettings:function(){var e={resizeMode:"fixedcolumns"==this.model.columnResizeSettings.columnResizeMode?"control":this.model.columnResizeSettings.columnResizeMode};this.model.resizeSettings=e},_calculateDimensions:function(){var e=this,i=this.model;if(i.isFromGantt||(i.sizeSettings.width&&e.element.css("width",i.sizeSettings.width),i.sizeSettings.height?e.element.css("height",i.sizeSettings.height):e.element[0].style.height?i.sizeSettings.height=e.element[0].style.height:e.element.height(450)),e._gridHeight=Math.round(e.element.height()),e._gridWidth=Math.round(e.element.width()),this._frozenColumnsLength>0){for(var s=0,a=0;a<=this._frozenColumnsLength;a++)i.columns[a]&&(s+=t.isNullOrUndefined(i.columns[a].width)?150:parseInt(i.columns[a].width));e._gridWidth<s&&(e.element.css("width",s),i.sizeSettings.width=e._gridWidth=s)}},_initFrozenColumns:function(){var i,s,a=[],r=[],n=0,o=0,l=this.model,d=l.columns;i=d[l.treeColumnIndex],l.showTotalSummary&&l.collapsibleTotalSummary&&(s=d[this._summaryColumnIndex]);for(var h=0;h<d.length;h++)!0===d[h].isFrozen?(a.push(d[h]),(t.isNullOrUndefined(d[h].visible)||d[h].visible||d[h]==i)&&(n+=1)):(r.push(d[h]),(t.isNullOrUndefined(d[h].visible)||d[h].visible||d[h]==i)&&(o+=1));a.length>0&&(l.columns.length&&l.columns.length==a.length&&(r=a.splice(a.length-1,1),r[0].isFrozen=!1),l.columns=e.merge(e.merge([],a),r)),this._frozenColumns=a,this._unFrozenColumns=r,0==n&&this._frozenColumns[0]&&(this._frozenColumns[0].visible=!0),0==o&&this._unFrozenColumns[0]&&(this._unFrozenColumns[0].visible=!0),i&&(l.treeColumnIndex=l.columns.indexOf(i)),l.showTotalSummary&&l.collapsibleTotalSummary&&(this._summaryColumnIndex=l.columns.indexOf(s)),this._frozenColumnsLength=a.length,l.scrollSettings.frozenColumns=this._frozenColumnsLength},updateAltRowOnCollapseAll:function(){var e=this,t=e.model;if(t.enableAltRow&&t.enableCollapseAll)for(var i,s=t.parentRecords,a=0;a<s.length;a++)i=s[a],i.isSummaryRow||(i.isAltRow=a%2!=0)},updateAltRowOnRendering:function(){for(var e=this,t=e.model,i=t.updatedRecords.filter(function(e){return null==e.parentItem?e:e.parentItem.expanded?e:void 0}),s=0;s<i.length;s++){var a=i[s];a.isSummaryRow||(a.isAltRow=s%2!=0)}},_checkDataBinding:function(){var t=this,i=t.model;e("#"+t._id).addClass("e-treegrid-overflow"),t._createdAt=null,t.element.addClass("e-treegrid-core"),t.element.attr("tabindex","0"),i.cssClass&&this.element.addClass(i.cssClass),t._renderToolbar(),t._checkboxSelection&&t._updateCheckboxColumnName(),i.isFromGantt&&i.enableSerialNumber&&t._updateTreeColumnIndex(),t._renderAfterColumnInitialize(),(t.model.showColumnChooser||i.contextMenuSettings.showContextMenu)&&t._renderColumnChooser(),t.model.allowFiltering&&"menu"==i.filterSettings.filterType?t._renderFilterMenu():i.allowFiltering&&"excel"==i.filterSettings.filterType&&t._renderExcelFilter(),t._setWidthToHeaders(),t.model.allowPaging&&t.element.append(t._renderGridPager()),t._viewPortHeight=t._getViewPortHeight(),(t.model.editSettings.showConfirmDialog||t.model.editSettings.showDeleteConfirmDialog)&&t._renderConfirmDialog(),!i.isFromGantt&&t._viewPortHeight<0&&t._updateElementHeight(),t._searchString=i.searchSettings.key,t._ensureDataSource(),i.showSummaryRow&&t._createSummaryRow(),i.isFromGantt||t.updateAltRowOnCollapseAll(),i.expandStateMapping&&i.enableAltRow&&t.updateAltRowOnRendering(),t._initGridRender(),t._$gridContent=e("#"+t._id+"e-gridcontent"),t._$gridContainer=e("#"+t._id+"e-gridcontainer"),t._$tableContent=e("#"+t._id+"e-table"),t._$frozenTableContent=e("#"+t._id+"frozene-table"),t._$movableTableContent=e("#"+t._id+"movablee-table"),t._viewPortHeight=t._getViewPortHeight(),t._$gridContent.css({height:t._viewPortHeight+"px"}),t.element.find(".e-pager").css({width:t._gridWidth-2}),t._pagerHeight=t.element.find(".e-pager").outerHeight(),i.showTotalSummary&&(t._createTotalSummaryRow(),t._viewPortHeight=t._getViewPortHeight(),i.allowPaging&&!i.sizeSettings.height||(t._viewPortHeight-=t._$totalSummaryRowContainer.height()<i.totalSummaryHeight?t._$totalSummaryRowContainer.height():i.totalSummaryHeight,t._viewPortHeight=t._viewPortHeight-1)),t._updatePagerTextAlignment(),t._wireEvents(),t.setWidthToColumns(),t._trigger("headerRefresh"),t._renderScroller(),t._updateWrapRowHeights(),i.allowTextWrap&&i.enableVirtualization&&(t._textWrapRowsDatas=t._getAvgTextWrapRowHeight("getAvgHeight")),t.updateHeight(),t._updateScrollCss(),t._resizeFilteringElements(),t._updateFixedTableBorder(),t._initialEndRendering(),(i.allowTextWrap||"wrap"==i.headerTextOverflow)&&t._updateGridContentHeight(),i.isFromGantt&&t._addEmptyColumntoGrid(),i.isFromGantt?(t._isDataManagerUpdate=i.dataManagerUpdate.isDataManagerUpdate,t._jsonData=i.dataManagerUpdate.jsonData):t._checkDataManagerUpdate(),t.model.allowSelection&&"multiple"==t.model.selectionSettings.selectionType&&!t.model.isFromGantt&&t._renderMultiSelectionIndicator(),e("#"+t._id).removeClass("e-treegrid-overflow")},_renderMultiSelectionIndicator:function(){this._multiSelectPopup=t.buildTag("div.e-treegridpopup#"+this._id+"_selectionpopup","",{display:"none"});var e=t.buildTag("div.e-popupcontent"),i=t.buildTag("div.e-downtail e-tail"),s=t.buildTag("span.e-rowselect e-icon");e.append(s),this._multiSelectPopup.append(e),this._multiSelectPopup.append(i),this.element.append(this._multiSelectPopup)},getUpdatedDataManagerData:function(){var e=this;return e._jsonData},_updateTreeColumnIndex:function(){var t,i,s=this,a=s.model,r=a.columns,n=+a.treeColumnIndex;e.map(r,function(e){if("taskId"==e.field)return t=e,!1}),(i=r.indexOf(t))==n&&(i!=r.length-1?a.treeColumnIndex=n+1:a.treeColumnIndex=n-1)},_updateWrapRowHeights:function(e,i,s,a){var r=this,n=this.model;if((n.allowTextWrap||"wrap"==n.headerTextOverflow)&&r._$frozenTableContent.length>0&&(r.getScrollElement().ejScroller("refresh"),"wrap"!=n.headerTextOverflow||!t.isNullOrUndefined(e)&&-1!=e.indexOf("header")||r._updateHeaderHeight(),n.allowTextWrap&&(t.isNullOrUndefined(e)||-1==e.indexOf("row")))){t.isNullOrUndefined(s)&&t.isNullOrUndefined(a)?r._updateRowHeight():r._updateRowHeight(s,a),n.showTotalSummary&&(t.isNullOrUndefined(e)||-1==e.indexOf("total"))&&r._updateTotalSummaryHeight(),r.getScrollElement().ejScroller("refresh");var o=r.getScrollElement().ejScroller("model.scrollTop");r._getFrozenScrollElement().scrollTop(o)}"virtualRefresh"!=i||!n.allowTextWrap&&"wrap"!=n.headerTextOverflow?"refreshAll"!=i||!n.allowTextWrap&&"wrap"!=n.headerTextOverflow||(r.updateHeight(),r._updateGridContentHeight()):(n.allowTextWrap&&n.enableVirtualization&&r.updateHeight(),r._updateGridContentHeight()),"auto"==n.sizeSettings.height&&r._updateContentHeight()},_updateHeaderHeight:function(){var t=this,i=t.getHeaderContent().find("#e-frozenheaderdiv"+this._id).find("tr")[0],s=t.getHeaderContent().find("#e-movableheaderdiv"+this._id).find("tr")[0];e(s).css("height","auto"),e(i).css("height","auto"),i.offsetHeight>s.offsetHeight?e(s).css("height",i.offsetHeight):s.offsetHeight>i.offsetHeight&&e(i).css("height",s.offsetHeight)},_updateTotalSummaryHeight:function(){for(var t,i,s=this,a=this.model,r=e(s._$footertableContent[0]).find("tr"),n=e(s._$footertableContent[1]).find("tr"),o=e(r).length,l=0;l<o;l++)e(n[l]).css("height",a.rowHeight),e(r[l]).css("height",a.rowHeight),t=e(r[l]).height(),i=e(n[l]).height(),t>=i?(e(n[l]).css("height",t),e(r[l]).css("height",t)):i>t&&(e(r[l]).css("height",i),e(n[l]).css("height",i));s._$totalSummaryRowContainer.hasClass("e-scroller")&&s._$totalSummaryRowContainer.ejScroller("refresh")},_updateRowHeight:function(i,s){if(this.getRows().length>0){var a,r=this,n=this.model,o=0,l=0,d=0,h=0,c=[],u=[];t.isNullOrUndefined(i)?(l=0,h=r.getRows()[0]?r.getRows()[0].length:0,c=r.getRows()[0],u=r.getRows()[1]):(n.enableVirtualization&&"rowEdit"!=s&&(a=n.currentViewData[i],i=r.getUpdatedRecords().indexOf(a)),l=i,h=i+1,c[l]=e(t.TreeGrid.getRowByIndex(r,i)[0]),u[l]=e(t.TreeGrid.getRowByIndex(r,i)[1]));for(var p=l;p<h;p++)(t.isNullOrUndefined(i)||"rowEdit"!=s&&"savecell"!=s)&&"resize"!=s||(e(c[p]).css("height",n.rowHeight),e(u[p]).css("height",n.rowHeight)),"rowEdit"!=s&&(o=e(c[p]).height(),d=e(u[p]).height(),o>=d?(e(u[p]).css("height",o),e(c[p]).css("height",o)):d>o&&(e(c[p]).css("height",d),e(u[p]).css("height",d)))}},_checkDataManagerUpdate:function(){var e=this,i=this.dataSource();e._isDataManagerUpdate=!1,e._jsonData=null,i instanceof t.DataManager&&(i.dataSource.offline&&i.dataSource.json?(e._isDataManagerUpdate=!0,e._jsonData=i.dataSource.json):i.dataSource.offline||(e._isDataManagerUpdate=!0,e._jsonData=e._retrivedData))},_initDatasource:function(){var e=this,i=e.model;if(i.isFromGantt)e._isLoadonDemand=i.isLoadonDemand,e._checkDataBinding();else if(this.dataSource()instanceof t.DataManager){t.isNullOrUndefined(e._waitingPopupObj)?e._renderWaitingPopup():e._waitingPopupObj.show();var s=this.dataSource().adaptor instanceof t.UrlAdaptor||this.dataSource().adaptor instanceof t.WebMethodAdaptor||this.dataSource().adaptor instanceof t.WebApiAdaptor||this.dataSource().adaptor instanceof t.ODataAdaptor,a=0!=t.pvt.filterQueries(i.query.queries,"onTake").length||0!=t.pvt.filterQueries(i.query.queries,"onPage").length||0!=t.pvt.filterQueries(i.query.queries,"onWhere").length;if(e._isRemoteData=s,s&&!this.dataSource().dataSource.offline&&!a&&i.enableLoadOnDemand)e._isLoadonDemand=!0,e._getAndRenderRecordsonDemand();else{e._isLoadonDemand=!1,i.query.requiresCount();var r=this.dataSource().executeQuery(i.query);r.done(t.proxy(function(t){e._renderQueriedRecords(t,e)})).fail(t.proxy(function(t){e._triggerFailureEvent(t,e)}))}}else this.dataSource()?(e._retrivedData=e.dataSource(),e._renderQueriedRecords(null,e,e._retrivedData)):e._checkDataBinding()},_intersectionObjects:function(e,t){for(var i=[];e.length>0&&t.length>0;){var s=t.indexOf(e[0]);-1==s?e.shift():(i.push(e.shift()),t.splice(s,1))}return i},_getAndRenderRecordsonDemand:function(){var i=this,s=i.model;if(s.query.requiresCount(),s.pageSettings.pageSizeMode=t.TreeGrid.PageSizeMode.Root,s.parentIdMapping)i._queryAndRenderParentRecords();else{var a=i._updateQueryForLoadonDemand();i.dataSource().executeQuery(a).done(t.proxy(function(e){i._pageRecordCountOnDemand=e.count,i._renderQueriedRecords(e,i),i._setScrollTop(),i.updateHeight()})).fail(t.proxy(function(e){i._triggerFailureEvent(e,i)}))}i._allParentItems=e.extend([],s.parentRecords)},_renderWaitingPopup:function(){e(this.element).ejWaitingPopup({showOnInit:!0}),this._waitingPopupObj=e(this.element).data("ejWaitingPopup")},_renderQueriedRecords:function(e,i,s){var a=i.model;if(s)i._retrivedData=s;else if(i._retrivedData=e.result,0==i._fieldNamesToQuery.length&&i._retrivedData.length>0)for(var r in e.result[0])i._fieldNamesToQuery.push(r);if(0==a.flatRecords.length&&(a.allowPaging&&a.parentIdMapping&&(i._isRemoteData?a.pageSettings.totalRecordsCount=e.count:t.isNullOrUndefined(a.pageSettings.totalRecordsCount)?a.pageSettings.totalRecordsCount=e&&!t.isNullOrUndefined(e.count)?e.count:null:i._retrivedData=i._retrivedData.splice(a.pageSettings.totalRecordsCount)),i._createQueriedRecords(i._retrivedData)),i._isForDataSourceRefresh){var n={};n.requestType=t.TreeGrid.Actions.RefreshDataSource,i._ensureDataSource(n),a.isFromGantt||i._checkDataManagerUpdate(),-1!==i.selectedRowIndex()&&i.selectedRowIndex()<i.model.currentViewData.length&&i.selectRows(i.selectedRowIndex()),i.getScrollElement().hasClass("e-scroller")&&i.getScrollElement().ejScroller("refresh"),(a.showSummaryRow||a.showTotalSummary)&&i._summaryRow(),i._createdAt=null,i._isForDataSourceRefresh=!1}else a.showSummaryRow&&a.printingEnabled&&(i._parentRecords=i._getParentRecords(a.updatedRecords,i)),i._checkDataBinding();e&&i._waitingPopupObj.hide()},_createQueriedRecords:function(i){var s=this,a=s.model;if(a.idMapping&&a.parentIdMapping&&i.length>0){var r=[];s._taskIds=[],s._lastInsertedId=-1;for(var n=0;n<i.length;n++){var o=i[n];r.push(e.extend(!0,{},o)),t.isNullOrUndefined(o[a.idMapping])||(s._updateLastInsertedId(o[a.idMapping]),s._taskIds.push(o[a.idMapping]))}s._reconstructDatasource(r),s._createRecords(s.secondaryDatasource)}else i&&s._createRecords(i)},_queryAndRenderParentRecords:function(){var i=this,s=i.model;if(s.hasChildMapping)i._renderRootRecords(i);else if(0==i._assignedIdCollections.length&&0==i._assignedParendIDs.length){var a,r=t.Query(),n=t.pvt.filterQueries(s.query.queries,"onSelect");r.queries=e.extend([],s.query.queries),r.requiresCount(),n.length>0&&r.queries.splice(e.inArray(n[0],r.queries),1),r.select(s.parentIdMapping,s.idMapping),a=this.dataSource().executeQuery(r),a.done(t.proxy(function(e){e.result.map(function(e){i._assignedIdCollections.push(e[s.idMapping]),e[s.parentIdMapping]&&-1==i._assignedParendIDs.indexOf(e[s.parentIdMapping])&&i._assignedParendIDs.push(e[s.parentIdMapping])}),i._totalItemCounts=e.result.length,i._renderRootRecords(i)})).fail(t.proxy(function(e){i._triggerFailureEvent(e,i)}))}else i._renderRootRecords(i)},_renderRootRecords:function(e){var i=e._updateQueryForLoadonDemand();e.dataSource().executeQuery(i).done(t.proxy(function(t){e._renderZerothLevelParentItems(t)})).fail(t.proxy(function(t){e._triggerFailureEvent(t,e)}))},_renderExpandedChildRecords:function(e){var t=this,i=t.model;t._ensureDataSource(e),i.showSummaryRow&&(t._parentRecords=t._allParentItems,t._createSummaryRow()),i.enableAltRow&&t.updateAltRow(),t.sendDataRenderingRequest(e),t._setScrollTop(),t.updateHeight(),t._waitingPopupObj.hide()},_triggerFailureEvent:function(e,t){t._waitingPopupObj.hide();var i={error:e.error};t._trigger("actionFailure",i)},_renderZerothLevelParentItems:function(t){var i=this,s=i.model;i._pageRecordCountOnDemand=t.count,i._renderQueriedRecords(t,i),i._allParentItems=e.extend([],s.parentRecords),i._isForDataSourceRefresh=!1,i._maxRowIndex=i._totalItemCounts},_updateQueryForLoadonDemand:function(){var i=this,s=i.model,a=new t.Query,r=t.Predicate(s.parentIdMapping,t.FilterOperators.equal,null);return a.queries=e.extend([],s.query.queries),s.parentIdMapping&&a.where(r),s.allowPaging&&a.page(i._currentPage(),i.model.pageSettings.pageSize),a.requiresCount(),i._queryForLoadonDemand=a,a},_reconstructDatasource:function(e){var i,s,a=this,r=a.model;s=t.Predicate(r.parentIdMapping,t.FilterOperators.notEqual,"null"),i=t.DataManager(e).executeLocal(t.Query().where(s).group(r.parentIdMapping));var n=[];r.childMapping||(r.childMapping="Children");for(var o=0;o<i.length;o++){if(!t.isNullOrUndefined(i[o].key)){var l=a._taskIds.indexOf(i[o].key);if(l>-1){r.hierarchyRowIndexMapping&&i[o].items.length>1?e[l][r.childMapping]=t.DataManager(i[o].items).executeLocal(t.Query().sortBy(r.hierarchyRowIndexMapping,t.sortOrder.Ascending,!1)):e[l][r.childMapping]=i[o].items;continue}}n.push.apply(n,i[o].items)}a.secondaryDatasource=a._intersectionObjects(e,n),r.hierarchyRowIndexMapping&&a.secondaryDatasource.length>1&&(a.secondaryDatasource=t.DataManager(a.secondaryDatasource).executeLocal(t.Query().sortBy(r.hierarchyRowIndexMapping,t.sortOrder.Ascending,!1)))},_windowResize:function(i){if(this.element.is(":visible")){var s=this,a=this.model;e("#"+s._id).addClass("e-treegrid-overflow");var r,n,o,l=s._$gridHeaderContent,d=s._$totalSummaryRowContainer,h=e("#"+s._id+"_toolbarItems"),c=a.sizeSettings.height,u=a.sizeSettings.width,p=s.element[0].style.width,m=s.element[0].style.height;if(s._clearContextMenu(),s.model.isResponsive||t.isTouchDevice()?t.isTouchDevice()||s._clearColumnMenu("resize"):(s._clearColumnMenu(),s._clearFilterMenu()),a.isResponsive&&s._isExcelFilter&&(s._checkBoxDiv&&s._checkBoxDiv.ejScroller({width:"100%"}).ejScroller("refresh"),s._customFilter&&s._customFilter.ejDialog("width","99.9%")),r=this._frozenColumnsLength>0?this.element.find("#e-movablecontainer"+this._id):e("#"+s._id+"e-gridcontent"),e("#"+this._id+"detailscellwrapper").length>0&&this._removeDetailsRow(),u&&"number"!=typeof u&&-1!=u.indexOf("%")||-1!=p.indexOf("%")){var g=u||p;n=(e(s.element).parent().width()?e(s.element).parent().width():e(s.element).width())/100*parseInt(g)}else n=e(s.element).width();if(s._gridWidth=Math.round(n),s._frozenColumnsLength>0){for(var f=0,_=0;_<s._frozenColumnsLength;_++)1==a.columns[_].visible&&(f+=s.columnsWidthCollection[_]);n<f&&(s._gridWidth=n=f)}if(c&&"number"!=typeof c&&-1!=c.indexOf("%")||-1!=m.indexOf("%")){var v,b=c||m,x=e(s.element).parent().height()?e(s.element).parent().height():e(s.element).height();v=e(s.element).parent().height()?x/100*parseInt(b):e(s.element).height(),o=v}else o=e(s.element).height();o-=s._totalBorderHeight,s._$totalSummaryRowContainer&&(o-=s._$totalSummaryRowContainer.outerHeight()),n=Math.round(n-s._totalBorderWidth);var y,w,C=h.length>0?h.outerHeight():0;y=r.ejScroller("option","scrollTop"),w=r.ejScroller("option","scrollLeft");var S=n,T=0;if(a.allowPaging){var R=s.element.find(".e-pager").outerHeight(),k=!t.isNullOrUndefined(a.pageSettings.template);if(o-=R,!a.sizeSettings.height){var f=0;R>s._pagerHeight&&!k&&(T=R-s._pagerHeight);for(var _=0;_<s.columnsWidthCollection.length;_++)f+=s.columnsWidthCollection[_];f>s._gridWidth&&(o+=s._scrollBarHeight)}}if(this._frozenColumnsLength>0&&(s._$gridContent.css("width",n),s._$gridContent.css("height",o-e(l).outerHeight()-C),S=n-this._getFrozenColumnWidth()-1),s.getScrollElement().ejScroller({width:S,height:o-e(l).outerHeight()-C+T}),s._updateScrollCss(),a.showTotalSummary&&s._$totalSummaryRowContainer&&(s._$totalSummaryRowContainer.height()>=a.totalSummaryHeight&&s._$totalSummaryRowContainer.hasClass("e-scroller")?s._$totalSummaryRowContainer.ejScroller("refresh"):e(d).hasClass("e-scrollcss")&&s.getScrollElement().children(".e-vscrollbar").length>0?e(d).width(n-17):e(d).width(n)),a.toolbarSettings.showToolbar&&h.length>0&&h.width(n),s.getScrollElement().ejScroller("refresh"),e(l).hasClass("e-scrollcss")&&s.getScrollElement().children(".e-vscrollbar").length>0?e(l).width(n-17):e(l).width(n),s.updateViewPortHeight(),a.showTotalSummary&&(s._viewPortHeight=s._viewPortHeight-s._$totalSummaryRowContainer.outerHeight()),s.getScrollElement().ejScroller("option","scrollTop",y),s.getScrollElement().ejScroller("option","scrollLeft",w),s._updateHeaderScrollLeft(),a.enableVirtualization){s.cancelRowEditCell();var O={},D=a.rowHeight;if(O.requestType=t.TreeGrid.Actions.Refresh,s.processBindings(O),s.sendDataRenderingRequest(O),a.showDetailsRow&&a.detailsTemplate&&!a.showDetailsRowInfoColumn&&(D+=a.detailsRowHeight),a.currentViewData.length*D<s._viewPortHeight){var I=y-(s._viewPortHeight-a.currentViewData.length*D);I<0&&(I=0),s.getScrollElement().ejScroller("scrollY",I,!0)}}a.allowPaging&&s.element.find(".e-pager").css({width:s._gridWidth-2}),s._resizeFilteringElements(),a.columnResizeSettings.columnResizeMode!=t.TreeGrid.ColumnResizeMode.FixedColumns||a.isFromGantt||this._updateTableWidth(!0),s.model.isResponsive&&!s.model.isFromGantt&&s._mediaQueryUpdate(),s._updatePagerTextAlignment(),s._updateWrapRowHeights(null,"virtualRefresh",null,"resize"),a.allowPaging&&!a.sizeSettings.height&&s.updateHeight(),(a.allowTextWrap||"wrap"==a.headerTextOverflow)&&s.model.allowTextWrap&&s.model.enableVirtualization&&s.updateHeight(),s._updateGridContentHeight(),s.model.allowSelection&&"multiple"==s.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&s._alignMultiSelectPopup(),e("#"+s._id).removeClass("e-treegrid-overflow"),a.isResponsive&&a.enableResize&&(s._validateColumnVisible(),s._hideColumns(s._autoHideColumns),s._showColumns(s._autoShowColumns))}},_updatePagerTextAlignment:function(){var t=this;if(t.model.allowPaging)if(e("#"+t._id+"Pager").find(".e-pagercontainer").outerWidth()+e("#"+t._id+"Pager").find(".e-parentmsgbar").outerWidth()+10>e("#"+t._id).width()){var i=(e("#"+t._id).width()-e("#"+t._id+"Pager").find(".e-pagercontainer").outerWidth())/2,s=(e("#"+t._id).width()-e("#"+t._id+"Pager").find(".e-parentmsgbar").width())/2;i>0&&e("#"+t._id+"Pager").find(".e-pagercontainer").css("margin-left",i+"px"),s>0&&e("#"+t._id+"Pager").find(".e-parentmsgbar").css("margin-right",s-6+"px")}else e("#"+t._id+"Pager").find(".e-pagercontainer").css("margin-left",""),e("#"+t._id+"Pager").find(".e-parentmsgbar").css("margin-right","")},_alignMultiSelectPopup:function(){var e=this,t=e._$gridContent.offset().top+e._$gridContent.outerHeight(),i=e._$gridContent.offset().left+e._$gridContent.outerWidth();if(e._multiSelectPopup.offset().top+e._multiSelectPopup.outerHeight()+10>t||e._multiSelectPopup.offset().top<e._$gridContent.offset().top||e._multiSelectPopup.offset().left+e._multiSelectPopup.outerWidth()>i||e._multiSelectPopup.offset().left<e._$gridContent.offset().left){var s=e._$gridContent.offset().top+e._$gridContent.outerHeight()/2,a=e._$gridContent.offset().left+e._$gridContent.outerWidth()/2;e._$gridContent.find(".e-hscrollbar").length>0&&(s-=e._$gridContent.find(".e-hscrollbar").outerHeight()),e._$gridContent.find(".e-vscrollbar").length>0&&(a-=e._$gridContent.find(".e-vscrollbar").outerWidth()),e._multiSelectPopup.offset({top:s-this._multiSelectPopup.height()/2-5,left:a-this._multiSelectPopup.width()/2})}},_mediaQueryUpdate:function(){var i=this,s="",a=i.getOffsetRect(e("#"+i._id)[0]);if(e("#"+i._id+"_dialogColumnAdd_wrapper").length>0&&"none"!=e("#"+i._id+"_dialogColumnAdd_wrapper").css("display")&&(e(window).width()<=i._responsiveMinWidth&&i.model.isResponsive?(e("#"+i._id+"_dialogColumnAdd").removeClass("e-treegridadaptivedialog"),e("#"+i._id+"_dialogColumnAdd_wrapper").removeClass("e-treegridadaptivedialog"),e("#"+i._id+"_dialogColumnAdd_wrapper").find("div.e-dialog-scroller").removeClass("e-treegridadaptivedialog"),e("#"+i._id+"_dialogColumnAdd").find(".e-dropdowntreegrid").css("width",e("#"+i._id).width()-80+"px"),e("#"+i._id+"_dialogColumnAdd").ejDialog({width:e("#"+i._id).width()+"px",height:e("#"+i._id).height()+"px",minHeight:"150px",minWidth:"150px",showOnInit:!1,enableResize:!1,allowDraggable:!1,enableModal:!1,isResponsive:!1}),e("#"+i._id+"_dialogColumnAdd_wrapper").css({left:a.left+"px",top:a.top+"px"}),e("#"+i._id+"_dialogColumnAdd_wrapper").removeClass("e-shadow"),e("#"+i._id+"_dialogColumnAdd").removeClass("e-shadow")):(e("#"+i._id+"_dialogColumnAdd").ejDialog({width:"auto",height:"auto",minHeight:0,minWidth:0,showOnInit:!1,enableResize:!1,allowDraggable:!0,enableModal:!0,isResponsive:!0}),e("#"+i._id+"_dialogColumnAdd").addClass("e-treegridadaptivedialog"),e("#"+i._id+"_dialogColumnAdd_wrapper").addClass("e-treegridadaptivedialog e-treegrid-dialog"),e("#"+i._id+"_dialogColumnAdd").find(".e-dropdowntreegrid").css("width","438px"),e("#"+i._id+"_dialogColumnAdd_wrapper").find("div.e-dialog-scroller").removeClass("e-treegridadaptivedialog"),e("#"+i._id+"_dialogColumnAdd_wrapper").addClass("e-shadow"))),e("#"+i._id+"ColumnRenameDialog_wrapper").length>0&&"none"!=e("#"+i._id+"ColumnRenameDialog_wrapper").css("display")&&(e(window).width()<=i._responsiveMinWidth&&i.model.isResponsive?(e("#"+i._id+"ColumnRenameDialog").removeClass("e-treegridadaptivedialog"),i._columnRenameDialog.ejDialog({width:e("#"+i._id).width()+"px",height:e("#"+i._id).height()+"px",position:{X:a.left,Y:a.top},minHeight:"50px",minWidth:"50px",showOnInit:!1,allowDraggable:!1,enableResize:!1,enableModal:!1,isResponsive:!1}),e("#"+i._id+"ColumnRenameDialog_wrapper").css({left:a.left+"px",top:a.top+"px"}),
e("#"+i._id+"ColumnRenameDialog_wrapper").removeClass("e-shadow"),e("#"+i._id+"ColumnRenameDialog").removeClass("e-shadow"),e("#"+i._id+"ColumnRenameDialog_wrapper").removeClass("e-treegridadaptivedialog")):(i._columnRenameDialog.ejDialog({width:"auto",height:"auto",minHeight:0,minWidth:0,showOnInit:!1,enableResize:!1,allowDraggable:!0,enableModal:!0,isResponsive:!0}),e("#"+i._id+"ColumnRenameDialog").addClass("e-treegridadaptivedialog"),e("#"+i._id+"ColumnRenameDialog_wrapper").addClass("e-treegridadaptivedialog e-treegrid-dialog"))),i._renderedSubMenuType){if(s="",-1==i._renderedSubMenuType.indexOf("Desktop"))s=i._renderedSubMenuType;else{var r=i._renderedSubMenuType.indexOf("Desktop");s=i._renderedSubMenuType.slice(0,r)}if(e(s+"_wrapper").length>0&&"none"!=e(s+"_wrapper").css("display"))if(e(window).width()<=i._responsiveMinWidth&&-1==i._renderedSubMenuType.indexOf("Desktop")&&i.model.isResponsive){var n=e("#"+i._id).height()-50+"px";e(i._renderedSubMenuType+"_wrapper").find("div.e-dialog-scroller").addClass("e-treegridadaptivewidth"),e(i._renderedSubMenuType).ejDialog({width:e("#"+i._id).width()+"px",height:e("#"+i._id).height()+"px",position:{X:a.left+"px",Y:a.top+"px"},minHeight:"50px",minWidth:"50px",showOnInit:!1,enableResize:!1,enableModal:!1,isResponsive:!1}),e(i._renderedSubMenuType).height()>e(i._renderedSubMenuType+"_wrapper").height()-48?(e(i._renderedSubMenuType+"_wrapper").find("div.e-dialog-scroller").css({height:e("#"+i._id).height()-48+"px",width:"auto",padding:"0px"}),e(i._renderedSubMenuType).ejDialog("refresh")):e(i._renderedSubMenuType+"_wrapper").find("div.e-dialog-scroller").css({height:n,width:"auto"})}else t.isTouchDevice()?(-1==i._renderedSubMenuType.indexOf("Desktop")&&e(window).width()>i._responsiveMinWidth||-1!=i._renderedSubMenuType.indexOf("Desktop")&&e(window).width()<=i._responsiveMinWidth)&&(i._clearColumnMenu(),i._clearFilterMenu()):i._clearFilterMenu();else(t.isTouchDevice()&&!i._renderedSubMenuType||t.isTouchDevice()&&e(s+"_wrapper").length>0&&"none"==e(s+"_wrapper").css("display"))&&i._clearColumnMenu()}else(t.isTouchDevice()&&!i._renderedSubMenuType||t.isTouchDevice()&&e(s+"_wrapper").length>0&&"none"==e(s+"_wrapper").css("display"))&&i._clearColumnMenu();if(i._isExcelFilter){var o=e(window).width()>i._responsiveMinWidth;if((!i._mediaStatus||i._mediaStatus&&o)&&(i._excelFilter.closeXFDialog(),i._mediaStatus=!1,i._customFilter)){var l=e(i._customFilter).attr("id");e("#"+l).css("display","none"),e("#"+l+"_CustomFDlg_wrapper").css("display","none")}}if(e("#"+i._id+"ccDiv_wrapper").length>0&&"none"!=e("#"+i._id+"ccDiv_wrapper").css("display"))if(e(window).width()<i._responsiveMinWidth&&0==i._renderedSubMenuType.indexOf("AdaptiveColChooser")&&i.model.isResponsive){var n=e("#"+i._id).height()-66+"px";e("#"+i._id+"ccDiv").ejDialog({width:e("#"+i._id).width()+"px",height:e("#"+i._id).height()+"px",minHeight:"150px",minWidth:"150px",showOnInit:!1,enableResize:!1,enableModal:!1,isResponsive:!1}),e("#"+i._id+"ccDiv_wrapper").find("div.e-dialog-scroller").removeClass("e-treegridadaptivedialog"),e("#"+i._id+"ccDiv").css({width:"100%",height:"auto"}),e("#"+i._id+"ccDiv").height()>e("#"+i._id+"ccDiv_wrapper").height()-48?(e("#"+i._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({height:e("#"+i._id).height()-48+"px",width:"auto",padding:"0px"}),e("#"+i._id+"ccDiv").removeClass("e-columnSelector"),e("#"+i._id+"ccDiv").ejDialog("refresh")):(e("#"+i._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({height:n,width:"auto",padding:"8px 16px"}),e("#"+i._id+"ccDiv").css({padding:"0px"})),e("#"+i._id+"ccDiv_wrapper").removeClass("e-shadow"),e("#"+i._id+"ccDiv").removeClass("e-shadow")}else i._clearColumnMenu();e("#"+i._id+"_dialogEdit").length>0&&"none"!=e("#"+i._id+"_dialogEdit").css("display")&&(e(window).width()<=i._responsiveMinWidth&&i.model.isResponsive?(e("#"+i._id+"_dialogEdit").ejDialog({width:e("#"+i._id).width()+"px",height:e("#"+i._id).height()+"px",minHeight:"150px",minWidth:"150px",showOnInit:!1,enableResize:!1,allowDraggable:!1,enableModal:!1,isResponsive:!1}),e("#"+i._id+"_dialogEdit_wrapper").css({left:a.left+"px",top:a.top+"px"}),e("#"+i._id+"_dialogEdit_wrapper").removeClass("e-shadow").removeClass("e-treegridadaptivedialog"),e("#"+i._id+"_dialogEdit").removeClass("e-shadow")):(e("#"+i._id+"_dialogEdit").ejDialog({width:"auto",height:"auto",minHeight:"150px",minWidth:"150px",showOnInit:!1,enableResize:!1,allowDraggable:!0,enableModal:!0,isResponsive:!0}),e("#"+i._id+"_dialogEdit_wrapper").addClass("e-shadow").addClass("e-treegridadaptivedialog"),e("#"+i._id+"_dialogEdit").addClass("e-shadow"))),!i._renderedSubMenuType||0!=i._renderedSubMenuType.indexOf("AdaptiveColChooser")&&0!=i._renderedSubMenuType.indexOf("ColumnDesktop")||i._clearColumnMenu()},updateResponsiveMinWidth:function(e){var t=this;parseInt(e)<150&&(e=150),t._responsiveMinWidth=parseInt(e),t._mediaQueryUpdate()},processBindings:function(i){var s=this;if(s.model.query=new t.Query,!s._isEmptyRow&&!s._moveRow&&s._trigger("actionBegin",i))return"filtering"==i.requestType&&e("#"+s._id+"_"+i.currentFilteringColumn+"_filterbarcell").val(""),!0;s._ensureDataSource(i)},setUpdatedRecords:function(e,t,i,s,a){var r=this.model;r.flatRecords=e,r.updatedRecords=t,r.ids=i,r.parentRecords=s,this.dataSource(a)},getExpandedRecords:function(e){var t=this;return e.filter(function(e){return 1==t.getExpandStatus(e)})},updateExpandStatus:function(e,t){for(var i=this,s=e.childRecords,a=0;a<s.length;a++)s[a].isExpanded=t,s[a].hasChildRecords&&s[a].expanded&&i.updateExpandStatus(s[a],t)},_ensureDataSource:function(i){var s=this,a=s.model,r=a.sortSettings.sortedColumns,n=a.filterSettings.filteredColumns,o=!1,l=this.dataSource(),d=e("#"+s._id.replace("ejTreeGrid","")).data("ejGantt");if(s._filteredRecords=[],s._flatFilteredRecords=[],a.query.requiresCount(),s._queryManagar=new t.Query,s._queryManagar.requiresCount(),"array"===e.type(l)||l instanceof t.DataManager||(this.dataSource([]),l=this.dataSource()),!i||i.requestType!==t.TreeGrid.Actions.ExpandCollapse||(o=!0,s._filteredRecords=[],i.data.expanded=i.expanded,t.isNullOrUndefined(i.data.item[a.expandStateMapping])||(i.data[a.expandStateMapping]=i.expanded,i.data.item[a.expandStateMapping]=i.expanded),a.updatedRecords=[],s._flatFilteredRecords=a.flatRecords,s._filteredRecords=s._flatFilteredRecords.filter(function(e){return 1==s.getExpandStatus(e)}),a.updatedRecords=s._filteredRecords,!i.isFromExpandCollapse||i.isLastRefresh)){if(i&&"filtering"==i.requestType||(a.allowFiltering||a.isFromGantt)&&n.length){if(a.showSummaryRow&&(a.updatedRecords=s._spliceSummaryRows(a.updatedRecords),a.flatRecords=s._spliceSummaryRows(a.flatRecords)),(a.allowFiltering||a.isFromGantt)&&n.length){var h,c=n[0];if(!s._isExcelFilter||c instanceof t.Predicate){c.value==s._dropDownListBlanksText?(h=t.Predicate(c.field,"equal",null,!0),h=h.or(c.field,"equal","",!0)):h=c.value==s._dropDownListClearText?t.Predicate(c.field,"equal","",!0):c.isComplex?c:t.Predicate(c.field,c.operator,c.value,!c.matchcase),t.isNullOrUndefined(i)&&s._storePreviousFilteredValue(c.field,c.value,c.operator);for(var u=1;u<n.length;u++)h=n[u].isComplex?h.and(n[u]):h[n[u].predicate](n[u].field,n[u].operator,n[u].value,!n[u].matchcase),t.isNullOrUndefined(i)&&s._storePreviousFilteredValue(n[u].field,n[u].value,n[u].operator)}else h=s._getExcelPredicate(i);s._queryManagar.where(h),s._filteredRecords=a.flatRecords.slice();var p=new t.DataManager(s._filteredRecords);s._tempfilteredrecords=p.executeLocal(s._queryManagar).result,s._updateFilteredRecords(s._tempfilteredrecords,!1),a.updatedRecords=s._isHierarchyFiltering&&a.enableVirtualization?s._updateFilterParent:s._filteredRecords,a.allowPaging&&a.pageSettings.pageSizeMode===t.TreeGrid.PageSizeMode.Root&&(a.parentRecords=s._getParentRecords(a.updatedRecords,s,!0)),a.allowSorting&&a.sortSettings.sortedColumns.length>0&&s._sortingRecords()}else a.updatedRecords=a.enableVirtualization?s.getExpandedRecords(a.flatRecords):a.flatRecords.slice(),s._updateHasFilteredChildRecordsStatus(a.updatedRecords),s._isHierarchyFiltering&&s._clearFilterLevel(s.model.flatRecords),a.allowPaging&&a.pageSettings.pageSizeMode===t.TreeGrid.PageSizeMode.Root&&(a.parentRecords=s._getParentRecords(a.updatedRecords,s,!0)),s._isExcelFilter&&s._getExcelPredicate(i);a.allowSearching&&0!=s._searchString.length||s._updatedFilteredRecords(i),o=!0}if(a.allowSearching&&s._searchString.length||i&&"searching"===i.requestType){a.showSummaryRow&&(a.updatedRecords=s._spliceSummaryRows(a.updatedRecords),a.flatRecords=s._spliceSummaryRows(a.flatRecords));var m=s._searchString.length>0?a.searchSettings.operator:"contains";if(s._queryManagar.search(s._searchString,s.getColumnFieldNames(),m,!0),"parent"==a.filterSettings.filterHierarchyMode||s._searchString.length>0||0==a.filterSettings.filteredColumns.length){var g=!0;a.isFromGantt?s._filteredRecords=a.flatRecords.filter(function(e){return!1===e.hasChildRecords}):s._filteredRecords=a.flatRecords.slice()}else g=!1;a.isFromGantt&&(d.model.searchSettings={fields:s._getColumnMappingNames(),key:s._queryManagar.queries[0].e.searchKey,operator:"contains",ignoreCase:!0});var p=new t.DataManager(s._filteredRecords);s._tempfilteredrecords=p.executeLocal(s._queryManagar).result,s._updateFilteredRecords(s._tempfilteredrecords,g),a.updatedRecords=s._filteredRecords,a.allowPaging&&a.pageSettings.pageSizeMode===t.TreeGrid.PageSizeMode.Root&&(a.parentRecords=s._getParentRecords(a.updatedRecords,s,!0)),s._isLoadonDemand&&0==s._searchString.length&&0==s._filteredRecords&&(a.updatedRecords=a.flatRecords),a.allowSorting&&a.sortSettings.sortedColumns.length>0&&s._sortingRecords(),s._updatedFilteredRecords(i),o=!0,s.clearSelection()}else(a.allowSorting&&r.length>0||i&&"sorting"==i.requestType)&&(s._sortingRecords(),a.showSummaryRow&&s._createSummaryRow(i),o||(s.updateCollapsedRecordCount(),s.updateHeight(),o=!0));if(!i||"outdent"!==i.requestType&&"indent"!==i.requestType||(i={},i.requestType=t.TreeGrid.Actions.Refresh,o=!0),i&&a.allowPaging&&"delete"==i.requestType){var f={};if(!s._isLoadonDemand){f.totalRecordsCount=s.getExpandedRecords(a.flatRecords).length,s.getPager().ejPager("option",f).ejPager("refreshPager");var _=this.getPager().ejPager("model");s._currentPage()>_.totalPages&&s._currentPage(_.totalPages),o=!0}}if(o||(s._zerothLevelParentRecords=a.parentRecords.slice(),a.updatedRecords=a.enableVirtualization?a.enableCollapseAll&&!i?s._zerothLevelParentRecords:s.getExpandedRecords(a.flatRecords):a.flatRecords.slice(),s.updateCollapsedRecordCount(),s.updateHeight()),i||(i={},a.allowPaging?i.requestType=t.TreeGrid.Actions.Paging:i.requestType=t.TreeGrid.Actions.Refresh,i.inital=!0),s._updateCurrentViewData(i.requestType),!t.isNullOrUndefined(a.printingEnabled)&&a.printingEnabled&&"currentPage"==a.pageSettings.printMode){var v=this.getExpandedRecords(a.updatedRecords),p=new t.DataManager(v),b=p.executeLocal(a.query);a.currentViewData=b.result}(!a.isFromGantt&&"save"===i.requestType||"sorting"===i.requestType||"searching"===i.requestType||"delete"===i.requestType||"refreshDataSource"===i.requestType||"filtering"===i.requestType||"dragAndDrop"===i.requestType||"rowIndexUpdate"===i.requestType||!i.inital&&"paging"===i.requestType)&&(s._isRefreshAddedRecord=!1,s.renderRecords(i),s._updateWrapRowHeights(null,"refreshAll"),s._setScrollTop(i.requestType),s._updateFixedTableBorder(i.requestType),s.getScrollElement().ejScroller("refresh"),s._updateScrollCss())}},_updatedFilteredRecords:function(t){var i=this,s=i.model;t&&("filtering"==t.requestType||"searching"==t.requestType)&&i._checkboxSelection&&s.selectionSettings.enableHierarchySelection&&("filtering"!=t.requestType&&"searching"!=t.requestType||(e.each(s.updatedRecords,function(e,t){t.hasChildRecords&&i._updateParentSelection(t)}),i.selectAllRows())),s.showSummaryRow&&i._createSummaryRow(t),t&&s.showTotalSummary&&i._updateTotalSummaryRow(t),i.updateCollapsedRecordCount(),i.updateHeight(),s.enableAltRow&&i.updateAltRow()},_removeChildRecords:function(e,i){var s=this,a=s.model,r=t.isNullOrUndefined(i.childRecords)?[]:i.childRecords,n=e.indexOf(i);n>-1&&(i.checkboxState="unchecked",e.splice(n,1));for(var o=0;o<r.length;o++)r[o].hasChildRecords?s._removeChildRecords(e,r[o]):(n=e.indexOf(r[o]))>-1&&(r[o].checkboxState="unchecked",e.splice(n,1));i.parentItem&&a.selectionSettings.enableHierarchySelection&&s._updateParentSelection(i.parentItem)},_removeChildItem:function(e){for(var i,s,a=this,r=0;r<e.childRecords.length;r++)i=e.childRecords[r],this.dataSource()instanceof t.DataManager?this.dataSource().dataSource.offline&&this.dataSource().dataSource.json?(s=this.dataSource().dataSource.json.indexOf(i.item),-1!==s&&this.dataSource().dataSource.json.splice(s,1),i.hasChildRecords&&a._removeChildItem(i)):a._isDataManagerUpdate&&(s=a._jsonData.indexOf(i.item),-1!==s&&a._jsonData.splice(s,1),i.hasChildRecords&&a._removeChildItem(i)):(s=this.dataSource().indexOf(i.item),-1!==s&&this.dataSource().splice(s,1),i.hasChildRecords&&a._removeChildItem(i))},_updateCheckboxColumnName:function(){var e=this,i=e.model;if(e._checkboxSelection&&!i.rowTemplateID&&!i.altRowTemplateID){var s=i.columns.filter(function(e){return 1==e.showCheckbox});if(e._addCheckboxColumn=this._getDefaultCheckboxColumn(),e._checkboxColumnName=s.length>0?s[0].isTemplateColumn?null:s[0].field:null,t.isNullOrUndefined(e._checkboxColumnName)){var a=i.columns[i.treeColumnIndex];if(i.columns[0].nonColumn)e._checkboxColumnName=i.columns[0].field;else{for(var r=0;r<i.columns.length;r++)1==i.columns[r].nonColumn&&i.columns.splice(r,1);i.columns.splice(0,0,e._addCheckboxColumn),e._checkboxColumnName=e._addCheckboxColumn.field}a&&(i.treeColumnIndex=i.columns.indexOf(a))}e._frozenColumnsLength>0&&!i.columns[0].isFrozen&&e._checkboxColumnName==e._addCheckboxColumn.field&&(i.columns[0].isFrozen=!0,e._frozenColumnsLength+=1,e._frozenColumns.splice(0,0,i.columns[0]),i.scrollSettings.frozenColumns=this._frozenColumnsLength)}},batchSave:function(){var e=this,t=e.model,i={},s=e.batchChanges,a=s.changed,r=s.deleted,n=s.added;if(i.type="beforeBatchSave",i.batchChanges=s,e._trigger("beforeBatchSave",i))return!0;var o=t.filterSettings.filteredColumns;o&&o.length>0&&e.clearFilter();for(var l=0;l<a.length;l++)delete a[l].batchEditedFields;for(var d=0;d<n.length;d++)delete n[d].isBatchAdd,n[d].batchEditedFields&&delete n[d].batchEditedFields;r.length&&e.deleteRow(),e._batchEditStarts&&(e._batchEditStarts=!1),e._cancelSaveTools(),e._checkboxSelection&&e._resetCheckboxState(),e.processBindings(),e.renderRecords(),i.requestType="batchSave",i.batchChanges=s,e._trigger("actionComplete",i),e.batchChanges.changed=[],e.batchChanges.added=[],e.batchChanges.deleted=[],e.batchChanges.updatedHierarchyRowIndexData=[],e._batchSaveCancel=""},batchCancel:function(){var e=this,t=e.model,i=e.batchChanges,s=i.changed,a=i.deleted,r=i.added,n={},o=e._mergeRecords(),l=t.filterSettings.filteredColumns;l&&l.length>0&&e.clearFilter(),r.length&&e.deleteRow();for(var d=0;d<s.length;d++){var h=s[d].batchEditedFields;for(var c in h)s[d][c]=h[c],s[d].item[c]=h[c];delete s[d].batchEditedFields}for(var u=0;u<a.length;u++)e._updateBatchDeletedRecord(a[u]);if(e.batchChanges.changed=[],e.batchChanges.added=[],e.batchChanges.deleted=[],e.batchChanges.updatedHierarchyRowIndexData=[],e._batchSaveCancel="",e._batchEditStarts&&(e._batchEditStarts=!1),e._cancelSaveTools(),e._checkboxSelection&&e._resetCheckboxState(),t.showSummaryRow){e._batchEditCancel=!0;for(var p=0;p<o.length;p++)n.record=o[p],e._updateSummaryRow(n)}t.showTotalSummary&&(n.editType="celledit",e._updateTotalSummaryRow(n)),e.processBindings(),e.renderRecords(),e._batchEditCancel=!1},_resetCheckboxState:function(){var t=this,i=t.model;if(t._checkboxSelection){var s=i.flatRecords;e.map(s,function(e){"checked"!=e.checkboxState&&"indeterminate"!=e.checkboxState||(e.checkboxState="unchecked")}),t.selectAllRows()}},_updateBatchDeletedRecord:function(e){var t=this;t.model;if(delete e.isBatchDelete,e.isBatchAdd)return t.batchChanges.added=[],t.batchChanges.added.push(e),t.deleteRow(),!0;if(e.batchEditedFields){var i=e.batchEditedFields;for(var s in i)e[s]=i[s];delete e.batchEditedFields}if(e.hasChildRecords)for(var a=e.childRecords,r=0;r<a.length;r++)t._updateBatchDeletedRecord(a[r])},_processEditing:function(){var i=this,s=i.model;i._checkboxSelection&&i._updateCheckboxColumnName(),(s.editSettings.allowEditing||s.editSettings.allowAdding)&&("cellediting"===s.editSettings.editMode.toLowerCase()||"rowediting"===s.editSettings.editMode.toLowerCase()||"batchediting"==s.editSettings.editMode.toLowerCase()&&("cell"==s.editSettings.batchEditSettings.editMode||"row"==s.editSettings.batchEditSettings.editMode)||"normal"===s.editSettings.editMode.toLowerCase()&&"cell"===s.selectionSettings.selectionMode.toLowerCase()?i._addCellEditTemplate():"dialogediting"!==s.editSettings.editMode.toLowerCase()&&("batchediting"!=s.editSettings.editMode.toLowerCase()||"dialog"!=s.editSettings.batchEditSettings.editMode)||!t.isNullOrUndefined(s.editSettings.dialogEditorTemplateID)&&""!=s.editSettings.dialogEditorTemplateID?"dialogediting"!==s.editSettings.editMode.toLowerCase()&&("batchediting"!=s.editSettings.editMode.toLowerCase()||"dialog"!=s.editSettings.batchEditSettings.editMode)||t.isNullOrUndefined(s.editSettings.dialogEditorTemplateID)||""==s.editSettings.dialogEditorTemplateID||(i._treeGridAddEditDialogTemplate(),0==e("#"+this._id+"_dialogEdit").length&&this.element.append(this._renderEditDialog())):(i._treeGridAddEditDialog(),0==e("#"+this._id+"_dialogEdit").length&&this.element.append(this._renderEditDialog())))},_toolBarClick:function(t){if(t.event.which&&(3==t.event.which||2==t.event.which)||t.event.button&&2==t.event.button)return!1;var i=this,s=(i.model,e(this.itemsContainer).closest(".e-treegrid")),a=s.ejTreeGrid("instance"),r=s.attr("id"),n=e("#"+a._id+"_toolbarItems");if(void 0==t.event&&"INPUT"==t.target.tagName&&t.currentTarget.id==r+"_search")return!1;-1!=a.model.dateFormat.toLowerCase().indexOf("hh")?e.isFunction(e.fn.ejDateTimePicker)&&e("#"+r+"EditForm").find(".e-datepicker").ejDateTimePicker("hide"):e.isFunction(e.fn.ejDatePicker)&&e("#"+r+"EditForm").find(".e-datepicker").ejDatePicker("hide");var o=t.currentTarget,l=(t.target,{itemName:t.text,currentTarget:o,model:a.model,sender:t});if(s.ejTreeGrid("instance")._trigger("toolbarClick",l))return!1;switch(e(n).ejToolbar("deselectItem",t.currentTarget),t.currentTarget.id){case r+"_add":a._toolbarOperation(r+"_add",t);break;case r+"_edit":a._toolbarOperation(r+"_edit",t);break;case r+"_delete":a._toolbarOperation(r+"_delete",t);break;case r+"_update":a._toolbarOperation(r+"_update",t);break;case r+"_cancel":a._toolbarOperation(r+"_cancel",t);break;case r+"_expandAll":a._toolbarOperation(r+"_expandAll",t);break;case r+"_collapseAll":a._toolbarOperation(r+"_collapseAll",t);break;case r+"_pdfExport":a._toolbarOperation(r+"_pdfExport",t);break;case r+"_excelExport":a._toolbarOperation(r+"_excelExport",t);break;case r+"_print":a._toolbarOperation(r+"_print",t);break;case r+"_search":a._isRowEdit?a.cancelRowEditCell():a.model.isEdit&&a.cancelEditCell()}return!1},_toolbarOperation:function(e,t){var i=this.element,s=i.ejTreeGrid("instance"),a=i.attr("id"),r=this,n=this.selectedItem(),o=t.target,l=r.model.allowPaging?this._updatedPageData.indexOf(n):this.selectedRowIndex();switch(s._exportTo=s.export,e){case a+"_add":"cell"==r.model.selectionSettings.selectionMode&&(r.model.editSettings.rowPosition="top"),r.model.editSettings.allowEditing&&("dialogEditing"==r.model.editSettings.editMode||"batchediting"==r.model.editSettings.editMode.toLowerCase()&&"dialog"==r.model.editSettings.batchEditSettings.editMode)?r._showTreeGridAddEditDialog(-1,"add"):r._startAdd(o,null);break;case a+"_edit":r.updateScrollBar(),r.model.editSettings.allowEditing&&("dialogEditing"==r.model.editSettings.editMode||"batchediting"==r.model.editSettings.editMode.toLowerCase()&&"dialog"==r.model.editSettings.batchEditSettings.editMode)?r._showTreeGridAddEditDialog(l):r._editRow(l);break;case a+"_delete":r.deleteRow(),r.model.editSettings.showDeleteConfirmDialog||r._cancelSaveTools(),r._isRefreshAddedRecord=!1;break;case a+"_update":d=r.model.editSettings.editMode,"cellediting"==d.toLowerCase()?r._saveEditedElements():"rowediting"==d.toLowerCase()?r.saveRow():"batchediting"==d.toLowerCase()&&(r.cancelEdit(),r._batchSaveCancel="save",r.model.editSettings.showConfirmDialog?r._confirmDialog.find(".e-content").html(r._batchSaveConfirmText).end().ejDialog("open"):r.batchSave()),r._clearContextMenu(),this._removeDetailsRow(),r._focusTreeGridElement();break;case a+"_cancel":var d=r.model.editSettings.editMode;"cellediting"==d.toLowerCase()?r._isRowEdit?r.cancelRowEditCell():r.cancelEditCell():"rowediting"==d.toLowerCase()?r.cancelRowEditCell():"batchediting"===d.toLowerCase()&&(r._isRowEdit?r.cancelRowEditCell():r.model.isEdit&&r.cancelEditCell(),r._batchSaveCancel="cancel",r.model.editSettings.showConfirmDialog?r._confirmDialog.find(".e-content").html(r._cancelEditText).end().ejDialog("open"):r.batchCancel()),"auto"==r.model.sizeSettings.height&&r._updateContentHeight(),r._cancelSaveTools(),r._clearContextMenu(),this._removeDetailsRow();break;case a+"_expandAll":r.expandAll();break;case a+"_collapseAll":r.collapseAll();break;case a+"_pdfExport":s._exportTo(s.model.exportToPdfAction,"pdfExporting",s.model.allowMultipleExporting);break;case a+"_excelExport":s._exportTo(s.model.exportToExcelAction,"excelExporting",s.model.allowMultipleExporting);break;case a+"_print":s.print();break;case a+"_search":if(r._batchEditStarts&&!r._confirmDialog.is(":visible"))return r._batchSaveLostWarning("Searching"),r._batchTempDetails.searchTarget=t,r._batchTempDetails.searchString=t.value,!0;r._searchString!=t.value&&(r.search(t.value),r._updateToolbarItems(),r._isRefreshAddedRecord=!1)}return r._refreshToolBar(),!1},_batchSaveLostWarning:function(e){var t=this,i=t.model;"batchediting"==i.editSettings.editMode.toLowerCase()&&(i.isEdit?t.saveCell():t._isRowEdit&&t.saveRow(),t._batchSaveCancel="saveLost"+e,i.editSettings.showConfirmDialog?t._confirmDialog.find(".e-content").html(t._batchSaveLostChangesText).end().ejDialog("open"):t.batchCancel())},_renderConfirmDialog:function(){var i=this,s=t.buildTag("div.e-content",i.localizedLabels.deleteRecordText),a=t.buildTag("span.e-buttons",'<input type="button" class="e-flat e-btnsub" id='+i._id+'_ConfirmDialogOK value="'+this.localizedLabels.okButtonText+"\" /> <input type='button' class='e-flat e-btncan' id="+i._id+"_ConfirmDialogCancel value='"+i.localizedLabels.cancelButtonText+"' />",{float:"right",padding:".5em 0em"});i._confirmDialog=t.buildTag("div#"+i._id+"_ConfirmDialog",{height:"auto",width:"auto",float:"left"}),i._confirmDialog.append(s).append(a),i.element.append(i._confirmDialog),a.find("input").ejButton({cssClass:i.model.cssClass,showRoundedCorner:!0,size:"mini",click:e.proxy(i._triggerConfirm,i)}),i._confirmDialog.ejDialog({showOnInit:!1,enableAnimation:!1,showHeader:!1,width:"auto",minWidth:0,minHeight:0,enableModal:!0,enableResize:!1})},_triggerConfirm:function(t){var i=this,s=i.model;if(void 0!==t&&t.model.text==i.localizedLabels.okButtonText){if("save"==i._batchSaveCancel)i.batchSave();else if("cancel"==i._batchSaveCancel)i.batchCancel();else if("saveLostDrag"==i._batchSaveCancel)i._batchSaveCancel="cancel",i.batchCancel();else if("saveLostColumnMenu"==i._batchSaveCancel)i._batchSaveCancel="cancel",i.batchCancel(),i._renderColumnMenu(i._batchTempDetails.menuTarget);else if("saveLostSearching"==i._batchSaveCancel)i._batchSaveCancel="cancel",i.batchCancel(),i.search(i._batchTempDetails.searchString),i._updateToolbarItems(),i._isRefreshAddedRecord=!1;else if("saveLostPaging"==i._batchSaveCancel){if(i._batchSaveCancel="cancel",i.batchCancel(),i._prevPageNo==i._batchTempDetails.currentPage)return;i._isNextPage=!0,i._isRowEdit?i.cancelRowEditCell():i.model.isEdit&&i.cancelEditCell(),i.gotoPage(i._batchTempDetails.currentPage)}else if("saveLostFiltering"==i._batchSaveCancel){i._batchSaveCancel="cancel",i.batchCancel();var a=i._batchTempDetails;"filterbar"==s.filterSettings.filterType?i.filterColumn(a.fieldName,a.filterOperator,a.filterValue,a.predicate,a.matchcase,a.actualFilterValue):"excel"!=s.filterSettings.filterType&&"menu"!=s.filterSettings.filterType||i._onHeaderClick(a.filterTarget)}else i.deleteRow(null,i._isFromContextmenu,i._deleteRowIndex);i._confirmDialog.ejDialog("close"),i._cancelSaveTools()}else{if(i._confirmDialog.ejDialog("close"),"saveLostFiltering"==i._batchSaveCancel&&"filterbar"==s.filterSettings.filterType){var r=e(i._batchTempDetails.filterTarget);r.hasClass("e-numerictextbox")?r.ejNumericTextbox({value:null}):r.hasClass("e-dropdownlist")?r.ejDropDownList({value:null}):r.closest("input").val("")}if("saveLostSearching"==i._batchSaveCancel&&!i._searchString){var r=e(i._batchTempDetails.searchTarget);r.hasClass("e-ejinputtext")&&r.closest("input").val("")}if("saveLostPaging"==i._batchSaveCancel){this.getPager().ejPager("model").currentPage=i._prevPageNo,i.getPager().ejPager("refreshPager")}}i._focusTreeGridElement(),i._deleteRowIndex=-1,i._isFromContextmenu=!1,i._batchSaveCancel=""},print:function(){var i={},s=this,a=s.model;i.requestType="print",s._trigger("actionBegin",i);var r=window.open("","print","height=452,width=1024,tabbar=no"),n=t.buildTag("div#"+s._id+"Print"),o=e.extend({},s.model),l=e.extend(!0,[],a.columns),d=l,h=d.length;if(o.toolbarSettings=e.extend({},a.toolbarSettings),o.toolbarSettings.showToolbar=o.allowPaging=!1,o.selectedItem=null,o.enableVirtualization=!1,o.query.queries=[],o.printingEnabled=!0,this._frozenColumnsLength>0){for(var c=0;c<h;c++)d[c].isFrozen&&(d[c].isFrozen=!1);o.columns=d}if(this._commandColumnLength>0){for(var c=0;c<h;c++)d[c].commands&&(d.splice(c,1),h--,c--);o.columns=d}a.allowPaging&&a.pageSettings.printMode==t.TreeGrid.PrintMode.CurrentPage?(o.query.queries=[{fn:"onPage",e:{pageIndex:s._currentPage(),pageSize:a.pageSettings.pageSize}}],o.dataBound=function(){this._printProcess(r)}):o.dataBound=function(){this._printProcess(r)},n.ejTreeGrid(o)},_printProcess:function(i){var s=this,a=this.element,r={requestType:"print",element:a};this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&a.find(".e-filterbar").remove(),e(a).find(".e-gridheader").css({width:"auto"}),this.clearSelection(),a.show(),s._trigger("beforePrint",r),t.print(a,i),s._trigger("actionComplete",r)},contextMenuOperations:function(i){var s,a=this,r=a.model,n=a._contextMenuSelectedIndex,o=a._contextMenuEvent,l=a._contextMenuSelectedItem,d=r.editSettings,h=d.editMode.toLowerCase();switch(this._isContextMenuItems||(c=a._contextMenuColumnDetails),i){case"contextMenu_Unfreeze":0==e(this).find(".e-expander").length&&(e(this).hasClass("e-disable")||(a._checkboxSelection&&2==a._frozenColumnsLength&&r.columns[0].nonColumn&&r.columns[0].isFrozen&&(r.columns[0].isFrozen=!1),a.freezeColumn(c.field,!1)));break;case"contextMenu_Freeze":0==e(this).find(".e-expander").length&&(e(this).hasClass("e-disable")||(a._checkboxSelection&&r.columns[0].nonColumn&&!r.columns[0].isFrozen&&(r.columns[0].isFrozen=!0),a.freezeColumn(c.field,!0)));break;case"contextMenu_FreezePreceding":0==e(this).find(".e-expander").length&&(e(this).hasClass("e-disable")||a.freezePrecedingColumns(c.field));break;case"contextMenu_SortDescending":r.allowMultiSorting&&(a._multiSortRequest=!0),0==e(this).find(".e-expander").length&&(r.isFromGantt||a.sortColumn(c.field,t.sortOrder.Descending),a._multiSortRequest=!1);break;case"contextMenu_SortAscending":r.allowMultiSorting&&(a._multiSortRequest=!0),0==e(this).find(".e-expander").length&&(r.isFromGantt||a.sortColumn(c.field,t.sortOrder.Ascending),a._multiSortRequest=!1);break;case"Delete":a.deleteRow(null,!0,a._contextMenuSelectedIndex),a._cancelSaveTools(),a._clearContextMenu();break;case"Above":a._subContextMenuAction(l,n,"Above"),a._focusTreeGridElement();break;case"Below":a._subContextMenuAction(l,n,"Below"),a._focusTreeGridElement();break;case"Add":a._setInitialData(),a._clearContextMenu();break;case"Edit":if("cellediting"==h||"batchediting"==h&&"cell"==d.batchEditSettings.editMode){var c=r.columns[a.getCellIndex(o)];t.isNullOrUndefined(c)||0==c.allowEditing||(a._focusTreeGridElement(),a._cellEditingDetails.columnIndex=a.getCellIndex(o),a._editedRowIndex=a._cellEditingDetails.rowIndex=a.getRowIndex(o),(s=a._cellEditingDetails.columnIndex>=0&&c.field)&&(a.updateScrollBar(),r.editSettings.allowEditing&&a.cellEdit(a._cellEditingDetails.rowIndex,s)&&a._editAddTools()))}else"rowediting"==h||"batchediting"==h&&"row"==d.batchEditSettings.editMode?(a.updateScrollBar(),a._editRow(n)):("dialogediting"==h||"batchediting"==h&&"dialog"==d.batchEditSettings.editMode)&&a._showTreeGridAddEditDialog(n);a._clearContextMenu();break;case"Save":if("cellediting"==h||"batchediting"==h&&"cell"==d.batchEditSettings.editMode){if(!this.editFormValidate())return!0;a._isRowEdit?a._endEdit():a.saveCell()}else("rowediting"==h||"batchediting"==h&&"row"==d.batchEditSettings.editMode)&&a.saveRow();a._clearContextMenu(),a._focusTreeGridElement();break;case"Cancel":"cellediting"==h||"batchediting"==h&&"cell"==d.batchEditSettings.editMode?a._isRowEdit?a.cancelRowEditCell():r.isEdit&&a.cancelEditCell():("rowediting"==h||"batchediting"==h&&"row"==d.batchEditSettings.editMode)&&a.cancelRowEditCell(),a._clearContextMenu(),a._focusTreeGridElement();break;default:var u={};this._isContextMenuItems?(u.data=l,u.menuId=i,a._triggerMenuEventHandler(i,u,!0),a._clearContextMenu()):(u.column=a._contextMenuColumnDetails,u.menuId=i,a._triggerMenuEventHandler(i,u,!1),a._clearContextMenu())}r.enableAltRow&&r.currentViewData[0]&&t.TreeGrid.updateAltRow(a,r.currentViewData[0],0,0)},_setCultureInfo:function(){var e=this,i=e.model,s=i.locale,a=e.localizedLabel,r=t.TreeGrid.Locale.default;a=i.predecessorTable||i.resourceTable?t.Gantt.Locale[s]:t.TreeGrid.Locale[s],e._toolboxTooltipTexts=a&&a.toolboxTooltipTexts?a.toolboxTooltipTexts:r.toolboxTooltipTexts,e._contextMenuTexts=a&&a.contextMenuTexts?a.contextMenuTexts:r.contextMenuTexts,e.model.isFromGantt?(e._columnMenuTexts=e.model.columnMenuTexts,e._deleteColumnText=e.model.deleteColumnText,e._okButtonText=e.model.okButtonText,e._cancelButtonText=e.model.cancelButtonText,e._columnDialogTexts=e.model.columnDialogTexts,e._columnDialogTitle=e.model.columnDialogTitle,e._confirmDeleteText=e.model.confirmDeleteText,e._editTypeText=e.model.editTypeText,e._textAlignTypeText=e.model.textAlignTypeText,e._clipModeText=e.model.clipModeText):(e._columnMenuTexts=a&&a.columnMenuTexts?a.columnMenuTexts:r.columnMenuTexts,e._columnDialogTexts=a&&a.columnDialogTexts?a.columnDialogTexts:r.columnDialogTexts,e._columnDialogTitle=a&&a.columnDialogTitle?a.columnDialogTitle:r.columnDialogTitle,e._deleteColumnText=a&&a.deleteColumnText?a.deleteColumnText:r.deleteColumnText,e._okButtonText=a&&a.okButtonText?a.okButtonText:r.okButtonText,e._cancelButtonText=a&&a.cancelButtonText?a.cancelButtonText:r.cancelButtonText,e._confirmDeleteText=a&&a.confirmDeleteText?a.confirmDeleteText:r.confirmDeleteText,e._editTypeText=a&&a.editTypeTexts?a.editTypeTexts:r.editTypeTexts,e._textAlignTypeText=a&&a.textAlignTypes?a.textAlignTypes:r.textAlignTypes,e._clipModeText=a&&a.clipModeTexts?a.clipModeTexts:r.clipModeTexts,e._dropDownListBlanksText=a&&a.dropDownListBlanksText?a.dropDownListBlanksText:r.dropDownListBlanksText,e._dropDownListClearText=a&&a.dropDownListClearText?a.dropDownListClearText:r.dropDownListClearText,e._trueText=a&&a.trueText?a.trueText:r.trueText,e._falseText=a&&a.falseText?a.falseText:r.falseText,e._batchSaveConfirmText=a&&a.batchSaveConfirmText?a.batchSaveConfirmText:r.batchSaveConfirmText,e._batchSaveLostChangesText=a&&a.batchSaveLostChangesText?a.batchSaveLostChangesText:r.batchSaveLostChangesText,e._cancelEditText=a&&a.cancelEditText?a.cancelEditText:r.cancelEditText,
e.model.emptyRecordText=a&&a.emptyRecord?a.emptyRecord:r.emptyRecord,e._filterMenuTexts=a&&a.filterMenuTexts?a.filterMenuTexts:r.filterMenuTexts)},refresh:function(e,i){var s=this,a=s.model;if(t.isNullOrUndefined(e)){var r={};r.requestType=t.TreeGrid.Actions.Refresh,this.sendDataRenderingRequest(r)}else s.resetModelCollections(),s._fieldNamesToQuery=[],s._assignedIdCollections=[],s._assignedParendIDs=[],a.dataSource=e,a.query=i,s.element.ejTreeGrid("destroy").ejTreeGrid(a)},_getNewIndex:function(){var e=this;return e._maxRowIndex+=1,e._maxRowIndex},_getNewId:function(){return this._lastInsertedId+1},_updateLastInsertedId:function(e){var t=this,i=isNaN(parseInt(e))?t._lastInsertedId<1?1:t._lastInsertedId:parseInt(e);t._lastInsertedId=t._lastInsertedId<i?i:t._lastInsertedId},_updateHierarchyRowIndexData:function(e,t,i){var s=this,a=s.model,r=a.editSettings.editMode.toLowerCase();e.updatedHierarchyRowIndexData=[];for(var n=i;n<t.length;n++)t[n].hierarchyRowIndex=n,a.hierarchyRowIndexMapping&&(t[n].item[a.hierarchyRowIndexMapping]=n),"batchediting"!=r?e.updatedHierarchyRowIndexData.push(t[n]):-1==s.batchChanges.updatedHierarchyRowIndexData.indexOf(t[n])&&s.batchChanges.updatedHierarchyRowIndexData.push(t[n])},_addRecord:function(i,s,a,r){var n=this;(n.model.isEdit||n._isRowEdit)&&n.cancelRowEditCell();var o,l,d,h,c,u,p,m=this.model,g=this.selectedRowIndex(),f=m.updatedRecords,_=m.flatRecords,v=m.parentRecords,b="row"==m.selectionSettings.selectionMode?this.selectedItem():f[n._rowIndexOfLastSelectedCell],x=m.columns,y=this.dataSource(),w=0,C=!1,S=!1,T=m.editSettings.editMode.toLowerCase(),R=!1,k={};if("array"===e.type(y)||y instanceof t.DataManager||(this.dataSource([]),y=this.dataSource()),t.isNullOrUndefined(i)){i=null;for(var O=0;O<x.length;O++)t.isNullOrUndefined(x[O].nonColumn)&&(i=n._restoreCustomData(i,"",x[O].field));S=!0}if("batchediting"==T&&(i.isBatchAdd=!0),m.idMapping&&m.parentIdMapping&&!t.isNullOrUndefined(i[n.model.parentIdMapping])&&"child"!=s){var D=m.flatRecords.filter(function(e){return e[m.idMapping]==i[m.parentIdMapping]});D.length>0&&(b=D[0],s=t.TreeGrid.RowPosition.Child,R=!0)}if((-1===g&&-1==n._rowIndexOfLastSelectedCell&&(s===t.TreeGrid.RowPosition.Above||s===t.TreeGrid.RowPosition.Below||s===t.TreeGrid.RowPosition.Child)||!s||m.selectedItems.length>1&&!n._checkboxSelection)&&(R||(s=t.TreeGrid.RowPosition.Top)),s==t.TreeGrid.RowPosition.Top||s==t.TreeGrid.RowPosition.Bottom?(u=0,p=null):s==t.TreeGrid.RowPosition.Above||s==t.TreeGrid.RowPosition.Below?(u=b.level,p=b.parentItem):s==t.TreeGrid.RowPosition.Child&&(u=b.level+1,p=b),m.idMapping&&m.parentIdMapping){var I=i[m.idMapping];if(t.isNullOrUndefined(I)||""==I||"contextMenu"==r)i[m.idMapping]=n._getNewId();else if(n._validateIdValue(I))return!1}if(k.requestType="add",k.data=i,k.level=u,k.rowPosition=s,k.parentItem=p,n._trigger("actionBegin",k)){if("dialog"==r)return!1}else{switch(i=k.data,s!=k.rowPosition&&(s=k.rowPosition),i[m.childMapping]&&i[m.childMapping].length&&delete i[m.childMapping],n.selectRows(-1),d=this._getNewIndex(),s){case t.TreeGrid.RowPosition.Top:w=0,c=null,o=n._createRecord(i,w),o.index=d,_.splice(0,0,o),f.splice(0,0,o),n._isHierarchyFiltering&&n._updateFilterParent.splice(0,0,o),v.splice(0,0,o),n._updateHierarchyRowIndexData(k,v,0),n._isDataManagerUpdate?n._jsonData.splice(0,0,o.item):y.splice(0,0,o.item),l=0;break;case t.TreeGrid.RowPosition.Bottom:w=0,c=null,o=n._createRecord(i,w),o.index=d,_.push(o),f.push(o),n._isHierarchyFiltering&&n._updateFilterParent.push(o),v.push(o),n._isDataManagerUpdate?n._jsonData.push(o.item):y.push(o.item),l=f.indexOf(o);break;case t.TreeGrid.RowPosition.Above:w=b.level,c=b.parentItem,o=n._createRecord(i,w,c),o.index=d,n._isHierarchyFiltering&&b.filterLevel>-1&&(o.filterLevel=b.filterLevel);var j,L,A;if(L=_.indexOf(b),A=f.indexOf(b),_.splice(L,0,o),f.splice(A,0,o),n._isHierarchyFiltering&&n._updateFilterParent.splice(A,0,o),t.isNullOrUndefined(c)){v.splice(v.indexOf(b),0,o),n._isDataManagerUpdate?n._jsonData.splice(n._jsonData.indexOf(b.item),0,o.item):y.splice(y.indexOf(b.item),0,o.item);var E=v.indexOf(b);n._updateHierarchyRowIndexData(k,v,E)}else{j=c.childRecords.indexOf(b),c.childRecords.splice(j,0,o),m.parentIdMapping?(o.item[m.parentIdMapping]=o.parentItem.item[m.idMapping],o[m.parentIdMapping]=o.parentItem.item[m.idMapping],n._isDataManagerUpdate?n._jsonData.push(o.item):y.push(o.item)):c.item[m.childMapping].splice(j,0,o.item);var P=c.childRecords;n._updateHierarchyRowIndexData(k,P,j)}l=A;break;case t.TreeGrid.RowPosition.Below:w=b.level,c=b.parentItem,o=n._createRecord(i,w,c),o.index=d,n._isHierarchyFiltering&&b.filterLevel>-1&&(o.filterLevel=b.filterLevel);var M=_.indexOf(b);if(b.hasChildRecords?(h=n.getChildCount(b,0),L=M+h+1,A=f.indexOf(b)+n._getVisibleChildRecordCount(b,0,f)+1):(L=M+1,A=f.indexOf(b)+1),_.splice(L,0,o),f.splice(A,0,o),n._isHierarchyFiltering&&n._updateFilterParent.splice(A,0,o),t.isNullOrUndefined(c)){v.splice(v.indexOf(b)+1,0,o),n._isDataManagerUpdate?n._jsonData.splice(n._jsonData.indexOf(b.item)+1,0,o.item):y.splice(y.indexOf(b.item)+1,0,o.item);var E=v.indexOf(b);n._updateHierarchyRowIndexData(k,v,E+1)}else{j=c.childRecords.indexOf(b),c.childRecords.splice(j+1,0,o),m.parentIdMapping?(o.item[m.parentIdMapping]=o.parentItem.item[m.idMapping],o[m.parentIdMapping]=o.parentItem.item[m.idMapping],n._isDataManagerUpdate?n._jsonData.push(o.item):y.push(o.item)):c.item[m.childMapping].splice(j+1,0,o.item);var P=c.childRecords;n._updateHierarchyRowIndexData(k,P,j+1)}l=A;break;case t.TreeGrid.RowPosition.Child:w=b.level+1,c=b,o=n._createRecord(i,w,c),o.index=d,n._isHierarchyFiltering&&b.filterLevel>-1&&(o.filterLevel=b.filterLevel+1);var M=_.indexOf(b);if(b.hasChildRecords){if(h=n.getChildCount(b,0),L=M+h+1,!b.expanded||!n.getExpandStatus(b)){var F={};F.expanded=!0,F.data=b,n._isInAdd=!0,n._isRefreshAddedRecord?(F.data.expanded=!0,n.updateExpandStatus(k.data,k.expanded),n.refreshContent(),n._isRefreshAddedRecord=!1):n._expandRecord(b),f=m.updatedRecords,n._isInAdd=!1}A=f.indexOf(b)+n._getVisibleChildRecordCount(b,0,f)+1-(m.showSummaryRow?m.summaryRows.length:0)}else n._isLoadonDemand&&(b.isChildRetrieved=!0),n.getExpandStatus(b)||n._expandRecord(b.parentItem),b.hasChildRecords=!0,b.childRecords=[],b.expanded=!0,m.parentIdMapping||(b.item[m.childMapping]=[]),b.isMilestone=!1,L=M+1,A=f.indexOf(b)+1;if(_.splice(L,0,o),n._isHierarchyFiltering&&n._updateFilterParent.splice(A,0,o),n._isLoadonDemand?b.isChildRetrieved&&f.splice(A,0,o):f.splice(A,0,o),!t.isNullOrUndefined(c)){j=c.childRecords.indexOf(b),c.childRecords.splice(j+1,0,o),m.parentIdMapping?(o.item[m.parentIdMapping]=o.parentItem.item[m.idMapping],o[m.parentIdMapping]=o.parentItem.item[m.idMapping],n._isDataManagerUpdate?n._jsonData.push(o.item):y.push(o.item)):c.item[m.childMapping].splice(j+1,0,o.item);var P=c.childRecords;n._updateHierarchyRowIndexData(k,P,0)}l=A}if(m.allowPaging)if(s==t.TreeGrid.RowPosition.Below||s==t.TreeGrid.RowPosition.Child){if("root"!==m.pageSettings.pageSizeMode||t.isNullOrUndefined(b.parentItem)){var N=n._updatedPageData[n._updatedPageData.length-1],z=n._updatedPageData.length==m.pageSettings.pageSize?m.updatedRecords.indexOf(N):l;l>z&&(n._currentPage(this._currentPage()+1),0)}}else s==t.TreeGrid.RowPosition.Top&&(n._currentPage()>1||n._currentPage()<1)?(n._currentPage(1),0):s==t.TreeGrid.RowPosition.Bottom&&n._currentPage()<m.pageSettings.totalPages&&(n._currentPage(m.pageSettings.totalPages),l);if((m.allowFiltering&&m.filterSettings.filteredColumns.length>0||n._searchString.length>0)&&n._flatFilteredRecords.push(o),S||!t.TreeGrid.RowPosition.Above&&!t.TreeGrid.RowPosition.Below)n._renderAddedRow(l,o),C=!0,n._emptyRowIndex="cell"==m.selectionSettings.selectionMode?l:null;else{var k={},x=m.columns;x.length;m.allowPaging||l,k.rowIndex=l,k.requestType="addNewRow",k.addedRow=i,"batchediting"!=T&&n._trigger("actionComplete",k)?f.splice(l,1):(n._updateAction(k),n._renderAddedRow(l,o),m.showSummaryRow&&("addNewRow"==k.requestType&&"child"==s&&n._createAndRenderSummaryRecords(k),n._updateSummaryRow(k)),m.showTotalSummary&&n._updateTotalSummaryRow(k),C=!0,m.idMapping&&m.parentIdMapping&&n._updateLastInsertedId(o[m.idMapping]))}"batchediting"==T&&C&&!S&&(n.batchChanges.added.push(o),n._batchEditStarts=!0),!1===m.enableVirtualization&&(m.sortSettings.sortedColumns.length>0||m.filterSettings.filteredColumns.length>0)&&(n._isRefreshAddedRecord=!0),m.allowPaging&&(f=n._updatedPageData);var V=C?f.indexOf(o):g;-1==V&&(V=g),m.allowSelection&&"row"==m.selectionSettings.selectionMode&&(n._rowSelectingEventTrigger(this._previousIndex,V)||(n.selectRows(V),m.selectionSettings.enableSelectAll&&n.selectAllRows(),n._checkboxSelection&&m.selectionSettings.enableHierarchySelection&&o.parentItem&&n._updateParentSelection(o.parentItem),n._rowSelectedEventTrigger(V))),m.allowSelection||"row"!=m.selectionSettings.selectionMode||n.selectRows(V),"cell"==m.selectionSettings.selectionMode&&(n._rowIndexOfLastSelectedCell=f.indexOf(o)),n.updateScrollBar(),"isEditRow"==a?n._editRow(f.indexOf(o),o):(t.TreeGrid.refreshRow(n,m.currentViewData.indexOf(o)),n._cancelSaveTools(),m.enableAltRow&&t.TreeGrid.updateAltRow(n,n.model.currentViewData[0],0,0)),!o.parentItem||s!=t.TreeGrid.RowPosition.Child||1!=o.parentItem.childRecords.length&&o.parentItem.hasFilteredChildRecords||(o.parentItem.hasFilteredChildRecords=!0,t.TreeGrid.refreshRow(n,m.currentViewData.indexOf(o.parentItem))),m.allowTextWrap&&n._$frozenTableContent.length>0?(n._updateWrapRowHeights("total,header"),n.updateHeight()):m.allowTextWrap&&m.enableVirtualization&&n.updateHeight()}if(n._commandColumnLength>0){if(t.isNullOrUndefined(a)){var B=t.TreeGrid.getRowByIndex(n,V);n._refreshUnboundTemplate(B)}if(s==t.TreeGrid.RowPosition.Child){var H=f.indexOf(o.parentItem),Y=t.TreeGrid.getRowByIndex(n,H);n._refreshUnboundTemplate(Y)}}return!0},_validateIdValue:function(t){var i=this,s=i.model,a=[],r=s.flatRecords;return a=i._isLoadonDemand?e.map(i._assignedIdCollections,function(e){if(e==t)return e}):e.map(r,function(e){if(e[s.idMapping]==t)return e}),!!a.length},_closeTreegridAddEditDialog:function(t,i){var s=this,a={};if(this._off(e("#"+this._id+"_dialogEdit"),"click keypress","#EditFormDialog_"+this._id+"_Save ,#EditFormDialog_"+this._id+"_Cancel",s._buttonClick),!s._isTreeAddEditDialogSave)return a.requestType="Add"===i?"closeAddDialog":"closeEditDialog",s._trigger("actionBegin",a);s._isTreeAddEditDialogSave=!1},showAddDialog:function(){var e=this;e.model.editSettings.allowAdding&&"dialogEditing"==e.model.editSettings.editMode&&e._showTreeGridAddEditDialog(null,"add")},showEditDialog:function(e){var t=this;t.model.editSettings.allowEditing&&"dialogEditing"==t.model.editSettings.editMode&&t._showTreeGridAddEditDialog(e)},_showTreeGridAddEditDialog:function(i,s){var a=document.createElement("div"),r=this,n=e(a),o=r.getOffsetRect(e("#"+r._id)[0]),l=[],d=r.model.columns,h=r._contextMenuTexts;if(!t.isNullOrUndefined(i)&&-1!=i||s||(i="cell"==r.model.selectionSettings.selectionMode?r.selectedCellIndexes()[0].rowIndex:r.selectedRowIndex()),l[0]=r.model.allowPaging?this._updatedPageData[i]:r.model.updatedRecords[i],s&&"add"===s.toLowerCase()){if(t.isNullOrUndefined(l[0])){l[0]=null;for(var c=0;c<d.length;c++)l[0]=r._restoreCustomData(l[0],"",d[c].field);r.model.parentIdMapping&&(l[0][r.model.idMapping]=r._getNewId())}n.addClass("e-dialogaddrow")}else n.addClass("e-dialogeditedrow");if(t.isNullOrUndefined(r.model.editSettings.dialogEditorTemplateID)||""==r.model.editSettings.dialogEditorTemplateID?a.innerHTML=e.render[this._id+"_JSONDialogEditingTemplate"](l):t.isNullOrUndefined(r.model.editSettings.dialogEditorTemplateID)||""==r.model.editSettings.dialogEditorTemplateID||(a.innerHTML=e.render[this._id+"_JSONdialogTemplateMode"](l)),"dialogEditing"==this.model.editSettings.editMode||"batchediting"==r.model.editSettings.editMode.toLowerCase()&&"dialog"==r.model.editSettings.batchEditSettings.editMode){e("#"+this._id+"_dialogEdit").html(e(a));var u={};u.cssClass=this.model.cssClass,u.enableRTL=!1,u.enableResize=!1,u.showOnInit=!1,u.content="#"+this._id,e(window).width()<=r._responsiveMinWidth&&r.model.isResponsive?(u.width=e("#"+r._id).width()+"px",u.height=e("#"+r._id).height()+"px",u.enableModal=!1,u.isResponsive=!1,u.allowDraggable=!1):(u.width="auto",u.height="auto",u.enableModal=!0,u.isResponsive=!1,u.allowDraggable=!0),u.allowKeyboardNavigation=!1,s&&"add"===s.toLowerCase()?(u.title=h.addRowText,u.beforeClose=function(e){r._closeTreegridAddEditDialog(e,"Add")&&(e.cancel=!0),r._focusTreeGridElement()}):(u.title=h.editText,u.beforeClose=function(e){r._closeTreegridAddEditDialog(e,"Edit")&&(e.cancel=!0),r._focusTreeGridElement()}),e("#"+this._id+"_dialogEdit").ejDialog(u);var p={};if(p.data=l[0],s&&"add"===s.toLowerCase()?(p.requestType="beforeOpenAddDialog",p.rowPosition=r.model.editSettings.rowPosition):p.requestType="beforeOpenEditDialog",p.element=e("#"+r._id+"_dialogEdit"),!r._trigger("actionBegin",p)){var m={};m.columnIndex=i,m.data=p.data,m.requestType="beginEdit",r._refreshEditForm(m),p.data=m.data,s&&"add"===s.toLowerCase()?p.requestType="openAddDialog":p.requestType="openEditDialog",p.element=e("#"+r._id+"_dialogEdit"),r._trigger("actionBegin",p)||(e("#"+this._id+"_dialogEdit").ejDialog("open"),r._currentEditRecordDialogIndex=this.model.currentViewData.indexOf(m.data),e(window).width()<=r._responsiveMinWidth&&r.model.isResponsive?(e("#"+r._id+"_dialogEdit_wrapper").css({left:o.left+"px",top:o.top+"px"}),e("#"+r._id+"_dialogEdit_wrapper").removeClass("e-shadow").removeClass("e-treegridadaptivedialog"),e("#"+r._id+"_dialogEdit").removeClass("e-shadow")):(e("#"+r._id+"_dialogEdit_wrapper").addClass("e-shadow").addClass("e-treegridadaptivedialog"),e("#"+r._id+"_dialogEdit").addClass("e-shadow")),this._on(e("#"+this._id+"_dialogEdit"),"click keypress","#EditFormDialog_"+this._id+"_Save ,#EditFormDialog_"+this._id+"_Cancel",r._buttonClick),e("#"+r._id+"_dialogEdit").ejDialog("refresh"))}}e.isFunction(e.validator)&&(r._initValidator(),r.setValidation())},addRow:function(e,t){var i=this;i.model;if(i._cancelEditState(),e)return!!i._addRecord(e,t);i._addRecord(null,t,"isEditRow")},_startAdd:function(e,t){var i=this,s=this.model;i.model.allowSelection&&"multiple"==i.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&i._clearMultiSelectPopup(),i._addRecord(null,s.editSettings.rowPosition,"isEditRow")},_getRecordIndexByItem:function(e,i){var s=t.DataManager(i).executeLocal(t.Query().where("item",t.FilterOperators.equal,e));return s.length>0?i.indexOf(s[0]):-1},_expandRecord:function(e){if(!this._isLoadonDemand||e.isChildRetrieved)for(var i=e,s={};null!=i;)0==i.expanded&&(s.expanded=!0,s.data=i,i.parentItem?this._isInExpandCollapseAll=!0:this._isInExpandCollapseAll=!1,t.TreeGrid.sendExpandCollapseRequest(this,s)),i=i.parentItem},scrollOffset:function(e,t){var i=this.getScrollElement().data("ejScroller");this._saveEditedElements(),"number"!=typeof t&&"number"!=typeof parseInt(t)||(t=parseInt(t))>=0&&this.getMaxScrollHeight()>=t&&i.scrollY(t,!0),"number"!=typeof e&&"number"!=typeof parseInt(e)||(e=parseInt(e))>=0&&this.getMaxScrollWidth()>=e&&i.scrollX(e,!0)},getScrollTopOffset:function(){return this.getScrollElement().ejScroller("model.scrollTop")},getScrollLeftOffset:function(){return this.getScrollElement().ejScroller("model.scrollLeft")},scrollToTop:function(){var e,t=this.model,i=this.getUpdatedRecords(),s=-1;this.isVScroll()&&(this._saveEditedElements(),i=t.allowPaging?i:this.getExpandedRecords(t.updatedRecords),i.length>0&&(s=0,e=i[0],s=i.indexOf(e),this.updateScrollBar(s),t.allowSelection&&!this._rowSelectingEventTrigger(this.selectedRowIndex(),s)&&(this.selectRows(s),this._rowSelectedEventTrigger(s))))},scrollToBottom:function(){var e,t,i=this.model,s=-1;this.isVScroll()&&(this._saveEditedElements(),e=i.allowPaging?this.getUpdatedRecords():this.getExpandedRecords(i.updatedRecords),e.length>0&&(s=e.length-1,t=e[s],s=i.allowPaging?e.indexOf(t):i.updatedRecords.indexOf(t),this.updateScrollBar(s),i.allowSelection&&!this._rowSelectingEventTrigger(this.selectedRowIndex(),s)&&(this.selectRows(s),this._rowSelectedEventTrigger(s))))},_editAddTools:function(){var t=this,i=t.model,s=e("#"+t._id+"_toolbarItems"),a=t.model.editSettings,r=i.toolbarSettings.toolbarItems,n=[];a.allowAdding&&-1!==r.indexOf("add")&&!e(s).find(".e-addnew").parent("li").hasClass("e-disable")&&"click"!=a.beginEditAction&&n.push(e(s).find(".e-addnew").parent()[0]),a.allowEditing&&-1!==r.indexOf("edit")&&!e(s).find(".e-edit").parent("li").hasClass("e-disable")&&n.push(e(s).find(".e-edit").parent()[0]),a.allowDeleting&&-1!==r.indexOf("delete")&&!e(s).find(".e-delete").parent("li").hasClass("e-disable")&&"click"!=i.editSettings.beginEditAction&&n.push(e(s).find(".e-delete").parent()[0]),n.forEach(function(t){e(s).ejToolbar("disableItem",t)});var o=[];("batchediting"!=a.editMode.toLowerCase()||"batchediting"==a.editMode.toLowerCase()&&t._batchEditStarts)&&(-1!==r.indexOf("cancel")&&o.push(e(s).find(".e-cancel").parent()[0]),-1!==r.indexOf("update")&&o.push(e(s).find(".e-save").parent()[0])),o.forEach(function(t){e(s).ejToolbar("enableItem",t)})},_cancelSaveTools:function(){var t,i,s=this,a=s.model,r=s.model.editSettings,n=e("#"+s._id+"_toolbarItems"),o=[],l=a.toolbarSettings.toolbarItems;if(a.isFromGantt){var n=e("#"+s._id.replace("ejTreeGrid","")+"_toolbarItems"),t=[],i=[];1==a.readOnly?(i=[],i.push(e(n).find(".e-addnewitem").parent()[0]),i.push(e(n).find(".e-edititem").parent()[0]),i.push(e(n).find(".e-edititem").parent()[0])):(r.allowAdding&&-1!==l.indexOf("add")&&t.push(e(n).find(".e-addnewitem").parent()[0]),r.allowEditing&&-1!==l.indexOf("edit")&&a.allowSelection&&"click"!=r.beginEditAction&&(-1!=s.selectedRowIndex()&&1==a.selectedItems.length?t.push(e(n).find(".e-edititem").parent()[0]):i.push(e(n).find(".e-edititem").parent()[0])),r.allowDeleting&&-1!==l.indexOf("delete")&&a.allowSelection&&(-1!=s.selectedRowIndex()?t.push(e(n).find(".e-deleteitem").parent()[0]):i.push(e(n).find(".e-deleteitem").parent()[0])),r.allowIndent&&(-1!==l.indexOf("indent")||-1!==l.indexOf("outdent"))&&a.allowSelection&&-1==s.selectedRowIndex()&&(i.push(e(n).find(".e-indent").parent()[0]),i.push(e(n).find(".e-outdent").parent()[0])),e(n).ejToolbar("enableItem",t),-1!==l.indexOf("cancel")&&i.push(e(n).find(".e-cancel").parent()[0]),-1!==l.indexOf("update")&&i.push(e(n).find(".e-saveitem").parent()[0])),i.forEach(function(t){e(n).ejToolbar("disableItem",t)})}else t=[],i=[],r.allowAdding?-1!==l.indexOf("add")&&t.push(e(n).find(".e-addnew").parent()[0]):i.push(e(n).find(".e-addnew").parent()[0]),r.allowEditing&&-1!==l.indexOf("edit")?-1!=s.selectedRowIndex()&&a.allowSelection&&(1==a.selectedItems.length||s._checkboxSelection)&&"click"!=r.beginEditAction?t.push(e(n).find(".e-edit").parent()[0]):e(n).find(".e-edit").parent("li").hasClass("e-disable")||i.push(e(n).find(".e-edit").parent()[0]):i.push(e(n).find(".e-edit").parent()[0]),r.allowDeleting&&-1!==l.indexOf("delete")?(s._checkboxSelection||-1!=s.selectedRowIndex()&&a.allowSelection)&&a.selectedItems.length>0?t.push(e(n).find(".e-delete").parent()[0]):e(n).find(".e-delete").parent("li").hasClass("e-disable")||i.push(e(n).find(".e-delete").parent()[0]):i.push(e(n).find(".e-delete").parent()[0]),o=s._getParentRecords(a.updatedRecords,s),o.length<=0?(-1===l.indexOf("expandAll")||e(n).find(".e-expandall").parent("li").hasClass("e-disable")||i.push(e(n).find(".e-expandall").parent()[0]),-1===l.indexOf("collapseAll")||e(n).find(".e-collapseall").parent("li").hasClass("e-disable")||i.push(e(n).find(".e-collapseall").parent()[0])):(-1!==l.indexOf("expandAll")&&t.push(e(n).find(".e-expandall").parent()[0]),-1!==l.indexOf("collapseAll")&&t.push(e(n).find(".e-collapseall").parent()[0])),("click"!=r.beginEditAction||"click"==r.beginEditAction&&!a.isEdit)&&("batchediting"!=r.editMode.toLowerCase()||"batchediting"==r.editMode.toLowerCase()&&!s._batchEditStarts?(-1===l.indexOf("cancel")||e(n).find(".e-cancel").parent("li").hasClass("e-disable")||i.push(e(n).find(".e-cancel").parent()[0]),-1===l.indexOf("update")||e(n).find(".e-save").parent("li").hasClass("e-disable")||i.push(e(n).find(".e-save").parent()[0])):"batchediting"==r.editMode.toLowerCase()&&s._batchEditStarts&&(-1!==l.indexOf("cancel")&&e(n).find(".e-cancel").parent("li").hasClass("e-disable")&&t.push(e(n).find(".e-cancel").parent()[0]),-1!==l.indexOf("update")&&e(n).find(".e-save").parent("li").hasClass("e-disable")&&t.push(e(n).find(".e-save").parent()[0]))),i.forEach(function(t){e(n).ejToolbar("disableItem",t)}),t.forEach(function(t){e(n).ejToolbar("enableItem",t)})},_checkIsEmptyRow:function(e){var i,s=this.model.columns;for(i=0;i<s.length;i++){var a=this._getCustomCellValue(e,s[i].field);if(" "!==a&&!t.isNullOrUndefined(a)&&""!==a&&!1!==a)return!1}return!0},_beginEdit:function(){var e=this,t={};e._trigger("beginEdit",t),e._isinBeginEdit=!0},_endEdit:function(){var i=this;i._isinBeginEdit=!1;var s=this.selectedRowIndex();t.TreeGrid.getRowByIndex(i,s);if(!this.editFormValidate())return!0;e("tr").hasClass("e-addedrow")||e("tr").hasClass("e-rowedit")?i.saveRow():i.saveCell()},_refreshTreeGridOnExpandCollapseAll:function(e){var i=this,s=this.model;if(s.enableVirtualization)s.enableAltRow&&i.updateAltRow(),i.sendDataRenderingRequest(e),s.allowTextWrap?(i._$frozenTableContent.length>0&&i._updateRowHeight(),i._setScrollTop(e.requestType),i.updateHeight(),i.getScrollElement().hasClass("e-scroller")&&i.getScrollElement().ejScroller("refresh")):(i._setScrollTop(),i.updateHeight());else{if(s.allowPaging){var a,r={};r.totalRecordsCount=this.getExpandedRecords(s.updatedRecords).length,i.getPager().ejPager("option",r).ejPager("refreshPager"),a=this.getPager().ejPager("model"),i._currentPage(a.currentPage),r.requestType="paging",i.processBindings(r)}if(i._isRefreshAddedRecord)return i.processBindings(),this.renderRecords(),void(i._isRefreshAddedRecord=!1);if(s.allowTextWrap&&i._$frozenTableContent.length>0){i._updateRowHeight(),i.getScrollElement().ejScroller("refresh");var n=i.getScrollElement().ejScroller("model.scrollTop");i._getFrozenScrollElement().scrollTop(n)}else i.updateHeight();s.enableAltRow&&s.currentViewData.length>0&&t.TreeGrid.updateAltRow(i,i.model.currentViewData[0],0,0)}},_expandCollapseInnerLevelRecord:function(e,i){for(var s=this,a=e.childRecords.length,r={},n=0;n<a;n++)if(e.childRecords[n].hasChildRecords&&(r.data=e.childRecords[n],r.expanded=i,r.recordIndex=s.model.updatedRecords.indexOf(r.data),r.requestType=t.TreeGrid.Actions.ExpandCollapse,!s._triggerExpandingCollapsingEvent(r)&&(s._expandCollapseInnerLevelRecord(e.childRecords[n],i),e.childRecords[n].expanded!=i))){if(s._isLoadonDemand&&!e.childRecords[n].isChildRetrieved){s._isInExpandCollapseAll=!0,r.requestType=t.TreeGrid.Actions.ExpandCollapse;var o=t.TreeGrid.expandRowsonDemand(s,e.childRecords[n],r);if(o){s._allParentItems.splice(s._allParentItems.indexOf(e.childRecords[n]),1),e.childRecords[n].expanded=!1;continue}return!0}t.TreeGrid.sendExpandCollapseRequest(s,r)}},_expandParentLevelRecord:function(e,i){var s=this,a={},r=s.getExpandStatus(e);e.expanded&&r||(a.data=e,a.expanded=i,a.recordIndex=s.model.updatedRecords.indexOf(e),s._triggerExpandingCollapsingEvent(a)||t.TreeGrid.sendExpandCollapseRequest(s,a),a.data.parentItem&&s._expandParentLevelRecord(a.data.parentItem,i))},expandAtLevel:function(e){var i,s,a=this,r=a.model,n={};if(!a._isHierarchyFiltering)if(r.allowPaging&&r.pageSettings.pageSizeMode==t.TreeGrid.PageSizeMode.Root&&r.enableVirtualization)a._expandCollapseSettings.atLevel="expandAtLevel",a._expandCollapseSettings.level=e,a._expandCollapsePages=[],a._isInExpandCollapseAll=!0,a._expandPageLevelData(),n.requestType=t.TreeGrid.Actions.ExpandCollapse,r.flatRecords.length>0&&a._refreshTreeGridOnExpandCollapseAll(n),a._isInExpandCollapseAll=!1,a.updateHeight();else{s=a._getParentRecords(a.model.updatedRecords,a);for(var o=0;o<s.length;o++)if(i=s[o],i.level==e){if(n.data=i,n.expanded=!0,n.recordIndex=r.updatedRecords.indexOf(i),a._isLoadonDemand&&!i.isChildRetrieved){n.recordLevel=e,n.isExpandingParticularLevelParent=!0,n.requestType=t.TreeGrid.Actions.ExpandCollapse;var l=t.TreeGrid.expandRowsonDemand(a,i,n);if(l){a._allParentItems.splice(a._allParentItems.indexOf(i),1),i.expanded=!1;continue}return}a._triggerExpandingCollapsingEvent(n)||t.TreeGrid.sendExpandCollapseRequest(a,n),i.parentItem&&a._expandParentLevelRecord(i.parentItem,n.expanded),i.hasChildRecords&&a._expandCollapseInnerLevelRecord(i,!1)}r.allowPaging&&!r.enableVirtualization&&(t.isNullOrUndefined(a.getPager())||a.gotoPage())}},collapseAtLevel:function(e){var i,s,a=this,r={},n=a.model;if(!a._isHierarchyFiltering)if(n.allowPaging&&n.pageSettings.pageSizeMode==t.TreeGrid.PageSizeMode.Root&&n.enableVirtualization)a._expandCollapseSettings.atLevel="collapseAtLevel",a._expandCollapseSettings.level=e,a._expandCollapsePages=[],a._isInExpandCollapseAll=!0,a._collapsePageLevelData(),r.requestType=t.TreeGrid.Actions.ExpandCollapse,n.flatRecords.length>0&&a._refreshTreeGridOnExpandCollapseAll(r),a._isInExpandCollapseAll=!1,a.updateHeight();else{s=a._getParentRecords(n.updatedRecords,a);for(var o=0;o<s.length;o++)if(i=s[o],i.level==e&&i.expanded){var l=a.getExpandStatus(i);l&&(r.data=i,r.expanded=!1,r.recordIndex=n.updatedRecords.indexOf(i),a._triggerExpandingCollapsingEvent(r)||t.TreeGrid.sendExpandCollapseRequest(a,r))}n.allowPaging&&!n.enableVirtualization&&(t.isNullOrUndefined(a.getPager())||a.gotoPage())}},_collapsePageLevelData:function(){var i,s,a=this,r={},n=a.model,o=a._expandCollapseSettings.level,l=a._getParentRecords(a._updatedPageData,a),d=l.length,h=a._currentPage();-1==e.inArray(h,a._expandCollapsePages)&&a._expandCollapsePages.push(h);for(var c=0;c<d;c++)s=l[c],i=a.getExpandStatus(s),s&&s.level==o&&(r.data=s,r.recordIndex=n.updatedRecords.indexOf(s),r.expanded=!1,a._triggerExpandingCollapsingEvent(r)||(t.TreeGrid.sendExpandCollapseRequest(a,r),i||a._expandParentLevelRecord(s.parentItem,!0)))},_expandPageLevelData:function(){var i,s=this,a={},r=s.model,n=s._expandCollapseSettings.level,o=s._getParentRecords(s._updatedPageData,s),l=o.length,d=s._currentPage();-1==e.inArray(d,s._expandCollapsePages)&&s._expandCollapsePages.push(d);for(var h=0;h<l;h++)i=o[h],i.level==n&&(a.data=i,a.expanded=!0,a.recordIndex=r.updatedRecords.indexOf(i),s._triggerExpandingCollapsingEvent(a)||(t.TreeGrid.sendExpandCollapseRequest(s,a),i.parentItem&&s._expandParentLevelRecord(i.parentItem,a.expanded),i.hasChildRecords&&s._expandCollapseInnerLevelRecord(i,!1)))},expandCollapseRow:function(e){var i,s,a=this,r={};e=parseInt(e),s=a.model.allowPaging?a.getUpdatedRecords():a.model.updatedRecords,s.length>e&&e>=0&&(i=s[e],i.hasChildRecords&&(r.data=i,i.expanded?r.expanded=!1:r.expanded=!0,t.TreeGrid.sendExpandCollapseRequest(a,r)))},expandAll:function(){var e=this,i=e.model,s={};if(!e.editFormValidate())return!0;e._expandCollapseSettings.state="expandAll",e._expandCollapseSettings.atLevel="",e._expandCollapseSettings.level=0,e._expandCollapsePages=[],e._isRowEdit?e.cancelRowEditCell():e.model.isEdit&&e.cancelEditCell(),s.requestType=t.TreeGrid.Actions.ExpandCollapse,e._isInExpandCollapseAll=!0,e._expandAllData(),i.flatRecords.length>0&&e._refreshTreeGridOnExpandCollapseAll(s),e._isInExpandCollapseAll=!1,e.updateHeight()},_expandAllData:function(){var e,i=this,s=i.model,a=0,r={};if(r.requestType=t.TreeGrid.Actions.ExpandCollapse,s.allowPaging&&s.pageSettings.pageSizeMode==t.TreeGrid.PageSizeMode.Root&&s.enableVirtualization){var n=s.pageSettings.pageSize,o=i._currentPage(),l=n*o,d=n*(o-1);for(i._expandCollapsePages.push(o),a=d;a<l;a++)if((e=i._isHierarchyFiltering?i._filterParentRecords[a]:i.model.parentRecords[a])&&(r.data=e,r.recordIndex=s.updatedRecords.indexOf(e),r.expanded=!0,e.hasChildRecords&&!i._triggerExpandingCollapsingEvent(r))){var h=i._expandCollapseInnerLevelRecord(e,r.expanded);if(h)return;e.expanded!=r.expanded&&t.TreeGrid.sendExpandCollapseRequest(i,r)}}else{var c=i._isHierarchyFiltering?i._filterParentRecords:i.model.parentRecords;for(a=0;a<c.length;a++)if(e=c[a],r.data=e,r.recordIndex=s.updatedRecords.indexOf(e),r.expanded=!0,e.hasChildRecords&&!i._triggerExpandingCollapsingEvent(r)){if(i._isLoadonDemand&&!e.isChildRetrieved){i._isInExpandCollapseAll=!0;var u=t.TreeGrid.expandRowsonDemand(i,e,r);if(u){i._allParentItems.splice(i._allParentItems.indexOf(e),1),e.expanded=!1;continue}return}var h=i._expandCollapseInnerLevelRecord(e,r.expanded);if(h)return;e.expanded!=r.expanded&&t.TreeGrid.sendExpandCollapseRequest(i,r)}}},_refreshToolBar:function(){e("#"+this._id+"_toolbarItems").find("li").removeClass("e-hover")},_renderToolbar:function(){var t=this,i=t.model,s=t.element;i.isFromGantt||(t.model.toolbarSettings.showToolbar&&s.append(t._renderToolbarTemplate()),t.model.isResponsive&&e("#"+t._id+"_toolbarItems").addClass("e-treegridadaptivetoolbar"))},_renderToolbarTemplate:function(){var i=this,s=i.model,a=t.buildTag("div.e-treegridtoolbar#"+i._id+"_toolbarItems","",{height:"36px",border:"1px solid"},{"data-unselectable":"on"});if(!t.isNullOrUndefined(s.toolbarSettings.toolbarItems)&&s.toolbarSettings.toolbarItems.length){var r=t.buildTag("ul","",{},{});i._renderLi(r),a.append(r)}if(!t.isNullOrUndefined(s.toolbarSettings.customToolbarItems)&&s.toolbarSettings.customToolbarItems.length){var n=t.buildTag("ul","",{},{});i._renderCustomLi(n),a.append(n)}var o={};return o.click=i._toolBarClick,o.cssClass=i.model.cssClass,o.rtl=!1,o.itemSeparator=!1,o.itemLeave=i._toolbarItemLeave,o.width=i._gridWidth,o.fields={id:"",tooltipText:"",imageUrl:"",text:"",imageAttributes:"",spriteCSS:"",htmlAttributes:""},a.ejToolbar(o),a.ejToolbar("disableItem",i._disabledToolItems),i._disabledToolItems=e(),a},_renderCustomLi:function(i){for(var s,a,r=this,n=r.model,o=n.toolbarSettings.customToolbarItems,l=0;l<o.length;l++)if(o[l].text||o[l].templateID){if(o[l].text){var d=o[l].tooltipText?o[l].tooltipText:o[l].text;s=t.buildTag("li","",{},{id:r._id+"_"+o[l].text,title:d}),a=t.buildTag("a.e-toolbaricons e-icon e-treegridcustomtoolbaritem","",{}).addClass(o[l].text),s.addClass("e-treegridtoolbaritem")}else{var d=o[l].tooltipText?o[l].tooltipText:o[l].templateID.replace("#","");s=t.buildTag("li","",{},{id:r._id+"_"+o[l].templateID.replace("#",""),title:d}),a=e(o[l].templateID).hide().html()}s.html(a),i.append(s)}},_renderLi:function(e){var i,s=this,a=s.model.toolbarSettings.toolbarItems,r=a.length,n=0;for(n;n<r;n++)i=t.buildTag("li.e-treegridtoolbaritem","",{},{id:s._id+"_"+a[n]}),s._renderLiContent(i,a[n]),e.append(i)},_renderLiContent:function(i,s){var a,r,n=this.model.selectionSettings.selectionMode,o=this.selectedRowIndex();this.model.editSettings;switch(s){case"add":a=t.buildTag("a.e-addnew e-toolbaricons e-icon e-treegrid-add","",{});var l=this._toolboxTooltipTexts.addTool;i.attr("title",l),this.model.editSettings.allowAdding||this._disabledToolItems.push(i.get(0));break;case"edit":a=t.buildTag("a.e-edit e-toolbaricons e-icon e-treegrid-edit","",{});var d=this._toolboxTooltipTexts.editTool;i.attr("title",d),this.model.editSettings.allowEditing&&-1!=o&&(-1==o||"cell"!=n)&&this.model.allowSelection&&"click"!=this.model.editSettings.beginEditAction||this._disabledToolItems.push(i.get(0));break;case"delete":var h=this._toolboxTooltipTexts.deleteTool;i.attr("title",h),a=t.buildTag("a.e-delete e-toolbaricons e-icon e-treegrid-delete","",{}),this.model.editSettings.allowDeleting&&-1!=o&&(-1==o||"cell"!=n)&&this.model.allowSelection||this._disabledToolItems.push(i.get(0));break;case"update":var c=this._toolboxTooltipTexts.updateTool;i.attr("title",c),a=t.buildTag("a.e-save e-toolbaricons e-icon e-treegrid-save e-disabletool","",{}),this._disabledToolItems.push(i.get(0));break;case"cancel":var u=this._toolboxTooltipTexts.cancelTool;i.attr("title",u),a=t.buildTag("a.e-cancel e-toolbaricons e-icon e-treegrid-cancel e-disabletool","",{}),
this._disabledToolItems.push(i.get(0));break;case"expandAll":var p=this._toolboxTooltipTexts.expandAllTool;i.attr("title",p),r=t.buildTag("a.e-expandall e-toolbaricons e-icon e-treegrid-expandall","",{},{}),i.append(r);break;case"collapseAll":var m=this._toolboxTooltipTexts.collapseAllTool;i.attr("title",m),r=t.buildTag("a.e-collapseall e-toolbaricons e-icon e-treegrid-collapseall","",{},{}),i.append(r);break;case"pdfExport":var g=this._toolboxTooltipTexts.pdfExportTool;i.attr("title",g),r=t.buildTag("a.e-pdfIcon e-toolbaricons e-icon","",{},{}),i.append(r);break;case"excelExport":var f=this._toolboxTooltipTexts.excelExportTool;i.attr("title",f),r=t.buildTag("a.e-excelIcon e-toolbaricons e-icon","",{},{}),i.append(r);break;case"print":var _=this._toolboxTooltipTexts.printTool;i.attr("title",_),r=t.buildTag("a.e-printIcon e-toolbaricons e-icon","",{},{}),i.append(r);break;case"search":var v=this._toolboxTooltipTexts.searchTool,b=this,x=b.model.searchSettings.key;a=t.buildTag("a.e-searchitem e-toolbaricons e-disabletool e-icon e-searchfind","",{position:"absolute",padding:"4px","padding-left":"7px"});var y=t.buildTag("div.e-filterdiv e-searchinputdiv","",{display:"inline-table",width:"83%"});r=t.buildTag("input.e-ejinputtext e-searchinput","",{width:"100%"},{type:"text",placeholder:v,value:x});var w=t.buildTag("span.e-searchcancel e-cancel e-icon e-hide e-spanstyle","",{right:"1%","padding-top":"0px",top:"0px"});i.attr("title",v),i.addClass("e-search"),y.append(r).append(w),i.append(y),i.css({width:"172px"}),this.model.allowSearching=!0,r.keydown(e.proxy(this._keyDown,this)).focus(function(){b.element.find("span.e-searchcancel").removeClass("e-hide")}),a.click(e.proxy(this._keyDown,this)),y.focusout(function(){""==b.element.find("input.e-searchinput").val()&&e("span.e-searchcancel").addClass("e-hide")}),w.click(function(){b.element.find("input.e-searchinput").val(""),e(this).addClass("e-hide"),b.search("")}).mouseover(function(){this.style.cursor="pointer"})}i.append(a)},_updateToolbarItems:function(){var t=this,i=t.model,s=(i.toolbarSettings.toolbarItems,i.editSettings),a=(e("#"+t._id+"_toolbarItems"),t.selectedRowIndex(),s.editMode);"cellediting"==a.toLowerCase()||"dialogediting"==a.toLowerCase()?t._isRowEdit?t.cancelRowEditCell():i.isEdit&&t.cancelEditCell():"rowediting"==a.toLowerCase()&&t.cancelRowEditCell(),t._cancelSaveTools()},_renderAfterColumnInitialize:function(){var e=this;e.element.append(e._renderGridHeader())},filterEditType:function(e,i,s){var a=this,r=(a.model,e.field.split(".").join(""));switch(t.isNullOrUndefined(e.filterEditType)&&(e.filterEditType=e.editType),e.filterEditType){case"stringedit":i.html(t.buildTag("input.e-ejinputtext e-filtertext e-field e-filterwidth","",{},{id:a._id+"_"+r+"_filterbarcell",name:e.field,value:s}));break;case"numericedit":var n=t.buildTag("input.e-numerictextbox e-field","",{width:e.width-15},{type:"text",id:a._id+"_"+r+"_filterbarcell",name:e.field,value:s});i.append(n);break;case"datepicker":case"datetimepicker":var o=t.buildTag("input.e-"+e.filterEditType+" e-field","",{},{type:"text",id:a._id+"_"+r+"_filterbarcell",name:e.field,value:s});i.append(o);break;case"booleanedit":case"dropdownedit":var l=t.buildTag("input.e-field e-dropdownlist e-field","",{},{type:"text",id:a._id+"_"+r+"_filterbarcell",name:e.field,value:s});i.append(l)}},_filteringElements:function(i){var s,a,r,n,o,l,d,h,c,u,p=this,m=p.model,g=!1,f={};m.selectedItem;"filtering"==i.requestType&&(a=document.getElementById(p._id+"_filterBar"+i.fieldname.split(".").join(""))),d=h=t.TreeGrid.getColumnByField(m.columns,i.fieldname),s=e(a).find("input,select"),r=s.length;for(var _=0;_<r;_++){n=s.eq(_),f={};var v=n.closest("div").width()-2;if(n.hasClass("e-numerictextbox")){o=v,l=n.val(),f.width=o,f.showSpinButton=!0,f.cssClass=m.cssClass,f.locale=m.locale,f.height=28,f.focusIn=e.proxy(p._cancelEditState,p,n);var b=n[0].id;b=b.replace(p._id,""),"immediate"==m.filterSettings.filterBarMode?f.change=e.proxy(p._filterBarHandler,p,n):f.change=null;var x=n.data("ejNumericTextbox");t.isNullOrUndefined(x)&&(l.length?f.value=parseFloat(l):f.value=null),h=t.TreeGrid.getColumnByField(p.model.columns,n.prop("name")),t.isNullOrUndefined(h)||t.isNullOrUndefined(h.editParams)||e.extend(f,h.editParams),n.ejNumericTextbox(f),n.prop("name",n.prop("name").replace(p._id,""))}else if(n.hasClass("e-datepicker")){o=v,f.width=o,f.cssClass=m.cssClass,f.dateFormat=m.dateFormat,f.locale=m.locale,f.height=28,f.focusIn=e.proxy(p._cancelEditState,p,n);var b=n[0].id;b=b.replace(p._id,""),"immediate"==m.filterSettings.filterBarMode?f.select=e.proxy(p._filterBarHandler,p,n):f.select=null,d=t.TreeGrid.getColumnByField(p.model.columns,n.prop("name")),void 0!==d.format&&d.format.length>0&&(c=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),u=c.exec(d.format),f.dateFormat=u[2]),t.isNullOrUndefined(d.editParams)||e.extend(f,d.editParams),-1!=m.dateFormat.toLowerCase().indexOf("hh")?n.ejDateTimePicker(f):n.ejDatePicker(f),p._preventDoubleClick(d)}else if(n.hasClass("e-datetimepicker"))o=v,f={width:o,rtl:m.rtl,locale:m.locale,cssClass:m.cssClass,showButton:!1,focusIn:e.proxy(p._cancelEditState,p,n)},f.height=28,"immediate"==m.filterSettings.filterBarMode?f.close=e.proxy(p._filterBarHandler,p,n):f.close=null,d=t.TreeGrid.getColumnByField(p.model.columns,n.prop("name")),void 0!==d.format&&d.format.length>0&&(c=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),u=c.exec(d.format),f.dateTimeFormat=u[2]),t.isNullOrUndefined(d.editParams)||e.extend(f,d.editParams),n.ejDateTimePicker(f),p._preventDoubleClick(d);else if(n.hasClass("e-dropdownlist")){d=t.TreeGrid.getColumnByField(m.columns,i.fieldname);var y,w,C,S,T,R=d.editParams&&d.editParams.fields&&d.editParams.fields.text?d.editParams.fields.text:"text",l=d.editParams&&d.editParams.fields&&d.editParams.fields.value?d.editParams.fields.value:"value",k=[];d.dropdownData&&d.dropdownData.length>0?k=e.extend(!0,[],d.dropdownData):"booleanedit"==d.editType?(k=[],S={},S[R]=p._trueText,S[l]="true",k.push(S),T={},T[R]=p._falseText,T[l]="false",k.push(T)):k=p._dropDownArrayCollection(d,i.fieldname),y={},y[R]=p._dropDownListClearText,y[l]=p._dropDownListClearText,k.splice(0,0,y),C=void 0==d.allowFilteringBlankContent||d.allowFilteringBlankContent,C&&(w={},w[R]=p._dropDownListBlanksText,w[l]=p._dropDownListBlanksText,k.push(w));var O,D={},I=n.val(),j=e("#"+n[0].id).data("ejDropDownList");j&&(O=e(j.popupList)),D.width=v,D.showCheckbox=!1,D.dataSource=k,D.height=28,D.popupShown=e.proxy(p._cancelEditState,p,n),D.fields={text:R,value:l},"immediate"==m.filterSettings.filterBarMode?D.popupHide=e.proxy(p._filterBarHandler,p,n):D.popupHide=null,n.ejDropDownList(D),O&&(O.find(".e-ul :first-child").find(".e-ddltxt").css("font-style","italic"),C&&O.find(".e-ul :last-child").find(".e-ddltxt").css("font-style","italic")),I==p._dropDownListClearText&&(I=""),n.ejDropDownList("selectItemByValue",I),p._preventDoubleClick(d)}else switch(n.prop("tagName")){case"INPUT":n.width(v-4),"stringedit"==d.filterEditType&&p._on(e("#"+p._id+"_"+d.field.split(".").join("")+"_filterbarcell"),"focus",p._cancelEditState);break;case"SELECT":n.width(v).height(15)}n.is(":disabled")||g||n.is(":hidden")&&"object"!=typeof n.data("ejDropDownList")||p._isEnterKeyPressed||(g=!0)}},_dropDownArrayCollection:function(i,s){var a=this,r=a.model,n=s,o=[],l=[],d=[],h=i.editType;return o=e.map(r.flatRecords,function(e){if(!t.isNullOrUndefined(e.item[n]))return e.item[n]}),e.each(o,function(t,i){i=e.trim(i),-1===e.inArray(i,l)&&l.push(i)}),"numericedit"!=h?l.sort(a.stringCompare):l=l.sort(function(e,t){return e-t}),e.each(l,function(e,t){d.push({text:t,value:t})}),d},stringCompare:function(e,t){var i=[],s=[];for(e.replace(/(\d+)|(\D+)/g,function(e,t,s){i.push([t||1/0,s||""])}),t.replace(/(\d+)|(\D+)/g,function(e,t,i){s.push([t||1/0,i||""])});i.length&&s.length;){var a=i.shift(),r=s.shift(),n=a[0]-r[0]||a[1].localeCompare(r[1]);if(n)return n}return i.length-s.length},_preventDoubleClick:function(i){var s=this,a=e("#"+s._id+"_"+i.field.split(".").join("")+"_filterbarcell_popup");0!=a.length&&e(a).on("click",function(e){t.isTouchDevice()?s._off(s.element,"doubletap ",".e-gridcontent",s._editdblClickHandler):s._off(s.element,"dblclick ",".e-gridcontent",s._editdblClickHandler),setTimeout(function(){t.isTouchDevice()?s._on(s.element,"doubletap ",".e-gridcontent",s._editdblClickHandler):s._on(s.element,"dblclick ",".e-gridcontent",s._editdblClickHandler)},300)})},_renderFiltering:function(i,s){var a=this,r=this.model,n=r.columns,o=r.filterSettings.filteredColumns,l=t.buildTag("tr.e-filterbar","",{},{});if(a.model.allowFiltering){e.each(n,function(e,i){t.isNullOrUndefined(i.allowFiltering)&&(i.allowFiltering=!0)});var d=!1;if(e.each(n,function(e,t){if(1==t.allowFiltering)return d=!0,!1}),d)for(var h=0;h<i.length;h++){var c=t.buildTag("th.e-filterbarcell .e-editValue","",{},{});!1===i[h].visible&&c.addClass("e-hide");var u=t.buildTag("div.e-filterdiv","",{},{id:a._id+"_filterBar"+i[h].field.split(".").join("")});if(l.append(c.append(u)),0!=i[h].allowFiltering){var p="";if(o.length>0)for(var m=0;m<o.length;m++)i[h].field==o[m].field&&(p=o[m].value);this.filterEditType(i[h],u,p);var g=t.buildTag("span.e-cancel e-icon e-hide e-spanstyle");u.append(g)}}}return r.showDetailsRow&&r.detailsTemplate&&r.showDetailsRowInfoColumn&&s&&l.append(t.buildTag("th.e-filterbarcell e-detailheadercell",'<div style="width:'+a._detailsColumnWidth+'px;"></div>')),l},_getIndentCol:function(){return t.buildTag("col","",{width:this._detailsColumnWidth+"px"})},_renderGridHeader:function(){var e,i,s=this,a=s.model,r=(document,t.buildTag("div.e-gridheadercontainer","",{overflow:"hidden"},{"data-unselectable":"on"})),n=a.isFromGantt?t.buildTag("div.e-gridheader#"+s._id+"e-gridheader","",{"border-left-style":"solid","border-left-width":"1px"},""):t.buildTag("div.e-gridheader#"+s._id+"e-gridheader","",{"border-top-style":"solid","border-left-style":"solid","border-right-style":"solid","border-top-width":"1px","border-left-width":"1px","border-right-width":"1px",width:s._gridWidth},"");return 1==a.allowFiltering&&a.filterSettings.filterType==t.TreeGrid.FilterType.FilterBar&&r.addClass("e-headercontent-material-filterbar"),r.addClass("e-headercontent"),s.setGridHeaderContent(n),s._$gridHeaderContainer=r,s._hiddenColumns=[],s._visibleColumns=[],s.columnsWidthCollection=[],s._removePrevHeaderTemplates(),this._frozenColumnsLength>0?(r.addClass("e-frozen-header-container"),e=t.buildTag("div.e-frozenheaderdiv#e-frozenheaderdiv"+s._id,this._renderGridHeaderInternalDesign(a.columns.slice(0,this._frozenColumnsLength),!1,!0)),1==a.allowFiltering&&a.filterSettings.filterType==t.TreeGrid.FilterType.FilterBar&&e.addClass("e-filterbar-header-material"),a.showStackedHeader&&a.stackedHeaderRows.length>0&&e.addClass("e-stacked-header-material"),i=t.buildTag("div.e-movableheader#e-movableheader"+s._id,t.buildTag("div.e-movableheaderdiv#e-movableheaderdiv"+s._id,this._renderGridHeaderInternalDesign(this.model.columns.slice(this._frozenColumnsLength),!0))),r.append(e).append(i)):(r.append(this._renderGridHeaderInternalDesign(this.model.columns,!0)),r.removeClass("e-frozen-header-container")),n.html(r),this.setGridHeaderTable(this.getHeaderContent().find(".e-table")),n},_removePrevHeaderTemplates:function(){e("[id^='"+this._id+"'][type='text/x-treegridheadertemplate']").remove(),this.headerAngularTemplate&&(this.headerAngularTemplate=null)},getPager:function(){return this._gridPager},setTreeGridPager:function(e){this._gridPager=e},_renderGridPager:function(){var i=this,s=e(document.createElement("div")),a={},r=i.model.pageSettings;if(s.attr({id:this._id+"Pager"}),r.change=e.proxy(i._pagerClickHandler,i),t.isNullOrUndefined(r.totalRecordsCount)&&(r.totalRecordsCount=i._isLoadonDemand?i._pageRecordCountOnDemand:r.totalRecordsCount),e.extend(a,r),a.locale=i.model.locale,delete a.template,i._currentPage()<0&&i._currentPage(1),a.currentPage=this._prevPageNo=i._currentPage(),a.masterObject=i,a.cssClass=i.model.cssClass,i.setTreeGridPager(s),s.ejPager(a),s.ejPager("refreshPager"),a=s.ejPager("model"),r.totalPages=a.totalPages,i._currentPage()!==a.currentPage&&i._currentPage(a.currentPage),!t.isNullOrUndefined(r.template)&&r.template.length>0){s.children().remove();var n=t.buildTag("div.e-pagercontainer"),o=this._createTemplateElement(r,!0);n.append(o.innerHTML),s.append(n)}return s},_addHeaderCheckboxTemplate:function(){var e=this.model,t=e.flatRecords.length,i=e.selectedItems.length;return t>0&&t==i?'<div><span class="e-chkbox-wrap e-widget" style="margin-left:5px;padding-right:10px;color:#c8c8c8;"><div class="e-chkbox-small"><span class="e-chk-act"><span class="e-checkbox e-checkmark e-chk-image e-icon e-headerCheckbox"id ='+this._id+"_headerCheckbox></span></span></div></span></div>":t>i&&i>0?'<div><span class="e-chkbox-wrap e-widget" style="margin-left:5px;padding-right:10px;color:#c8c8c8;"><div class="e-chkbox-small"><span class="e-chk-indeter"><span class="e-checkbox e-stop e-chk-image e-icon e-headerCheckbox"id ='+this._id+"_headerCheckbox></span></span></div></span></div>":'<div><span class="e-chkbox-wrap e-widget" style="margin-left:5px;padding-right:10px;color:#c8c8c8;"><div class="e-chkbox-small"><span class="e-chk-inact"><span class="e-checkbox e-chk-image e-icon e-headerCheckbox"id ='+this._id+"_headerCheckbox></span></span></div></span></div>"},_createStackedRow:function(i,s){for(var a,r,n,o,l,d,h,c,u,p=t.buildTag("tr.e-columnheader e-stackedHeaderRow"),m=[],g=[],f=[],_=[],v=this,b=v.model,x=b.columns.length,y=i.stackedHeaderColumns,w=[],C=b.scrollSettings.frozenColumns,S=[],T=0,R=0,k=0,h=0;h<x;h++)if(a=b.columns[h],0!=a.visible||a==b.columns[b.treeColumnIndex]&&0==a.visible){for(var O="",D="",I="",j="",L=0;L<y.length;L++)r=Array.isArray(y[L].column)?y[L].column:e.map(y[L].column.split(","),e.trim),n="e-row"+e.inArray(i,b.stackedHeaderRows)+"-column"+L,-1!=e.inArray(a.field,r)&&(O=y[L].headerText,D=y[L].cssClass,I=y[L].textAlign,j=y[L].tooltip?" e-stackedtooltip "+n:"");m.push(O),g.push(D),f.push(I),_.push(j)}for(var A=0;A<m.length;A++){for(l=1,d=A+1;d<m.length&&m[A]==m[d];d++)l++;w.push({spanCount:l,headerText:m[A],cssClass:g[A],txtAlign:f[A],tooltip:_[A]}),A+=l-1}if(C>0){for(var A=0;A<x;A++)L=b.columns[A],A<C&&0==L.visible&&k++;for(T=C-k;T>0;)o=w[R].spanCount,w[R].spanCount<T?(S.push(w[R]),s?R++:w.splice(R,1)):w[R].spanCount>T?(w[R].spanCount=w[R].spanCount-T,s&&S.push({spanCount:T,headerText:w[R].headerText})):(S.push(w[R]),s||w.splice(R,1)),T-=o;s&&(w=S)}for(var h=0;h<w.length;h++)c=t.buildTag("th.e-headercell e-stackedHeaderCell","",{},{colspan:w[h].spanCount}),u=t.buildTag("div.e-headercelldiv  e-default"+w[h].tooltip,w[h].headerText,{textAlign:w[h].txtAlign},{}),c.append(u),p.append(c),void 0!=w[h].cssClass&&c.addClass(w[h].cssClass),(b.allowColumnResize||b.allowColumnReordering)&&c.addClass("e-resizer");return b.detailsTemplate&&b.showDetailsRow&&b.showDetailsRowInfoColumn&&1!=s&&p.append(t.buildTag("th.e-headercell e-detailheadercell","<div></div>")),p},getHeaderCell:function(e){var i=this.model,s=i.columns.indexOf(this.getColumnByField(e)),a=null;return t.isNullOrUndefined(s)||-1==s||(a=this.getHeaderTable().find("thead tr:not('.e-stackedHeaderRow')").find(".e-headercell").not(".e-detailheadercell").eq(s)),a},_createHeaderTemplateElement:function(i){var s,a=(i.field?i.field:"")+e.inArray(i,this.model.columns)+"_HeaderTemplate",r=i.headerTemplateID,n=/^#([\w-]*)/,o=/^<script/i,l=n.exec(r),d={name:"SCRIPT",type:"text/x-treegridheadertemplate",text:r,id:(this._id+a).replace(/(\\|[^0-9A-z-_])/g,"")};return s=l&&l[1]?document.getElementById(l[1]):o.test(r)?e(r).get(0):t.buildTag(d.name,d.text).get(0),s.id=s.id||d.id,s.type=s.type||d.type,e("#"+s.id).remove(),e("body").append(s),s},_getColWidth:function(e,i){var s=this,a=s.model,r=a.columns;if("msie"==t.browserInfo().name&&a.isFromGantt&&!t.isNullOrUndefined(r[e].width)&&parseInt(r[e].width)<42){var n=35-(43-parseInt(r[e].width));i.hasClass("e-column-menu-padding")&&i.removeClass("e-column-menu-padding"),i.css("padding-right",n+"px")}},_renderGridHeaderInternalDesign:function(i,s,a){var r,n,o,l,d,h,c=this,u=c.model,p=document,m=t.buildTag("table.e-table e-zerospace"),g=t.buildTag("thead"),f=(t.buildTag("tbody.e-hide"),t.buildTag("tr.e-columnheader")),_=e(p.createElement("colgroup")),v=e(p.createElement("tr")),b=0,x=i.length,y=u.stackedHeaderRows.length;if((u.allowSorting||u.showColumnChooser||u.allowColumnReordering)&&f.css({cursor:"pointer"}),"wrap"===u.headerTextOverflow?c.element.addClass("e-wrap"):c.element.removeClass("e-wrap"),u.showStackedHeader)for(var w=0;w<y;w++){var C=c._createStackedRow(u.stackedHeaderRows[w],a);g.append(C)}for(b;b<x;b++)if(i[b]){var S=i[b].headerTextAlign?i[b].headerTextAlign:i[b].textAlign?i[b].textAlign:t.TextAlign.Left;!u.showColumnChooser&&(u.showColumnChooser||!u.allowFiltering||"menu"!=u.filterSettings.filterType&&"excel"!=u.filterSettings.filterType)||"checkboxState"==i[b].field?r=t.buildTag("th.e-headercell","",{},{}):t.isNullOrUndefined(i[b].allowFiltering)||i[b].allowFiltering||c.model.showColumnChooser?(r=t.buildTag("th.e-headercell","",{},{}),r.addClass("e-column-menu-padding"),this._getColWidth(b,r)):r=t.buildTag("th.e-headercell","",{},{}),u.allowFiltering&&u.filterSettings.filterType==t.TreeGrid.FilterType.FilterBar&&r.addClass("e-filterbar-material"),n=p.createElement("td"),o=t.buildTag("div.e-headercelldiv","",{"text-align":S},{"data-ej-mappingname":i[b].field,"data-unselectable":"on"}),i[b].clipMode&&i[b].clipMode==t.TreeGrid.ClipMode.Ellipsis&&o.addClass("e-treegridtrimcell"),c._checkboxSelection&&u.selectionSettings.enableSelectAll&&c._checkboxColumnName==i[b].field&&o.append(c._addHeaderCheckboxTemplate()),"checkboxState"==i[b].field&&r.css({cursor:"default"});var T=t.buildTag("span",void 0==i[b].headerText?i[b].headerText=i[b].field:i[b].headerText);if("wrap"==u.headerTextOverflow&&o.addClass("e-textwrapheaderdiv"),o.append(T),r.append(o),c.model.showColumnChooser&&!i[b].nonColumn){var R=t.buildTag("div.e-columnmenu-icon e-icon e-columnicon","",{cursor:"pointer"});"wrap"==u.headerTextOverflow&&R.addClass("e-textwrapcolumnicon"),R.data("isClicked",!1),r.append(R)}else if(!u.showColumnChooser&&u.allowFiltering&&("menu"==u.filterSettings.filterType||"excel"==u.filterSettings.filterType)&&(t.isNullOrUndefined(i[b].allowFiltering)||i[b].allowFiltering)&&"checkboxState"!=i[b].field){if(h=-1!=c._filteredColumnValueID.indexOf(i[b].field)?t.buildTag("div.e-column-filtered-icon e-icon e-filtericon","",{cursor:"pointer"}):t.buildTag("div.e-column-filter-icon e-icon e-filtericon","",{cursor:"pointer"}),c.model.filterSettings.filteredColumns)for(var k=0;k<c.model.filterSettings.filteredColumns.length;k++)c.model.filterSettings.filteredColumns[k].field==i[b].field&&""!=c.model.filterSettings.filteredColumns[k].value.toString()&&(h=t.buildTag("div.e-column-filtered-icon e-icon e-filtericon","",{cursor:"pointer"}));h.data("isClicked",!1),r.append(h)}l=p.createElement("col"),v.append(n),f.append(r),_.append(l),!1===i[b].visible&&i[b]!=u.columns[u.treeColumnIndex]?r.addClass("e-hide")&&e(l).css("display","none")&&c._hiddenColumns.push(i[b].headerText):(c._visibleColumns.push(i[b].headerText),i[b].visible=!0),!1===i[b].allowSorting&&r.css({cursor:"normal"}),t.isNullOrUndefined(i[b].headerTemplateID)||o.html(c._renderEjTemplate("#"+this._createHeaderTemplateElement(i[b]).id,i[b],0,i[b],"treegridheadertemplate")).parent().addClass("e-headertemplate"),void 0==i[b].allowCellSelection&&(i[b].allowCellSelection=!0),void 0==i[b].showInColumnChooser&&(i[b].showInColumnChooser=!0),void 0==i[b].width&&void 0!==u.commonWidth?(c.columnsWidthCollection.push(u.commonWidth),i[b].width=u.commonWidth):(c.columnsWidthCollection.push(parseFloat(i[b].width)),i[b].width=parseFloat(i[b].width)),c._fieldColumnNames[i[b].headerText]=i[b].field,c._headerColumnNames[i[b].field]=i[b].headerText}return u.isFromGantt&&c.updateToGanttColumns(),u.showDetailsRow&&u.detailsTemplate&&u.showDetailsRowInfoColumn&&s&&(f.append(t.buildTag("th.e-headercell e-detailheadercell",'<div style="width:'+c._detailsColumnWidth+'px;"></div>',{},{})),_.append(this._getIndentCol())),u.allowFiltering&&!u.isFromGantt&&"filterbar"==u.filterSettings.filterType&&(d=this._renderFiltering(i,s)),g.append(f),d&&g.append(d),m.append(_).append(g),m},_initGridRender:function(){var e=this;e._addInitTemplate(),e._renderGrid(),e.model.allowColumnResize&&(e._resizer=new t.gridFeatures.gridResize(e))},_summaryRow:function(){var i=this,s=i.model;if(s.showSummaryRow){i._createSummaryRow();var a={};a.requestType=t.TreeGrid.Actions.Refresh,i.sendDataRenderingRequest(a),i.updateCollapsedRecordCount(),i._updateWrapRowHeights("header"),i.updateHeight(),(s.allowTextWrap||"wrap"==s.headerTextOverflow)&&i._updateGridContentHeight()}if(s.showTotalSummary){var r=e("#"+i._id+"-footersummaryrow").length;i._createTotalSummaryRow(),0==r&&(i._viewPortHeight=i._viewPortHeight-i._$totalSummaryRowContainer.outerHeight()),s.columnResizeSettings.columnResizeMode!=t.TreeGrid.ColumnResizeMode.FixedColumns||s.isFromGantt||this._updateTableWidth(),this._updateHeaderScrollLeft()}},_renderGrid:function(){var e=this;e._renderGridContent().insertAfter(e.element.children(".e-gridheader"))},_renderFrozenSummary:function(){this._$footerContainer.find("#e-frozenfooterdiv"+this._id+" .e-table colgroup").replaceWith(this._getMetaColGroup()[0]),this._$footerContainer.find("#e-movablefooterdiv"+this._id+" .e-table colgroup").replaceWith(this._getMetaColGroup()[1]),this._$footerContainer.find("#e-frozenfooterdiv"+this._id+" .e-table tbody").html(e.render[this._id+"_JSONFrozenTemplate"](this._footerSummaryRecord)),this._$footerContainer.find("#e-movablefooterdiv"+this._id+" .e-table tbody").html(e.render[this._id+"_Template"](this._footerSummaryRecord))},_renderSummaryByFrozenDesign:function(){var i=e(document.createElement("div")),s=this._getMetaColGroup().find("col"),a={};return a.colgroup1=i.append(t.buildTag("colgroup").append(s.splice(0,this._frozenColumnsLength))).html(),a.colgroup2=i.html(t.buildTag("colgroup").append(s)).html(),e.templates[this._id+"_FrozenSummaryTemplate"]||this.addFrozenSummaryTemplate(),e.render[this._id+"_FrozenSummaryTemplate"](a)},_spliceSummaryRows:function(e){var t=this,i=(t.model,[]);e.filter(function(e){e.isSummaryRow||i.push(e)});return i},addFrozenSummaryTemplate:function(){var t="<div class='e-frozenfooterdiv' id='e-frozenfooterdiv"+this._id+"'><table class='e-table e-zerospace' style='width:100%' id='"+this._id+"frozensummarye-table'>{{:colgroup1}}<tbody></tbody></table></div><div class='e-movablefooter' id='e-movablefooter"+this._id+"'><div class='e-movablefooterdiv' id='e-movablefooterdiv"+this._id+"'><table class='e-table e-zerospace' id='"+this._id+"movablesummarye-table'>{{:colgroup2}}<tbody></tbody></table></div></div>",i={};i[this._id+"_FrozenSummaryTemplate"]=t,e.templates(i)},expandCollapseTotalSummary:function(i){var s=this,a=s.model;if(a.showTotalSummary&&a.collapsibleTotalSummary){if(s._footerSummaryRecord[0].summaryExpanded==i)return;var r={};r.expanded=i,r.requestType=i?"summaryExpanding":"summaryCollapsing",r.data=s._footerSummaryRecord[0],r.columnName=a.columns[this._summaryColumnIndex].headerText,r.cellValue=t.isNullOrUndefined(r.data)?"":r.data[a.columns[this._summaryColumnIndex].field],r.isFromUserAction=s._isInManualExpandCollapse;var n=e(s.element).find(".e-firstfootersummaryrow"),o=e(s.element).find(".e-footersummaryrow");if(i){if(s._trigger("expanding",r),r.cancel)return;o.css({display:"table-row"}),n.find(".e-summarytreegridcollapse").removeClass("e-summarytreegridcollapse").addClass("e-summarytreegridexpand"),s._footerSummaryRecord[0].summaryExpanded=!0;var l={};l.expanded=i,l.data=s._footerSummaryRecord[0],l.columnName=a.columns[this._summaryColumnIndex].headerText,l.cellValue=t.isNullOrUndefined(r.data)?"":r.data[a.columns[this._summaryColumnIndex].field],l.requestType="summaryExpanded",l.isFromUserAction=s._isInManualExpandCollapse,s._trigger("expanded",l)}else{if(s._trigger("collapsing",r),r.cancel)return;o.css({display:"none"}),n.css({display:"table-row"}),n.find(".e-summarytreegridexpand").removeClass("e-summarytreegridexpand").addClass("e-summarytreegridcollapse"),s._footerSummaryRecord[0].summaryExpanded=!1;var l={};l.expanded=i,l.data=s._footerSummaryRecord[0],l.columnName=a.columns[this._summaryColumnIndex].headerText,l.cellValue=t.isNullOrUndefined(r.data)?"":r.data[a.columns[this._summaryColumnIndex].field],l.requestType="summaryCollapsed",l.isFromUserAction=s._isInManualExpandCollapse,s._trigger("collapsed",l)}s._$totalSummaryRowContainer.ejScroller({height:i?a.rowHeight:a.totalSummaryHeight}),s._updateGridContentHeight(),s._updateSummaryHeight()}},_createTotalSummaryRow:function(){var i,s,a=this,r=a.model,n=(r.flatRecords,r.summaryRows),o=n.length,l=(r.updatedRecords,r.parentRecords,r.columns),d=t.buildTag("tbody");r.totalSummaryHeight=r.totalSummaryHeight<r.rowHeight?r.rowHeight:r.totalSummaryHeight,a._footerSummaryRecord=[],a._footerSummaryRows=[],r.collapsibleTotalSummary&&0!=e("#"+a._id+"-footersummaryrow").length&&0!=e("#"+a._id+"-footersummaryrow").find(".e-summarytreegridcollapse").length&&(a._persistCollapseState=!0),e("#"+a._id+"-footersummaryrow").remove(),i=t.buildTag("div.e-footersummaryrowdiv#"+a._id+"-footersummaryrow","",{overflow:"hidden",cursor:"default"});var h=t.buildTag("div.e-footercontainer#e-footercontainer"+a._id,"",{overflow:"hidden"});a._flatChildRecords=a._spliceSummaryRows(r.updatedRecords);for(var c=1;c<=o;c++){for(var u={},p=0;p<l.length;p++)u[l[p].field]="";u=a._createSummaryItem(u,n[c-1]);var m=a._createRecord(u,0);1==c&&(m.isFirstFooterSummary=!0,r.collapsibleTotalSummary&&(m.summaryExpanded=!0)),m.footerSummaryRowRecord=!0,m.index=c,a._footerSummaryRecord.push(m)}if(a._$footerContainer=h,this._frozenColumnsLength>0)h.html(this._renderSummaryByFrozenDesign()),this._renderFrozenSummary();else{var s=t.buildTag("table.e-table e-zerospace#"+a._id+"summarye-table","",{top:"0px"});s.append(a.getContentTable().find("colgroup").clone()).append(d),d.html(e.render[this._id+"_Template"](a._footerSummaryRecord)),h.append(s)}a._$totalSummaryRowContainer=i,a._$footertableContent=h.find(".e-table"),i.append(h),r.allowPaging?a.element.append(e("#"+this._id+"Pager").before(i)):a.element.append(i),a._flatChildRecords=[],this._setWidthToFooters(),this._$totalSummaryRowContainer.height()<=r.totalSummaryHeight?(a.isVScroll()&&a._$totalSummaryRowContainer.addClass("e-scrollcss"),r.totalSummaryHeight=this._$totalSummaryRowContainer.height()):a._$totalSummaryRowContainer.ejScroller({height:"auto"==r.sizeSettings.height?0:r.totalSummaryHeight}),"auto"==r.sizeSettings.height&&e("#"+a._id+"-footersummaryrow").width(a._gridWidth-2),a._updateSummaryTitleColumn(),1==a._persistCollapseState&&(a.expandCollapseTotalSummary(!1),a._persistCollapseState=!1),r.columnResizeSettings.columnResizeMode==t.TreeGrid.ColumnResizeMode.FixedColumns&&this._updateTableWidth()},_getFooterRows:function(){var t=e();return this.model.showTotalSummary&&this._$footertableContent&&(t=this._$footertableContent.get(0).rows,this._frozenColumnsLength>0&&(t=[t,this._$footertableContent.get(1).rows])),e(t)},_setWidthToFooters:function(){var e=this._gridWidth;if(this._frozenColumnsLength>0){var t=this._getFrozenColumnWidth();this._$totalSummaryRowContainer.find("#e-frozenfooterdiv"+this._id).width(e).next().css("margin-left",t+"px"),this._$totalSummaryRowContainer.find("#e-frozenfooterdiv"+this._id).outerWidth(t).end().find("#e-movablefooterdiv"+this._id).css("width","100%")}},_excludeSummaryRows:function(){var t=e();this.model;return this.getTreeGridRows()&&this.getTreeGridRows().length>0&&(t=this._frozenColumnsLength>0?[e(this.getTreeGridRows()[0]).not(".e-summaryrow"),e(this.getTreeGridRows()[1]).not(".e-summaryrow")]:e(this.getTreeGridRows()).not(".e-summaryrow")),t},_createSummaryRow:function(e){var i,s,a=this,r=a.model,n={},o=r.summaryRows,l=o.length,d=r.columns;if(!e||"dragAndDrop"!=e.requestType&&"addNewRow"!=e.requestType&&"sorting"!=e.requestType)i=a._isHierarchyFiltering?a._findFilteredParentRecords(a._flatFilteredRecords):a._parentRecords;else if(i=a._getParentRecords(r.updatedRecords,a),"dragAndDrop"==e.requestType)for(var h=0;h<i.length;h++){var c=[];c=i[h].childRecords.filter(function(e){if(!e.isSummaryRow)return!0}),i[h].childRecords=c.slice()}var u=i.length;e&&t.isNullOrUndefined(e.filterCollection)&&(e.filterCollection=[]),r.enableCollapseAll&&r.enableVirtualization&&!e&&(r.updatedRecords=r.flatRecords.slice()),r.updatedRecords=a._spliceSummaryRows(r.updatedRecords),r.flatRecords=a._spliceSummaryRows(r.flatRecords),r.summaryRowRecords=[],a._flatChildRecords=[];for(var p=0;p<u;p++){var m=i[p];if(0!=(s=a._getChildRecordsLength(m,r.updatedRecords))){for(var g=1;g<=l;g++){for(var f=0;f<d.length;f++)n[d[f].field]="";n=a._createSummaryItem(n,o[g-1],m);var _=r.updatedRecords.indexOf(m)+s+g,v=a._createRecord(n,_);a._isHierarchyFiltering&&r.enableVirtualization&&(v.isDisplay=!0),a._isSummaryRow=!0,v.level=m.level+1,v.parentItem=m,v.isSummaryRow=!0,v.index=r.flatRecords.length+1,r.enableVirtualization?(a._isHierarchyFiltering&&(r.updatedRecords=a._updateFilterParent),r.updatedRecords.splice(_,0,v),(!e||e&&e.filterCollection)&&r.summaryRowRecords.push(r.updatedRecords[_])):(r.updatedRecords.splice(_,0,v),r.summaryRowRecords.push(r.updatedRecords[_])),_=r.flatRecords.indexOf(m)+s+g,r.flatRecords.splice(_,0,v),m.childRecords.push(v),n={},g==l&&(v.isLastSummary=!0)}a._flatChildRecords=[]}}a._isSummaryRow=!1,a._summaryRowsCount=i.length,r.enableVirtualization&&(r.updatedRecords=a.getExpandedRecords(r.updatedRecords),r.enableAltRow&&a.updateAltRow()),this._updateCurrentViewData()},_getInnerParentRecords:function(e,t,i){for(var s=(e.childRecords.length,0);s<e.childRecords.length;s++)e.childRecords[s].hasChildRecords&&(-1==i.indexOf(e.childRecords[s])&&i.push(e.childRecords[s]),t._getInnerParentRecords(e.childRecords[s],t,i))},_getParentRecords:function(e,i,s){for(var a,r=e.length,n=[],o=0;o<r;o++)a=e[o],s?t.isNullOrUndefined(a.parentItem)&&n.push(a):a.childRecords&&a.childRecords.length>0?i.model.enableVirtualization||i.model.allowPaging&&i.model.showSummaryRow?(-1==n.indexOf(a)&&n.push(a),i._getInnerParentRecords(a,i,n)):n.push(a):i._isLoadonDemand&&a.hasChildRecords&&-1==n.indexOf(a)&&n.push(a);return n},_getChildRecordsLength:function(e,t){for(var i,s=this,a=t.length,r=0;r<a;r++)i=t[r],i.summaryRow||e==i.parentItem&&(s._flatChildRecords.push(i),i.hasChildRecords&&s._getChildRecordsLength(i,t));return s._flatChildRecords.length},_createSummaryItem:function(e,i,s){for(var a=this,r=i.summaryColumns,n=r.length,o=0;o<n;o++){var l=r[o],d=l.prefix,h=l.suffix,c=l.displayColumn;t.isNullOrUndefined(c)&&(c=l.dataMember),t.isNullOrUndefined(d)&&(d=""),t.isNullOrUndefined(h)&&(h=""),e.summaryColumn=l,e.summaryRow=i;for(var u in e)u==c&&(e[u]?e[u]=e[u]+" "+d+a._getSummaryValues(l,a._flatChildRecords)+h:e[u]=d+a._getSummaryValues(l,a._flatChildRecords)+h)}return e},_getSummaryValues:function(i,s){var a,r=i.dataMember,n=i.format,o=s,l="";switch(o instanceof t.DataManager?(a=o,o=o.dataSource.json):a=t.DataManager(o),i.summaryType){case t.TreeGrid.SummaryType.Sum:l=t.sum(o,r);break;case t.TreeGrid.SummaryType.Average:l=t.avg(o,r),l=isNaN(l)||t.isNullOrUndefined(l)?"":l;break;case t.TreeGrid.SummaryType.Maximum:var d=t.max(o,r);l=parseInt(this._getCustomCellValue(d,i.dataMember)),l=isNaN(l)||t.isNullOrUndefined(l)?"":l;break;case t.TreeGrid.SummaryType.Minimum:var h=o.filter(function(e){if(""!==e[r])return!0}),d=t.min(h,r);l=parseInt(this._getCustomCellValue(d,i.dataMember)),l=isNaN(l)||t.isNullOrUndefined(l)?"":l;break;case t.TreeGrid.SummaryType.MaximumDate:l=this._getMaxDate(o,r),l=t.isNullOrUndefined(l)?"":l;break;case t.TreeGrid.SummaryType.MinimumDate:l=this._getMinDate(o,r),l=t.isNullOrUndefined(l)?"":l;break;case t.TreeGrid.SummaryType.Count:l=o.length;break
;case t.TreeGrid.SummaryType.TrueCount:var c=t.Predicate(i.dataMember,"equal",!0);l=a.executeLocal(t.Query().where(c)).length;break;case t.TreeGrid.SummaryType.FalseCount:var c=t.Predicate(i.dataMember,"equal",!1);l=a.executeLocal(t.Query().where(c)).length;break;case t.TreeGrid.SummaryType.Custom:var u=i.customSummaryValue;u&&("string"==typeof u&&(u=t.util.getObject(u,window)),l=e.isFunction(u)?u.call(this,i,o):i.customSummaryValue)}return t.isNullOrUndefined(n)||(l=this.formatting(n,l,this.model.locale)),l},_getMaxDate:function(e,t){for(var i=0,s=null,a=0;a<e.length;a++){var r=e[a],n=new Date(r[t]),o=n.getTime();o>i&&(i=o,s=r[t])}return s},_getMinDate:function(e,t){if(0==e.length)return null;for(var i=new Date(e[0][t]),s=i.getTime(),a=e[0][t],r=0;r<e.length;r++){var n=e[r],o=new Date(n[t]),l=o.getTime();l<s&&(s=l,a=n[t])}return a},_createAndRenderSummaryRecords:function(e){var i=this;i._createSummaryRow(e);var s={};s.requestType=t.TreeGrid.Actions.Refresh,i.sendDataRenderingRequest(s),i.updateCollapsedRecordCount(),i.updateHeight()},_mergeRecords:function(){for(var e=this,t=e.batchChanges,i=t.changed,s=t.added,a=[],r=0;r<i.length;r++)a[i[r]]||a.push(i[r]);for(var r=0;r<s.length;r++)a[s[r]]||a.push(s[r]);return a},_updateSummaryRow:function(i){var s,a,r,n=this,o=n.model,l=[],d=[],h=n.getUpdatedRecords();if(!i||"dragAndDrop"!=i.requestType||(i.rowIndex=h.indexOf(n._droppedRecord),-1!=i.rowIndex)){if(i&&"delete"==i.requestType)return void n._updateAfterDeleteRecord(i);if(i&&"celledit"==i.editType){"numericedit"==i.columnObject.editType&&(r=parseInt(i.value),i.value=isNaN(r)?"":r,i.data[i.columnName]=i.value),i.currentValue=i.value;var c=n.getIndexByRow(i.rowElement),u=o.enableVirtualization?o.currentViewData[c]:h[c];i.rowIndex=h.indexOf(u)}if(i.currentValue!=i.previousValue||"dragAndDrop"==i.requestType||"addNewRow"==i.requestType||n._batchEditCancel){if(a="addNewRow"==i.requestType?o.updatedRecords[i.rowIndex]:h[i.rowIndex],n._batchEditCancel&&(a=i.record),a.parentItem&&(d=n._getpRecords(a,n)),t.isNullOrUndefined(d))return;for(var p=0;p<d.length;p++){var m,g,f,_=o.summaryRowRecords,v=[];n._getChildRecordsLength(d[p],h),e.each(_,function(r,h){if(s=h.summaryRow,h.parentItem===d[p]){v=[];for(var c=s.summaryColumns.length,u=0;u<c;u++){var _=s.summaryColumns[u],b=_.prefix,x=_.suffix;if(t.isNullOrUndefined(b)&&(b=""),t.isNullOrUndefined(x)&&(x=""),"rowedit"==i.editType){i.columnName=_.dataMember;var y=(o.columns,n.getColumnIndexByField(i.columnName));"numericedit"==o.columns[y].editType&&(a[i.columnName]=parseInt(a[i.columnName]))}var w=_.displayColumn;if(w||(w=_.dataMember),m=o.currentViewData.indexOf(h),g=n.getColumnIndexByField(w),i.data=h,-1!=g){n._frozenColumnsLength>0?n._frozenColumnsLength>g?i.rowElement=e(n.getRows()[0][m]):(i.rowElement=e(n.getRows()[1][m]),g-=n._frozenColumnsLength):i.rowElement=e(n.getRows()[m]),i.cellElement=i.rowElement.find(".e-rowcell").eq(g);var C=n._getSummaryValues(_,n._flatChildRecords),S=b+C+x;if(f=-1==v.indexOf(w)){if(0!=e(i.cellElement).find(".e-summarytitle").length){var T=e(i.cellElement).find(".e-summarytitle").clone();e(i.cellElement).empty().html(S).prepend(T)}else e(i.cellElement).empty().html(S);h[w]=S,v.push(w)}else e(i.cellElement).append(" "+S),h[w]=h[w]+" "+S;l.push(h),n._updateWrapRowHeights("total,header","virtualRefresh",m,"savecell")}}}}),n._flatChildRecords=[],n._summaryRowCount=d.length}}}},_updateTotalSummaryRow:function(i){if("dragAndDrop"!=i.requestType&&!i.isDragAndDropDelete){for(var s,a,r,n,o,l,d,h=this,c=h.model,u=c.summaryRows,p=u.length,m=0;m<p;m++){a=u[m],s=a.summaryColumns,r=s.length,n=h._footerSummaryRecord[m];for(var g=[],f=0;f<r;f++){var _=s[f],v=_.prefix,b=_.suffix;if(t.isNullOrUndefined(v)&&(v=""),t.isNullOrUndefined(b)&&(b=""),"rowedit"!=i.editType&&"celledit"!=i.editType||(i.columnName=_.dataMember),o||(o=_.dataMember),(_.dataMember==i.columnName||"delete"==i.requestType||"filtering"==i.requestType||"addNewRow"==i.requestType||"searching"==i.requestType)&&(o=_.displayColumn,l=h._footerSummaryRecord.indexOf(n),d=h.getColumnIndexByField(o),i.data=n,-1!=d)){this._frozenColumnsLength>0?this._frozenColumnsLength>d?i.rowElement=this._getFooterRows()[0][l]:(i.rowElement=this._getFooterRows()[1][l],d-=this._frozenColumnsLength):i.rowElement=this._getFooterRows()[l],i.cellElement=i.rowElement.childNodes[d];var x=h._spliceSummaryRows(c.updatedRecords),y=h._getSummaryValues(_,x),w=v+y+b;if(-1==g.indexOf(o)){if(0!=e(i.cellElement).find(".e-summarytitle").length||e(i.cellElement).find(".e-icon").length>0){var C=e(i.cellElement).find(".e-summarytitle, .e-icon").clone();e(i.cellElement).empty().html(w).prepend(C)}else e(i.cellElement).empty().html(w);g.push(o),n[o]=w}else e(i.cellElement).find(".e-summarytitle").length>0||e(i.cellElement).find(".e-icon").length>0?e(i.cellElement).find(".e-summarycell").append(" "+w):e(i.cellElement).append(" "+w),n[o]=n[o]+" "+w}}}c.allowTextWrap&&h._updateTotalSummaryHeight()}},_updateAfterDeleteRecord:function(i){var s,a,r,n,o=this,l=o.model,d=[],h=i.data;if(h.parentItem&&(a=o._getpRecords(h,o)),!t.isNullOrUndefined(a))for(var c=0;c<a.length;c++){var u=l.summaryRowRecords,p=a[c].childRecords;0!=p.length&&(o._getChildRecordsLength(a[c],l.updatedRecords),e.each(u,function(h,u){if(s=u.summaryRow,u.parentItem===a[c]){n=[];for(var p=s.summaryColumns.length,m=0;m<p;m++){var g=s.summaryColumns[m],f=g.displayColumn,_=l.currentViewData.indexOf(u),v=o.getColumnIndexByField(f),b=g.prefix,x=g.suffix;t.isNullOrUndefined(b)&&(b=""),t.isNullOrUndefined(x)&&(x=""),i.data=u,o._frozenColumnsLength>0?o._frozenColumnsLength>v?i.tr=e(o.getRows()[0][_]):(i.tr=e(o.getRows()[1][_]),v-=o._frozenColumnsLength):i.tr=e(o.getRows()[_]),i.tr=e(o.getRows()[_]),i.cellElement=i.tr.find(".e-rowcell").eq(v);var y=o._getSummaryValues(g,o._flatChildRecords),w=b+y+x;if(r=-1==n.indexOf(f)){if(0!=e(i.cellElement).find(".e-summarytitle").length){var C=e(i.cellElement).find(".e-summarytitle").clone();e(i.cellElement).empty().html(w).prepend(C)}else i.cellElement.empty().html(w);u[f]=w,n.push(f)}else e(i.cellElement).append(" "+w),u[f]=u[f]+" "+w}d.push(u)}}),o._flatChildRecords=[])}},_getpRecords:function(e,t){var i=[];do{e=e.parentItem,i.push(e)}while(e.parentItem);return i},_renderGridContent:function(){var i=this,s=document,a=i.model,r=e(s.createElement("tbody")),n=t.buildTag("div.e-gridcontent#"+i._id+"e-gridcontent","",{height:i._viewPortHeight}),o=t.buildTag("div.e-gridcontainer#"+i._id+"e-gridcontainer","",{},{}),l=t.buildTag("div",{},{width:"auto",height:"auto"});if(l.append(o),(a.enableVirtualization||a.allowPaging)&&o.css({height:i._totalHeight}),this._frozenColumnsLength>0)o.html(i._renderByFrozenDesign()),i.setGridContentTable(o.find(".e-table"));else{var d=t.buildTag("table.e-table e-zerospace#"+i._id+"e-table","",{top:"0px",position:"relative"});d.append(i.getHeaderTable().find("colgroup").clone()).append(r),o.html(d),i.setGridContentTable(d)}if(n.html(l),i._$gridContent=n,null===this.dataSource()||0==this.model.currentViewData.length)if(this._frozenColumnsLength>0){var h=i._getFrozenHiddenCol(),c=t.buildTag("td",a.emptyRecordText,{},{colSpan:this._frozenColumns.length-h.frozen});o.find("#e-frozencontentdiv"+i._id+" .e-table tbody").append(e(s.createElement("tr")).addClass("e-emptyText").height(30).append(c)),c=t.buildTag("td",a.emptyRecordText,{visibility:"hidden"},{colSpan:this._unFrozenColumns.length-h.moveable}),o.find("#e-movablecontentdiv"+i._id+" .e-table tbody").append(e(s.createElement("tr")).addClass("e-emptyText").height(30).append(c))}else{var c=t.buildTag("td",a.emptyRecordText,{},{colSpan:i.model.columns.length-i._hiddenColumns.length});r.append(e(s.createElement("tr")).addClass("e-emptyText").height(30).append(c)),o.css("height",a.rowHeight)}else i.renderRecords();return a.isFromGantt?n.css({"border-left-style":"solid","border-left-width":"1px"}):n.css({"border-bottom-style":"solid","border-bottom-width":"1px","border-left-style":"solid","border-left-width":"1px","border-right-style":"solid","border-right-width":"1px",width:"auto",height:"auto",cursor:"default"}),n},_getFrozenHiddenCol:function(){var e=this,t=e.model.columns,i={};if(i.frozen=0,i.moveable=0,e._hiddenColumns.length)for(var s=0;s<t.length;s++)!t[s].visible&&t[s].isFrozen?i.frozen=i.frozen+1:t[s].visible||t[s].isFrozen||(i.moveable=i.moveable+1);return i},_initialEndRendering:function(){var e=this,t=e.model,i=(e.getExpandedRecords(t.updatedRecords),e.selectedRowIndex()),s=e.selectedCellIndexes();if(t.allowSelection){if("row"==t.selectionSettings.selectionMode&&-1!=i&&!t.isFromGantt){if(t.showSummaryRow){var a=e._spliceSummaryRows(t.updatedRecords),r=a[i];i=t.updatedRecords.indexOf(r)}e._rowSelectingEventTrigger(this._previousIndex,i)||(e.selectRows(i),e._cancelSaveTools(),e._rowSelectedEventTrigger(i))}"cell"==t.selectionSettings.selectionMode&&s.length>0&&(e.selectedRowIndex(-1),e.selectCells(s),e._cancelSaveTools())}e._isRendered=!0,this._trigger("dataBound",{}),e._trigger("refresh"),e._eventBindings(),e._hideCollapsedDetailsRows(),e.getScrollElement().ejScroller("refresh"),e._updateScrollCss()},_addCellEditTemplate:function(){var i,s,a=this,r=a.model,n=r.columns,o=0,l=t.buildTag("div","",{display:"none"},{id:a._id+"_CellEditTemplate"});for(o=0;o<n.length;o++)if(n[o]){if(s=a._getFieldValue(n[o].field,o),a._isCommandColumn(n[o])){i=t.buildTag("td.e-rowcell e-unboundcell","",{},{id:s+"_CellEdit"});var d=n[o];e("#"+this._id+o+"_UnboundTemplate").remove();var h=this._createCommandElement(d,o);i.addClass("e-unboundcell").html("{{:~_"+this._id+"UnboundTemplate('"+h.id+"')}}")}else i=t.buildTag("div","",{},{id:s+"_CellEdit"}),t.TreeGrid._initCellEditType(a,i,a._id,o);l.append(i)}l.children().length&&(a._cellEditTemplate=l)},_getState:function(){return!this.data.parentItem},_getCellIndex:function(e,t){for(var i=[],s=0;s<e.length;s++)i[s]=e[s][t];return i},_getSelectedCellClass:function(e,i){var s=this,a=s.model,r=parseInt(i),n=s._selectedCellDetails;if("cell"==a.selectionSettings.selectionMode&&n.length>0&&(s._getSelectedCellsinARow(e.index,n),s._selectedCellsinARow.length>0)){if("msie"==t.browserInfo().name&&t.browserInfo().version<9)var o=s._getCellIndex(s._selectedCellsinARow,"cellIndex").indexOf(r);else var o=s._selectedCellsinARow.map(function(e){return e.cellIndex}).indexOf(r);if(-1!=o&&s._selectedCellsinARow[o].cellIndex==r)return"e-selectingcell"}return""},_getBatchEditState:function(e,t){var i=this;i.model;return(!i._checkboxSelection||"checkboxState"!=t)&&(!!(e.isBatchAdd||e.batchEditedFields&&null!=e.batchEditedFields[t])||void 0)},_getSelectedCellsinARow:function(e,t){var i=this;i._selectedCellsinARow=[],t.forEach(function(t){t.data.index==e&&i._selectedCellsinARow.push(t)}),i._currentRecordIndex=e},_getrowName:function(){var e="gridrowIndex",t=this;return e+=t.data.index.toString()+"level"+t.data.level.toString()},_getDetailsColSpan:function(e){var t=this.model,i=[];return this._frozenColumnsLength>0?e?(i=this._frozenColumns.filter(function(e){return!1!==e.visible}),i.length):(i=this._unFrozenColumns.filter(function(e){return!1!==e.visible}),i.length):t.showDetailsRowInfoColumn?this._visibleColumns.length+1:this._visibleColumns.length},_getDetailsExpandStatus:function(e){return!(!this.getExpandStatus(e)||!e.isDetailsExpanded)},_createDetailsRowTemplate:function(t){var i=this,s=this.model,a={};a["_"+i._id+"getDetailsColSpan"]=e.proxy(i._getDetailsColSpan,i),a["_"+i._id+"getDetailsExpandStatus"]=e.proxy(i._getDetailsExpandStatus,i),a["_"+i._id+"getExpandStatus"]=e.proxy(i.getExpandStatus,i),e.views.helpers(a);var r="{{if !isSummaryRow && !footerSummaryRowRecord}}<tr class='e-detailsrow e-treegridrows detailsrow{{:~_"+i._id+"rowClassName()}} {{if isDetailsExpanded}}e-detailsrowexpanded{{else}}e-detailsrowcollapsed{{/if}}{{if !~_"+i._id+"getExpandStatus(#data) && isDetailsExpanded}} e-collapsedrowexpandeddetailsrow{{/if}}' style='{{if ~_"+i._id+"getDetailsExpandStatus(#data)}}display:table-row;{{else}}visibility:none;{{/if}}height:"+s.detailsRowHeight+"px;'><td class='e-detailsrowcell' colspan='{{:~_"+i._id+"getDetailsColSpan("+t+")}}'><div class='e-detailscellwrapper' style='height:"+(s.detailsRowHeight-1)+"px;'>",n="";if(s.detailsTemplate&&s.detailsTemplate.length>0&&(n=document.getElementById(s.detailsTemplate)?"#"+s.detailsTemplate:s.detailsTemplate),!t){e("#treeGridDetailsRowTemplateElement"+i._id).remove();var o=this._createDetailRowTemplateElement(n);r+="{{:~_"+i._id+"treeGridTemplating('"+o.id+"')}}"}if(r+="</div></td></tr>",r+="{{/if}}",!t){var l={};l[i._id+"_detailRowTemplate"]=r,e.templates(l)}return r},_SelectState:function(e){return!!this.model.allowSelection},_unboundClickHandler:function(t){var i,s=this,a=this.model,r=e(t.target).closest("button");if((r.hasClass("e-deletebutton")||r.hasClass("e-editbutton")||r.hasClass("e-savebutton")||r.hasClass("e-cancelbutton"))&&!(r.hasClass("e-button")&&(r.hasClass("e-disable")||r.prop("disabled"))||e(t.target).hasClass("e-unboundcelldiv"))){i=e("dialogEditing"==s.model.editSettings.editMode?"#"+s._id+"EditFormDialog":"#"+s._id+"EditForm");var n=r.hasClass("e-savebutton")||r.hasClass("e-cancelbutton")?s.getIndexByRow(i.closest("tr")):s.getIndexByRow(r.closest("tr"));if(s.selectRows(s.getUpdatedRecords().indexOf(a.currentViewData[n])),r.hasClass("e-editbutton")&&a.editSettings.allowEditing)if(s._isRowEdit&&s.cancelEdit(),"dialogEditing"!=a.editSettings.editMode){var o=s.getCellIndex(t);s._editRow(s.getUpdatedRecords().indexOf(a.currentViewData[n]),null,o)}else s.showEditDialog(s.getUpdatedRecords().indexOf(a.currentViewData[n]));else r.hasClass("e-deletebutton")?s.deleteRow(null,!0):r.hasClass("e-savebutton")?s.saveRow():r.hasClass("e-cancelbutton")&&s.cancelEdit()}},_createCommandElement:function(i,s){var a=document.createElement("div");a.id=this._id+s+"_UnboundTemplate";for(var r=t.buildTag("div.e-unboundcelldiv"),n=i.commands,o=0;o<n.length;o++)if(!t.isNullOrUndefined(n[o].type)){var l=t.buildTag("button.e-"+n[o].type.replace(/\s+/g,"")+"button","",{},{type:"button"});l.val(n[o].type),r.append(l)}return e("body").append(e(a).html(r).hide()),a},_refreshUnboundTemplate:function(i){var s=this,a=s.model;if(s._commandColumnLength>0)for(var r=0;r<a.columns.length;r++)if(s._isCommandColumn(a.columns[r]))for(var n=i.find(".e-unboundcell").find(".e-unboundcelldiv"),o=e.extend(!0,[],a.columns[r].commands),l=0;l<o.length;l++)if(t.isNullOrUndefined(o[l].buttonOptions)&&(o[l].buttonOptions={}),o[l].buttonOptions.width=t.isNullOrUndefined(o[l].buttonOptions.width)?"52":o[l].buttonOptions.width,o[l].buttonOptions.height=t.isNullOrUndefined(o[l].buttonOptions.height)?"22":o[l].buttonOptions.height,o[l].buttonOptions.showRoundedCorner=!!t.isNullOrUndefined(o[l].buttonOptions.showRoundedCorner)||o[l].buttonOptions.showRoundedCorner,o[l].buttonOptions.size=t.isNullOrUndefined(o[l].buttonOptions.size)?"small":o[l].buttonOptions.size,!t.isNullOrUndefined(o[l].type)){var d=n.find(".e-"+o[l].type.replace(/\s+/g,"")+"button");i.find(".e-unboundeditedcell").length>0?"save"==o[l].type||"cancel"==o[l].type?d.show():(d.hasClass("e-deletebutton")&&d.hide(),d.hasClass("e-editbutton")&&d.hide()):"save"==o[l].type||"cancel"==o[l].type?d.hide():(d.hasClass("e-deletebutton")&&d.show(),d.hasClass("e-editbutton")&&d.show()),d.ejButton(o[l].buttonOptions)}},_unboundTemplateRendering:function(t){return e("#"+t).html()},_collapsibleSummary:function(e,t){var i=this,s=i.model;s.columns;if(s.showTotalSummary&&s.collapsibleTotalSummary&&i._summaryColumnIndex==parseInt(e)&&t.isFirstFooterSummary)return!0},_summaryIndendCell:function(e){var t=this,i=t.model;i.columns;if(i.showTotalSummary&&i.collapsibleTotalSummary&&t._summaryColumnIndex==parseInt(e)){if(0!=this._summaryColumnIndex)return!0;if(0==this._summaryColumnIndex)return!1}},_getsummaryExpandStatus:function(e){var i=this;return t.isNullOrUndefined(e.summaryExpanded)||e.summaryExpanded||(i._summaryExpanded=!1),this.model.collapsibleTotalSummary&&!i._summaryExpanded?e.isFirstFooterSummary?"table-row":"none":"table-row"},_addInitTemplate:function(){var i,s,a,r=this,n=r.model,o=n.columns,l=0,d=o.length,h=!1,c={};if(r._commandColumnLength=0,0===o.length)return!1;if(this._frozenColumnsLength>0&&(this.addFrozenTemplate(),n.showTotalSummary&&this.addFrozenSummaryTemplate()),c["_"+r._id+"rowClassName"]=t.TreeGrid._getrowClassName,c["_"+r._id+"SummaryRowtdClassName"]=t.TreeGrid._getSummaryRowtdClassName,c["_"+r._id+"summaryIndendCell"]=e.proxy(r._summaryIndendCell,r),c["_"+r._id+"collapsibleSummary"]=e.proxy(r._collapsibleSummary,r),c["_"+r._id+"isSelectedCell"]=e.proxy(r._getSelectedCellClass,r),c["_"+r._id+"batchEditState"]=e.proxy(r._getBatchEditState,r),c["_"+r._id+"summaryTitle"]=r._getSummaryTitle,c["_"+r._id+"rowName"]=r._getrowName,c["_"+r._id+"getState"]=r._getState,c["_"+r._id+"SelectState"]=e.proxy(r._SelectState,r),c["_"+r._id+"summaryExpandStatus"]=e.proxy(r._getsummaryExpandStatus,r),c["_"+r._id+"expandStatus"]=e.proxy(r._getExpandStatusRecord,r),c["_"+r._id+"cellValue"]=e.proxy(r._getCellValue,r),c["_"+r._id+"TemplateCellValue"]=e.proxy(r._getTemplateCellValue,r),c["_"+r._id+"isTreeColumnIndex"]=e.proxy(r._isTreeColumnIndex,r),c["_"+r._id+"getIndentWidth"]=e.proxy(r._getIndentWidth,r),c["_"+r._id+"checkColumn"]=e.proxy(r._getCellColumn,r),c["_"+r._id+"formatting"]=e.proxy(r.formatting,r),c["_"+r._id+"treeGridTemplating"]=t.proxy(r._gridTemplate,null,r),c["_"+r._id+"getCheckboxState"]=e.proxy(r._getCheckboxState,r),c["_"+r._id+"UnboundTemplate"]=e.proxy(r._unboundTemplateRendering,r),c["_"+r._id+"isTrimCell"]=e.proxy(r._checkIsTrimCell,r),c["_"+r._id+"getRowHeight"]=e.proxy(r._getTemplateRowHeight,r),e.views.helpers(c),n.allowTextWrap&&(h=r.model.allowTextWrap),n.parseRowTemplate&&(n.rowTemplateID.length>0||n.altRowTemplateID.length>0)){var u=t.buildTag("tbody","",{},{}),p=t.buildTag("tbody","",{},{}),m="",g="",f=e(n.altRowTemplateID.length>0?"#"+n.altRowTemplateID:"#"+n.rowTemplateID),_=e(n.rowTemplateID.length>0?"#"+n.rowTemplateID:"#"+n.altRowTemplateID),v=f[0].innerHTML,b=_[0].innerHTML;if(e(u[0]).html(v),e(p[0]).html(b),p[0].childNodes.length>0)for(var x=0;x<p[0].childNodes.length;x++)if("TR"==p[0].childNodes[x].nodeName&&(p[0].className=p[0].childNodes[x].className,p[0].style.cssText=p[0].childNodes[x].style.cssText,p[0].childNodes[x].childNodes.length>0))for(var y=0,w=0;w<p[0].childNodes[x].childNodes.length;w++){var C=p[0].childNodes[x].childNodes[w];if("TD"==C.nodeName){var S=C.innerHTML,T=r._id+"RowTemplateElement"+y;e("#"+T).remove();var R=this._createRowTemplateElement(S,T,_[0].type);if(C.innerHTML="{{:~_"+r._id+"treeGridTemplating('"+R.id+"')}}",C.className+=" e-rowcell e-templatecell",o[y]){s=o[y],i=s.field;var k=void 0==s.visible||s.visible,O="";if(s.headerText==r._visibleColumns[0]&&(O="{{if isSummaryRow || footerSummaryRowRecord}}<div class='e-summarytitle{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}} {{if "+h+"}} e-textwrapcell{{/if}}'style='float:left;display:block;'>{{:~_"+r._id+"summaryTitle()}}</div>{{/if}}"),y==n.treeColumnIndex){var D="<div class='e-inner-treecolumn-container' style='min-height:20px;' data-unselectable='on'>{{if hasChildRecords && hasFilteredChildRecords}}<div class='e-dragintend'{{if filterLevel > -1}}style='height:1px; float:left; width:{{:((filterLevel)*"+r.treeIndentLevelWidth+")}}px; display:inline-block;'>{{else}}style='height:1px; float:left; width:{{:((level)*"+r.treeIndentLevelWidth+")}}px; display:inline-block;'>{{/if}}{{if !~_"+r._id+"getState() || !hasChildRecords }}<div class={{:~_"+r._id+"rowName()}} ><span class='e-aboveIcon e-icon'  style='position:relative;float:right;display:none;'></span><span class='e-belowIcon e-icon' style='position:relative;float:right;display:none;'></span><span class='e-childIcon e-icon' style='position:relative;float:right;display:none;'></span><span class='e-cancelIcon e-icon' style='position:relative;float:right;display:none;'></span></div>{{/if}}</div>{{else !hasChildRecords || (!hasFilteredChildRecords && hasChildRecords)}}<div class='e-dragintend'{{if filterLevel > -1}}style='height:1px; float:left; width:{{:(filterLevel*"+r.treeIndentLevelWidth+")+24}}px; display:inline-block;'>{{else}}style='height:1px; float:left; width:{{:(level*"+r.treeIndentLevelWidth+")+24}}px; display:inline-block;'>{{/if}}{{if !~_"+r._id+"getState() || !hasChildRecords || !hasFilteredChildRecords }}<div class={{:~_"+r._id+"rowName()}} ><span class='e-aboveIcon iconMargin e-icon'  style='position:relative;float:right;display:none;'></span><span class='e-belowIcon iconMargin e-icon' style='float:right;display:none;'></span><span class='e-childIcon iconMargin e-icon' style='float:right;display:none;'></span><span class='e-cancelIcon iconMargin e-icon' style='float:right;display:none;'></span></div>{{/if}}</div>{{/if}}{{if ~_"+r._id+"getState() && hasChildRecords && hasFilteredChildRecords}}<div class='e-intendparent'><div class={{:~_"+r._id+"rowName()}} ><span class='e-aboveIcon e-icon'  style='position:relative;float:left;display:none;'></span><span class='e-belowIcon e-icon' style='float:left;display:none;'></span><span class='e-childIcon e-icon' style='float:left;display:none;'></span><span class='e-cancelIcon e-icon' style='float:left;display:none;'></span></div></div>{{/if}}<div class='{{if expanded && hasFilteredChildRecords}}e-treegridexpand e-icon{{else hasChildRecords && hasFilteredChildRecords}}e-treegridcollapse e-icon{{/if}}' style='float:left;display:inline-block;font-size:10px;'></div><div class='e-cell{{if "+(s.showCheckbox&&this.model.selectionSettings.selectionType==t.TreeGrid.SelectionType.Checkbox)+"}} e-treecheckboxcolumn{{/if}}{{if ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+h+"}} e-textwrapcell{{/if}}' style='overflow: hidden;'>";C.style.cssText="padding-left:0px;",m+="<td class='"+C.className+"{{if isSummaryRow || footerSummaryRowRecord}} e-summaryrowcell{{/if}}{{if isSelected && ~_"+r._id+"SelectState()}} e-selectionbackground{{/if}} {{:~_"+r._id+"isSelectedCell(#data,'"+l+"')}} {{if "+!k+"}} e-hide{{/if}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+h+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+y+")}} e-summaryintend{{/if}}' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+C.style.cssText+"'>"+D+"{{else}}'>{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"collapsibleSummary('"+y+"',#data)}}<div class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}"+C.innerHTML+"{{else}}"+O+"{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+y+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}",m+="{{if isSummaryRow || footerSummaryRowRecord}}{{:~_"+r._id+"TemplateCellValue(#data,'"+i+"')}}{{/if}}",m+="{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+y+")}}</div>{{/if}}</div></div></td>"}else m+="<td class='"+C.className+"{{if isSummaryRow || footerSummaryRowRecord}} e-summaryrowcell{{/if}}{{if isSelected && ~_"+r._id+"SelectState()}} e-selectionbackground{{/if}} {{:~_"+r._id+"isSelectedCell(#data,'"+l+"')}} {{if "+!k+"}} e-hide{{/if}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+h+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+y+")}} e-summaryintend{{/if}}' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+C.style.cssText+"{{/if}}'>{{if footerSummaryRowRecord && ~_"+r._id+"collapsibleSummary('"+y+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}"+C.innerHTML+"{{else}}"+O+"{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+y+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}",m+="{{if isSummaryRow || footerSummaryRowRecord}}{{:~_"+r._id+"TemplateCellValue(#data,'"+i+"')}}{{/if}}",m+="{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+y+")}}</div>{{/if}}</td>";if(this._frozenColumnsLength>0&&this._frozenColumnsLength==y+1){var I="";I+=m,I+="</tr>",m=""}y++}}}if(u[0].childNodes.length>0)for(var x=0;x<u[0].childNodes.length;x++)if("TR"==u[0].childNodes[x].nodeName){u[0].className=u[0].childNodes[x].className,u[0].style.cssText=u[0].childNodes[x].style.cssText;for(var y=0,w=0;w<u[0].childNodes[x].childNodes.length;w++){var C=u[0].childNodes[x].childNodes[w];if("TD"==C.nodeName){var S=C.innerHTML,T=r._id+"AltRowTemplateElement"+y;e("#"+T).remove();var R=this._createRowTemplateElement(S,T,f[0].type);if(C.innerHTML="{{:~_"+r._id+"treeGridTemplating('"+R.id+"')}}",C.className+=" e-rowcell e-templatecell",o[y]){s=o[y],i=s.field;var k=void 0==s.visible||s.visible,O="";if(s.headerText==r._visibleColumns[0]&&(O="{{if isSummaryRow || footerSummaryRowRecord}}<div class='e-summarytitle{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}} {{if "+h+"}} e-textwrapcell{{/if}}'style='float:left;display:block;'>{{:~_"+r._id+"summaryTitle()}}</div>{{/if}}"),y==n.treeColumnIndex){var D="<div class='e-inner-treecolumn-container' style='min-height:20px;'>{{if hasChildRecords && hasFilteredChildRecords}}{{if filterLevel > -1}}<div class='e-dragintend' style='height:1px; float:left;width:{{:((filterLevel)*"+r.treeIndentLevelWidth+")}}px; display:inline-block;'>{{else}}<div class='e-dragintend' style='height:1px; float:left;width:{{:((level)*"+r.treeIndentLevelWidth+")}}px; display:inline-block;'>{{/if}}{{if !~_"+r._id+"getState() || !hasChildRecords }}<div class={{:~_"+r._id+"rowName()}} ><span class='e-aboveIcon e-icon'  style='position:relative;float:right;display:none;'></span><span class='e-belowIcon e-icon' style='position:relative;float:right;display:none;'></span><span class='e-childIcon e-icon' style='position:relative;float:right;display:none;'></span><span class='e-cancelIcon e-icon' style='position:relative;float:right;display:none;'></span></div>{{/if}}</div>{{else !hasChildRecords || (!hasFilteredChildRecords && hasChildRecords)}}<div class='e-dragintend'{{if filterLevel > -1}}style='height:1px; float:left; width:{{:(filterLevel*"+r.treeIndentLevelWidth+")+24}}px; display:inline-block;'>{{else}}style='height:1px; float:left; width:{{:(level*"+r.treeIndentLevelWidth+")+24}}px; display:inline-block;'>{{/if}}{{if !~_"+r._id+"getState() || !hasChildRecords || !hasFilteredChildRecords}}<div class={{:~_"+r._id+"rowName()}} ><span class='e-aboveIcon iconMargin e-icon'  style='position:relative;float:right;display:none;'></span><span class='e-belowIcon iconMargin e-icon' style='float:right;display:none;'></span><span class='e-childIcon iconMargin e-icon' style='float:right;display:none;'></span><span class='e-cancelIcon iconMargin e-icon' style='float:right;display:none;'></span></div>{{/if}}</div>{{/if}}{{if ~_"+r._id+"getState() && hasChildRecords && hasFilteredChildRecords}}<div class='e-intendparent'><div class={{:~_"+r._id+"rowName()}} ><span class='e-aboveIcon e-icon'  style='position:relative;float:left;display:none;'></span><span class='e-belowIcon e-icon' style='float:left;display:none;'></span><span class='e-childIcon e-icon' style='float:left;display:none;'></span><span class='e-cancelIcon e-icon' style='float:left;display:none;'></span></div></div>{{/if}}<div class='{{if expanded&& hasFilteredChildRecords}}e-treegridexpand e-icon{{else hasChildRecords && hasFilteredChildRecords}}e-treegridcollapse e-icon{{/if}}' style='float:left;display:inline-block;font-size:10px;'></div><div class='e-cell{{if "+s.showCheckbox+"}} e-treecheckboxcolumn{{/if}}{{if  ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}} {{if "+h+"}} e-textwrapcell{{/if}}' style='overflow:hidden'>";C.style.cssText="padding-left:0px;",g+="<td class='"+C.className+"{{if isSummaryRow || footerSummaryRowRecord}} e-summaryrowcell{{/if}}{{if isSelected && ~_"+r._id+"SelectState()}} e-selectionbackground{{/if}} {{:~_"+r._id+"isSelectedCell(#data,'"+l+"')}} {{if "+!k+"}} e-hide{{/if}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+h+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+y+")}} e-summaryintend{{/if}}' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+C.style.cssText+"'>"+D+"{{else}}'>{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"collapsibleSummary('"+y+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}"+C.innerHTML+"{{else}}"+O+"{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+y+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}",g+="{{if isSummaryRow || footerSummaryRowRecord}}{{:~_"+r._id+"TemplateCellValue(#data,'"+i+"')}}{{/if}}",g+="{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+y+")}}</div>{{/if}}</div></div></td>"}else g+="<td class='"+C.className+"{{if isSummaryRow || footerSummaryRowRecord}} e-summaryrowcell{{/if}}{{if isSelected && ~_"+r._id+"SelectState()}} e-selectionbackground{{/if}} {{:~_"+r._id+"isSelectedCell(#data,'"+l+"')}} {{if "+!k+"}} e-hide{{/if}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+h+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}} e-summaryintend{{/if}}' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+C.style.cssText+"{{/if}}'>{{if footerSummaryRowRecord && ~_"+r._id+"collapsibleSummary('"+y+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}"+C.innerHTML+"{{else}}"+O+"{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+y+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}",g+="{{if isSummaryRow || footerSummaryRowRecord}}{{:~_"+r._id+"TemplateCellValue(#data,'"+i+"')}}{{/if}}",g+="{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+y+")}}</div>{{/if}}</td>";if(this._frozenColumnsLength>0&&this._frozenColumnsLength==y+1){var j="";j+=g,j+="</tr>",g=""}y++}}}}n.showDetailsRow&&n.detailsTemplate&&n.showDetailsRowInfoColumn&&(g+="<td class='{{if isSelected && ~_"+r._id+"SelectState()}}e-selectionbackground{{/if}} {{if isDetailsExpanded}}e-detailsrowexpand{{else}}e-detailsrowcollapse{{/if}}  e-detailsrowcell{{if isLastSummary}} e-lastsummaryrow{{/if}}'>{{if !isSummaryRow && !footerSummaryRowRecord}}<div class='e-detailsiconcell e-icon {{if isDetailsExpanded}}e-detailsinfoiconhide{{else}}e-detailsinfoiconshow{{/if}}'></div>{{/if}}",m+="<td class='{{if isSelected && ~_"+r._id+"SelectState()}}e-selectionbackground{{/if}} {{if isDetailsExpanded}}e-detailsrowexpand{{else}}e-detailsrowcollapse{{/if}}  e-detailsrowcell{{if isLastSummary}} e-lastsummaryrow{{/if}}'>{{if !isSummaryRow && !footerSummaryRowRecord}}<div class='e-detailsiconcell e-icon {{if isDetailsExpanded}}e-detailsinfoiconhide{{else}}e-detailsinfoiconshow{{/if}}'></div>{{/if}}")
;var L="{{if isAltRow}}<tr class='{{:~_"+r._id+"rowClassName()}} {{if expanded && hasFilteredChildRecords}}e-treegridrowexpand {{else hasChildRecords && hasFilteredChildRecords}} e-treegridrowcollapse {{/if}} e-templaterow "+u[0].className+"' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+u[0].style.cssText+"{{else}}height:"+n.rowHeight+"px;{{/if}}display:{{if footerSummaryRowRecord}}{{:~_"+r._id+"summaryExpandStatus(#data)}}{{else}}{{:~_"+r._id+"expandStatus(#data)}}{{/if}}''>"+g+"</tr>{{else}}<tr class='{{:~_"+r._id+"rowClassName()}} {{if expanded && hasFilteredChildRecords}}e-treegridrowexpand {{else hasChildRecords && hasFilteredChildRecords}} e-treegridrowcollapse {{/if}} e-templaterow "+p[0].className+"' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+p[0].style.cssText+"{{else}}height:"+n.rowHeight+"px;{{/if}}display:{{if footerSummaryRowRecord}}{{:~_"+r._id+"summaryExpandStatus(#data)}}{{else}}{{:~_"+r._id+"expandStatus(#data)}}{{/if}}''>"+m+"</tr>{{/if}}",A="{{if isAltRow}}<tr class='{{:~_"+r._id+"rowClassName()}} {{if expanded && hasFilteredChildRecords}}e-treegridrowexpand {{else hasChildRecords && hasFilteredChildRecords}} e-treegridrowcollapse {{/if}} e-templaterow "+u[0].className+"' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+u[0].style.cssText+"{{else}}height:"+n.rowHeight+"px;{{/if}} display:{{if footerSummaryRowRecord}}{{:~_"+r._id+"summaryExpandStatus(#data)}}{{else}}{{:~_"+r._id+"expandStatus(#data)}}{{/if}}''>"+I+"</tr>{{else}}<tr class='{{:~_"+r._id+"rowClassName()}} {{if expanded && hasFilteredChildRecords}}e-treegridrowexpand {{else hasChildRecords && hasFilteredChildRecords}} e-treegridrowcollapse {{/if}} e-templaterow "+p[0].className+"' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+p[0].style.cssText+"{{else}}height:"+n.rowHeight+"px;{{/if}} display:{{if footerSummaryRowRecord}}{{:~_"+r._id+"summaryExpandStatus(#data)}}{{else}}{{:~_"+r._id+"expandStatus(#data)}}{{/if}}''>"+j+"</tr>{{/if}}"}else if(!n.parseRowTemplate&&(n.rowTemplateID.length>0||n.altRowTemplateID.length>0))n.rowTemplateID&&n.altRowTemplateID?L="{{if isAltRow}}"+e.trim(e("#"+n.rowTemplateID).html())+"{{else}}"+e.trim(e("#"+n.altRowTemplateID).html())+"{{/if}}":n.rowTemplateID.length>0?L=e.trim(e("#"+n.rowTemplateID).html()):n.altRowTemplateID.length>0&&(L=e.trim(e("#"+n.altRowTemplateID).html()));else{var L="<tr class='e-treegridrows {{:~_"+r._id+"rowClassName()}} ";n.enableAltRow&&(L+="{{if isAltRow}}e-alt-row{{/if}} ");var E="";for(l=0;l<d;l++){if(o[l]){i=o[l].field,s=o[l];var k=void 0==o[l].visible||o[l].visible,P=o[l].textAlign;if(O="",s.headerText==r._visibleColumns[0]&&(O="{{if isSummaryRow || footerSummaryRowRecord}}<div class='e-summarytitle{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}} {{if "+h+"}} e-textwrapcell{{/if}}'style='float:left;display:block;'>{{:~_"+r._id+"summaryTitle()}}</div>{{/if}}"),s.isTemplateColumn&&(s.angularTemplate||s.templateID||s.template)){L+="e-templaterow ";var M=s.headerText;t.isNullOrUndefined(M)||t.isNullOrUndefined(M.match(/(\\|[^0-9A-z-_])/g))||(M=M.replace(/(\\|[^0-9A-z-_])/g,"")),e("#"+r._id+M+e.inArray(s,this.model.columns)+"_Template").remove();var R=this._createTemplateElement(s);a="<td class='{{if !isSummaryRow && !footerSummaryRowRecord}} e-intend{{/if}} e-rowcell e-templatecell{{if isSelected && ~_"+r._id+"SelectState()}} e-selectionbackground{{/if}} {{:~_"+r._id+"isSelectedCell(#data,'"+l+"')}} {{if "+!k+"}} e-hide{{/if}}{{:~_"+r._id+"SummaryRowtdClassName()}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+h+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}} e-summaryintend{{/if}}{{if ~_"+r._id+"batchEditState(#data,'"+i+"')}}e-updatedtd e-tgupdatenotify{{/if}}'style='text-Align:"+P+";'role='row'>{{if footerSummaryRowRecord && ~_"+r._id+"collapsibleSummary('"+l+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}{{:~_"+r._id+"treeGridTemplating('"+R.id+"','"+l+"')}}{{else}}"+O+"{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}",a+="{{if isSummaryRow || footerSummaryRowRecord}}{{:~_"+r._id+"TemplateCellValue(#data,'"+i+"')}}{{/if}}",a+="{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}}</div>{{/if}}</td>"}else if(l===n.treeColumnIndex)a="<td class='{{if isSelected && ~_"+r._id+"SelectState()}}e-rowcell e-selectionbackground e-intend {{else}}e-rowcell {{:~_"+r._id+"isSelectedCell(#data,'"+l+"')}} {{if !isSummaryRow && !footerSummaryRowRecord}} e-intend{{/if}} {{/if}} {{:~_"+r._id+"SummaryRowtdClassName()}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+h+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}} e-summaryintend{{/if}}{{if ~_"+r._id+"batchEditState(#data,'"+i+"')}}e-updatedtd e-tgupdatenotify{{/if}} {{if hasChildRecords && hasFilteredChildRecords}} e-parentcell{{/if}}'style='padding-left:{{if ~_"+r._id+"isTreeColumnIndex('"+i+"') && isSummaryRow }}{{:((level)*"+r.treeIndentLevelWidth+")}}px{{/if}};background-color:{{if cellBackgroundColor && ~_"+r._id+"checkColumn('"+i+"',#data)=='"+i+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};'role='row'>{{if footerSummaryRowRecord && ~_"+r._id+"collapsibleSummary('"+l+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}<div class='e-inner-treecolumn-container' style='min-height:20px;'>{{if hasChildRecords && hasFilteredChildRecords}}<div class='e-dragintend'{{if filterLevel > -1}}style='height:1px; float:left; width:{{:((filterLevel)*"+r.treeIndentLevelWidth+")}}px; display:inline-block;'>{{else}}style='height:1px; float:left; width:{{:((level)*"+r.treeIndentLevelWidth+")}}px; display:inline-block;'>{{/if}}{{if !~_"+r._id+"getState() || !hasChildRecords}}<div class={{:~_"+r._id+"rowName()}} ><span class='e-aboveIcon {{if level == 1 && hasChildRecords}} e-firstLevIconMargin {{/if}}  e-icon'  style='position:relative;float:right;display:none;'></span><span class='e-belowIcon {{if level == 1 && hasChildRecords}} e-firstLevIconMargin {{/if}}  e-icon' style='position:relative;float:right;display:none;'></span><span class='e-childIcon {{if level == 1 && hasChildRecords}} e-firstLevIconMargin {{/if}}  e-icon' style='position:relative;float:right;display:none;'></span><span class='e-cancelIcon {{if level == 1 && hasChildRecords}} e-firstLevIconMargin {{/if}} e-icon' style='position:relative;float:right;display:none;'></span></div>{{/if}}</div>{{else !hasChildRecords || (!hasFilteredChildRecords && hasChildRecords)}}<div class='e-dragintend'{{if filterLevel > -1}}style='height:1px; float:left; width:{{:(filterLevel*"+r.treeIndentLevelWidth+")+24}}px; display:inline-block;'>{{else}}style='height:1px; float:left; width:{{:(level*"+r.treeIndentLevelWidth+")+24}}px; display:inline-block;'>{{/if}}{{if !~_"+r._id+"getState() || !hasChildRecords || !hasFilteredChildRecords}}<div class={{:~_"+r._id+"rowName()}} ><span class='e-aboveIcon e-iconMargin e-icon'  style='position:relative;float:right;display:none;'></span><span class='e-belowIcon e-iconMargin e-icon' style='float:right;display:none;'></span><span class='e-childIcon e-iconMargin e-icon' style='float:right;display:none;'></span><span class='e-cancelIcon e-iconMargin e-icon' style='float:right;display:none;'></span></div>{{/if}}</div>{{/if}}{{if ~_"+r._id+"getState() && hasChildRecords && hasFilteredChildRecords}}<div class='e-intendparent'><div class={{:~_"+r._id+"rowName()}} ><span class='e-aboveIcon e-icon'  style='position:relative;float:left;display:none;'></span><span class='e-belowIcon e-icon' style='float:left;display:none;'></span><span class='e-childIcon e-icon' style='float:left;display:none;'></span><span class='e-cancelIcon e-icon' style='float:left;display:none;'></span></div></div>{{/if}}<div class='{{if expanded && hasFilteredChildRecords}}e-treegridexpand e-icon{{else hasChildRecords && hasFilteredChildRecords}}e-treegridcollapse e-icon{{/if}}'style='float:left;display:inline-block; font-size:10px;'></div><div class='e-cell{{if "+(s.showCheckbox&&this.model.selectionSettings.selectionType==t.TreeGrid.SelectionType.Checkbox)+"}} e-treecheckboxcolumn{{/if}}{{if ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}} {{if "+h+"}} e-textwrapcell{{/if}}'style='overflow: hidden;padding-left:{{if ~_"+r._id+"isTreeColumnIndex('"+i+"') && isSummaryRow}}{{:(level*"+r.treeIndentLevelWidth+")+24}}px{{/if}};'>{{/if}}{{:~_"+r._id+"getCheckboxState(#data, '"+i+"', '"+r._checkboxColumnName+"')}}",t.isNullOrUndefined(s.format)?n.isFromGantt&&s.mappingName===n.resourceInfoMapping?(c={},c["_"+r._id+"resourceName"]=r._getResourceName,e.views.helpers(c),a+="{{:~_"+r._id+"resourceName('"+r._id+"Object','"+n.resourceNameMapping+"','"+n.resourceUnitMapping+"','"+i+"')}}</div></div></td>"):n.isFromGantt&&s.mappingName===n.predecessorMapping?(c={},c["_"+r._id+"predecessor"]=e.proxy(r._getPredecessorsValue,r),e.views.helpers(c),a+="{{:~_"+r._id+"predecessor(#data)}}</div></div></td>"):(a+=O+"{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}{{:~_"+r._id+"TemplateCellValue(#data,'"+i+"')}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}}</div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}</div></div></td>{{/if}}",O=""):a+="{{if !isSummaryRow && !footerSummaryRowRecord}}{{:~_"+r._id+"formatting('"+s.format+"',~_"+r._id+"TemplateCellValue(#data,'"+i+"'),'"+this.model.locale+"')}}{{else}}{{:~_"+r._id+"TemplateCellValue(#data,'"+i+"')}}{{/if}}";else if(n.isFromGantt&&s.mappingName===n.resourceInfoMapping)c={},c["_"+r._id+"resourceName"]=r._getResourceName,e.views.helpers(c),a="<td  class='{{if isSelected && ~_"+r._id+"SelectState()}}e-rowcell e-selectionbackground{{else}}e-rowcell {{/if}} {{:~_"+r._id+"isSelectedCell(#data,'"+l+"')}} {{if "+!k+"}}e-hide{{/if}}'style='background-color:{{if cellBackgroundColor && ~_"+r._id+"checkColumn('"+i+"',#data)=='"+i+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};'role='row'>{{:~_"+r._id+"resourceName('"+r._id+"Object','"+n.resourceNameMapping+"','"+n.resourceUnitMapping+"','"+i+"')}}</td>";else if(n.isFromGantt&&s.mappingName===n.predecessorMapping)c={},c["_"+r._id+"predecessor"]=e.proxy(r._getPredecessorsValue,r),e.views.helpers(c),a="<td class='{{if isSelected && ~_"+r._id+"SelectState()}}e-rowcell e-selectionbackground{{else}}e-rowcell {{/if}} {{:~_"+r._id+"isSelectedCell(#data,'"+l+"')}} {{if "+!k+"}}e-hide{{/if}}' style='background-color:{{if cellBackgroundColor && ~_"+r._id+"checkColumn('"+i+"',#data)=='"+i+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};'role='row'>{{:~_"+r._id+"predecessor(#data)}}</td>";else if(n.isFromGantt&&s.mappingName===n.durationMapping)c={},c["_"+r._id+"getDurationString"]=e.proxy(r._getDurationString,r),e.views.helpers(c),a="<td class='{{if isSelected && ~_"+r._id+"SelectState()}}e-rowcell e-selectionbackground{{else}}e-rowcell {{/if}} {{:~_"+r._id+"isSelectedCell(#data,'"+l+"')}} {{if "+!k+"}}e-hide{{/if}}' style='background-color:{{if cellBackgroundColor && ~_"+r._id+"checkColumn('"+i+"',#data)=='"+i+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};'role='row'>{{:~_"+r._id+"getDurationString(#data)}}</td>";else if("booleanedit"==s.editType&&r._checkboxSelection&&"checkboxState"==i)a="<td class='{{if isSelected && ~_"+r._id+"SelectState()}}e-rowcell e-selectionbackground{{else}}e-rowcell{{/if}} {{:~_"+r._id+"isSelectedCell(#data,'"+l+"')}} {{if "+!k+"}}e-hide{{/if}}{{:~_"+r._id+"SummaryRowtdClassName()}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+h+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}} e-summaryintend {{/if}}{{if ~_"+r._id+"batchEditState(#data,'"+i+"')}}e-updatedtd e-tgupdatenotify{{/if}}'style='background-color:{{if cellBackgroundColor && ~_"+r._id+"checkColumn('"+i+"',#data)=='"+i+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};text-Align: center;'role='row'> {{if footerSummaryRowRecord && ~_"+r._id+"collapsibleSummary('"+l+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}"+O+"{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}{{:~_"+r._id+"TemplateCellValue(#data,'"+i+"', '"+r._checkboxColumnName+"')}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}}</div>{{/if}}";else if(r._isCommandColumn(s)){e("#"+this._id+l+"_UnboundTemplate").remove();var F=r._createCommandElement(s,l);a="<td class='{{if isSelected && ~_"+r._id+"SelectState()}}e-rowcell e-unboundcell e-selectionbackground {{else}}e-rowcell e-unboundcell {{/if}} {{:~_"+r._id+"isSelectedCell(#data,'"+l+"')}} {{if "+!k+"}}e-hide{{/if}}{{:~_"+r._id+"SummaryRowtdClassName()}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}} e-summaryintend{{/if}}'style='background-color:{{if cellBackgroundColor && ~_"+r._id+"checkColumn('"+i+"',#data)=='"+i+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};text-Align:"+P+"'role='row'> {{if !isSummaryRow && !footerSummaryRowRecord}}{{:~_"+r._id+"UnboundTemplate('"+F.id+"')}}{{else}}{{if footerSummaryRowRecord && ~_"+r._id+"collapsibleSummary('"+l+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}"+O+"{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}{{:~_"+r._id+"TemplateCellValue(#data,'"+i+"', '"+r._checkboxColumnName+"')}}{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}}</div>{{/if}}",r._commandColumnLength=r._commandColumnLength+1,a+="</td>"}else a="<td class='{{if isSelected && ~_"+r._id+"SelectState()}}e-rowcell e-selectionbackground{{else}}e-rowcell {{/if}} {{:~_"+r._id+"isSelectedCell(#data,'"+l+"')}} {{if "+!k+"}}e-hide{{/if}} {{:~_"+r._id+"SummaryRowtdClassName()}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+r._id+"isTrimCell('"+s.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+h+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}} e-summaryintend{{/if}}{{if ~_"+r._id+"batchEditState(#data,'"+i+"')}}e-updatedtd e-tgupdatenotify{{/if}}'style='background-color:{{if cellBackgroundColor && ~_"+r._id+"checkColumn('"+i+"',#data)=='"+i+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};text-Align:"+P+"'role='row'>{{:~_"+r._id+"getCheckboxState(#data, '"+i+"', '"+r._checkboxColumnName+"')}}{{if footerSummaryRowRecord && ~_"+r._id+"collapsibleSummary('"+l+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}"+O+"{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}",t.isNullOrUndefined(s.format)?a+="{{:~_"+r._id+"TemplateCellValue(#data,'"+i+"')}}":a+="{{if !isSummaryRow && !footerSummaryRowRecord}}{{:~_"+r._id+"formatting('"+s.format+"',~_"+r._id+"TemplateCellValue(#data,'"+i+"'),'"+this.model.locale+"')}}{{else}}{{:~_"+r._id+"TemplateCellValue(#data,'"+i+"')}}{{/if}}",a+="{{if footerSummaryRowRecord && ~_"+r._id+"summaryIndendCell("+l+")}}</div>{{/if}}</td>",O="";E+=a}if(this._frozenColumnsLength>0&&this._frozenColumnsLength==l+1){var A="";A+=E,A+="</tr>",E=""}}n.showDetailsRow&&n.detailsTemplate&&n.showDetailsRowInfoColumn&&(E+="<td class='{{if isSelected && ~_"+r._id+"SelectState()}}e-selectionbackground{{/if}} {{if isDetailsExpanded}}e-detailsrowexpand{{else}}e-detailsrowcollapse{{/if}}  e-detailsrowcell{{if isLastSummary}} e-lastsummaryrow{{/if}}'>{{if !isSummaryRow && !footerSummaryRowRecord}}<div class='e-detailsiconcell e-icon {{if isDetailsExpanded}}e-detailsinfoiconhide{{else}}e-detailsinfoiconshow{{/if}}'></div>{{/if}}"),L+="{{if expanded && hasFilteredChildRecords}}e-treegridrowexpand {{else hasChildRecords && hasFilteredChildRecords}} e-treegridrowcollapse {{/if}}{{if isBatchDelete}}e-batchdisable {{/if}}'style='background-color:{{if rowBackgroundColor }}{{:rowBackgroundColor}}{{else}}none{{/if}}; height:{{:~_"+r._id+"getRowHeight(#data)}}px;display:{{if footerSummaryRowRecord}}{{:~_"+r._id+"summaryExpandStatus(#data)}}{{else}}{{:~_"+r._id+"expandStatus(#data)}}{{/if}}'role='treegrid'>",A=L+A,L+=E,n.isFromGantt?L+="<td class='e-extendcolumn'></td></tr>":L+="</tr>"}n.showDetailsRow&&n.detailsTemplate&&(L+="{{if isDetailsExpanded}}"+r._createDetailsRowTemplate()+"{{/if}}",A+="{{if isDetailsExpanded}}"+r._createDetailsRowTemplate(!0)+"{{/if}}"),r._summaryExpanded=!0;var N={};N[r._id+"_Template"]=L,N[r._id+"_JSONFrozenTemplate"]=A,e.templates(N)},_gridTemplate:function(e,i,s){var a;return t.isNullOrUndefined(s)||(a=e.model.columns[s]),e._renderEjTemplate("#"+i,this.data,this.data.index,a)},_getIndentWidth:function(e){return e.level*this.treeIndentLevelWidth+"px"},_createDetailRowTemplateElement:function(i){var s,a=/^#([\w-]*)/,r=a.exec(i),n=/^<script/i,o={name:"SCRIPT",type:"text/x-template",text:i,id:"treeGridDetailsRowTemplateElement"+this._id};return s=r&&r[1]?document.getElementById(r[1]):n.test(i)?e(i).get(0):t.buildTag(o.name,o.text).get(0),s.id=s.id||o.id,s.type=s.type||o.type,e("body").append(s),s},_createRowTemplateElement:function(t,i,s){var a=document.createElement("script");return a.id=i,a.type=s||"text/x-template",a.text=t,e("body").append(a),a},_createTemplateElement:function(i,s){var a,r=s?"Pager":i.headerText+e.inArray(i,this.model.columns)+"_Template",n="template"in i?"template":"templateID"in i?"templateID":"angularTemplate",o=i[n],l=/^#([\w-]*)/,d=/^<script/i;"templateID"==n&&-1==o.indexOf("#")&&(o="#"+o);var h=l.exec(o),c={name:"SCRIPT",type:"text/x-template",text:o,id:(this._id+r).replace(/(\\|[^0-9A-z-_])/g,"")};return a=h&&h[1]?document.getElementById(h[1]):d.test(o)?e(o).get(0):t.buildTag(c.name,c.text).get(0),a.id=a.id||c.id,a.type=a.type||c.type,e("#"+a.id).remove(),e("body").append(a),a},_getCheckboxState:function(e,t,i){if(t==i&&1!=e.isSummaryRow&&!e.summaryColumn&&!e.summaryRow){return"indeterminate"==e.checkboxState?'<span class="e-chkbox-wrap e-widget" style="padding-right:10px;color:#c8c8c8;"><div class="e-chkbox-small"><span class="e-chk-indeter"><span class="e-checkbox e-chk-image e-icon e-stop" id ='+this._id+"_checkbox"+e.ejRowId+"></span></span></div></span>":"unchecked"==e.checkboxState?'<span class="e-chkbox-wrap e-widget" style="padding-right:10px;color:#c8c8c8;"><div class="e-chkbox-small"><span class="e-chk-inact"><span class="e-checkbox e-chk-image e-icon" id ='+this._id+"_checkbox"+e.ejRowId+"></span></span></div></span>":'<span class="e-chkbox-wrap e-widget" style="padding-right:10px;color:#c8c8c8;"><div class="e-chkbox-small"><span class="e-chk-act"><span class=" e-checkbox e-chk-image e-icon e-checkmark" id ='+this._id+"_checkbox"+e.ejRowId+"></span></span></div></span>"}},_checkIsTrimCell:function(e){return!(!e||"ellipsis"!=e)},_getTemplateRowHeight:function(e){return this.model.isFromGantt&&"resourceView"==this.model.viewType?e.eOverlapIndex*this.model.rowHeight:this.model.rowHeight},_getCustomCellValue:function(e,i){if(!t.isNullOrUndefined(e)){var s,a=(i||"").split(".");if(a.length<=1)s=e[i];else{if(s=e[a[0]],t.isNullOrUndefined(s))return null;for(var r=1;r<a.length;r++)if(s=s[a[r]],t.isNullOrUndefined(s))return null}return s}},_restoreCustomData:function(e,i,s){var a=this,r=0,n=0;if(t.isNullOrUndefined(s))var s=a._cellEditingDetails.fieldName;var o=(s||"").split("."),l={};if(o.length<=1)t.isNullOrUndefined(e)?(e={},e[s]=i):e[s]=i;else{for(t.isNullOrUndefined(e)?(e={},l=e,n=0):(l=e[o[0]],t.isNullOrUndefined(l)&&(l={},e[o[0]]=l),n=1),r=n;r<o.length-1;r++)t.isNullOrUndefined(l[o[r]])&&(l[o[r]]={}),l=l[o[r]];l[o[r]]=i}return e},_getTemplateCellValue:function(i,s,a){var r,n,o,l,d=this,h=d.getColumnByField(s),c=h.editType,u=d._getCustomCellValue(i,s);if(u=t.isNullOrUndefined(u)?i.item&&i.item[s]:u,c==t.TreeGrid.EditingType.Boolean&&s==a?u=d._getCheckboxState(i,s,a):i.isSummaryRow||i.footerSummaryRowRecord||c!=t.TreeGrid.EditingType.Boolean||s==a||!t.isNullOrUndefined(h.displayAsCheckbox)&&!h.displayAsCheckbox||(u="true"==u||1==u?"<input class='e-treegrid-chekboxcell' type='checkbox' disabled='disabled' checked/>":"<input class='e-treegrid-chekboxcell' type='checkbox' disabled='disabled'/>"),d.model.isFromGantt&&("work"==s&&(u+=" "+d.model.workUnit),"taskMode"==s&&(u=!i.isAutoSchedule),"unit"==s&&(u+="%"),"duration"==s&&(u=d._getDurationString(i)),"startDate"!=s&&"endDate"!=s&&"duration"!=s||(t.isNullOrUndefined(u)||""==u)&&(u=h.showNullText?d.model.nullText:"")),c==t.TreeGrid.EditingType.Dropdown&&!i.isSummaryRow&&!i.footerSummaryRowRecord){var p=h.editParams;if(u=null!=u||void 0!=u?u:"",p&&p.fields?(l=p.fields.text?p.fields.text:"text",o=p.fields.value?p.fields.value:"value"):(o="value",l="text"),p&&(p.showCheckbox||p.multiSelectMode)){var m,g,n,f=h.dropdownData,_=p&&!t.isNullOrUndefined(p.delimiterChar)?p.delimiterChar:",";if("string"==typeof u&&u.indexOf(_)>-1?(m=u.split(_),g=m.length):m=u,u="",h.dropdownData)if(g)for(var r=0;r<g;r++)n=e.map(f,function(e){if(t.isNullOrUndefined(e[o])){if(e[l]==m[r])return e[l]}else if(e[o].toString()==m[r].toString())return e[l]}),n[0]=n[0]?n[0]:"",u+=0==r?n[0]:_+n[0];else e.map(f,function(e){(!t.isNullOrUndefined(e[o])&&m.toString()===e[o].toString()||m===e[l])&&(u=e[l])})}else if(h.dropdownData){var f=h.dropdownData;n=e.map(f,function(e){if(t.isNullOrUndefined(e[o])){if(e[l].toString()==u)return e[l]}else if(e[o].toString()==u.toString())return e[l]}),n[0]=t.isNullOrUndefined(n[0])?"":n[0],u=n[0]}}return u},_getCellValue:function(e,t){var i=this._getCustomCellValue(e,t);return i||0===i?i:e.item&&e.item[t]},_isCommandColumn:function(e){var i=this,s=(i.model,e.commands);return!(!t.isNullOrUndefined(s)&&0==s.length||t.isNullOrUndefined(s))},_isTreeColumnIndex:function(e){var t=this,i=t.model,s=i.columns[i.treeColumnIndex];return!(!s||s.field!=e)},_getSummaryTitle:function(){var e=this,t=e.data.summaryRow.title;return t||e.data.item&&e.data.item.summaryRow.title},_getCellColumn:function(e,t){return-1!==t.treeMappingName.indexOf(e)?e:"none"},_getResourceName:function(e,t,i,s){var a,r,n=this,o=n.data[s],l=0,d=o&&o.length,h=[];if(o&&o.length>0)for(l;l<d;l++)a=o[l][t],r=o[l][i],100!=r&&(a+="["+r+"%]"),h.push(a);return h},_removeSeparator:function(e){var i=e.toString(),s=t.preferredCulture(this.model.locale).numberFormat;return i=i.replace(".",s["."])},_getDurationString:function(e){var i="";if(t.isNullOrUndefined(e.duration)||""===e.duration){var s=this.getColumnByField("duration");i=s=s.showNullText?this.model.nullText:i}else{if("string"==typeof e.duration){var a=parseFloat(e.duration);i+=isNaN(a)?"":this._removeSeparator(parseFloat(a.toFixed(2)))+" "}else i=this._removeSeparator(parseFloat(e.duration.toFixed(2)))+" ";if(null!=e.durationUnit){var r=1!=e.duration;"day"==e.durationUnit?i+=r?this.model.durationUnitTexts.days:this.model.durationUnitTexts.day:"hour"==e.durationUnit?i+=r?this.model.durationUnitTexts.hours:this.model.durationUnitTexts.hour:i+=r?this.model.durationUnitTexts.minutes:this.model.durationUnitTexts.minute}}return i},_getPredecessorsValue:function(e){var t=e.predecessor,i="";if(t)for(var s=t.length,a=0;a<s;a++){var r=t[a],n="";if(r.from!=e.taskId){if(n=r.from+r.predecessorsType,0!=r.offset){n+=r.offset>0?"+"+r.offset+" ":r.offset+" ";var o=1!=Math.abs(r.offset);"day"==r.offsetDurationUnit?n+=o?this.model.durationUnitTexts.days:this.model.durationUnitTexts.day:"hour"==r.offsetDurationUnit?n+=o?this.model.durationUnitTexts.hours:this.model.durationUnitTexts.hour:n+=o?this.model.durationUnitTexts.minutes:this.model.durationUnitTexts.minute}i=i.length>0?i+","+n:n}}return i},_getExpandStatusRecord:function(e){var t=this;return t.getExpandStatus(e)||t._isHierarchyFiltering&&e.isDisplay?"table-row":"none"},_createRecords:function(e){var i,s=this,a=s.model,r=s.model.ids,n=a.flatRecords,o=e.length,l=0,d=!0,h=a.parentRecords;for(!a.isFromGantt&&a.enableCollapseAll&&(d=!1),l;l<o;l++)i=s._createRecord(e[l],0,null,d),i.hierarchyRowIndex=l,s._storedIndex++,i.isAltRow=s._storedIndex%2!=0,h.push(i),i.index=s._storedIndex,r[s._storedIndex]=i.index,n.push(i),i.hasChildRecords&&s._parentRecords.push(i),i.childRecords&&s._addNestedRecords(i.childRecords),this.dataSource()instanceof t.DataManager&&s._isLoadonDemand&&(i.item[a.hasChildMapping]||-1!=s._assignedParendIDs.indexOf(i.item[a.idMapping]))&&(i.hasChildRecords=!0,i.childRecords=[],i.isChildRetrieved=!1);a.allowPaging&&!s._isRemoteData&&s._updateTotalRecordsCount(),s._maxRowIndex=this.model.flatRecords.length},_updateTotalRecordsCount:function(){var e=this,i=e.model,s=i.flatRecords;if(!t.isNullOrUndefined(i.pageSettings.totalRecordsCount)&&i.pageSettings.totalRecordsCount<=s.length){var a=i.pageSettings.totalRecordsCount;i.flatRecords=s.slice(0,a),i.flatRecords[a-1].hasChildRecords&&(i.flatRecords[a-1].hasChildRecords=!1,i.flatRecords[a-1].expanded=!1,i.flatRecords[a-1].childRecords=null,i.flatRecords[a-1].hasFilteredChildRecords=!1)}else t.isNullOrUndefined(i.pageSettings.totalRecordsCount)&&(i.pageSettings.totalRecordsCount=s.length)},_createRecord:function(i,s,a,r){var n,o=this,l=i[o.model.childMapping],d=this.model;n=e.extend({},i);if(d.parentIdMapping&&"load"===o._createdAt){var h=i[d.idMapping],c=o._taskIds.indexOf(h);n.item=c>-1?o._retrivedData[c]:[]}else if(this.dataSource()instanceof t.DataManager&&this.dataSource().dataSource.json&&this.dataSource().dataSource.offline&&"load"===o._createdAt)if(d.parentIdMapping){var h=i[d.idMapping],c=o._taskIds.indexOf(h);n.item=c>-1?o._retrivedData[c]:[]}else n.item=i;else n.item=i;if(n.parentItem=a,n.childRecords=l&&l.length>0&&o._createChildRecords(l,s+1,n),n.hasChildRecords=!!(l&&l.length>0),d.expandStateMapping&&n.hasChildRecords){t.isNullOrUndefined(i[d.expandStateMapping])?t.isNullOrUndefined(i[d.expandStateMapping])&&!d.enableCollapseAll?n[d.expandStateMapping]=n.item[d.expandStateMapping]=i[d.expandStateMapping]=!0:t.isNullOrUndefined(i[d.expandStateMapping])&&d.enableCollapseAll&&(n[d.expandStateMapping]=n.item[d.expandStateMapping]=i[d.expandStateMapping]=!1):n[d.expandStateMapping]=n.item[d.expandStateMapping]=i[d.expandStateMapping];var u=i[d.expandStateMapping]}else var u=!0;return n.expanded=void 0!==r&&void 0!==l&&1==n.hasChildRecords&&u?r:!(!u||!l)&&l.length>0,n.dragState=!0,n.isSelected=!1,n.hasFilteredChildRecords=!0,n.level=s,n.canDrag=!0,n.canDrop=!0,n.cellBackgroundColor=null,n.rowBackgroundColor=null,n.textWrapRowHeight=d.rowHeight,n.treeMappingName=[],d.showDetailsRow&&d.detailsTemplate?n.isDetailsExpanded=!d.showDetailsRowInfoColumn:n.isDetailsExpanded=!1,d.isFromGantt||(n.ejRowId=++o._idGenerator),n.checkboxState="unchecked",delete n[d.childMapping],n},_createChildRecords:function(e,t,i){var s,a,r=this,n=r.model,o=[],l=0,d=e.length,h=null;for(!n.isFromGantt&&n.enableCollapseAll&&(s=!1),l=0;l<d;l++)(h=e[l])&&(a=r._createRecord(h,t,i,s),a.hierarchyRowIndex=l,o.push(a));return o},_addNestedRecords:function(e){var t,i=this,s=i.model,a=i.model.ids,r=s.flatRecords,n=s.updatedRecords,o=0,l=e.length,d=[];for(o=0;o<l;o++)if(t=e[o],i._storedIndex++,t.isAltRow=i._storedIndex%2!=0,t.index=i._storedIndex,a[i._storedIndex]=t.index,r.push(t),n.push(t),t.hasChildRecords&&i._parentRecords.push(t),d=t.childRecords){var h=0,c=d.length,u=null;for(h=0;h<c;h++)u=d[h],i._storedIndex++,u.index=i._storedIndex,a[i._storedIndex]=u.index,u.isAltRow=i._storedIndex%2!=0,r.push(u),n.push(t),u.hasChildRecords&&i._parentRecords.push(u),u.childRecords&&i._addNestedRecords(u.childRecords)}},_enableColumnResizeEvents:function(){var e=this;e.model.allowColumnResize?e._on(e.element,"mousemove",e._mouseMove):e._off(e.element,"mousemove",e._mouseMove)},_wireEvents:function(){var i=this,s=i.model;jQuery.uaMatch(navigator.userAgent);t.isTouchDevice()?(i._on(i.element,"tap",i._onRecordClick),i._on(i.element,"doubletap",".e-gridcontent > div",i._onRecordDoubleClick),i._on(i.element,"tap",i._onClick)):(i._on(i.element,"click",i._onRecordClick),i._on(i.element,"dblclick",".e-gridcontent > div",i._onRecordDoubleClick),i._on(i.element,"click",i._onClick)),i._on(i.element,"keydown",i._keyDown),i._on(i.element,"click","#"+i._id+"e-gridheader",i._onHeaderClick),i._on(i.element,"mousedown touchstart","#"+i._id+"e-gridheader",i._headerMouseDown),i._on(e(document),"mousedown touchstart",i._mouseDownHandler),i._on(i.element,"mousedown touchstart",".e-gridcontent",i._contentMouseDown),t.isTouchDevice()&&this.model.allowPaging&&this._on(this.element,"swipeleft swiperight",".e-gridcontent div > .e-table",e.proxy(this._swipeAction,this)),i.model.allowColumnResize&&i._on(i.element,"mousemove",i._mouseMove),"immediate"==s.filterSettings.filterBarMode&&(i._on(i.element,"keyup",".e-filterbarcell input",i._filterBarHandler),i._off(i.element,"click",".e-filterbarcell .e-checkbox")._on(i.element,"click",".e-filterbarcell .e-checkbox",i._filterBarHandler)),i._on(i.element,"focus click",".e-filterbarcell input",i._filterBarClose),i._on(i.element,"click",".e-filterbarcell .e-cancel",i._filterBarClose),(i.model.showGridCellTooltip||i.model.showGridExpandCellTooltip)&&i._on(i.element,"mousemove",".e-rowcell",i._mouseHover),i.model.showGridCellTooltip&&i._on(i.element,"mousemove",".e-headercelldiv",i._headermouseHover),i._on(i.element,"mouseleave",".e-rowcell",i._cellMouseLeave),i._on(i.element,"mouseleave",i._cellMouseLeave),i._on(i.element,"mouseleave",".e-headercelldiv",i._headerMouseLeave),i._on(i.element,"mouseleave",i._headerMouseLeave),(s.isFromGantt||this._frozenColumnsLength)&&i._on(i.element,"mousewheel DOMMouseScroll",i._mouseWheel),s.enableResize&&s.isResponsive&&!s.isFromGantt&&i._on(e(window),"resize",i._windowResize),i._enableEditingEvents(),this._on(this.element,"click",".e-unboundcelldiv button",this._unboundClickHandler),s.contextMenuSettings.showContextMenu&&i._on(i.element,"keyup contextmenu taphold",this._preventContextMenu)},_preventContextMenu:function(e){if(93==e.keyCode||"contextmenu"==e.type||"taphold"==e.type)return e.preventDefault(),e.stopPropagation(),!1},_mouseDownHandler:function(t){var i=this,s=e(t.target)
;0!=s.closest("div.e-tgheaderContextmenu").length||0!=s.closest("div.e-columnmenuitem").length||0!=s.closest("div.e-columnMenuListDiv").length||(s.hasClass("e-columnmenu-icon")||s.hasClass("e-column-filter-icon")||s.hasClass("e-column-filtered-icon"))&&0!=e(t.target).closest("#"+i._id).length||0!=s.closest("div.e-"+i._id+"filterStringSelector").length||0!=s.closest("div#"+i._id+"filterStringDropDown_popup_list_wrapper").length||0!=s.closest("div#"+i._id+"filterStringInputBox_suggestion").length||0!=s.closest("div.e-"+i._id+"filterNumericSelector").length||0!=s.closest("div#"+i._id+"filterNumericDropDown_popup_list_wrapper").length||0!=s.closest("div.e-"+i._id+"filterDatepickerSelector").length||0!=s.closest("div#"+i._id+"filterDatepickerDropDown_popup_list_wrapper").length||0!=s.closest("div#e-"+i._id+"filterDatepickerInputBox").length||0!=s.closest("div.e-"+i._id+"filterDatetimepickerSelector").length||0!=s.closest("div#"+i._id+"filterDatetimepickerDropDown_popup_list_wrapper").length||0!=s.closest("div#"+i._id+"filterDatetimepickerInputBox_popup").length||0!=s.closest("div.e-"+i._id+"filterDropdownSelector").length||0!=s.closest("div#"+i._id+"filterDropdownDropDown_popup_list_wrapper").length||0!=s.closest("div.e-"+i._id+"filterBooleanSelector").length||0!=s.closest("div.e-excelfilter").length||i._isExcelFilterClick(s)||i._clearColumnMenu(),s.hasClass("e-tgheaderContextmenu")||0==s.closest("div.e-menuitem").length&&0==s.closest("div.e-columnmenuselection").length&&0==s.closest("div.e-columnMenuListDiv").length&&i._clearContextMenu(),0==s.closest("div.e-detailscellwrapperfly").length&&i._removeDetailsRow(t)},_isExcelFilterClick:function(e){var t=this,i=t._id;return 0!=e.closest("#"+i+"number_CustomDrop1_popup").length||0!=e.closest("#"+i+"number_CustomDrop2_popup").length||0!=e.closest("#"+i+"datetime_CustomDrop1_popup").length||0!=e.closest("#"+i+"datetime_CustomDrop2_popup").length||0!=e.closest("#"+i+"date_CustomDrop1_popup").length||0!=e.closest("#"+i+"date_CustomDrop2_popup").length||0!=e.closest("#"+i+"string_CustomDrop1_popup").length||0!=e.closest("#"+i+"string_CustomDrop2_popup").length||0!=e.closest("#"+i+"datetime_CustomValue2_popup").length||0!=e.closest("#"+i+"datetime_CustomValue1_popup").length||0!=e.closest("#e-"+i+"date_CustomValue2").length||0!=e.closest("#e-"+i+"date_CustomValue1").length||0!=e.closest("#"+i+"string_CustomValue1_suggestion").length||0!=e.closest("#"+i+"string_CustomValue1_suggestion").length},_mouseout:function(t){var i,s,a,r=this,n=r.model,o=r._gridPosition,l=o.top,d=r._gridHeight,h=r._$gridHeaderContent.outerHeight()+l;if(n.toolbarSettings.showToolbar){var c=n.isFromGantt?r._id.replace("ejTreeGrid",""):r._id;h+=e("#"+c+"_toolbarItems").length>0?e("#"+c+"_toolbarItems").outerHeight():0}if(n.allowPaging&&(d-=r.element.find(".e-pager").first().outerHeight()),n.showTotalSummary&&(d-=r._$totalSummaryRowContainer.outerHeight()),r._dragMouseDown){var u=(o.left,t.pageY);if(r.model.isFromGantt){var c=r._id.replace("ejTreeGrid",""),p=e("#"+c).find(".e-ganttviewerbodyContianer"),m=p.ejScroller("isVScroll"),g=m?p.find(".e-content").get(0).scrollHeight-1:0;s=p.ejScroller("isHScroll")?d+l-n.rowHeight/2-18:d+l-n.rowHeight/2}else{var g=r.isVScroll()?r.getMaxScrollHeight()+1:0;s=r.getScrollElement().ejScroller("isHScroll")?d+l-n.rowHeight/2-18:d+l-n.rowHeight/2}a=h+n.rowHeight/2,u>s&&g>r._scrollTop?r._timerDragDown||(r._timerDragDown=window.setInterval(function(){g>r._scrollTop&&(i=r._scrollTop+20,i=i>g?g:i,r.model.isFromGantt?p.ejScroller("scrollY",i,!0):r.getScrollElement().ejScroller("scrollY",i,!0))},100)):r._timerDragDown&&(r._timerDragDown=window.clearInterval(r._timerDragDown)),u<a&&0!=r._scrollTop&&r._scrollTop>0?r._timerDragUp||(r._timerDragUp=window.setInterval(function(){r._scrollTop>0&&(i=r._scrollTop-20,i<0&&(i=0),r.model.isFromGantt?p.ejScroller("scrollY",i,!0):r.getScrollElement().ejScroller("scrollY",i,!0))},100)):r._timerDragUp&&(r._timerDragUp=window.clearInterval(r._timerDragUp))}},getRange:function(t,i,s){var a,r,n,o=this,l=o.model,d=0,h=0;a=0==s.length?l.rowHeight:s[0].offsetHeight,r=o.getOffsetRect(e("#"+o._id)[0]),n=o._$gridHeaderContent.outerHeight()+r.top,a+=o._detailsRowHeight,l.enableVirtualization||(o._scrollTop=o.getScrollElement().ejScroller("scrollTop")),l.toolbarSettings.showToolbar&&(n+=e("#"+o._id+"_toolbarItems").length>0?e("#"+o._id+"_toolbarItems").outerHeight():0),l.allowTextWrap?(0==s.length&&(s=o._lastRow),h=s.offset().top):0!=o._scrollTop?(d=a-o._scrollTop%a,h=i*a+n+d):h=i*a+n+d;var c=0==s.length?h+l.rowHeight:h+s[0].offsetHeight,u=c-h,p=u/3,m=h+p,g=m+p,f=g+p,r={topRowSegment:m,middleRowSegment:g,bottomRowSegment:f};return r},_childValidation:function(e){var t,i,s=this,a=s._draggedRecord,r=a.parentItem;r&&(i=r.childRecords,t=i.indexOf(this._draggedRecord),e==r&&-1!=t&&(this._childItem=!0))},_isColumnHidable:function(e){var t=(this.model,[]),i=[],s=!0;return t=this._frozenColumns.filter(function(e){return 1==e.visible}),i=this._unFrozenColumns.filter(function(e){return 1==e.visible}),1==t.length&&t[0].field==e.field&&(s=!1),1==i.length&&i[0].field==e.field&&(s=!1),s},_updateColumnMenuVisibility:function(){var t=this.model,i=[],s=[];if(t.showColumnChooser||t.contextMenuSettings.showContextMenu){if(i=this._frozenColumns.filter(function(e){return 1==e.visible}),s=this._unFrozenColumns.filter(function(e){return 1==e.visible}),1==i.length){var a=e("#"+this._id+"_columnMenu_"+i[0].field.split(".").join("")).data("ejCheckBox");a&&a.option("enabled",!1)}if(1==s.length){var a=e("#"+this._id+"_columnMenu_"+s[0].field.split(".").join("")).data("ejCheckBox");a&&a.option("enabled",!1)}}},_validDrop:function(t,i){var s=this;t.filter(function(t){if(t.hasChildRecords&&1==i.dragState){if(-1!=e.inArray(i,t.childRecords))return void(i.dragState=!1);s._validDrop(t.childRecords,i)}})},_renderToolTip:function(t,i,s,a){var r,n=this,o=this.model,l=[],d=(document,n.model.columns,o.dragTooltip.tooltipItems.length,a.closest("tr"));e(".e-dragintend").find(".e-icon").css({display:"none"}),e(".e-intendparent").find(".e-icon").css({display:"none"}),e(".e-error").css({display:"none"}),e(".e-treegridexpand").css({display:"inline-block"}),e(".e-treegridcollapse").css({display:"inline-block"}),n._isHierarchyFiltering&&e("#"+n._id+"e-gridcontent").css({cursor:"no-drop"}),n._isHierarchyFiltering?(r=n.getIndexByRow(d),n._currentRecord=o.currentViewData[r]):0==d.length&&(a.hasClass("e-movablecontainer")||a.hasClass("e-gridcontent")||a.hasClass("e-content"))&&(r=n._recordIndex,n._currentRecord.parentItem||n._currentRecord.hasChildRecords&&(n._currentRecord.expanded?n._lastRow.find(".e-treegridexpand").css({display:"none"}):n._lastRow.find(".e-treegridcollapse").css({display:"none"})));var h,c,l={},u=n.getUpdatedRecords();n._insertAbove=!1,n._insertAsChild=!1,n._insertBelow=!1,n._childItem=!1,n._draggedRecord,r!=n._draggedIndex&&(n._displayContextMenu=!1);var h=n.getExpandedRecords(u);n.getVisibleRange();var p=h.slice(n._visibleRange.top,n._visibleRange.bottom);if(0!=n._scrollTop)u.indexOf(n._draggedRecord)-1,c=p.indexOf(n._currentRecord)-1;else{u.indexOf(n._draggedRecord);var c=p.indexOf(n._currentRecord)}var m=u.indexOf(n._currentRecord),g=n._currentRecord&&n._checkPrevNextRecord(n._draggedRecord,m,n._currentRecord.level,"next"),f=n._currentRecord&&n._checkPrevNextRecord(n._draggedRecord,m,n._currentRecord.level,"prev"),_=n._gridPosition.left,v=t.pageY;n._currentRecord&&(l=n.getRange(n._currentRecord,c,d));var b=v<=l.topRowSegment,x=v>l.topRowSegment&&v<=l.middleRowSegment,y=v>l.middleRowSegment&&v<=l.bottomRowSegment;if(n._currentRecord){n.data=n._currentRecord;var w=this._getrowName();n._childValidation(n._currentRecord),n._isHierarchyFiltering||(n._currentRecord.parentItem?n._currentRecord.hasChildRecords&&(n._currentRecord.expanded?d.find(".e-treegridexpand").css({display:"inline-block"}):d.find(".e-treegridcollapse").css({display:"inline-block"})):n._currentRecord.hasChildRecords&&(n._currentRecord.expanded?d.find(".e-treegridexpand").css({display:"none"}):d.find(".e-treegridcollapse").css({display:"none"})),n._validDrop(n._draggedRecords,n._currentRecord),1==n._currentRecord.dragState&&0!=s.canDrop?b&&!f?s.dropPosition="insertAbove":x&&0==n._childItem?s.dropPosition="insertAsChild":x&&1==n._childItem?s.dropPosition="invalidPosition":y&&!g||0==d.length?s.dropPosition="insertBelow":s.dropPosition="invalidPosition":s.dropPosition="invalidPosition",n._trigger("rowDrag",s),1==n._currentRecord.dragState&&0!=s.canDrop?b&&!f?(e(n.element).find("."+w).find(".e-aboveIcon").css({display:"block"}),n._insertAbove=!0):x&&0==n._childItem?(e(n.element).find("."+w).find(".e-childIcon").css({display:"block"}),n._insertAsChild=!0):x&&1==n._childItem?(e(n.element).find("."+w).find(".e-cancelIcon").css({display:"block"}),n.cancelDrop=!0):(y&&!g||0==d.length)&&(e(n.element).find("."+w).find(".e-belowIcon").css({display:"block"}),n._insertBelow=!0):(e(n.element).find("."+w).find(".e-cancelIcon").css({display:"block"}),n.cancelDrop=!0))}e(n._dragmouseOverTooltip).css({top:v+20+"px",left:_+15+"px",position:"absolute","z-index":n.getMaxZIndex()+1,padding:"0","border-right":"0","border-bottom":"0","border-radius":"3px",height:"auto"})},_checkPrevNextRecord:function(e,t,i,s){var a=this,r=(a.model,a.getUpdatedRecords()),n=t;for("next"==s?t++:t--;r[t];){if(r[t].level==i)return r[t]==e&&e.parentItem==r[n].parentItem;"next"==s?t++:t--}return!1},_createDragTooltipTemplate:function(){var t,i=this,s=i.model.dragTooltip.tooltipTemplate;if(s){t="#"==s.charAt(0)?e(i.model.dragTooltip.tooltipTemplate)[0].innerHTML:i.model.dragTooltip.tooltipTemplate}var a={};a[i._id+"dragtooltipTemplate"]=t,e.templates(a)},_updateDragStateFalse:function(e,t){var i,s,a=this;if(e.dragState=!1,e.hasChildRecords){s=e.childRecords.length;for(var r=0;r<s;r++)i=e.childRecords[r],i.dragState=!1,i.hasChildRecords&&(t=a._updateDragStateFalse(i,t))}},_updateDragStateTrue:function(e,i){var s,a,r=this;if(!t.isNullOrUndefined(e)&&(e.dragState=!0,e.hasChildRecords)){a=e.childRecords.length;for(var n=0;n<a;n++)s=e.childRecords[n],s.dragState=!0,s.hasChildRecords&&(i=r._updateDragStateTrue(s,i))}},_getCoordinate:function(e){var t=e;return"touchmove"!=e.type&&"touchstart"!=e.type&&"touchend"!=e.type&&"taphold"!=e.type&&"tap"!=e.type||(t=e.originalEvent.changedTouches[0]),t},_getElementByPosition:function(t,i){return e(document.elementFromPoint(t-window.pageXOffset,i-window.pageYOffset))},dragRecord:function(i){if(i.ctrlKey||i.shiftKey||2==i.which||3==i.which)return!0;var s,a,r,n=this,o=n.model,l={},d=n._getCoordinate(i),h=e(i.target),c=h.closest("tr"),u=n.getUpdatedRecords(),p=!0;if(window.clearTimeout(this._dragTooltipTimer),this._dragTooltipTimer=null,!n._mouseDown)return!0;if(!c.hasClass("e-editedrow")&&n.editFormValidate()){if("cell"==o.selectionSettings.selectionMode&&n.clearSelection(),n._clearColumnMenu(),n._removeDetailsRow(),n._saveCellHandler(i),n._posx=d.pageX,n._posy=d.pageY,h.hasClass("e-summaryrowcell")||h.hasClass("e-footersummaryrowcell")||h.hasClass("e-summarytitle")||h.closest("tr").hasClass("e-detailsrowexpanded"))return;if(o.enableVirtualization?(n._currentIndex=n.getIndexByRow(c),a=o.currentViewData[n._currentIndex],n._currentIndex=u.indexOf(a)):n._currentIndex=n.getIndexByRow(c),n._draggedIndex=s=n.getIndexByRow(c),n._draggedRecord=n.model.currentViewData[s],t.isNullOrUndefined(n._draggedRecord))return;if(l.draggedRowIndex=s,l.draggedRow=n._draggedRecord,!o.isFromGantt&&("checkbox"==o.selectionSettings.selectionType&&o.selectedItems.length>1&&"checked"==o.currentViewData[n.getIndexByRow(c)].checkboxState||"multiple"==o.selectionSettings.selectionType)?n._draggedRecords=e.extend([],o.selectedItems).reverse():n._draggedRecords.push(n._draggedRecord),l.draggedRecords=n._draggedRecords,n._trigger("rowDragStart",l),l.draggedRow&&l.draggedRow.isSummaryRow&&(l.cancel=!0,l.draggedRow.canDrag=!1),0==l.draggedRow.canDrag&&(p=!1),e.extend([],n._draggedRecords).filter(function(e){0==e.canDrag&&(n._draggedRecords.splice(n._draggedRecords.indexOf(e),1),e.canDrag=!0)}),n._gridPosition=n.getOffsetRect(e("#"+n._id)[0]),n._frozenColumnsLength>0&&-1!=s){var m;c.index();m=c.closest(".e-movablecontentdiv").length>0?e(n._gridRows[0])[s]:e(n._gridRows[1])[s],c=c.add(m)}var g=n._gridPosition.left,f=d.pageY,_=o.isFromGantt?o.ganttElement.width():n._gridWidth,v=c.clone();_-=50,v.find(".e-hide").remove();var b=o.dragTooltip.tooltipItems.length,x=t.buildTag("table.e-zerospace","",{padding:"1",width:_-1,"border-collapse":"collapse"});if(n.model.dragTooltip.showTooltip&&0==n._dragTooltip)if(n.model.dragTooltip.tooltipTemplate||0!=n.model.dragTooltip.tooltipItems.length)if(0!=b){var y=o.columns;r=t.buildTag("tbody","",{},{});for(var w,C=t.buildTag("tr.e-dragtooltipbackground","",{},{}),S=0;S<b;S++)for(var T=0;T<y.length;T++)if(0!=y[T].visible&&(w=o.isFromGantt?y[T].mappingName:y[T].field,o.dragTooltip.tooltipItems[S]==w)){var R,k=n._getCustomCellValue(n._draggedRecord,y[T].field);y[T].format&&(k=n.formatting(y[T].format,k,o.locale)),t.isNullOrUndefined(k)||(R=t.buildTag("td.e-dragrowcell",k.toString(),{padding:"5px",width:n.columnsWidthCollection[T],height:o.rowHeight},{}),C.append(R)),C.append(R);break}r.append(C),x.append(r),n._dragmouseOverTooltip=t.buildTag("div.e-tooltipgantt e-js#tooltiptreegrid"+n._id,x,{top:f+20+"px",left:g+15+"px",position:"absolute","z-index":n.getMaxZIndex()+1,padding:"0","border-right":"0","border-bottom":"0","border-radius":"3px",height:"auto",width:_,overflow:"hidden"},{}),o.cssClass&&e(n._dragmouseOverTooltip).addClass(o.cssClass),e(n._dragmouseOverTooltip).addClass("e-dragtooltipbackground").addClass("e-dragrowcell"),n._dragTooltip=!0}else n.model.dragTooltip.tooltipTemplate&&(n._dragmouseOverTooltip=t.buildTag("div.e-tooltipgantt e-js#tooltiptreegrid"+n._id,"",{top:f+20+"px",left:g+15+"px",position:"absolute","z-index":n.getMaxZIndex()+1,padding:"0","border-right":"0","border-bottom":"0","border-radius":"3px",height:"auto"},{}),o.cssClass&&e(n._dragmouseOverTooltip).addClass(o.cssClass),n.tooltipState="TemplateID",r=t.buildTag("tbody",e.render[n._id+"dragtooltipTemplate"](n._draggedRecord),{},{}),n._dragmouseOverTooltip[0].innerHTML="<table>"+r[0].innerHTML+"</table>",n._dragTooltip=!0);else r=t.buildTag("tbody","",{},{}),v.find(".e-treegridexpand").css({display:"none"}),v.find("td.e-unboundcell").css({display:"none"}),v.find("td.e-detailsrowcell").css({display:"none"}),v.find(".e-treegridcollapse").css({display:"none"}),e(v.find(".e-dragintend")).css({width:0}),v.find(".e-intend").removeClass("e-intend"),v.find(".e-rowcell ").removeClass("e-rowcell ").addClass("e-dragrowcell"),v.addClass("e-dragtooltipbackground"),o.isFromGantt&&v.find("td:last").remove(),2==v.length&&this._frozenColumnsLength>0&&(e(v[0]).append(e(v[1].childNodes)),v.splice(1,1)),r.append(v),x.append(r),n._dragmouseOverTooltip=t.buildTag("div.e-tooltipgantt e-js#tooltiptreegrid"+n._id,x,{top:f+20+"px",left:g+15+"px",position:"absolute",overflow:"hidden","z-index":n.getMaxZIndex()+1,padding:"0","border-radius":"3px","border-right":"0","border-bottom":"0",width:_},{}),o.cssClass&&e(n._dragmouseOverTooltip).addClass(o.cssClass),e(n._dragmouseOverTooltip).addClass("e-dragtooltipbackground").addClass("e-dragrowcell"),n._dragTooltip=!0;n._draggedRecord&&(n._draggedElement=c,n._updateDragStateFalse(n._draggedRecord),n._dragMouseDown=!0,"touchstart"==i.type?(n._isHierarchyFiltering||e(document.body).append(n._dragmouseOverTooltip),n._off(n.element,"touchmove","#"+n._id+"e-gridcontent",n._touchScroll),n._on(n.element,"touchmove",".e-treegridrows, .e-templatecell",n.dragToolTip)):(n._off(n.element,"mousemove","#"+n._id+"e-gridcontent",n._touchScroll),n._on(n.element,"mousemove",".e-gridcontent, .e-templatecell",n.dragToolTip))),!l.cancel&&p||(n._dragMouseDown=!1,n._updateDragStateTrue(n._draggedRecord),n._dragTooltip=!1,n._dragmouseOverTooltip&&n._dragmouseOverTooltip.remove(),n._dragmouseOverTooltip=null,"touchstart"==i.type?n._off(n.element,"touchmove",".e-treegridrows, .e-templatecell",n.dragToolTip):n._off(n.element,"mousemove",".e-gridcontent, .e-templatecell",n.dragToolTip))}},dragToolTip:function(i){var s,a,r,n,o,l,d=this,h=d.model,c=h.currentViewData,u={},p=d._getCoordinate(i);i.preventDefault();var m=Math.abs(p.pageX-d._posx),g=Math.abs(p.pageY-d._posy);if(!(t.isNullOrUndefined(d._posx)||t.isNullOrUndefined(d._posy)||m<10&&g<10)&&1==d._dragMouseDown&&1==d.model.allowDragAndDrop){if(d._batchEditStarts)return d._batchSaveLostWarning("Drag"),!0;if("touchmove"==i.type?n=d._getElementByPosition(p.pageX,p.pageY):(n=e(i.target),e(document.body).append(d._dragmouseOverTooltip)),o=n.closest("tr"),1!=h.allowSelection||t.isNullOrUndefined(d._draggedRecord)||0!=d._draggedRecord.isSelected||(d.clearSelection(-1),d._selectDraggedRow(o),d._cancelSaveTools()),0==o.length&&(n.hasClass("e-movablecontainer")||n.hasClass("e-gridcontent")||n.hasClass("e-content"))){if(h.enableVirtualization)d._currentRecord=c[c.length-1],d._insertBelow=!0,d._lastRow=t.TreeGrid.getRowByIndex(d,c.length-1),d._recordIndex=c.length-1;else{var f=d.getExpandedRecords(c);if(d._currentRecord=f[f.length-1],h.allowPaging)d._lastRow=t.TreeGrid.getRowByIndex(d,c.length-1);else{var _=h.updatedRecords.indexOf(d._currentRecord);d._lastRow=t.TreeGrid.getRowByIndex(d,_)}d._recordIndex=d._indexOfLastRow=d.getIndexByRow(d._lastRow)}s=d._recordIndex}else{var s=d.getIndexByRow(o);d._currentRecord=h.currentViewData[s]}var v=d.getUpdatedRecords();-1!=s?(a=d.model.currentViewData[s],o=t.TreeGrid.getRowByIndex(d,d._currentIndex),r=o.clone(),r.find(".e-hide").remove(),d._dragTargetItem=a,u.targetRowIndex=s,u.targetRow=a,u.canDrop=!0,u.draggedRow=d._draggedRecord,u.draggedRowIndex=v.indexOf(d._draggedRecord),u.draggedRecords=d._draggedRecords,d._renderToolTip(p,r,u,n),u.targetRow&&u.targetRow.isSummaryRow?(d._draggedRecord.canDrop=!1,e(".e-dragintend").find(".e-icon").css({display:"none"}),e(".e-intendparent").find(".e-icon").css({display:"none"})):0==u.canDrop?d._draggedRecord.canDrop=!1:d._draggedRecord.canDrop=!0):d._draggedRecord&&d._dragMouseDown&&(a=null,o=t.TreeGrid.getRowByIndex(d,d._currentIndex),r=o.clone(),l=n.closest("tr"),u.targetRowIndex=null,u.targetRow=null,d._dragTargetItem=null,u.canDrop=!0,u.draggedRow=d._draggedRecord,u.draggedRowIndex=d._draggedRecord.index,u.dropPosition="invalidPosition",d._trigger("rowDrag",u),l.hasClass("e-footersummaryrow")||d._renderToolTip(p,r,u,n)),d._mouseout(p)}},_mouseupHandler:function(t){var i=this,s=i.model;"touchend"==t.type?i._off(i.element,"touchmove","#"+i._id+"e-gridcontent",i._touchScroll):i._off(i.element,"mousemove","#"+i._id+"e-gridcontent",i._touchScroll),i._off(e(document),"mouseup touchend",i._mouseupHandler),i._mouseDown=!1,i._isTouchEvent=!1,window.clearTimeout(i._dragTooltipTimer),s.allowDragAndDrop&&i._dragMouseDown&&i.dragMouseUp(t),s.contextMenuSettings.showContextMenu&&i._contextMenuHandler&&i._displayContextMenu?i._rightClick(t):i._contextMenuHandler=!1,i._displayContextMenu=!0,i._dy=i._dx=0},_performDragAndDrop:function(i,s,a,r,n){for(var o,l,d=this,h=d.model,c=(h.editSettings.editMode.toLowerCase(),0),u=h.selectedItems.length,p=d._draggedRecords.length,m=[],g={},f=0;f<p;f++){i=d._draggedRecord=d._draggedRecords[f];var _=h.flatRecords;r.previousParentItem=i.parentItem?e.extend({},i.parentItem):i.parentItem,t.isNullOrUndefined(i.parentItem)||(r.previousParentItem.childRecords=e.extend([],i.parentItem.childRecords),r.parentChildState=i.parentItem.hasChildRecords,r.parentExpandedState=i.parentItem.expanded),"rowIndexUpdate"!=r.requestType&&(n.targetRow=e.extend({},d._droppedRecord),n.targetRow.item=e.extend({},d._droppedRecord.item),n.targetRowIndex=h.updatedRecords.indexOf(s),n.draggedRow=e.extend({},d._draggedRecord),n.draggedRow.item=e.extend({},d._draggedRecord.item),n.draggedRowIndex=h.updatedRecords.indexOf(i)),r.previousItem=t.isNullOrUndefined(n)?e.extend({},d._draggedRecord):n.draggedRow,r.previousItemIndex=_.indexOf(d._draggedRecord),r.previousTarget=d._droppedRecord,r.previousTargetItemIndex=_.indexOf(d._droppedRecord),r.clonedTarget=e.extend({},d._droppedRecord),r.hasChildRecords=s.hasChildRecords,r.expanded=s.expanded,r.childIndex=r.previousParentItem?r.previousParentItem.childRecords.indexOf(i):0,r.previousLevel=i.level;if(1==s.dragState){if(d._updateDragStateTrue(i),1==d._insertAbove||1==d._insertBelow||1==d._insertAsChild){d.model.isEdit||d._isRowEdit||d._cancelSaveTools();for(var v=0;v<u;v++)d.clearSelection(h.selectedItems[v]);d._deleteDragRow();var b=_.indexOf(s);if(d._checkboxSelection&&h.selectionSettings.enableHierarchySelection&&i.parentItem&&d._updateParentSelection(i.parentItem),1==d._insertAbove){if(r.index=b,i.parentItem=_[b].parentItem,i.level=_[b].level,_.splice(b,0,i),h.updatedRecords.splice(b,0,i),h.isFromGantt&&h.ids.splice(b,0,i.taskId.toString()),i.hasChildRecords){var x=1;d._updateChildRecord(i,b),d._updateChildRecordLevel(i,x)}s.parentItem&&(o=s.parentItem.childRecords,l=o.indexOf(s),o.splice(l,0,i),d._updateHierarchyRowIndexData(r,o,l))}else if(1==d._insertBelow){if(r.index=b+1,s.hasChildRecords?(c=d.getChildCount(s,0),_.splice(b+c+1,0,i),h.updatedRecords.splice(b+c+1,0,i),h.isFromGantt&&h.ids.splice(b+c+1,0,i.taskId.toString())):(_.splice(b+1,0,i),h.updatedRecords.splice(b+1,0,i),h.isFromGantt&&h.ids.splice(b+1,0,i.taskId.toString())),i.parentItem=_[b].parentItem,i.level=_[b].level,i.hasChildRecords){var x=1;d._updateChildRecordLevel(i,x),d._updateChildRecord(i,b+c+1)}s.parentItem&&(o=s.parentItem.childRecords,l=o.indexOf(s)+1,o.splice(l,0,i),d._updateHierarchyRowIndexData(r,o,l))}else 1==d._insertAsChild&&(r.index=b+1,i.hasChildRecords?(_.splice(b+1,0,i),h.updatedRecords.splice(b+1,0,i),h.isFromGantt&&h.ids.splice(b+1,0,i.taskId.toString()),d._recordLevel(a,r),s.hasChildRecords&&(s.expanded=d._isLoadonDemand?s.isChildRetrieved:s.expanded),d._updateChildRecord(i,b+1,s.expanded)):(_.splice(b+1,0,i),h.updatedRecords.splice(b+1,0,i),h.isFromGantt&&h.ids.splice(b+1,0,i.taskId.toString()),d._recordLevel(a,r)))}if(d._checkboxSelection&&h.selectionSettings.enableHierarchySelection&&(i.parentItem&&d._updateParentSelection(i.parentItem),d.selectAllRows()),null==i.parentItem){var y=h.parentRecords,w=y.indexOf(d._droppedRecord);1==d._insertBelow?y.splice(w+1,0,i):1==d._insertAbove&&y.splice(w,0,i);var C=1==d._insertBelow?w+1:w;d._updateHierarchyRowIndexData(r,y,C)}}m.push(i)}return g.draggedRecords=m,g.draggedRecord=i,g.droppedRecord=s,g},_updatedMovedRow:function(e,i,s,a,r,n){var o=this,l=o.model;if(a.draggedRow=e,a.targetRow=i,a.droppedPosition=s,!l.isFromGantt&&n)for(var d=0;d<n.length;d++)o._draggedRecord=n[d],o._updateDataSource();else o._updateDataSource();if(l.showSummaryRow&&1==o._insertAsChild&&o._createSummaryRow(a),l.enableWBS){var h;if(e.parentItem)h=e.parentItem.childRecords;else{h=l.flatRecords.filter(function(e){return e&&0==e.level})}var c=h.indexOf(e),u=h.slice(c,h.length),p=e.parentItem?e.parentItem.WBS:null,m=c+1;o.reCalculateWBS(u,m,p)}if(l.isFromGantt){var g=l.flatRecords.indexOf(e),f=g<r?g:r;o.updateSerialNumber(f),l.enableSerialNumber&&("insertAsChild"==s&&(f-=1),o.updateSerialNumberPredecessors(f))}o.processBindings(a),l.enableAltRow&&l.currentViewData.length>0&&t.TreeGrid.updateAltRow(o,o.model.currentViewData[0],0,0)},_navigatePager:function(e){var i,s=this,a=s.model,r=a.pageSettings.pageSize;if(a.pageSettings.pageSizeMode==t.TreeGrid.PageSizeMode.Root){var n=s._getRootParent(a.updatedRecords[e]);e=a.parentRecords.indexOf(n)}i=Math.ceil((e+1)/r),s.gotoPage(i)},_getRootParent:function(e){var i=this;return t.isNullOrUndefined(e.parentItem)?e:i._getRootParent(e.parentItem)},moveRow:function(i,s,a){var r=this,n=r.model,o={},l={};if(r._cancelEditState(),"batchediting"==n.editSettings.editMode.toLowerCase()&&r._batchEditStarts)return!1;t.isNullOrUndefined(s)&&("above"==a||"child"==a?s=i-1:"below"==a&&(s=i+1));var d=n.updatedRecords[i],h=n.updatedRecords[s];if(h&&h.isSummaryRow&&(h=r._getNextRecord(s,n.updatedRecords,a)),t.isNullOrUndefined(d)||t.isNullOrUndefined(h)||1==d.isSummaryRow||1==h.isSummaryRow||!r.getExpandStatus(d)||!r.getExpandStatus(h))return!1;if(r._draggedRecord=d,r._droppedRecord=h,r._draggedRecords.push(d),o.currentRecord=d,o.targetRecord=h,o.currentRowIndex=i,o.targetRowIndex=s,o.dropPosition=a,o.requestType="rowIndexUpdate",r._moveRow=!0,!r._trigger("actionBegin",o)){if(r._validDrop(r._draggedRecords,h),1==h.dragState){if("above"==a)r._insertAbove=!0;else if("below"==a)r._insertBelow=!0;else{if("child"!=a||-1!=e.inArray(d,h.childRecords))return r._resetPrivateProperties(),!1;r._insertAsChild=!0}r._performDragAndDrop(d,h,i,o),r._updatedMovedRow(d,h,a,o),n.allowPaging&&r._navigatePager(n.updatedRecords.indexOf(d)),r.updateScrollBar(r.getUpdatedRecords().indexOf(d)),1==n.allowSelection&&(r.clearSelection(-1),r._selectDraggedRow(),r._cancelSaveTools()),l.currentRecord=d,l.targetRecord=h,l.currentRowIndex=n.updatedRecords.indexOf(d),l.targetRowIndex=n.updatedRecords.indexOf(h),l.dropPosition=o.dropPosition,l.requestType=o.requestType,r._trigger("actionComplete",l);var c={};return c.draggedRowIndex=l.currentRowIndex,c.targetRowIndex=l.targetRowIndex,c.requestType="dragAndDrop",r._updateAction(c),r._resetPrivateProperties(),!0}return h.dragState=!0,r._resetPrivateProperties(),!1}},dragMouseUp:function(i){var s,a,r,n,o,l,d={},h={},c={},u=this,p=u.model,m=u._draggedRecord,g=(u._currentRecord,u._getCoordinate(i)),f=p.flatRecords.indexOf(m);m.isDragged=!0,u._timerDragDown&&(u._timerDragDown=window.clearInterval(u._timerDragDown)),u._timerDragUp&&(u._timerDragUp=window.clearInterval(u._timerDragUp)),p.allowDragAndDrop&&("touchstart"==i.type?u._off(u.element,"touchmove",".e-treegridrows, .e-templatecell",u.dragToolTip):u._off(u.element,"mousemove",".e-gridcontent, .e-templatecell",u.dragToolTip),o=!!(t.isNullOrUndefined(m)||u._draggedRecords.length>1)||m.canDrop),window.clearTimeout(u._dragTooltipTimer),u._dragMouseDown=!1,e(u._dragmouseOverTooltip).remove(),u._dragTooltip=!1,s="touchend"==i.type?u._getElementByPosition(g.pageX,g.pageY):e(i.target),a=s.closest("tr"),u._isHierarchyFiltering&&e("#"+u._id+"e-gridcontent").css({cursor:"default"}),e(".e-dragintend").find(".e-icon").css({display:"none"}),e(".e-intendparent").find(".e-icon").css({display:"none"});var _=p.currentViewData[u.getIndexByRow(a)];if(1==this.cancelDrop&&!t.isNullOrUndefined(_)&&null==_.parentItem){var v=t.TreeGrid.getRowByIndex(this,p.updatedRecords.indexOf(_));_.expanded?v.find(".e-treegridexpand").css({display:"inline-block"}):v.find(".e-treegridcollapse").css({display:"inline-block"})}if(u._dragMouseLeave=!0,1!=s.closest("#"+u._id).length||1!=s.closest(".e-gridcontent").length||t.isNullOrUndefined(m)||0!=u._dropCancel)u._updateDragStateTrue(m);else{if(!p.allowDragAndDrop||!o)return u._updateDragStateTrue(m),u._resetPrivateProperties(),0;u._dragMouseLeave=!1;var b;if(0==a.length)if(y=u._indexOfLastRow,b=y,p.enableVirtualization)u._droppedRecord=p.currentViewData[p.currentViewData.length-1];else if(p.currentViewData[p.currentViewData.length-1].expanded)u._insertBelow=!0,u._droppedRecord=p.currentViewData[p.currentViewData.length-1];else{var x=u.getExpandedRecords(p.currentViewData);u._droppedRecord=x[x.length-1]}else{var y=u.getIndexByRow(a);u._droppedRecord=p.currentViewData[y],b=p.updatedRecords.indexOf(u._droppedRecord)}if(b!=u._currentIndex&&-1!=y&&0!=u._draggedRecords.length){if(1==u._droppedRecord.dragState){if(-1!=e.inArray(u._droppedRecord,u._draggedRecords)){var w=u._draggedRecords.indexOf(u._droppedRecord);u._draggedRecords.splice(w,1)}if("checkbox"==p.selectionSettings.selectionType&&1==p.selectionSettings.enableHierarchySelection){e.extend([],u._draggedRecords).filter(function(e){e.parentItem&&"checked"==e.parentItem.checkboxState&&u._draggedRecords.splice(u._draggedRecords.indexOf(e),1)})}}if(1==u._insertAbove&&u._draggedRecords.length>1&&u._draggedRecords.reverse(),u._insertAbove?l="insertAbove":u._insertBelow?l="insertBelow":u._insertAsChild&&(l="insertAsChild"),c.draggedRecords=u._draggedRecords,c.draggedRow=m,c.draggedRow.item=m.item,c.targetRow=u._droppedRecord,c.draggedRowIndex=p.updatedRecords.indexOf(m),c.targetRowIndex=p.updatedRecords.indexOf(u._droppedRecord),c.dropPosition=l,n=u._droppedRecord,!u._trigger("rowDropActionBegin",c)){e.extend([],u._draggedRecords).filter(function(e){0==e.canDrop&&(u._draggedRecords.splice(u._draggedRecords.indexOf(e),1),e.canDrop=!0),0==u._draggedRecords.length&&(n.dragState=!1)});var C=this._performDragAndDrop(m,n,y,d,h);if(m=C.draggedRecord,r=C.draggedRecords,n=C.droppedRecord,d.requestType="dragAndDrop",1!=n.dragState||u._isHierarchyFiltering)u._updateDragStateTrue(m);else{if(u._updatedMovedRow(m,n,l,d,f,r),p.isFromGantt||(h.draggedRecords=r),h.draggedRow=d.draggedRow,h.draggedRow.item=d.draggedRow.item,h.draggedRowIndex=p.updatedRecords.indexOf(m),h.targetRowIndex=p.updatedRecords.indexOf(n),h.requestType=l,d.isFromRevertDragging=!1,u._trigger("rowDragStop",h),h.cancel)d.isFromRevertDragging=!0,u._revertDragging(d);else{var S={};S.draggedRecords=r,S.draggedRowIndex=h.draggedRowIndex,S.targetRowIndex=h.targetRowIndex,S.requestType="dragAndDrop",u._updateAction(S)}if(p.allowSelection){if("row"==p.selectionSettings.selectionMode)if(!p.isFromGantt&&("checkbox"==p.selectionSettings.selectionType&&-1!=e.inArray(m,p.selectedItems)||"multiple"==p.selectionSettings.selectionType)&&p.selectedItems.length>1){var T=p.selectedItems.filter(function(e){if(1==e.isDragged)return e.isDragged=!1,e}),R=u.getUpdatedRecords().indexOf(T[0]);u.clearSelection(R),u._multiSelectCtrlRequest=!0,-1!=R&&p.allowSelection&&!u._rowSelectingEventTrigger(this.selectedRowIndex(),R)&&(u.selectRows(R),u._rowSelectedEventTrigger(R))}else u._selectDraggedRow(a);"cell"==p.selectionSettings.selectionMode&&u.updateScrollBar(p.updatedRecords.indexOf(u._draggedRecord))}}}}else u._updateDragStateTrue(m),u.model.isEdit||u._isRowEdit||u._cancelSaveTools()}t.isNullOrUndefined(u._currentRecord)||null==u._currentRecord.parentItem&&(a=p.allowPaging?t.TreeGrid.getRowByIndex(u,u.getUpdatedRecords().indexOf(u._currentRecord)):t.TreeGrid.getRowByIndex(u,p.updatedRecords.indexOf(u._currentRecord)),u._currentRecord.expanded?a.find(".e-treegridexpand").css({display:"inline-block"}):a.find(".e-treegridcollapse").css({display:"inline-block"})),p.showSummaryRow&&"dragAndDrop"==d.requestType&&1!=u._insertAsChild&&!u._isHierarchyFiltering&&u._updateSummaryRow(d),u._dropCancel=!1,t.isNullOrUndefined(n)||(n.dragState=!0),u._resetPrivateProperties(),t.isNullOrUndefined(m)||u.model.isEdit||u._isRowEdit||u._cancelSaveTools(),t.isNullOrUndefined(m)||1!=m.isDragged||(m.isDragged=!1)},dragColumn:function(i){var s=e(i.target),a=this,r=a._getCoordinate(i);if(a._posx=r.pageX,a._posy=r.pageY,i.ctrlKey||i.shiftKey||2==i.which||3==i.which)return!0;var n,o=a.model,l=o.columns,d={};if("col-resize"!=s.css("cursor")&&s.closest(".e-headercelldiv")&&!s.hasClass("e-columnmenu-icon")){var h=s.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname");if(t.isNullOrUndefined(h)&&t.isNullOrUndefined(this.getColumnByField(h)))return;if(a._saveEditedElements(),s.hasClass("e-checkbox"))return!1;if(a._draggedColumn=this.getColumnByField(h),n=l.indexOf(a._draggedColumn),d.draggedColumnIndex=n,d.draggedColumn=a._draggedColumn,d.requestType="columnDragStart",t.isNullOrUndefined(a._draggedColumn.headerTemplateID)?a._draggedColumnTemplate=null:a._draggedColumnTemplate=s.closest(".e-headertemplate"),!t.isNullOrUndefined(a._draggedColumn.nonColumn))return;if(a._trigger("columnDragStart",d),d.cancel)return;"cell"==o.selectionSettings.selectionMode&&a.clearSelection(),a._headerDragStatus="mousedown",a._dragMouseDown=!0,a._mouseDragged=!1;var c=a.getOffsetRect(a.element[0]);a._gridLeft=c.left,a._gridTop=c.top,a._touchstart=!0,"touchstart"!=i.type&&a._on(a.element,"mousemove",a.dragColumnToolTip)}},dragColumnToolTip:function(i){var s,a=this,r=a.model,n={},o=r.columns,l={},d=a._getCoordinate(i),h=d.pageX,c=d.pageY
;if(a._touchstart)return void(a._touchstart=!1);if("touchmove"==i.type?(i.preventDefault(),s=a._getElementByPosition(d.pageX,d.pageY)):s=e(i.target),a._headerDragStatus.length>0&&1==r.allowColumnReordering){"cell"==r.selectionSettings.selectionMode&&"mousemove"!=a._headerDragStatus&&a.clearSelection();var u=s.closest(".e-headercell"),p=u.find(".e-headercelldiv").attr("data-ej-mappingname"),m=a._gridLeft+a._gridWidth-10,g=a._gridHeight+a._gridTop,f=h,_=c;if(!t.isNullOrUndefined(a._dragmouseOverTooltip)){var v=a._dragmouseOverTooltip.width/2,b=a._dragmouseOverTooltip.height+5;f-v<a._gridLeft?f=a._gridLeft:f+v>m?f=m-2*v-4:f-=v,_+b>g&&(_=g-b)}if(t.isNullOrUndefined(p)||t.isNullOrUndefined(this.getColumnByField(p)))t.isNullOrUndefined(a._dragmouseOverTooltip)||e(a._dragmouseOverTooltip).css({top:_+"px",left:f+"px"});else{var x=this.getColumnByField(p);if(a._currentIndex=o.indexOf(x),n.targetColumnIndex=a._currentIndex,n.draggedColumnIndex=o.indexOf(a._draggedColumn),n.draggedColumn=a._draggedColumn,n.targetColumn=x,n.requestType="columnDrag",n.canDrop=!0,a._trigger("columnDrag",n),n.cancel)return;if(n.direction=n.draggedColumnIndex>=n.targetColumnIndex?"left":"right",l.pos=a.getOffsetRect(u[0]),l.height=e(u).height(),l.width=e(u).outerWidth(),l.pos.top=a.getOffsetRect(u.closest(".e-gridheader")[0]).top,l.display="block","left"==n.direction&&a._gridLeft>l.pos.left?l.pos.left=a._gridLeft:"right"==n.direction&&m<l.pos.left+l.width?l.pos.left=m-10:l.pos.left=n.draggedColumnIndex>n.targetColumnIndex?l.pos.left-2:l.pos.left+l.width-2,n.column=l,a._autoHscroll(h,c,n),n.draggedColumnIndex!=n.targetColumnIndex&&(a._displayContextMenu=!1),(n.draggedColumnIndex==n.targetColumnIndex||!t.isNullOrUndefined(n.targetColumn.nonColumn)||l.pos.left-8>a._gridWidth+a._gridLeft)&&(l.display="none"),"mousemove"==a._headerDragStatus||a._dragTooltip)e(a._reordervline).css({height:a._reordervline.height,width:0,"border-width":0,position:"absolute",top:l.pos.top+"px",left:l.pos.left+"px","border-left-width":"3px","border-style":"solid",display:l.display}),e(a._dragmouseOverTooltip).css({top:_+"px",left:f+"px"});else{var y=a._gridHeight-1;a.model.toolbarSettings.showToolbar&&(y-=t.isNullOrUndefined(e("#"+a._id+"_toolbarItems").outerHeight())?0:e("#"+a._id+"_toolbarItems").outerHeight()),y-=a.getScrollElement().ejScroller("isHScroll")?18:0;var w=t.buildTag("div",a._draggedColumn.headerText,{"margin-top":"5px"});t.isNullOrUndefined(a._draggedColumnTemplate)||t.isNullOrUndefined(a._draggedColumn)||t.isNullOrUndefined(a._draggedColumn.headerTemplateID)||(w[0].innerHTML=a._draggedColumnTemplate[0].innerHTML),a._dragmouseOverTooltip=t.buildTag("div.e-tooltipgantt e-js#columnreordertooltip"+a._id,w,{top:c+10+"px",left:h-57+"px",position:"absolute","z-index":a.getMaxZIndex()+1},{}),r.cssClass&&a._dragmouseOverTooltip.addClass(r.cssClass),a._reordervline=t.buildTag("div.e-vline e-js#reorderline"+a._id,{height:y,width:0,"border-width":0,position:"absolute",top:l.pos.top+"px",left:l.pos.left+"px","border-left-width":"3px","border-style":"solid",display:l.display}),r.cssClass&&a._reordervline.addClass(r.cssClass),e(document.body).append(a._dragmouseOverTooltip),e(document.body).append(a._reordervline),e(a._dragmouseOverTooltip).addClass("e-headertooltip"),e(a._reordervline).addClass("e-headervline"),a._dragmouseOverTooltip.width=e(a._dragmouseOverTooltip).outerWidth(),a._dragmouseOverTooltip.height=e(a._dragmouseOverTooltip).outerHeight(),a._reordervline.height="auto"==r.sizeSettings.height?e("#"+a._id+"e-gridcontent").height()+e("#"+a._id+"e-gridheader").height():y,a._dragTooltip=!0}a._headerDragStatus="mousemove"}}},reorderColumn:function(e,i){var s,a,r,n,o,l,d,h=this,c=h.model,u=c.columns;if(c.showTotalSummary&&c.collapsibleTotalSummary&&(l=u[h._summaryColumnIndex]),o=u[c.treeColumnIndex],s=h.getColumnByField(e),a=u.indexOf(s),n=h.columnsWidthCollection[a],r=u[i],!(t.isNullOrUndefined(s)||t.isNullOrUndefined(r)||r&&r.nonColumn)){if(h._frozenColumnsLength>0)if(d=this._getFrozenColumnWidth(),h._frozenColumnsLength<=a&&h._frozenColumnsLength>i&&-1==h._frozenColumns.indexOf(s)){if((d+=this.columnsWidthCollection[a]+18)>this._gridWidth)return!1;s.isFrozen=!0,h._frozenColumns.splice(i,0,s)}else h._frozenColumnsLength>a&&h._frozenColumnsLength<=i&&-1!=h._frozenColumns.indexOf(s)&&(s.isFrozen=!1,h._frozenColumns.splice(a,1),h._checkboxSelection&&1==h._frozenColumns.length&&h._frozenColumns[0].nonColumn&&(h._frozenColumns[0].isFrozen=!1,h._frozenColumns.splice(0,1)));u.splice(a,1),h.columnsWidthCollection.splice(a,1),u.splice(i,0,s),h.columnsWidthCollection.splice(i,0,n),c.treeColumnIndex=u.indexOf(o),c.showTotalSummary&&c.collapsibleTotalSummary&&(h._summaryColumnIndex=u.indexOf(l)),h._refreshFrozenColumns(),h._updateWrapRowHeights(null,"virtualRefresh")}},_refreshStackedHeader:function(){var t=this,i=t.model;if(i.showStackedHeader){for(var s=i.stackedHeaderRows,a=0;a<s.length;a++)if(0!=t._frozenColumnsLength){var r=e(t.getHeaderContent().find(".e-frozenheaderdiv")),n=e(t.getHeaderContent().find(".e-movableheader")),o=t._createStackedRow(s[a],!0),l=t._createStackedRow(s[a],!1);e(r.find("tr.e-stackedHeaderRow")[a]).replaceWith(o),e(n.find("tr.e-stackedHeaderRow")[a]).replaceWith(l)}else{var d=t._createStackedRow(s[a],!1);t.getHeaderTable().find("tr.e-stackedHeaderRow")[a]?e(t.getHeaderTable().find("tr.e-stackedHeaderRow")[a]).replaceWith(d):d.insertBefore(t.getHeaderTable().find("tr.e-columnheader:last"))}({}).requestType="refresh",t._updateScrollCss()}},_autoHscroll:function(e,t,i){var s,a,r=this,n=r.model,o=(n.columns,0),l=(r.columnsWidthCollection,r.getScrollElement());a=l.ejScroller("isHScroll"),s=a?l.find(".e-content").get(0).scrollWidth:0,r._viewPortWidth=l.find(".e-content").width(),r._frozenColumnsLength>0&&(o=this._getFrozenColumnWidth());var d=Math.round(10*(r._gridLeft+r._gridWidth)/100)+18,h=Math.round(10*r._gridLeft/100)+18,c=0;r._gridLeft+r._gridWidth-d<e?r._timerDragDown||(r._timerDragDown=window.setInterval(function(){s>r._scrollLeft+r._viewPortWidth&&(c=r._scrollLeft,c+=50,r.getScrollElement().ejScroller("scrollX",c,!0))},300)):r._timerDragDown&&(r._timerDragDown=window.clearInterval(r._timerDragDown)),e<r._gridLeft+o+h&&e>r._gridLeft+o&&0!=r._scrollLeft&&r._scrollLeft>0?r._timerDragUp||(r._timerDragUp=window.setInterval(function(){r._scrollLeft>0&&(c=r._scrollLeft,c-=50,c<0&&(c=0),r.getScrollElement().ejScroller("scrollX",c,!0))},300)):r._timerDragUp&&(r._timerDragUp=window.clearInterval(r._timerDragUp))},_resetPrivateProperties:function(){this._timerDragDown&&(this._timerDragDown=window.clearInterval(this._timerDragDown)),this._timerDragUp&&(this._timerDragUp=window.clearInterval(this._timerDragUp));var i=this,s=i.model;i.cancelDrop=!1,i._draggedRecord=null,i._draggedRecords=[],i._dragMouseDown=!1,i._timerDragDown=null,i._timerDragUp=null,i._childItem=!1,i._dragMouseLeave=!1,i._moveRow=!1,i._currentRecord=null,i._currentIndex=null,i._droppedRecord=null,i._insertAsChild=!1,i._insertAbove=!1,i._insertBelow=!1,s.allowDragAndDrop&&s.enableVirtualization&&("chrome"==t.browserInfo().name||t.isTouchDevice())&&(i._dummyElement&&e(i._draggedElement).remove(),i._dummyElement=!1,i._draggedElement=null),i._dragTooltipTimer=null,i._dragColumnTooltipTimer=null,i._dragmouseOverTooltip=null},_selectDraggedRow:function(e){var t=this,i=t.model,s=t.getUpdatedRecords(),a=s.indexOf(t._draggedRecord);-1!=a&&(t._focusTreeGridElement(),i.allowSelection&&"row"==i.selectionSettings.selectionMode&&!t._rowSelectingEventTrigger(this.selectedRowIndex(),a)&&(t.selectRows(a),t._rowSelectedEventTrigger(a)))},_addChildItem:function(e){var i,s=this,a=0;a=e.childRecords.length;for(var r=0;r<a;r++)i=e.childRecords[r],s.dataSource()instanceof t.DataManager?s.dataSource().dataSource.offline&&s.dataSource().dataSource.json&&(s.dataSource().dataSource.json.push(i.item),i.hasChildRecords&&s._addChildItem(i)):(s.dataSource().push(i.item),i.hasChildRecords&&s._addChildItem(i))},_updateDataSource:function(){var e,i,s=this,a=s.model,r=s._draggedRecord,n=s._droppedRecord;if(s.dataSource()instanceof t.DataManager?s.dataSource().dataSource.offline&&s.dataSource().dataSource.json&&(e=s.dataSource().dataSource.json):e=s.dataSource(),e&&!n.parentItem)i=e.indexOf(n.item),s._insertAbove?a.parentIdMapping||e.splice(i,0,r.item):s._insertBelow&&(a.parentIdMapping||e.splice(i+1,0,r.item));else if(!a.parentIdMapping&&n.parentItem&&(s._insertAbove||s._insertBelow)){n.parentItem.item[s.model.childMapping]=[];for(var o=n.parentItem.childRecords,l=0;l<o.length;l++)n.parentItem.item[s.model.childMapping].splice(l,0,o[l].item)}a.parentIdMapping&&(r.parentItem?s._insertAbove||s._insertBelow?1==a.isFromGantt?r.item[a.parentIdMapping]=n.item[s.model.parentIdMapping]:(r[a.parentIdMapping]=n[s.model.parentIdMapping],r.item[a.parentIdMapping]=n[s.model.parentIdMapping]):1==a.isFromGantt?r.item[a.parentIdMapping]=n.item[s.model.idMapping]:(r[a.parentIdMapping]=n[s.model.idMapping],r.item[a.parentIdMapping]=n[s.model.idMapping]):(r.item[a.parentIdMapping]=null,r[a.parentIdMapping]=null),s.dataSource()instanceof t.DataManager?s.dataSource().dataSource.offline&&s.dataSource().dataSource.json&&s.dataSource().dataSource.json.push(r.item):((s._insertAbove||s._insertBelow||s._insertAsChild)&&s.dataSource().push(r.item),r.hasChildRecords&&s._addChildItem(r)))},_deleteDragRow:function(e){var i,s,a=this,r=a.model,n={},o=a.getUpdatedRecords(),l=r.flatRecords;-1!=o.indexOf(a._draggedRecord)?(i=o.indexOf(a._draggedRecord),s=o[i]):(i=l.indexOf(a._draggedRecord),s=l[i]),n.tr=e,n.data=s,n.requestType=t.TreeGrid.Actions.Delete,n.isDragAndDropDelete=!0,a._removeRecords(n),a._previousIndex=-1},_revertDragging:function(i){var s=this,a=s.model,r=a.flatRecords;if(s._draggedRecord=i.draggedRow,s._deleteDragRow(),s._draggedRecord.hasChildRecords){r.splice(i.previousItemIndex,0,s._draggedRecord),a.isFromGantt&&a.ids.splice(i.previousItemIndex,0,s._draggedRecord.taskId.toString()),t.isNullOrUndefined(r[i.previousItemIndex].parentItem)||(r[i.previousItemIndex].parentItem=i.previousParentItem,t.isNullOrUndefined(i.previousParentItem)||r[i.previousItemIndex].parentItem.childRecords.splice(i.childIndex,0,s._draggedRecord));var n=a.flatRecords.indexOf(s._draggedRecord);s._updateChildRecord(s._draggedRecord,n,i.previousItem.index),s._draggedRecord.level=i.previousLevel,s._updateChildRecordLevel(s._draggedRecord,i.previousLevel)}else r.splice(i.previousItemIndex,0,s._draggedRecord),a.isFromGantt&&a.ids.splice(i.previousItemIndex,0,s._draggedRecord.taskId.toString()),r[i.previousItemIndex].parentItem=i.previousItem.parentItem,t.isNullOrUndefined(i.previousParentItem)||(r[i.previousItemIndex].parentItem.childRecords.splice(i.childIndex,0,s._draggedRecord),r[i.previousItemIndex].parentItem.hasChildRecords=!0,r[i.previousItemIndex].parentItem.hasFilteredChildRecords=!0,r[i.previousItemIndex].parentItem.expanded=!0),r[i.previousItemIndex].level=i.previousLevel;if(a.parentIdMapping&&(r[i.previousItemIndex][a.parentIdMapping]=i.previousItem[a.parentIdMapping],r[i.previousItemIndex].item[a.parentIdMapping]=i.previousItem[a.parentIdMapping]),t.isNullOrUndefined(i.previousItem.parentItem)||(i.previousItem.parentItem.hasChildRecords=i.parentChildState,i.previousItem.parentItem.expanded=i.parentExpandedState,a.childMapping&&i.previousItem.parentItem.item[s.model.childMapping]&&i.previousItem.parentItem.item[s.model.childMapping].splice(i.childIndex,0,i.previousItem.item)),a.isFromGantt)if(r[i.previousTargetItemIndex]=i.previousTarget,1==i.previousTarget.isAutoSchedule){i.previousTarget.startDate=i.previousTarget.item[i.model.startDateMapping]=new Date(i.clonedTarget.startDate),i.previousTarget.endDate=new Date(i.clonedTarget.endDate),i.previousTarget.duration=i.clonedTarget.duration,i.previousTarget.status=i.clonedTarget.status,i.model.endDateMapping&&(i.previousTarget.item[i.model.endDateMapping]=new Date(i.clonedTarget.endDate)),i.model.progressMapping&&(i.previousTarget.item[i.model.progressMapping]=i.clonedTarget.status),i.model.durationMapping&&(i.previousTarget.item[i.model.durationMapping]=i.clonedTarget.duration),i.previousTarget.expanded=i.clonedTarget.expanded;var o=e("#"+s._id.replace("ejTreeGrid","")).data("ejGantt");o._updateTargetGanttRecord(i.previousTarget)}else{i.previousTarget.manualStartDate=new Date(i.clonedTarget.manualStartDate),i.previousTarget.manualEndDate=new Date(i.clonedTarget.manualEndDate),i.previousTarget.manualDuration=i.clonedTarget.manualDuration,i.previousTarget.status=i.clonedTarget.status,i.model.progressMapping&&(i.previousTarget.item[i.model.progressMapping]=i.clonedTarget.status),i.previousTarget.expanded=i.clonedTarget.expanded;var o=e("#"+s._id.replace("ejTreeGrid","")).data("ejGantt");o._updateGanttRecord(i.previousTarget)}if(a.enableWBS){var l,d=s._draggedRecord;if(d.parentItem)l=d.parentItem.childRecords;else{l=a.flatRecords.filter(function(e){return e&&0==e.level})}var h=l.indexOf(d),c=l.slice(h,l.length),u=d.parentItem?d.parentItem.WBS:null,p=h+1;s.reCalculateWBS(c,p,u)}s.processBindings(i),a.currentViewData.length>0&&t.TreeGrid.updateAltRow(s,a.currentViewData[0],0,0)},_updateChildRecord:function(e,t,i){var s,a,r=this,n=r.model;if(!e.hasChildRecords)return 0;a=e.childRecords.length;for(var o=0;o<a;o++)s=e.childRecords[o],t++,n.flatRecords.splice(t,0,s),n.updatedRecords.splice(t,0,s),n.isFromGantt&&n.ids.splice(t,0,s.taskId.toString()),s.hasChildRecords&&(t=r._updateChildRecord(s,t));return t},_recordLevel:function(i,s){var a=this,r=a.model,n=a._draggedRecord,o=a._droppedRecord,l=a.model.childMapping;if(o.hasChildRecords||(o.hasChildRecords=!0,o.hasFilteredChildRecords=!0,a._isLoadonDemand&&(o.isChildRetrieved=!0),(t.util.isNullOrUndefined(o.childRecords)||e.isEmptyObject(o.childRecords))&&(o.childRecords=[],r.parentIdMapping||(o.item[l]=[]))),a._insertAsChild){n.parentItem=o,o.childRecords.splice(0,0,n);var d=o.childRecords;if(a._updateHierarchyRowIndexData(s,d,0),t.isNullOrUndefined(n)||t.isNullOrUndefined(o.item[l])||r.parentIdMapping||o.item[l].splice(0,0,n.item),n.hasChildRecords){n.level=o.level+1,a._updateChildRecordLevel(n,1)}else n.level=o.level+1;!o.expanded&&o.hasChildRecords&&r.isFromGantt&&!r.enableVirtualization&&a.updateExpandStatus(o,!0),o.expanded=!0,a._isLoadonDemand&&!o.isChildRetrieved&&(o.expanded=!1),a._parentRecords.push(o)}},_updateChildRecordLevel:function(e,t){var i,s=this,a=0;if(t++,!e.hasChildRecords)return 0;a=e.childRecords.length;for(var r=0;r<a;r++)i=e.childRecords[r],i.level=e.parentItem?e.parentItem.level+t:e.level+1,i.hasChildRecords&&(t--,t=s._updateChildRecordLevel(i,t));return t},_filterBarClose:function(t){var i=e(t.target);if("click"==t.type&&i.hasClass("e-cancel")){var s=i.prev();s.focus().val(""),s.prop("checked",!1),s.trigger("keyup"),t.stopPropagation()}"focusin"==t.type&&(i=e(t.target).next(),this.getHeaderTable().find(".e-cancel").addClass("e-hide"),i.removeClass("e-hide"))},_checkIdenticalValue:function(e,t){for(var i,s=this,a=s.model,r=a.filterSettings.filteredColumns,n=r.length,o=0;o<n;o++)if(r[o].value===e&&r[o].field==t.field){i=!0;break}return i},_filterBarHandler:function(i){var s,a,r=this,n=r.model;if(r.model.isEdit?r.cancelEditCell():r._isRowEdit&&r.cancelRowEditCell(),r._isRefreshAddedRecord=!1,r.clearAllSelection(),s=e(void 0==i.target?i:i.target),this.model.allowFiltering){r.model.columns;r._cellEditingDetails;var o;r._queryManagar.queries[0];o=s.hasClass("e-ddl")?s.find("input.e-field"):s,r._fieldName=o[0].id.replace(r._id+"_","").replace("_filterbarcell",""),this._currentFilterColumn=t.TreeGrid.getColumnByField(n.columns,r._fieldName),r._fieldName=this._currentFilterColumn.field;var l,d=this._currentFilterColumn;if(s.hasClass("e-checkbox"))r._filterString=s[0].checked;else if(s.hasClass("e-ddl")){s=s.find("input.e-dropdownlist");var h=e("#"+s[0].id).data("ejDropDownList");if(-1==h.selectedIndexValue||r._checkIdenticalValue(h._selectedValue,this._currentFilterColumn))return!0;r._filterString=h._selectedValue}else if(s.hasClass("e-dropdownlist")){var c=e("#"+s[0].id).data("ejDropDownList");if(-1==c.selectedIndexValue||r._checkIdenticalValue(c._selectedValue,this._currentFilterColumn))return!0;c._selectedValue==r._dropDownListClearText?r._filterString="":r._filterString=c._selectedValue}else if(s.hasClass("e-numerictextbox")){var u=e("#"+s[0].id).data("ejNumericTextbox"),p=null==u.model.value?"":u.model.value.toString();if(t.isNullOrUndefined(i.type)){var m=n.filterSettings.filteredColumns,g=m.length,f=!1;""==p&&0==g&&(f=!0);for(var _=0;_<g;_++){var v=t.isNullOrUndefined(m[_].value)?"":m[_].value.toString();if(v==p&&m[_].field==this._currentFilterColumn.field){f=!0;break}}if(f)return!0}r._filterString=s.closest("input").val()}else r._filterString=s.closest("input").val();if("datepicker"!=this._currentFilterColumn.filterEditType&&"datetimepicker"!=this._currentFilterColumn.filterEditType||""==r._filterString||r._filterString&&(l=d.format?r._getDateFormat(this._currentFilterColumn.format):r.model.dateFormat,t.isNullOrUndefined(t.parseDate(r._filterString,l,n.locale))?r._filterString="":r._filterString=t.parseDate(r._filterString,l,n.locale)),""==r._filterString&&(a=n.filterSettings.filteredColumns.filter(function(e){if(e.field===r._fieldName)return!0}),!a.length))return r._resizeFilteringElements(),!0;r._validateFilterValue(r._filterString),r._batchEditStarts&&(r._batchTempDetails.filterTarget=s),r.filterColumn(r._fieldName,this._operator,r._filterString,this._predicate),r._storePreviousFilteredValue(r._fieldName,r._filterString,this._operator),r.model.currentViewData.length>0&&r.model.enableAltRow&&t.TreeGrid.updateAltRow(r,r.model.currentViewData[0],0,0),r._cancelSaveTools()}},_validateFilterValue:function(e){var i=this;switch(this._predicate="and",this._currentFilterColumn.filterEditType){case"numericedit":this._operator=t.FilterOperators.equal;break;case"datepicker":this._operator=t.FilterOperators.equal;var s;s=""==this._currentFilterColumn.format||void 0==this._currentFilterColumn.format?t.preferredCulture().calendar.patterns.d:this._currentFilterColumn.format.split(":")[1].replace("}",""),""!=this._currentFilterbarValue&&(this._currentFilterbarValue=t.format(e,s,this.model.locale));break;case"datetimepicker":this._operator=t.FilterOperators.equal;var s;s=""==this._currentFilterColumn.format||void 0==this._currentFilterColumn.format?t.preferredCulture().calendar.patterns.f:this._currentFilterColumn.format.split(":")[1].replace("}",""),""!=this._currentFilterbarValue&&(this._currentFilterbarValue=t.format(e,s,this.model.locale));break;case"stringedit":this._operator=t.FilterOperators.startsWith;break;case"dropdownedit":var a=this._currentFilterColumn;"dropdownedit"==a.editType&&a.editParams&&a.editParams.showCheckbox?this._operator=t.FilterOperators.contains:this._operator=t.FilterOperators.equal;break;case"booleanedit":1==i._filterString||"1"==i._filterString?i._filterString=!0:"false"!=i._filterString&&"0"!=i._filterString||(i._filterString=!1),this._operator=t.FilterOperators.equal;break;default:this._operator=t.FilterOperators.equal}},_getStackedColumnByTarget:function(e){var i=(e.get(0)||{}).className,s=/e-row([0-9])-column([0-9])/.exec(i),a=s[1],r=s[2],n=[a,"stackedHeaderColumns",r].join(".");return t.getObject(n,this.model.stackedHeaderRows)},_headermouseHover:function(i){i.preventDefault();var s=this,a=s.model;if(a.showGridCellTooltip&&!s._dragTooltip){var r,n,o,l,d,h,c,u,p,m,g=e(i.target),f=0,_=0,v=g.closest("div.e-headercelldiv");if(s._headerMouseLeave(),i||(i=window.event),i.originalEvent.pageX||i.originalEvent.pageY?(f=i.originalEvent.pageX,_=i.originalEvent.pageY):(i.originalEvent.clientX||i.originalEvent.clientY)&&(f=i.originalEvent.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,_=i.originalEvent.clientY+document.body.scrollTop+document.documentElement.scrollTop),o=v.clone(),o.find(".e-ascending").length>0?o.find(".e-ascending").remove():o.find(".e-descending").length>0&&o.find(".e-descending").remove(),o.find(".e-chkbox-wrap").remove(),o=g.closest(".e-headercell").hasClass("e-headertemplate")?o.clone():o.find("span").clone(),g.hasClass("e-stackedtooltip"))if(m=s._getStackedColumnByTarget(g),t.isNullOrUndefined(m.tooltip)||"#"===m.tooltip.slice(0,1)){var b=e(m.tooltip).clone();o=b.html()}else o=m.tooltip;r=t.buildTag("table.e-tooltiptable e-zerospace","",{padding:"0"}),n=t.buildTag("tbody",o,{},{}),r.append(n);var x=e(o).text().replace(/[ \t\r]+/g,"").length>0;if(n)if(p=g.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname"),(u=this.getColumnByField(p))&&(t.isNullOrUndefined(u.headerTooltip)||""==u.headerTooltip)&&a.showGridCellTooltip&&x||g.hasClass("e-stackedtooltip"))s._headerMouseOverTooltip=t.buildTag("div.e-tooltipgantt e-js#headertooltip"+s._id,r,{top:_+10+"px",left:f+15+"px",position:"absolute","z-index":s.getMaxZIndex()+1,padding:"0","border-radius":"3px"},{}),a.cssClass&&s._headerMouseOverTooltip.addClass(a.cssClass),s._headerTooltipTimer=setTimeout(function(){e(document.body).append(s._headerMouseOverTooltip);var t=e("#"+s._id.replace("ejTreeGrid","")),i=s.getOffsetRect(t[0]);h=e(t).width()+i.left,c=e(t).height()+i.top,l=e(s._headerMouseOverTooltip).width(),d=e(s._headerMouseOverTooltip).height(),f+l+15>=h&&(f=f-l-15),_+d+10>=c&&(_=_-d-10),e(s._headerMouseOverTooltip).css({top:_,left:f})},700);else if(u&&!t.isNullOrUndefined(u.headerTooltip)&&""!=u.headerTooltip){var y={};y.column=u,s._createColumnTooltipTemplate(u.headerTooltip),s._headerMouseOverTooltip=t.buildTag("div.e-tooltipgantt e-js#headertooltip"+s._id,"",{top:_+10+"px",left:f+15+"px",position:"absolute","z-index":s.getMaxZIndex()+1,padding:"0","border-radius":"3px"},{}),a.cssClass&&s._headerMouseOverTooltip.addClass(a.cssClass);var n=t.buildTag("tbody",e.render[s._id+"columnTooltipTemplate"](y),{},{});s._headerMouseOverTooltip[0].innerHTML="<table>"+n[0].innerHTML+"</table>";var x=e(n).text().replace(/[ \t\r]+/g,"").length>0;x&&(s._headerTooltipTimer=setTimeout(function(){if(e(document.body).append(s._headerMouseOverTooltip),a.isFromGantt){var t=e("#"+s._id.replace("ejTreeGrid","")),i=s.getOffsetRect(t[0]);h=e(t).width()+i.left,c=e(t).height()+i.top}else{var i=s.getOffsetRect(s.element[0]);h=e(s.element).width()+i.left,c=e(s.element).height()+i.top}l=e(s._headerMouseOverTooltip).width(),d=e(s._headerMouseOverTooltip).height(),f+l+15>=h&&(f=f-l-15),_+d+10>=c&&(_=_-d-10),e(s._headerMouseOverTooltip).css({top:_,left:f})},700))}}},_mouseHover:function(i){var s=this,a=s.model;if(a.showGridCellTooltip&&1!=this._dragMouseDown){var r,n,o,l,d,h,c,u,p=e(i.target),m=0,g=0,f=(s.getRows(),p.closest("tr")),_=p.closest("td.e-rowcell"),v=this.getIndexByRow(f),b=a.currentViewData[v],x=a.columns;if(f.hasClass("e-footersummaryrow")&&(v=s._getFooterRows().index(f),b=s._footerSummaryRecord[v]),v>=0||f.hasClass("e-footersummaryrow")){var y=s.getCellIndex(i);if(s._cellMouseLeave(),u=x[y],i||(i=window.event),i.originalEvent.pageX||i.originalEvent.pageY?(m=i.originalEvent.pageX,g=i.originalEvent.pageY):(i.originalEvent.clientX||i.originalEvent.clientY)&&(m=i.originalEvent.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,g=i.originalEvent.clientY+document.body.scrollTop+document.documentElement.scrollTop),b||f.hasClass("e-footersummaryrow")){if(y!=a.treeColumnIndex){var w=_.clone();w.find(".e-chkbox-wrap").remove(),o=w.children().length?w.children().clone():w.clone()}else _.find(".e-cell").length>0?(o=_.find(".e-cell").clone(),o.find(".e-chkbox-wrap").remove()):_.hasClass("e-summaryrowcell")&&(_.find(".e-summarytitle").length>0?o=_.find(".e-summarytitle").clone():(o=_.clone(),e(o).css({cssText:"padding-left: 0px;"})));o&&o.addClass("e-treegrid-textWrap"),r=t.buildTag("table.e-tooltiptable e-zerospace","",{padding:"0"}),(!a.showGridExpandCellTooltip||a.showGridExpandCellTooltip&&y==s.model.treeColumnIndex)&&(n=t.buildTag("tbody",o,{},{})),r.append(n);var C=e(o).text().replace(/[ \t\r]+/g,"").length>0;if(n&&0==e(_).find("#"+s._id+"EditForm").length&&!s._isCommandColumn(u))if(!a.cellTooltipTemplate&&(t.isNullOrUndefined(u.tooltip)||""==u.tooltip)||a.cellTooltipTemplate&&!t.isNullOrUndefined(u.tooltip)&&""==u.tooltip){if(!a.showGridExpandCellTooltip&&C||a.showGridExpandCellTooltip&&C){e("#"+this._id+"detailscellwrapper").length;s._mouseOverTooltip=t.buildTag("div.e-tooltipgantt e-js#tooltipgantt"+s._id,r,{top:g+10+"px",left:"auto",position:"absolute","z-index":s.getMaxZIndex()+1,padding:"0","border-radius":"3px"},{}),a.cssClass&&s._mouseOverTooltip.addClass(a.cssClass),s._tooltipTimer=setTimeout(function(){if(e(document.body).append(s._mouseOverTooltip),a.isFromGantt){var t=e("#"+s._id.replace("ejTreeGrid","")),i=s.getOffsetRect(t[0]);h=e(t).width()+i.left,c=e(t).height()+i.top}else{var i=s.getOffsetRect(s.element[0]);h=e(s.element).width()+i.left,c=e(s.element).height()+i.top}l=e(s._mouseOverTooltip).width(),d=e(s._mouseOverTooltip).height();var r=e(window).width(),n=i.left+m,o=r-(i.left+m);m+l+15>=h&&n>o&&(m=h-l-15)<0&&(m=i.left),g+d+10>=c&&(g=g-d-10),e(s._mouseOverTooltip).css({top:g,left:m})},700)}}else if(a.cellTooltipTemplate||!t.isNullOrUndefined(u.tooltip)&&""!=u.tooltip){var S=(e("#"+this._id+"detailscellwrapper").length,{});S.record=b,S.column=x[y],t.isNullOrUndefined(u.tooltip)||s._createColumnTooltipTemplate(u.tooltip),s._mouseOverTooltip=t.buildTag("div.e-tooltipgantt e-js#tooltipgantt"+s._id,"",{top:g+10+"px",left:m+15+"px",position:"absolute","z-index":s.getMaxZIndex()+1,padding:"0","border-radius":"3px"},{}),a.cssClass&&s._mouseOverTooltip.addClass(a.cssClass),s.tooltipState="Template";var n;n=t.isNullOrUndefined(u.tooltip)?t.buildTag("tbody",e.render[s._id+"tooltipTemplate"](S),{},{}):t.buildTag("tbody",e.render[s._id+"columnTooltipTemplate"](S),{},{}),s._mouseOverTooltip[0].innerHTML="<table>"+n[0].innerHTML+"</table>";var C=e(n).text().replace(/[ \t\r\n]+/g,"").length>0;C&&(s._tooltipTimer=setTimeout(function(){if(e(document.body).append(s._mouseOverTooltip),a.isFromGantt){var t=e("#"+s._id.replace("ejTreeGrid","")),i=s.getOffsetRect(t[0]);h=e(t).width()+i.left,c=e(t).height()+i.top}else{var i=s.getOffsetRect(s.element[0]);h=e(s.element).width()+i.left,c=e(s.element).height()+i.top}l=e(s._mouseOverTooltip).width(),d=e(s._mouseOverTooltip).height(),m+l+15>=h&&(m=m-l-15),g+d+10>=c&&(g=g-d-10),e(s._mouseOverTooltip).css({top:g,left:m})},700))}}}}},_cellMouseLeave:function(){var t=this;null!=t._mouseOverTooltip&&(e("#tooltipgantt").remove(),window.clearTimeout(t._tooltipTimer),e(t._mouseOverTooltip).remove())},_headerMouseLeave:function(){var t=this;null!=t._headerMouseOverTooltip&&(e("#headertooltip").remove(),window.clearTimeout(t._headerTooltipTimer),e(t._headerMouseOverTooltip).remove())},disableTooltip:function(){this._cellMouseLeave(),this._headerMouseLeave()},_createTooltipTemplate:function(){var t,i=this,s=(i.model.columnHeaderTexts,{}),a=i.model.cellTooltipTemplate,r=null;s["_"+i._id+"getTaskName"]=i._tooltipTaskName,e.views.helpers(s);var n="";if(a)n=document.getElementById(a)?e("#"+a)[0].innerHTML:a,r=n;else{var r="<tr class='e-tooltip_rowcell'>";t="{{if ~_"+i._id+"getTaskName()}}<td class='e-tooltiptaskname' style='height:auto;width:auto;font-weight:normal;'>{{:ttiptaskname}}</td>{{/if}}",r+=t,r+="</tr>"}var o={};o[i._id+"tooltipTemplate"]=r,e.templates(o)},_tooltipTaskName:function(){return this.data.ttiptaskname},_createColumnTooltipTemplate:function(t){var i=this,s=null,a="";t&&(a=document.getElementById(t)?e("#"+t)[0].innerHTML:"#"===t.slice(0,1)&&document.getElementById(t.slice(1,t.length))?e(t)[0].innerHTML:t,s=a);var r={};r[i._id+"columnTooltipTemplate"]=s,e.templates(r)},getMaxZIndex:function(){var e=document.getElementsByTagName("div"),t=0,i=e.length;if(0==this._maxZIndex){for(var s=0;s<i;s++){var a=e[s].style.zIndex,r=parseInt(a);r>t&&"auto"!=a&&!isNaN(r)&&(t=r)}this._maxZIndex=t}return this._maxZIndex},_onScroll:function(i){var s,a=this,r=this.model;if(a._popupHide(),a._clearContextMenu(),e("#"+this._id+"detailscellwrapper").length>0&&this._removeDetailsRow(),a.model.showGridCellTooltip&&(a._cellMouseLeave(),a._headerMouseLeave()),!r.isFromGantt&&a._dragTooltip&&!a._timerDragDown&&!a._timerDragUp)return void(i.cancel=!0);if(!a.isVScroll()&&!a.model.isFromGantt&&"wheel"===i.source)return void(i.cancel=!0);if(void 0!=i.scrollLeft&&(a._scrollLeft=i.scrollLeft,s=Math.abs(a._scrollLeft-a._prevScrollLeft)),void 0!=i.scrollTop&&(a._scrollTop=i.scrollTop,Math.abs(a._scrollTop-a._preVScrollTop)),s&&(a._updateHeaderScrollLeft(a._scrollLeft),a._prevScrollLeft=a._scrollLeft),void 0!=i.scrollTop){if(a.model.isEdit?(a.cancelEditCell(),a._focusTreeGridElement()):a._isRowEdit&&(a.cancelRowEditCell(),a._focusTreeGridElement()),a._vScrollDist=Math.abs(a._scrollTop-a._prevScrollTop),a._preVScrollTop=a._scrollTop,a.model.enableVirtualization){if(a._vScrollDir=a._prevScrollTop<=a._scrollTop?1:-1,r.allowPaging&&!a.model.sizeSettings.height)return;a._vScrollDist&&a._scrollTop!=a._prevScrollTop&&(a._updateCurrentViewData(t.TreeGrid.Actions.Scroll),a._prevScrollTop=a._scrollTop)}a._scrollTop=i.scrollTop,this._frozenColumnsLength&&a.getContent().find("#e-frozencontainer"+a._id).scrollTop(a._scrollTop),a._vScrollDist=0}},editFormValidate:function(){var t=this.model,i=t.editSettings;if(e.isFunction(e.validator)){if(!(this._frozenColumnsLength>0)){if(e("#"+this._id+"EditFormDialog").length>0){if("dialogEditing"==i.editMode||"batchediting"==i.editMode.toLowerCase()&&"dialog"==i.batchEditSettings.editMode.toLowerCase()){if(!e("#"+this._id+"_dialogEdit").ejDialog("isOpen"))return!0}return this.setValidation(),e("#"+this._id+"EditFormDialog").validate().form()}return!(e("#"+this._id+"EditForm").length>0)||(this.setValidation(),e("#"+this._id+"EditForm").validate().form())}var s=this.element.find(".e-treegridform");if(0==s.length)return!0;if(this.setValidation(),s.length>1){var a,r;return a=s.eq(0).validate().form(),r=s.eq(1).validate().form(),!(!a||!r)}if(s.length>0)return s.validate().form()}return!0},_checkModfiedCellValue:function(i,s,a){var r=this,n=r.model,o=!1;if("datepicker"==a.editType||"datetimepicker"==a.editType)if(i instanceof Date&&s instanceof Date)if("datepicker"==a.editType){var l=new Date(i),d=new Date(s);l.setHours(0,0,0,0)!=d.setHours(0,0,0,0)&&(o=!0)}else i.getTime()!=s.getTime()&&(o=!0);else i!==s&&(o=!0);else if("dropdownedit"==a.editType)i!==s&&(o=!0);else{if(i=t.isNullOrUndefined(i)?"":i,s=t.isNullOrUndefined(s)?"":s,n.isFromGantt&&"duration"==a.field){var h=s.match(/(\d*\.*\d+|[A-z]+)/g);h&&h.length<=2&&(s=parseFloat(h[0]))}i instanceof Array&&s instanceof Array?e.each(i,function(t,i){-1==e.inArray(i,s)&&(o=!0)}):i.toString()!==s.toString()&&(o=!0)}return o},saveRow:function(){var i,s,a,r,n=this,o=n.model,l=o.editSettings.editMode.toLowerCase();if(n.model.editSettings.allowEditing&&("dialogediting"==l||"batchediting"==l&&"dialog"==o.editSettings.batchEditSettings.editMode)?(i=e("#"+n._id+"EditFormDialog"),s=n._currentEditRecordDialogIndex,a=!0):(i=e("#"+n._id+"EditForm"),s=this.getIndexByRow(i.closest("tr"))),i&&!n.editFormValidate())return!0;var d,h=e("#"+n._id+"EditFrozenForm"),c=(h.add(i).find("td"),i.closest("tr").hasClass("e-addedrow")),u=o.columns,p=u.length,m=o.currentViewData[s],g={},f=t.copyObject({},m.item),_=!0,v=!1;if(n._focusTreeGridElement(),!(i.length<=0&&-1==s)){for(var b=0;b<p;b++){var x=u[b],y=x.field;if(!(""==y||n._checkboxSelection&&x.nonColumn)&&(x.visible||("dialogEditing"==o.editSettings.editMode||"batchediting"==n.model.editSettings.editMode.toLowerCase()&&"dialog"==o.editSettings.batchEditSettings.editMode.toLowerCase())&&!t.isNullOrUndefined(o.editSettings.dialogEditorTemplateID)&&""!=o.editSettings.dialogEditorTemplateID)){if(r=t.isNullOrUndefined(x.editType)?"stringedit":x.editType,d=n.getCurrentEditCellDataForRowEdit(y,r,b),d=t.isNullOrUndefined(d)||x.editType==t.TreeGrid.EditingType.Numeric&&isNaN(d)?null:d,o.idMapping&&o.parentIdMapping&&y==o.idMapping&&n._validateIdValue(d)&&(d=m[y]),
!n._checkModfiedCellValue(t.getObject(y,f),d,x))continue;-1!=y.indexOf(".")?t.createObject(y,d,f):f[y]=d,v=!0,"batchediting"!=l||c||(n._createBatchEditedFields(m,y,d,x),n._batchEditStarts=!0,n._updateBatchChanges(m))}}if(c){if(n._isEmptyRow=n._checkIsEmptyRow(f),g.rowIndex=n.selectedRowIndex(),g.previousValue=m.item,g.requestType="addNewRow",g.addedRow=n._isEmptyRow?null:f,g.rowElement=i.closest("tr"),!n._isEmptyRow){if("batchediting"==l)n.batchChanges.added.push(m),n._batchEditStarts=!0;else if(n._trigger("actionComplete",g))return!0;t.copyObject(m,f),t.copyObject(m.item,f),_=n._updateAction(g),o.idMapping&&o.parentIdMapping&&n._updateLastInsertedId(m[o.idMapping])}}else if(g.requestType="update",g.rowIndex=n.getUpdatedRecords().indexOf(m),g.currentValue=f,g.previousValue=m.item,a){if(g.element=e("#"+n._id+"_dialogEdit"),n._isRemoteData||(v=!0),v&&n._trigger("actionBegin",g))return!0;_=n._updateAction(g),o.idMapping&&o.parentIdMapping&&n._updateLastInsertedId(g.currentValue[o.idMapping]);for(var w=0;w<u.length;w++)if(u[w].editType==t.TreeGrid.EditingType.Dropdown||u[w].editType==t.TreeGrid.EditingType.DatePicker||u[w].editType==t.TreeGrid.EditingType.DateTimePicker){var C=e("#"+n._id+n._getFieldValue(u[w].field));C.data("ejWidgets")&&C[C.data("ejWidgets")[0]]("destroy")}}else g.rowElement=i.add(h).closest("tr"),!v&&n._isRemoteData||(v&&"batchediting"==l||"batchediting"!=l&&!n._trigger("endEdit",g))&&(_=n._updateAction(g),o.idMapping&&o.parentIdMapping&&n._updateLastInsertedId(g.currentValue[o.idMapping]));_&&n._refreshAfterSaveRow(g,!0)}},_refreshAfterSaveRow:function(i,s){var a=this,r=a.model,n=r.columns,o=a.getUpdatedRecords()[i.rowIndex],l=r.currentViewData.indexOf(o);if(a._isEmptyRow&&"addNewRow"==i.requestType){var d=!1;r.editSettings.allowDeleting||(d=!0,r.editSettings.allowDeleting=!0),a.deleteRow(null,!0,null),a._isEmptyRow=!1,a._isEmptyRowDeleted=!0,d&&(r.editSettings.allowDeleting=!1)}else if(t.TreeGrid.refreshRow(a,l),"addNewRow"==i.requestType&&o.parentItem&&1==o.parentItem.childRecords.length&&t.TreeGrid.refreshRow(a,r.currentViewData.indexOf(o.parentItem)),r.showSummaryRow&&(i.editType="rowedit","addNewRow"==i.requestType&&"child"==r.editSettings.rowPosition&&a._createAndRenderSummaryRecords(i),a._updateSummaryRow(i)),r.showTotalSummary&&(i.editType="rowedit",a._updateTotalSummaryRow(i)),s&&"dialogEditing"==r.editSettings.editMode){var h={};h.data=o,h.item=o.item,h.requestType="recordUpdate",a._trigger("actionComplete",h),r.idMapping&&r.parentIdMapping&&a._updateLastInsertedId(h.item[r.idMapping])}a._isRowEdit=!1,r.currentViewData.length>0&&r.enableAltRow&&!r.enableVirtualization&&t.TreeGrid.updateAltRow(a,r.currentViewData[0],0,0),a._cancelSaveTools();var c=n.filter(function(e){if("dropdownedit"==e.filterEditType&&"dropdownedit"!=e.editType)return!0});if(r.allowFiltering&&c.length&&a._resizeFilteringElements(),a._commandColumnLength>0){var u=t.TreeGrid.getRowByIndex(a,a.getUpdatedRecords().indexOf(o));if(a._refreshUnboundTemplate(u),"addNewRow"==i.requestType&&r.editSettings.rowPosition==t.TreeGrid.RowPosition.Child){var p=t.TreeGrid.getRowByIndex(a,a.getUpdatedRecords().indexOf(o.parentItem));a._refreshUnboundTemplate(p)}}if(r.allowTextWrap&&a._$frozenTableContent.length>0){a._updateRowHeight(l),a._updateGridContentHeight(),a.getScrollElement().ejScroller("refresh");var m=a.getScrollElement().ejScroller("model.scrollTop");a._getFrozenScrollElement().scrollTop(m),a.model.enableVirtualization&&a.updateHeight()}else r.allowTextWrap&&(r.allowPaging&&!r.sizeSettings.height?a.updateHeight():a.getScrollElement().ejScroller("refresh"));if(r.allowTextWrap&&0==a._$frozenTableContent.length){var g=a._getViewPortHeight();a._$gridContainer.css({height:g+"px"}),e("#"+a._id+"e-gridcontent").css("height",g),a.getScrollElement().ejScroller("refresh")}},_updateAction:function(i){var s,a,r=this,n=r.model,o=n.idMapping,l="dragAndDrop"==i.requestType?i.draggedRowIndex:i.rowIndex,d=r.getUpdatedRecords()[l],h=!1,c={added:[],changed:[],deleted:[]};if(r._isRemoteData){var u=n.selectionSettings.selectionType,p=r._dataManager.dataSource.batchUrl;t.isNullOrUndefined(p)&&"multiple"!=u&&"checkbox"!=u||(h=!0)}if("addNewRow"==i.requestType)r._isRemoteData&&(h?c.added.push(i.addedRow):a=r._dataManager.insert(i.addedRow,r.model.query));else if("update"==i.requestType)r._isRemoteData?h?c.changed.push(i.currentValue):a=this._dataManager.update(o,i.currentValue,r.model.query):(t.copyObject(d,i.currentValue),t.copyObject(d.item,i.currentValue));else if("dragAndDrop"==i.requestType){if(r._isRemoteData)if(h)for(var m=i.draggedRecords,g=0;g<m.length;g++)c.changed.push(m[g].item);else a=this._dataManager.update(o,d.item,r.model.query)}else if("saveCellValue"==i.requestType){var s=i.data.item;r._isRemoteData&&e.isPlainObject(s)&&(h?c.changed.push(s):a=r._dataManager.update(o,s,r.model.query))}else if(i.requestType==t.TreeGrid.Actions.Delete&&r._isRemoteData)if(h)c.deleted=r._getParentChildItem(i.deletedItems);else{var s=i.data.item;a=r._dataManager.remove(o,s[o],this.model.query)}return h&&(a=r._dataManager.saveChanges(c,o,this.model.query._fromTable,this.model.query)),a&&e.isFunction(a.promise)&&!r._dataManager.dataSource.offline&&(r._waitingPopupObj.show(),a.done(function(s){if(i.requestType==t.TreeGrid.Actions.Delete)r._updateDeleteAction(i),r._cancelSaveTools();else if("addNewRow"==i.requestType||"update"==i.requestType){var a="addNewRow"==i.requestType?i.addedRow:i.currentValue;t.isNullOrUndefined(s)||t.isNullOrUndefined(s.record)||!e.isPlainObject(s.record)||t.copyObject(a,s.record),t.copyObject(d,a),t.copyObject(d.item,a),r._refreshAfterSaveRow(i,!0)}else"saveCellValue"==i.requestType&&r._refreshAfterSaveCell(i,!0);r._waitingPopupObj.hide()}),a.fail(function(e){if(i.error=e&&e.error?e.error:e,"update"==i.requestType)r._refreshAfterSaveRow(i,!0);else if("addNewRow"==i.requestType){var s=r.getUpdatedRecords().indexOf(d);r._isEmptyRow=!0,r.deleteRow(null,!0,s),r._isEmptyRow=!1}else"saveCellValue"==i.requestType&&(i.data[i.columnName]=i.previousValue,i.data.item[i.columnObject.field]=i.previousValue,r.selectRows(r.selectedRowIndex()),t.TreeGrid.refreshRow(r,n.currentViewData.indexOf(i.data)));r._waitingPopupObj.hide(),r._trigger("actionFailure",i)})),!r._isRemoteData},_getParentChildItem:function(e,i){for(var s=this,a=e.length,i=t.isNullOrUndefined(i)?[]:i,r=0;r<a;r++){var n=e[r];-1==i.indexOf(n.item)&&i.push(n.item),n.hasChildRecords&&s._getParentChildItem(n.childRecords,i)}return i},_excludeDetailRows:function(){var t=e(),i=this.model;return this.getTreeGridRows()&&this.getTreeGridRows().length>0&&(t=i.showDetailsRow&&i.detailsTemplate?this._frozenColumnsLength>0?[e(this.getTreeGridRows()[0]).not(".e-detailsrow"),e(this.getTreeGridRows()[1]).not(".e-detailsrow")]:e(this.getTreeGridRows()).not(".e-detailsrow"):this._frozenColumnsLength>0?[e(this.getTreeGridRows()[0]),e(this.getTreeGridRows()[1])]:e(this.getTreeGridRows())),t},getIndexByRow:function(t){var i=this._excludeDetailRows(),s=-1;return this._frozenColumnsLength>0?(s=e(i[0]).index(t),-1==s&&(s=e(i[1]).index(t)),s):i.index(t)},getTreeGridRows:function(){return this._gridRows},_keyDown:function(i){var s=this;if(i.shiftKey&&-1==s._shiftKeyFirstElementDetails.firstElementRowIndex)s._shiftKeyFirstElementDetails.firstElementRowIndex=s._focusingRowIndex,s._shiftKeyFirstElementDetails.firstElementCellIndex=s._cellIndex;else if(13==i.which&&null!=this._excelFilter&&!t.isNullOrUndefined(this._excelFilter._openedFltr)&&this._excelFilter._openedFltr.length&&this._excelFilter._openedFltr.is(":visible")){var a=this._id+this._excelFilter._$colType;this._excelFilter._openedFltr.hasClass("e-dlgcustom")&&(a+="Custom"),this._excelFilter._openedFltr.find("#"+a+"_OkBtn").trigger("click")}else{if(13===i.which&&e(i.target).hasClass("e-searchinput")&&e(i.target).closest("#"+s._id+"_toolbarItems"))return this._toolbarOperation(this._id+"_search",i.currentTarget),i.preventDefault(),!1;if("click"==i.type&&e(i.target).hasClass("e-searchitem"))return this._toolbarOperation(this._id+"_search",e(i.currentTarget).prev()[0].firstChild),i.preventDefault(),!1}},_focusTreeGridElement:function(){if("msie"==t.browserInfo().name)try{this.element[0].setActive()}catch(e){}else{var i=e(window).scrollTop();this.element[0].focus(),e(window).scrollTop(i)}},_onRecordClick:function(e){this._recordClickAction(e,"recordClick")},_onRecordDoubleClick:function(e){this._recordClickAction(e,"recordDoubleClick")},_recordClickAction:function(i,s){var a,r=this,n=e(i.target),o=r.model,l=n.closest("td"),d={},h=n.closest("tr");!(n.hasClass("e-rowcell")||n.parent().hasClass("e-rowcell")||n.closest("td").hasClass("e-rowcell")||n.closest("td").hasClass("e-rowcell")&&n.hasClass("e-cell"))||0!=h.find(".e-editedcell").length||h.hasClass("e-summaryrow")||l.hasClass("e-unboundcell")||(d.cell=l,d.cellIndex=r.getCellIndex(i),d.row=h,d.rowIndex=r.getIndexByRow(d.row),d.data=r.model.currentViewData[d.rowIndex],a=o.columns[d.cellIndex],d.columnName=a.headerText,d.cellValue=t.isNullOrUndefined(d.data)?"":d.data[a.field],d.targetElement=n,r._trigger(s,d))},_addRemoveAnimateClass:function(t){var i=this;this._$gridContentTable&&this._$gridContentTable.find(".e-treegrid-animate").removeClass("e-treegrid-animate"),i._$gridHeaderContainer&&i._$gridHeaderContainer.find(".e-treegrid-animate").removeClass("e-treegrid-animate"),e(t).addClass("e-treegrid-animate")},_onClick:function(i){var s,a,r=this,n=r.model,o=e(i.target),l={},d=-1,h=o.closest(".e-treegrid").attr("id"),c=r.getUpdatedRecords();if(o.closest(".e-treegrid").attr("id")!==this._id)return!1;if(r._clearContextMenu(),this._removeDetailsRow(i),n.allowDragAndDrop&&window.clearTimeout(r._dragTooltipTimer),n.allowColumnReordering&&(window.clearTimeout(this._dragColumnTooltipTimer),this._dragColumnTooltipTimer=null),r._cellIndex=r.getCellIndex(i),o.hasClass("e-filtertext")||o.hasClass("e-cancel")||r.getHeaderTable().find(".e-cancel").addClass("e-hide"),"cell"==n.selectionSettings.selectionMode&&"dialogEditing"!=n.editSettings.editMode&&(n.editSettings.editMode="cellEditing"),d=r.getRowIndex(i),("click"==n.editSettings.beginEditAction||o.hasClass("e-treegridexpand")||o.hasClass("e-treegridcollapse"))&&0==o.closest(".e-scrollbar").length&&0==o.closest(".e-toolbaricons").length&&0==o.closest(".e-treegridtoolbaritem").length&&(("cellediting"==n.editSettings.editMode.toLowerCase()||"batchediting"==n.editSettings.editMode.toLowerCase()&&"cell"==n.editSettings.batchEditSettings.editMode.toLowerCase())&&(r._cellEditingDetails.rowIndex=d),a=n.currentViewData&&n.currentViewData[d]),!r.model.allowSelection||"multiple"!=r.model.selectionSettings.selectionType||r.model.isFromGantt||o.hasClass("e-downtail")||(o.hasClass("e-rowselect")?o.hasClass("e-spanclicked")?r._clearMultiSelectPopup():o.addClass("e-spanclicked"):e("#"+h+"_selectionpopup").find(".e-rowselect").hasClass("e-spanclicked")||this._multiSelectPopup.hide()),r._saveCellHandler(i),o.hasClass("e-summarytreegridexpand")||o.hasClass("e-summarytreegridcollapse"))return l.expanded=!o.hasClass("e-summarytreegridexpand"),r._isInManualExpandCollapse=!0,r.expandCollapseTotalSummary(l.expanded),r._isInManualExpandCollapse=!1,void r._addRemoveAnimateClass(o);if(!(o.hasClass("e-summaryrowcell")||o.hasClass("e-footersummaryrowcell")||o.hasClass("e-summarytitle"))){if((o.hasClass("e-treegridexpand")||o.hasClass("e-treegridcollapse"))&&-1!=d&&r.editFormValidate()){var u,p=o.closest("tr"),m=c.indexOf(a),l={};if(o.removeClass("e-treegrid-animate"),l.data=_,l.data=a,l.recordIndex=m,l.expanded=!p.hasClass("e-treegridrowexpand"),0!=e("#"+r._id+"EditForm").length||!o.hasClass("e-rowcell")&&o.closest(".e-rowcell").hasClass("e-templatecell")?r._cancelEditState():r._focusTreeGridElement(),u=l.expanded?r._trigger("expanding",l):r._trigger("collapsing",l),u||n.isFromGantt||(r._isRefreshAddedRecord?(l.data.expanded=l.expanded,r.updateExpandStatus(l.data,l.expanded),r.refreshContent(),r.renderRecords(),n.allowTextWrap&&r._frozenColumnsLength>0&&(r._updateRowHeight(),"auto"==n.sizeSettings.height&&r._updateContentHeight(),r.getScrollElement().ejScroller("refresh"),r._updateScrollCss()),r._isRefreshAddedRecord=!1):t.TreeGrid.sendExpandCollapseRequest(r,l)),n.allowPaging||n.enableVirtualization){var g=r.getUpdatedRecords(),f=t.TreeGrid.getRowByIndex(this,g.indexOf(a));f&&r._addRemoveAnimateClass(e(f).find(".e-treegridcollapse,.e-treegridexpand"))}else r._addRemoveAnimateClass(o)}else if(o.hasClass("e-rowcell")||o.parent().hasClass("e-rowcell")||o.closest("td").hasClass("e-rowcell")||o.parent().hasClass("e-detailsrowcell")||o.hasClass("e-detailsrowcell")||o.closest("td").hasClass("e-rowcell")&&o.hasClass("e-cell")){if(this._shiftSelectedRecord=null,e("#"+h+"_selectionpopup").is(":visible")&&(e("#"+h+"_selectionpopup").find(".e-rowselect").hasClass("e-spanclicked")?(i.ctrlKey=!0,n.selectionSettings.selectionMode==t.TreeGrid.SelectionMode.Row&&(r._multiSelectCtrlRequest=!0)):(i.ctrlKey=!1,r._multiSelectCtrlRequest=!1)),n.isFromGantt&&r._ganttTouchTrigger){var l={target:o,ctrlKey:i.ctrlKey};r._trigger("getCtrlRequestValue",l),i.ctrlKey=l.ctrlKey}if(0!=e("#"+r._id+"EditForm").length||!o.hasClass("e-rowcell")&&o.closest(".e-rowcell").hasClass("e-templatecell")||r._focusTreeGridElement(),s=r.getIndexByRow(o.closest("tr")),n.selectionSettings.selectionMode==t.TreeGrid.SelectionMode.Row){if(r._checkboxSelection&&(0==e("#"+r._id+"EditForm").length||"click"==n.editSettings.beginEditAction)&&r.editFormValidate()){var _=r.model.currentViewData[s],m=c.indexOf(_),v=!1;o.hasClass("e-checkbox")&&(v=!0),-1==m||r._rowSelectingEventTrigger(this.selectedRowIndex(),m,v,i.type)||(r.selectRows(m,null,v),r._cancelSaveTools(),r._rowSelectedEventTrigger(m,null,v,i.type))}n.selectionSettings.selectionType==t.TreeGrid.SelectionType.Multiple&&(r._multiSelectCtrlRequest=!!i.ctrlKey,i.shiftKey&&1==n.allowSelection&&(s=r.getIndexByRow(o.closest("tr")),_=n.currentViewData[s],s=c.indexOf(_),r._multiSelectShiftRequest=!0,r._rowSelectingEventTrigger(this.selectedRowIndex(),s,!1,i.type)||(r.getRows()&&null!=r._prevSelectedItem?r.getExpandStatus(r._prevSelectedItem)?r.selectRows(c.indexOf(r._prevSelectedItem),s):r.selectRows(s):r.getRows()&&null==r._prevSelectedItem&&r.selectRows(0,s),r._cancelSaveTools(),n.isFromGantt&&i.shiftKey?r._rowSelectedEventTrigger(s,t.isNullOrUndefined(r._prevSelectedItem)?0:n.updatedRecords.indexOf(r._prevSelectedItem)):r._rowSelectedEventTrigger(s,null,!1,i.type)))),r._checkboxSelection||r._multiSelectShiftRequest||0!=e("#"+r._id+"EditForm").length||-1!=d&&(_=n.currentViewData[d],s=c.indexOf(_),n.allowSelection&&!r._rowSelectingEventTrigger(this.selectedRowIndex(),s,!1,i.type)&&(r.selectRows(s),r._cancelSaveTools(),r._rowSelectedEventTrigger(s,null,!1,i.type))),r._multiSelectShiftRequest=!1}if(n.selectionSettings.selectionMode==t.TreeGrid.SelectionMode.Cell&&0==e("#"+r._id+"EditForm").length&&-1!=r._cellIndex&&-1!=s&&n.allowSelection){var b,x=r._cellIndex>=r._frozenColumnsLength?1:0;b=r._frozenColumnsLength>0?r.getRows()[x][s]:r.getRows()[s];var y,w=n.columns,_=n.currentViewData&&n.currentViewData[s],C=c.indexOf(_),S=r._cellIndex>=r._frozenColumnsLength?r._cellIndex-r._frozenColumnsLength:r._cellIndex,T=b.childNodes[S],R=(r._previousSelectedCellDetails.rowIndex,r._previousSelectedCellDetails.cellIndex,e(T).closest("td"));if(r._focusingRowIndex=C,-1!=s){if(_.isSummaryRow)return;var l={rowIndex:C,cellIndex:r._cellIndex,rowElement:b,cellElement:R[0]},k={rowIndex:C,cellIndex:r._cellIndex,cellElement:R[0],data:_};if(!r._cellSelectingEventTrigger(l)&&w[r._cellIndex].allowCellSelection){if("multiple"==n.selectionSettings.selectionType&&(i.ctrlKey||i.shiftKey)){if(i.ctrlKey)y="msie"==t.browserInfo().name&&t.browserInfo().version<9?r._getCellIndex(r._selectedCellDetails,"cellElement").indexOf(R[0]):r._selectedCellDetails.map(function(e){return e.cellElement}).indexOf(R[0]),-1==y?(e(R[0]).addClass("e-selectingcell"),r._selectedCellDetails.push(k),n.selectedCellIndexes.push({rowIndex:k.rowIndex,cellIndex:k.cellIndex}),r._cellSelectedEventTrigger(l,r._previousSelectedCellDetails)):(e(R[0]).removeClass("e-selectingcell"),r._selectedCellDetails.splice(y,1),n.selectedCellIndexes.splice(y,1));else if(i.shiftKey){var l={rowIndex:C,cellIndex:r._cellIndex};r._shiftKeySelectCells(l),r._rowIndexOfLastSelectedCell=C,r._focusingRowIndex=r._shiftKeyFirstElementDetails.firstElementRowIndex}}else r._selectedCellDetails=[],n.selectedCellIndexes=[],e("#"+r._id).find(".e-selectingcell").removeClass("e-selectingcell"),e(R[0]).addClass("e-selectingcell"),r._selectedCellDetails.push(k),n.selectedCellIndexes.push({rowIndex:k.rowIndex,cellIndex:k.cellIndex}),r._cellSelectedEventTrigger(l,r._previousSelectedCellDetails),r._shiftKeyFirstElementDetails={firstElementRowIndex:-1,firstElementCellIndex:-1},r._updateSecondRowIndexBy=1;i.shiftKey||(r._previousSelectedCellDetails={rowElement:b,cellElement:R[0],cellIndex:l.cellIndex,rowIndex:C},r._rowIndexOfLastSelectedCell=r._focusingRowIndex,r._isShiftKeyNavigation=!1)}i.shiftKey||(r._rowIndexOfLastSelectedCell=r._focusingRowIndex),r._cancelSaveTools(),r._lastSelectedCellIndex=r._cellIndex}}if(r._isTouchTrigger&&r.model.allowSelection&&"multiple"==this.model.selectionSettings.selectionType&&!r.model.isFromGantt){if(r._isTouchTrigger&&null!=this._multiSelectPopup&&!this._multiSelectPopup.is(":visible")&&this._multiSelectPopup.find(".e-rowselect").hasClass("e-spanclicked")&&this._multiSelectPopup.show(),r._isTouchTrigger&&null!=this._multiSelectPopup&&!this._multiSelectPopup.find(".e-rowselect").hasClass("e-spanclicked")&&!o.hasClass("e-detailsrowcell")&&!o.parent("td").hasClass("e-detailsrowcell")&&!o.closest("tr").hasClass("e-detailsrow")){this._multiSelectPopup.removeAttr("style");var O=o.closest(".e-rowcell").offset();this._multiSelectPopup.offset({top:0,left:0}).offset({left:O.left+(o.closest(".e-rowcell").outerWidth()/2-this._multiSelectPopup.width()/2),top:O.top-this._multiSelectPopup.outerHeight()-10}).show()}r._isTouchTrigger=!1}}if((o.hasClass("e-detailsrowcell")||o.parent("td").hasClass("e-detailsrowcell"))&&!o.closest("tr").hasClass("e-detailsrow")&&!i.ctrlKey&&!i.shiftKey){(!(e("#"+this._id+"EditForm").length>0)||!!this.editFormValidate())&&(r._isRowEdit?this.saveRow():r._detailsExpandCollapse(o))}r._isRowEdit&&o.focus(),o.closest("#"+r._id+"_ColumnMenu").hasClass("e-columnmenu")||0!=o.closest("div.e-excelfilter").length||o.hasClass("e-overlay")||r._clearColumnMenu(),"click"!=n.editSettings.beginEditAction||0!=o.closest("#"+r._id+"EditForm").length||r._isShiftKeyNavigation||r._isEmptyRowDeleted||r._editdblClickHandler(i),r._isEmptyRowDeleted=!1}},_isInFilteredState:function(){return this.model.allowFiltering&&this.model.filterSettings.filteredColumns.length>0||this._searchString.length>0},selectAllRows:function(i){var s=this,a=s.model,r=-1,n=s._isInFilteredState()?s._flatFilteredRecords:a.flatRecords,o=(s.getUpdatedRecords(),0);if(a.selectionSettings.enableSelectAll||s._isFromSetmodel){if(a.showSummaryRow&&(n=s._spliceSummaryRows(n)),!t.isNullOrUndefined(i)){i||(n=s._isInFilteredState()?s._flatFilteredRecords:e.extend([],a.selectedItems));for(var l=0;l<n.length;l++)if(i){if("checked"==n[l].checkboxState)continue;n[l].checkboxState="checked",a.selectedItems.push(n[l]),e("#"+this._id+"_checkbox"+n[l].ejRowId).removeClass("e-stop").addClass("e-checkmark"),e("#"+this._id+"_checkbox"+n[l].ejRowId).parent("span").removeAttr("class").addClass("e-chk-act")}else(r=a.selectedItems.indexOf(n[l]))>-1&&(n[l].checkboxState="unchecked",a.selectedItems.splice(r,1),e("#"+this._id+"_checkbox"+n[l].ejRowId).removeClass("e-checkmark"),e("#"+this._id+"_checkbox"+n[l].ejRowId).parent("span").removeAttr("class").addClass("e-chk-inact"),(a.selectionSettings.enableHierarchySelection||s._isFromSetmodel)&&s._updateParentSelection(n[l]));s._cancelSaveTools()}if(s._isInFilteredState()&&s._flatFilteredRecords.length>0&&a.selectedItems.length>0){o=s._flatFilteredRecords.filter(function(e){return"checked"==e.checkboxState}).length}else o=a.selectedItems.length;o>0&&n.length>0?o!=n.length?(e("#"+this._id+"_headerCheckbox").removeClass("e-checkmark").addClass("e-stop"),e("#"+this._id+"_headerCheckbox").parent("span").removeAttr("class").addClass("e-chk-indeter")):(e("#"+this._id+"_headerCheckbox").removeClass("e-stop").addClass("e-checkmark"),e("#"+this._id+"_headerCheckbox").parent("span").removeAttr("class").addClass("e-chk-act")):(e("#"+this._id+"_headerCheckbox").removeClass("e-stop e-checkmark"),e("#"+this._id+"_headerCheckbox").parent("span").removeAttr("class").addClass("e-chk-inact"))}},_updateSelectedItems:function(t,i){var s=this,a=s.model,r=-1,n=-1;n=s.getUpdatedRecords().indexOf(t),t.checkboxState=i,r=e.inArray(t,a.selectedItems),"unchecked"==t.checkboxState?(-1!=r&&a.selectedItems.splice(r,1),n>-1&&(e("#"+this._id+"_checkbox"+t.ejRowId).removeClass("e-checkmark e-stop"),e("#"+this._id+"_checkbox"+t.ejRowId).parent("span").removeAttr("class").addClass("e-chk-inact"))):"checked"==t.checkboxState&&(-1==r&&a.selectedItems.push(t),n>-1&&(e("#"+this._id+"_checkbox"+t.ejRowId).removeClass("e-stop").addClass("e-checkmark"),e("#"+this._id+"_checkbox"+t.ejRowId).parent("span").removeAttr("class").addClass("e-chk-act")))},_traverseSelection:function(e,t,i){var s,a=this,r=0,n=this.model;if(a._updateSelectedItems(e,t),!i&&e.parentItem&&n.selectionSettings.enableHierarchySelection&&a._updateParentSelection(e.parentItem),e.hasChildRecords&&n.selectionSettings.enableHierarchySelection){if(s=e.childRecords,a._flatFilteredRecords.length>0){s=s.filter(function(e){return a._flatFilteredRecords.indexOf(e)>-1})}r=s.length;for(var o=0;o<r;o++)s[o].hasChildRecords?a._traverseSelection(s[o],t,!0):s[o].isSummaryRow||a._updateSelectedItems(s[o],t)}},_updateParentSelection:function(t){var i=this,s=0,a=this.model,r=[];if(t&&t.childRecords&&(r=i._spliceSummaryRows(t.childRecords)),i._flatFilteredRecords.length>0&&a.selectionSettings.enableHierarchySelection){r=r.filter(function(e){return i._flatFilteredRecords.indexOf(e)>-1})}s=r&&r.length;var n=!1,o=r.filter(function(e){return"indeterminate"==e.checkboxState}),l=r.filter(function(e){return"checked"==e.checkboxState});o.length>0||l.length>0&&l.length!=s?("checked"==t.checkboxState?(this._updateSelectedItems(t,"unchecked"),n=!0):"unchecked"==t.checkboxState&&(n=!0),n&&(e("#"+this._id+"_checkbox"+t.ejRowId).addClass("e-stop"),e("#"+this._id+"_checkbox"+t.ejRowId).parent("span").removeAttr("class").addClass("e-chk-indeter"),t.checkboxState="indeterminate",t.parentItem&&this._updateParentSelection(t.parentItem))):0==l.length&&0==o.length?(e("#"+this._id+"_checkbox"+t.ejRowId).removeClass("e-stop e-checkmark").parent("span").removeClass("e-chk-indeter"),"checked"==t.checkboxState?this._updateSelectedItems(t,"unchecked"):t.checkboxState="unchecked",t.parentItem&&this._updateParentSelection(t.parentItem)):(t.checkboxState="checked",this._updateSelectedItems(t,"checked"),t.parentItem&&this._updateParentSelection(t.parentItem))},_removeInnerDetailRows:function(i,s){var a=e(".e-detailscellwrapperfly"),r=a.length,n=0;for(n;n<r;n++)if(e.contains(a[n],i[0])||i==a[n]){!0;break}var o=!1;t.isNullOrUndefined(a[n])&&(n=a.index(e("#"+this._id+"detailscellwrapper")),o=!0);var l=o?"":",",d=e(a[n]).attr("parentTreeGridIds"),h=e("[parentTreeGridIds$='"+l+d+"']");h.length;this._triggerDetailRowHideEvent(h,s)},_triggerDetailRowHideEvent:function(t,i){var s=this.model,a=t.length,r=0;if(a>0&&e("#"+this._id+"detailscellwrapper").length>0){var n=(e("#"+this._id+"detailscellwrapper"),s.selectedItem),o={};if(o.rowData=n,!this._trigger("detailsHidden",o)||i)for(r;r<a;r++){var l=e(t[r]).attr("id").replace("detailscellwrapper","");e("#"+l).find(".e-detailsrowexpand").removeClass("e-detailsrowexpand").addClass("e-detailsrowcollapse"),e("#"+l).find(".e-detailsinfoiconhide").removeClass("e-detailsinfoiconhide").addClass("e-detailsinfoiconshow"),e(t[r]).remove()}}},_removeDetailsRow:function(i,s){this.model;if(i){var a=e(i.target),r=a;if(a.parent("td").hasClass("e-detailsrowcell")&&(r=a.parent("td")),0==a.closest(".e-popup").length&&a[0]!=e("html").get(0)){var n=e(".e-detailscellwrapperfly"),o=n.length,l=0,d=!1;for(l;l<o;l++)if(e.contains(n[l],a[0])||a[0]==n[l]){d=!0;break}if(a.hasClass("e-detailscellwrapperfly")||r.hasClass("e-detailsrowexpand")||r.hasClass("e-detailsrowcollapse")||d||this._removeInnerDetailRows(e("#"+this._id+"detailscellwrapper"),s),a.hasClass("e-detailscellwrapperfly")||r.hasClass("e-detailsrowcollapse")||!r.hasClass("e-detailsrowexpand")&&d){var h=!1;t.isNullOrUndefined(n[l])&&(l=n.index(e("#"+this._id+"detailscellwrapper")),h=!0);var c=h?"":",",u=e(n[l]).attr("parentTreeGridIds"),p=e("[parentTreeGridIds$='"+c+u+"']");this._triggerDetailRowHideEvent(p,s)}}}else e("#"+this._id+"detailscellwrapper").length>0&&this._removeInnerDetailRows(e("#"+this._id+"detailscellwrapper")[0],s),this._triggerDetailRowHideEvent(e("#"+this._id+"detailscellwrapper"),s)},showHideDetailsRow:function(i){var s=this,a=this.model;if(s._saveEditedElements(),a.showDetailsRow&&a.detailsTemplate&&a.showDetailsRowInfoColumn&&!t.isNullOrUndefined(i)&&i<=a.updatedRecords.length&&s.getExpandStatus(a.updatedRecords[i])){i!=this.selectedRowIndex()&&-1!=i&&e.inArray(i,-1==s._selectedRowsIndexes)&&a.allowSelection&&a.updatedRecords.length>i&&(s._rowSelectingEventTrigger(this.selectedRowIndex(),i)||(s.selectRows(i),s._rowSelectedEventTrigger(i))),this.updateScrollBar(i);var r,n=e(t.TreeGrid.getRowByIndex(s,i));n.length>0&&a.updatedRecords[i]&&s.getExpandStatus(a.updatedRecords[i])&&(r=e(n).find(".e-detailsrowcell"),e(r).length>0&&e(r).hasClass("e-detailsrowcell")&&(this.element.find(".e-detailsrowexpand")[0]!=r[0]&&this._removeDetailsRow(),this._detailsExpandCollapse(e(r))))}},_detailsExpandCollapse:function(i){var s=this,a=this.model;i.parent("td").hasClass("e-detailsrowcell")&&(i=i.parent("td"));var r=i.closest("tr"),n=r.find(".e-detailsrowcell");if(n.hasClass("e-detailsrowcollapse")){var o=this.getIndexByRow(r),l=this.model.currentViewData[o];if(t.isNullOrUndefined(l)||l.isSummaryRow)return;for(var d=this.getOffsetRect(r[0]),h=e(e.render[s._id+"_detailRowTemplate"](l)),c=e(h).find(".e-detailscellwrapper").attr({id:this._id+"detailscellwrapper"}),u=s._gridWidth-(s.element.find(".e-scrollcss").length>0?18:0)-2,p=this.element.parents().filter(".e-detailscellwrapperfly"),m=this._id,g="";p.length>0;)g=p.attr("id").replace("detailscellwrapper",""),m+=","+g,p=e("#"+g).parents().filter(".e-detailscellwrapperfly");c.attr("parentTreeGridIds",m);var f,_,v=this.getOffsetRect(s._$gridContent[0]);if(v.bottom=v.top+s._$gridContent[0].offsetHeight,f=d.top+r[0].offsetHeight,_=f+a.detailsRowHeight,f>v.bottom||_>v.bottom){var b=d.top-a.detailsRowHeight;b>v.top&&(f=b)}c.removeClass("e-detailscellwrapper").addClass("e-detailscellwrapperfly"),a.cssClass&&c.addClass(a.cssClass);var x=s.getScrollElement().ejScroller("isHScroll")?s.getScrollElement().ejScroller("option","scrollLeft"):0,y=s.getMaxScrollWidth();y>0&&x>y&&(x=y);var w=0;this._frozenColumnsLength>0&&(w=e(this.element).find("#e-frozencontentdiv"+this._id).width()),c.css({top:f,left:d.left+x-w,"z-index":s.getMaxZIndex()+1,position:"absolute",width:u}).appendTo(this.element),this._trigger("refresh");var C={};C.detailsElement=c,C.data=l,C.rowIndex=this.selectedRowIndex(),this._trigger("detailsDataBound",C);var S={};S.detailsElement=c,S.data=l,S.rowIndex=this.selectedRowIndex(),S.appendTarget=null,this._trigger("detailsShown",S)?this._removeInnerDetailRows(i):(n.find(".e-detailsinfoiconshow").removeClass("e-detailsinfoiconshow").addClass("e-detailsinfoiconhide"),n.removeClass("e-detailsrowcollapse").addClass("e-detailsrowexpand"),S.appendTarget&&(e(c).css({top:"auto",left:"auto",position:"auto"}),e(c).detach().appendTo(e("#"+S.appendTarget))))}else this._removeInnerDetailRows(i)},_onHeaderClick:function(i){var s=this,a=s.model;s._cellMouseLeave(),s._headerMouseLeave(),s._clearContextMenu(),this._removeDetailsRow(),e(i.target).is(".e-ascending, .e-descending")&&(i.target=i.target.parentNode);var r,n,o,l=e(i.target),d=!0;if(s.getHeaderTable().find(".e-columnheader").find(".e-headercellactive").removeClass("e-headercellactive"),s._mouseDragged&&a.allowColumnReordering&&(d=!1),s._checkboxSelection&&a.allowSelection&&a.selectionSettings.enableSelectAll&&l.hasClass("e-headerCheckbox")&&(s.selectAllRows(!l.hasClass("e-checkmark")&&!l.hasClass("e-stop")),d=!1),l.closest(".e-headercelldiv")&&!l.hasClass("e-columnmenu-icon")&&!l.hasClass("e-column-filter-icon")&&!l.hasClass("e-column-filtered-icon"))if(r=l.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname"),!d||t.isNullOrUndefined(r)&&t.isNullOrUndefined(this.getColumnByField(r))||0==this.getColumnByField(r).allowSorting)s._saveEditedElements();else if(d&&a.allowSorting&&(o=this.getColumnByField(r),n=l.closest(".e-headercell").find("span").hasClass("e-ascending")?t.sortOrder.Descending:t.sortOrder.Ascending,a.allowMultiSorting&&i.ctrlKey&&(s._multiSortRequest=!0),s._isRefreshAddedRecord=!1,a.isFromGantt?s.sortColumn(o.mappingName?o.mappingName:o.field,n):s.sortColumn(o.field,n),s.model.isFromGantt&&this.selectedRowIndex()>=0)){var h={};h.data=s.model.selectedItem,h.target="ejTreeGrid",h.recordIndex=this.selectedRowIndex(),s._trigger("rowSelected",h)}if(l.hasClass("e-column-filter-icon")||l.hasClass("e-column-filtered-icon")){if(s._batchEditStarts)return s._batchSaveLostWarning("Filtering"),s._batchTempDetails.filterTarget=i,!1;if(r=l.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname"),o=s.getColumnByField(r),s._checkFilterType(o),l.data("isClicked"))s._clearColumnMenu(),l.data("isClicked",!1);else if("menu"==a.filterSettings.filterType&&"excel"!=o.filterType||"excel"==a.filterSettings.filterType&&"menu"==o.filterType)s._updateFilterMenuList(i),e(".e-filtericon").data("isClicked",!1),l.data("isClicked",!0);else{var c=l.offset(),u=l.offsetParent(),p=u.offset();p={top:p.top+jQuery.css(u[0],"borderTopWidth",!0),left:p.left+jQuery.css(u[0],"borderLeftWidth",!0)};var m=c.left-p.left-jQuery.css(l[0],"marginLeft",!0)+18,g=c.top-p.top-jQuery.css(l[0],"marginTop",!0)+2;"relative"==l.closest(".e-headercell").css("position")&&(m=l.offset().left+15,g=l.offset().top+20);var f=l[0].offsetWidth,_=s.getOffsetRect(s.element[0]),v=_.left+s.element.width(),b=o.filterEditType?o.filterEditType:o.editType;switch(b=b.toLowerCase()){case"numericedit":b="number";break;case"stringedit":case"maskedit":case"dropdownedit":b="string";break;case"booleanedit":b="boolean";break;case"datepicker":case"datetimepicker":b=b.replace("picker","")}if("excel"==a.filterSettings.filterType&&s._saveEditedElements(),e(window).width()<=s._responsiveMinWidth&&a.isResponsive&&a.enableResize)s._renderResponsiveExcelFilter(o,b),e(".e-filtericon").data("isClicked",!1),s._mediaStatus=!0;else{-1==e.inArray(b,s._excelColTypes)&&(s._clearFilterMenu(),e("#"+s._id+b+"_excelDlg").remove(),e("#"+s._id+b+"_CustomFDlg_wrapper").remove(),e("#"+s._id+b+"_CustomFDlg").remove(),s._excelFilter._openedFltr=null,s._excelColTypes.push(b),s._excelFilter.renderDialog(b));var x={True:s.localizedLabels.trueText,False:s.localizedLabels.falseText},y=[];e.grep(s.model.flatRecords,function(e){e.isSummaryRow||y.push(e.item)});var w=e("#"+s._id+b+"_excelDlg").width();v<m+w&&(m=m-w-f),s._excelFilter.openXFDialog({field:o.field,enableResponsiveRow:!0,displayName:o.headerText,dataSource:y,query:null,position:{X:m,Y:g},dimension:{height:e(window).height(),width:e(window).width()},cssClass:"resFilter",type:b,format:o.format,localizedStrings:x}),e(".e-filtericon").data("isClicked",!1),l.data("isClicked",!0),s._customFilter=null}s._filterIconTarget=i}this._addRemoveAnimateClass(l)}else l.hasClass("e-columnmenu-icon")?(l.data("isClicked")?(s._clearColumnMenu(),l.data("isClicked",!1)):(s._renderColumnMenu(i),e(".e-columnicon").data("isClicked",!1),l.data("isClicked",!0)),this._addRemoveAnimateClass(l)):s._clearColumnMenu()
;return!!l.hasClass("e-checkbox")||!(l.hasClass("e-columnmenu-icon")||l.hasClass("e-column-filter-icon")||l.hasClass("e-column-filtered-icon"))&&void 0},_renderResponsiveExcelFilter:function(i,s){var a=this,r=e.inArray(s,a._excelColTypes),n=e(window).width(),o=e(window).height();-1!=r&&(e("#"+a._id+s+"_excelDlg").remove(),a._excelColTypes.splice(r,1),a._excelFilter._openedFltr=null),a._excelFilter.renderDialog(s);var l=t.buildTag("div.e-treegird-filterDialogHeaderDiv","",{width:"100%"}),d=t.buildTag("div.e-treegrid-label","<span>"+a._columnMenuTexts.menuFilter+"</span>",{"padding-top":"10px","font-weight":"bold","font-family":"Segoe UI, Helvetica Neue, Ubuntu, Arial"});e(".e-filterMenuBtn").length>0&&e(".e-filterMenuBtn").remove();var h,c=t.buildTag("div.e-filterMenuBtn"),u=t.buildTag("input.e-responsiveFilterBtnLeft e-flat e-btnsub","",{"margin-left":"15px"}),p=t.buildTag("input.e-responsiveFilterBtnRight e-flat e-btncan","",{"margin-right":"12px"});l.append(d),a._excelDlg=h="#"+a._id+s+"_excelDlg",u.ejButton({text:a.localizedLabels.okButtonText,type:"button",click:function(t){a._excelFilter._fltrBtnHandler(),e(h).css("display","none")}}),p.ejButton({text:a.localizedLabels.cancelButtonText,type:"button",click:function(){e(h).css("display","none"),a.element.css("display","block")}}),e(h).children().not(".e-searchcontainer").remove();var m=a._excelFilter,g=t.buildTag("div.e-treegrid-resFilterleftIcon","",{"padding-top":"10px"},{closeDialogue:h.slice(1),openDialogue:"responsiveFilter"}),f=t.buildTag("span.e-icon e-treegrid-resIcon e-treegrid-responsiveBack","",{},{closeDialogue:h.slice(1),openDialogue:"responsiveFilter"});g.click(function(t){e.proxy(a._closeDivIcon(t),this)}),l.append(g.append(f));var _=t.buildTag("div.e-treegrid-resFilterRigthIcon","",{"padding-top":"10px"},{closeDialogue:h.slice(1),gridEle:!0}),v=t.buildTag("span.e-icon e-treegrid-resIcon e-responsiveCustomFilter","",{},{closeDialogue:h.slice(1),gridEle:!0});"boolean"!=s&&l.append(_.append(v));var b=e(h).css({height:o-20,padding:"0px",width:"99.7%"}),x=b.find(".e-searchcontainer .e-searchbox").css("margin-top","10px");x.children().css("margin-top","10px");var y=b.find(".e-checkboxlist"),w=.65*o;a._checkBoxDiv=y,e(b.find(".e-searchcontainer")).addClass("e-treegrid-resultSearch");b.find(".e-treegrid-resultSearch .e-btncontainer").remove();u.addClass("e-treegrid-responsiveFilterBtnLeft").css({width:"43.6%"}),p.addClass("e-treegrid-responsiveFilterBtnRight").css("width","43.6%"),b.find(".e-excelLabel").remove();var C=t.buildTag("div.e-excelLabel",i.headerText,{"margin-top":"10px"}),x=b.find(".e-searchcontainer");C.insertBefore(x.find(".e-searchbox")),b.prepend(l),b.find(".e-searchbox span").css("top","23px"),e(h).append(c.append(u).append(p)),y.ejScroller({height:w,width:"98%"}).ejScroller("refresh");var S={True:a.localizedLabels.trueText,False:a.localizedLabels.falseText},T=[];e.grep(a.model.flatRecords,function(e){e.isSummaryRow||T.push(e.item)}),a._excelFilter.openXFDialog({field:i.field,enableResponsiveRow:!0,displayName:i.headerText,dataSource:T,query:null,position:{X:0,Y:0},dimension:{height:o,width:n},cssClass:"resFilter",type:s,format:i.format,localizedStrings:S}),e(h).insertAfter(a.element),_.click(function(r){e.proxy(a._closeDivIcon(r),this);var l=o-30;m._openCustomFilter("customfilter");var d=e("#"+a._id+s+"_CustomFDlg").addClass("e-responsviesExcelFilter");if(a._customFilter=d,t.isNullOrUndefined(d.find(".e-treegird-filterDialogHeaderDiv")[0])){var g=t.buildTag("div.e-treegird-filterDialogHeaderDiv"),f=t.buildTag("div.e-treegrid-label","<span>"+m.localizedLabels.title+"</span>",{"font-weight":"bold","font-family":"Segoe UI, Helvetica Neue, Ubuntu, Arial"});g.append(f);var _=t.buildTag("div.e-treegrid-resFilterleftIcon","",{},{closeDialogue:a._id+s+"_CustomFDlg",openDialogue:h.slice(1)}),v=t.buildTag("span.e-icon e-treegrid-resIcon e-treegrid-responsiveBack","",{},{closeDialogue:a._id+s+"_CustomFDlg",openDialogue:h.slice(1)});_.click(function(t){d.css("display","none"),e("#"+a._id+s+"_CustomFDlg_wrapper").css("display","none");var r={True:a.localizedLabels.trueText,False:a.localizedLabels.falseText},l=[];e.grep(a.model.flatRecords,function(e){e.isSummaryRow||l.push(e.item)}),a._excelFilter.openXFDialog({field:i.field,enableResponsiveRow:!1,displayName:i.headerText,dataSource:l,query:null,position:{X:0,Y:0},dimension:{height:o,width:n},type:s,format:i.format,localizedStrings:r})}),g.append(_.append(v));var b=t.buildTag("div.e-treegrid-resFilterRigthIcon","",{},{closeDialogue:a._id+s+"_CustomFDlg",gridEle:!0}),x=t.buildTag("span.e-icon e-treegrid-resIcon e-treegrid-responsiveClose","",{},{closeDialogue:a._id+s+"_CustomFDlg",gridEle:!0});g.append(b.append(x)),b.click(function(t){d.css("display","none"),e("#"+a._id+s+"_CustomFDlg_wrapper").css("display","none"),a.element.css("display","block")}),d.prepend(g),d.insertAfter(a.element),d.find(".e-dlgfields").css("width","98%");var y=d.find(".e-dlgfields:first").css("width","92%").css({"margin-left":"6px","font-family":"Segoe UI, Helvetica Neue, Ubuntu, Arial"});y.css("margin-top","4%");var w=d.find(".e-dlgfields").find(".e-fieldset legend").text();t.buildTag("div.e-responsiveLabelDiv",w,{"margin-left":"6px","font-family":"Segoe UI, Helvetica Neue, Ubuntu, Arial"}).insertAfter(y);var C=d.find(".e-dlgfields").find(".e-fieldset").find("table").css("width","100%");d.find(".e-dlgfields").find(".e-fieldset").replaceWith(C);C.parent("div").addClass("e-responsiveExcelFilterFieldDiv"),C.find(".e-dropdownlist");C.find(".e-dropdownlist").each(function(t,i){var s=e(i).ejDropDownList("model.dataSource");e(i).ejDropDownList("destroy").ejDropDownList({width:"80%",dataSource:s})}),C.find(".e-autocomplete").each(function(t,i){var s=e(i).ejAutocomplete("model");e(i).ejAutocomplete("destroy").ejAutocomplete({width:"90%",dataSource:s.dataSource,fields:s.fields,enableDistinct:!0})}),C.find(".e-datepicker").each(function(t,i){e(i).ejDatePicker("instance").option("width","90%")}),C.find(".e-datetimepicker").each(function(t,i){e(i).ejDateTimePicker("instance").option("width","90%")}),C.find(".e-numerictextbox").each(function(t,i){e(i).ejNumericTextbox("instance").option("width","90%")})}var S=u.clone(),T=p.clone();S.ejButton({text:a.localizedLabels.okButtonText,type:"button",click:function(t){a._excelFilter._openedFltr=d,a._excelFilter._fltrBtnHandler(),d.css("display","none"),e("#"+a._id+s+"_CustomFDlg_wrapper").css("display","none")}}),T.ejButton({text:a.localizedLabels.cancelButtonText,type:"button",click:function(){d.css("display","none"),e("#"+a._id+s+"_CustomFDlg_wrapper").css("display","none")}}),d.append(c.clone().append(S).append(T)),S.css("width","43.6%"),T.css("width","43.6%");var R=d.find(".e-dlgfields .e-btncontainer").remove();R.find("input:first").addClass("e-responsiveFilterBtnLeft").css("width","45.6%"),R.find("input:last").addClass("e-responsiveFilterBtnRight"),d.ejDialog({enableModal:!1,height:l,width:"100%",position:{X:0,Y:0},enableResize:!1,showHeader:!1}).ejDialog("open");var k=a.getMaxZIndex()+1,O=e("#"+a._id+s+"_CustomFDlg_wrapper").css("z-index");k=k>O?k:O,d.css({position:"absolute",top:"0px",left:"0px","z-index":k,width:"95.5%"}),a._mediaStatus=!0})},_closeDivIcon:function(i){var s=e(i.target);if(!t.isNullOrUndefined(s.attr("closeDialogue"))){var a=e("#"+s.attr("closeDialogue"));t.isNullOrUndefined(a.data("ejDialog"))?a.css("display","none"):a.ejDialog("close")}if(t.isNullOrUndefined(s.attr("gridEle"))||this.element.css("display","block"),!t.isNullOrUndefined(s.attr("openDialogue")))if(this.model.enableResponsiveRow||-1!=s.attr("closeDialogue").indexOf("Custom")){var a=e("#"+s.attr("openDialogue"));t.isNullOrUndefined(a.data("ejDialog"))?a.css("display","block"):a.ejDialog("open")}else this.element.css("display","block")},_getExcelPredicate:function(i){var s,a=this,r=a.model,n=e.extend(!0,[],r.filterSettings.filteredColumns),o=n.length;a._excelFilter.getPredicate(n,null,!0);for(var l=a._excelFilter._predicates[0],d=0;d<o;d++){var h=n[d];if(h.value==a._dropDownListBlanksText){var c=t.Predicate(h.field,"equal",null,!0);c=c.or(h.field,"equal","",!0),l[h.field]=c,s=void 0!=s?s.and(c):c}else s=t.isNullOrUndefined(s)?t.Predicate(h.field,h.operator,h.value,!h.matchcase):h.isComplex?s.and(h):s[h.predicate](h.field,h.operator,h.value,!h.matchcase);t.isNullOrUndefined(i)&&a._storePreviousFilteredValue(h.field,h.value,h.operator)}return s},_checkFilterType:function(i){var s=this,a=s.model,r=a.filterSettings,n=i.filterEditType?i.filterEditType:i.editType;if(n=n.toLowerCase(),"excel"==r.filterType&&"menu"==i.filterType&&-1==e.inArray(n,s._menuColTypes)){var o,l;switch(n){case"stringedit":o="String";break;case"numericedit":o="Numeric";break;case"datepicker":o="Datepicker";break;case"datetimepicker":o="Datetimepicker";break;case"dropdownedit":o="Dropdown",l=i;break;case"booleanedit":o="Boolean";break;default:o="String",n="stringedit"}s._renderEdittypeFilterMenu(o,l),s._menuColTypes.push(n)}else"menu"==r.filterType&&"excel"==i.filterType&&t.isNullOrUndefined(s._excelFilter)&&s._renderExcelFilter()},_triggerColumnResize:function(i,s,a){var r=this,n=r.model,o=r.getHeaderTable().find(".e-columnheader"),l=o.find(".e-headercell"),d=r._cellIndex,h=(e(r._target),0),c=e(a.target);if("columnResizeStart"==i&&(this._isFrozenStackedResize=!1,r._orgX=s,-1!=(d=r._currentCell=r._cellIndex=r.getCellIndex(a))&&this._frozenColumnsLength>0&&n.showStackedHeader&&n.stackedHeaderRows.length>0&&(c.closest(".e-movablecontentdiv").length>0||c.closest(".e-movableheaderdiv").length>0||c.closest(".e-movablefooterdiv").length>0?h+=this._frozenColumnsLength:c.closest(".e-frozenheaderdiv").length>0&&(c.hasClass("e-stackedHeaderCell")?this._isFrozenStackedResize=!0:h+=e(this.getHeaderTable()[0]).find(".e-stackedHeaderCell").length))),-1!=r._currentCell){var u=l[r._currentCell+h],p=u.offsetWidth;if("columnResizeStart"==i){r._isStackedResize=e(u).hasClass("e-stackedHeaderCell");var m={};return m={columnIndex:d,column:r.model.columns[d],target:e(u),oldWidth:p},r._trigger("columnResizeStart",m)}if("columnResizeEnd"==i){var g=(o.find(".e-headercell").not(".e-detailheadercell").filter(":visible"),s-r._orgX);r._newWidth=p+g,r.__oldWidth=p;var m={};return m={columnIndex:d,column:n.columns[d],target:e(u),oldWidth:p,newWidth:r._newWidth,extra:g},r._trigger("columnResizeEnd",m)}this.model.columnResizeSettings.columnResizeMode!=t.TreeGrid.ColumnResizeMode.FixedColumns||this.model.isFromGantt?!this.model.isFromGantt&&this.model.columnResizeSettings.columnResizeMode==t.TreeGrid.ColumnResizeMode.NextColumn&&this.model.showTotalSummary&&this._colgroupRefresh():this._updateTableWidth();var m={},g=s-r._orgX;return p+g,m={columnIndex:d,column:n.columns[d],oldWidth:r.__oldWidth,newWidth:r._newWidth},r._trigger("columnResized",m)}},_headerMouseDown:function(t){var i,s,a=this,r=a._getCoordinate(t),n=a.model;if(a._cellMouseLeave(),a._headerMouseLeave(),!a.model.isFromGantt&&n.contextMenuSettings.showContextMenu&&a._contextMenuEventBinding(t),"touchstart"==t.type?(i=a._getElementByPosition(r.pageX,r.pageY),a._on(a.element,"touchmove",a._mouseMove),a._resizer&&a._resizer._touchStart(t)):i=e(t.target),a._on(e(document),"mouseup touchend",a._headerMouseUp),n.allowColumnReordering&&(i.closest(".e-columnheader").length>0&&a.dragColumn(t),"touchstart"==t.type&&(a._dragColumnTooltipTimer=window.setTimeout(function(){a._touchstart=!1,a._dragTooltip||"touchstart"!=t.type||(a.dragColumnToolTip(t),a._dragTooltip&&a._on(a.element,"touchmove",a.dragColumnToolTip))},550))),a.model.allowColumnResize){n.isFromGantt?a._on(a.element.closest(".e-gantt"),"mouseup touchend",a._mouseUp):a._on(a.element,"mouseup touchend",a._mouseUp),s=i.closest("tr"),this._target=i;var o=r.pageX;r.pageY;if(-1!=navigator.userAgent.indexOf("WebKit")&&(o=r.pageX,r.pageY-document.body.scrollTop),s.length>0&&e(s[0]).hasClass("e-resizedragicon")&&!i.hasClass("e-columnicon")){if(i.is(".e-headercelldiv")&&(i=e(i[0].parentNode)),t.target=i,a._frozenColumnsLength>0){var l=i.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname");a.getColumnByField(l)}if(this._triggerColumnResize("columnResizeStart",o,t))return}"touchstart"!=t.type&&a._resizer._mouseDown(t)}},_headerMouseUp:function(i){var s,a=this,r=a.model,n={},o=a._getCoordinate(i);if("touchend"==i.type?(s=a._getElementByPosition(o.pageX,o.pageY),a._off(a.element,"touchmove",a._mouseMove)):s=e(i.target),a._off(e(document),"mouseup touchend",a._headerMouseUp),r.contextMenuSettings.showContextMenu&&a._contextMenuHandler&&a._displayContextMenu?a._headerRightClick(i):a._contextMenuHandler=!1,a._displayContextMenu=!0,a.model.allowColumnResize&&(r.isFromGantt?a._off(a.element.closest(".e-gantt"),"mouseup touchend",a._mouseUp):a._off(a.element,"mouseup touchend",a._mouseUp),this.element.find(".e-reSizeColbg").remove(),this.element.find(".e-columnheader").removeClass("e-resizedragicon"),a._resizer._expand=!1),r.allowColumnReordering&&(window.clearTimeout(this._dragColumnTooltipTimer),this._dragColumnTooltipTimer=null,a._off(a.element,"mousemove touchmove",a.dragColumnToolTip),e(a._reordervline).remove(),e(a._dragmouseOverTooltip).remove(),a._posx==o.pageX&&a._posy==o.pageY||(a._mouseDragged=!0),r.allowColumnReordering&&s.closest(".e-headercell").length>0&&"mousemove"==a._headerDragStatus)){var l=r.columns;n.targetColumn=l[a._currentIndex],n.targetColumnIndex=a._currentIndex,n.draggedColumn=a._draggedColumn,n.draggedColumnIndex=l.indexOf(a._draggedColumn),t.isNullOrUndefined(n.targetColumn.nonColumn)&&!t.isNullOrUndefined(n.targetColumnIndex)&&n.targetColumnIndex!=n.draggedColumnIndex&&(a._trigger("columnDrop",n),n.cancel||a.reorderColumn(n.draggedColumn.field,n.targetColumnIndex))}a._resetHeaderPrivateProperties()},_resetHeaderPrivateProperties:function(){this._timerDragDown&&(this._timerDragDown=window.clearInterval(this._timerDragDown)),this._timerDragUp&&(this._timerDragUp=window.clearInterval(this._timerDragUp));var e=this;e.model;e._draggedColumn=null,e._dragMouseDown=!1,e._dragTooltip=!1,e._headerDragStatus="",e._timerDragDown=null,e._timerDragUp=null,e._currentIndex=null,e._dragmouseOverTooltip=null},_contentMouseDown:function(i){var s=e(i.target),a=this,r=a.model,n=a._getCoordinate(i),o=s.closest(".e-treegrid").attr("id");if(a._contentPageY=n.pageY,a._contentPageX=n.pageX,a._on(e(document),"mouseup touchend",a._mouseupHandler),r.isFromGantt){"touchstart"==i.type&&(a._ganttTouchTrigger=!0);var l={ctrlKey:i.ctrlKey};a._trigger("touchHandler",l),i.ctrlKey=l.ctrlKey}if("touchstart"==i.type&&(a._isTouchEvent=!0,a._isTouchTrigger=!0),e("#"+o+"_selectionpopup").is(":visible")&&(e("#"+o+"_selectionpopup").find(".e-rowselect").hasClass("e-spanclicked")?(i.ctrlKey=!0,a.model.selectionSettings.selectionMode==t.TreeGrid.SelectionMode.Row&&(a._multiSelectCtrlRequest=!0)):(i.ctrlKey=!1,a._multiSelectCtrlRequest=!1)),!a.model.isFromGantt&&r.contextMenuSettings.showContextMenu&&a._contextMenuEventBinding(i),!(s.hasClass("e-vhandle")||s.hasClass("e-vscrollbar")||s.hasClass("e-vup")||s.hasClass("e-vdown")||s.hasClass("e-vhandlespace")||s.hasClass("e-hhandle")||s.hasClass("e-hscrollbar")||s.hasClass("e-hdown")||s.hasClass("e-hhandlespace")||s.closest(".e-editedcell").length>0||s.closest(".e-unboundeditedcell").length>0||s.parent().hasClass("e-unboundcelldiv"))&&(a._mouseDown=!0,r.allowDragAndDrop&&(s.closest(".e-treegridrows").length>0||s.closest(".e-templatecell").length>0)&&("touchstart"==i.type?a._dragTooltipTimer=window.setTimeout(function(){a.dragRecord(i),a._multiSelectPopup&&a._multiSelectPopup.is(":visible")&&a._dragTooltip&&a._clearMultiSelectPopup()},550):a.dragRecord(i)),r.isFromGantt||"touchstart"==i.type&&a._on(a.element,"touchmove","#"+a._id+"e-gridcontent",a._touchScroll),i.ctrlKey||i.shiftKey||2==i.which||3==i.which))return!0},_touchScroll:function(t){var i,s,a,r,n,o=this,l=o.model,d=o._getCoordinate(t),h=o._contentPageX,c=o._contentPageY,u=d.pageX,p=d.pageY;o._isTouchTrigger=!1,r=u-h,n=p-c,"touchmove"==t.type&&t.preventDefault(),o._mouseDown&&!o._dragMouseDown&&(window.clearTimeout(this._dragTooltipTimer),this._dragTooltipTimer=null,window.clearTimeout(this._dragColumnTooltipTimer),this._dragColumnTooltipTimer=null,i="touchmove"==t.type?o._getElementByPosition(d.pageX,d.pageY):e(t.target),!l.isFromGantt&&i.closest("div").find(".e-content")&&(a=c<p?-Math.abs(n):Math.abs(n),s=h<u?-Math.abs(r):Math.abs(r),o._contentPageX=u,o._contentPageY=p,o._updateScrollPosition(i,s,a)))},_updateScrollPosition:function(e,t,i){var s=this,a=s.getScrollElement().ejScroller("option","scrollTop"),r=s.getScrollElement().ejScroller("option","scrollLeft"),n=r+t,o=a+i,l=s.isVScroll()?s.getMaxScrollHeight():null,d=s.getScrollElement().ejScroller("isHScroll")?s.getScrollElement().find(".e-content").get(0).scrollWidth:null;l&&((o=l<o?l:o<0?0:o)>0&&a>0||o<l&&a<l)&&(s._$gridContent.scrollTop(0),s.getScrollElement().ejScroller("scrollY",o,!0)),d&&((n=d<n?d:n<0?0:n)>0&&r>0||n<d&&r<d)&&(s._$gridContent.scrollLeft(0),s.getScrollElement().ejScroller("scrollX",n,!0))},_mouseMove:function(t){var i=this,s=this.model;window.clearTimeout(this._dragColumnTooltipTimer),this._dragColumnTooltipTimer=null,"touchmove"==t.type&&i._resizer&&i._resizer._allowStart&&(i._headerDragStatus=""),i.model.allowColumnResize&&0==i._headerDragStatus.length&&(i._resizer._mouseMove(t),i._resizer._expand&&i._cancelEditState(),"col-resize"!==e(t.target).parent().css("cursor")&&(!(s.allowSorting||s.showColumnChooser||!s.showColumnChooser&&s.allowFiltering&&"menu"==s.filterSettings.filterType)||e(t.target).closest("th").hasClass("e-detailheadercell")||e(t.target).closest("th").hasClass("e-stackedHeaderCell")?i.getHeaderTable().find(".e-columnheader").css({cursor:"default"}):i.getHeaderTable().find(".e-columnheader").css({cursor:"pointer"})))},_frozenWidth:function(){for(var e,t,i=this,e=i.getContentTable().find("colgroup").find("col").slice(0,i.model.scrollSettings.frozenColumns),t=0,s=0;s<e.length;s++)t+="none"==e[s].style.display?0:parseInt(e[s].style.width.replace("px",""));return t},_mouseUp:function(i){var s=this,a=s.model;if("mousemove"!=s._headerDragStatus&&a.allowColumnResize)if((e(i.target).hasClass("e-headercelldiv")||e(i.target).hasClass("e-reSizeColbg"))&&(s._focusTreeGridElement(),s._clearColumnMenu()),e(i.target).hasClass("e-reSizeColbg")||e(i.target).closest(".e-gridheader").length>0){if(s._resizer._expand){var r=i.clientX;i.clientY;if(-1!=navigator.userAgent.indexOf("WebKit")&&(r=i.pageX,i.pageY),"touchend"==i.type&&(r=i.originalEvent.changedTouches[0].clientX,i.originalEvent.changedTouches[0].clientY),!t.isNullOrUndefined(s._currentCell)&&this._triggerColumnResize("columnResizeEnd",r,i))return this.element.find(".e-reSizeColbg").remove(),s._resizer._expand=!1,void(a.isFromGantt?s._off(s.element.closest(".e-gantt"),"mouseup touchend",s._mouseUp):s._off(s.element,"mouseup touchend",s._mouseUp));if(!t.isNullOrUndefined(s._currentCell)&&1==a.columns[s._currentCell].isFrozen&&r+100>this._gridWidth)return;s._resizer._mouseUp(i);var n=parseInt(a.columns[s._currentCell].width);if(a.isFromGantt&&"msie"==t.browserInfo().name&&a.showColumnChooser&&!t.isNullOrUndefined(n)){var o=e(s.getHeaderTable().find("thead").find("th")[s._currentCell]);n<42?this._getColWidth(s._currentCell,o):o.hasClass("e-column-menu-padding")||o.addClass("e-column-menu-padding")}!t.isNullOrUndefined(s._currentCell)&&s._currentCell>=0&&s._currentCell<a.columns.length&&a.columns[s._currentCell]&&(a.columns[s._currentCell].width=s._resizer._newWidth),!t.isNullOrUndefined(s._currentCell)&&this._triggerColumnResize("columnResized",r,i),a.allowTextWrap&&a.allowColumnResize&&s._updateRowHeight(),"auto"==a.sizeSettings.height&&a.allowColumnResize&&(s.getScrollElement().ejScroller("refresh"),s._updateContentHeight()),s.getScrollElement().ejScroller("refresh"),s._updateHeaderScrollLeft(),s._updateScrollCss(),a.isFromGantt&&s._trigger("refreshScrollCss")}}else this.element.find(".e-reSizeColbg").remove(),s._resizer._expand=!1,a.isFromGantt?s._off(s.element.closest(".e-gantt"),"mouseup touchend",s._mouseUp):s._off(s.element,"mouseup touchend",s._mouseUp)},_resizeFilteringElements:function(){var e=this;if(e.model.allowFiltering){var i={},s=e.model.columns.length;i.requestType=t.TreeGrid.Actions.Filter;for(var a=0;a<s;a++)e.model.columns[a].width=e.columnsWidthCollection[a],i.fieldname=e.model.columns[a].field,this._filteringElements(i)}},_enableEditingEvents:function(){var e=this;e.model.editSettings.allowEditing?t.isTouchDevice()?(e._off(e.element,"doubletap ",".e-gridcontent",e._editdblClickHandler),e._on(e.element,"doubletap ",".e-gridcontent",e._editdblClickHandler)):(e._off(e.element,"dblclick ",".e-gridcontent",e._editdblClickHandler),e._on(e.element,"dblclick ",".e-gridcontent",e._editdblClickHandler)):t.isTouchDevice()?e._off(e.element,"doubletap ",".e-gridcontent",e._editdblClickHandler):e._off(e.element,"dblclick ",".e-gridcontent",e._editdblClickHandler)},_saveCellHandler:function(i){var s,a=e(i.target),r=this,n=r.model;if(n.isFromGantt&&a.closest("tr").length){var o=a.closest("tr"),l=(r.getRows(),this.getIndexByRow(o)),d=n.currentViewData&&n.currentViewData[l];s=n.updatedRecords.indexOf(d)}a.hasClass("e-vhandle")||a.hasClass("e-vscrollbar")||a.hasClass("e-vup")||a.hasClass("e-vdown")||a.hasClass("e-vhandlespace")||a.hasClass("e-vscroll")||a.hasClass("e-hhandle")||a.hasClass("e-hscrollbar")||a.hasClass("e-hup")||a.hasClass("e-hdown")||a.hasClass("e-hhandlespace")||a.hasClass("e-hscroll")||((a.closest(".e-gridcontent").length>0||a.hasClass(".e-gridcontent")||a.hasClass("e-summarytreegridexpand")||a.hasClass("e-summarytreegridcollapse"))&&(r._isRowEdit?0==a.closest("form#"+r._id+"EditForm").length&&0==a.closest("form#"+r._id+"EditFrozenForm").length&&e("#"+r._id+"EditForm").length>0&&r.saveRow():0==a.closest(".e-popup").length&&0==a.closest(".e-rowcell").find("#"+r._id+"EditForm").length&&0==a.closest("form#"+r._id+"EditFrozenForm").length&&e("#"+r._id+"EditForm").length>0&&r.saveCell()),"row"!=n.selectedMode||!n.isFromGantt||!n.updatedRecords.length||t.isNullOrUndefined(s)||a.hasClass("e-treegridexpand")||a.hasClass("e-treegridcollapse")||this.selectedRowIndex()==s||r._rowSelectingEventTrigger(this.selectedRowIndex(),s)||(n.allowSelection&&r.selectRows(s),r._rowSelectedEventTrigger(s)))},_contextMenuAction:function(t){var i,s=this,a=s.model,r=s._getCoordinate(t);if(i="taphold"==t.type?s._getElementByPosition(r.pageX,r.pageY):e(t.target),a.contextMenuSettings.showContextMenu){if(s._multiSelectCtrlRequest&&(s._multiSelectCtrlRequest=!1),3!=t.which||s._isTouchEvent)return s._contextMenuHandler=!0,!0;i.closest(".e-gridcontent").length>0?s._rightClick(t):i.closest(".e-gridheader").length>0&&s._headerRightClick(t)}else t.stopPropagation()},_rightClick:function(i){var s,a,r,n=this,o=n.model,l=e(i.target),d=(l[0].parentNode,{}),h=!1,c=n.getUpdatedRecords();if(l.closest(".e-treegrid").attr("id")!==this._id)return!1;if("cell"==o.selectionSettings.selectionMode&&"dialogEditing"!=o.editSettings.editMode&&(o.editSettings.editMode="cellEditing"),n.model.contextMenuSettings.showContextMenu){if(n._clearContextMenu(),this._removeDetailsRow(),n.disableTooltip(),l.hasClass("e-summaryrowcell")||l.hasClass("e-summarytitle"))return;if((l.hasClass("e-cell")||l.hasClass("e-treegridexpand"))&&l.closest("tr"),s=l.closest("tr"),a=n.getIndexByRow(s),n.model.currentViewData=n.getCurrentViewData(),r=n.model.currentViewData[a],a=c.indexOf(r),d.data=r,d.recordIndex=a,o.isEdit?h=l.closest(".e-rowcell").find("form#"+n._id+"EditForm").length>0||l.closest(".e-rowcell").find("form#"+n._id+"EditFrozenForm").length>0:this._isRowEdit&&(h=l.closest(".e-rowedit").find("form#"+n._id+"EditForm").length>0||l.closest(".e-rowedit").find("form#"+n._id+"EditFrozenForm").length>0||l.closest(".e-addedrow").find("form#"+n._id+"EditForm").length>0||l.closest(".e-addedrow").find("form#"+n._id+"EditFrozenForm").length>0),!h&&(o.isEdit||this._isRowEdit)){if(!this.editFormValidate())return!0;n._saveEditedElements()}if(null==n.dataSource()||0==n.dataSource().length||h||0==o.flatRecords.length)n._contextMenuItems=[],n._contextMenuItems=n._getContextMenuItems(),n._subContextMenuItems=[],n._updateContextmenuOption(a,r),n._clearContextMenu(),n._contextMenuItems.length>0&&n._renderContextMenu(i,a,r,h);else if(r){if(i.preventDefault(),n._contextMenuItems=[],n._contextMenuItems=n._getContextMenuItems(),n._subContextMenuItems=[],n._subContextMenuItems=n._getsubContextMenuItems(),n._updateContextmenuOption(a,r),n._clearContextMenu(),"row"==o.selectionSettings.selectionMode&&o.allowSelection&&!n._rowSelectingEventTrigger(this.selectedRowIndex(),a,!1,i.type)&&(n.selectRows(a),n._rowSelectedEventTrigger(a,null,!1,i.type)),"cell"==o.selectionSettings.selectionMode){var u=n.getCellIndex(i);n.selectCells([{rowIndex:a,cellIndex:u}]),n._rowIndexOfLastSelectedCell=a}n._contextMenuItems.length>0&&n._renderContextMenu(i,a,r,h),n.editFormValidate()&&n._cancelSaveTools()}}n._clearColumnMenu(),n._contextMenuHandler=!1,!n.model.isFromGantt&&o.contextMenuSettings.showContextMenu&&(t.isTouchDevice()?n._off(n.element,"taphold",n._contextMenuAction):n._off(n.element,"contextmenu",n._contextMenuAction))},_contextMenuEventBinding:function(e){var i=this;t.isTouchDevice()?(i._off(i.element,"taphold",i._contextMenuAction),i._on(i.element,"taphold",i._contextMenuAction)):(i._off(i.element,"contextmenu",i._contextMenuAction),i._on(i.element,"contextmenu",i._contextMenuAction))},_headerRightClick:function(i){var s=this,a=s.model,r=e(i.target);if(i.preventDefault(),a.contextMenuSettings.showContextMenu){s._clearColumnMenu(),s._removeDetailsRow(),s.disableTooltip(),s._headerContextMenuItems=[],s._headerContextMenuItems=s._getHeaderContextMenuItems(i);var n=r.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname"),o=s.getColumnByField(n);s._headerContextMenuItems.length>0&&!o.nonColumn&&s._renderHeaderContextMenu(i),s.editFormValidate()&&s._cancelSaveTools(),s._contextMenuHandler=!1,!a.isFromGantt&&a.contextMenuSettings.showContextMenu&&(t.isTouchDevice()?s._off(s.element,"taphold",s._contextMenuAction):s._off(s.element,"contextmenu",s._contextMenuAction))}},_editdblClickHandler:function(i){var s,a=this,r=a.model,n=e("#"+a._id+"EditForm"),o={},l=e(i.target),d=l.closest("tr"),h=a._cellEditingDetails;if(r.isFromGantt&&1==r.readOnly||l.hasClass("e-unboundcelldiv")||l.hasClass("e-unboundcell")||l.closest("td").hasClass("e-unboundcell")||i.ctrlKey)return!0;var c=a.getUpdatedRecords();if(!(l.hasClass("e-vhandle")||l.hasClass("e-vscrollbar")||l.hasClass("e-vup")||l.hasClass("e-vdown")||l.hasClass("e-vhandlespace")||l.hasClass("e-treegridexpand")||l.hasClass("e-treegridcollapse")||l.hasClass("e-hhandle")||l.hasClass("e-hscrollbar")||l.hasClass("e-hup")||l.hasClass("e-hdown")||l.hasClass("e-hhandlespace")||l.hasClass("e-summaryrowcell")||l.hasClass("e-footersummaryrowcell")||l.hasClass("e-summarytitle")||l.hasClass("e-lastsummaryrow"))){if(l.closest(".e-treegrid").length&&l.closest(".e-treegrid").attr("id")!==this._id)return!1;if(l.hasClass("e-rowcell")||l.parent().hasClass("e-rowcell")||l.closest("td").hasClass("e-rowcell")||l.closest("td").hasClass("e-rowcell")&&l.hasClass("e-cell")){if("normal"===r.editSettings.editMode&&r.editSettings.allowEditing){if("resourceView"==r.viewType)return!0;o.requestType=t.TreeGrid.Actions.BeginEdit,a._trigger("actionBegin",o)}if(a._cellEditingDetails.cancelSave)return void(a._cellEditingDetails.cancelSave=!1);if(0===n.length&&null!==a.getRows()){if("cellediting"==r.editSettings.editMode.toLowerCase()||"batchediting"==r.editSettings.editMode.toLowerCase()&&"cell"==r.editSettings.batchEditSettings.editMode.toLowerCase()){if(a._focusTreeGridElement(),a._cellEditingDetails.columnIndex=a.getCellIndex(i),"click"!=r.editSettings.beginEditAction&&(a._cellEditingDetails.rowIndex=a.getRowIndex(i)),s=r.currentViewData[a._cellEditingDetails.rowIndex],s.summaryRow)return;if(r.selectedItem=s,0==r.columns[h.columnIndex].allowEditing||"resourceView"==r.viewType&&"unassignedTask"==s.eResourceTaskType)return;var u=a._cellEditingDetails.columnIndex>=0&&r.columns[a._cellEditingDetails.columnIndex].field;u&&(a.updateScrollBar(),r.editSettings.allowEditing&&a.cellEdit(a._cellEditingDetails.rowIndex,u))}else if(("rowediting"==r.editSettings.editMode.toLowerCase()||"dialogediting"==r.editSettings.editMode.toLowerCase()||"batchediting"==r.editSettings.editMode.toLowerCase()&&("row"==r.editSettings.batchEditSettings.editMode.toLowerCase()||"dialog"==r.editSettings.batchEditSettings.editMode.toLowerCase()))&&(r.currentViewData=a.getCurrentViewData(),-1!=a.getCellIndex(i)&&-1!=a.getRowIndex(i))){a._cellEditingDetails.columnIndex=a.getCellIndex(i);var p=a.getRowIndex(i);if(r.enableVirtualization){var m="row"==r.selectionSettings.selectionMode?r.selectedItem:r.updatedRecords[a._rowIndexOfLastSelectedCell];p=c.indexOf(m)}"dialogediting"==a.model.editSettings.editMode.toLowerCase()||"batchediting"==a.model.editSettings.editMode.toLowerCase()&&"dialog"==r.editSettings.batchEditSettings.editMode.toLowerCase()?a._showTreeGridAddEditDialog(p):(a.updateScrollBar(),a._editRow(p,void 0,a._cellEditingDetails.columnIndex))}n=e("#"+a._id+"EditForm"),n.length>0&&a._editAddTools(),e.isFunction(e.validator)&&a._initValidator()}a.model.allowSelection||d.find(".e-active").removeClass("e-active").removeClass("e-selectionbackground"),a._clearContextMenu(),this._removeDetailsRow()}}},_popupHide:function(i){var s=this,a=s.model.columns,r=null,n=null,o=null,l=i&&e(i).closest("td");s.model.allowFiltering&&"filterbar"==s.model.filterSettings.filterType&&(l=i&&e(i).closest("td, th")),e("#"+s._id+"_ColumnMenu").length>0&&(t.isTouchDevice()||s._clearColumnMenu());for(var d=0;d<a.length;d++)if(r=null,a[d]){if(o=a[d].field.split(".").join(""),"datepicker"==a[d].editType||"datetimepicker"==a[d].editType)r=e("#"+s._id+o).data("ejDatePicker");else if("dropdownedit"==a[d].editType){var h=e("#"+s._id+o).data("ejDropDownList");h&&0==e(l).find("#"+h._id).length&&h.model&&h.hidePopup()}if(r&&0==e(l).find("#"+r._id).length&&r.hide(),"datepicker"!=a[d].filterEditType&&"datetimepicker"!=a[d].filterEditType||(n=e("#"+s._id+"_"+o+"_filterbarcell").data("ejDatePicker"))&&0==e(l).find("#"+n._id).length&&n.hide(),"dropdownedit"==a[d].filterEditType){var h=e("#"+s._id+"_"+o+"_filterbarcell").data("ejDropDownList");h&&0==e(l).find("#"+h._id).length&&h.hidePopup()}}},_mouseWheel:function(t){var i=this,s=i.model,a=null,r=t;if(i._popupHide(),t=t.originalEvent,!e(t.target).hasClass("e-footersummaryrowcell")){if(i.getScrollElement().height()>i._$gridContainer.height())return void i.getScrollElement().ejScroller("scrollY",0,!0);if(t.wheelDelta?(a=-t.wheelDelta/120,window.opera&&parseFloat(window.opera.version,10)<10&&(a=-a)):t.detail&&(a=t.detail/3),!a)return!1;var n=i.getScrollElement().ejScroller("option","scrollTop"),o=n+57*a,l=this.model.isFromGantt?parseInt(this.getRecordsHeight())-(i._viewPortHeight-18):"auto"==s.sizeSettings.height?0:this.getMaxScrollHeight();if(o>l&&(o=l),o<0&&(o=0),n!=o)try{t.preventDefault?t.preventDefault():r.preventDefault()}catch(e){}return i.updateScrollTop(o),!0}},_getCollapsedParentItem:function(e){var t=e.parentItem;return t?!0===this.getExpandStatus(t)?t:this._getCollapsedParentItem(t):null},_getRecordTopPosition:function(e,t){var i={},s=0,a=this.model;if("resourceView"==a.viewType){for(var r=0;r<=t;r++)r==t?i.bottom=s+this._getTemplateRowHeight(e[r]):s+=this._getTemplateRowHeight(e[r]);i.top=s}else i.top=t*(a.rowHeight+this._detailsRowHeight),i.bottom+=a.rowHeight+this._detailsRowHeight;return i},updateScrollBar:function(e){var i,s,a,r,n,o,l,d,h=this,c=h.model,u=0,p=h.getUpdatedRecords();if(d=c.allowSelection?"row"==c.selectionSettings.selectionMode?this.selectedItem():p[h._rowIndexOfLastSelectedCell]:this.selectedItem(),i=c.allowPaging?p:h._isHierarchyFiltering&&c.enableVirtualization?h._updateFilterParent:h.getExpandedRecords(p),s=e||0==e?i.indexOf(p[e]):i.indexOf(d),c.allowTextWrap){
var m=h.getUpdatedRecords(),s=m.indexOf(d);if(c.enableVirtualization)a=h._getAvgTextWrapRowHeight("updateHeight",s).height,r=m[s].textWrapRowHeight+h._detailsRowHeight;else{var g=t.TreeGrid.getRowByIndex(h,s);g.length>0?(r=g.height()+h._detailsRowHeight,a=g[0].offsetTop):(r=c.rowHeight+h._detailsRowHeight,a=s*r)}}else{var f=this._getRecordTopPosition(i,s);r=c.rowHeight+this._detailsRowHeight,a=f.top}var _,v=a+r,b=h.getScrollElement().children(".e-content").length;if(_=b?h.getScrollElement().children(".e-content").scrollTop():h.getScrollElement().scrollTop(),n=c.allowTextWrap?h.model.enableVirtualization?h._getAvgTextWrapRowHeight("updateHeight").height:h._$gridContentTable.height():this.getRecordsHeight(),(h.getScrollElement().ejScroller("isHScroll")||h.element.find(".e-borderbox").length>0)&&(u=18),o=a<_,l="auto"!=c.sizeSettings.height&&_+h._viewPortHeight-u<v,o||l){a+h._viewPortHeight>n&&(a=n-h._viewPortHeight,l&&(a+=u));var x={requestType:t.TreeGrid.Actions.Scroll,delta:a};b?h.updateScrollTop(a):(h.getScrollElement().scrollTop(x.delta),h._completeAction(x)),c.enableVirtualization&&h._focusTreeGridElement()}},_selectedItemDown:function(e){var t,i,s,a=this,r=this.model,n=a.getUpdatedRecords(),o=a.getExpandedRecords(n);if(t=a._prevSelectedItem&&this._getExpandStatusRecord(a._prevSelectedItem)?r.updatedRecords.indexOf(a._prevSelectedItem):0,a._shiftSelectedRecord&&this._getExpandStatusRecord(a._shiftSelectedRecord))s=o.indexOf(a._shiftSelectedRecord),i=r.updatedRecords.indexOf(o[s+1]);else{var s=o.indexOf(r.updatedRecords[t]);i=r.updatedRecords.indexOf(o[s+1])}(i>=n.length||-1==i)&&(i=n.length-1),a.updateScrollBar(i),a._multiSelectShiftRequest=!0,a.selectRows(t,i),a._rowSelectedEventTrigger(t,i,!1,e),a._multiSelectShiftRequest=!1,a._shiftSelectedRecord=r.updatedRecords[i]},_selectedItemUp:function(e){var t,i,s,a=this,r=this.model,n=a.getUpdatedRecords(),o=a.getExpandedRecords(n);if(t=a._prevSelectedItem&&this._getExpandStatusRecord(a._prevSelectedItem)?r.updatedRecords.indexOf(a._prevSelectedItem):0,a._shiftSelectedRecord&&this._getExpandStatusRecord(a._shiftSelectedRecord))s=o.indexOf(a._shiftSelectedRecord),i=r.updatedRecords.indexOf(o[s-1]);else{var s=o.indexOf(r.updatedRecords[t]);i=r.updatedRecords.indexOf(o[s-1])}i<0&&(i=0),a.updateScrollBar(i),a._multiSelectShiftRequest=!0,a.selectRows(t,i),a._rowSelectedEventTrigger(t,i,!1,e),a._multiSelectShiftRequest=!1,a._shiftSelectedRecord=r.updatedRecords[i]},_keyPressed:function(i,s,a){var r,n,o,l,d,h,c,u=this,p=this.model,m=[],g=[],f=u.getUpdatedRecords(),_=p.allowPaging?f:u.getExpandedRecords(p.updatedRecords);if(this._removeDetailsRow(),!p.allowKeyboardNavigation)return!1;if("dialogEditing"==this.model.editSettings.editMode&&e(s).closest("#"+this._id+"_dialogEdit").length)return!0;var v=!1,b=e(s),x=e("#"+u._id+"EditForm");if("downArrow"!=i&&"upArrow"!=i&&"saveRequest"!=i&&"moveCellLeft"!=i&&"moveCellRight"!=i&&"cancelRequest"!=i&&"INPUT"==b.prop("tagName"))return!0;var y,w,C,S,T,R,k,O,D,I;if(p.isFromGantt?(S=e("#"+u._id.replace("ejTreeGrid","")+"_ContextMenu"),T=e("#"+u._id.replace("ejTreeGrid","")+"_SubContextMenu")):(S=e("#"+u._id+"_ContextMenu"),T=e("#"+u._id+"_SubContextMenu")),R=e("#"+u._id+"_ColumnMenu"),k=e("#"+u._id+"ccDiv_wrapper"),y=e("#"+u._id+"_headerContextMenu"),w=e("#"+u._id+"ccDiv_wrapper"),u._columnMenuTarget){var j,L=e.trim(u._columnMenuTarget.prev("div.e-headercelldiv").attr("data-ej-mappingname")),A=u.getColumnByField(L);A&&(A.filterEditType?(o=A.filterEditType.indexOf("edit"),j=A.filterEditType):(o=A.editType.indexOf("edit"),j=A.editType),-1!=o?(l=j.slice(0,o),d=l.charAt(0).toUpperCase()+l.slice(1),h=e("#"+u._id+"filter"+d+"MenuDiv_wrapper")):(d=j.charAt(0).toUpperCase()+j.slice(1),h=e("#"+u._id+"filter"+d+"MenuDiv_wrapper"))),I=!t.isNullOrUndefined(h)&&h.is(":visible")}switch(O="visible"==T.css("visibility"),D=k.is(":visible"),C=w.is(":visible"),!u._isRowEdit||"moveCellRight"!=i&&"moveCellLeft"!=i||(g=p.columns.filter(function(e){return 1==e.isFrozen&&1==e.visible}),m=p.columns.filter(function(e){return 1==e.visible})),i){case"saveRequest":if(0==S.length&&0==R.length&&0==y.length)(u._isRowEdit||u.model.isEdit)&&(b.blur(),u._endEdit(),u._focusTreeGridElement()),"onEnter"==p.filterSettings.filterBarMode&&"filterbar"==p.filterSettings.filterType&&p.allowFiltering&&b.closest("th").hasClass("e-filterbarcell")&&u._filterBarHandler(s);else if(S.length)u._moveToNextMenuItem("save");else if(y.length)if("contextMenu_Columns"==e("#"+u._activeMenuItemId).attr("id")){var E=null;if(F=w.find("div.e-columnmenuselection"),D)E=F.data("column");else{var P=y.find("div.e-columnmenuselection");P.length>0&&(E=P[0].id)}if(!t.isNullOrUndefined(E))switch(A=u._contextMenuColumnDetails,E){case"contextMenu_Columns":u._showKeyboardColumnChooser(!1,y,w,e("#contextMenu_Columns"));break;default:if(!F.find("span").hasClass("e-disable")){var M=F.find("span").attr("aria-checked");"true"==M?u.hideColumn(E):u.showColumn(E)}}}else u._moveToNextMenuItem("save");else if(R.length){var E=null,F=k.find("div.e-columnmenuselection");if(D)E=F.data("column");else{var P=R.find("div.e-columnmenuselection");P.length>0&&(E=P[0].id)}if(!t.isNullOrUndefined(E)){b=u._columnMenuTarget;var L=e.trim(b.prev("div.e-headercelldiv").attr("data-ej-mappingname")),A=u.getColumnByField(L);switch(E){case u._id+"_SortAscendingChooser":u.model.allowMultiSorting&&(u._multiSortRequest=!0),p.isFromGantt?u.sortColumn(A.mappingName?A.mappingName:A.field,t.sortOrder.Ascending):u.sortColumn(A.field,t.sortOrder.Ascending),u._multiSortRequest=!1;break;case u._id+"_SortDescendingChooser":u.model.allowMultiSorting&&(u._multiSortRequest=!0),p.isFromGantt?u.sortColumn(A.mappingName?A.mappingName:A.field,t.sortOrder.Descending):u.sortColumn(A.field,t.sortOrder.Descending),u._multiSortRequest=!1;break;case u._id+"_FreezeColumnsChooser":A&&!e(u._id+"_FreezeColumnChooser").hasClass("e-disable")&&(u._checkboxSelection&&p.columns[0].nonColumn&&!p.columns[0].isFrozen&&(p.columns[0].isFrozen=!0),u.freezeColumn(A.field,!0));break;case u._id+"_UnfreezeColumnsChooser":A&&!e(u._id+"_UnfreezeColumnChooser").hasClass("e-disable")&&(u._checkboxSelection&&2==u._frozenColumnsLength&&p.columns[0].nonColumn&&p.columns[0].isFrozen&&(p.columns[0].isFrozen=!1),u.freezeColumn(A.field,!1));break;case u._id+"_FreezePrecedingColumnsChooser":A&&!e(u._id+"_FreezePrecedingColumnsChooser").hasClass("e-disable")&&u.freezePrecedingColumns(A.field);break;case u._id+"_ColumnLeftChooser":A&&!e(u._id+"_ColumnLeftChooser").hasClass("e-disable")&&u.insertColumnChooser(A,"left");break;case u._id+"_ColumnRightChooser":A&&!e(u._id+"_ColumnRightChooser").hasClass("e-disable")&&u.insertColumnChooser(A,"right");break;case u._id+"_DeleteColumnChooser":A&&!e(u._id+"_DeleteColumnChooser").hasClass("e-disable")&&(u._targetColumnIndex=p.columns.indexOf(A),u._updateConfirmDialog.ejDialog("open"),u._clearColumnMenu());break;case u._id+"_RenameColumnChooser":A&&!e(u._id+"_RenameColumnChooser").hasClass("e-disable")&&(u._targetColumnIndex=p.columns.indexOf(A),u._renderColumnRenameDialog(A),u._columnRenameDialog.ejDialog("open"),u._clearColumnMenu());break;case u._id+"_FilterChooser":if(A&&e("#"+u._id+"_ColumnMenu").find(".e-expander").hasClass("e-treegridadaptivesubicon")){var N=h[0].id.substring(u._id.length,h[0].id.indexOf("MenuDiv"));u._showFilterMenu(null,N,null,null,null,null,null,null,A,null)}break;case u._id+"_ColumnsChooser":A&&e("#"+u._id+"_ColumnMenu").find(".e-expander").hasClass("e-treegridadaptivesubicon")&&!u.model.isFromGantt&&u._adaptiveColumnChooser();break;default:if(!F.find("span").hasClass("e-disable")){var M=F.find("span").attr("aria-checked");"true"==M?u.hideColumn(E):u.showColumn(E)}}}}break;case"cancelRequest":if(0==S.length&&0==R.length&&0==y.length){if(x.length>0){var z=p.editSettings.editMode;"cellediting"==z.toLowerCase()||"batchediting"==z.toLowerCase()&&"cell"==p.editSettings.batchEditSettings.editMode?u._isRowEdit?u.cancelRowEditCell():u.cancelEditCell():("rowediting"==z.toLowerCase()||"batchediting"==z.toLowerCase()&&"row"==p.editSettings.batchEditSettings.editMode)&&u.cancelRowEditCell(),u._cancelSaveTools()}if(u._focusTreeGridElement(),1==u._dragMouseDown){if(e(u._dragmouseOverTooltip).remove(),e(".e-dragintend").find(".e-icon").css({display:"none"}),e(".e-intendparent").find(".e-icon").css({display:"none"}),u._dropCancel=!0,u._dragMouseDown=!1,u._dragTooltip=!1,u._headerDragStatus="",u._dragTargetItem&&u._dragTargetItem.hasChildRecords&&0==u._dragTargetItem.level){var V=t.TreeGrid.getRowByIndex(this,f.indexOf(u._dragTargetItem));u._dragTargetItem?V.find(".e-treegridexpand").css({display:"inline-block"}):V.find(".e-treegridcollapse").css({display:"inline-block"})}u._off(u.element,"touchmove",".e-treegridrows, .e-templatecell",u.dragToolTip),u._off(u.element,"mousemove",".e-gridcontent, .e-templatecell",u.dragToolTip)}}else u._clearContextMenu(),u._clearColumnMenu();break;case"editRecord":if(p.isFromGantt&&1==p.readOnly)return;if(0==S.length&&0==R.length){"cell"==p.selectionSettings.selectionMode&&"dialogEditing"!=p.editSettings.editMode&&(p.editSettings.editMode="cellEditing");var B=p.editSettings,z=B.editMode;if(B.allowEditing&&1==p.selectedItems.length||B.allowEditing&&"cell"==p.selectionSettings.selectionMode||B.allowEditing&&p.selectedItem&&u._checkboxSelection)if("cellediting"==z.toLowerCase()||"cell"==p.selectionSettings.selectionMode){var A=u.model.columns[u._cellIndex];if(t.isNullOrUndefined(A)||!A.visible||0==A.allowEditing)return;if("cell"===p.selectionSettings.selectionMode?u._cellEditingDetails.rowIndex=this._rowIndexOfLastSelectedCell:u._cellEditingDetails.rowIndex=this.selectedRowIndex(),u._cellEditingDetails.columnIndex=u._cellIndex,p.selectedItem=f[this.selectedRowIndex()],u._cellEditingDetails.columnIndex>-1){u.updateScrollBar();var H=A.field;"dialogEditing"==u.model.editSettings.editMode?H&&u._showTreeGridAddEditDialog():H&&u.cellEdit(u._cellEditingDetails.rowIndex,H),u._editAddTools()}}else if("rowediting"!=z.toLowerCase()||u._isRowEdit||"cell"==p.selectionSettings.selectionMode){if("dialogediting"==z.toLowerCase()&&"cell"!=p.selectionSettings.selectionMode){var o=u.selectedRowIndex();o>=0&&u._showTreeGridAddEditDialog(o)}}else{var o=u.selectedRowIndex();o>=0&&(u.updateScrollBar(),u._editRow(o))}}break;case"topRowSelection":if(p.allowPaging&&0==S.length&&0==R.length){if(u._isRowEdit||u.model.isEdit)return!0;if(f.length>0){var Y=0;if(f[0].isSummaryRow){var U=u._getNextRecord(Y+1,f,i);Y=f.indexOf(U)}u._rowSelectingEventTrigger(this.selectedRowIndex(),Y,!1,i)||(u.selectRows(Y),u._focusTreeGridElement(),u.updateScrollBar(),u._rowSelectedEventTrigger(Y,null,!1,i))}}break;case"nextPage":if(u._currentPage()<p.pageSettings.totalPages&&u.model.pageSettings.pageSizeMode==t.TreeGrid.PageSizeMode.Root&&u._batchEditStarts&&!u._confirmDialog.is(":visible"))return u._batchSaveLostWarning("Paging"),u._batchTempDetails.currentPage=u._currentPage()+1,!0;if(p.allowPaging){var W=u._currentPage();u._focusTreeGridElement(),W<p.pageSettings.totalPages&&u.gotoPage(W+1)}break;case"prevPage":if(1!=u._currentPage()&&u.model.pageSettings.pageSizeMode==t.TreeGrid.PageSizeMode.Root&&u._batchEditStarts&&!u._confirmDialog.is(":visible"))return u._batchSaveLostWarning("Paging"),u._batchTempDetails.currentPage=u._currentPage()-1,!0;if(p.allowPaging){var W=u._currentPage();u._focusTreeGridElement(),1!=W&&u.gotoPage(W-1)}break;case"bottomRowSelection":if(0==S.length&&0==R.length){if(u._isRowEdit||u.model.isEdit)return!0;if(f.length>0){var X=f.length-1;if(f[X].isSummaryRow){var U=u._getNextRecord(X-1,f,i);X=f.indexOf(U)}u._rowSelectingEventTrigger(this.selectedRowIndex(),X,!1,i)||(u.selectRows(X),u._focusTreeGridElement(),u.updateScrollBar(),u._rowSelectedEventTrigger(X,null,!1,i))}}break;case"firstRowSelection":if(0==S.length&&0==R.length){if(u._isRowEdit||u.model.isEdit)return!0;if(f.length>0){if("row"==p.selectionSettings.selectionMode)p.allowPaging&&u.gotoPage(1),p.allowSelection&&!u._rowSelectingEventTrigger(this.selectedRowIndex(),0,!1,i)&&(u.selectRows(0),u.updateScrollBar(),u._focusTreeGridElement(),u._rowSelectedEventTrigger(0,null,!1,i));else if("cell"==p.selectionSettings.selectionMode){var G=u._focusingRowIndex,$={rowIndex:G,cellIndex:0};u._isShiftKeyNavigation=!1,u._cellIndex=0,u.selectCells([$])}u._cancelSaveTools()}}break;case"lastRowSelection":if(0==S.length&&0==R.length){if(u._isRowEdit||u.model.isEdit)return!0;if(f.length>0){if(r=_.length-1,c=_[r],c.isSummaryRow&&(c=u._getNextRecord(r-1,_,i)),p.allowPaging&&c&&(u.gotoPage(p.pageSettings.totalPages),f=u._updatedPageData),n=f.indexOf(c),"row"==p.selectionSettings.selectionMode)p.allowSelection&&!u._rowSelectingEventTrigger(this.selectedRowIndex(),n,!1,i)&&(u.selectRows(n),u._focusTreeGridElement(),u.updateScrollBar(),u._rowSelectedEventTrigger(n,null,!1,i));else if("cell"==p.selectionSettings.selectionMode){var G=u._focusingRowIndex,q=p.columns;u._isShiftKeyNavigation=!1,u._cellIndex=u._getLastVisibleColumnIndex();var $={rowIndex:G,cellIndex:u._cellIndex};u.selectCells([$])}u._cancelSaveTools()}}break;case"moveCellLeft":if(0==S.length&&0==R.length){if(u._isRowEdit){var Q=b.closest("td").prev("td").length>0?b.closest("td").prev("td")[0].cellIndex:-1;this._frozenColumnsLength>0&&e("#"+u._id+"EditForm").has(b).length>0&&(Q+=g.length);var K=-1!=Q&&u._getPreviousElement(b,Q,m);K.length&&u._focusElementsForRowEdit(K)}else p.editSettings.allowEditing&&"cellediting"==p.editSettings.editMode.toLowerCase()&&x.length>0&&u.editFormValidate()&&(b.blur(),v=u._moveCurrentCell("left"));if(p.allowSelection&&"cell"==p.selectionSettings.selectionMode&&!u._isRowEdit&&(0!=u._focusingRowIndex||0!=u._cellIndex))if(u.model.isEdit){var U=p.currentViewData[u._cellEditingDetails.rowIndex];u._focusingRowIndex=f.indexOf(U),u._cellIndex=u._cellEditingDetails.columnIndex;var $={rowIndex:u._focusingRowIndex,cellIndex:u._cellIndex};u.selectCells([$])}else u._selectNextCell("left",i)}break;case"moveCellRight":if(0==S.length&&0==R.length){if(u._isRowEdit){var Q=b.closest("td").next("td").length>0?b.closest("td").next("td")[0].cellIndex:-1;Q=-1==Q&&e("#"+u._id+"EditFrozenForm").has(b).length>0?e("#"+u._id+"EditForm").find("td").eq(0).index():Q,this._frozenColumnsLength>0&&-1!=Q&&e("#"+u._id+"EditForm").has(b).length>0&&(Q+=g.length);var Z=-1!=Q&&u._getNextElement(b,Q,m,g);Z.length&&u._focusElementsForRowEdit(Z)}else p.editSettings.allowEditing&&("cellEditing"==p.editSettings.editMode||"batchEditing"==p.editSettings.editMode||"cell"==p.selectionSettings.selectionMode)&&b&&x.length>0&&this.editFormValidate()&&(b.blur(),v=u._moveCurrentCell("right"));if(p.allowSelection&&"cell"==p.selectionSettings.selectionMode&&!u._isRowEdit&&(u._focusingRowIndex!=u.getRows().length-1||u._cellIndex!=be-1))if(u.model.isEdit){var U=p.currentViewData[u._cellEditingDetails.rowIndex];u._focusingRowIndex=f.indexOf(U),u._cellIndex=u._cellEditingDetails.columnIndex;var $={rowIndex:u._focusingRowIndex,cellIndex:u._cellIndex};u.selectCells([$])}else u._selectNextCell("right",i)}break;case"downArrow":if(p.allowSelection)if(0==S.length&&0==R.length&&0==y.length){if(u._isRowEdit||u.model.isEdit)return!0;if(f.length>0&&p.selectedItem&&u.selectedRowIndex()>-1&&"row"==p.selectionSettings.selectionMode){if(r=f.length-1,u.selectedRowIndex()!=r){var J=f[u.selectedRowIndex()];n=_.indexOf(J),c=_[n+1],c&&c.isSummaryRow&&(c=u._getNextRecord(n+1,_)),n=f.indexOf(c),c&&n<=r&&p.allowSelection&&!u._rowSelectingEventTrigger(this.selectedRowIndex(),n,!1,i)&&(u.selectRows(n),u.updateScrollBar(),u._focusTreeGridElement(),u._rowSelectedEventTrigger(u.selectedRowIndex(),null,!1,i))}u._cancelSaveTools()}else if("cell"==p.selectionSettings.selectionMode&&u.selectedCellIndexes().length>0){var G=u._focusingRowIndex+1,Q=u._cellIndex,ee=f.length;if(u._isShiftKeyNavigation=!1,G<ee){var J=f[u._rowIndexOfLastSelectedCell];n=_.indexOf(J),c=_[n+1],c&&c.isSummaryRow&&(c=u._getNextRecord(n+1,_)),G=f.indexOf(c),c&&($={rowIndex:G,cellIndex:Q},u._focusingRowIndex=G,u.selectCells([$]),u.updateScrollBar())}}}else if(S.length)u._moveToNextMenuItem("next");else if(y.length)if(C){var te=w.find("div.e-columnmenuselection"),ie=te.next("div.e-columnMenuListDiv");ie.length>0&&(te.removeClass("e-columnmenuselection"),ie.addClass("e-columnmenuselection"))}else u._moveToNextMenuItem("next");else if(R.length)if(D){var F=k.find("div.e-columnmenuselection"),ie=F.next("div.e-columnMenuListDiv");ie.length>0&&(F.removeClass("e-columnmenuselection"),ie.addClass("e-columnmenuselection"))}else{var P=R.find("div.e-columnmenuselection"),ie=u._findNextColumnMenuItem(P,"next",!0);ie.length>0&&(P.removeClass("e-columnmenuselection"),ie.addClass("e-columnmenuselection"),u._focusTreeGridElement(),u._isCloseFilterMenu=!0,u._clearFilterMenu())}break;case"rightArrow":if(p.allowSelection)if(0==S.length&&0==R.length&&0==y.length){if(u._isRowEdit||u.model.isEdit)return!0;var se,G=u.selectedRowIndex(),U=f[G],ae={};ae.data=U,ae.recordIndex=G,ae.expanded=!0,U&&U.hasChildRecords&&!U.expanded&&u.selectedRowIndex()>=0&&(se=u._trigger("expanding",ae),se||p.isFromGantt||t.TreeGrid.sendExpandCollapseRequest(u,ae),p.enableVirtualization&&u._focusTreeGridElement(),u.updateScrollBar()),u._cancelSaveTools(),!p.allowSelection||"cell"!=p.selectionSettings.selectionMode||u._focusingRowIndex==u.getRows().length-1&&u._cellIndex==be-1||u._selectNextCell("right",i)}else if(S.length&&!O)u._moveToNextMenuItem("expand");else if(y.length&&!C)u._moveToNextMenuItem("expand"),u._showKeyboardColumnChooser(!1,y,w,e("#contextMenu_Columns"));else if(R.length&&!D){u._showKeyboardColumnChooser(!0,R,k,e("#"+u._id+"_ColumnsChooser"));var P=R.find("div.e-columnmenuselection"),re=(k.find("div.e-columnMenuListDiv"),u._columnListPosX,u._columnFilterPosX),ne=(u._columnChooserListIndex,e(document).width());if(P.length>0&&P[0].id==u._id+"_FilterChooser"&&!e("#"+u._id+"_ColumnMenu").find(".e-expander").hasClass("e-treegridadaptivesubicon"))if("menu"==p.filterSettings.filterType&&"excel"!=A.filterType){var oe,le=h[0].id.indexOf("_"),de="#"+h[0].id.slice(0,le),he=e(de).ejDialog("instance"),u=this,ce={};ce.width="auto",ce.height="auto",ce.minWidth="0px",ce.minHeight="0px",ce.showHeader=!1,ce.position={X:1,Y:1},ce.enableModal=!1,ce.isResponsive=!1,ce.enableResize=!1,e(de+"_wrapper").removeClass("e-dialog").removeClass("e-shadow").find("div.e-dialog-scroller").css("height","100%").removeClass("e-widget-content"),e(de).ejDialog(ce),ne<re+e("#"+h[0].id).width()&&(re=re-R.width()-e("#"+h[0].id).width()),R.find("div.e-columnmenuselection").closest("li").index(),oe={X:re,Y:u._columnMenuPopupY+e("#"+u._id+"_FilterChooser").position().top},he.option({position:oe}),he.open(),u._updatePreviousFilteredValue(A),h.css("z-index",u.getMaxZIndex()+1),u._focusTreeGridElement(),u._renderedSubMenuType=de+"Desktop"}else{var ue=p.isFromGantt?e(this.element).closest(".e-gantt"):e(this.element),pe=this.getOffsetRect(ue[0]);pe.right=pe.left+e(ue).width(),u._openExcelFilter(A,re,u._columnMenuPopupY,pe,R.width())}}break;case"leftArrow":if(p.allowSelection)if(0==S.length&&0==R.length&&0==y.length){if(u._isRowEdit||u.model.isEdit)return!0;var se,G=u.selectedRowIndex(),U=f[G],ae={};ae.data=U,ae.recordIndex=G,ae.expanded=!1,U&&U.hasChildRecords&&U.expanded&&u.selectedRowIndex()>=0&&(se=u._trigger("collapsing",ae),se||p.isFromGantt||t.TreeGrid.sendExpandCollapseRequest(u,ae),p.enableVirtualization&&u._focusTreeGridElement(),u.updateScrollBar()),u._cancelSaveTools(),!p.allowSelection||"cell"!=p.selectionSettings.selectionMode||0==u._focusingRowIndex&&0==u._cellIndex||u._selectNextCell("left",i)}else S.length?u._moveToNextMenuItem("collapse"):y.length?(u._moveToNextMenuItem("collapse"),e("#"+u._id+"ccDiv").ejDialog("close")):R.length&&(D||I)&&(e("#"+u._id+"ccDiv").ejDialog("close"),u._isCloseFilterMenu=!0,u._clearFilterMenu());break;case"upArrow":if(p.allowSelection)if(0==S.length&&0==R.length&&0==y.length){if(u._isRowEdit||u.model.isEdit)return!0;if("row"==p.selectionSettings.selectionMode&&this.selectedRowIndex()>0&&f.length>0&&p.selectedItem){var J=f[u.selectedRowIndex()];n=_.indexOf(J),c=_[n-1],c.isSummaryRow&&(c=u._getNextRecord(n-1,_,i)),n=f.indexOf(c),-1==n||u._rowSelectingEventTrigger(this.selectedRowIndex(),n,!1,i)||(u.selectRows(n),u.updateScrollBar(),u._focusTreeGridElement(),u._rowSelectedEventTrigger(u.selectedRowIndex(),null,!1,i)),u._cancelSaveTools()}else if("cell"==p.selectionSettings.selectionMode){var G=u._focusingRowIndex-1,Q=u._cellIndex,ee=p.flatRecords.length;if(u._isShiftKeyNavigation=!1,-1!=G){var J=f[u._rowIndexOfLastSelectedCell];n=_.indexOf(J),c=_[n-1],c&&c.isSummaryRow&&(c=u._getNextRecord(n-1,_,i)),G=f.indexOf(c),c&&($={rowIndex:G,cellIndex:Q},u._focusingRowIndex=G,u.selectCells([$]),u.updateScrollBar())}}}else if(S.length)u._moveToNextMenuItem("prev");else if(y.length)if(C){var te=w.find("div.e-columnmenuselection"),me=te.prev("div.e-columnMenuListDiv");me.length>0&&(te.removeClass("e-columnmenuselection"),me.addClass("e-columnmenuselection"))}else u._moveToNextMenuItem("prev");else if(R.length)if(D){var F=k.find("div.e-columnmenuselection"),me=F.prev("div.e-columnMenuListDiv");me.length>0&&(F.removeClass("e-columnmenuselection"),me.addClass("e-columnmenuselection"))}else{var P=R.find("div.e-columnmenuselection"),me=u._findNextColumnMenuItem(P,"prev",!0);me.length>0&&(P.removeClass("e-columnmenuselection"),me.addClass("e-columnmenuselection"),u._isCloseFilterMenu=!0,u._clearFilterMenu())}break;case"deleteRecord":if(p.isFromGantt&&1==p.readOnly)return;if(p.editSettings.allowDeleting&&0==S.length&&0==R.length){if(u._isRowEdit||u.model.isEdit)return!0;u.selectedRowIndex()>=0&&(u.deleteRow(),u._cancelSaveTools(),u._focusTreeGridElement())}break;case"totalRowCollapse":if(0==S.length&&0==R.length){u.model.isFromGantt?(ae={},ae.requestType="collapseAll",u._trigger("expandAllCollapseAllRequest",ae)):u.collapseAll();break}case"totalRowExpand":0==S.length&&0==R.length&&(u.model.isFromGantt?(ae={},ae.requestType="expandAll",u._trigger("expandAllCollapseAllRequest",ae)):u.expandAll());break;case"spaceBar":var E=null;if(R.length&&D){var F=k.find("div.e-columnmenuselection");if(E=F.data("column"),!t.isNullOrUndefined(E)&&!F.find("span").hasClass("e-disable")){var M=F.find("span").attr("aria-checked");"true"==M?u.hideColumn(E):u.showColumn(E)}}u._checkboxSelection&&b.hasClass("e-treegrid")&&0==e("#"+u._id+"EditForm").length&&(u._rowSelectingEventTrigger(this.selectedRowIndex(),this.selectedRowIndex(),!0,i)||(u.selectRows(this.selectedRowIndex(),null,!0),u._cancelSaveTools(),u._rowSelectedEventTrigger(this.selectedRowIndex(),null,!0,i)));break;case"shiftDownArrow":if(p.allowSelection&&"multiple"==p.selectionSettings.selectionType)if("cell"==p.selectionSettings.selectionMode){var ge,ee=f.length,fe=u._selectedCellDetails.length,J=f[u._rowIndexOfLastSelectedCell];if(n=_.indexOf(J),c=_[n+1],c&&c.isSummaryRow&&(c=u._getNextRecord(n+1,_)),!c)return;if(ge=f.indexOf(c),u._focusingRowIndex>u._rowIndexOfLastSelectedCell){u._rowIndexOfLastSelectedCell=ge,u._selectedCellDetails.sort(function(e,t){return parseFloat(e.rowIndex)-parseFloat(t.rowIndex)}),u._getSelectedCellsinARow(u._selectedCellDetails[0].data.index,u._selectedCellDetails);for(var _e=0;_e<u._selectedCellsinARow.length;_e++){var ve=u._selectedCellDetails.indexOf(u._selectedCellsinARow[_e]);e(u._selectedCellsinARow[_e].cellElement).removeClass("e-selectingcell"),u._selectedCellDetails.splice(ve,1)}u.updateScrollBar()}else if(ge<ee){var ae={rowIndex:ge,cellIndex:u._lastSelectedCellIndex};u.updateScrollBar(),u._shiftKeySelectCells(ae),u._rowIndexOfLastSelectedCell=ge}}else u._selectedItemDown(i);break;case"shiftUpArrow":if(p.allowSelection&&"multiple"==p.selectionSettings.selectionType)if("cell"==p.selectionSettings.selectionMode){var fe=u._selectedCellDetails.length,J=f[u._rowIndexOfLastSelectedCell];if(n=_.indexOf(J),c=_[n-1],c&&c.isSummaryRow&&(c=u._getNextRecord(n-1,_,"upArrow")),!c)return;if(ge=f.indexOf(c),fe>0&&u._focusingRowIndex<u._rowIndexOfLastSelectedCell){u._rowIndexOfLastSelectedCell=ge,u._getSelectedCellsinARow(u._selectedCellDetails[fe-1].data.index,u._selectedCellDetails);for(var _e=0;_e<u._selectedCellsinARow.length;_e++){var ve=u._selectedCellDetails.indexOf(u._selectedCellsinARow[_e]);e(u._selectedCellsinARow[_e].cellElement).removeClass("e-selectingcell"),u._selectedCellDetails.splice(ve,1)}u.updateScrollBar()}else if(ge>=0){var ae={rowIndex:ge,cellIndex:u._lastSelectedCellIndex};u._rowIndexOfLastSelectedCell=ge,u.updateScrollBar(),u._shiftKeySelectCells(ae)}}else u._selectedItemUp(i);break;case"shiftRightArrow":if(p.allowSelection&&"cell"==p.selectionSettings.selectionMode&&"multiple"==p.selectionSettings.selectionType){var be=p.columns.length,Q=u._lastSelectedCellIndex+1;if(!(Q<be-1)||p.columns[Q].visible&&p.columns[Q].allowCellSelection||(Q=u.getUpNextVisibleColumnIndex(Q)),Q<be){var ae={rowIndex:u._rowIndexOfLastSelectedCell,cellIndex:Q};u._shiftKeyFirstElementDetails.firstElementRowIndex=u._focusingRowIndex,u._shiftKeySelectCells(ae),u._lastSelectedCellIndex=Q}}break;case"shiftLeftArrow":if(p.allowSelection&&"cell"==p.selectionSettings.selectionMode&&"multiple"==p.selectionSettings.selectionType){var Q=u._lastSelectedCellIndex-1;-1==Q||p.columns[Q].visible&&p.columns[Q].allowCellSelection||(Q=u.getPreviousVisibleColumnIndex(Q));var ae={rowIndex:u._rowIndexOfLastSelectedCell,cellIndex:Q};-1!=Q&&(u._shiftKeyFirstElementDetails.firstElementRowIndex=u._focusingRowIndex,u._shiftKeySelectCells(ae),u._lastSelectedCellIndex=Q)}break;case"shiftHomeButton":if("cell"==p.selectionSettings.selectionMode&&"multiple"==p.selectionSettings.selectionType){var G=u._rowIndexOfLastSelectedCell,ae={rowIndex:G,cellIndex:0};u._cellIndex=0,u._lastSelectedCellIndex=0,u._shiftKeySelectCells(ae)}break;case"shiftEndButton":if("cell"==p.selectionSettings.selectionMode&&"multiple"==p.selectionSettings.selectionType){var G=u._rowIndexOfLastSelectedCell,q=p.columns;u._cellIndex=q.length-1,ae={rowIndex:G,cellIndex:u._cellIndex},u._lastSelectedCellIndex=u._cellIndex,u._shiftKeySelectCells(ae)}break;default:v=!0}return v},_showKeyboardColumnChooser:function(t,i,s,a){var r=this,n=r.model,o={};o.width="auto",o.height="auto",o.minWidth="0px",o.minHeight="0px",o.showHeader=!1,o.position={X:1,Y:1},o.enableModal=!1,o.isResponsive=!1,o.enableResize=!1,o.cssClass=n.cssClass,e("#"+r._id+"ccDiv_wrapper").addClass("e-treegridadaptivedialog"),e("#"+r._id+"ccDiv_wrapper").removeClass("e-dialog").removeClass("e-shadow").find("div.e-dialog-scroller").css("height","100%").removeClass("e-widget-content"),e("#"+r._id+"ccDiv").ejDialog(o),e("#"+r._id+"ccDiv").css({height:"auto"});var l=i.find("div.e-columnmenuselection"),d=s.find("div.e-columnMenuListDiv"),h=r._columnListPosX,c=r._columnMenuPopupY,u=e(document).width(),p=t?i.width():r._headerContextMenuWidth;if(r._updateColumnMenuVisibility(),!(l.length>0&&l[0].id==a[0].id)||i.find(".e-expander").hasClass("e-treegridadaptivesubicon"))return!1;var m=e("#"+r._id+"ccDiv").ejDialog("instance"),g=e("#"+r._id+"ccDiv_wrapper").width();m.open(),u<h+i.width()&&(h=h-p-g);var f={X:h,Y:c+a.position().top};m.option({position:f}),s.css("z-index",r.getMaxZIndex()+1),d.removeClass("e-columnmenuselection"),d.eq(0).addClass("e-columnmenuselection"),r._focusTreeGridElement(),r._renderedSubMenuType="ColumnDesktop"},_getNextElement:function(i,s,a,r){var n=this,o=n.model,a=(o.columns,a),r=r;return i=i.closest("td").next("td"),this._frozenColumnsLength>0&&0==i.length&&(i=e("#"+n._id+"EditForm").find("td").eq(0),s=r.length),0!=i.length&&(t.isNullOrUndefined(a[s])||!t.isNullOrUndefined(a[s].allowEditing)&&!a[s].allowEditing?s+1<a.length&&n._getNextElement(i,s+1,a,r):i)},_getPreviousElement:function(i,s,a){var r=this,n=r.model,a=(n.columns,a);return i=i.closest("td").prev("td"),this._frozenColumnsLength>0&&0==i.length&&(i=e("#"+r._id+"EditFrozenForm").find("td").last()),0!=i.length&&s>-1&&(t.isNullOrUndefined(a[s])||!t.isNullOrUndefined(a[s].allowEditing)&&!a[s].allowEditing?r._getPreviousElement(i,s-1,a):i)},_clearAllFilter:function(e){var t=this,i=t.model.filterSettings.filteredColumns[0];t.model.allowFiltering=!0,t.model.filterSettings.filteredColumns=[],t.filterColumn(i.field,i.operator,"","and"),t._filteredColumnValue=[],t._filteredColumnValueID=[]},filterColumn:function(i,s,a,r,n,o){var l=this,d=l.model,h=d.filterSettings.filteredColumns;if(this.model.allowFiltering){if(l._batchEditStarts&&!l._confirmDialog.is(":visible")){l._batchSaveLostWarning("Filtering");var c=l._batchTempDetails;return c.fieldName=i,c.filterOperator=s,c.filterValue=a,c.predicate=r,c.matchcase=n,c.actualFilterValue=o,!1}var u={};u.requestType=t.TreeGrid.Actions.Filter,u.currentFilterObject=[],Array.isArray(s)||(s=e.makeArray(s)),Array.isArray(a)||(a=e.makeArray(a));var p=!1;this._filterCollection;t.util.isNullOrUndefined(this._currentFilterColumn)&&(this._currentFilterColumn=this.getColumnByField(i));for(var m=0;m<s.length;m++){var g={field:i,operator:s[m],value:a[m],matchcase:n,predicate:r,actualFilterValue:o};if(this._$colType="string",0==h.length&&""!==g.value)"date"!=this._$colType||"equal"!=s&&"notequal"!=s||"string"==typeof g.value?h.push(g):this._setDateFilters(g);else{var l=this;if(!p)for(var f=t.DataManager(h),_=(new t.Query).where("field",t.FilterOperators.equal,g.field),v=f.executeLocal(_),b=0;b<v.length;b++){var x=e.inArray(v[b],h);-1!=x&&h.splice(x,1)}""!==g.value&&("date"!=this._$colType||"equal"!=s&&"notequal"!=s||"string"==typeof g.value?h.push(g):this._setDateFilters(g))}p=!0,u.currentFilterObject.push(g)}u.filterCollection=h,u.currentFilteringColumn=i,u.fieldName=i;this.processBindings(u)&&(h.reverse().splice(0,s.length),h.reverse()),l._setFilterFieldValues(g)}},filterContent:function(e){var i,s=this,a=s.model,r=a.filterSettings.filteredColumns;if(!(e instanceof t.Predicate))return!1;var i=r.indexOf(e);if(-1!=i)r.splice(i,1);else{var n=[],o=[];n.push(e.toJSON()),s._addPredicateObject(n,o),t.merge(r,o)}var l={requestType:"filtering"};s.processBindings(l),s._setFilterFieldValues(o)},_addPredicateObject:function(e,i,s){for(var a=e.length,r=0;r<a;r++){var n=e[r];if(n.isComplex)t.isNullOrUndefined(n.predicates)||this._addPredicateObject(n.predicates,i,n.condition);else{var o={};o.field=n.field,o.operator=n.operator,o.value=n.value,o.matchcase=!n.ignoreCase,o.predicate=s,i.push(o)}}},_setFilterFieldValues:function(i){var s,a=this,r=a.model,n=r.filterSettings.filterType,o=[],l=0;t.isNullOrUndefined(i.length)?o.push(i):o=i,l=o.length;for(var d=0;d<l;d++){var h=o[d];if(s=a.getColumnByField(h.field))if("menu"==n||"excel"==n){if(!a.model.showColumnChooser){var c=a.getHeaderTable().find("div[data-ej-mappingname='"+h.field+"']").next(".e-filtericon");""!=h.value.toString()||"false"==h.value.toString()?c.removeClass("e-column-filter-icon").addClass("e-column-filtered-icon"):c.removeClass("e-column-filtered-icon").addClass("e-column-filter-icon")}"menu"==n?(a._storePreviousFilteredValue(h.field,h.value,h.operator),a._filterString=h.value):a._filteredColumnValueID.push(h.field)}else if("filterbar"==n){var u=a.getHeaderTable().find("#"+a._id+"_"+h.field.split(".").join("")+"_filterbarcell");"numericedit"==s.filterEditType?e(u).ejNumericTextbox({value:h.value}):"datepicker"==s.filterEditType?e(u).ejDatePicker({value:h.value}):"datetimepicker"==s.filterEditType?e(u).ejDateTimePicker({value:h.value}):"dropdownedit"==s.filterEditType?e(u).ejDropDownList({value:h.value}):""!=u.val()&&u.val()==h.value||u.val(h.value)}}},_cellSelectingEventTrigger:function(e){var t=this,i=(t.model,{}),s=e.rowIndex,a=e.cellIndex,r=t.getUpdatedRecords();return i.data=r[s],i.targetRow=e.rowElement,i.targetCell=e.cellElement,i.rowIndex=s,i.cellIndex=a,t._trigger("cellSelecting",i)},_cellSelectedEventTrigger:function(e,t){var i=this,s=(i.model,{}),a=e.rowIndex,r=e.cellIndex,n=t.rowIndex,o=t.cellIndex,l=i.getUpdatedRecords();return s.PreviousTargetRow=t.rowElement,s.previousTargetCell=t.cellElement,s.previousData=l[n],s.previousRowIndex=n,s.previousCellIndex=o,
s.data=l[a],s.targetRow=e.rowElement,s.targetCell=e.cellElement,s.rowIndex=a,s.cellIndex=r,i._trigger("cellSelected",s)},_rowSelectingEventTrigger:function(e,i,s,a){var r=this,n=r.model,o={},l=r.getUpdatedRecords();s||(s=!1),o.targetRow=t.TreeGrid.getRowByIndex(r,i),o.previousTreeGridRow=t.TreeGrid.getRowByIndex(r,e),o.data=l[i],o.previousData=l[e],o.recordIndex=i,o.previousIndex=e,o.actionType=t.isNullOrUndefined(a)?null:a,r.model.isFromGantt?o.target="ejTreeGrid":o.isCheckboxUpdate=s;var d=r._trigger("rowSelecting",o);return d&&(n.selectedItem=o.data),d},_rowSelectedEventTrigger:function(i,s,a,r){var n=this,o=n.model,l={},d=n.getUpdatedRecords(),h=e.extend({},d[i]);delete h.childRecords,delete h.parentItem,l={targetRow:t.TreeGrid.getRowByIndex(n,i),recordIndex:i},l.actionType=t.isNullOrUndefined(r)?null:r,a||(a=!1),t.isNullOrUndefined(s)||(l.toIndex=s),n.model.isFromGantt?(l.target="ejTreeGrid",l.data=o.updatedRecords[i],l.selectedItems=o.selectedItems):(l.data=h,l.isCheckboxUpdate=a),n._trigger("rowSelected",l)},_eventBindings:function(i){var s,a,r=this,n=r.model,o=0,l=r.getUpdatedRecords(),d=r.getRows();if(t.isNullOrUndefined(i)?(a=this._frozenColumnsLength>0?e(d[0]).length:e(d).length,i=n.currentViewData):a=i.length,r._commandColumnLength>0&&this._refreshUnboundTemplate(this.getContentTable()),null!=n.queryCellInfo||null!=n.rowDataBound||n.detailsDataBound)for(o;o<a;o++){var h=l.indexOf(i[o]);s=t.TreeGrid.getRowByIndex(this,h),r._rowEventTrigger(s,i[o])}},_rowEventTrigger:function(t,i){var s=this,a=this.model;a.rowDataBound&&s._trigger("rowDataBound",{rowElement:t,data:i});var r=(t.cells,e(t).find(".e-rowcell")),n=0,o=r.length,l=null,d=s.model.columns;if(a.queryCellInfo)for(n;n<o;n++)e(r[n]).hasClass("e-rowcell")&&(l=d[n]),l&&s._cellEventTrigger(r[n],i,l);if(a.detailsDataBound&&e(t).next("tr").hasClass("e-detailsrow")){var h=e(t).next("tr");this._frozenColumnsLength>0&&(h=e(h[1])),this._trigger("detailsDataBound",{detailsElement:h,data:i})}},_cellEventTrigger:function(e,t,i){var s={cellElement:e,data:t,column:i};s.cellValue=s.column&&this._getCustomCellValue(t,s.column.field),this._trigger("queryCellInfo",s)},_completeAction:function(i){var s=this,a=s.model,r=a.sortSettings.sortedColumns,n=e("#"+s._id.replace("ejTreeGrid","")).data("ejGantt");if(a.isEdit=!1,a.allowPaging&&i.requestType!=t.TreeGrid.Actions.Scroll&&this._refreshGridPager(),t.TreeGrid.Actions.Sorting==i.requestType&&a.allowSorting||t.TreeGrid.Actions.Refresh==i.requestType){if(a.allowSorting){s._multiSortRequest||(s.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending").remove(),s.getHeaderTable().find("[aria-sort]").removeAttr("aria-sort"));for(var o=0;o<r.length;o++)s._addSortElementToColumn(r[o].field,r[o].direction)}s._multiSortRequest=!1}else if(t.TreeGrid.Actions.BeginEdit==i.requestType||t.TreeGrid.Actions.Add==i.requestType){var l=e("#"+s._id+"EditForm");s.model.isEdit=!0,s.setWidthToColumns(),t.TreeGrid.Actions.Add==i.requestType&&l.find(".e-field:disabled").not(".e-identity").removeAttr("disabled").removeClass("e-disable"),e.isFunction(e.validator)&&this._initValidator()}else a.isFromGantt&&i.requestType===t.TreeGrid.Actions.Scroll&&s._updateCurrentViewData();a.isFromGantt&&(n.model.sortSettings=a.sortSettings),(!s._moveRow&&"batchediting"!=a.editSettings.editMode.toLowerCase()||i.requestType===t.TreeGrid.Actions.Refresh)&&s._trigger("actionComplete",i)},sendDataRenderingRequest:function(i){var s,a,r=this,n=this.model;if(r.model.currentViewData.length)switch(i.requestType){case t.TreeGrid.Actions.Delete:case t.TreeGrid.Actions.Refresh:case t.TreeGrid.Actions.Save:case t.TreeGrid.Actions.Filter:case t.TreeGrid.Actions.Sorting:case t.TreeGrid.Actions.Searching:case t.TreeGrid.Actions.ExpandCollapse:case t.TreeGrid.Actions.RefreshDataSource:case t.TreeGrid.Actions.DragAndDrop:case t.TreeGrid.Actions.Paging:case t.TreeGrid.Actions.Scroll:case t.TreeGrid.Actions.RowIndexUpdate:if(s=document.createElement("div"),i.requestType!=t.TreeGrid.Actions.Scroll)if(this._frozenColumnsLength>0)r._renderFrozenRecords();else{r.getContentTable().find("colgroup").first().replaceWith(r._getMetaColGroup());var o=r.getContentTable().children("tbody");o.empty(),s.innerHTML=["<table>",e.render[r._id+"_Template"](r.model.currentViewData),"</table>"].join(""),r.getContentTable().get(0).replaceChild(s.firstChild.firstChild,r.getContentTable().get(0).lastChild),r.setGridRows(e(r.getContentTable().get(0).rows))}else{var o=r.getContentTable().children("tbody"),l=r.model.currentViewData,d=r._visibleRange,h=this._frozenColumnsLength>0?e(o[0]).children("tr:not(.e-detailsrow)").length:o.children("tr:not(.e-detailsrow)").length,c=!1;if(0!=l.length&&0!=o.find(".e-emptyText").length&&o.find(".e-emptyText").remove(),r._scrollTop>r._prevScrollTop){var a,u=d.top-r._prevRTop,p=d.bottom-r._prevRBottom;if(p>=0)a=p?l.slice(-p):[];else{if(this._frozenColumnsLength>0)e(o.get(0)).children(":visible:gt("+(h+(p-1))+")").remove(),e(o.get(1)).children(":visible:gt("+(h+(p-1))+")").remove();else if(n.showDetailsRow&&!n.showDetailsRowInfoColumn){var m=2*(h+(p-1));o.children(":visible:gt("+m+")").remove()}else o.children(":visible:gt("+(h+(p-1))+")").remove();a=[]}c=!0}else{var a,u=h-(r._prevRBottom-d.bottom+1),p=r._prevRTop-d.top;a=p>=0?l.slice(0,p):[],u=u>=0?u:-h-1,c=!1}if(this._frozenColumnsLength>0)r._renderFrozenRecords(a,p,u,c);else{if(r.getContentTable().find("colgroup").first().replaceWith(r._getMetaColGroup()),c){if(n.showDetailsRow&&!n.showDetailsRowInfoColumn){var m=2*u;o.children(":visible:lt("+m+")").remove()}else o.children(":visible:lt("+u+")").remove();var g=e.render[r._id+"_Template"](a);o.append(g)}else{if(n.showDetailsRow&&!n.showDetailsRowInfoColumn){var m=2*u+1;o.children(":visible:gt("+m+")").remove()}else o.children(":visible:gt("+u+")").remove();var g=e.render[r._id+"_Template"](a);o.prepend(g)}r._gridRows=r.getContentTable().find("tr"),r.setGridRows(r._gridRows)}}this._gridRows=this.getContentTable().get(0).rows,this._frozenColumnsLength>0&&(this._gridRows=[this._gridRows,this.getContentTable().get(1).rows]),r._$gridContent&&r._isRendered&&(r._trigger("refresh"),r._eventBindings(a),this._hideCollapsedDetailsRows())}else{if(r._frozenColumnsLength>0){var f=t.buildTag("td",n.emptyRecordText,{},{colSpan:this._frozenColumns.length}),_=document;r.getContent().find("#e-frozencontentdiv"+r._id+" .e-table tbody").empty().append(e(_.createElement("tr")).addClass("e-emptyText").height(30).append(f)),f=t.buildTag("td",n.emptyRecordText,{visibility:"hidden"},{colSpan:this._unFrozenColumns.length}),r.getContent().find("#e-movablecontentdiv"+r._id+" .e-table tbody").empty().append(e(_.createElement("tr")).addClass("e-emptyText").height(30).append(f)),0==n.updatedRecords.length&&r._$gridContainer.find("#e-movablecontentdiv"+r._id+",#e-frozencontentdiv"+r._id).css("height","30px")}else r.getContentTable().find("tbody").empty().append(r._getEmptyTbody()),0==n.updatedRecords.length&&r._$gridContainer&&r._$gridContainer.css({height:"30px"});r._gridRows=null,r.setGridRows(null)}(r.model.showGridCellTooltip||r.model.showGridExpandCellTooltip)&&(r._cellMouseLeave(),r._headerMouseLeave()),i.requestType==t.TreeGrid.Actions.Scroll&&(i.requestType,t.TreeGrid.Actions.Refresh),r._completeAction(i)},_renderFrozenRecords:function(i,s,a,r){this.getContent().find("#e-frozencontentdiv"+this._id+" .e-table colgroup").replaceWith(this._getMetaColGroup()[0]),this.getContent().find("#e-movablecontentdiv"+this._id+" .e-table colgroup").replaceWith(this._getMetaColGroup()[1]);var n,o=this.getContentTable().children("tbody");if(t.isNullOrUndefined(i))o.empty(),n=document.createElement("div"),n.innerHTML=["<table>",e.render[this._id+"_JSONFrozenTemplate"](this.model.currentViewData),"</table>"].join(""),this.getContentTable().get(0).replaceChild(n.firstChild.firstChild,this.getContentTable().get(0).lastChild),n=document.createElement("div"),n.innerHTML=["<table>",e.render[this._id+"_Template"](this.model.currentViewData),"</table>"].join(""),this.getContentTable().get(1).replaceChild(n.firstChild.firstChild,this.getContentTable().get(1).lastChild);else if(r){if(this.model.showDetailsRow&&!this.model.showDetailsRowInfoColumn){var l=2*a;e(o.get(0)).children(":visible:lt("+l+")").remove(),e(o.get(1)).children(":visible:lt("+l+")").remove()}else e(o.get(0)).children(":visible:lt("+a+")").remove(),e(o.get(1)).children(":visible:lt("+a+")").remove();var d=e.render[this._id+"_JSONFrozenTemplate"](i),h=e.render[this._id+"_Template"](i);e(o.get(0)).append(d),e(o.get(1)).append(h)}else{if(this.model.showDetailsRow&&!this.model.showDetailsRowInfoColumn){var l=2*a+1;e(o.get(0)).children(":visible:gt("+l+")").remove(),e(o.get(1)).children(":visible:gt("+l+")").remove()}else e(o.get(0)).children(":visible:gt("+a+")").remove(),e(o.get(1)).children(":visible:gt("+a+")").remove();var d=e.render[this._id+"_JSONFrozenTemplate"](i),h=e.render[this._id+"_Template"](i);e(o.get(0)).prepend(d),e(o.get(1)).prepend(h)}this.setGridContentTable(this.getContent().find(".e-table"))},_renderByFrozenDesign:function(){var i=e(document.createElement("div")),s=this._getMetaColGroup().find("col"),a={};return a.colgroup1=i.append(t.buildTag("colgroup").append(s.splice(0,this._frozenColumnsLength))).html(),a.colgroup2=i.html(t.buildTag("colgroup").append(s)).html(),e.render[this._id+"_FrozenTemplate"](a)},addFrozenTemplate:function(){var t="<div class='e-frozencontainer' id='e-frozencontainer"+this._id+"' style='overflow:hidden;float:left;'><div class='e-frozencontentdiv' id='e-frozencontentdiv"+this._id+"' style='width:100%;'><table class='e-table e-zerospace' style='width:100%' id='"+this._id+"frozene-table'>{{:colgroup1}}<tbody></tbody></table></div></div><div class='e-movablecontainer' id='e-movablecontainer"+this._id+"'><div class='e-movablecontent' id='e-movablecontent"+this._id+"'><div class='e-movablecontentdiv' id='e-movablecontentdiv"+this._id+"'><table class='e-table e-zerospace' id='"+this._id+"movablee-table'>{{:colgroup2}}<tbody></tbody></table></div></div></div>",i={};i[this._id+"_FrozenTemplate"]=t,e.templates(i)},sortSetting:function(t){var i=this,s=this.model,a=e("#"+i._id).find(".e-ascending.e-icon"),r=e("#"+i._id).find(".e-descending.e-icon");if(s.allowSorting=t,s.allowSorting||i.clearSorting(),a.length>0)for(var n=0;n<a.length;n++)e(a[n]).css("visibility","hidden");if(r.length>0)for(var n=0;n<r.length;n++)e(r[n]).css("visibility","hidden")},columnIndex:function(e){var t=this,i=t.model,e=parseInt(e),s=i.columns;if(!isNaN(e)&&e>=0&&e<s.length&&s[e].visible&&!t._isCommandColumn(s[e])){if(s[e].nonColumn){if(!s[e+1]||!s[e+1].visible||t._isCommandColumn(s[e+1]))return;i.treeColumnIndex=e+1}else i.treeColumnIndex=e;t._addInitTemplate(),this.renderRecords(),i.showColumnChooser&&t._renderColumnChooserList(!0),t._updateWrapRowHeights("header","refreshAll")}},sortColumn:function(e,i){var s,a=this,r=a.model,n=r.sortSettings.sortedColumns,o={},l=0,d=n.length;if(a._cancelEditState(),a.clearSelection(),r.isFromGantt&&(s=t.TreeGrid.getColumnByMappingName(r.columns,e)),t.isNullOrUndefined(s)&&(s=this.getColumnByField(e)),r.allowSorting&&!t.isNullOrUndefined(s)&&0!=s.allowSorting){for(a._multiSortRequest||(r.sortSettings.sortedColumns=[]),o.requestType=t.TreeGrid.Actions.Sorting,o.columnName=e,a._cSortedColumn=e,a._cSortedDirection=o.columnSortDirection=void 0===i?t.sortOrder.Ascending:i,l;l<d;l++)if(n[l].field==a._cSortedColumn){n.splice(l,1);break}r.sortSettings.sortedColumns.push({field:a._cSortedColumn,direction:a._cSortedDirection});a.processBindings(o)&&(a._cSortedDirection=a._cSortedColumn=null),a.selectedRowIndex()>=0&&a._isRendered&&a.selectedRowIndex(a._sortedRecords.indexOf(this.selectedItem())),a._clearColumnMenu(),a._clearContextMenu()}},clearSorting:function(){var e=this;e.model.sortSettings.sortedColumns=[];var i={};i.requestType=t.TreeGrid.Actions.Sorting,e.processBindings(i)},deleteRow:function(i,s,a){var r=this,n=r.model,o=n.editSettings.editMode.toLowerCase(),l=r.getUpdatedRecords(),d=[];if(!n.editSettings.allowDeleting)return!1;if(n.editSettings.showDeleteConfirmDialog&&!r._confirmDialog.is(":visible")&&"batchediting"!=o&&!r._isEmptyRow)return r._isFromContextmenu=s,r._deleteRowIndex=a,void r._confirmDialog.ejDialog("open");var h={};if(h.requestType=t.TreeGrid.Actions.Delete,h.isFromContextmenu=s,s){if(n.isFromGantt?h.data=l[a]:!n.allowSelection&&!t.isNullOrUndefined(a)&&a>-1?h.data=l[a]:h.data="row"==n.selectionSettings.selectionMode?n.selectedItem:r._rowIndexOfLastSelectedCell>-1?l[r._rowIndexOfLastSelectedCell]:l[r._emptyRowIndex],d.push(h.data),r._isEmptyRow)return h.deletedItems=d,r._updateDeleteAction(h),!0}else{var d=e.extend([],n.selectedItems);h.data=n.selectedItem}if(d.length||d.push(h.data),h.deletedItems=d,"batchediting"==o)if("save"==r._batchSaveCancel)h.data={},h.deletedItems=r.batchChanges.deleted;else{if("cancel"!=r._batchSaveCancel){for(var c=0;c<d.length;c++)r._batchDeleteAction(d[c]),r._updateBatchDeletedRecords(d[c]);return r.clearSelection(),r._batchEditStarts=!0,r._cancelSaveTools(),!0}h.data={},h.deletedItems=r.batchChanges.added}if(r._trigger("actionBegin",h))return!0;r._updateAction(h)&&r._updateDeleteAction(h)},_batchDeleteAction:function(e){var t=this,i=t.model,s=i.allowPaging?t._updatedPageData:i.updatedRecords,a=s.indexOf(e);if(e.isBatchDelete=!0,t.refreshRow(a),e.hasChildRecords)for(var r=e.childRecords,n=0;n<r.length;n++)this._batchDeleteAction(r[n])},_updateBatchDeletedRecords:function(e){var t=this,i=t.batchChanges.changed,s=t.batchChanges.added;s.length>0&&-1!=s.indexOf(e)?s.splice(s.indexOf(e),1):i.length>0&&-1!=i.indexOf(e)&&i.splice(i.indexOf(e),1),-1==t.batchChanges.deleted.indexOf(e)&&t.batchChanges.deleted.push(e)},_updateDeleteAction:function(e){for(var i=this,s=i.model,a=s.editSettings.editMode.toLowerCase(),r=e.deletedItems.length,n=0;n<r;n++)e.data=e.deletedItems[n],i._selectedCellDetails=[],i._removeRecords(e);if("batchediting"==a&&("save"==i._batchSaveCancel||"cancel"==i._batchSaveCancel))return!0;i._ensureDataSource(e),i.updateHeight(),s.currentViewData.length>0&&s.enableAltRow&&t.TreeGrid.updateAltRow(i,s.currentViewData[0],0,0),i._checkboxSelection?(s.selectedCellIndexes=[],i._prevSelectedItem=null,e.isFromContextmenu||(s.selectedItems=[]),s.selectedItem=null,i.selectedRowIndex(-1),i.selectAllRows()):(s.selectedItems=[],s.selectedCellIndexes=[],s.selectedItem=null,i.selectedRowIndex(-1),i._prevSelectedItem=null,i._multiSelectPopup&&i._multiSelectPopup.is(":visible")&&!i.model.isFromGantt&&i._clearMultiSelectPopup()),i._isLoadonDemand&&s.allowPaging&&i._refreshDataSource()},_removeRecords:function(i){var s=this,a=s.model,r=a.editSettings.editMode.toLowerCase(),n=!1,o=this.dataSource();if(i&&(a.editSettings.allowDeleting||i.isDragAndDropDelete)&&i.requestType===t.TreeGrid.Actions.Delete){var l,d,h=i.data;if(a.isFromGantt&&s.model.enableWBS){var c,u,p=!1;if(h&&h.parentItem)c=h.parentItem.childRecords,u=c.indexOf(h);else if(a.flatRecords.length){var m=a.flatRecords,g=m.filter(function(e){return e&&0==e.level});c=g,u=c.indexOf(h)}u!=c.length-1&&(p=!0)}if(l=a.flatRecords.indexOf(h),"resourceView"==a.viewType){var f={data:i.data};s._trigger("updateResource",f),s.dataSource(f.returnObj.dataSource),s._jsonData=f.returnObj.jsondata,f.returnObj.tasks.length>0&&(n=!0)}if(h.parentItem){var _,v=h.parentItem.childRecords;if(v&&v.length>0){_=v.indexOf(h),h.parentItem.childRecords.splice(_,1),i.updatedHierarchyRowIndexData=[];for(var b=_;b<v.length;b++)v[b].hierarchyRowIndex=b,a.hierarchyRowIndexMapping&&(v[b].item[a.hierarchyRowIndexMapping]=b),h.isBatchAdd||("batchediting"!=r?i.updatedHierarchyRowIndexData.push(v[b]):-1==s.batchChanges.updatedHierarchyRowIndexData.indexOf(v[b])&&s.batchChanges.updatedHierarchyRowIndexData.push(v[b]));if(a.showSummaryRow){var x=a.summaryRows.length;x==v.length&&(h.parentItem.childRecords.splice(0,x),a.flatRecords.splice(l,x))}a.parentIdMapping||"resourceView"==a.viewType||h.parentItem.item[a.childMapping].splice(_,1)}}if(s._checkboxSelection&&!i.isDragAndDropDelete)if(i.isFromContextmenu)s._removeChildRecords(a.selectedItems,i.data);else for(;a.selectedItems.length>0;)s._removeChildRecords(a.selectedItems,a.selectedItems[0]);var y=a.parentRecords.indexOf(h);if(-1!==y){a.parentRecords.splice(y,1);var w=a.parentRecords;i.updatedHierarchyRowIndexData=[];for(var b=y;b<w.length;b++)w[b].hierarchyRowIndex=b,a.hierarchyRowIndexMapping&&(w[b].item[a.hierarchyRowIndexMapping]=b),h.isBatchAdd||("batchediting"!=r?i.updatedHierarchyRowIndexData.push(w[b]):-1==s.batchChanges.updatedHierarchyRowIndexData.indexOf(w[b])&&s.batchChanges.updatedHierarchyRowIndexData.push(w[b]))}if(-1!==l){var C=s.getChildCount(h,0);if(a.flatRecords.splice(l,C+1),a.ids&&a.ids.splice(l,C+1),n&&(a.flatRecords.push.apply(a.flatRecords,f.returnObj.tasks),a.ids&&a.ids.push.apply(a.ids,f.returnObj.ids),a.parentRecords.push.apply(a.parentRecords,f.returnObj.tasks)),"resourceView"==a.viewType&&"resourceTask"==h.eResourceTaskType&&h.parentItem&&0==h.parentItem.childRecords.length){var S=a.flatRecords.indexOf(h.parentItem);a.flatRecords.splice(S,1),a.ids&&a.ids.splice(S,1),S=a.parentRecords.indexOf(h.parentItem),-1!=S&&a.parentRecords.splice(S,1)}}if(a.updatedRecords=a.enableVirtualization?s.getExpandedRecords(a.flatRecords):a.flatRecords.slice(),s.updateCollapsedRecordCount(),a.parentIdMapping||"resourceView"==a.viewType){if("resourceView"!=a.viewType)if(h.hasChildRecords&&h.childRecords.length>0&&s._removeChildItem(h),o instanceof t.DataManager){if(o.dataSource.offline&&o.dataSource.json){var T=o.dataSource.json.indexOf(h.item);-1!==T&&o.dataSource.json.splice(T,1)}else if(s._isDataManagerUpdate){var T=s._jsonData.indexOf(h.item);-1!==T&&s._jsonData.splice(T,1)}}else{var T=o.indexOf(h.item);-1!==T&&o.splice(T,1)}}else o instanceof t.DataManager?o.dataSource.offline&&o.dataSource.json?-1!==(d=o.dataSource.json.indexOf(h.item))&&o.dataSource.json.splice(d,1):s._isDataManagerUpdate&&(d=s._jsonData.indexOf(h.item),s._jsonData.splice(d,1)):-1!==(d=o.indexOf(h.item))&&o.splice(d,1);if(h.parentItem&&h.parentItem.childRecords&&0==h.parentItem.childRecords.length&&(h.parentItem.expanded=!1,h.parentItem.hasChildRecords=!1,h.parentItem.hasFilteredChildRecords=!0,a.isFromGantt)){var R=e("#"+s._id.replace("ejTreeGrid","")).data("ejGantt");h.parentItem._updateWorkWithDuration(R)}if(a.showSummaryRow&&s._updateSummaryRow(i),a.showTotalSummary&&s._updateTotalSummaryRow(i),p){var k;h.parentItem?k=c[u]:(c.splice(u,1),k=c[u]),s.updateWBSdetails(k)}a.isFromGantt&&(s.updateSerialNumber(l),a.enableSerialNumber&&s.updateSerialNumberPredecessors(l))}},updateSerialNumberPredecessors:function(e){if(-1!=e){for(var t,i=this,s=i.model,a=s.flatRecords,r=a.length,n=[],o=e;o<r;o++)if(a[o].predecessor)for(var l=a[o].predecessor,d=a[o].taskId,h=0;h<l.length;h++)if(l[h].to){var c=+l[h].to!=d?+l[h].to:null;c&&-1==n.indexOf(c)&&n.push(c)}if(n.length){t=a.filter(function(e){if(n.indexOf(e.taskId)>-1)return e});for(var u=t.length,p=0;p<u;p++){var m=t[p];i.predecessorToSerialPredecessor(m)}}}},predecessorToSerialPredecessor:function(t){for(var i,s,a=this,r=a.model,n=r.flatRecords,o=e("#"+a._id.replace("ejTreeGrid","")).data("ejGantt"),l=t.predecessorsName?t.predecessorsName.split(","):[],d=null,h=0;h<l.length;h++){i=l[h],s=i.split("+"),i.indexOf("-")>=0&&(s=i.split("-"));var c=s[0].match(/(\d+|[A-z]+)/g);if(c&&c.length){var u,p=+c[0],m=c[1];u=n.filter(function(e){return e&&e.taskId==p});var g=u[0]&&u[0].serialNumber+m+(s[1]?"+"+s[1]:"");g&&(d=d?d+","+g:g)}}t.serialNumberPredecessor=d,t.item.serialNumberPredecessor=d,o.refreshGanttRecord(t)},updateWBSdetails:function(e){var t,i,s,a,r,n=this,o=n.model,l=e,d=l.WBS;if(l.parentItem)t=l.parentItem.childRecords,i=t.indexOf(l),a=t,r=a.length;else if(o.flatRecords.length){var h=o.flatRecords,c=h.filter(function(e){return e&&0==e.level});a=c,i=a.indexOf(l),r=a.length}if(s=a.slice(i,r),s.length){var u=-1!=d.lastIndexOf(".")?parseInt(d.substr(d.lastIndexOf(".")+1)):parseInt(d),p=l.parentItem?l.parentItem.WBS:null;u--,n.reCalculateWBS(s,u,p)}},reCalculateWBS:function(t,i,s){var a,r=this,n=r.model,o=(n.currentViewData,e("#"+r._id.replace("ejTreeGrid","")).data("ejGantt")),l="";if(s)for(var d=0;d<t.length;d++)a=i+d,l=t[d].WBS,t[d].WBS=s+"."+a,t[d].item.WBS=s+"."+a,n.enableWBSPredecessor&&r._getPredecessorIds(t[d]),l!=t[d].WBS&&o.refreshGanttRecord(t[d]),t[d].hasChildRecords&&r._updateChildWBS(t[d]);else for(var d=0;d<t.length;d++)a=(i+d).toString(),l=t[d].WBS,t[d].WBS=a,t[d].item.WBS=a,n.enableWBSPredecessor&&r._getPredecessorIds(t[d]),l!=t[d].WBS&&o.refreshGanttRecord(t[d]),t[d].hasChildRecords&&r._updateChildWBS(t[d])},_updateChildWBS:function(t){for(var i=this,s=i.model,a=(s.currentViewData,t.childRecords),r=t.WBS,n=e("#"+i._id.replace("ejTreeGrid","")).data("ejGantt"),o="",l=0;l<a.length;l++)o=a[l].WBS,a[l].WBS=r+"."+(l+1),a[l].item.WBS=r+"."+(l+1),s.enableWBSPredecessor&&i._getPredecessorIds(a[l]),o!=a[l].WBS&&n.refreshGanttRecord(a[l]),a[l].hasChildRecords&&i._updateChildWBS(a[l])},_getPredecessorIds:function(e){for(var t=this,i=t.model,s=e.taskId,a=i.flatRecords,r=i.updatedRecords,n=a.filter(function(e){if(e.predecessorsName)for(var t=e.predecessorsName.split(","),i=0;i<t.length;i++){var a=t[i].match(/(\d+|[A-z]+)/g),r=+a[0];if(r==s)return e}}),o=0;o<n.length;o++)t.updateWBSPredecessor(n[o]),t.refreshRow(r.indexOf(n[o]))},updateSerialNumber:function(t){if(-1!=t)for(var i=this,s=i.model,a=s.flatRecords,r=e("#"+i._id.replace("ejTreeGrid","")).data("ejGantt"),n=t;n<a.length;n++){var o=a[n];o.serialNumber=n+1,o.item.serialNumber=n+1,r.refreshGanttRecord(o,null,!0)}},search:function(e){var i=this,s={},a=i.model.searchSettings;i.model.allowSearching&&(s.requestType=t.TreeGrid.Actions.Searching,s.keyValue=e,i._searchString=e,""!=e?(a.key=e.toLowerCase()==this.localizedLabels.trueText.toLowerCase()?"true":e.toLowerCase()==this.localizedLabels.falseText.toLowerCase()?"false":e,a.fields=0!=this.model.searchSettings.fields.length?this.model.searchSettings.fields:this.getColumnFieldNames()):(a.key="",a.fields=[]),i.processBindings(s))},endEdit:function(){var e=this,t=e.model;return"cellediting"!=e.model.editSettings.editMode.toLowerCase()||e._isRowEdit?"dialogediting"!=e.model.editSettings.editMode.toLowerCase()&&("batchediting"!=t.editSettings.editMode.toLowerCase()||"dialog"!=t.editSettings.batchEditSettings.editMode)||e.saveRow():!this.editFormValidate()||e.saveCell()},updateReadOnly:function(e){this.model.readOnly=e},updateShowGridExpandCellTooltip:function(e){var t=this;t.model.showGridExpandCellTooltip=e,t.refreshContent()},updateShowGridCellTooltip:function(e){var t=this;t.model.showGridCellTooltip=e,t.refreshContent()},getVisibleRange:function(e){var t,i,s,a,r,n=this,o=this.model,l=o.rowHeight+n._detailsRowHeight,d=n._isHierarchyFiltering&&n.model.enableVirtualization?n._updateFilterParent:n.getUpdatedRecords();if("auto"==o.sizeSettings.height&&(n._viewPortHeight=n._getViewPortHeight(),0!=n._viewPortHeight))return void(n._visibleRange={top:0,bottom:n.getExpandedRecords(n.getUpdatedRecords()).length});if(o.allowTextWrap)r=n._getVisibleTextWrapRows(n._scrollTop),s=r.top,"scroll"==e&&n._scrollTop>n._prevScrollTop&&(r.bottom=r.bottom+4),i=r.bottom,n._offset=r.offSet;else if("resourceView"==o.viewType){var h=this._getVisibleRangeForResourceGantt(n._scrollTop);s=h.top,i=h.bottom,n._offset=h.topOffset}else s=n._scrollTop/l,i=n._getRowPosition(n._scrollTop+n._viewPortHeight),a=s-Math.floor(s),n._offset=a*l;return t=Math.floor(s),t=Math.max(0,t),i=Math.min(d.length,i),n._visibleRange={top:t,bottom:i},n._visibleRange},_getVisibleRangeForResourceGantt:function(e){for(var i,s,a,r={},n=this.model,o=e+this._viewPortHeight,l=0,d=e,h=n.updatedRecords,c=0;c<h.length&&(l=this._getTemplateRowHeight(h[c]),0==d&&t.isNullOrUndefined(i)?(i=0,s=0):e<0&&t.isNullOrUndefined(i)&&(i=c-1,s=this._getTemplateRowHeight(h[i])- -1*e),o<=0&&t.isNullOrUndefined(a)&&(a=c),e-=l,o-=l,t.isNullOrUndefined(i)||t.isNullOrUndefined(a));c++);return r.top=i,r.topOffset=s,r.bottom=t.isNullOrUndefined(a)?h.length:a,r},_getVisibleTextWrapRows:function(e){var t,i=this,s=this.model,a=0,r=0,n=0,o=!0,l=0,d=!0,h=0,c=0;s.allowPaging?(t=i._updatedPageData,a=i._updatedPageData.length):(t=s.updatedRecords,a=t.length);for(var u=0;u<a;u++)if(l+=t[u].textWrapRowHeight,s.detailsTemplate&&!s.showDetailsRowInfoColumn&&(t[u].isSummaryRow||(l+=i._detailsRowHeight)),l>=e&&o&&(n=u,r=parseInt(e)-parseInt(l-t[u].textWrapRowHeight),o=!o),o||(c+=t[u].textWrapRowHeight),l>=e+i._viewPortHeight&&d||d&&u==t.length-1){h=u+1,d=!d;break}return c<i._viewPortHeight&&(parseInt((i._viewPortHeight-c)/s.rowHeight)>0?n-=parseInt((i._viewPortHeight-c)/s.rowHeight):n-=1),{top:n,offSet:r,bottom:h}},_getAvgTextWrapRowHeight:function(i,s){var a={};if(this.getRows().length>0){var r,n,o=this,l=this.model,d=0,h=0,c=!1,u=0,p=l.currentViewData;if(l.allowPaging?l.allowPaging&&(r=o._updatedPageData):r=l.updatedRecords,n=e("#"+o._id).find(".e-frozencontainer").length>0?l.showDetailsRow&&l.detailsTemplate&&!l.showDetailsRowInfoColumn?o.getTreeGridRows()[0]:o.getRows()[0]:l.showDetailsRow&&l.detailsTemplate&&!l.showDetailsRowInfoColumn?o.getTreeGridRows():o.getRows(),d="updateHeight"==i&&t.isNullOrUndefined(s)?r.length:"updateHeight"!=i||t.isNullOrUndefined(s)?n.length:s,n.length>0)for(var m=0;m<d;m++)"getAvgHeight"==i?(h=o.getIndexByRow(n[m]),p[h]&&(p[h].textWrapRowHeight!=e(n[m]).height()&&e(n[m]).height()>=l.rowHeight&&(p[h].textWrapRowHeight=e(n[m]).height()),r.indexOf(p[h])>r.length-5&&!o._textWrapNoCalculate&&(c=!0)),u+=e(n[m]).height()):"updateHeight"==i&&(u+=r[m].textWrapRowHeight);"getAvgHeight"==i?(u/=d,a={avgHeight:u,isEnd:c}):a={height:u}}else a={avgHeight:this.model.rowHeight,isEnd:!0,height:this.model.rowHeight};return a},_setWidthToHeaders:function(){var t=this._gridWidth;if(this._frozenColumnsLength>0){for(var i,s=0,a=this.getHeaderContent().find(".e-headercell"),r=0;r<this.columnsWidthCollection.length;r++)s+=this.columnsWidthCollection[r],this._frozenColumnsLength-1==r&&(i=Math.ceil(s)),this.model.headerTextOverflow&&e(a[r]).css({width:this.columnsWidthCollection[r]+"px"});this.getHeaderContent().find("#e-frozenheaderdiv"+this._id).width(t).next().css("margin-left",i+"px"),this.getHeaderContent().find("#e-frozenheaderdiv"+this._id).outerWidth(i).end().find("#e-movableheaderdiv"+this._id).css("width","100%")}},setWidthToColumns:function(){for(var i=this,s=i.model,a=i.getContentTable().children("colgroup").find("col"),r=i.getHeaderTable().children("colgroup").find("col"),n=i._gridWidth,o=s.columns.length,l=0;l<r.length;l++)t.isNullOrUndefined(i.columnsWidthCollection[l])||(a.eq(l).width(i.columnsWidthCollection[l]),r.eq(l).width(i.columnsWidthCollection[l]));if(s.isFromGantt||(a.length>o&&a.eq(o).width(i._detailsColumnWidth),r.length>o&&r.eq(o).width(i._detailsColumnWidth)),s.showTotalSummary&&this._$totalSummaryRowContainer){var d=e(this.getHeaderTable()).find("colgroup"),h=e(d).clone();this._frozenColumnsLength>0?this._$footertableContent&&(e(this._$footertableContent).find("colgroup").remove(),e(h[0]).prependTo(this._$footertableContent[0]),e(h[1]).prependTo(this._$footertableContent[1])):this._$footertableContent&&(e(this._$footertableContent).find("colgroup").remove(),e(h).prependTo(this._$footertableContent))}if(this._frozenColumnsLength>0){var c=this._getFrozenColumnWidth();c<this._gridWidth&&(this.getContent().find("#e-movablecontainer"+this._id).css("margin-left",c+"px"),this.getContent().find("#e-frozencontainer"+this._id).outerWidth(c),this.getScrollElement().data("ejScroller")&&(this.getScrollElement().ejScroller("option","width",this._gridWidth-c-this._totalBorderWidth-1),this.getScrollElement().ejScroller("option","scrollTop",i._scrollTop),this.getScrollElement().ejScroller("option","scrollLeft",i._scrollLeft)),this.getHeaderContent().find("#e-frozenheaderdiv"+this._id).next().css("margin-left",c+"px"),this.getHeaderContent().find("#e-frozenheaderdiv"+this._id).outerWidth(c).end().find("#e-movableheaderdiv"+this._id).css("width","100%"),this._$totalSummaryRowContainer&&(this._$totalSummaryRowContainer.find("#e-frozenfooterdiv"+this._id).width(n).next().css("margin-left",c+"px"),this._$totalSummaryRowContainer.find("#e-frozenfooterdiv"+this._id).outerWidth(c).end().find("#e-movablefooterdiv"+this._id).css("width","100%"),this.mobileDevice()||"safari"!=this.getBrowserDetails().browser||this._$totalSummaryRowContainer.find("#e-movablefooter"+this._id).css("margin-left","auto")),this.mobileDevice()||"safari"!=this.getBrowserDetails().browser||this.getHeaderContent().find("#e-movableheader"+this._id).add(this.getContent().find("#e-movablecontainer"+this._id)).css("margin-left","auto"))}s.columnResizeSettings.columnResizeMode!=t.TreeGrid.ColumnResizeMode.FixedColumns||s.isFromGantt||this._updateTableWidth()},_updateTableWidth:function(t){for(var i,s,a,r=0,n=this.model,o=this._getFrozenColumnWidth(),l=n.columns.length,d=0;d<l;d++)(n.columns[d].isFrozen||0!=n.columns[d].visible)&&(r+=n.columns[d].width);this._frozenColumnsLength>0?(r-=o,i=e(this.getHeaderTable()[1]),s=e(this.getContentTable()[1]),a=n.showTotalSummary?e(this._$footertableContent[1]):null):(i=this.getHeaderTable(),s=this.getContentTable(),a=n.showTotalSummary?e(this._$footertableContent[0]):null),n.showDetailsRow&&n.showDetailsRowInfoColumn&&n.detailsTemplate&&(r+=this._detailsColumnWidth),t||(i.width(r),s.width(r),a&&a.width(r)),r<this._gridWidth-o&&n.columns[l-1].visible?(i.addClass("e-tableLastCell"),n.currentViewData.length>0?s.addClass("e-tableLastCell"):s.removeClass("e-tableLastCell"),s.addClass("e-fixed-border")):(i.removeClass("e-tableLastCell"),s.removeClass("e-tableLastCell"),s.removeClass("e-fixed-border"))},_convertHtml:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},cellEdit:function(i,s){var a,r,n,o=this,l=o.model,d=i,h=o.getUpdatedRecords();if(n=1==l.allowSelection?"row"==l.selectionSettings.selectionMode?this.selectedItem():h[o._rowIndexOfLastSelectedCell]:this.selectedItem(),o.model.showGridCellTooltip&&o._cellMouseLeave(),o.model.isEdit&&o.saveCell(),a=e("#"+o._id+"EditForm"),a.length>0)return!0;if(!n)return!1;if(l.isFromGantt&&n.hasChildRecords&&("status"===s||"startDate"===s&&n.isAutoSchedule||"endDate"===s&&n.isAutoSchedule||"duration"===s&&n.isAutoSchedule||"work"===s||"effortDriven"===s||"taskType"===s||"predecessor"===s||"taskId"===s))return!1;if(l.isFromGantt){if(n.isAutoSchedule&&"fixedWork"==n.taskType&&"effortDriven"==s)return!1;if(!n.isAutoSchedule&&("taskType"==s||"effortDriven"==s))return!1}if((l.enableVirtualization||"cell"===l.selectionSettings.selectionMode)&&(d=h.indexOf(n),i=l.currentViewData.indexOf(n)),(r=t.TreeGrid.getRowByIndex(this,d))&&e(r).find(".e-rowcell").length>0){var c=e(r),u=o.getColumnIndexByField(s),p=c.find(".e-rowcell").eq(u),m=o.model.columns[u],g=n,f=o._getCustomCellValue(g,m.field),_={},v={validationRules:t.isNullOrUndefined(m.validationRules)?{}:e.extend(!0,{},m.validationRules),columnName:m.field,value:t.isNullOrUndefined(f)?t.isNullOrUndefined(g.item[s])?null:g.item[s]:f,data:g,columnObject:m,cell:p},b=!0;if("notesText"==m.field?(v.value=t.isNullOrUndefined(g[s])?g.item&&g.item[s]:g[s],v.value=v.value?o._convertHtml(v.value):v.value):v.value=t.isNullOrUndefined(f)?t.isNullOrUndefined(g.item[s])?null:g.item[s]:f,l.isFromGantt&&"predecessor"===v.columnName){var x=v.data.item[o.model.predecessorMapping];v.value=x||""}if(l.isFromGantt&&"taskMode"===v.columnName){var y=!v.data.isAutoSchedule;v.value=y}return _.data=g,(_.columnIndex=u,_.rowElement=c,_.cellElement=p,o._cellEventTrigger(p,g,v.columnObject),o._trigger("beginEdit",_))?!1:(c.hasClass("e-insertedrow")&&!v.columnObject.isTemplateColumn&&(b=!0),b&&e.extend(o._cellEditingDetails,{rowIndex:i,cellValue:v.value,columnIndex:u,fieldName:s,cellEditType:v.columnObject.editType,data:g}),v.columnIndex=u,o._renderCellEditObject(v,p),
c.addClass("e-editedrow"),v.cell&&v.cell.addClass("e-editedcell"),o._updateHorizontalScrollBar(s),o._updateWrapRowHeights("total,header",null,o._cellEditingDetails.rowIndex,"cellEdit"),!0)}},_updateHorizontalScrollBar:function(t){var i=this,s=i.getScrollElement();if(s.ejScroller("isHScroll")){var a,r=i.model,n=r.columns,o=(n.length,i.getColumnIndexByField(t)),l=0,d=0,h=0,c=0,u=s.find(".e-content").width(),p=s.ejScroller("option","scrollLeft"),m=e("#"+i._id+"EditForm"),g=[];if("cell"==r.selectionSettings.selectionMode&&0==m.length?g=e("#"+i._id).find(".e-selectingcell"):(a=e(m).closest("tr.e-treegridrows"),g=e(a).find("td.e-rowcell")),i._frozenColumnsLength>0&&o<i._frozenColumnsLength)return!1;for(var f=i._frozenColumnsLength;f<=o;f++){if("cell"==r.selectionSettings.selectionMode&&0==m.length)var _=g[g.length-1];else var _=e(g[f-i._frozenColumnsLength]);f==o&&(d=l,h=l+e(_).width()+parseFloat(e(_).css("padding-left"))+parseFloat(e(_).css("padding-right"))+1),n[f].visible&&(l=l+e(_).width()+parseFloat(e(_).css("padding-left"))+parseFloat(e(_).css("padding-right"))+1)}(d<p||h>p+u)&&(c=d<p?p-(p-d)-3:p+(h-(p+u)+3),s.ejScroller("option",{scrollLeft:c}))}},updateAllowColumnResize:function(e){var i=this,s=i.model;s.allowColumnResize=e,s.allowColumnResize&&(i._resizer=new t.gridFeatures.gridResize(i)),i._enableColumnResizeEvents()},_predecessorFromSerialPredecessor:function(i){var s,a,r,n=this,o=n.model,l=o.flatRecords,d=[],h="";return!t.isNullOrUndefined(i)&&i.length>0&&(i.split(",").forEach(function(t){s=t.split("+"),t.indexOf("-")>=0&&(s=t.split("-")),(a=s[0].match(/(\d+|[A-z]+)/g))&&a[0]&&(e.map(l,function(e){if(e.serialNumber==a[0])return r=e.taskId,!1}),r&&d.push(r+(a[1]?a[1]:"")+(s[1]?"+"+s[1]:"")))}),h=d.length&&d.join(",")),h},_validatePredecessorString:function(e){var t,i,s,a,r=this,n=r.model,o=n.flatRecords.length,l=!1;return!(e.length>0)||(e.split(",").forEach(function(e){if(i=e.split("+"),s="+",e.indexOf("-")>=0&&(i=e.split("-"),s="-"),!(a=i[0].match(/(\d+|[A-z]+)/g)))return!1;n.enableSerialNumber?+a[0]<=o&&(l=!0):-1!=n.ids.indexOf(a[0])&&(l=!0),a&&l?a[1]&&("FS"==a[1].toUpperCase()||"FF"==a[1].toUpperCase()||"SF"==a[1].toUpperCase()||"SS"==a[1].toUpperCase()||(t=!1)):t=!1}),!(void 0!==t&&!t))},saveCell:function(){var i=this,s=i.model,a=e("#"+i._id+"EditForm");if(a.length>0){if(!i.editFormValidate())return!0;if(i._isRowEdit)return;if(i._cellEditingDetails.columnIndex>=0){i._focusTreeGridElement();var r,n=i.getUpdatedRecords().indexOf(i._cellEditingDetails.data),o=t.TreeGrid.getRowByIndex(this,n),l=a.closest("td"),d={},h=s.columns[i._cellEditingDetails.columnIndex],c=e("#"+i._id+i._cellEditingDetails.fieldName.split(".").join("")),u=!0;if(d={columnName:h.field,value:i.getCurrentEditCellData(),data:i._cellEditingDetails.data,previousValue:i._cellEditingDetails.cellValue,rowIndex:i._cellEditingDetails.rowIndex,columnObject:h,cellElement:l,rowElement:o},"datetimepicker"!=i._cellEditingDetails.cellEditType&&"dropdownedit"!=i._cellEditingDetails.cellEditType&&"datepicker"!=i._cellEditingDetails.cellEditType||c.data("ejWidgets")&&c[c.data("ejWidgets")[0]]("destroy"),t.isNullOrUndefined(h.format))if("boolean"==d.columnObject.type){var p={};p[d.columnObject.field]=d.value,d.cellElement.empty().html(e(e.templates.Grid_JSONTemplate.render(p))[0].cells[i._cellEditingDetails.columnIndex].innerHTML)}else"notesText"==d.columnObject.field?d.cellElement.empty().html(i._convertHtml(d.value)):d.cellElement.empty().html(d.value);else r=i.formatting(h.format,d.value,s.locale),d.cellElement.empty().html(r);var m=(i._cellEditingDetails.cellEditType,i._cellEditingDetails.fieldName),g=i._checkModfiedCellValue(d.previousValue,d.value,d.columnObject);!s.isFromGantt&&s.idMapping&&s.parentIdMapping&&m==s.idMapping&&i._validateIdValue(d.value)&&(d.value=d.previousValue,g=!1),s.isFromGantt?i._setGanttCellValue(d,m,g):!g&&i._isRemoteData||(g&&"batchediting"==i.model.editSettings.editMode.toLowerCase()&&(!d.data.isBatchAdd&&i._createBatchEditedFields(d.data,m,d.value,d.columnObject),i._batchEditStarts=!0),-1!=m.indexOf(".")?t.createObject(m,d.value,d.data[m]):d.data[m]=d.value,d.data.item[m]=d.data[m],d.requestType="saveCellValue",u=i._updateAction(d)),u&&i._refreshAfterSaveCell(d,!0)}}},_createBatchEditedFields:function(e,i,s,a){var r=this;r.model;e.batchEditedFields?e.batchEditedFields&&t.isNullOrUndefined(e.batchEditedFields[i])?e.batchEditedFields[i]=e[i]:e.batchEditedFields&&!t.isNullOrUndefined(e.batchEditedFields[i])&&(r._checkModfiedCellValue(e.batchEditedFields[i],s,a)||delete e.batchEditedFields[i]):(e.batchEditedFields={},e.batchEditedFields[i]=e[i]?e[i]:""),r._updateBatchChanges(e)},_updateBatchChanges:function(t){var i=this,s=(i.model,i.batchChanges.changed),a=i.batchChanges.added;e.isEmptyObject(t.batchEditedFields)?-1!=s.indexOf(t)&&s.splice(s.indexOf(t),1):-1==a.indexOf(t)&&-1==s.indexOf(t)&&s.push(t)},_refreshAfterSaveCell:function(i,s){var a,r=this,n=r.model;if(this._frozenColumnsLength>0?(n.allowSelection||(i.data.isSelected=!1),a=r._cellEditingDetails.columnIndex<this._frozenColumnsLength?e(e.render[r._id+"_JSONFrozenTemplate"](i.data))[0].cells[r._cellEditingDetails.columnIndex]:e(e.render[r._id+"_Template"](i.data))[0].cells[r._cellEditingDetails.columnIndex-this._frozenColumnsLength]):(n.allowSelection||(i.data.isSelected=!1),a=e(e.render[r._id+"_Template"](i.data))[0].cells[r._cellEditingDetails.columnIndex]),i.cellElement.removeClass("e-editedcell").replaceWith(a),i.cellElement=e(a),n.showDetailsRow&&!n.showDetailsRowInfoColumn&&n.detailsTemplate&&this._refreshDetailsRow(n.currentViewData.indexOf(i.data)),r._trigger("refresh"),i.data.treeMappingName||(i.data.treeMappingName=[]),0==i.data.treeMappingName.length&&i.data.treeMappingName.push(i.columnName),(s||i.isModified)&&"batchediting"!=n.editSettings.editMode.toLowerCase()&&r._trigger("endEdit",i)?(i.data[i.columnName]=i.previousValue,i.data.item[i.columnObject.field]=i.previousValue,r.selectRows(this.selectedRowIndex()),t.TreeGrid.refreshRow(r,n.currentViewData.indexOf(i.data))):n.idMapping&&n.parentIdMapping&&r._updateLastInsertedId(i.data[n.idMapping]),n.isEdit=!1,r._cellEventTrigger(i.cellElement[0],i.data,i.columnObject),e(i.rowElement).removeClass("e-editedrow"),n.showSummaryRow&&(i.editType="celledit",r._updateSummaryRow(i)),n.showTotalSummary&&(i.editType="celledit",r._updateTotalSummaryRow(i)),n.allowTextWrap){if(r._$frozenTableContent.length>0){r._updateRowHeight(r._cellEditingDetails.rowIndex,"savecell"),r._updateGridContentHeight(),r.getScrollElement().ejScroller("refresh");var o=r.getScrollElement().ejScroller("model.scrollTop");r._getFrozenScrollElement().scrollTop(o),n.enableVirtualization&&r.updateHeight()}else r.getScrollElement().ejScroller("refresh");n.allowPaging&&!n.sizeSettings.height&&r.updateHeight()}if(n.allowTextWrap&&0==r._$frozenTableContent.length){var l=r._getViewPortHeight();r._$gridContainer.css({height:l+"px"}),e("#"+r._id+"e-gridcontent").css("height",l),"auto"==n.sizeSettings.height&&r.getScrollElement().ejScroller("refresh")}r._cancelSaveTools();var d=i.columnObject;n.allowFiltering&&d&&"filterbar"==n.filterSettings.filterType&&"dropdownedit"==d.filterEditType&&"dropdownedit"!=d.editType&&r._resizeFilteringElements()},_setGanttCellValue:function(i,s,a){var r=this,n=r.model;if("taskMode"===s&&(a=i.value!==i.previousValue),"predecessor"===s){var o,l={};i.value=e.trim(i.value),o=r._validatePredecessorString(i.value),o?(l.predecessorString=i.value.split(","),l.currentRecord=i.data,l.requestType="validatePredecessor",r._trigger("actionComplete",l),l.result||(i.value=i.previousValue)):i.value=i.previousValue;var d,h,c=[],u=[],p=[],m=0;if(i.previousValue=i.data.predecessor,u=i.previousValue,i.value.length>0){var g=e("#"+this._id.replace("ejTreeGrid","")).data("ejGantt");p=i.data._calculatePredecessor(i.value,n.durationUnitEditText,n.durationUnit,g)}d=p.length;var f=0,_=i.previousValue&&i.previousValue.length;for(f=0;f<_;f++)h=u[f],h.from===i.data.taskId.toString()&&c.push(h);for(m=0;m<d;m++)c.push(p[m]);i.data[r._cellEditingDetails.fieldName]=c,g&&!g._isValidPredecessorString&&(i.value=r._getPredecessorsValue(i.data),g._isValidPredecessorString=!0),i.data.item[n.predecessorMapping]=i.value,i.data.predecessorsName=i.value,n.enableWBS&&n.enableWBSPredecessor&&r.updateWBSPredecessor(i.data)}else if("serialNumberPredecessor"===s){var o,v,l={};i.value=e.trim(i.value),i.value=r._checkSerialPredecessor(i.value),o=r._validatePredecessorString(i.value),o?(l.predecessorString=i.value.split(","),l.currentRecord=i.data,l.requestType="validateSerialPredecessor",r._trigger("actionComplete",l),l.result||(i.value=i.previousValue)):i.value=i.previousValue,v=r._predecessorFromSerialPredecessor(i.value);var d,h,c=[],b=[],p=[],m=0;if(b=i.data.predecessor,i.prevDefaultPredecessors=b,i.previousValue=i.data.serialNumberPredecessor,v.length>0){var g=e("#"+this._id.replace("ejTreeGrid","")).data("ejGantt");p=i.data._calculatePredecessor(v,n.durationUnitEditText,n.durationUnit,g)}d=p.length;var f=0,_=b&&b.length;for(f=0;f<_;f++)h=b[f],h.from===i.data.taskId.toString()&&c.push(h);for(m=0;m<d;m++)c.push(p[m]);i.data.predecessor=c,i.data.item[n.predecessorMapping]=v,i.data.predecessorsName=v,i.data.item.serialNumberPredecessor=i.value,i.data.serialNumberPredecessor=i.value,n.enableWBS&&n.enableWBSPredecessor&&r.updateWBSPredecessor(i.data)}else if("duration"===s){var x=i.value,y=i.data.duration,w=i.data.durationUnit;if(""==x)y=x,n.allowUnscheduledTask?y=null:a=!1;else{var C=t.globalize.findCulture(n.locale),S=C.numberFormat;if(","!=S[","])var T=x.match(/(\d*\.*\,*\d+|[A-z]+)/g);else var T=x.match(/(\d*\.*\d+|[A-z]+)/g);T&&T.length<=2&&(y=t.parseFloat(T[0],null,n.locale),w=T[1]?T[1].toLowerCase():"",w=-1!=n.durationUnitEditText.minute.indexOf(w)?t.Gantt.DurationUnit.Minute:-1!=n.durationUnitEditText.hour.indexOf(w)?t.Gantt.DurationUnit.Hour:-1!=n.durationUnitEditText.day.indexOf(w)?t.Gantt.DurationUnit.Day:n.durationUnit)}isNaN(y)||!a&&i.data.durationUnit.toLowerCase()==w?(i.data.item[n.durationMapping]=i.previousValue,a=!1):(i.data.item[n.durationMapping]=i.data.duration=y,i.data.durationUnit=w,a=!0)}else if(a){switch(s){case"taskId":i.data.item[n.idMapping]=i.value;break;case"taskName":i.data.item[n.taskNameMapping]=i.value;break;case"startDate":case"endDate":n.allowUnscheduledTask||i.value&&""!=i.value?"startDate"==s?i.data.item[n.startDateMapping]=i.value:"endDate"==s&&(i.data.item[n.endDateMapping]=i.value):(a=!1,i.value=i.previousValue);break;case"resourceInfo":i.data.item[n.resourceInfoMapping]=r._getResourceId(i.value);break;case"status":i.data.item[n.progressMapping]=i.value;break;case"notesText":i.data.item[n.notesMapping]=i.value,i.data.notes=i.value,i.data.notesText=i.value;break;case"taskMode":i.data.item[n.taskSchedulingModeMapping]=i.value,i.data.isAutoSchedule=1!=i.value;break;case"work":n.workMapping?i.data.item[n.workMapping]=i.value:i.data.item[r._cellEditingDetails.fieldName]=i.value;break;case"baselineStartDate":i.data.item[n.baselineStartDateMapping]=i.value;break;case"baselineEndDate":i.data.item[n.baselineEndDateMapping]=i.value;break;case"eResourceName":"groupTask"==i.data.eResourceTaskType?i.data.item[n.groupNameMapping]=i.value:"resourceTask"==i.data.eResourceTaskType&&(i.data.item[n.resourceNameMapping]=i.value),i.data.eResourceName=i.value;break;default:i.data.item[r._cellEditingDetails.fieldName]=i.value}i.data[s]=i.value}"startDate"!==i.columnName&&"endDate"!==i.columnName&&"duration"!==i.columnName&&"taskMode"!==i.columnName&&"predecessor"!==i.columnName&&"serialNumberPredecessor"!==i.columnName&&"status"!=i.columnName&&"baselineStartDate"!=i.columnName&&"baselineEndDate"!=i.columnName||(i.isModified=a)},_checkSerialPredecessor:function(e){var t,i,s="",a=[];return e.length>0&&(e.split(",").forEach(function(e){i=e.split("+"),e.indexOf("-")>=0&&(i=e.split("-")),t=i[0].match(/(\d+|[A-z]+)/g),a.push(t[0]+(t[1]?t[1].toUpperCase():"FS")+(i[1]?"+"+i[1]:""))}),s=a.join(",")),s},updateWBSPredecessor:function(e){var t=this,i=t.model,s=e.predecessorsName,a=null;if(s&&s.length>0){for(var r=s.split(","),n=0;n<r.length;n++){var o,l=r[n].match(/(\d+|[A-z]+)/g),d=+l[0],h=l[1];o=i.flatRecords.filter(function(e){return e&&e.taskId==d});var c;c=h?o[0]&&o[0].WBS+h:o[0]&&o[0].WBS,c&&(a=a?a+","+c:c)}e.WBSPredecessor=a,e.item.WBSPredecessor=a}else e.WBSPredecessor="",e.item.WBSPredecessor=""},getCurrentEditCellData:function(){var i,s,a=this,r=a.model,n=r.columns;if(e("#"+a._id+"EditForm").length){var o,l=e("#"+a._id+a._cellEditingDetails.fieldName.split(".").join(""));switch(i=n[a._cellEditingDetails.columnIndex],a._cellEditingDetails.cellEditType){case t.TreeGrid.EditingType.String:o=l.val();break;case t.TreeGrid.EditingType.Numeric:o=parseFloat(l.val()),o=r.isFromGantt&&("work"==i.field||"status"==i.field||"duration"==i.field)||"unit"==i.field?isNaN(o)?a._cellEditingDetails.cellValue:o:l.ejNumericTextbox("model.value");break;case t.TreeGrid.EditingType.Maskedit:o=l.ejMaskEdit("model.value");break;case t.TreeGrid.EditingType.Dropdown:o=r.isFromGantt&&"resourceInfo"===a._cellEditingDetails.fieldName?a._getSelectedItem(l.ejDropDownList("model.selectedItems")):r.isFromGantt&&"taskMode"===a._cellEditingDetails.fieldName?"true"==l.ejDropDownList("model.value"):0==l.ejDropDownList("model.showCheckbox")&&l.ejDropDownList("model.multiSelectMode")==t.MultiSelectMode.None?l.ejDropDownList("model.itemValue"):l.ejDropDownList("getSelectedValue");break;case t.TreeGrid.EditingType.Boolean:o=l.is(":checked");break;case t.TreeGrid.EditingType.DatePicker:o=i&&!i.format?t.format(l.ejDatePicker("model.value"),this.model.dateFormat,this.model.locale):l.ejDatePicker("model.value"),""==o&&r.isFromGantt&&(o=a._cellEditingDetails.cellValue);break;case t.TreeGrid.EditingType.DateTimePicker:var d=l.ejDateTimePicker("model.value"),h=l.ejDateTimePicker("model.dateTimeFormat"),c=l.ejDateTimePicker("model.locale");o=i&&!i.format?t.format(l.ejDateTimePicker("model.value"),this.model.dateFormat,this.model.locale):l.ejDateTimePicker("model.value"),s=t.format(l.val(),h,c);s!==t.format(d,h,c)&&r.isFromGantt&&!r.allowUnscheduledTask&&(o=a._cellEditingDetails.cellValue);break;case"edittemplate":var u=i.editTemplate.read;"string"==typeof u&&(u=t.util.getObject(u,window)),o=u(l)}return"string"==typeof o&&o.length&&"number"==r.columns[a._cellEditingDetails.columnIndex].type&&(o=parseFloat(o)),o}return null},getCurrentEditCellDataForRowEdit:function(i,s,a){var r,n,o,l,d=this,h=d.model,c=h.columns,i=i.split(".").join("");if(d.model.editSettings.allowEditing&&("dialogEditing"==d.model.editSettings.editMode||"batchediting"==h.editSettings.editMode.toLowerCase()&&"dialog"==h.editSettings.batchEditSettings.editMode)?(n=e("#"+d._id+"EditFormDialog").length,o=e("#"+d._id+i),l=!0):(n=e("#"+d._id+"EditForm").length,o=e("#"+d._id+i)),n){var u,p;switch(r=c[a],s){case t.TreeGrid.EditingType.String:u=o.val();break;case t.TreeGrid.EditingType.Numeric:u=parseFloat(o.val()),u=o.data("ejNumericTextbox")?o.ejNumericTextbox("model.value"):u;break;case t.TreeGrid.EditingType.Dropdown:u=o.data("ejDropDownList")?0==o.ejDropDownList("model.showCheckbox")&&o.ejDropDownList("model.multiSelectMode")==t.MultiSelectMode.None?o.ejDropDownList("model.itemValue"):o.ejDropDownList("getSelectedValue"):o.val(),l||o.data("ejWidgets")&&o[o.data("ejWidgets")[0]]("destroy");break;case t.TreeGrid.EditingType.Boolean:u=o.is(":checked");break;case t.TreeGrid.EditingType.DatePicker:p=o.hasClass("e-datepicker")?-1==h.dateFormat.toLowerCase().indexOf("hh")?o.ejDatePicker("model.value"):o.ejDateTimePicker("model.value"):o.val(),u=r&&!r.format?d.getFormatedDate(p):p,l||o.data("ejWidgets")&&o[o.data("ejWidgets")[0]]("destroy");break;case t.TreeGrid.EditingType.DateTimePicker:u=o.hasClass("e-datetimepicker")?r&&!r.format?t.format(o.ejDateTimePicker("model.value"),this.model.dateFormat,this.model.locale):o.ejDateTimePicker("model.value"):o.val(),l||o.data("ejWidgets")&&o[o.data("ejWidgets")[0]]("destroy");break;case t.TreeGrid.EditingType.Maskedit:u=o.ejMaskEdit("model.value");break;case"edittemplate":var m=r.editTemplate.read;"string"==typeof m&&(m=t.util.getObject(m,window)),u=m(o)}return"string"==typeof u&&u.length&&"number"==h.columns[a].type&&(u=parseFloat(u)),u}return null},_getResourceId:function(e){var t=[],i=0,s=e.length;for(i=0;i<s;i++)t.push(e[i][this.model.resourceIdMapping]);return t},_getSelectedItem:function(i){var s,a=this,r=a.model,n=0,o=i.length,l=r.resourceUnitMapping,d=r.resourceIdMapping,h=r.columns[a._cellEditingDetails.columnIndex].dropdownData,c=r.selectedItem.resourceInfo,u=[];if(h)for(n=0;n<o;n++){if(c)for(var p=0;p<c.length;p++){if(c[p][d]===i[n]+1){s=p;break}s=-1}t.isNullOrUndefined(s)||-1==s?e.each(h,function(t,s){if(i[n]===t){var a=e.extend({},s);a[l]=100,u.push(a)}}):u.push(c[s])}return u},getFormatedDate:function(e){return t.format(e,this.model.dateFormat,this.model.locale)},getDateFromFormat:function(e){return"object"==typeof e?new Date(e):e?null==t.parseDate(e,this.model.dateFormat,this.model.locale)?new Date(e):t.parseDate(e,this.model.dateFormat,this.model.locale):void 0},formatting:function(i,s,a){i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),a=t.preferredCulture[a]?a:"en-US";var r,n,o,l,d=i;if(r=i.split("{0:"),l=i.split("}"),n=r[0],o=l[1],"string"==typeof s&&e.isNumeric(s)&&(s=Number(s)),-1!=i.indexOf("{0:")){var h=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),c=h.exec(i);return s=null!=c&&null!=s?null!=n&&null!=o?n+t.format(s,c[2],a)+o:t.format(s,c[2],a):null!=s?s:""}return null!=this.data&&null==this.data.Value?(e.each(this.data,function(e,t){d=d.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),d):this.data.Value},getColumnIndexByField:function(e){var t=this,i=t.model.columns,s=i.length,a=0;for(a;a<s&&i[a].field!=e;a++);return a==i.length?-1:a},getUpNextVisibleColumnIndex:function(e,t){var i=this,s=i.model.columns;for(e||(e=0),e;e<=s.length;e++)if(e!=s.length||"rightArrow"!=t&&"moveCellRight"!=t||(e=0,i._focusingRowIndex+=1),s[e].visible&&s[e].allowCellSelection)return s.indexOf(s[e])},getPreviousVisibleColumnIndex:function(e,t){var i=this,s=i.model.columns;for(e||(e=s.length-1),e;e<s.length;e--)if(e<0&&("leftArrow"==t||"moveCellLeft"==t)&&(e=s.length-1,i._focusingRowIndex-=1),s[e].visible&&s[e].allowCellSelection)return s.indexOf(s[e])},getBrowserDetails:function(){var e=navigator.userAgent.match(/(firefox|chrome|opera|msie|safari)\s?\/?(\d+(.\d+)*)/i);return navigator.userAgent.match(/Trident\/7\./)?{browser:"msie",version:jQuery.uaMatch(navigator.userAgent).version}:{browser:e[1].toLowerCase(),version:e[2]}},mobileDevice:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},getFieldNameByHeaderText:function(e){var i=this;return t.isNullOrUndefined(i._fieldColumnNames[e])?null:i._fieldColumnNames[e]},clearSelection:function(i){var s=this,a=s.model,r=s.getUpdatedRecords();if(-1!=this.selectedRowIndex()||-1==this.selectedRowIndex()&&-1!=s._previousIndex||-1==i){var n,i;if(n=this._frozenColumnsLength?e(s.getRows()[0]).add(s.getRows()[1]):s.getRows(),t.isNullOrUndefined(i)||-1==i){n&&n.find(".e-rowcell,.e-detailsrowcell").removeClass("e-selectionbackground").removeClass("e-active");var o=new t.DataManager(a.flatRecords),l=new t.Query;l.search(!0,["isSelected"],t.FilterOperators.Equals,!0);var d=o.executeLocal(l),h=d&&d.length;if(h>0){var c=0;for(c=0;c<h;c++)d[c].isSelected=!1}}else{t.TreeGrid.getRowByIndex(s,i).find(".e-selectionbackground").removeClass("e-selectionbackground").removeClass("e-active");var u=r[i];u&&(u.isSelected=!1)}if(s._checkboxSelection)s.selectedRowIndex(-1),a.selectedItem=null,s._cancelSaveTools();else if(a.selectedItems.length>0&&-1!=i&&!t.isNullOrUndefined(i)){var p=e.inArray(r[i],a.selectedItems);-1!=p&&(a.selectedItems.splice(p,1),r[i].isSelected=!1,a.selectedItem=a.selectedItems.length>0?a.selectedItems[a.selectedItems.length-1]:null,s.selectedRowIndex(r.indexOf(a.selectedItem)))}else(!a.selectedItems.length||a.selectedItems.length&&!s._multiSelectCtrlRequest||-1==i||t.isNullOrUndefined(i))&&(s.selectedRowIndex(-1),a.selectedItem=null,a.selectedItems=[],s._cancelSaveTools());s.model.allowSelection&&"multiple"==s.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&!n.find(".e-rowcell,.e-detailsrowcell").hasClass("e-selectionbackground")&&!e("#"+s._id+"_selectionpopup").find(".e-rowselect").hasClass("e-spanclicked")&&s._clearMultiSelectPopup()}"cell"==a.selectionSettings.selectionMode&&(s._selectedCellDetails=[],a.selectedCellIndexes=[],e("#"+s._id).find(".e-selectingcell").removeClass("e-selectingcell"),s._rowIndexOfLastSelectedCell=-1,s._lastSelectedCellIndex=-1,s._focusingRowIndex=-1),s.model.allowSelection&&"multiple"==s.model.selectionSettings.selectionType&&t.isNullOrUndefined(i)&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&s._clearMultiSelectPopup()},_clearMultiSelectPopup:function(){var t=this;e("#"+t._id+"_selectionpopup").find(".e-rowselect").removeClass("e-spanclicked"),t._multiSelectPopup.hide(),t._multiSelectCtrlRequest=!1,t._isTouchTrigger=!1},getChildRecordsCount:function(e){var t=this,i=e.childRecords,s=0,a=i?i.length:0;for(s;s<a;s++)if(t._filteredRecords.length>0){var r=t._filteredRecords.indexOf(i[s]);-1!=r&&(++t._removedCount,i[s].hasChildRecords&&i[s].expanded&&t.getChildRecordsCount(i[s]))}else++t._removedCount,i[s].hasChildRecords&&i[s].expanded&&t.getChildRecordsCount(i[s]);return t._removedCount},getExpandStatus:function(e){var t=e.parentItem;return null==t||!1!==t.expanded&&(!t.parentItem||!1!==t.parentItem.expanded&&this.getExpandStatus(t.parentItem))},getColumnFieldNames:function(){var e=[],t=this.model,i=t.columns,s=0,a=t.searchSettings.fields,r=i.length;if(a.length>0)return a;for(s;s<r;s++)i[s].field&&"resourceInfo"!=i[s].field&&"predecessor"!=i[s].field?e.push(i[s].field):"resourceInfo"==i[s].field?e.push("resourceNames"):"predecessor"==i[s].field&&e.push("predecessorsName");return e},_getColumnMappingNames:function(){var e=[],t=this.model.columns,i=0,s=t.length;for(i;i<s;i++)t[i].field&&"resourceInfo"!=t[i].field&&"predecessor"!=t[i].field&&"work"!=t[i].field&&"taskType"!=t[i].field&&"effortDriven"!=t[i].field?e.push(t[i].mappingName):"resourceInfo"==t[i].field?e.push("resourceNames"):"work"==t[i].field?e.push(t[i].field):"taskType"==t[i].field?e.push(t[i].field):"effortDriven"==t[i].field?e.push(t[i].field):"predecessor"==t[i].field&&e.push("predecessorsName");return e},renderRecords:function(e){var i=this,s=i.model;e||(e={},!s.isFromGantt&&s.enableCollapseAll?(e.requestType=t.TreeGrid.Actions.ExpandCollapse,i._isInExpandCollapseAll=!0):e.requestType=t.TreeGrid.Actions.Refresh),this.sendDataRenderingRequest(e),i._isInExpandCollapseAll=!1},_shiftKeySelectCells:function(i,s){var a=this,r=a.model,n=a.getUpdatedRecords(),o=a._shiftKeyFirstElementDetails.firstElementRowIndex,l=t.isNullOrUndefined(a._shiftKeyFirstElementDetails.firstElementCellIndex)?-1:a._shiftKeyFirstElementDetails.firstElementCellIndex,d=i.rowIndex,h=i.cellIndex,c=[o,d],u=[l,h];c.sort(function(e,t){return e-t}),u.sort(function(e,t){return e-t}),a._isShiftKeyNavigation=!0,a._selectedCellDetails=[],r.selectedCellIndexes=[],e("#"+a._id).find(".e-selectingcell").removeClass("e-selectingcell");for(var p=c[0];p<=c[1];p++){var m=n&&n[p];r.currentViewData.indexOf(m);if(!t.isNullOrUndefined(m)&&!m.isSummaryRow)for(var g=u[0];g<=u[1];g++)a.selectCells([{rowIndex:p,cellIndex:g}])}},selectCells:function(i,s){var a,r,n,o=this,l=o.model,d=o.getUpdatedRecords(),h=o.getRows(),c=i.length,u=l.columns;if("single"==l.selectionSettings.selectionType&&(c=1),s&&!t.isNullOrUndefined(s)||0!=o._isShiftKeyNavigation||(o._selectedCellDetails=[],l.selectedCellIndexes=[],e("#"+o._id).find(".e-selectingcell").removeClass("e-selectingcell")),"cell"==l.selectionSettings.selectionMode&&l.allowSelection&&h.length>0)for(var p=0;p<c;p++)if(-1!=i[p].rowIndex){var n=d&&d[i[p].rowIndex],m=l.currentViewData.indexOf(n);if(!t.isNullOrUndefined(n)&&!n.isSummaryRow){var g=i[p].cellIndex>=o._frozenColumnsLength?1:0,f=i[p].cellIndex>=o._frozenColumnsLength?i[p].cellIndex-o._frozenColumnsLength:i[p].cellIndex;if(a=o._frozenColumnsLength>0?h[g][m]:h[m],!t.isNullOrUndefined(n)&&t.isNullOrUndefined(a)&&(a=e(e.render[o._id+"_Template"](n))[0]),r=a.childNodes[f],-1!=i[p].cellIndex&&u[i[p].cellIndex].allowCellSelection&&u[i[p].cellIndex].visible&&!o._cellSelectingEventTrigger({rowIndex:i[p].rowIndex,cellIndex:i[p].cellIndex,rowElement:a,cellElement:r})){e(r).addClass("e-selectingcell");var _,v={rowIndex:i[p].rowIndex,cellIndex:i[p].cellIndex,cellElement:r,data:n};_="msie"==t.browserInfo().name&&t.browserInfo().version<9?o._getCellIndex(o._selectedCellDetails,"cellElement").indexOf(r):o._selectedCellDetails.map(function(e){return e.cellElement}).indexOf(r),-1==_&&(o._selectedCellDetails.push(v),l.selectedCellIndexes.push({rowIndex:v.rowIndex,cellIndex:v.cellIndex})),o._cellSelectedEventTrigger({rowIndex:i[p].rowIndex,cellIndex:i[p].cellIndex,rowElement:a,cellElement:r},o._previousSelectedCellDetails),o._previousSelectedCellDetails={rowElement:a,cellElement:r,cellIndex:i[p].cellIndex,rowIndex:i[p].rowIndex},o._updateHorizontalScrollBar(u[i[p].cellIndex].field)}}}0==o._isShiftKeyNavigation&&(o._shiftKeyFirstElementDetails.firstElementRowIndex=o._focusingRowIndex,o._shiftKeyFirstElementDetails.firstElementCellIndex=o._cellIndex,o._rowIndexOfLastSelectedCell=v?v.rowIndex:o._rowIndexOfLastSelectedCell,o._lastSelectedCellIndex=o._cellIndex)},selectRows:function(i,s,a){var r=this,n=r.model;r.getRows();if(("cell"!=n.selectionSettings.selectionMode||-1==i)&&!t.TreeGrid.getRowByIndex(r,i).hasClass("e-summaryrow")){if((n.editSettings.allowEditing||n.editSettings.allowAdding)&&!r._isRowEdit&&"click"!=n.editSettings.beginEditAction&&e("#"+r._id+"EditForm").length>0&&r.endEdit())return void r.getRows();this._frozenColumnsLength>0&&e(r.getRows()[0]);var o=r.getUpdatedRecords();if(t.isNullOrUndefined(s)||t.isNullOrUndefined(i)){switch(i=t.isNullOrUndefined(i)?s:i,n.selectionSettings.selectionType){case t.TreeGrid.SelectionType.Checkbox:var l=o[i];if(r.clearSelection(-1),a){var d="unchecked"==l.checkboxState?"checked":"unchecked";r._traverseSelection(l,d,!1),r.selectAllRows()}return o[i]&&!o[i].isSelected&&(n.allowSelection&&t.TreeGrid.getRowByIndex(r,i).find(".e-rowcell,.e-detailsrowcell").addClass(" e-selectionbackground e-active"),o[i].isSelected=!0,n.selectedItem=o[i]),r._prevSelectedItem&&r._prevSelectedItem!=n.selectedItem&&(r._prevSelectedItem.isSelected=!1),r._prevSelectedItem=o[i],r.selectedRowIndex(i),n.selectedItems=r.getSelectedRecords(),!1;case t.TreeGrid.SelectionType.Multiple:if(r._multiSelectCtrlRequest&&-1!=i){var l=o[i],h=e.inArray(l,n.selectedItems);r._prevSelectedItem=o[i],-1!=h&&r.clearSelection(i),-1==h&&(n.selectedItems.push(l),n.allowSelection&&t.TreeGrid.getRowByIndex(r,i).attr("aria-selected","true").find(".e-rowcell,.e-detailsrowcell").addClass(" e-selectionbackground e-active").attr("tabindex","0"),l.isSelected=!0,n.selectedItem=o[i]);break}case t.TreeGrid.SelectionType.Single:r.clearSelection(-1),n.selectedItem=null,i<=o.length-1&&(-1!=i&&n.selectedItems.push(o[i]),r._prevSelectedItem=o[i],r._shiftSelectedRecord=null,n.allowSelection&&t.TreeGrid.getRowByIndex(r,i).find(".e-rowcell,.e-detailsrowcell").addClass(" e-selectionbackground e-active"),o[i]&&(o[i].isSelected=!0,n.selectedItem=o[i]),r._prevSelectedItem&&r._prevSelectedItem!=n.selectedItem&&(r._prevSelectedItem.isSelected=!1))}n.selectedItems.length&&-1!=n.selectedItems.indexOf(o[i])?(r._prevSelectedItem=o[i],r._shiftSelectedRecord=null,this.selectedRowIndex()!=i&&this.selectedRowIndex(i)):0==n.selectedItems.length&&-1!=this.selectedRowIndex()?this.selectedRowIndex(-1):this.selectedRowIndex(n.updatedRecords.indexOf(n.selectedItems[n.selectedItems.length-1]))}else if(n.selectionSettings.selectionType==t.TreeGrid.SelectionType.Multiple){r.clearSelection(-1);for(var c,u,p,m=i-s<0?o.slice(i,s+1):o.slice(s,i+1),g=0;g<m.length;g++)r.getExpandStatus(m[g])&&(m[g].isSelected=!0,u=o.indexOf(m[g]),c=t.TreeGrid.getRowByIndex(r,u),this._frozenColumnsLength?(p=e(c[0]).add(c[1]),c=c[0]):p=c,p&&e(p).find(".e-rowcell,.e-detailsrowcell").addClass(" e-selectionbackground e-active"),n.selectedItem=n.updatedRecords[u],this.selectedRowIndex(u))}return n.selectedItems=r.getSelectedRecords(),n.isFromGantt||(r._multiSelectCtrlRequest=!1),n.isFromGantt&&r._cancelSaveTools(),!1}},getSelectedRecords:function(){var e,i=this,s=this.model,a=s.selectionSettings.selectionType,r=[];return s.allowFiltering&&s.filterSettings.filteredColumns.length>0||i._searchString.length>0?s.isFromGantt||a==t.TreeGrid.SelectionType.Single?e=s.updatedRecords:a!=t.TreeGrid.SelectionType.Multiple&&a!=t.TreeGrid.SelectionType.Checkbox||(e=i._flatFilteredRecords):e=s.flatRecords,r="checkbox"==a?e.filter(function(e){return"checked"==e.checkboxState}):e.filter(function(e){return e.isSelected}),r.slice()},clearAllSelection:function(){var t=this,i=this.model;t.model.allowSelection&&"multiple"==t.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&t._clearMultiSelectPopup(),t.selectRows(-1),i.selectedItem=null,t._selectedCellDetails=[],i.selectedCellIndexes=[],t._rowIndexOfLastSelectedCell=-1,t._lastSelectedCellIndex=-1,t._focusingRowIndex=-1,e("#"+t._id).find(".e-selectingcell").removeClass("e-selectingcell"),t._cancelSaveTools()},getCellIndex:function(t,i){var s=e(t.target),a=-1;this.model;if(i&&(s=e(i)),s.hasClass("e-detailsrowcell")||s.closest("td").hasClass("e-detailsrowcell"))return-1;if("TD"==s.prop("tagName"))a=s.index();else if("DIV"==s.prop("tagName")&&s.hasClass("e-cell")){var r=s.closest("td");a=r.index()}else if("DIV"==s.prop("tagName")&&e(s.closest("td")[0]).hasClass("e-templatecell")){var r=s.closest("td");a=r.index()}else if(e(s.closest("td")[0]).hasClass("e-templatecell")&&e(s.closest("tr")[0]).hasClass("e-templaterow")){var r=s.closest("td");a=r.index()}else if("TD"==s.parent().prop("tagName")){var r=s.closest("td");a=s.parent().index()}else if("TH"==s.prop("tagName")||"DIV"==s.prop("tagName")&&"col-resize"==e(s.closest("th")[0]).css("cursor")){var n="TH"==s.prop("tagName")?e(s):s.closest("th"),o=s[0].getBoundingClientRect(),l=-1!=navigator.userAgent.indexOf("WebKit")?document.body.scrollLeft:document.documentElement.scrollLeft;a=this._orgX<o.left+5+l&&n.prevAll(":visible:first")[0]?n.prevAll(":visible:first")[0].cellIndex:n.index()}else if(s.closest("td.e-rowcell").length>0){var r=s.closest("td.e-rowcell");a=r.index()}return-1!=a&&this._frozenColumnsLength>0&&(s.closest(".e-movablecontentdiv").length>0||s.closest(".e-movableheaderdiv").length>0||s.closest(".e-movablefooterdiv").length>0)&&(a+=this._frozenColumnsLength),a},getRowIndex:function(t){var i=this,s=e(t.target),a=i.getRows(),r=-1;this.model;if(s.closest(".e-gridcontainer").length>0){if(this._frozenColumnsLength>0)if(s.closest(".e-frozencontentdiv").length>0||s.closest(".e-frozencontainer").length>0)a=e(a[0]);else{if(!(s.closest(".e-movablecontentdiv").length>0||s.closest(".e-movablecontainer").length>0))return r;a=e(a[1])}if(-1==(r=a.index(s))){var n=s.closest("tr");r=a.index(n)}return r}},_cancelEditState:function(e){var i=this;if(!t.isNullOrUndefined(e)){var s=i.getScrollElement().ejScroller("option","scrollLeft"),a=0;a=this._frozenColumnsLength>0?i._$gridHeaderContainer.find("#e-movableheader"+this._id).scrollLeft():i._$gridHeaderContainer.scrollLeft(),s!=a&&(i.getScrollElement().ejScroller("option","scrollLeft",a),i.model.showTotalSummary&&i._$footerContainer&&(this._frozenColumnsLength>0?i._$footerContainer.find("#e-movablefooter"+this._id).scrollLeft(a):i._$footerContainer.scrollLeft(a)))}
i.model.isEdit?i.cancelEditCell():i._isRowEdit&&i.cancelRowEditCell()},cancelEditCell:function(t){var i,s,a=this,r=a.model,n=(a.model.selectedItem,a._cellEditingDetails.columnIndex),o={},l=r.columns[n];if(r.isFromGantt&&!r.isEdit)return!0;o={columnName:l.field,value:a.getCurrentEditCellData(),data:a._cellEditingDetails.data,previousValue:a._cellEditingDetails.cellValue,columnObject:l},this._frozenColumnsLength>0?this._frozenColumnsLength<=a._cellEditingDetails.columnIndex?(n=a._cellEditingDetails.columnIndex-this._frozenColumnsLength,i=e(a.getRows()[1])[a._cellEditingDetails.rowIndex],e(i).hasClass("e-editedrow")&&e(i).removeClass("e-editedrow"),s=i.cells[n],e(s).removeClass("e-editedcell").empty().html(e(e.render[a._id+"_Template"](o.data))[0].cells[n].innerHTML)):(i=e(a.getRows()[0])[a._cellEditingDetails.rowIndex],e(i).hasClass("e-editedrow")&&e(i).removeClass("e-editedrow"),s=i.cells[n],e(s).removeClass("e-editedcell").empty().html(e(e.render[a._id+"_JSONFrozenTemplate"](o.data))[0].cells[n].innerHTML)):(i=e(a.getRows())[a._cellEditingDetails.rowIndex],e(i).hasClass("e-editedrow")&&e(i).removeClass("e-editedrow"),s=i.cells[n],e(s).removeClass("e-editedcell").empty().html(e(e.render[a._id+"_Template"](o.data))[0].cells[n].innerHTML)),a._cellEventTrigger(e(s)[0],o.data,o.columnObject),a.model.isEdit=!1,a._cancelSaveTools(),a._trigger("refresh")},_destroyWidgetElements:function(){for(var t,i=this,s=this.model,a=s.columns,r=a.length,n=0;n<r;n++){t=i._getFieldValue(a[n].field,n);var o=e("#"+i._id+t);o.data("ejWidgets")&&o[o.data("ejWidgets")[0]]("destroy")}},cancelRowEditCell:function(){var i,s,a=this,r=this.model,n=r.editSettings.allowDeleting,o=e(document.getElementById(a._id+"EditForm")),l=e("#"+a._id+"EditFrozenForm");o.length>0&&this._destroyWidgetElements(),i=e(o.closest("tr")),s=l.closest("tr");var d=a.getIndexByRow(i),h=r.currentViewData[d];if((-1!=d||0!=o.length)&&(i.hasClass("e-addedrow")&&(a.model.editSettings.allowDeleting||(a.model.editSettings.allowDeleting=!0)),i.hasClass("e-editedrow")?(i.removeClass("e-editedrow").empty().html(e(e.render[a._id+"_Template"](h))[0].innerHTML),s.length>0&&s.removeClass("e-editedrow").empty().html(e(e.render[a._id+"_JSONFrozenTemplate"](h))[0].innerHTML),a._rowEventTrigger(i,h)):i.hasClass("e-rowedit")?(i.removeClass("e-rowedit").empty().html(e(e.render[a._id+"_Template"](h))[0].innerHTML),s.length>0&&s.removeClass("e-rowedit").empty().html(e(e.render[a._id+"_JSONFrozenTemplate"](h))[0].innerHTML),a._rowEventTrigger(i,h)):i.hasClass("e-addedrow")&&(a._isRefreshAddedRecord=!1,a._isEmptyRow=!0,a.deleteRow(null,!0,null),a._isEmptyRow=!1),r.isEdit=a._isRowEdit=!1,r.editSettings.allowDeleting=n,a._updateWrapRowHeights("total,header",null,d),a._cancelSaveTools(),a._trigger("refresh"),a._commandColumnLength>0)){var c=t.TreeGrid.getRowByIndex(a,a.getUpdatedRecords().indexOf(r.currentViewData[d]));a._refreshUnboundTemplate(c)}},refreshRow:function(i){var s=this,a=s.model,r=a.allowPaging?s._updatedPageData:a.updatedRecords,n=r[i],o=s.getIndexByRow(e("#"+s._id+"EditForm").closest("tr"));(a.enableVirtualization||a.allowPaging)&&(i=a.currentViewData.indexOf(n)),n&&i>-1&&(t.TreeGrid.refreshRow(this,i),o==i&&(s._isRowEdit=s.model.isEdit=!1,s._cancelSaveTools()))},_refreshDetailsRow:function(t){var i=this,s=this.model,a=i.model.currentViewData[t],r={};if(a){r=e(this._frozenColumnsLength>0?i.getRows()[1]:i.getRows());var n=e(r[t]).next("tr");if(n.hasClass("e-detailsrow")){n.remove();var o=e(e.render[i._id+"_detailRowTemplate"](a));e(r[t]).after(o),i.setGridRows(e(i.getContentTable().get(0).rows)),this._gridRows=this.getContentTable().get(0).rows,this._frozenColumnsLength>0&&(this._gridRows=[this._gridRows,this.getContentTable().get(1).rows]),i._trigger("refresh"),s.detailsDataBound&&this._trigger("detailsDataBound",{detailsElement:o,data:a})}}},_refreshedCellEventTrigger:function(t){var i=this,s=this.model;if(null!=s.queryCellInfo||null!=s.rowDataBound||null!=s.detailsDataBound){null!=s.rowDataBound&&i._trigger("rowDataBound",{rowElement:t.rowElement,data:t.data});var a=t.rowElement.cells,r=e(t.rowElement).find(".e-rowcell"),n=0,o=a.length,l=null,d=i.model.columns;if(null!=s.queryCellInfo)for(n;n<o;n++)e(a[n]).hasClass("e-rowcell")&&(l=d[r.index(a[n])]),l&&i._cellEventTrigger(a[n],t.data,l);if(s.detailsDataBound&&e(t.rowElement).next("tr").hasClass("e-detailsrow")){var h=e(t.rowElement).next("tr");this._frozenColumnsLength>0&&(h=e(h[1])),this._trigger("detailsDataBound",{detailsElement:e(t.rowElement).next("tr"),data:t.data})}}},_refreshGridPager:function(){if(null!=this.getPager()){var e=this,t=e.model,i=this.getPager().ejPager("model"),s={};s.currentPage=this._currentPage();var a=e._isHierarchyFiltering?e.getExpandedRecords(e._filterParentRecords).length:t.updatedRecords.length;if(0==t.currentViewData.length&&a>0&&1!=i.totalPages)return void e.gotoPage(s.currentPage-1);s.totalRecordsCount=e._isLoadonDemand?e._pageRecordCountOnDemand:e._isRemoteData?t.pageSettings.totalRecordsCount:e._gridRecordsCount,this.getPager().ejPager("option",s).ejPager("refreshPager"),t.pageSettings.totalPages=i.totalPages||null,e._isRemoteData||(t.pageSettings.totalRecordsCount=i.totalRecordsCount||null),e._updatePagerTextAlignment()}},_getVisibleChildRecordCount:function(e,t,i){var s,a,r=this;this.model;if(e.hasChildRecords){s=e.childRecords,a=s.length;for(var n=0;n<a;n++)-1!==i.indexOf(s[n])&&t++,s[n].hasChildRecords&&(t=r._getVisibleChildRecordCount(s[n],t,i))}else-1!==i.indexOf(e)&&t++;return t},_renderAddedRow:function(e,i){var s=this,a=this.model;if(s._updateCurrentViewData(),a.enableVirtualization||a.allowPaging){s.updateAltRow();var r={};r.requestType=t.TreeGrid.Actions.Refresh,s.sendDataRenderingRequest(r)}else s.renderNewAddedRow(e,i);s.updateHeight(),s._updateFixedTableBorder()},renderNewAddedRow:function(i,s){var a,r,n=this,o=(this.model,n.getRows()),l=e.render[this._id+"_Template"](s),d=this._frozenColumnsLength>0;if(d&&(o=e(n.getRows()[1]),r=e(n.getRows()[0]),a=e.render[this._id+"_JSONFrozenTemplate"](s)),!t.isNullOrUndefined(o)&&o.length>0)if(o.length==i){var h,c=o.eq(i-1);d&&(h=r.eq(i-1)),e(c).next("tr").hasClass("e-detailsrow")?(e(c).next("tr").after(l),d&&e(h).next("tr").after(a)):(e(c).after(l),d&&e(h).after(a))}else o.eq(i).before(l),d&&r.eq(i).before(a);else if(this._frozenColumnsLength>0)n._renderFrozenRecords();else{n.getContentTable().find("tbody").empty().append(n._getEmptyTbody());var u=document.createElement("div");n.getContentTable().find("colgroup").first().replaceWith(n._getMetaColGroup());var p=n.getContentTable().children("tbody");p.empty(),u.innerHTML=["<table>",e.render[n._id+"_Template"](n.model.currentViewData),"</table>"].join(""),n.getContentTable().get(0).replaceChild(u.firstChild.firstChild,n.getContentTable().get(0).lastChild)}this._gridRows=this.getContentTable().get(0).rows,this._frozenColumnsLength>0&&(this._gridRows=[this._gridRows,this.getContentTable().get(1).rows]),n.setGridRows(e(n.getContentTable().get(0).rows))},onScrollHelper:function(e,t){var i=this;i._isFromChart=t,i.getScrollElement().ejScroller("scrollY",e,!0),!i.getScrollElement().ejScroller("isHScroll")&&this.model.isFromGantt&&i.getScrollElement().scrollTop(e)},isVScroll:function(){return!!this.getScrollElement().hasClass("e-scroller")&&this.getScrollElement().ejScroller("isVScroll")},refreshScroller:function(e){var t=this;t._$gridContent.removeClass("e-borderbox");var i=t.getScrollElement().ejScroller("option","scrollTop"),s=t.getScrollElement().ejScroller("option","scrollLeft");t.getScrollElement().ejScroller("option",{persist:!0}),t.getScrollElement().ejScroller("option",{width:e});var a=t.getMaxScrollWidth();s>a&&(s=a>0?a:0),t._$gridContent.css("height",t._viewPortHeight),t.getScrollElement().ejScroller("refresh");var r=t.getScrollElement().ejScroller("isHScroll");t.getScrollElement().ejScroller("option",{scrollTop:i}),r&&t.getScrollElement().ejScroller("option",{scrollLeft:s}),t._$gridHeaderContainer.scrollLeft(s),r?this.getScrollElement().scrollTop(0):this.getScrollElement().scrollTop(i)},getMaxScrollHeight:function(){return this.getScrollElement().children(".e-content").children().height()-this.getScrollElement().children(".e-content").height()},getMaxScrollWidth:function(){return this.getScrollElement().children(".e-content").find(".e-table").width()-this.getScrollElement().children(".e-content").width()},refreshHeight:function(){this.getScrollElement().ejScroller("refresh")},getColumnByHeaderText:function(e){for(var t=this,i=t.model.columns.length,s=t.model.columns,a=0;a<i&&s[a].headerText!=e;a++);return a==s.length?null:s[a]},hideColumn:function(i){var s=this,a=s.model,r=this.getColumnByHeaderText(i),n=e.inArray(r,a.columns),o=e.inArray(i,s._hiddenColumns);if(!r||s._isColumnHidable(r)){if(-1!=n&&n!=a.treeColumnIndex&&-1==o){s._cancelEditState(),s._hiddenColumns.push(i),s.model.columns[n].visible=!1;var l=s.getHeaderTable().find("colgroup").find("col");e(l).eq(n).hide();var d=s.getHeaderTable().find("tr").not(".e-stackedHeaderRow").find(".e-headercell");if(e(d).eq(n).addClass("e-hide"),a.allowFiltering&&"filterbar"==a.filterSettings.filterType){var h=s.getHeaderTable().find("thead").find("th.e-filterbarcell");e(h).eq(n).addClass("e-hide")}1==s.model.columns[n].isFrozen&&s.setWidthToColumns();var c,u=s.getContentTable().find("colgroup").find("col"),p=!0,m=n;if(e(u).eq(n).hide(),u=s.getRows(),c=this._getFooterRows(),this._frozenColumnsLength>0){if(n<this._frozenColumnsLength){if(u=e(s.getRows()[0]),c=e(c[0]),s._gridRows&&e(s.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length>0){var g=parseInt(e(s.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan"));e(s.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",g-1)}else if(0==s.model.currentViewData.length&&(t.isNullOrUndefined(s._gridRows)||0==s._gridRows.length)){var g=parseInt(e(s.getContentTable()[0]).find("tbody").find("td").attr("colspan"));e(s.getContentTable()[0]).find("tbody").find("td").attr("colspan",g-1)}}else if(u=e(s.getRows()[1]),c=e(c[1]),p=!1,m=n-this._frozenColumnsLength,s._gridRows&&e(s.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length>0){var g=parseInt(e(s.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan"));e(s.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",g-1)}else if(0==s.model.currentViewData.length&&(t.isNullOrUndefined(s._gridRows)||0==s._gridRows.length)){var g=parseInt(e(s.getContentTable()[1]).find("tbody").find("td").attr("colspan"));e(s.getContentTable()[1]).find("tbody").find("td").attr("colspan",g-1)}}else if(0!=s.model.currentViewData.length||!t.isNullOrUndefined(s._gridRows)&&0!=s._gridRows.length){if(s._gridRows&&e(s.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length>0){var g=parseInt(e(s.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan"));e(s.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",g-1)}}else s.getContentTable().find("tbody").find("td").attr("colspan",s.model.columns.length-s._hiddenColumns.length);if(u.each(function(){var t=e(this).children("td").eq(m);e(t).addClass("e-hide"),a.showSummaryRow&&e(t).hasClass("e-summaryrowcell")&&p&&s._updateSummaryRowTitleCell(l,t[0].parentElement)}),a.showTotalSummary){var f=s._$footertableContent.find("colgroup").find("col");e(f).eq(n).hide(),c.each(function(){var t=e(this).children("td").eq(m);e(t).addClass("e-hide"),e(t).hasClass("e-footersummaryrowcell")&&s._updateSummaryRowTitleCell(f,t[0].parentElement)})}var _=s.getScrollElement();a.isFromGantt&&s._trigger("refreshScrollCss"),a.columnResizeSettings.columnResizeMode!=t.TreeGrid.ColumnResizeMode.FixedColumns||a.isFromGantt||this._updateTableWidth(),_.ejScroller("refresh"),s._updateScrollCss(),s._updateHeaderScrollLeft(),a.isFromGantt&&!_.ejScroller("isHScroll")&&_.scrollTop(_.data("ejScroller").scrollTop()),n=e.inArray(i,s._visibleColumns),-1!=n&&s._visibleColumns.splice(n,1),(a.showColumnChooser||a.contextMenuSettings.showContextMenu)&&(s._renderColumnChooserList(!0,i),s._updateColumnMenuVisibility()),s._addInitTemplate(),a.showTotalSummary&&a.collapsibleTotalSummary&&s._updateSummaryTitleColumn(),a.editSettings.allowEditing&&"dialogEditing"==a.editSettings.editMode&&(t.isNullOrUndefined(a.editSettings.dialogEditorTemplateID)||""==a.editSettings.dialogEditorTemplateID)?s._treeGridAddEditDialog():a.editSettings.allowEditing&&"dialogEditing"==a.editSettings.editMode&&!t.isNullOrUndefined(a.editSettings.dialogEditorTemplateID)&&""!=a.editSettings.dialogEditorTemplateID&&s._treeGridAddEditDialogTemplate()}this.model.showStackedHeader&&this._refreshStackedHeader(),a.isFromGantt&&s.updateToGanttColumns()}},clearFilter:function(i){var s=this,a=s.model;if(t.isNullOrUndefined(i)){var r=a.filterSettings.filteredColumns;for(r&&r.length;r&&r.length>0;)s.clearFilter(r[0].field);s._filteredColumnValue=[],s._filteredColumnValueID=[]}else{var n=s.getColumnByField(i),o=e.grep(a.filterSettings.filteredColumns,function(e,t){return e.field===i});if(n&&o.length>0){if("immediate"==a.filterBarMode&&"numericedit"==n.filterEditType||(s._filterString="",s._fieldName="",s.filterColumn(i,"equal","","and"),s._storePreviousFilteredValue(s._fieldName,s._filterString,this._operator)),s._clearFilterElementValue(n),"menu"==a.filterSettings.filterType&&"excel"!=n.filterType||"excel"==a.filterSettings.filterType&&"menu"==n.filterType){var l=s._filteredColumnValueID.indexOf(n.field);s._filteredColumnValue.splice(l,1),s._filteredColumnValueID.splice(l,1)}else if("excel"==a.filterSettings.filterType&&"menu"!=n.filterType||"menu"==a.filterSettings.filterType&&"excel"==n.filterType){var l=s._filteredColumnValueID.indexOf(n.field);s._filteredColumnValueID.splice(l,1)}s._isExcelFilter&&s._excelFilter._predicates[0]&&delete s._excelFilter._predicates[0][n.field],!a.showColumnChooser&&s.getHeaderTable().find("div[data-ej-mappingname='"+n.field+"']").next(".e-filtericon").removeClass("e-column-filtered-icon").addClass("e-column-filter-icon")}}},getColumnByField:function(e){for(var t=this,i=t.model,s=i.columns,a=0;a<s.length&&s[a].field!=e;a++);return a==s.length?null:s[a]},_clearFilterElementValue:function(t){var i=this,s=t.field.split(".").join(""),a=e("#"+i._id+"_"+s+"_filterbarcell");if(a&&a.length)switch(t.filterEditType){case"stringedit":e(a).val("");break;case"booleanedit":e(a).prop("checked",!1);break;case"numericedit":e(a).ejNumericTextbox("instance").option("value","");break;case"dropdownedit":e(a).ejDropDownList("instance").option("value","");break;case"datepicker":e(a).ejDatePicker("instance").option("value","");break;case"datetimepicker":e(a).ejDateTimePicker("instance").option("value","")}},_updateSummaryRowTitleCell:function(t,i){for(var s=t.length,a=0;a<s;a++)if("none"!=e(t[a]).css("display")){var r=e(i).find(".e-summarytitle")[0],n=e(i.childNodes[a]).find(".e-summarytitle")[0];if(n)return;return void e(i.childNodes[a]).prepend(r)}},_updateFrozenColumnOnResize:function(e){var t=this,i=t.model,s=i.columns;if(this._getFrozenColumnWidth()+18>this._gridWidth){for(var a=0,r=-1,n=0;n<t._frozenColumnsLength;n++)1==s[n].visible&&a<s[n].width&&(a=s[n].width,r=n);if(s[e].width<a-i.commonWidth)s[r].width==a&&(s[r].width=t.columnsWidthCollection[r]=s[r].width-s[e].width);else{i.columns[e].width>i.commonWidth&&(i.columns[e].width=i.commonWidth);for(var o=Math.round(s[e].width/t._frozenColumnsLength),n=0;n<t._frozenColumnsLength;n++)1==s[n].isFrozen&&1==s[n].visible&&(s[n].width=t.columnsWidthCollection[n]=s[n].width-o)}}},showColumn:function(i){var s=this,a=s.model,r=this.getColumnByHeaderText(i),n=e.inArray(r,a.columns),o=e.inArray(i,s._visibleColumns);if(-1!=n&&-1==o){s._cancelEditState(),s._visibleColumns.push(i),s.model.columns[n].visible=!0;var l=s.getHeaderTable().find("colgroup").find("col");e(l).eq(n).show();var d=s.getHeaderTable().find("tr").not(".e-stackedHeaderRow").find(".e-headercell");if(e(d).eq(n).removeClass("e-hide"),a.allowFiltering&&"filterbar"==a.filterSettings.filterType){var h=s.getHeaderTable().find("thead").find("th.e-filterbarcell");e(h).eq(n).removeClass("e-hide")}1==s.model.columns[n].isFrozen&&(s._updateFrozenColumnOnResize(n),s.setWidthToColumns());var c,u=s.getContentTable().find("colgroup").find("col"),p=!0,m=n;if(e(u).eq(n).show(),u=s.getRows(),c=this._getFooterRows(),this._frozenColumnsLength>0){if(n<this._frozenColumnsLength){if(u=e(s.getRows()[0]),c=e(c[0]),s._gridRows&&e(s.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length>0){var g=parseInt(e(s.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan"));e(s.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",g+1)}}else if(u=e(s.getRows()[1]),c=e(c[1]),p=!1,m=n-this._frozenColumnsLength,s._gridRows&&e(s.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length>0){var g=parseInt(e(s.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan"));e(s.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",g+1)}}else if(s._gridRows&&e(s.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length>0){var g=parseInt(e(s.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan"));e(s.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",g+1)}if(u.each(function(){var t=e(this).children("td").eq(m);e(t).removeClass("e-hide"),a.showSummaryRow&&e(t).hasClass("e-summaryrowcell")&&p&&s._updateSummaryRowTitleCell(l,t[0].parentElement)}),a.showTotalSummary){var f=s._$footertableContent.find("colgroup").find("col");e(f).eq(n).show(),c.each(function(){var t=e(this).children("td").eq(m);e(t).removeClass("e-hide"),e(t).hasClass("e-footersummaryrowcell")&&s._updateSummaryRowTitleCell(f,t[0].parentElement)})}s._addInitTemplate(),a.showTotalSummary&&a.collapsibleTotalSummary&&s._updateSummaryTitleColumn();var _=s.getScrollElement();a.isFromGantt&&s._trigger("refreshScrollCss"),a.columnResizeSettings.columnResizeMode!=t.TreeGrid.ColumnResizeMode.FixedColumns||a.isFromGantt||this._updateTableWidth(),_.ejScroller("refresh"),s._updateScrollCss(),s._updateHeaderScrollLeft(),a.isFromGantt&&!_.ejScroller("isHScroll")&&_.scrollTop(_.data("ejScroller").scrollTop()),n=e.inArray(i,s._hiddenColumns),-1!=n&&s._hiddenColumns.splice(n,1),(a.showColumnChooser||a.contextMenuSettings.showContextMenu)&&(s._renderColumnChooserList(!0,i),s._updateColumnMenuVisibility()),a.editSettings.allowEditing&&"dialogEditing"==a.editSettings.editMode&&(t.isNullOrUndefined(a.editSettings.dialogEditorTemplateID)||""==a.editSettings.dialogEditorTemplateID)?s._treeGridAddEditDialog():a.editSettings.allowEditing&&"dialogEditing"==a.editSettings.editMode&&!t.isNullOrUndefined(a.editSettings.dialogEditorTemplateID)&&""!=a.editSettings.dialogEditorTemplateID&&s._treeGridAddEditDialogTemplate()}this.model.showStackedHeader&&this._refreshStackedHeader(),a.isFromGantt&&s.updateToGanttColumns()},getHiddenColumns:function(){for(var e=this,t=(e.model,e._hiddenColumns),i=t.length,s=[],a=0;a<i;a++)s.push(e.getColumnByHeaderText(t[a]));return s},getColumnByIndex:function(e){var t=this,i=t.model,s=i.columns;return s.length>e?s[e]:null},getVisibleColumns:function(){for(var e=this,t=(e.model,e._visibleColumns),i=t.length,s=[],a=0;a<i;a++)s.push(e.getColumnByHeaderText(t[a]));return s},_getLastVisibleColumnIndex:function(){for(var e=this,t=e.model,i=t.columns,s=i.length-1,a=-1,r=s;r>=0;r--)if(0!=i[r].visible){a=r;break}return a},cancelEdit:function(){this._isRowEdit?this.cancelRowEditCell():this.model.isEdit&&this.cancelEditCell()},redraw:function(){this.resetModelCollections(),this._clearColumnMenu(),this._clearContextMenu(),this._removeDetailsRow(),this.element.empty(),this.element.off();var i=(jQuery.uaMatch(navigator.userAgent),this),s=this.model;i._off(i.element,"click",i._onClick),i._off(i.element,"keydown",i._keyDown),i._off(i.element,"click","#"+i._id+"e-gridheader",i._onHeaderClick),i._off(i.element,"mousedown touchstart","#"+i._id+"e-gridheader",i._headerMouseDown),i._off(e(document),"mousedown touchstart",i._mouseDownHandler),i._off(i.element,"mousedown touchstart",".e-gridcontent",i._contentMouseDown),i._off(i.element,"click",i._onRecordClick),i._off(i.element,"dblclick",".e-gridcontent > div",i._onRecordDoubleClick),"immediate"==s.filterSettings.filterBarMode&&(i._off(i.element,"keyup",".e-filterbarcell input",i._filterBarHandler),i._off(i.element,"click",".e-filterbarcell .e-checkbox")._off(i.element,"click",".e-filterbarcell .e-checkbox",i._filterBarHandler)),i._off(i.element,"focus click",".e-filterbarcell input",i._filterBarClose),i._off(i.element,"click",".e-filterbarcell .e-cancel",i._filterBarClose),i.model.showGridCellTooltip&&!i.model.showGridExpandCellTooltip?"msie"==t.browserInfo().name?i._off(i.element,"mouseenter",".e-rowcell",i._mouseHover):i._off(i.element,"mousemove",".e-rowcell",i._mouseHover):i._off(i.element,"mouseenter",".e-rowcell",i._mouseHover),i.model.showGridCellTooltip&&("msie"==t.browserInfo().name?i._off(i.element,"mouseenter",".e-headercelldiv",i._headermouseHover):i._off(i.element,"mousemove",".e-headercelldiv",i._headermouseHover)),i._off(i.element,"mouseleave",".e-rowcell",i._cellMouseLeave),i._off(i.element,"mouseleave",i._cellMouseLeave),i._off(i.element,"mouseleave",".e-headercelldiv",i._headerMouseLeave),i._off(i.element,"mouseleave",i._headerMouseLeave),(s.isFromGantt||this._frozenColumnsLength)&&i._off(i.element,"mousewheel DOMMouseScroll",i._mouseWheel),s.enableResize&&s.isResponsive&&!s.isFromGantt&&i._off(e(window),"resize",i._windowResize),t.isTouchDevice()?i._off(i.element,"doubletap ",".e-gridcontent",i._editdblClickHandler):i._off(i.element,"dblclick ",".e-gridcontent",i._editdblClickHandler),s.contextMenuSettings.showContextMenu&&i._off(i.element,"keyup contextmenu taphold",this._preventContextMenu),this._init()},clearColumnMenu:function(){this._clearColumnMenu()},export:function(i,s,a){var r=this,n=r.model;r.contextMenuOperations("Cancel");var o=r._getExportModel(n),l={action:i,method:"post","data-ajax":"false"};e("form#"+r._id+"export").remove();var d=t.buildTag("form#"+r._id+"export","",null,l);if(t.raiseWebFormsServerEvents){var h={model:o,originalEventType:s},c={model:JSON.stringify(o)};t.raiseWebFormsServerEvents(s,h,c)}else{var u={};if(a)e("body").find(".e-treegrid").each(function(i,s){var a=e(s).data("ejTreeGrid");if(!t.isNullOrUndefined(a)){var n=a.model,o=r._getExportModel(n);u[i]=JSON.stringify(o);var l={name:"TreeGridModel",type:"hidden",value:JSON.stringify(o)},h=t.buildTag("input","",null,l);d.append(h)}});else{var p={name:"TreeGridModel",type:"hidden",value:JSON.stringify(o)},m=t.buildTag("input","",null,p);d.append(m),d.append(this)}e("body").append(d),d.submit()}return!0},_getExportModel:function(t){var i=this,s=t,a=s.updatedRecords,r=s.currentViewData,n=s.flatRecords,o=s.parentRecords,l=s.summaryRowRecords,d=s.selectedItem,h=s.selectedItems;delete s.updatedRecords,delete s.currentViewData,delete s.flatRecords,delete s.parentRecords,delete s.summaryRowRecords,delete s.selectedItem,delete s.selectedItems;var c=e.extend(!0,{},s);s.updatedRecords=a,s.currentViewData=r,s.flatRecords=n,s.parentRecords=o,s.selectedItem=d,s.selectedItems=h,s.summaryRowRecords=l;for(var u=c.columns,p=u.length,m=c.stackedHeaderRows,g=c.filterSettings.filteredColumns,f=g.length,_=0;_<p;_++){if(void 0!=c.columns[_].editType)switch(u[_].editType){case"stringedit":case"edittemplate":u[_].editType="string";break;case"numericedit":u[_].editType="numeric";break;case"dropdownedit":u[_].editType="dropdown";break;case"booleanedit":u[_].editType="boolean"}if(void 0!=u[_].filterEditType)switch(u[_].filterEditType){case"stringedit":u[_].filterEditType="string";break;case"numericedit":u[_].filterEditType="numeric";break;case"dropdownedit":u[_].filterEditType="dropdown";break;case"booleanedit":u[_].filterEditType="boolean"}}for(var _=0;_<f;_++)"equal"==g[_].operator?g[_].operator="equals":"notequal"==c.filterSettings.filteredColumns[_].operator&&(g[_].operator="notequals");if(s.showStackedHeader&&m.length>0)for(var v=0;v<m.length;v++)for(var b=m[v].stackedHeaderColumns,x=0;x<b.length;x++){var y=Array.isArray(b[x].column)?b[x].column:e.map(b[x].column.split(","),e.trim);b[x].column=y}if(c.showStackedHeader){c.stackedHeaderRow=c.stackedHeaderRows;for(var _=0;_<c.stackedHeaderRow.length;_++){c.stackedHeaderRow[_].stackedHeaderColumn=c.stackedHeaderRow[_].stackedHeaderColumns;for(var w=c.stackedHeaderRow[_].stackedHeaderColumn,C=0;C<w.length;C++)c.stackedHeaderRow[_].stackedHeaderColumn[C].column=e.isArray(w[C].column)?w[C].column:w[C].column.split(",")}}var S=i.ignoreOnExport,T=S.length;if(i.ignoreOnExport)for(var _=0;_<T;_++)delete c[S[_]];return c},_getNonContentHeight:function(){var i=this,s=i.model,a=0,r=0;return r=i.model.isFromGantt?0:1,a=i._$gridHeaderContent.outerHeight()+parseFloat(r),i.model.toolbarSettings.showToolbar&&(a+=t.isNullOrUndefined(e("#"+i._id+"_toolbarItems").outerHeight())?0:e("#"+i._id+"_toolbarItems").outerHeight()),s.allowPaging&&(a+=i.element.find(".e-pager").outerHeight()),a},_getViewPortHeight:function(){var t=this,i=t.model;return"auto"==i.sizeSettings.height?t._frozenColumnsLength>0?1==e("#"+t._id+"e-gridcontent").find(".e-hscrollbar").length?e("#"+t._id+"movablee-table").height()+18:e("#"+t._id+"movablee-table").height():1==e("#"+t._id+"e-gridcontent").find(".e-hscrollbar").length?e("#"+t._id+"e-table").height()+18:e("#"+t._id+"e-table").height():this.element.height()-this._getNonContentHeight()},updateViewPortHeight:function(){var e=this;e._viewPortHeight=e._getViewPortHeight()},_updateScrollCss:function(){var t=this,i=t.model;if(!i.isFromGantt){var s=t.isVScroll(),a=(t._$gridHeaderContent.hasClass("e-scrollcss"),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor));if(a&&t._$gridHeaderContent.removeClass("e-gridheader"),s?(this.mobileDevice()||t._$gridHeaderContent.addClass("e-scrollcss"),i.showTotalSummary&&t._$totalSummaryRowContainer&&t._$totalSummaryRowContainer.height()<=i.totalSummaryHeight&&0==t._$totalSummaryRowContainer.find(".e-vscrollbar").length&&(this.mobileDevice()?t._$totalSummaryRowContainer.width(t._$gridContent.width()):(t._$totalSummaryRowContainer.addClass("e-scrollcss"),t._$totalSummaryRowContainer.width(t._$gridContent.width()-17)))):(t._$gridHeaderContent.removeClass("e-scrollcss"),i.showTotalSummary&&t._$totalSummaryRowContainer&&t._$totalSummaryRowContainer.height()<=i.totalSummaryHeight&&(t._$totalSummaryRowContainer.removeClass("e-scrollcss"),t._$totalSummaryRowContainer.width(t._$gridContent.width()))),t.getScrollElement().hasClass("e-scroller")&&this._updateHeaderScrollLeft(this.getScrollElement().ejScroller("model.scrollLeft")),this._frozenColumnsLength){var r="auto"==i.sizeSettings.height?e("#"+t._id+"movablee-table").height():this.getContent().find("#e-movablecontent"+t._id).height();r!=this.getContent().find("#e-frozencontainer"+t._id).height()&&this.getContent().find("#e-frozencontainer"+t._id).height(r)}a&&(t._$gridHeaderContent[0].style.width=t._gridWidth+"px",t._$gridHeaderContent.addClass("e-gridheader")),t._resizeFilteringElements()}},_updatePagerIndex:function(){var e=this,i=e.model,s=[],a=-1,r=-1,n=i.updatedRecords;if(i.allowPaging){var o=i.pageSettings.pageSize;if(i.pageSettings.pageSizeMode===t.TreeGrid.PageSizeMode.Root){var l=e._isHierarchyFiltering?e._filterParentRecords:i.parentRecords.slice(),d=-1,h=-1;e._gridRecordsCount=l.length;var c=0==e._isLoadonDemand?e._gridRecordsCount<1?0:0==o?0:Math.ceil(e._gridRecordsCount/o):Math.ceil(e._pageRecordCountOnDemand/o);e._currentPage()>c&&e._currentPage(c),d=e._currentPage()*o>e._gridRecordsCount?e._gridRecordsCount:e._currentPage()*o,h=e._gridRecordsCount<=o?0:e._currentPage()*o-o,a=n.indexOf(l[d]),h>d?h=d-o:e._gridRecordsCount==d&&(a=n.length),r=n.indexOf(l[h]),e._updatedPageData=e._isHierarchyFiltering&&e.model.enableVirtualization?e._updateFilterParent.slice(r,a):this.getExpandedRecords(n.slice(r,a))}else{s=this.getExpandedRecords(n),i.enableVirtualization?e._gridRecordsCount=e._isHierarchyFiltering?e._updateFilterParent.length:n.length:e._gridRecordsCount=s.length;var u=e._gridRecordsCount<1?0:0==o?0:Math.ceil(e._gridRecordsCount/o);e._currentPage()>u&&e._currentPage(u),a=e._currentPage()*o>e._gridRecordsCount?e._gridRecordsCount:e._currentPage()*o,r=e._gridRecordsCount<o?0:e._currentPage()*o-o,r>a&&(r=a-o),e._updatedPageData=e._isHierarchyFiltering&&e.model.enableVirtualization?e._updateFilterParent.slice(r,a):s.slice(r,a)}e.updateHeight()}},_updateCurrentViewData:function(i){var s,a=this,r=a.model,n={},o=!1;if(r.enableVirtualization){if(r.allowPaging)i!=t.TreeGrid.Actions.Scroll&&a._updatePagerIndex(),a.getVisibleRange(i),r.sizeSettings.height?r.currentViewData=a._updatedPageData.slice(a._visibleRange.top,a._visibleRange.bottom):r.currentViewData=a._isHierarchyFiltering&&a.model.enableVirtualization?a._updateFilterParent:a._updatedPageData;else{a.getVisibleRange(i);var l=a._isHierarchyFiltering&&a.model.enableVirtualization?a._updateFilterParent:a.model.updatedRecords;r.currentViewData=l.slice(a._visibleRange.top,a._visibleRange.bottom)}if(r.allowDragAndDrop&&a._dragMouseDown&&a._isTouchEvent){var d=a.getUpdatedRecords(),h=d.indexOf(a._draggedRecord);if((a._visibleRange.top>h+1||a._visibleRange.bottom<h)&&!a._dummyElement){var c=a._draggedElement.clone();a._draggedElement.before(c),a._draggedElement.hide(),e(a.element).append(a._draggedElement),a._dummyElement=!0}}if(0!==a._vScrollDist&&(s=a._scrollTop-a._offset,i&&i==t.TreeGrid.Actions.Scroll?n.requestType=t.TreeGrid.Actions.Scroll:i&&i==t.TreeGrid.Actions.ExpandCollapse?n.requestType=t.TreeGrid.Actions.ExpandCollapse:n.requestType=t.TreeGrid.Actions.Refresh,"expandcollapse"!=i&&a.sendDataRenderingRequest(n),r.allowTextWrap&&r.enableVirtualization&&"scroll"==i&&(a._updateWrapRowHeights("total,header"),a._textWrapRowsDatas=a._getAvgTextWrapRowHeight("getAvgHeight")),o=!0,this._frozenColumnsLength>0?(a._$frozenTableContent.css({top:s}),a._$movableTableContent.css({top:s})):a._$tableContent.css({top:s}),r.allowTextWrap&&r.enableVirtualization)){if(a._textWrapRowsDatas.isEnd&&!a._textWrapNoCalculate?(a.updateHeight(),a._textWrapNoCalculate=!0):parseInt(a._scrollTop)>=parseInt(a.getMaxScrollHeight()-10)&&!a._textWrapRowsDatas.isEnd&&!a._textWrapNoCalculate&&(a.updateHeight("extendHeight"),a._textWrapNoCalculate=!1),a._scrollTop>=a.getMaxScrollHeight()-10&&"expandcollapse"!=i){var u,p;p=a.getMaxScrollHeight(),u=this._frozenColumnsLength>0?p+e("#"+a._id+"frozene-table").height()-e("#"+a._id+"e-gridcontainer").height():p+e("#"+a._id+"e-table").height()-e("#"+a._id+"e-gridcontainer").height(),s=p-u,this._frozenColumnsLength>0?(a._$frozenTableContent.css({top:s}),a._$movableTableContent.css({top:s})):a._$tableContent.css({top:s})}a._scrollTop<30&&(a._textWrapNoCalculate=!1)}a._prevRTop=a._visibleRange.top,a._prevRBottom=a._visibleRange.bottom}else r.allowPaging?(a._updatePagerIndex(),r.currentViewData=a._updatedPageData):r.currentViewData=a.model.updatedRecords.slice();a._isEnterKeyPressed&&(a._isEnterKeyPressed=!1,r.allowSelection&&r.editSettings.allowEditing&&(o||(a._cellEditingDetails.rowIndex+=1),a._rowSelectingEventTrigger(this.selectedRowIndex(),a._cellEditingDetails.rowIndex)||(a.selectRows(a._cellEditingDetails.rowIndex),a._rowSelectedEventTrigger(a._cellEditingDetails.rowIndex)),a.cellEdit(a._cellEditingDetails.rowIndex,a.model.columns[a._cellEditingDetails.columnIndex].field)))},_findFilteredParentRecords:function(e){for(var t=e.length,i=[],s=0;s<t;s++)e[s].hasChildRecords&&i.push(e[s]);return i},
_getRowPosition:function(e){return Math.ceil(e/(this.model.rowHeight+this._detailsRowHeight))},_getMetaColGroup:function(){return this.getHeaderTable().find("colgroup").clone()},_getEmptyTbody:function(){var i=this,s=t.buildTag("td",i.model.emptyRecordText,{},{colSpan:i.model.columns.length-this._hiddenColumns.length}),a=document.createElement("tr");return a.className="e-emptyText",e(a).height(30).append(s)},_addSortElementToColumn:function(i,s){var a,r,n=this,o=this.model;o.isFromGantt?(a=t.TreeGrid.getColumnByMappingName(n.model.columns,i),t.isNullOrUndefined(a)&&(a=n.getColumnByField(i))):a=t.TreeGrid.getColumnByField(n.model.columns,i),r=e.inArray(a,n.model.columns);var l=this.getHeaderTable().find("thead tr:not('.e-stackedHeaderRow')").find(".e-headercell").not(".e-detailheadercell").eq(r).find(".e-headercelldiv");l.find(".e-ascending,.e-descending").remove(),l.append(n._createSortElement().addClass("e-"+s).addClass("e-icon")),l.parent().attr("aria-sort",s)},_createSortElement:function(){return t.buildTag("span","&nbsp;")},_renderCellEditObject:function(i,s){var a,r,n,o=this,l=t.buildTag("form.e-treegridform#"+o._id+"EditForm","",{},{}),d=o._cellEditTemplate,h={},c=i.columnObject,u=c.field.split(".").join(""),n=i.value;"dropdownedit"==c.editType&&0==n&&(n=n.toString()),h[u]=n,o.getColumnIndexByField(c.field),s.empty(),s.addClass("e-validError"),r=d.find("#"+u+"_CellEdit").html(),a=e("predecessor"===c.field||"duration"===c.field?e.templates(r).render(i.data):e.templates(r).render(h)),"SELECT"==a.get(0).tagName&&(a.val(h[u]),null==a.val()&&a.val(a.find("option").first().val())),"INPUT"==a.get(0).tagName&&o.model.isFromGantt?"predecessor"!=c.field&&"duration"!=c.field&&a.val(h[u]):"INPUT"==a.get(0).tagName&&a.val(h[u]),l.append(a),s.append(l);var p={};p.columnIndex=i.columnIndex,p.data=i.data.item,p.requestType="beginEdit",o._refreshEditForm(p),e.isFunction(e.validator)&&!e.isEmptyObject(i.validationRules)&&(o._initValidator(),o.setValidation()),o.model.isEdit=!0},getIndexofresourceInfo:function(e){var t=this,i=t.model,s=i.resourceIdMapping,a=t._cellEditingDetails.data,r=a.resourceInfo,n=0,o=r&&r.length,l=[];for(n;n<o;n++)for(var d=0;d<e.length;d++)e[d][s]==r[n][s]&&l.push(d);return l},_refreshEditForm:function(i){var s,a,r,n=this,o=n.model;n.model.editSettings.allowEditing&&("dialogEditing"==n.model.editSettings.editMode||"batchediting"==o.editSettings.editMode.toLowerCase()&&"dialog"==o.editSettings.batchEditSettings.editMode)?(s=e("#"+n._id+"EditFormDialog"),a="",r=!0):(s=e("#"+n._id+"EditForm"),a=n.model.rowHeight-5);var l,d,h,c,u,p,m,g,f,_=e("#"+n._id+"EditFrozenForm"),v=!1,b=_.add(s).find("input,select,textarea"),x=0,y=b.length,o=n.model,w={};for(x;x<y;x++)if(l=b.eq(x),f=l.attr("data-edittype"),u=t.TreeGrid.getColumnByField(o.columns,l.prop("name")),t.isNullOrUndefined(u)&&("dialogEditing"==n.model.editSettings.editMode||"batchediting"==o.editSettings.editMode.toLowerCase()&&"dialog"==o.editSettings.batchEditSettings.editMode)){if(l.hasClass("e-btn")||"dialogEditing"==n.model.editSettings.editMode&&!t.isNullOrUndefined(o.editSettings.dialogEditorTemplateID)&&""!=o.editSettings.dialogEditorTemplateID)return;l.closest("tr").addClass("e-hide")}else{switch("dialogEditing"!=n.model.editSettings.editMode&&("batchediting"!=o.editSettings.editMode.toLowerCase()||"dialog"!=o.editSettings.batchEditSettings.editMode)||t.isNullOrUndefined(o.editSettings.dialogEditorTemplateID)||""==o.editSettings.dialogEditorTemplateID||(f=u.editType),d="100%",f){case t.TreeGrid.EditingType.Numeric:w={},h=d,c=l.val(),w.width=h,w.locale=o.locale,w.height=a,w.showSpinButton=!0,w.cssClass=o.cssClass,c.length&&(w.value=parseFloat(c)),o.isFromGantt&&"status"===u.field&&(w.minValue=0,w.maxValue=100,w.decimalPlaces=0),t.isNullOrUndefined(u.editParams)||e.extend(w,u.editParams),l.ejNumericTextbox(w),l.prop("name",l.prop("name").replace(n._id,""));break;case t.TreeGrid.EditingType.DatePicker:w={},w.width=d,w.height=a,w.locale=o.locale,w.cssClass=o.cssClass,w.dateFormat=o.dateFormat,w.enableStrictMode=!0,o.isFromGantt&&(w.startDay=o.weekStartDay),l.val().length&&(w.value=n.getDateFromFormat(l.val())),void 0!==u.format&&u.format.length>0&&(p=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),g=p.exec(u.format),w.dateFormat=g[2],l.val().length&&(w.value=t.format(new Date(l.val()),w.dateFormat,w.locale),l.val(w.value))),t.isNullOrUndefined(u.editParams)||e.extend(w,u.editParams),-1==o.dateFormat.toLowerCase().indexOf("hh")?(l.ejDatePicker(w),m=l.ejDatePicker("instance")):(l.ejDateTimePicker(w),m=l.ejDateTimePicker("instance")),e(l).keydown(function(i){var s=e("#e-"+l[0].id);s.length>0&&"none"!==s.css("display")&&13==i.keyCode&&m.option("value",t.parseDate(i.currentTarget.value,m.model.dateFormat))});break;case t.TreeGrid.EditingType.DateTimePicker:w={},w.width=d,w.height=a,w.locale=o.locale,w.cssClass=o.cssClass,w.displayDefaultDate=!0,w.dateTimeFormat=o.dateFormat,w.enableStrictMode=!0,o.isFromGantt&&(w.startDay=o.weekStartDay),l.val().length&&(w.value=n.getDateFromFormat(l.val())),void 0!==u.format&&u.format.length>0&&(p=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),g=p.exec(u.format),w.dateTimeFormat=g[2],l.val().length&&(w.value=t.format(new Date(l.val()),w.dateTimeFormat,w.locale),l.val(w.value))),t.isNullOrUndefined(u.editParams)||e.extend(w,u.editParams),l.ejDateTimePicker(w);break;case t.TreeGrid.EditingType.Dropdown:var C,S;if(n._isRowEdit,C=u.dropdownData,S=u.field,o.isFromGantt&&"resourceInfo"===S)w={},w.width=d,w.height=a,w.showCheckbox=!0,w.dataSource=C,w.fields={id:o.resourceIdMapping,text:o.resourceNameMapping,value:o.resourceNameMapping},w.selectedItems=n.getIndexofresourceInfo(C),t.isNullOrUndefined(u.editParams)||e.extend(w,u.editParams),l.ejDropDownList(w);else{var T={};T.cssClass=o.cssClass,T.width=d,T.height=a,T.dataSource=C,t.isNullOrUndefined(u.editParams)||e.extend(T,u.editParams),l.ejDropDownList(T);var R=l.ejDropDownList("instance");R._setValue(l.attr("data-cellvalue"))}break;case t.TreeGrid.EditingType.String:n.model.editSettings.allowEditing&&"dialogEditing"==n.model.editSettings.editMode?l.outerWidth("100%").height(27):l.outerWidth(d).height(o.rowHeight-9),l.css({margin:"0px",padding:"1px"});break;case t.TreeGrid.EditingType.Boolean:if(n._checkboxSelection&&u.nonColumn)l[0].style.display="none";else{var T={};T.cssClass=o.cssClass,T.size="small",t.isNullOrUndefined(u.editParams)||e.extend(T,u.editParams),l.ejCheckBox(T);var k=l.parent(".e-chkbox-wrap"),O=k.parent("form");r||(O.length>0?O.css("margin-left","45%"):k.css("margin-left","45%"))}break;case t.TreeGrid.EditingType.Maskedit:var T={};T.locale=o.locale,T.cssClass=o.cssClass,T.width=d,T.height=a,t.isNullOrUndefined(u.editParams)||e.extend(T,u.editParams),l.ejMaskEdit(T);break;case"edittemplate":var D={rowdata:i.data,column:u,element:l,requestType:i.requestType},I=u.editTemplate.write;t.isNullOrUndefined(i)||"add"!=i.requestType||(D.rowdata={}),"string"==typeof I&&(I=t.util.getObject(I,window)),I(D)}l.is(":disabled")||v||l.is(":hidden")&&"object"!=typeof(l.data("ejDropDownList")||l.data("ejNumericTextbox")||l.data("ejDatePicker")||l.data("ejCheckBox"))||(n._isEnterKeyPressed||u!=o.columns[i.columnIndex])&&(i.columnIndex&&-1!=i.columnIndex||n._isEnterKeyPressed)||(n._focusElements(l.closest("td")),v=!0)}},_getRecordIndex:function(){var e,t=this,i=t.model,s=i.allowPaging?t._updatedPageData:t.getExpandedRecords(i.updatedRecords);return t.getVisibleRange(),e=s.slice(t._visibleRange.top,t._visibleRange.bottom),e.indexOf(i.selectedItem)},_initValidator:function(){for(var t=this,i=this._frozenColumnsLength>0?this.element.find(".e-treegridform"):e(e("#"+this._id+"EditForm").length>0?"#"+this._id+"EditForm":"#"+this._id+"EditFormDialog"),s=0;s<i.length;s++)i.eq(s).validate({ignore:".e-hide",errorClass:"e-field-validation-error",errorElement:"div",wrapper:"div",errorPlacement:function(e,i){t._renderValidator(e,i)}})},_renderValidator:function(i,s){if(s.is(":hidden")&&(s=s.siblings("input:visible")),s.length){var a,r=this,n=r.model,o=s.closest(".e-rowcell"),l=e(i).addClass("e-error"),d=t.buildTag("div.e-errortail");if(o=0==o.length?s.closest("td"):o,o.removeClass(".e-error"),"dialogEditing"!=n.editSettings.editMode){a=r._getRecordIndex();var h=(a+1)*n.rowHeight;if(!n.enableVirtualization){var c=r.getExpandedRecords(n.updatedRecords);a=n.allowPaging?r._updatedPageData.indexOf(n.selectedItem):c.indexOf(n.selectedItem)}if(-1==a&&("bottom"==n.editSettings.rowPosition?a=n.updatedRecords.length-1:"top"==n.editSettings.rowPosition&&(a=0),h=(a+1)*n.rowHeight),r._viewPortHeight<h+45){d.addClass("e-bottomarrow");var u=a*n.rowHeight-45,p="append"}else{d.addClass("e-toparrow");var u=(a+1)*n.rowHeight,p="prepend"}}else{var u=o.offset().top-e("#"+this._id+"EditFormDialog").offset().top+o.parent()[0].offsetHeight;d.addClass("e-toparrow");var p="prepend"}e(l).css({top:u}),s.parent().hasClass("e-in-wrap")?l.insertAfter(s.closest(".e-widget")):l.insertAfter(s),l[p](d),l.show("slow")}},setValidation:function(){for(var e=this,i=e.model,s=0;s<this.model.columns.length;s++)if(!t.isNullOrUndefined(i.columns[s].validationRules)&&1==i.columns[s].visible)if(i.editSettings.editMode==t.TreeGrid.EditMode.RowEditing||i.editSettings.editMode==t.TreeGrid.EditMode.DialogEditing||e.element.find(".e-rowedit").length>0||e.element.find(".e-addedrow").length>0||i.editSettings.editMode==t.TreeGrid.EditMode.BatchEditing&&("dialog"==i.editSettings.batchEditSettings.editMode||"row"==i.editSettings.batchEditSettings.editMode))this.setValidationToField(i.columns[s].field,i.columns[s].validationRules);else if((i.editSettings.editMode==t.TreeGrid.EditMode.CellEditing||i.editSettings.editMode==t.TreeGrid.EditMode.BatchEditing&&"cell"==i.editSettings.batchEditSettings.editMode)&&e._cellEditingDetails.columnIndex==s)return void this.setValidationToField(i.columns[s].field,i.columns[s].validationRules)},setValidationToField:function(i,s){var a,r,n=i,o=this;t.isNullOrUndefined(i)||(n=n.replace(/[^a-z0-9\s_]/gi,""));var r=e(e("#"+this._id+"EditForm").length>0?"#"+this._id+"EditForm":"#"+this._id+"EditFormDialog"),l=o.getColumnByField(i);if(!t.isNullOrUndefined(l)&&l.isFrozen)var r=e(e("#"+this._id+"EditFrozenForm").length>0?"#"+this._id+"EditFrozenForm":e("#"+this._id+"EditFormDialog").length>0?"#"+this._id+"EditFormDialog":"#"+this._id+"EditForm");a=r.find("#"+this._id+n).length>0?r.find("#"+this._id+n):r.find("#"+n),s.regex&&(s[i+"regex"]=s.regex,delete s.regex,e.validator.addMethod(n+"regex",function(e,t,i){return(i instanceof RegExp?i:new RegExp(i)).test(e)},t.getObject("messages.regex",s)||this.getColumnByField(i).headerText+" should match the given pattern")),!a.attr("name")&&a.attr("name",i),a.rules("add",s);var d=e("#"+this._id+"EditForm").length>0?e("#"+this._id+"EditForm").validate():e("#"+this._id+"EditFormDialog").validate();if(d.settings.messages[i]=d.settings.messages[i]||{},!t.isNullOrUndefined(s.required)){if(t.isNullOrUndefined(s.messages&&s.messages.required))var h=e.validator.messages.required;else var h=s.messages.required;0==h.indexOf("This field")&&(h=h.replace("This field",this.getColumnByField(i).headerText)),d.settings.messages[i].required=h,a.hasClass("e-datepicker")&&a.ejDatePicker({watermarkText:""})}},_focusElements:function(e){var i=this;if(e.length){e.focus();var s=e.children();s[0]&&("select"==s[0].tagName.toLowerCase()||"input"==s[0].tagName.toLowerCase()?(s.focus().select(),s[0].focus()):s.find(".e-field.e-dropdownlist").length?s.find(".e-ddl").focus():s.find(".e-chkbox-wrap.e-widget").length?s.find(".e-chkbox-wrap.e-widget").focus():s.find(".e-datepicker").length<=0?s.find("input,select").select().focus():s.find("input,select").select())}var a=i.getScrollElement().children(".e-content").scrollLeft(),r=i.getScrollElement().ejScroller("option","scrollLeft");i.getScrollElement().hasClass("e-scroller")&&a!=r&&(t.isNullOrUndefined(a)||i.getScrollElement().ejScroller("option","scrollLeft",a)),i._updateHeaderScrollLeft(i.getScrollElement().children(".e-content").scrollLeft())},_focusElementsForRowEdit:function(e){if(e.length){var t=e.children();"select"==t[0].tagName.toLowerCase()||"input"==t[0].tagName.toLowerCase()?(t.focus().select(),t[0].focus()):t.find(".e-field.e-dropdownlist").length?t[0].focus():t.hasClass("e-chkbox-wrap")?t[0].focus():t.find(".e-datepicker").length<=0?t.find("input:visible,select").first().select().focus():t.find("input,select").select()}},_getHeightforResourceView:function(e){for(var t=0,i=0;i<e.length;i++)t+=this._getTemplateRowHeight(e[i]);return t},getRecordsHeight:function(){var e=this.model;return"resourceView"==e.viewType?e.enableVirtualization?this._getHeightforResourceView(e.updatedRecords):this._getHeightforResourceView(this.getExpandedRecords(e.updatedRecords)):e.enableVirtualization?this._isHierarchyFiltering&&this.model.enableVirtualization?this._updateFilterParent.length*e.rowHeight:this.getUpdatedRecords().length*e.rowHeight:e.rowHeight*(e.updatedRecords.length-this.getCollapsedRecordCount())},updateHeight:function(t){var i=this,s=this.model,a=0,r=0;if(i._isInExpandCollapseAll)return!0;if(i._$gridContainer&&i._$gridContent){if(!s.allowPaging||i.model.allowTextWrap&&s.enableVirtualization?s.enableVirtualization?"auto"==s.sizeSettings.height?a=i._getViewPortHeight():s.allowTextWrap?s.allowPaging&&!i._textWrapRowsDatas.isEnd?(i._textWrapRowsDatas=i._getAvgTextWrapRowHeight("getAvgHeight"),a=i._textWrapRowsDatas.avgHeight*i._updatedPageData.length):i._textWrapRowsDatas.isEnd?a=i._getAvgTextWrapRowHeight("updateHeight").height:"extendHeight"==t?a=e("#"+i._id+"e-gridcontainer").height()+(i.model.updatedRecords.length-i._visibleRange.bottom)*i.model.rowHeight:(i._textWrapRowsDatas=i._getAvgTextWrapRowHeight("getAvgHeight"),a="auto"==s.sizeSettings.height?i._getViewPortHeight():s.updatedRecords.length*i._textWrapRowsDatas.avgHeight):a=this.getRecordsHeight():a="auto"==s.sizeSettings.height?i._getViewPortHeight():this.getRecordsHeight():a="auto"==s.sizeSettings.height?i._getViewPortHeight():s.rowHeight*i._updatedPageData.length,s.showDetailsRow&&s.detailsTemplate&&!s.showDetailsRowInfoColumn&&"auto"!=s.sizeSettings.height&&(r=i._getExpandedDetailsRowHeight()),a+=r,0!=a||0!=s.currentViewData.length&&0!=s.flatRecords.length||(a=30),s.allowPaging&&!s.sizeSettings.height){var n;if(s.allowTextWrap&&!s.enableVirtualization)if(i._$frozenTableContent.length>0){var o=n=i._$gridContainer.find("#e-frozencontentdiv"+i._id).outerHeight(),l=i._$gridContainer.find("#e-movablecontentdiv"+i._id).outerHeight();l>o&&(n=i._$gridContainer.find("#e-movablecontentdiv"+i._id).outerHeight())}else n=i._$gridContainer.find(".e-table").outerHeight();else n=a;if(this._frozenColumnsLength>0){if(i._$gridContent.css("height",n),s.allowPaging&&!s.sizeSettings.height){var d=i.getScrollElement().ejScroller("instance");d.option("height",n)}}else i.getScrollElement().hasClass("e-scroller")&&(i.getScrollElement().ejScroller("isHScroll")&&(n=a+i._scrollBarHeight),i.getScrollElement().ejScroller({height:n}));i._viewPortHeight=n,i._gridHeight=a+i._getNonContentHeight(),i._summaryRowsCount>0&&s.showTotalSummary&&(i._gridHeight+=i._$totalSummaryRowContainer.outerHeight()),i.element.height(i._gridHeight)}if(i.model.allowTextWrap&&!i.model.enableVirtualization?(i._$gridContainer.css({height:"auto",width:"auto"}),this._frozenColumnsLength&&i._$gridContainer.find("#e-movablecontentdiv"+i._id+",#e-frozencontentdiv"+i._id).css("height","auto")):(i._$gridContainer.css({height:a+"px",width:"auto"}),this._frozenColumnsLength&&i._$gridContainer.find("#e-movablecontentdiv"+i._id+",#e-frozencontentdiv"+i._id).css("height",a+"px")),"auto"==s.sizeSettings.height){if(i.getScrollElement().hasClass("e-scroller")){var d=i.getScrollElement().ejScroller("instance");d.option("height",0)}i._updateContentHeight()}i.getScrollElement().hasClass("e-scroller")&&(i.getScrollElement().ejScroller("refresh"),i._textWrapRowsDatas.isEnd&&(i._textWrapRowsDatas.isEnd=!1),i._updateScrollCss())}},_updateFixedTableBorder:function(t){if("sorting"!=t&&"dragAndDrop"!=t){var i=e(this._frozenColumnsLength>0?this.getContentTable()[1]:this.getContentTable()),s=this.model;!s.isFromGantt&&i&&i.hasClass("e-fixed-border")&&(s.currentViewData.length>0&&!i.hasClass("e-tableLastCell")?i.addClass("e-tableLastCell"):0==s.currentViewData.length&&i.removeClass("e-tableLastCell"))}},_setScrollTop:function(t){var i=this,s=this.model,a=0,r=i._scrollTop,n=s.rowHeight,o=s.currentViewData.length,l=s.isFromGantt?i._id.replace("ejTreeGrid",""):i._id,d=e("#"+l).find(".e-ganttviewerbodyContianer");if(s.showDetailsRow&&s.detailsTemplate&&!s.showDetailsRowInfoColumn&&(n+=i._detailsRowHeight),s.allowPaging&&i._isNextPage&&(r=0,i._isNextPage=!1,i.getScrollElement().ejScroller("scrollY",r,!0)),0!==r)if(s.enableVirtualization)o*n<i._viewPortHeight&&("expandcollapse"==t&&s.allowTextWrap&&s.enableVirtualization?r=0:o>0&&(a=r-(i._viewPortHeight-(o-1)*n))<0&&(a=0),s.isFromGantt?d.ejScroller("scrollY",a,!0):i.getScrollElement().ejScroller("scrollY",a,!0));else if(s.isFromGantt)d.ejScroller("scrollY",r,!0);else{if("delete"==t){var h=i.getUpdatedRecords();a=h.length*n-i._viewPortHeight,a<0&&(r=0)}i.getScrollElement().ejScroller("scrollY",r,!0)}},rowHeightRefresh:function(){var e=this;this.model;if(e._updateWrapRowHeights(null,"virtualRefresh",null,"resize"),e._$frozenTableContent.length>0){e.getScrollElement().ejScroller("refresh");var t=e.getScrollElement().ejScroller("model.scrollTop");e._getFrozenScrollElement().scrollTop(t)}},_updateGridContentHeight:function(){var e=this,t=this.model;if(e._$totalSummaryRowContainer&&(e._$totalSummaryRowContainer.ejScroller({height:"auto"}),e._$footerContainer.css({overflow:"hidden"}),e._$totalSummaryRowContainer.find(".e-footercontainer").height()<t.totalSummaryHeight?e.isVScroll()&&e._$totalSummaryRowContainer.addClass("e-scrollcss"):(e._$totalSummaryRowContainer.removeClass("e-scrollcss"),e._$totalSummaryRowContainer.ejScroller({height:"auto"==t.sizeSettings.height?0:t.totalSummaryHeight}),e._$totalSummaryRowContainer.width(e._$gridContent.width()),"auto"!=t.sizeSettings.height&&e._$totalSummaryRowContainer.width("auto"))),t.allowPaging&&!t.sizeSettings.height)if(e._$frozenTableContent.length>0){var i=e._viewPortHeight=e._$gridContainer.find("#e-frozencontentdiv"+e._id).outerHeight(),s=e._$gridContainer.find("#e-movablecontentdiv"+e._id).outerHeight();s>i&&(e._viewPortHeight=e._$gridContainer.find("#e-movablecontentdiv"+e._id).outerHeight())}else e._viewPortHeight=e._$gridContainer.find(".e-table").outerHeight();else e._viewPortHeight=e._getViewPortHeight(),e._$totalSummaryRowContainer&&(e._viewPortHeight="auto"==t.sizeSettings.height?e._viewPortHeight:e._viewPortHeight-e._$totalSummaryRowContainer.outerHeight());if(e._$gridContent.css({height:e._viewPortHeight+"px"}),e.getScrollElement().hasClass("e-scroller")){e.getScrollElement().ejScroller("instance").option("height","auto"==t.sizeSettings.height?0:e._viewPortHeight)}if(e._frozenColumnsLength){"auto"==t.sizeSettings.height&&e._updateContentHeight();var a=this.getContent().find("#e-movablecontent"+e._id).height();a!=this.getContent().find("#e-frozencontainer"+e._id).height()&&(this.getContent().find("#e-frozencontainer"+e._id).height(a),e.getScrollElement().ejScroller("refresh"))}e._updateScrollCss()},_updateContentHeight:function(){var t,i=this;t=i._getViewPortHeight(),1==e("#"+i._id+"e-gridcontent").find(".e-hscrollbar").length?(e("#e-movablecontainer"+i._id).css("height",t),e("#e-movablecontent"+i._id).css("height",t-18),e("#e-movablecontentdiv"+i._id).css("height",t-18)):(e("#e-movablecontainer"+i._id).css("height",t),e("#e-movablecontent"+i._id).css("height",t)),e("#"+i._id+"e-gridcontent").css("height",t),e("#"+i._id+"e-gridcontainer").css("height",t),e("#"+i._id+"e-table").css("top",0),i.getScrollElement().ejScroller("refresh"),i._updateScrollCss()},getChildCount:function(e,t){var i,s=this;if(!e.hasChildRecords)return 0;for(var a=0;a<e.childRecords.length;a++)i=e.childRecords[a],t++,i.hasChildRecords&&(t=s.getChildCount(i,t));return t},_updateFilteredRecords:function(e,t){var i,s=this,a=0,r=e.length,n=s.model.enableVirtualization;for(s._filteredData=e,s._flatFilteredRecords=[],s._filteredRecords=[],s._filteredGanttRecords=[],s._filterParentRecords=[],s._updateFilterParent=[],a;a<r;a++)i=e[a],(t||"child"!=s.model.filterSettings.filterHierarchyMode&&"none"!=s.model.filterSettings.filterHierarchyMode)&&(!t||"child"!=s.model.searchSettings.searchHierarchyMode&&"none"!=s.model.searchSettings.searchHierarchyMode)||(s._isHierarchyFiltering=!0),s._addParentRecord(i,t),this.model.isFromGantt||(i.hasChildRecords&&i.childRecords.length>0&&(this._checkChildExsist(i,e,t)?i.hasFilteredChildRecords=!0:i.hasFilteredChildRecords=!1),i.parentItem&&(i.parentItem.hasFilteredChildRecords=!0));0!=e.length&&s._isHierarchyFiltering&&s._updateFilterLevel(),s._filteredRecords=n?s._isHierarchyFiltering?s._flatFilteredRecords:s.getExpandedRecords(s._flatFilteredRecords):s._flatFilteredRecords.slice(),0!=e.length&&s._isHierarchyFiltering&&s._updateFilterExpandState(s._filteredRecords)},_updateFilterExpandState:function(t){for(var i=this,s=t.length,a=0;a<s;a++)-1!=e.inArray(t[a].parentItem,i._flatFilteredRecords)?t[a].parentItem.expanded&&-1!=e.inArray(t[a].parentItem,i._updateFilterParent)?(i._updateFilterParent.push(t[a]),t[a].isDisplay=!0):t[a].isDisplay&&(t[a].isDisplay=!1):(i._updateFilterParent.push(t[a]),t[a].isDisplay=!0)},_updateFilterLevel:function(){for(var t=this,i=t._flatFilteredRecords,s=t._flatFilteredRecords.length,a=0;a<s;a++)-1!=e.inArray(i[a].parentItem,t._flatFilteredRecords)?i[a].filterLevel=i[a].parentItem.filterLevel+1:(i[a].filterLevel=0,t._filterParentRecords.push(i[a]))},_checkChildExsist:function(t,i,s){for(var a=t.childRecords,r=this,n=a.length,o=!1,l=0;l<n;l++)if(!s&&("child"==r.model.filterSettings.filterHierarchyMode||"both"==r.model.filterSettings.filterHierarchyMode)||s&&("child"==r.model.searchSettings.searchHierarchyMode||"both"==r.model.searchSettings.searchHierarchyMode)){if(-1!=e.inArray(a[l],r._flatFilteredRecords)){o=!0;break}a[l].isSummaryRow||r._flatFilteredRecords.push(a[l]),o=!0,a[l].hasChildRecords&&(o=this._checkChildExsist(a[l],i,s))}else{if(-1!=e.inArray(a[l],i)){o=!0;break}a[l].hasChildRecords&&(o=this._checkChildExsist(a[l],i,s))}return o},_clearFilterLevel:function(e){var t,i=0,s=e.length,a=this;for(i;i<s;i++)t=e[i],(t.filterLevel||0==t.filterLevel)&&(t.hasChildRecords&&!t.hasFilteredChildRecords&&(t.hasFilteredChildRecords=!0),delete t.filterLevel),t.isDisplay&&delete t.isDisplay,a._isHierarchyFiltering=!1},_updateHasFilteredChildRecordsStatus:function(e){var t,i=0,s=e.length;for(i;i<s;i++)t=e[i],t.hasChildRecords&&!t.hasFilteredChildRecords&&(t.hasFilteredChildRecords=!0),t.filterLevel>0&&delete t.filterLevel},_addParentRecord:function(t,i){var s=this;if("none"==s.model.filterSettings.filterHierarchyMode&&!i||"none"==s.model.searchSettings.searchHierarchyMode&&i)if(null==t.parentItem){if(-1!=e.inArray(t,s._filteredData))return void(-1==e.inArray(t,s._flatFilteredRecords)&&(s._flatFilteredRecords.push(t),t.hasFilteredChildRecords=!0))}else s._addParentRecord(t.parentItem,i),-1!=e.inArray(t.parentItem,s._filteredData)||-1!=e.inArray(t.parentItem,s._flatFilteredRecords)?-1==e.inArray(t,s._flatFilteredRecords)&&s._flatFilteredRecords.push(t):-1!=e.inArray(t,s._filteredData)&&-1==e.inArray(t,s._flatFilteredRecords)&&s._flatFilteredRecords.push(t);else t.parentItem&&("child"==s.model.filterSettings.filterHierarchyMode&&!i||"child"==s.model.searchSettings.searchHierarchyMode&&i?-1!=e.inArray(t.parentItem,s._filteredData)&&s._addParentRecord(t.parentItem,i):s._addParentRecord(t.parentItem,i)),-1===e.inArray(t,s._flatFilteredRecords)&&s._flatFilteredRecords.push(t)},_updateExpandCollapseForSortedRecords:function(e,t){var i,s=this,a=0,r=s._sortedRecords.length,n=s._sortedRecords.indexOf(e);if(t)s._addNestedSortRecords(e,n);else{var o=0;for(a=n+1;a<r&&(i=s._sortedRecords[a],i.level!==e.level);a++)s.getExpandStatus(i)||o++;s._sortedRecords.splice(n+1,o)}},_addNestedSortRecords:function(i,s){var a,r,n=this,o=n.model.sortSettings.sortedColumns;if(o.length){r=o.length-1,n._queryManagar.queries=[];for(var l=r;l>=0;l--)n._queryManagar.sortBy(o[l].field,o[l].direction)}if(i.hasChildRecords){var d,h,c=t.DataManager(i.childRecords);for(a=c.executeLocal(n._queryManagar).result,r=a.length,d=0;d<r;d++)h=a[d],n._filteredRecords.length?-1!==e.inArray(h,n._filteredRecords)&&n._sortedRecords.splice(++s,0,h):n._sortedRecords.splice(++s,0,h),h.hasChildRecords&&h.expanded&&n._addNestedSortRecords(h,s)}},updateEditSettings:function(e){var i=this;e&&(e.editMode&&("normal"===i.model.editSettings.editMode&&"cellEditing"===e.editMode?(i.model.editSettings.editMode=e.editMode,i._processEditing()):i.model.editSettings.editMode=e.editMode),t.isNullOrUndefined(e.allowAdding)||(i.model.editSettings.allowAdding=e.allowAdding),t.isNullOrUndefined(e.allowEditing)||(i.model.editSettings.allowEditing=e.allowEditing),t.isNullOrUndefined(e.allowDeleting)||(i.model.editSettings.allowDeleting=e.allowDeleting),t.isNullOrUndefined(e.beginEditAction)||(i.model.editSettings.beginEditAction=e.beginEditAction),i._enableEditingEvents())},updateAltRow:function(){var e,t=this,i=0,s=t.model.updatedRecords,a=s.length,r=!0;for(i=0;i<a;i++)e=s[i],!e.isSummaryRow&&t.getExpandStatus(e)&&(e.isAltRow=!r,r=e.isAltRow)},_getFilteredChildRecordsCount:function(e){var t,i=this,s=i.model,a=e&&e.childRecords&&e.childRecords.length,r=0;for(r=0;r<a;r++)t=e.childRecords[r],s.enableVirtualization?i.getExpandStatus(t)&&i._removedCount++:i._removedCount++,t.childRecords&&i._getFilteredChildRecordsCount(t);return i._removedCount},_sortingRecords:function(e){var i=this,s=i.model,a=s.sortSettings.sortedColumns;if(i._queryManagar.queries=[],a.length)for(var r=a.length-1,n=r;n>=0;n--){var o;if(s.isFromGantt){var l=t.TreeGrid.getColumnByMappingName(i.model.columns,a[n].field);t.isNullOrUndefined(l)&&(l=this.getColumnByField(a[n].field)),o=l.field}else o=a[n].field;s.isFromGantt&&("resourceInfo"===o?o="resourceNames":"predecessor"===o&&(o="predecessorsName")),i._queryManagar.sortBy(o,a[n].direction)}var d=new t.DataManager(s.parentRecords),h=d.executeLocal(i._queryManagar).result;return i._sortedRecords=[],i._storedIndex=-1,i._rowIndex=-1,i._createSortedRecords(h),i._tempsortedrecords=i._sortedRecords,i.model.updatedRecords=i._sortedRecords,i._isHierarchyFiltering&&(i._updateFilterParent=i._sortedRecords),s.allowPaging&&s.pageSettings.pageSizeMode===t.TreeGrid.PageSizeMode.Root&&(s.parentRecords=i._getParentRecords(i.model.updatedRecords,i,!0)),!0},_createSortedRecords:function(i){var s,a=this,r=a.model,n=a._sortedRecords,o=a.model.enableAltRow,r=this.model;i=a._spliceSummaryRows(i),e.each(i,function(e,i){if(i.isSummaryRow){var l=i.parentItem.childRecords.indexOf(i);return void i.parentItem.childRecords.splice(l,1)}if(a._filterString.length>0||a._searchString.length>0||r.filterSettings.filteredColumns.length>0?a._filteredRecords.length>0&&-1!==a._filteredRecords.indexOf(i)&&(a._storedIndex++,a._rowIndex++,o&&(i.isAltRow=a._rowIndex%2!=0),n[a._storedIndex]=i):(a._storedIndex++,a._rowIndex++,o&&(i.isAltRow=a._rowIndex%2!=0),n[a._storedIndex]=i),i.hasChildRecords&&i.expanded){i.childRecords=a._spliceSummaryRows(i.childRecords),s=t.DataManager(i.childRecords);var d=s.executeLocal(a._queryManagar).result;a._createSortedRecords(d)}else!i.hasChildRecords||i.expanded||r.enableVirtualization||(i.childRecords=a._spliceSummaryRows(i.childRecords),a._setChildRecords(i,n))})},_setChildRecords:function(e,i){var s,a=this,r=a.model,n=a.model.enableAltRow,o=e.childRecords.length;s=t.DataManager(e.childRecords);for(var l=s.executeLocal(a._queryManagar).result,d=0;d<o;d++)a._filterString.length>0||a._searchString.length>0||r.filterSettings.filteredColumns.length>0?a._filteredRecords.length>0&&-1!==a._filteredRecords.indexOf(l[d])&&(a._storedIndex++,n&&(l[d].isAltRow=a._storedIndex%2!=0),i[a._storedIndex]=l[d],l[d].hasChildRecords&&this._setChildRecords(l[d],i)):(a._storedIndex++,n&&(l[d].isAltRow=a._storedIndex%2!=0),i[a._storedIndex]=l[d],l[d].hasChildRecords&&this._setChildRecords(l[d],i))},_updateSortedRecords:function(i){var s,a=this,r=0,n=i.length,o=this.model;for(r;r<n;r++)if(s=i[r],!o.enableVirtualization&&(a._filteredRecords.length>0?-1!==e.inArray(s,a._filteredRecords)&&-1===e.inArray(s,a._sortedRecords)&&a._sortedRecords.push(s):-1===e.inArray(s,a._sortedRecords)&&a._sortedRecords.push(s),s.hasChildRecords&&s.childRecords.length>0)){var l=t.DataManager(s.childRecords),d=l.executeLocal(a._queryManagar).result;a._updateSortedRecords(d)}},_removeSortElementFromColumn:function(i){var s=this,a=t.TreeGrid.getColumnByField(s.model.columns,i),r=e.inArray(a,s.model.columns),n=s.getHeaderTable().find("thead").find(".e-headercell").eq(r).find(".e-headercelldiv");n.find(".ascending,.descending").remove(),n.parent().removeAttr("aria-sort")},_addEmptyColumntoGrid:function(){var i=this;e(i.element).find(".e-gridheadercontainer table colgroup").append(t.buildTag("col","",{width:"auto"},{})),i._$gridContainer.find("table colgroup").append(t.buildTag("col","",{width:"auto"},{})),e(i.element).find(".e-gridheadercontainer table thead tr").append(t.buildTag("th.e-headercell"))},updateScrollTop:function(e,i){var s={},a=this;s.requestType=t.TreeGrid.Actions.Scroll,s.delta=e,!a.getScrollElement().ejScroller("isHScroll")&&this.model.isFromGantt?a._$gridContent.scrollTop(e):a._$gridContent.scrollTop(0),a.getScrollElement().ejScroller("scrollY",e,!0),a.model.isFromGantt&&!i?(a._completeAction(s),a._focusTreeGridElement()):a._isFromChart=!1},_selectNextCell:function(t,i){var s,a,r=this,n=r.model,o=n.columns,l=o.length,d=e("#"+r._id+"EditForm"),h=r.getUpdatedRecords(),c=n.allowPaging?h:r.getExpandedRecords(n.updatedRecords);switch(r._isShiftKeyNavigation=!1,t){case"right":if(r._focusingRowIndex>=h.length-1&&r._cellIndex>=l-1||-1==r._focusingRowIndex||-1==r._cellIndex)return void r.element[0].focus();if(r._cellIndex+=1,r._cellIndex==l){r._cellIndex=0;var u=h[r._rowIndexOfLastSelectedCell];if(s=c.indexOf(u),a=c[s+1],a&&a.isSummaryRow&&(a=r._getNextRecord(s+1,c)),!a)return;r._focusingRowIndex=h.indexOf(a)}if(r._focusingRowIndex>=h.length)return;o[r._cellIndex].visible&&o[r._cellIndex].allowCellSelection||!(d.length<=0)||(r._cellIndex=r.getUpNextVisibleColumnIndex(r._cellIndex,i)),d.length>0&&o[r._cellEditingDetails.columnIndex].allowCellSelection&&(r._cellIndex=r._cellEditingDetails.columnIndex);var p={rowIndex:r._focusingRowIndex,cellIndex:r._cellIndex};r.selectCells([p]),r.updateScrollBar();break;case"left":if(r._cellIndex-=1,l=o.length,r._cellIndex<0){r._cellIndex=l-1;var u=h[r._rowIndexOfLastSelectedCell];if(s=c.indexOf(u),a=c[s-1],a&&a.isSummaryRow&&(a=r._getNextRecord(s-1,c,"upArrow")),!a)return;r._focusingRowIndex=h.indexOf(a)}if(r._focusingRowIndex<0)return;r._focusingRowIndex>=h.length&&(r._focusingRowIndex=h.length-1),o[r._cellIndex].visible&&o[r._cellIndex].allowCellSelection||!(d.length<=0)||(r._cellIndex=r.getPreviousVisibleColumnIndex(r._cellIndex,i)),d.length>0&&o[r._cellEditingDetails.columnIndex].allowCellSelection&&(r._cellIndex=r._cellEditingDetails.columnIndex);var p={rowIndex:r._focusingRowIndex,cellIndex:r._cellIndex};r.selectCells([p]),r.updateScrollBar()}},_moveCurrentCell:function(i){var s=this,a=s._cellEditingDetails.rowIndex,r=s._cellEditingDetails.columnIndex,n=s.model,o=s.getUpdatedRecords();if(-1==a&&-1==r)return!1;if(s.model.isEdit&&(s.saveCell(),s.model.isEdit=!1),n.enableVirtualization){var l=n.currentViewData[a];s._cellEditingDetails.rowIndex=a=o.indexOf(l)}switch(i){case"right":var d,h,c,u=n.columns,p=u.length,m=s.getHiddenColumns(),g=e.extend([],u);if(m&&m.forEach(function(e){g.splice(g.indexOf(e),1)}),h=g.indexOf(u[r]),c=g.length,a==o.length-1&&h==c-1)return!0;if(h==c-1){for(d=0;!u[d].visible;)d++;if(s._cellEditingDetails.columnIndex=d,s._getNextRow(i,a,s))return!0}else{for(d=r+1;!u[d].visible;)d++;s._cellEditingDetails.columnIndex=d}
for(;0==n.columns[d].allowEditing||!u[d].visible;)if(d+1!=n.columns.length)s._cellEditingDetails.columnIndex=++d;else if(s._cellEditingDetails.columnIndex=d=0,s._getNextRow(i,a,s))return!0;s.updateScrollBar(),s.cellEdit(s._cellEditingDetails.rowIndex,n.columns[s._cellEditingDetails.columnIndex].field),s._editAddTools();break;case"left":var f,h,c,u=n.columns,p=u.length,m=s.getHiddenColumns(),g=e.extend([],u);if(m&&m.forEach(function(e){g.splice(g.indexOf(e),1)}),h=g.indexOf(u[r]),c=g.length,0==a&&0==h)return!0;if(0==h){for(f=n.columns.length-1;!u[f].visible;)f--;if(s._cellEditingDetails.columnIndex=f,s._getNextRow(i,a,s))return!0}else{for(f=r-1;!u[f].visible;)f--;s._cellEditingDetails.columnIndex=f}for(;0==n.columns[f].allowEditing||!u[f].visible;)if(f-1!=-1)s._cellEditingDetails.columnIndex=--f;else if(s._cellEditingDetails.columnIndex=f=p-1,s._getNextRow(i,a,s))return!0;s.updateScrollBar(),s.cellEdit(s._cellEditingDetails.rowIndex,n.columns[s._cellEditingDetails.columnIndex].field),s._editAddTools();break;case"up":if(0==a)return!0;s._cellEditingDetails.rowIndex=a-1,s.selectRows(s._cellEditingDetails.rowIndex),s._rowSelectedEventTrigger(s._cellEditingDetails.rowIndex),s.cellEdit(s._cellEditingDetails.rowIndex,n.columns[s._cellEditingDetails.columnIndex].field);break;case"down":if(a+1==o.length&&(s._focusTreeGridElement(),s._isEnterKeyPressed=!0),n.showSummaryRow&&a+1==o.length-n.summaryRows.length&&(s._isEnterKeyPressed=!0),s._isEnterKeyPressed)s._isEnterKeyPressed=!1;else{if(o.length>a+1)if(n.enableVirtualization){var _=o[a+1];if(_&&_.isSummaryRow&&(_=s._getNextRecord(a+1,o)),-1==(x=o.indexOf(_)))return!0;s._cellEditingDetails.rowIndex=x}else{var v=o[a],b=n.allowPaging?o:s.getExpandedRecords(n.updatedRecords),_=b[b.indexOf(v)+1];_&&_.isSummaryRow&&(_=s._getNextRecord(a+1,b));var x=o.indexOf(_);if(a==b.length-1&&r==n.columns.length-1||-1==x)return!0;s._cellEditingDetails.rowIndex=x}s._rowSelectingEventTrigger(s.selectedRowIndex(),s._cellEditingDetails.rowIndex)||(s.selectRows(s._cellEditingDetails.rowIndex),s._rowSelectedEventTrigger(s._cellEditingDetails.rowIndex)),s.updateScrollBar();var y={};y.requestType=t.TreeGrid.Actions.Scroll,y.delta=s._$gridContent.children(".e-content").scrollTop(),s._trigger("actionComplete",y),s.cellEdit(s._cellEditingDetails.rowIndex,n.columns[s._cellEditingDetails.columnIndex].field),s._editAddTools()}}return!1},_getNextRecord:function(e,t,i){var s;do{s=t[e],"upArrow"==i||"lastRowSelection"==i||"bottomRowSelection"==i||"child"==i||"above"==i?e--:e++}while(s&&s.isSummaryRow);return s},_getNextRow:function(e,t,i){var s,a,r=i.model,n=i.getUpdatedRecords();if(s="right"==e?1:-1,r.enableVirtualization){var o=n[t+s];if(o&&o.isSummaryRow){var l=s>0?"":"lastRowSelection";o=i._getNextRecord(t+s,n,l)}if(r.allowPaging&&o&&(a=n.indexOf(o),a<0&&1==s?i.gotoPage(i._currentPage()+1):a<0&&-1==s&&i.gotoPage(i._currentPage()-1)),-1==(a=n.indexOf(o)))return!0;i._cellEditingDetails.rowIndex=a}else{var d=n[t],h=r.allowPaging?n:i.getExpandedRecords(r.updatedRecords),o=h[h.indexOf(d)+s];if(o&&o.isSummaryRow){var l=s>0?"":"lastRowSelection";o=i._getNextRecord(t+s,h,l)}if(r.allowPaging&&o&&(a=n.indexOf(o),a<0&&1==s?i.gotoPage(i._currentPage()+1):a<0&&-1==s&&i.gotoPage(i._currentPage()-1)),-1==(a=n.indexOf(o)))return!0;i._cellEditingDetails.rowIndex=a}r.allowSelection&&"cell"==r.selectionSettings.selectionMode?(r.selectedItem=n[i._cellEditingDetails.rowIndex],i._rowIndexOfLastSelectedCell=i._cellEditingDetails.rowIndex):i._rowSelectingEventTrigger(i.selectedRowIndex(),i._cellEditingDetails.rowIndex)||(i.selectRows(i._cellEditingDetails.rowIndex),i._rowSelectedEventTrigger(i._cellEditingDetails.rowIndex))},_findColumnsWidth:function(e){for(var t=this,i=t.model.columns.length,s=t.getHeaderTable().find("colgroup").find("col"),a=0;a<i;a++)t.columnsWidthCollection[a]=s.eq(a).width()},_calculateWidth:function(){for(var e=this.getHeaderTable().find("colgroup").find("col"),t=0,i=0;i<e.length;i++)t+=e.eq(i).width();return t},getScrollObject:function(){return this.getScrollElement().data("ejScroller")},_updateElementHeight:function(){var e=this;e._calculateDimensions(),e.updateViewPortHeight()},getScrollElement:function(){return this._frozenColumnsLength>0?this.element.find("#e-movablecontainer"+this._id):this._$gridContent},_getFrozenScrollElement:function(){return this._frozenColumnsLength>0?this.element.find("#e-frozencontainer"+this._id):null},_getFrozenColumnWidth:function(e){var i=0,e=t.isNullOrUndefined(e)?this._frozenColumnsLength:e,s=t.isNullOrUndefined(e)?this._frozenColumns:this.model.columns;if(e>0)for(var a=0;a<e;a++)1==s[a].visible&&(i+=s[a]?this.columnsWidthCollection[a]:0);return i},_renderScroller:function(i){var s=this,a=s.model,r=(a.flatRecords.length,a.rowHeight,s._viewPortHeight),n=!1;if(a.allowPaging&&!a.sizeSettings.height&&a.allowTextWrap&&!a.enableVirtualization)if(s._$frozenTableContent.length>0){var o=r=s._$gridContainer.find("#e-frozencontentdiv"+s._id).outerHeight(),l=s._$gridContainer.find("#e-movablecontentdiv"+s._id).outerHeight();l>o&&(r=s._$gridContainer.find("#e-movablecontentdiv"+s._id).outerHeight())}else r=s._$gridContainer.find(".e-table").outerHeight();if(!s._$gridContent.hasClass("e-scroller")||a.allowPaging&&!a.sizeSettings.height){var d=s._gridHeight?r:"auto",h=this._gridWidth;this._frozenColumnsLength>0&&(s._$gridContent.css("width",h-s._totalBorderWidth),h=h-this._getFrozenColumnWidth()-1),a.isFromGantt||!0,this.mobileDevice()&&!a.isFromGantt&&(n=!0,s._scrollBarHeight=10),s.getScrollElement().ejScroller({enableTouchScroll:!1,autoHide:n,scrollerSize:s._scrollBarHeight,height:s.model.isFromGantt?0:"auto"==a.sizeSettings.height?0:d,width:s.model.isFromGantt?h:h-s._totalBorderWidth,scroll:e.proxy(s._onScroll,s)})}else s.getScrollElement().ejScroller("refresh");s.getScrollElement().ejScroller("model.keyConfigs",{up:"",down:"",left:"",right:""}),t.isNullOrUndefined(i)&&s._updateScrollCss();var c=s.getScrollElement().ejScroller("isHScroll");if(a.allowPaging&&!a.sizeSettings.height&&c){var u=d+s._scrollBarHeight;s.getScrollElement().ejScroller({height:u}),s.getScrollElement().ejScroller("refresh")}!this.mobileDevice()&&"safari"==this.getBrowserDetails().browser&&this._frozenColumnsLength>0&&(this.getHeaderContent().find("#e-movableheader"+s._id).add(this.getContent().find("#e-movablecontainer"+s._id)).css("margin-left","auto"),this._$totalSummaryRowContainer&&this._$totalSummaryRowContainer.find("#e-movablefooter"+s._id).css("margin-left","auto")),this._frozenColumnsLength>0&&(s._$gridContent.height(d),s.getContent().find("#e-frozencontainer"+s._id).height(s.getContent().find("#e-movablecontent"+s._id).height()))},_destroy:function(){var i=this,s=this.model,a=s.columns;if(i.element.off(),i._off(i.element,"click",i._onClick),i._off(i.element,"keydown",i._keyDown),i._off(i.element,"click","#"+i._id+"e-gridheader",i._onHeaderClick),i._off(i.element,"mousedown touchstart","#"+i._id+"e-gridheader",i._headerMouseDown),i._off(e(document),"mousedown touchstart",i._mouseDownHandler),i._off(i.element,"mousedown touchstart",".e-gridcontent",i._contentMouseDown),i._off(i.element,"click",i._onRecordClick),i._off(i.element,"dblclick",".e-gridcontent > div",i._onRecordDoubleClick),"immediate"==s.filterSettings.filterBarMode&&(i._off(i.element,"keyup",".e-filterbarcell input",i._filterBarHandler),i._off(i.element,"click",".e-filterbarcell .e-checkbox")._off(i.element,"click",".e-filterbarcell .e-checkbox",i._filterBarHandler)),t.isTouchDevice()&&this.model.allowPaging&&i._off(this.element,"swipeleft swiperight",".e-gridcontent div > .e-table",e.proxy(this._swipeAction,this)),i._off(i.element,"mousemove",i._mouseMove),i._off(i.element,"touchmove",i._mouseMove),i._off(i.element,"focus click",".e-filterbarcell input",i._filterBarClose),i._off(i.element,"click",".e-filterbarcell .e-cancel",i._filterBarClose),i.model.showGridCellTooltip&&!i.model.showGridExpandCellTooltip?"msie"==t.browserInfo().name?i._off(i.element,"mouseenter",".e-rowcell",i._mouseHover):i._off(i.element,"mousemove",".e-rowcell",i._mouseHover):i._off(i.element,"mouseenter",".e-rowcell",i._mouseHover),i.model.showGridCellTooltip&&("msie"==t.browserInfo().name?i._off(i.element,"mouseenter",".e-headercelldiv",i._headermouseHover):i._off(i.element,"mousemove",".e-headercelldiv",i._headermouseHover)),i._off(i.element,"mouseleave",".e-rowcell",i._cellMouseLeave),i._off(i.element,"mouseleave",i._cellMouseLeave),i._off(i.element,"mouseleave",".e-headercelldiv",i._headerMouseLeave),i._off(i.element,"mouseleave",i._headerMouseLeave),(s.isFromGantt||this._frozenColumnsLength)&&i._off(i.element,"mousewheel DOMMouseScroll",i._mouseWheel),s.enableResize&&s.isResponsive&&!s.isFromGantt&&i._off(e(window),"resize",i._windowResize),t.isTouchDevice()?i._off(i.element,"doubletap ",".e-gridcontent",i._editdblClickHandler):i._off(i.element,"dblclick ",".e-gridcontent",i._editdblClickHandler),s.contextMenuSettings.showContextMenu&&i._off(i.element,"keyup contextmenu taphold",this._preventContextMenu),i.getScrollElement().ejScroller("content").stop(!0),this._clearColumnMenu(),this._clearContextMenu(),this._removeDetailsRow(),e("#"+this._id+"_toolbarItems_Main").remove(),i._columnRenameDialog&&(e("#"+i._columnRenameDialog.attr("id")+"_wrapper").clearQueue(),e("#"+i._columnRenameDialog.attr("id")+"_wrapper").stop(),i._columnRenameDialog.data("ejDialog")&&i._columnRenameDialog.data("ejDialog").destroy(),e("#"+i._columnRenameDialog.attr("id")+"_wrapper").remove(),e("#"+i._id+"ColumnRenameDialog").remove()),this.model.showColumnChooser&&(e("#"+i._id+"ccDiv_wrapper").clearQueue(),e("#"+i._id+"ccDiv_wrapper").stop(),e("#"+this._id+"ccDiv").data("ejDialog")&&e("#"+this._id+"ccDiv").data("ejDialog").destroy(),e("#"+i._id+"ccDiv_wrapper").remove(),e("#"+this._id+"ccDiv").remove()),i._updateConfirmDialog&&(e("#"+i._updateConfirmDialog.attr("id")+"_wrapper").clearQueue(),e("#"+i._updateConfirmDialog.attr("id")+"_wrapper").stop(),i._updateConfirmDialog.data("ejDialog")&&i._updateConfirmDialog.data("ejDialog").destroy(),e("#"+i._updateConfirmDialog.attr("id")+"_wrapper").remove(),e("#"+i._id+"ConfirmDialog").remove()),i._confirmDialog&&(e("#"+i._confirmDialog.attr("id")+"_wrapper").clearQueue(),e("#"+i._confirmDialog.attr("id")+"_wrapper").stop(),i._confirmDialog.data("ejDialog")&&i._confirmDialog.data("ejDialog").destroy(),e("#"+i._confirmDialog.attr("id")+"_wrapper").remove(),e("#"+i._id+"_ConfirmDialog").remove()),e("#"+i._id+"_dialogColumnAdd_wrapper").length>0&&(e("#"+i._id+"_dialogColumnAdd_wrapper").clearQueue(),e("#"+i._id+"_dialogColumnAdd_wrapper").stop(),e("#"+i._id+"_dialogColumnAdd").find(".e-datepicker").ejDatePicker("destroy"),e("#"+i._id+"_dialogColumnAdd").find(".e-datetimepicker").ejDateTimePicker("destroy"),e("#"+i._id+"_dialogColumnAdd").find(".e-numerictextbox").ejNumericTextbox("destroy"),e("#"+i._id+"_dialogColumnAdd").find(".e-dropdownlist").ejDropDownList("destroy"),e("#"+i._id+"_dialogColumnAdd").find(".e-treegrid").ejTreeGrid("destroy"),e("#"+i._id+"_dialogColumnAdd").data("ejDialog")&&e("#"+i._id+"_dialogColumnAdd").data("ejDialog").destroy(),e("#"+i._id+"_dialogColumnAdd_wrapper").remove(),e("#"+i._id+"_dialogColumnAdd").remove()),s.allowFiltering&&!s.isFromGantt)for(var r=0;r<a.length;r++){var n=e("#"+this._id+"_"+a[r].field.split(".").join("")+"_filterbarcell");n.data("ejWidgets")&&e(n).data(e(n).data("ejWidgets")[0]).destroy()}if(i.model.allowFiltering&&"menu"==i.model.filterSettings.filterType)for(var o,l=i._renderedFilterMenuDialog,d=0;d<l.length;d++){var h;if(l[d]){var c=l[d].indexOf("edit");if(o=l[d],-1!=c){var u=o.slice(0,c);h=u.charAt(0).toUpperCase()+u.slice(1)}else h=o.charAt(0).toUpperCase()+o.slice(1)}"String"==h?e("#"+this._id+"filter"+h+"MenuDiv").find(".e-autocomplete").ejAutocomplete("destroy"):"Datepicker"==h?e("#"+this._id+"filter"+h+"MenuDiv").find(".e-datepicker").ejDatePicker("destroy"):"Datetimepicker"==h?e("#"+this._id+"filter"+h+"MenuDiv").find(".e-datetimepicker").ejDateTimePicker("destroy"):"Numeric"==h&&e("#"+this._id+"filter"+h+"MenuDiv").find(".e-numerictextbox").ejNumericTextbox("destroy"),e("#"+this._id+"filter"+h+"MenuDiv_wrapper").clearQueue(),e("#"+this._id+"filter"+h+"MenuDiv_wrapper").stop(),e("#"+this._id+"filter"+h+"MenuDiv").find(".e-dropdownlist").ejDropDownList("destroy"),e("#"+this._id+"filter"+h+"MenuDiv").data("ejDialog")&&e("#"+this._id+"filter"+h+"MenuDiv").data("ejDialog").destroy(),e("#"+this._id+"filter"+h+"MenuDiv_wrapper").remove(),e("#"+this._id+"filter"+h+"MenuDiv").remove()}if(i._commandColumnLength>0)for(var d=0;d<a.length;d++)a[d].commands&&a[d].commands.length>0&&e("#"+this._id+d+"_UnboundTemplate").remove();for(var p=["number","string","date","datetime","boolean"],m=p.length,d=0;d<m;d++)switch(e("#"+i._id+p[d]+"_CustomDrop1_popup_wrapper").clearQueue(),e("#"+i._id+p[d]+"_CustomDrop1_popup_wrapper").stop(),e("#"+i._id+p[d]+"_CustomDrop1").data("ejDropDownList")&&e("#"+i._id+p[d]+"_CustomDrop1").data("ejDropDownList").destroy(),e("#"+i._id+p[d]+"_CustomDrop2_popup_wrapper").clearQueue(),e("#"+i._id+p[d]+"_CustomDrop2_popup_wrapper").stop(),e("#"+i._id+p[d]+"_CustomDrop2").data("ejDropDownList")&&e("#"+i._id+p[d]+"_CustomDrop2").data("ejDropDownList").destroy(),e("#"+i._id+p[d]+"_CheckBoxList_WaitingPopup").remove(),p[d]){case"string":e("#"+i._id+p[d]+"_CustomValue1_suggestion").remove(),e("#"+i._id+p[d]+"_CustomValue2_suggestion").remove();break;case"date":e("#e-"+i._id+p[d]+"_CustomValue1").remove(),e("#e-"+i._id+p[d]+"_CustomValue2").remove();break;case"datetime":e("#"+i._id+p[d]+"_CustomValue1_popup").remove(),e("#"+i._id+p[d]+"_CustomValue2_popup").remove()}i.element.empty().removeClass("e-treegrid-core e-treegrid "+i.model.cssClass),i.element.data("ejWaitingPopup")&&i.element.ejWaitingPopup("destroy");for(var d=0;d<a.length;d++){if(a[d].isTemplateColumn){var g=a[d].headerText;t.isNullOrUndefined(g)||t.isNullOrUndefined(g.match(/(\\|[^0-9A-z-_])/g))||(g=g.replace(/(\\|[^0-9A-z-_])/g,"")),e("#"+i._id+g+e.inArray(a[d],i.model.columns)+"_Template").length>0&&e("#"+i._id+g+e.inArray(a[d],i.model.columns)+"_Template").remove()}if(a[d].headerTemplateID){var f=this._id+(a[d].field?a[d].field:"")+e.inArray(a[d],this.model.columns)+"_HeaderTemplate";e("#"+f).remove()}}var _=e.views.helpers;for(var v in _)-1!=v.indexOf(this._id)&&delete _[v];i._columnChooserList.remove()},collapseAll:function(){var e=this,i=e.model,s={};i.enableVirtualization,e.getRows();e.editFormValidate()&&(e._expandCollapseSettings.state="collapseAll",e._expandCollapseSettings.atLevel="",e._expandCollapseSettings.level=0,e._expandCollapsePages=[],(e._isRowEdit||e.model.isEdit)&&(e._isRowEdit?e.cancelRowEditCell():e.cancelEditCell(),e.selectRows(-1),e._cancelSaveTools()),s.requestType=t.TreeGrid.Actions.ExpandCollapse,e._isInExpandCollapseAll=!0,e._collapseAllData(),i.flatRecords.length>0&&e._refreshTreeGridOnExpandCollapseAll(s),e._isInExpandCollapseAll=!1,e.updateHeight())},_triggerExpandingCollapsingEvent:function(e){var t=this;return e.expanded?t._trigger("expanding",e):t._trigger("collapsing",e)},_collapseAllData:function(){var e,i=this,s=i.model,a={};if(a.requestType=t.TreeGrid.Actions.ExpandCollapse,s.allowPaging&&s.pageSettings.pageSizeMode==t.TreeGrid.PageSizeMode.Root&&s.enableVirtualization){var r=s.pageSettings.pageSize,n=i._currentPage(),o=r*n,l=r*(n-1);for(i._expandCollapsePages.push(n),e=l;e<o;e++){var d=i._isHierarchyFiltering?i._filterParentRecords[e]:i.model.parentRecords[e];d&&(a.data=d,a.recordIndex=s.updatedRecords.indexOf(d),a.expanded=!1,d.hasChildRecords&&(i._triggerExpandingCollapsingEvent(a)||(i._expandCollapseInnerLevelRecord(d,a.expanded),t.TreeGrid.sendExpandCollapseRequest(i,a))))}}else{var h=i._isHierarchyFiltering?i._filterParentRecords:i.model.parentRecords;for(e=0;e<h.length;e++){var d=h[e];a.data=d,a.recordIndex=s.updatedRecords.indexOf(d),a.expanded=!1,d.hasChildRecords&&(i._triggerExpandingCollapsingEvent(a)||(i._expandCollapseInnerLevelRecord(d,a.expanded),t.TreeGrid.sendExpandCollapseRequest(i,a)))}}},_getContextMenuItems:function(){var e=this,t=e._contextMenuTexts;return[{headerText:t.addRowText,eventHandler:null,isDefault:!0,disable:!1,menuId:"Add",parentMenuId:null},{iconClass:"e-edit",headerText:t.editText,eventHandler:null,isDefault:!0,disable:!1,menuId:"Edit",parentMenuId:null},{headerText:t.deleteText,eventHandler:null,isDefault:!0,disable:!1,menuId:"Delete",parentMenuId:null},{iconClass:"e-save",headerText:t.saveText,eventHandler:null,isDefault:!0,isEdit:!0,disable:!1,menuId:"Save",parentMenuId:null},{iconClass:"e-cancel",headerText:t.cancelText,eventHandler:null,isDefault:!0,isEdit:!0,disable:!1,menuId:"Cancel",parentMenuId:null},{iconPath:null,headerText:t.aboveText,eventHandler:null,menuId:"Above",parentMenuId:"Add"},{iconPath:null,headerText:t.belowText,eventHandler:null,menuId:"Below",parentMenuId:"Add"}]},_getHeaderContextMenuItems:function(i){var s,a,r,n=[],o=this,l=o.model,d=e(i.target),h=o._columnMenuTexts,c=d.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname"),u=o.getColumnByField(c);if(null==u)return!1;if(r=void 0==u.allowSorting||u.allowSorting,l.allowSorting&&r&&(n.push({iconClass:"e-columnmenu-ascending",headerText:h.sortAscendingText,eventHandler:null,isDefault:!1,disable:!1,menuId:"contextMenu_SortAscending",parentMenuId:null}),n.push({iconClass:"e-columnmenu-descending",headerText:h.sortDescendingText,eventHandler:null,isDefault:!1,disable:!1,menuId:"contextMenu_SortDescending",parentMenuId:null})),(l.showColumnChooser||l.contextMenuSettings.showContextMenu)&&(n.length,n.push({iconClass:"e-columnchooser-icon",headerText:h.columnsText,eventHandler:null,isDefault:!1,disable:!1,menuId:"contextMenu_Columns",parentMenuId:null,isExpanderIcon:!0})),!l.isFromGantt&&(u.allowFreezing||o._allowFreezingDefault&&t.isNullOrUndefined(u.allowFreezing))){o._frozenColumnsLength!=l.columns.length-1||u.isFrozen||(s=!0);var p=this._getFrozenColumnWidth(),m=l.columns.indexOf(u);p=p+this.columnsWidthCollection[m]+18,p>this._gridWidth&&(s=!0),n.push({iconClass:"e-freezecolumn-icon",headerText:h.freezeText,eventHandler:null,isDefault:!1,disable:!(!s&&!u.isFrozen),menuId:"contextMenu_Freeze",parentMenuId:null}),n.push({iconClass:"e-unfreezecolumn-icon",headerText:h.unfreezeText,eventHandler:null,isDefault:!1,disable:!(1==u.isFrozen),menuId:"contextMenu_Unfreeze",parentMenuId:null}),o._checkboxSelection&&l.columns[0].nonColumn?1!=l.columns.indexOf(u)&&l.columns.indexOf(u)>this._frozenColumnsLength&&(a=!0):0!=l.columns.indexOf(u)&&l.columns.indexOf(u)>this._frozenColumnsLength&&(a=!0),p=this._getFrozenColumnWidth(m),p+=18,p>this._gridWidth&&(a=!1),n.push({iconClass:"e-freezecolumnbefore-icon",headerText:h.freezePrecedingColumnsText,eventHandler:null,menuId:"contextMenu_FreezePreceding",isDefault:!1,disable:!a,parentMenuId:null})}return n},_getsubContextMenuItems:function(){var e=this,t=e._contextMenuTexts;return[{iconPath:null,headerText:t.aboveText,eventHandler:null,menuId:"Above",parentMenuId:"Add"},{iconPath:null,headerText:t.belowText,eventHandler:null,menuId:"Below",parentMenuId:"Add"}]},_clearContextMenu:function(){var t=this;e(".e-tgcontextmenu").remove(),e(".e-tginnerContextmenu").remove(),e(".e-tgheaderContextmenu").remove(),e("#"+t._id+"ccDiv").ejDialog("close")},_renderContextMenu:function(i,s,a,r){var n,o,l,d,h=this,c=h.model,u={},p=h._getCoordinate(i);if(h._contextMenuSelectedIndex=s,h._contextMenuSelectedItem=a,h._contextMenuEvent=i,r||this.editFormValidate()){i||(i=window.event),n=p.pageX,o=p.pageY;var m=this.getOffsetRect(h.element[0]);if(m.bottom=m.top+this.element[0].offsetHeight,m.right=m.left+e(this.element).width(),u.targetElement=i,u.item=a,u.index=s,u.columnIndex=h.getCellIndex(i),u.requestType="ContextMenuOpen",u.contextMenuItems=h._contextMenuItems,h._trigger("contextMenuOpen",u))return!1;h._activeMenuItemId=null,h._contextMenuItems=u.contextMenuItems,l=t.buildTag("div.e-tgcontextmenu e-js","",{display:"table",position:"absolute","z-index":h.getMaxZIndex()+1},{id:h._id+"_ContextMenu"}),c.cssClass&&l.addClass(c.cssClass);var g=u.contextMenuItems.filter(function(e){if(null==e.parentMenuId||void 0==e.parentMenuId)return!0});this._isContextMenuItems=!0,d=t.buildTag("ul.e-treegrid-contextmenu",e.render[h._id+"contextMenuTemplate"](g),{margin:"0px","padding-left":"0px","list-style-type":"none"},{"data-icon":!1,"data-role":"list-divider"}),l.append(d),e(document.body).append(l),"msie"==t.browserInfo().name&&t.browserInfo().version<9&&c.isResponsive&&h._off(e(window),"resize",h.windowResize);var f=e(l).outerHeight(),_=e(l).outerWidth(),v=l.find(".e-menuitem");v.eq(0);if(v.outerWidth(_+2),(m.left>n||m.right<n+_)&&(m.right<n+_&&(n-=_),n<0&&(n=m.left+10)),m.bottom<o+f){var b=o-f,x=(m.bottom,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop);if(b>m.top)o=b;else if(o+f>x+window.innerHeight){var y=o+f-(x+window.innerHeight),w=o-y;w>0&&(o=parseInt(w))}}l.css({left:n+"px",top:o+"px"}),h._focusTreeGridElement(),e(l).css({height:"auto"}),h._on(l,"contextmenu",function(e){e.preventDefault()}),e(v).click(function(){h._contextMenuClickHandler(this)}),e(v).mouseenter(function(){e(this).hasClass("e-disable")||(l.find(".e-tgcontextmenu-mouseover").removeClass("e-tgcontextmenu-mouseover"),e(this).addClass("e-tgcontextmenu-mouseover"),h._activeMenuItemId=e(this).attr("id"),h._showSubContextMenu(this,u.contextMenuItems))}),h.model.allowSelection&&"multiple"==h.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&h._clearMultiSelectPopup(),"msie"==t.browserInfo().name&&t.browserInfo().version<9&&c.isResponsive&&h._on(e(window),"resize",h.windowResize),i.preventDefault()}},_renderHeaderContextMenu:function(i){var s,a,r,n,o,l,d,h,c=this,u=c.model,p={},m=e(i.target);if(o=m.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname"),d=c.getColumnByField(o),c._contextMenuColumnDetails=d,u.isEdit||this._isRowEdit){if(!this.editFormValidate())return!0;c._saveEditedElements()}var g=c._getCoordinate(i);i||(i=window.event),s=g.pageX,a=g.pageY;var f=c.getOffsetRect(c.element[0]);if(f.bottom=f.top+c.element[0].offsetHeight,f.right=f.left+e(this.element).width(),p.targetElement=i,p.headerContextMenuItems=c._headerContextMenuItems,p.columnIndex=c.getColumnIndexByField(o),p.requestType="ContextMenuOpen",c._trigger("contextMenuOpen",p))return!1;p.headerContextMenuItems=c._headerContextMenuItems,c._headerContextMenuItems=p.headerContextMenuItems,r=t.buildTag("div.e-tgheaderContextmenu e-js","",{display:"table",position:"absolute","z-index":c.getMaxZIndex()+1},{id:c._id+"_headerContextMenu"}),u.cssClass&&r.addClass(u.cssClass);var _=p.headerContextMenuItems.filter(function(e){if(null==e.parentMenuId||void 0==e.parentMenuId)return!0});this._isContextMenuItems=!1,n=t.buildTag("ul.e-treegrid-headercontextmenu",e.render[c._id+"contextMenuTemplate"](_),{margin:"0px","padding-left":"0px","list-style-type":"none"},{"data-icon":!1,"data-role":"list-divider"}),r.append(n),e(document.body).append(r),"msie"==t.browserInfo().name&&t.browserInfo().version<9&&u.isResponsive&&c._off(e(window),"resize",c.windowResize);var v=e(r).outerHeight(),b=e(".e-tgheaderContextmenu").outerWidth()+.5,h=r.find(".e-menuitem"),x=h.eq(0);if(c._activeMenuItemId=e(x).attr("id"),h.outerWidth(b),(f.left>s||f.right<s+b)&&(f.right<s+b&&(s-=b),s<0&&(s=f.left+10)),f.bottom<a+v){var y=a-v;y>0&&(a=y)}r.css({left:s+"px",top:a+"px"}),c._focusTreeGridElement(),e(r).css({height:"auto"}),c._on(r,"contextmenu",function(e){e.preventDefault()}),l=s+b,c._columnListPosX=l,c._headerContextMenuWidth=b,c._posx=s,c._posy=a,c._columnMenuPopupY=a,e("#contextMenu_SortAscending").on("click",function(){u.allowMultiSorting&&(c._multiSortRequest=!0),0==e(this).find(".e-expander").length&&(u.isFromGantt?c.sortColumn(d.mappingName?d.mappingName:d.field,t.sortOrder.Ascending):c.sortColumn(d.field,t.sortOrder.Ascending),c._multiSortRequest=!1)}),e("#contextMenu_SortDescending").on("click",function(){u.allowMultiSorting&&(c._multiSortRequest=!0),0==e(this).find(".e-expander").length&&(u.isFromGantt?c.sortColumn(d.mappingName?d.mappingName:d.field,t.sortOrder.Descending):c.sortColumn(d.field,t.sortOrder.Descending),c._multiSortRequest=!1)}),e("#contextMenu_Freeze").click(function(){0==e(this).find(".e-expander").length&&(e(this).hasClass("e-disable")||(c._checkboxSelection&&u.columns[0].nonColumn&&!u.columns[0].isFrozen&&(u.columns[0].isFrozen=!0),c.freezeColumn(d.field,!0)))}),e("#contextMenu_Unfreeze").click(function(){0==e(this).find(".e-expander").length&&(e(this).hasClass("e-disable")||(c._checkboxSelection&&2==c._frozenColumnsLength&&u.columns[0].nonColumn&&u.columns[0].isFrozen&&(u.columns[0].isFrozen=!1),c.freezeColumn(d.field,!1)))}),e("#contextMenu_FreezePreceding").click(function(){0==e(this).find(".e-expander").length&&(e(this).hasClass("e-disable")||c.freezePrecedingColumns(d.field))}),u.isFromGantt||c.model.isResponsive&&e(window).width()<=c._responsiveMinWidth&&e("#"+c._id+"_headerContextMenu").find(".e-expander").removeClass("e-treegridadaptivesubicon"),e("#contextMenu_Columns").mouseenter("click",function(t){c._showColumnChooser(t,f.right,l,b,a,s,e("#contextMenu_Columns"),!0)}),x.addClass("e-columnmenuselection"),e(h).mouseenter(function(){e(this).hasClass("e-disable")||(h.removeClass("e-columnmenuselection"),e(this).addClass("e-columnmenuselection"),c._activeMenuItemId=e(this).attr("id"),c._showSubContextMenu(this,p.headerContextMenuItems))}),e(".e-tgheaderContextmenu .e-menuitem").on("mouseenter click",function(t){var i=e(t.target),s=i.closest(".e-menuitem").attr("id");"contextMenu_Columns"==s?e(".e-tginnerContextmenu").remove():e("#"+c._id+"ccDiv").ejDialog("close")}),e(h).click(function(){c._contextMenuClickHandler(this)}),c.model.allowSelection&&"multiple"==c.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&c._clearMultiSelectPopup(),"msie"==t.browserInfo().name&&t.browserInfo().version<9&&u.isResponsive&&c._on(e(window),"resize",c.windowResize)},_showSubContextMenu:function(i,s){var a,r,n,o=this.model,l=this,d=[],h=e(i).attr("id"),c=[];if(c=s.filter(function(e){if(e.menuId==h&&(d=e),e.parentMenuId==h)return!0}),d.parentMenuId||e(".e-tginnerContextmenu").remove(),d.parentMenuId&&this._removeContextMenu(d,s),c.length>0){a=t.buildTag("div.e-tginnerContextmenu e-js","",{display:"table",position:"absolute","z-index":l.getMaxZIndex()+1},{id:this._id+"_SubContextMenu"+h}),o.cssClass&&a.addClass(o.cssClass),r=t.buildTag("ul",e.render[l._id+"contextMenuTemplate"](c),{margin:"0px","padding-left":"0px"},{"data-icon":!1,type:"none","data-role":"list-divider"}),a.append(r),e(document.body).append(a),n=a.find(".e-menuitem");var u=e(a).outerWidth();n.outerWidth(u>100?u:100);var p=l._getSubContextMenuPosition(i,a);e(a).css({top:p.top,left:p.left}),e(n).mouseenter(function(){e(this).hasClass("e-disable")||(l._showSubContextMenu(this,s),e(this).closest(".e-tginnerContextmenu").find(".e-tgcontextmenu-mouseover").removeClass("e-tgcontextmenu-mouseover"),e(this).addClass("e-tgcontextmenu-mouseover"),l._activeMenuItemId=e(this).attr("id"))}),l._on(a,"contextmenu",function(e){e.preventDefault()}),e(n).click(function(){l._contextMenuClickHandler(this)}),"msie"==t.browserInfo().name&&t.browserInfo().version<9&&o.isResponsive&&l._on(e(window),"resize",l.windowResize)}},_removeContextMenu:function(t,i){var s=e("#"+this._id+"_SubContextMenu"+t.parentMenuId),a=e(s).find(".e-tgcontextmenu-mouseover");if(e(a).length>0){var r=i.filter(function(t){if(t.menuId==e(a).attr("id"))return!0});if(r.length>0){var n=i.filter(function(e){if(e.parentMenuId==r[0].menuId)return!0});n.length>0&&this._removeContextMenu(n[0],i)}e("#"+this._id+"_SubContextMenu"+e(a).attr("id")).remove()}},_getSubContextMenuPosition:function(i,s){var a,r,n,o,l,d,h=this,c=this.model,u={top:"",left:""};a=this._isContextMenuItems?e(i).closest(".e-tgcontextmenu"):e(i).closest(".e-tgheaderContextmenu"),0==a.length&&(a=e(i).closest(".e-tginnerContextmenu")),"msie"==t.browserInfo().name&&t.browserInfo().version<9&&c.isResponsive&&h._off(e(window),"resize",h.windowResize),r=e(s).outerWidth(),n=e(s).height(),d=this.getOffsetRect(i),o=e(a).outerWidth(),u.top=d.top-1,u.bottom=d.top+e(i).outerHeight(),u.left=d.left+e(a).width()+1,l=u.left;var p=this.getOffsetRect(this.element[0]);if(p.bottom=p.top+this.element[0].offsetHeight,p.right=p.left+e(this.element).width(),(p.left>l||p.right<l+r)&&(p.right<l+r&&(l=l-o-r),l>0&&(u.left=l)),p.bottom<u.top+n){var m=u.bottom-n,g=(u.top,p.bottom,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop);if(m>p.top)u.top=m;else if(u.top+n>g+window.innerHeight){var f=u.top+n-(g+window.innerHeight),_=u.top-f;_>0&&(u.top=parseInt(_)-2)}}return u},_contextMenuClickHandler:function(t){var i=e(t).attr("id"),s=this;if(!e(t).hasClass("e-disable")&&0==e(t).find(".e-expander").length)switch(i){case"Delete":s.contextMenuOperations("Delete");break;case"Above":s.contextMenuOperations("Above");break;case"Below":s.contextMenuOperations("Below");break;case"Add":s.contextMenuOperations("Add");break;case"Edit":s.contextMenuOperations("Edit");break;case"Save":s.contextMenuOperations("Save");break;case"Cancel":s.contextMenuOperations("Cancel");break;default:s.contextMenuOperations(i)}},_triggerMenuEventHandler:function(i,s,a){var r,n,o=this,l=a?o._contextMenuItems:o._headerContextMenuItems;if(!t.isNullOrUndefined(l)&&(r=l.filter(function(e){if(e.menuId.toString()===i)return!0}),r.length>0)){n=r[0];var d=n.eventHandler;if(d&&("string"==typeof d&&(d=t.util.getObject(d,window)),e.isFunction(d))){var h=t.event("customContextMenuHandler",this.model,s);d.call(this,h)}}},_createContextMenuTemplate:function(){var t=this,i={};i["_"+t._id+"getHeaderName"]=e.proxy(t._getHeaderName,t),e.views.helpers(i);var s="<li style='list-style-type:none;margin:0px;'>";s+="<div class='e-menuitem {{if disable}}e-disable{{/if}}{{if ~_"+t._id+"getHeaderName(#data)}} e-parent-menuitem{{/if}}' id={{:menuId}}  style='display:table;cursor:{{if disable}}default{{else}}pointer{{/if}};min-width:100px;'>{{if iconPath}}<div class='e-icon e-tgcontextmenu-image' style='background-image:{{:iconPath}};background-repeat:no-repeat;'/> {{else}}<div class='e-icon {{:iconClass}} e-tgcontextmenu-icon'/>{{/if}}<div class='e-tgcontextmenu-label'><span>{{:headerText}}</span></div>{{if ~_"+t._id+"getHeaderName(#data)}}<div class='e-icon e-expander'/> {{/if}}",s+="</div></li>";var a={};a[t._id+"contextMenuTemplate"]=s,e.templates(a)},_getHeaderName:function(e){return(this._isContextMenuItems?this._contextMenuItems:this._headerContextMenuItems).filter(function(t){if(null!=e.menuId&&e.menuId==t.parentMenuId||e.isExpanderIcon)return!0}).length>0},_getColumnId:function(e){return e.name.replace(/\s/g,"")},_updateContextmenuOption:function(t){Array.prototype.clean=function(e){for(var t=0;t<this.length;t++)this[t]==e&&(this.splice(t,1),t--);return this};var i=this;if(i._isRowEdit||i.model.isEdit)i._contextMenuItems.splice(0,3);else{i._contextMenuItems.splice(3,2);var s=i.model.editSettings,a=e.extend(!0,[],i._contextMenuItems),r=i.model.contextMenuSettings.contextMenuItems.clean("").clean(void 0),n=[];if(e.each(r,function(t,i){-1===e.inArray(i.toLowerCase(),n)&&n.push(i.toLowerCase())}),i._contextMenuItems=[],-1==t)-1==n.indexOf("add")&&0!=n.length||(i._contextMenuItems[0]=a[0]),s.allowAdding||(i._contextMenuItems[0].disable=!0),i._contextAddMenuIndex=0;else if(0==n.length)i._contextMenuItems[0]=a[0],s.allowAdding||(i._contextMenuItems[0].disable=!0),i._contextAddMenuIndex=0,i._contextMenuItems[1]=a[2],s.allowDeleting||(i._contextMenuItems[1].disable=!0),i._contextMenuItems.push.apply(i._contextMenuItems,i._subContextMenuItems);else{for(var o=0;o<n.length;o++){var l=n[o];switch(l.toLowerCase()){case"add":i._contextMenuItems[o]=a[0],i._contextAddMenuIndex=o,s.allowAdding||(i._contextMenuItems[o].disable=!0);break;case"delete":
i._contextMenuItems[o]=a[2],s.allowDeleting||(i._contextMenuItems[o].disable=!0);break;case"edit":i._contextMenuItems[o]=a[1],s.allowEditing||(i._contextMenuItems[o].disable=!0)}}i._contextMenuItems.push.apply(i._contextMenuItems,i._subContextMenuItems)}}},_setInitialData:function(){for(var e,i=this,s=i.model,a=[],r={},n=0;n<s.columns.length;n++){var o=s.columns[n];switch(o.editType){case"booleanedit":r[o.field]=!1;break;case"stringedit":r[o.field]=null;break;case"datepicker":r[o.field]=t.format(new Date,this.model.dateFormat,this.model.locale);break;case"datetimepicker":r[o.field]=t.format(new Date,"MM/dd/yyyy hh:mm tt",this.model.locale);break;case"numericedit":r[o.field]=0;break;default:r[o.field]=null}}a.push(r),null!=i.dataSource()&&0!=i.dataSource().length&&0!=s.flatRecords.length||(e=i._createRecord(a[0],0,null),e.index=0,i._addRecord(e,t.TreeGrid.RowPosition.Top),i._clearContextMenu(),this._removeDetailsRow())},_subContextMenuAction:function(e,i,s,a){var r,n=this,o=n.model,l={};l.requestType="save",r=jQuery.extend(!0,{},e.item),r[n.model.childMapping]=null,o.idMapping&&o.parentIdMapping&&r[o.parentIdMapping]&&delete r[o.parentIdMapping],"Above"==s?n._addRecord(r,t.TreeGrid.RowPosition.Above,null,"contextMenu"):"Below"==s&&n._addRecord(r,t.TreeGrid.RowPosition.Below,null,"contextMenu"),n._clearContextMenu()},_appendEditTemplateRow:function(i,s,a,r,n){var o,l,d,h,c=this.model,u=this,p=u.model.rowHeight,m=[],g=u.getUpdatedRecords();if(this._editedRowIndex=a,d=t.buildTag("table.e-table e-zerospace","",{}),this._frozenColumnsLength>0?r?(l=t.buildTag("form.e-treegridform#"+u._id+"EditFrozenForm","",{margin:"-2px 0px"},{}),d.append(u._$gridHeaderContainer.find("#e-frozenheaderdiv"+u._id).find("colgroup").clone())):(l=t.buildTag("form.e-treegridform#"+u._id+"EditForm","",{margin:"-2px 0px"},{}),d.append(u._$gridHeaderContainer.find("#e-movableheaderdiv"+u._id).find("colgroup").clone())):(l=t.buildTag("form.e-treegridform#"+u._id+"EditForm","",{margin:"-2px 0px"},{}),d.append(u.getHeaderTable().find("colgroup").clone())),!r&&c.showDetailsRow&&c.showDetailsRowInfoColumn&&c.detailsTemplate&&(h=s.find("td.e-detailsrowcell")),s.empty(),n?(s.addClass("e-addedrow"),s.next("tr").hasClass("e-detailsrow")&&s.next("tr").remove()):s.addClass("e-rowedit"),m=i.filter(function(e){return!(!1===e.visible)}),o=t.buildTag("td","",{padding:"1px"},{colspan:h?m.length+1:m.length}),c.allowSelection)var f=t.buildTag("tr.e-treegridrows e-selectionbackground e-active",{height:p},{});else var f=t.buildTag("tr.e-treegridrows",{height:p},{});for(var _=t.buildTag("tbody"),v=u._cellEditTemplate,b=i.length,x=0;x<b;x++)if(!t.isNullOrUndefined(x)&&i[x].visible){var y={},w=u._getFieldValue(i[x].field,c.columns.indexOf(i[x])),C=v.find("#"+w+"_CellEdit").html(),S=u._getCustomCellValue(g[a],i[x].field);y[w]=S,"dropdownedit"==i[x].editType&&0==y[i[x].field]&&(y[w]=y[w].toString());var T=e(e.templates(C).render(y));if(u._isCommandColumn(i[x]))var R=t.buildTag("td.e-rowcell e-unboundcell e-unboundeditedcell","",{height:p,"vertical-align":"middle;",overflow:"hidden"},{});else{var R=t.buildTag("td.e-rowcell e-editedcell","",{height:p,"vertical-align":"middle;",overflow:"hidden"},{});R.addClass("e-validError")}u._isCommandColumn(i[x])||0!=i[x].allowEditing||T.attr("disabled",!0).addClass("e-disable"),"SELECT"==T.get(0).tagName&&(T.val(y[i[x].field]),null==T.val()&&T.val(T.find("option").first().val())),"INPUT"==T.get(0).tagName&&T.val(y[w]),f.append(R.append(T)),_.append(f)}h&&f.append(h),d.append(_),l.append(d),o.append(l),s.append(o)},_editRow:function(i,s,a){var r=this,n=r.model,o=(n.rowHeight,r.getUpdatedRecords()),l=!1;r._editedRowIndex=i;var d=t.TreeGrid.getRowByIndex(r,i);if(d.hasClass("e-summaryrow"))return void r._editAddTools();if(t.isNullOrUndefined(s)){var h={};if(h.data=o[i],h.rowElement=d,h.rowIndex=i,h.columnIndex=a,l=!1,r._trigger("beginEdit",h))return!1}else l=!0;this._frozenColumnsLength>0?(r._appendEditTemplateRow(r._frozenColumns,e(d[0]),i,!0,s),r._appendEditTemplateRow(r._unFrozenColumns,e(d[1]),i,!1,s)):r._appendEditTemplateRow(n.columns,e(d),i,!1,s),r._isRowEdit=!0,r._editAddTools();var h={};l?(h.data={},h.requestType="add"):(h.columnIndex=a,h.data=o[i],h.requestType="beginEdit"),r._refreshEditForm(h),r._updateWrapRowHeights("total,header",null,i,"rowEdit"),e.isFunction(e.validator)&&(r._initValidator(),r.setValidation()),n.selectedItem=o[i];for(var c=0;c<n.columns.length;c++)r._isCommandColumn(n.columns[c])&&1==n.columns[c].isFrozen?this._refreshUnboundTemplate(d.find("#"+this._id+"EditFrozenForm")):r._isCommandColumn(n.columns[c])&&this._refreshUnboundTemplate(d.find("#"+this._id+"EditForm"))},_renderColumnChooser:function(){var i=this,s=t.buildTag("div.e-columnSelector","","",{id:this._id+"ccDiv"});e("#"+i._id+"ccDiv_wrapper").remove(),i._renderColumnChooserList(!1),s.append(i._columnChooserList),s.insertAfter(i.element),s.data("columnMenuDialog","TreeGrid"),s.ejDialog({showOnInit:!1,allowKeyboardNavigation:!1,enableResize:!1,enableRTL:!1,showHeader:!1,width:"auto",allowDraggable:!1,position:{X:1,Y:1},enableAnimation:!1,minWidth:"0px",minHeight:"0px"}),e("#"+i._id+"ccDiv_wrapper").removeClass("e-dialog").removeClass("e-shadow").find("div.e-dialog-scroller").css("height","100%").removeClass("e-widget-content").addClass("e-treegrid-columnchooser")},_renderFilterMenu:function(e){var t,i=this,s=0,a=0,r=0,n=0,o=0,l=0,d=this.model.columns;if(!e)for(var h=0;h<d.length;h++)"numericedit"!=d[h].filterEditType&&"numericedit"!=d[h].editType||s++,"stringedit"!=d[h].filterEditType&&"stringedit"!=d[h].editType||a++,"datepicker"!=d[h].filterEditType&&"datepicker"!=d[h].editType||r++,"datetimepicker"!=d[h].filterEditType&&"datetimepicker"!=d[h].editType||o++,"booleanedit"!=d[h].filterEditType&&"booleanedit"!=d[h].editType||l++,"dropdownedit"!=d[h].filterEditType&&"dropdownedit"!=d[h].editType||(n++,t=d[h]);(a>0||"stringedit"==e)&&(i._renderEdittypeFilterMenu("String"),i._renderedFilterMenuDialog.push("stringedit")),(s>0||"numericedit"==e)&&(i._renderEdittypeFilterMenu("Numeric"),i._renderedFilterMenuDialog.push("numericedit")),(r>0||"datepicker"==e)&&(i._renderEdittypeFilterMenu("Datepicker"),i._renderedFilterMenuDialog.push("datepicker")),(o>0||"datetimepicker"==e)&&(i._renderEdittypeFilterMenu("Datetimepicker"),i._renderedFilterMenuDialog.push("datetimepicker")),(n>0||"dropdownedit"==e)&&(i._renderEdittypeFilterMenu("Dropdown",t),i._renderedFilterMenuDialog.push("dropdownedit")),(l>0||"booleanedit"==e)&&(i._renderEdittypeFilterMenu("Boolean"),i._renderedFilterMenuDialog.push("booleanedit"))},_renderEdittypeFilterMenu:function(i,s){var a,r=this,n=t.buildTag("div.e-"+r._id+"filter"+i+"Selector e-filterMenuDiv e-treegridmenufilterwraper","",{},{id:this._id+"filter"+i+"MenuDiv"}),o=r._filterMenuTexts;a="Dropdown"==i?"<div class='e-filter-container'><div class='e-dropdown-filter-container'><input id='"+this._id+"filter"+i+"DropDown'/></div><div class='e-filter-button-container'><div class='e-filter-btn-filter'><button id='"+this._id+"filter"+i+"MenuButton' class='e-filterMenuDiv'>"+o.filterButton+"</button></div><div class='e-filter-btn-clear'><button id='"+this._id+"filter"+i+"ClearButton' class='e-filterMenuDiv'>"+o.clearButton+"</button></div></div></div>":"Boolean"==i?"<div class='e-filter-container'><div class='e-checkbox-filter-container'><span class='e-checkbox-filter-text'>"+o.filterValue+"</span><div class='e-checkbox-filter-control' style='padding-bottom:14px;padding-left: 48%;'><input id='"+this._id+"filter"+i+"InputBox'/></div><div class='e-filter-button-container'><div class='e-filter-btn-filter'><button id='"+this._id+"filter"+i+"MenuButton' class='e-filterMenuDiv'>"+o.filterButton+"</button></div><div class='e-filter-btn-clear'><button id='"+this._id+"filter"+i+"ClearButton' class='e-filterMenuDiv'>"+o.clearButton+"</button></div></div></div>":"<div class='e-filter-container'><div class='e-filter-operator'><input id='"+this._id+"filter"+i+"DropDown'/></div><span class='e-filter-text'>"+o.filterValue+"</span><div class='e-filter-value'><input id='"+this._id+"filter"+i+"InputBox'/></div><div class='e-filter-button-container'><div class='e-filter-btn-filter'><button id='"+this._id+"filter"+i+"MenuButton' class='e-filterMenuDiv'>"+o.filterButton+"</button></div><div class='e-filter-btn-clear'><button id='"+this._id+"filter"+i+"ClearButton' class='e-filterMenuDiv'>"+o.clearButton+"</button></div></div></div>",n.append(a),n.insertAfter(r.element),r._renderFilterMenuDialog(i+"MenuDiv",i,s,o),n.data("filter"+i+"MenuDialog","TreeGrid"),n.ejDialog({showOnInit:!1,allowKeyboardNavigation:!1,enableResize:!1,enableRTL:!1,showHeader:!1,width:"auto",allowDraggable:!1,position:{X:1,Y:1},enableAnimation:!1,cssClass:r.model.cssClass}),e("#"+r._id+"filter"+i+"MenuDiv_wrapper").removeClass("e-dialog").removeClass("e-shadow").find("div.e-dialog-scroller").css({height:"auto",width:"auto"}).removeClass("e-widget-content"),e("#"+r._id+"filter"+i+"MenuDiv_wrapper").css("outline","none").addClass("e-treegrid-columnchooser")},_renderFilterMenuDialog:function(t,i,s,a){var r,n,o,l=this;"String"==i&&(r=a.stringMenuOptions,n="endswith",o={value:"value",text:"text"}),"Numeric"!=i&&"Datepicker"!=i&&"Datetimepicker"!=i||(r=a.numberMenuOptions,n="GreaterThan",o={value:"value",text:"text"}),"Dropdown"==i&&(r=s.dropdownData,o=s.editParams?{value:s.editParams.fields.value,text:s.editParams.fields.text}:{value:"value",text:"text"}),"String"==i&&e("#"+l._id+"filter"+t).find("#"+l._id+"filter"+i+"InputBox").ejAutocomplete({width:"100%",watermarkText:a.enterValueText,filterType:n,enableResize:!1,enableDistinct:!0,locale:l.model.locale,cssClass:l.model.cssClass}),"Numeric"==i&&e("#"+l._id+"filter"+t).find("#"+l._id+"filter"+i+"InputBox").ejNumericTextbox({decimalPlaces:2,width:"100%",locale:l.model.locale}),"Boolean"==i&&e("#"+l._id+"filter"+t).find("#"+l._id+"filter"+i+"InputBox").ejCheckBox({size:"small"}),"Datetimepicker"==i&&e("#"+l._id+"filter"+t).find("#"+l._id+"filter"+i+"InputBox").ejDateTimePicker({width:"100%",locale:l.model.locale,cssClass:l.model.cssClass}),"Datepicker"==i&&e("#"+l._id+"filter"+t).find("#"+l._id+"filter"+i+"InputBox").ejDatePicker({width:"100%",locale:l.model.locale,cssClass:l.model.cssClass}),"Boolean"!=i&&e("#"+l._id+"filter"+t).find("#"+l._id+"filter"+i+"DropDown").ejDropDownList({dataSource:r,selectedIndex:1,fields:o,select:function(t){if("String"==i){e("#"+l._id+"filter"+i+"InputBox").data("ejAutocomplete").option("filterType",t.value)}},cssClass:l.model.cssClass,width:"100%"}),e("#"+l._id+"filter"+t).find("#"+l._id+"filter"+i+"MenuButton").ejButton({size:"normal",width:"100%",cssClass:l.model.cssClass,click:function(t){var i,s,a=e.trim(l._columnMenuTarget.prev("div.e-headercelldiv").attr("data-ej-mappingname")),r=l.getColumnByField(a);t.e.target.id==l._id+"filterStringMenuButton"&&(i=e("#"+l._id+"filterStringInputBox").data("ejAutocomplete"),s=e("#"+l._id+"filterStringMenuDiv").find("#"+l._id+"filterStringDropDown").data("ejDropDownList"),l._performMenuFilter(r,i.value(),s.model.value)),t.e.target.id==l._id+"filterNumericMenuButton"&&(i=e("#"+l._id+"filterNumericInputBox").data("ejNumericTextbox"),s=e("#"+l._id+"filterNumericMenuDiv").find("#"+l._id+"filterNumericDropDown").data("ejDropDownList"),l._performMenuFilter(r,i.model.value,s.model.value)),t.e.target.id==l._id+"filterDropdownMenuButton"&&(s=e("#"+l._id+"filterDropdownMenuDiv").find("#"+l._id+"filterDropdownDropDown").data("ejDropDownList"),l._performMenuFilter(r,s.model.value,"equal")),t.e.target.id==l._id+"filterDatepickerMenuButton"&&(i=e("#"+l._id+"filterDatepickerInputBox").data("ejDatePicker"),s=e("#"+l._id+"filterDatepickerMenuDiv").find("#"+l._id+"filterDatepickerDropDown").data("ejDropDownList"),l._performMenuFilter(r,i.model.value,s.model.value)),t.e.target.id==l._id+"filterDatetimepickerMenuButton"&&(i=e("#"+l._id+"filterDatetimepickerInputBox").data("ejDateTimePicker"),s=e("#"+l._id+"filterDatetimepickerMenuDiv").find("#"+l._id+"filterDatetimepickerDropDown").data("ejDropDownList"),l._performMenuFilter(r,i.model.value,s.model.value)),t.e.target.id==l._id+"filterBooleanMenuButton"&&(i=e("#"+l._id+"filterBooleanInputBox").data("ejCheckBox"),"uncheck"==i.model.checkState?l._performMenuFilter(r,!1,"equal"):"check"==i.model.checkState&&l._performMenuFilter(r,!0,"equal"))}}),e("#"+l._id+"filter"+t).find("#"+l._id+"filter"+i+"ClearButton").ejButton({size:"normal",width:"100%",cssClass:l.model.cssClass,click:function(t){var i,s=e.trim(l._columnMenuTarget.prev("div.e-headercelldiv").attr("data-ej-mappingname")),a=l.getColumnByField(s);l._isExcelFilter&&delete l._excelFilter._predicates[0][a.field],t.e.target.id==l._id+"filterStringClearButton"&&(i=e("#"+l._id+"filterStringMenuDiv").find("#"+l._id+"filterStringDropDown").data("ejDropDownList"),l._performMenuFilter(a,"",i.model.value)),t.e.target.id==l._id+"filterNumericClearButton"&&(i=e("#"+l._id+"filterNumericMenuDiv").find("#"+l._id+"filterNumericDropDown").data("ejDropDownList"),l._performMenuFilter(a,"",i.model.value)),t.e.target.id==l._id+"filterDropdownClearButton"&&(i=e("#"+l._id+"filterDropdownMenuDiv").find("#"+l._id+"filterDropdownDropDown").data("ejDropDownList"),l._performMenuFilter(a,"","equal")),t.e.target.id==l._id+"filterDatepickerClearButton"&&(i=e("#"+l._id+"filterDatepickerMenuDiv").find("#"+l._id+"filterDatepickerDropDown").data("ejDropDownList"),l._performMenuFilter(a,"",i.model.value)),t.e.target.id==l._id+"filterDatetimepickerClearButton"&&(i=e("#"+l._id+"filterDatetimepickerMenuDiv").find("#"+l._id+"filterDatetimepickerDropDown").data("ejDropDownList"),l._performMenuFilter(a,"",i.model.value)),t.e.target.id==l._id+"filterBooleanClearButton"&&l._performMenuFilter(a,"","equal")}})},_renderExcelFilter:function(){var i=this,s=i.model,a=s.filterSettings,r=0!=a.filteredColumns.length?a.filteredColumns[0].field:null,n={instance:this,showSortOptions:!!s.allowSorting&&!s.showColumnChooser,allowCaseSensitive:a.enableCaseSensitivity,maxFilterLimit:a.maxFilterChoices,interDeterminateState:!0,enableComplexBlankFilter:a.enableComplexBlankFilter,blankValue:a.blankValue,allowAccent:!0,filteredColumns:a.filteredColumns,filterHandler:e.proxy(i._filterHandler,i),cancelHandler:e.proxy(i._cancelHandler,i),initFilterCol:r,actionBegin:"actionBegin",actionComplete:"actionComplete"};i._excelFilter=new t.excelFilter(n),i._isExcelFilter=!0},_cancelHandler:function(t){var i=this;e("#"+i._id).find(".e-filtericon").data("isClicked",!1),i._mediaStatus=!1,i.model.showColumnChooser&&!i._isCloseFilterMenu&&i._clearColumnMenu("cancelHandler"),i._isCloseFilterMenu=!1},_filterHandler:function(i){var s,a=this,r=a.model,n={};n.requestType="sorting"==i.action?i.action:"filtering";var o=r.filterSettings.filteredColumns;switch(i.action){case"sorting":0!=a.getColumnByField(i.sortDetails.field).allowSorting&&(r.allowMultiSorting&&(a._multiSortRequest=!0),a.sortColumn(i.sortDetails.field,i.sortDetails.direction),a._multiSortRequest=!1);break;case"filtering":a.clearAllSelection(),s=t.DataManager(r.filterSettings.filteredColumns);for(var l=(new t.Query).where("field",t.FilterOperators.equal,i.fieldName),d=s.executeLocal(l),h=0;h<d.length;h++){var c=e.inArray(d[h],r.filterSettings.filteredColumns);-1!=c&&r.filterSettings.filteredColumns.splice(c,1)}t.merge(r.filterSettings.filteredColumns,i.filterCollection),i.currentFilterCollection=i.filterCollection,n.currentFilteringColumn=i.fieldName,n.predicated=i.ejpredicate;a.processBindings(n)&&(r.filterSettings.filteredColumns=o),a._filterIconTarget&&(a._filterIconTarget.target.className="e-column-filtered-icon e-icon e-filtericon"),a._filteredColumnValueID.push(i.fieldName);break;case"clearfiltering":a.clearAllSelection();var u=i.filterDetails;if(delete a._excelFilter._predicates[0][i.fieldName],a.filterColumn(u.field,u.operator,u.value,u.predicate),a._storePreviousFilteredValue(u.field,u.value,u.operator),a._filterIconTarget&&(a._filterIconTarget.target.className="e-column-filter-icon e-icon e-filtericon"),-1!=a._filteredColumnValueID.indexOf(i.fieldName)){var p=a._filteredColumnValueID.indexOf(i.fieldName);a._filteredColumnValueID.splice(p,1)}}e("#"+a._id).find(".e-filtericon").data("isClicked",!1),a._mediaStatus=!1,r.showColumnChooser&&a._clearColumnMenu()},_renderColumnChooserList:function(i,s){for(var a=this,r=a.model.columns.length,n=a.model.columns,o=t.buildTag("div","",{"margin-left":"0px",width:"auto"}),l=0;l<r;l++)if(a.model.treeColumnIndex!=l&&1==n[l].showInColumnChooser){var d=n[l];if(d.nonColumn)continue;if(!t.isNullOrUndefined(d)){var h=t.buildTag("div","","",{class:"e-columnMenuListDiv"}),c={},u=t.isNullOrUndefined(d.headerText)?d.field:d.headerText,p=t.buildTag("input","",c,{id:a._id+"_columnMenu_"+d.field.split(".").join(""),value:u,type:"checkbox"}),m=t.buildTag("label",u,{width:"auto"},{for:a._id+"_columnMenu_"+d.field.split(".").join("")});h.append(p),h.append(m),h.data("column",d.headerText),o.append(h),d.headerText==s&&h.addClass("e-columnmenuselection"),p.ejCheckBox({checked:!!t.isNullOrUndefined(d.visible)||d.visible,cssClass:a.model.cssClass,change:function(e){var i="";i="msie"==t.browserInfo().name&&t.browserInfo().version<9?this.element.closest(".e-columnMenuListDiv").data().column:e.model.value,e.isChecked?a.showColumn(i):a.hideColumn(i),a._updateWrapRowHeights(null,"virtualRefresh")}})}}i?(a._columnChooserList.empty().append(o.children()),a._focusTreeGridElement()):a._columnChooserList=o;var g=a._columnChooserList.find("div.e-columnMenuListDiv");e(g).mouseenter(function(){g.removeClass("e-columnmenuselection"),e(this).addClass("e-columnmenuselection")})},_createColumnMenuTemplate:function(){var t=this,i="<li style='list-style-type:none;'><div class='e-columnmenuitem{{if enabled==false}} e-disable{{/if}}{{if (menuId =='Columns' || menuId =='Filter')}} e-parent-menuitem{{/if}}' style='display:table;cursor:pointer' id='"+t._id+"_{{:menuId}}Chooser'><div class='e-icon {{:icon}} e-treegridicon' style='display:inline-block;'></div><div class='e-menuitem-label' style='display:inline-block;width:auto'><span>{{:name}}</span></div>{{if (menuId =='Columns' || menuId =='Filter')}}<div class='e-icon e-expander e-treegridicon' style='display:inline-block;float:right;'/> {{/if}}</div>{{if menuId == 'RenameColumn' || menuId == 'SortDescending'}}<hr class='e-menuitem-hr'>{{/if}}</li>",s={};s[t._id+"columnMenuTemplate"]=i,e.templates(s)},_updateFilterMenuList:function(t){var i,s,a,r,n,o,l,d,h,c=this,u=c.model,p=e(t.target),m=g=0,m=p[0].offsetWidth,g=p[0].offsetHeight,f=e.trim(p.prev("div.e-headercelldiv").attr("data-ej-mappingname")),_=c.getColumnByField(f);s=i=0,c._clearFilterMenu(),c._clearColumnMenu("columnmenu"),c._columnMenuTarget=p,c._filterIconTarget=t,c._saveEditedElements(),r=c.getOffsetRect(p[0]),r.top=r.top+g,i=(c.model.isFromGantt,r.top+g),n=u.isFromGantt?e(this.element).closest(".e-gantt"):e(this.element),a=this.getOffsetRect(n[0]),a.bottom=a.top+n[0].offsetHeight,a.right=a.left+e(n).width(),_.filterEditType?(d=_.filterEditType.indexOf("edit"),h=_.filterEditType):(d=_.editType.indexOf("edit"),h=_.editType),-1!=d?(o=h.slice(0,d),l=o.charAt(0).toUpperCase()+o.slice(1),c._showFilterMenu("filtermenu","filter"+l,r,m,a.right,s,null,null,_,i)):(l=h.charAt(0).toUpperCase()+h.slice(1),c._showFilterMenu("filtermenu","filter"+l,r,m,a.right,s,null,null,_,i)),c._updatePreviousFilteredValue(_)},_showColumnChooser:function(t,i,s,a,r,n,o,l){var d=this,h=d.model,c=e(window).width();if("mouseenter"==t.type&&c>d._responsiveMinWidth||l||!d.model.isResponsive||"click"==t.type&&c<=d._responsiveMinWidth&&d.model.isResponsive||h.isFromGantt){if(c>d._responsiveMinWidth||l||!d.model.isResponsive||h.isFromGantt){var u={};u.width="auto",u.height="auto",u.minWidth="0px",u.minHeight="0px",u.showHeader=!1,u.position={X:n,Y:r},u.enableModal=!1,u.isResponsive=!1,u.enableResize=!1,u.cssClass=d.model.cssClass,e("#"+d._id+"ccDiv_wrapper").addClass("e-treegridadaptivedialog"),e("#"+d._id+"ccDiv_wrapper").removeClass("e-dialog").removeClass("e-shadow").find("div.e-dialog-scroller").css("height","100%").removeClass("e-widget-content"),e("#"+d._id+"ccDiv").ejDialog(u),e("#"+d._id+"ccDiv").css({height:"auto"}),d._updateColumnMenuVisibility();var p=e("#"+d._id+"ccDiv").ejDialog("instance"),m=e("#"+d._id+"ccDiv_wrapper"),g=m.find("div.e-columnMenuListDiv");p.open(),i<s+m.width()&&(s=s-m.width()-a);var f={X:s,Y:r+o.position().top};p.option({position:f}),m.css("z-index",d.getMaxZIndex()+1),g.removeClass("e-columnmenuselection"),g.eq(0).addClass("e-columnmenuselection"),d._focusTreeGridElement(),d._renderedSubMenuType="ColumnDesktop"}else d._adaptiveColumnChooser();!h.allowFiltering||"menu"!=h.filterSettings.filterType&&"excel"!=h.filterSettings.filterType||(d._isCloseFilterMenu=!0,d._clearFilterMenu())}},_renderColumnMenu:function(i){var s,a,r,n,o,l=this,d=l.model,h=e(i.target),c=m=0,u=[],p=0,c=h[0].offsetWidth,m=h[0].offsetHeight,g=l._columnMenuTexts,f=e.trim(h.prev("div.e-headercelldiv").attr("data-ej-mappingname")),_=l.getColumnByField(f),v=void 0==_.allowSorting||_.allowSorting;if(l._batchEditStarts&&!l._confirmDialog.is(":visible"))return l._batchSaveLostWarning("ColumnMenu"),l._batchTempDetails.menuTarget=i,!0;if(s=a=r=n=0,l._clearColumnMenu("columnmenu"),l._columnMenuTarget=h,d.isEdit||this._isRowEdit){if(!this.editFormValidate())return!0;l._saveEditedElements()}if(d.showColumnChooser&&d.showColumnOptions){var b=l._enableDisableInsertLabel();u.push({name:g.insertColumnLeft,icon:"e-column-insertleft-icon",menuId:"ColumnLeft",enabled:b}),u.push({name:g.insertColumnRight,icon:"e-column-insertright-icon",menuId:"ColumnRight",enabled:b}),u.push({name:g.deleteColumn,icon:"e-column-delete-icon",menuId:"DeleteColumn",enabled:l._enableDisableDEL(_)}),u.push({name:g.renameColumn,icon:"e-column-rename-icon",menuId:"RenameColumn"})}if(!d.allowFiltering||!t.isNullOrUndefined(_.allowFiltering)&&!_.allowFiltering||"menu"!=d.filterSettings.filterType&&"excel"!=d.filterSettings.filterType||(-1!=l._filteredColumnValueID.indexOf(_.field)?(u.push({name:g.menuFilter,icon:"e-column-filtered-icon",menuId:"Filter"}),o=u.length):(u.push({name:g.menuFilter,icon:"e-column-filter-icon",menuId:"Filter"}),o=u.length)),d.allowSorting&&v&&(u.push({name:g.sortAscendingText,icon:"e-columnmenu-ascending",menuId:"SortAscending"}),u.push({name:g.sortDescendingText,icon:"e-columnmenu-descending",menuId:"SortDescending"})),d.showColumnChooser&&(p=u.length,u.push({name:g.columnsText,icon:"e-columnchooser-icon",menuId:"Columns"})),!d.isFromGantt&&(_.allowFreezing||l._allowFreezingDefault&&t.isNullOrUndefined(_.allowFreezing))){var x,y=!1;l._frozenColumnsLength!=d.columns.length-1||_.isFrozen||(x=!0);var w=this._getFrozenColumnWidth(),C=d.columns.indexOf(_);w=w+this.columnsWidthCollection[C]+18,w>this._gridWidth&&(x=!0),u.push({name:g.freezeText,icon:"e-freezecolumn-icon",menuId:"FreezeColumns",enabled:!x&&!_.isFrozen}),u.push({name:g.unfreezeText,icon:"e-unfreezecolumn-icon",menuId:"UnfreezeColumns",enabled:1==_.isFrozen}),l._checkboxSelection&&d.columns[0].nonColumn?1!=d.columns.indexOf(_)&&d.columns.indexOf(_)>this._frozenColumnsLength&&(y=!0):0!=d.columns.indexOf(_)&&d.columns.indexOf(_)>this._frozenColumnsLength&&(y=!0),w=this._getFrozenColumnWidth(C),w+=18,w>this._gridWidth&&(y=!1),u.push({name:g.freezePrecedingColumnsText,icon:"e-freezecolumnbefore-icon",menuId:"FreezePrecedingColumns",enabled:y})}var S=l.getOffsetRect(h[0]),T=l.getOffsetRect(l.element[0]);n=(l.model.isFromGantt,S.top+m),l._columnChooserListIndex=p;var R=t.buildTag("div.e-columnmenu e-js","",{display:"table",position:"absolute",top:n,"z-index":1e4},{id:l._id+"_ColumnMenu"}),k=t.buildTag("ul.e-treegrid-columnmenu","",{},{}),O=e.render[l._id+"columnMenuTemplate"](u);d.cssClass&&R.addClass(d.cssClass),k.append(O),R.append(k),e(document.body).append(R);var D=(R.height(),R.outerWidth()+1);s=S.left+c-D,s<=T.left&&(s=T.left),a=s+D,r=s+D,l._columnListPosX=a,l._columnFilterPosX=r,l._columnMenuPopupY=n,R.css({left:s}),R.find(".e-columnmenuitem").outerWidth(D);var I=d.isFromGantt?e(this.element).closest(".e-gantt"):e(this.element),j=this.getOffsetRect(I[0]);j.bottom=j.top+I[0].offsetHeight,j.right=j.left+e(I).width(),d.isFromGantt||(l.model.isResponsive&&e(window).width()<=l._responsiveMinWidth?e("#"+l._id+"_ColumnMenu").find(".e-expander").addClass("e-treegridadaptivesubicon"):e("#"+l._id+"_ColumnMenu").find(".e-expander").removeClass("e-treegridadaptivesubicon")),e("#"+l._id+"_ColumnsChooser").on("mouseenter click",function(t){l._showColumnChooser(t,j.right,a,D,n,s,e("#"+l._id+"_ColumnsChooser"))}),e("#"+l._id+"_FilterChooser").on("mouseenter click",function(t){if("mouseenter"==t.type&&e(window).width()>l._responsiveMinWidth||!l.model.isResponsive||"click"==t.type&&e(window).width()<=l._responsiveMinWidth&&l.model.isResponsive){var i,a,h,c;l._updateColumnMenuVisibility(),l._checkFilterType(_),"menu"==d.filterSettings.filterType&&"excel"!=_.filterType||"excel"==d.filterSettings.filterType&&"menu"==_.filterType?(_.filterEditType?(i=_.filterEditType.indexOf("edit"),c=_.filterEditType):(_.editType="edittemplate"==_.editType?"stringedit":_.editType,i=_.editType.indexOf("edit"),c=_.editType),-1!=i?(a=c.slice(0,i),h=a.charAt(0).toUpperCase()+a.slice(1),l._showFilterMenu("columnchooser","filter"+h,r,D,j.right,s,p,o,_,n)):(h=c.charAt(0).toUpperCase()+c.slice(1),l._showFilterMenu("columnchooser","filter"+h,r,D,j.right,s,p,o,_,n)),l._updatePreviousFilteredValue(_),e("#"+l._id+"ccDiv").ejDialog("close")):l._openExcelFilter(_,r,n,j,D)}}),e("#"+l._id+"_SortAscendingChooser,#"+l._id+"_SortDescendingChooser,#"+l._id+"_FreezeColumnsChooser,#"+l._id+"_UnfreezeColumnsChooser,#"+l._id+"_FreezePrecedingColumnsChooser,#"+l._id+"_ColumnLeftChooser,#"+l._id+"_ColumnRightChooser,#"+l._id+"_DeleteColumnChooser,#"+l._id+"_RenameColumnChooser").mouseenter(function(){e("#"+l._id+"ccDiv").ejDialog("close"),!d.allowFiltering||"menu"!=d.filterSettings.filterType&&"excel"!=d.filterSettings.filterType||(l._isCloseFilterMenu=!0,l._clearFilterMenu())}),e("#"+l._id+"_SortAscendingChooser").click(function(){d.allowMultiSorting&&(l._multiSortRequest=!0),d.isFromGantt?l.sortColumn(_.mappingName?_.mappingName:_.field,t.sortOrder.Ascending):l.sortColumn(_.field,t.sortOrder.Ascending),l._multiSortRequest=!1}),e("#"+l._id+"_SortDescendingChooser").click(function(){d.allowMultiSorting&&(l._multiSortRequest=!0),d.isFromGantt?l.sortColumn(_.mappingName?_.mappingName:_.field,t.sortOrder.Descending):l.sortColumn(_.field,t.sortOrder.Descending),l._multiSortRequest=!1}),e("#"+l._id+"_FreezeColumnsChooser").click(function(){e(this).hasClass("e-disable")||(l._checkboxSelection&&d.columns[0].nonColumn&&!d.columns[0].isFrozen&&(d.columns[0].isFrozen=!0),l.freezeColumn(_.field,!0))}),e("#"+l._id+"_UnfreezeColumnsChooser").click(function(){e(this).hasClass("e-disable")||(l._checkboxSelection&&2==l._frozenColumnsLength&&d.columns[0].nonColumn&&d.columns[0].isFrozen&&(d.columns[0].isFrozen=!1),l.freezeColumn(_.field,!1))}),e("#"+l._id+"_FreezePrecedingColumnsChooser").click(function(){e(this).hasClass("e-disable")||l.freezePrecedingColumns(_.field)}),e("#"+l._id+"_ColumnLeftChooser").click(function(){if(e(this).hasClass("e-disable"))return!1;l.insertColumnChooser(_,"left")}),e("#"+l._id+"_ColumnRightChooser").click(function(){if(e(this).hasClass("e-disable"))return!1;l.insertColumnChooser(_,"right")}),e("#"+l._id+"_DeleteColumnChooser").click(function(){if(e(this).hasClass("e-disable"))return!1;l._targetColumnIndex=d.columns.indexOf(_),l._updateConfirmDialog.ejDialog("open"),l._clearColumnMenu()}),e("#"+l._id+"_RenameColumnChooser").click(function(){l._targetColumnIndex=d.columns.indexOf(_),l._renderColumnRenameDialog(_),l._columnRenameDialog.ejDialog("open"),l._clearColumnMenu()});var L=e("#"+l._id+"_ColumnMenu"),A=L.find("div.e-columnmenuitem");A.eq(0).addClass("e-columnmenuselection"),e(A).mouseenter(function(){e(this).hasClass("e-disable")||(A.removeClass("e-columnmenuselection"),e(this).addClass("e-columnmenuselection"))})},_openExcelFilter:function(t,i,s,a,r){var n,o=this,l=o.model,d=e(document).width(),h=t.filterEditType?t.filterEditType:t.editType,c=i;switch(h=h.toLowerCase(),a.right<c+266||d<c+266?c-r-266>0&&(c=c-r-266-2):c+=2,n={X:c,Y:s+e("#"+o._id+"_FilterChooser").position().top},h){case"numericedit":h="number";break;case"stringedit":case"maskedit":case"dropdownedit":h="string";break;case"booleanedit":h="boolean";break;case"datepicker":case"datetimepicker":h=h.replace("picker","")}if(d<=o._responsiveMinWidth&&l.isResponsive&&l.enableResize)o._renderResponsiveExcelFilter(t,h),o._mediaStatus=!0,o._clearColumnMenu();else{-1==e.inArray(h,o._excelColTypes)&&(e("#"+o._id+h+"_excelDlg").remove(),e("#"+o._id+h+"_CustomFDlg_wrapper").remove(),e("#"+o._id+h+"_CustomFDlg").remove(),o._excelFilter._openedFltr=null,o._excelColTypes.push(h),o._excelFilter.renderDialog(h));var u={True:o.localizedLabels.trueText,False:o.localizedLabels.falseText},p=[];e.grep(o.model.flatRecords,function(e){e.isSummaryRow||p.push(e.item)}),o._isCloseFilterMenu=!0,o._excelFilter.openXFDialog({field:t.field,enableResponsiveRow:!0,displayName:t.headerText,dataSource:p,query:"",position:{X:n.X,Y:n.Y},dimension:{height:e(window).height(),width:e(window).width()},cssClass:"resFilter",type:h,format:t.format,localizedStrings:u}),o._isCloseFilterMenu=!1,e("#"+o._id+h+"_CheckBoxList").css("display","inline-block"),o._customFilter=null}e("#"+o._id+"ccDiv").ejDialog("close")},_adaptiveColumnChooser:function(){var t=this,i={},s=t.getOffsetRect(e("#"+t._id)[0]),a=t._columnMenuTexts;if(i.cssClass=t.model.cssClass,i.enableModal=!1,i.enableResize=!1,i.enableResize=!1,i.contentSelector="#"+t._id,i.rtl=t.model.rtl,i.allowDraggable=!1,i.showHeader=!0,i.minHeight="50px",i.minWidth="50px",i.width=e("#"+t._id).width()+"px",i.height=e("#"+t._id).height()+"px",i.position={X:s.left+"px",Y:s.top+"px"},i.isResponsive=!1,i.allowKeyboardNavigation=!1,i.title=a.columnsText,e("#"+t._id+"ccDiv_wrapper").removeClass("e-treegridadaptivedialog"),e("#"+t._id+"ccDiv_wrapper").addClass("e-dialog").addClass("e-shadow").find("div.e-dialog-scroller").css("height","100%"),e("#"+t._id+"ccDiv_wrapper").find("div.e-dialog-scroller").addClass("e-treegridadaptivedialog"),e("#"+t._id+"ccDiv").ejDialog(i),e("#"+t._id+"ccDiv").ejDialog("open"),e("#"+t._id+"ccDiv").css({width:"100%",height:"100%"}),t.model.isResponsive){var r=e("#"+t._id).height()-50+"px";e("#"+t._id+"ccDiv_wrapper").css({width:e("#"+t._id).width(),height:e("#"+t._id).height()}),e("#"+t._id+"ccDiv_wrapper").find("div.e-dialog-scroller").removeClass("e-treegridadaptivedialog"),e("#"+t._id+"ccDiv").css({width:"100%",height:"auto"}),e("#"+t._id+"ccDiv").height()>e("#"+t._id+"ccDiv_wrapper").height()-48?(e("#"+t._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({height:e("#"+t._id).height()-48+"px",width:"auto",padding:"0px"}),e("#"+t._id+"ccDiv").removeClass("e-columnSelector"),e("#"+t._id+"ccDiv").ejDialog("refresh")):(e("#"+t._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({height:r,width:"auto"}),e("#"+t._id+"ccDiv").css({padding:"8px 16px"})),e("#"+t._id+"ccDiv_wrapper").removeClass("e-shadow"),e("#"+t._id+"ccDiv").removeClass("e-shadow")}t._renderedSubMenuType="AdaptiveColChooser",e("#"+t._id+"_ColumnMenu").remove()},_updatePreviousFilteredValue:function(i){var s,a,r,n,o,l,d,h,c,u=this,p=[];if(h=i.filterEditType?i.filterEditType:i.editType,"stringedit"==h&&(s=e("#"+u._id+"filterStringInputBox").data("ejAutocomplete"),a=e("#"+u._id+"filterStringMenuDiv").find("#"+u._id+"filterStringDropDown").data("ejDropDownList"),n=t.Query().select(i.field),r=new t.DataManager(u.model.flatRecords.slice()),o=r.executeLocal(n),s.option("dataSource",o),-1!=u._filteredColumnValueID.indexOf(i.field)?(l=u._filteredColumnValueID.indexOf(i.field),""==u._filteredColumnValue[l].value?a.option("value","startswith"):a.option("value",u._filteredColumnValue[l].dropdown),s.option("value",u._filteredColumnValue[l].value),
e("#"+u._id+"filterStringInputBox").val(u._filteredColumnValue[l].value)):(a.option("value","startswith"),s.option("value",null))),"numericedit"==h&&(s=e("#"+u._id+"filterNumericInputBox").data("ejNumericTextbox"),a=e("#"+u._id+"filterNumericMenuDiv").find("#"+u._id+"filterNumericDropDown").data("ejDropDownList"),-1!=u._filteredColumnValueID.indexOf(i.field)?(l=u._filteredColumnValueID.indexOf(i.field),""==u._filteredColumnValue[l].value?a.option("value","lessthan"):a.option("value",u._filteredColumnValue[l].dropdown),s.option("value",u._filteredColumnValue[l].value),e("#"+u._id+"filterNumericInputBox").val(u._filteredColumnValue[l].value)):(s.option("value",null),a.option("value","lessthan"))),"datepicker"==h&&(s=e("#"+u._id+"filterDatepickerInputBox").data("ejDatePicker"),a=e("#"+u._id+"filterDatepickerMenuDiv").find("#"+u._id+"filterDatepickerDropDown").data("ejDropDownList"),-1!=u._filteredColumnValueID.indexOf(i.field)?(l=u._filteredColumnValueID.indexOf(i.field),""==u._filteredColumnValue[l].value?a.option("value","lessthan"):a.option("value",u._filteredColumnValue[l].dropdown),s.option("value",u._filteredColumnValue[l].value)):(s.option("value",null),a.option("value","lessthan")),i.format&&s.option("dateFormat",u._getDateFormat(i.format))),"datetimepicker"==h&&(s=e("#"+u._id+"filterDatetimepickerInputBox").data("ejDateTimePicker"),a=e("#"+u._id+"filterDatetimepickerMenuDiv").find("#"+u._id+"filterDatetimepickerDropDown").data("ejDropDownList"),-1!=u._filteredColumnValueID.indexOf(i.field)?(l=u._filteredColumnValueID.indexOf(i.field),""==u._filteredColumnValue[l].value?a.option("value","lessthan"):a.option("value",u._filteredColumnValue[l].dropdown),s.option("value",u._filteredColumnValue[l].value)):(s.option("value",null),a.option("value","lessthan")),i.format&&s.option("dateFormat",u._getDateFormat(i.format))),"dropdownedit"==h&&(e.extend(p,i.dropdownData),i.editParams?(d={value:i.editParams.fields.value,text:i.editParams.fields.text},c={},c[i.editParams.fields.text]=u._dropDownListBlanksText,c[i.editParams.fields.value]="(Blanks)"):(d={value:"value",text:"text"},c={text:u._dropDownListBlanksText,value:"(Blanks)"}),a=e("#"+u._id+"filterDropdownDropDown").data("ejDropDownList"),t.isNullOrUndefined(p)||0==p.length?(p=u._dropDownArrayCollection(i,i.field),(i.allowFilteringBlankContent||t.isNullOrUndefined(i.allowFilteringBlankContent))&&p.unshift(c),a.option("dataSource",p)):((i.allowFilteringBlankContent||t.isNullOrUndefined(i.allowFilteringBlankContent))&&p.unshift(c),a.option("dataSource",p)),a.option("fields",d),-1!=u._filteredColumnValueID.indexOf(i.field)?(l=u._filteredColumnValueID.indexOf(i.field),a.option("value",u._filteredColumnValue[l].value)):a.option("value",null)),"booleanedit"==h){var s=e("#"+u._id+"filterBooleanInputBox").data("ejCheckBox");-1!=u._filteredColumnValueID.indexOf(i.field)?(l=u._filteredColumnValueID.indexOf(i.field),""==u._filteredColumnValue[l].value?s.option("checkState","uncheck"):s.option("value",u._filteredColumnValue[l].value)):s.option("selectedIndex","")}},_performMenuFilter:function(e,i,s){var a,r=this;r.clearAllSelection(),a=e.filterEditType?e.filterEditType:e.editType,t.isNullOrUndefined(i)&&(i=""),r._filterString=i,-1==r._filteredColumnValueID.indexOf(e.field)&&""==i.toString()?(r.clearColumnMenu(),r._clearFilterMenu()):(("numericedit"==a||"datepicker"==a||"datetimepicker"==a)&&("datepicker"!=a&&"datetimepicker"!=a||"equal"!=s&&"notequal"!=s)?r.filterColumn(e.field,s,i,"and",!0):r.filterColumn(e.field,s,i,"and"),r.clearColumnMenu(),r._clearFilterMenu(),r._cancelSaveTools())},_storePreviousFilteredValue:function(e,t,i){var s,a=this;-1!=a._filteredColumnValueID.indexOf(e)||""==t.toString()&&"false"!=t.toString()?""!=t.toString()||"false"==t.toString()?(s=a._filteredColumnValueID.indexOf(e),a._filteredColumnValue[s].value=t,a._filteredColumnValue[s].dropdown=i):-1!=a._filteredColumnValueID.indexOf(e)&&(s=a._filteredColumnValueID.indexOf(e),a._filteredColumnValue.splice(s,1),a._filteredColumnValueID.splice(s,1)):(a._filteredColumnValue.push({column:e,value:t,dropdown:i}),a._filteredColumnValueID.push(e))},_showFilterMenu:function(t,i,s,a,r,n,o,l,d,h){if(this.editFormValidate())if(e(window).width()<=this._responsiveMinWidth&&this.model.isResponsive&&!this.model.isFromGantt){var c=this,u={},p=c.getOffsetRect(e("#"+c._id)[0]);u.cssClass=this.model.cssClass,u.enableModal=!1,u.isResponsive=!1,u.enableRTL=this.model.enableRTL,u.enableResize=!1,u.allowDraggable=!1,u.minWidth="50px",u.minHeight="50px",u.width=e("#"+c._id).width()+"px",u.height=e("#"+c._id).height()+"px",u.position={X:p.left+"px",Y:p.top+"px"},u.contentSelector="#"+c._id,u.rtl=c.model.rtl,u.allowKeyboardNavigation=!1,u.showHeader=!0,u.title=d.headerText,e("#"+c._id+i+"MenuDiv").removeClass("e-treegridadaptivedialog"),e("#"+c._id+i+"MenuDiv").ejDialog(u),e("#"+c._id+i+"MenuDiv_wrapper").addClass("e-dialog").addClass("e-shadow").find("div.e-dialog-scroller").addClass("e-treegridadaptivewidth"),e("#"+c._id+i+"MenuDiv").css({width:"100%",height:"auto"});var m=e("#"+c._id).height()-50+"px";e("#"+c._id+i+"MenuDiv").ejDialog("open"),e("#"+c._id+i+"MenuDiv_wrapper").find("div.e-dialog-scroller").css({height:m}),e("#"+c._id+i+"MenuDiv_wrapper").removeClass("e-shadow"),e("#"+c._id+i+"MenuDiv").removeClass("e-shadow"),e("#"+c._id+i+"MenuDiv").height()>e("#"+c._id+i+"MenuDiv_wrapper").height()-48&&e("#"+c._id+i+"MenuDiv").ejDialog("refresh"),c._renderedSubMenuType="#"+c._id+i+"MenuDiv",e("#"+c._id+"_ColumnMenu").remove()}else{var c=this,u={};u.width="auto",u.height="auto",u.minWidth="0px",u.minHeight="0px",u.showHeader=!1,u.position={X:1,Y:1},u.enableModal=!1,u.isResponsive=!1,u.enableResize=!1,u.cssClass=this.model.cssClass,e("#"+c._id+i+"MenuDiv_wrapper").removeClass("e-dialog").removeClass("e-shadow").find("div.e-dialog-scroller").css("height","100%").removeClass("e-widget-content"),e("#"+c._id+i+"MenuDiv").ejDialog(u);var g,f,_;if(g=e("#"+c._id+i+"MenuDiv").ejDialog("instance"),f=e("#"+c._id+i+"MenuDiv_wrapper"),"columnchooser"==t){var v=e(document).width();(r<s+f.width()||v<s+f.width())&&s-a-f.width()>0&&(s=s-a-f.width()),_={X:s,Y:h+e("#"+c._id+"_FilterChooser").position().top},g.option({position:_}),g.open()}else if(t="filtermenu"){var b=s,x=a;n=b.left+x-f.width(),b.left=n+f.width()+4,r<b.left+f.width()&&(b.left=b.left-f.width()-x),_={X:b.left,Y:b.top},g.option({position:_}),g.open()}c._renderedSubMenuType="#"+c._id+i+"MenuDivDesktop"}},_clearResponsiveColumnMenu:function(){var t=this;e("div[id$='ccDiv']").each(function(){"TreeGrid"==e(this).data("columnMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("#"+t._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({padding:"0px"}),e("#"+t._id+"ccDiv").addClass("e-columnSelector"),e("div[id$='filterStringMenuDiv']").each(function(){"TreeGrid"==e(this).data("filterStringMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("div[id$='filterNumericMenuDiv']").each(function(){"TreeGrid"==e(this).data("filterNumericMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("div[id$='filterBooleanMenuDiv']").each(function(){"TreeGrid"==e(this).data("filterBooleanMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("div[id$='filterDatepickerMenuDiv']").each(function(){"TreeGrid"==e(this).data("filterDatepickerMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("div[id$='filterDatetimepickerMenuDiv']").each(function(){"TreeGrid"==e(this).data("filterDatetimepickerMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("div[id$='filterDropdownMenuDiv']").each(function(){"TreeGrid"==e(this).data("filterDropdownMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("div[id$='ColumnRenameDialog']").each(function(){e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("div[id$='dialogColumnAdd']").each(function(){e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("#"+t._id).find(".e-filtericon").data("isClicked",!1)},_clearColumnMenu:function(t){var i=this,s=i.model;"columnmenu"===t&&e(window).width()<i._responsiveMinWidth&&i._clearResponsiveColumnMenu(),s.isResponsive&&e(window).width()<i._responsiveMinWidth?(e("#"+i._id+"_ColumnMenu").remove(),i._renderedSubMenuType&&-1==i._renderedSubMenuType.indexOf("AdaptiveColChooser")&&(e("div[id$='"+i._id+"ccDiv']").each(function(){"TreeGrid"==e(this).data("columnMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("#"+i._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({padding:"0px"}),e("#"+i._id+"ccDiv").addClass("e-columnSelector"))):(e("#"+i._id+"_ColumnMenu").remove(),"resize"!=t&&(e("div[id$='"+i._id+"ccDiv']").each(function(){"TreeGrid"==e(this).data("columnMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("#"+i._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({padding:"0px"}),e("#"+i._id+"ccDiv").addClass("e-columnSelector"),"resize"!=t&&"cancelHandler"!=t&&(!s.allowFiltering||"menu"!=s.filterSettings.filterType&&"excel"!=s.filterSettings.filterType||i._clearFilterMenu()))),e("#"+i._id).find(".e-columnicon").data("isClicked",!1),e("#"+i._id).find(".e-filtericon").data("isClicked",!1)},_clearFilterMenu:function(){var t=this;if(t.model.allowFiltering){e("div[id$='"+t._id+"filterStringMenuDiv']").each(function(){"TreeGrid"==e(this).data("filterStringMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("div[id$='"+t._id+"filterNumericMenuDiv']").each(function(){"TreeGrid"==e(this).data("filterNumericMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("div[id$='"+t._id+"filterBooleanMenuDiv']").each(function(){"TreeGrid"==e(this).data("filterBooleanMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("div[id$='"+t._id+"filterDatepickerMenuDiv']").each(function(){"TreeGrid"==e(this).data("filterDatepickerMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("div[id$='"+t._id+"filterDatetimepickerMenuDiv']").each(function(){"TreeGrid"==e(this).data("filterDatetimepickerMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("div[id$='"+t._id+"filterDropdownMenuDiv']").each(function(){"TreeGrid"==e(this).data("filterDropdownMenuDialog")&&e(this).data("ejDialog")&&e(this).ejDialog("close")}),e("#"+t._id+"filterStringDropDown_popup_list_wrapper").hide(),e("#"+t._id+"filterStringInputBox_suggestion").hide(),e("#"+t._id+"filterNumericDropDown_popup_list_wrapper").hide(),e("#"+t._id+"filterNumericInputBox_suggestion").hide(),e("#"+t._id+"filterDatepickerDropDown_popup_list_wrapper").hide(),e("#"+t._id+"filterDatepickerInputBox_suggestion").hide(),e("#"+t._id+"filterDatetimepickerDropDown_popup_list_wrapper").hide(),e("#"+t._id+"filterDatetimepickerInputBox_suggestion").hide(),e("#"+t._id+"filterDropdownDropDown_popup_list_wrapper").hide(),e("#"+t._id).find(".e-filtericon").data("isClicked",!1);var i=e("#"+t._id+"filterDatetimepickerInputBox").data("ejDateTimePicker");i&&i.hide();var s=e("#"+t._id+"filterDatepickerInputBox").data("ejDatePicker");s&&s.hide(),t._isExcelFilter&&(t._excelFilter.closeXFDialog(),t._mediaStatus=!1)}},_getDateFormat:function(e){return new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(e)[2]},_enableDisableDEL:function(e){var t=this,i=t.model,s=e.field,a=i.columns.indexOf(e);return i.isFromGantt?!("taskId"==s||"serialNumber"==s||"taskName"==s||"startDate"==s||"endDate"==s||"duration"==s&&!i.endDateMapping||a==i.treeColumnIndex):a!=i.treeColumnIndex},_enableDisableInsertLabel:function(){var e=this;if(!e.model.isFromGantt&&e._frozenColumnsLength>0){var t=this._getFrozenColumnWidth();return!((t+=250)>this._gridWidth)}return!0},insertColumnChooser:function(i,s){var a=this,r=a.model;if(0===e("#"+a._id+"_dialogColumnAdd").length){var n=t.buildTag("div.e-dialog e-dialog-content e-widget-content","",{display:"none"},{id:a._id+"_dialogColumnAdd"});a.element.append(n),a._on(e("#"+a._id+"_dialogColumnAdd"),"click keypress","#ColumnAddDialog_"+a._id+"_Ok ,#ColumnAddDialog_"+a._id+"_Cancel",a._buttonClick)}a.renderColumnAddDialog(),a._targetColumnIndex=r.columns.indexOf(i),a._insertPosition=s},renameColumn:function(e,t){var i=this,s=i.model,a=s.columns,r={};r.requestType="renameColumn",r.columnObject=a[e],r.previousName=a[e].headerText,r.currentName=t,i._trigger("actionComplete",r)||(a[e].headerText=t,i._refreshFrozenColumns()),i._updateWrapRowHeights(),(s.allowTextWrap||"wrap"==s.headerTextOverflow)&&i._updateGridContentHeight()},_renderColumnRenameDialog:function(i){var s=this,a=s._columnMenuTexts,r=t.buildTag("div.e-treegridrenamedialog","",{},{"data-unselectable":"on"}),n=e("#"+s._id).width(),o=e("#"+s._id).height(),l=t.buildTag("form","",{height:"100%",width:"100%","font-size":"14px"},{id:s._id+"ColumnRenameForm",onsubmit:"return false"}),d=t.buildTag("span.e-buttons","<input class='e-treegrid-rename-dialog-btn-ok' type='button' id="+s._id+"RenameDialogOK value="+s._okButtonText+" /> <input class='e-treegrid-rename-dialog-btn-cancel' type='button' id="+s._id+"RenameDialogCancel value='"+s._cancelButtonText+"' />"),h=t.buildTag("div","",{},{class:"e-treegrid-rename-dialog-btn"}),c=t.buildTag("table","",{outline:"none",width:"100%","margin-top":"0px"},{"data-unselectable":"on"}),u=t.buildTag("tr"),p=t.buildTag("td.e-editLabel","",{outline:"none"},{"data-unselectable":"on"});p.append("<label style='font-weight:normal;'>"+s._columnDialogTitle.renameColumn+"</label>"),u.append(p),c.append(u);var m=t.buildTag("tr"),g=t.buildTag("td.e-editValue"),f=t.buildTag("input.e-field e-ejinputtext","",{},{value:i.headerText,id:s._id+"RenameHeaderText",name:i.field,"data-dialog":"RenameHeaderText"});if(f.css({margin:"0px",padding:"1px 4px 1px 0px"}),g.html(f),m.append(g),c.append(m),l.append(c),r.append(l),s._columnRenameDialog=t.buildTag("div","","",{title:a.renameColumn,id:s._id+"ColumnRenameDialog"}),h.append(d),s._columnRenameDialog.append(r).append(h),s.element.append(s._columnRenameDialog),d.find("input").ejButton({cssClass:s.model.cssClass,showRoundedCorner:!0,size:"normal",click:e.proxy(s._triggerRenameColumn,s)}),e(window).width()<=s._responsiveMinWidth&&s.model.isResponsive&&!s.model.isFromGantt){if(s.model.isResponsive){var _=s.getOffsetRect(e("#"+s._id)[0]);e("#"+s._id+"ColumnRenameDialog").removeClass("e-treegridadaptivedialog"),s._columnRenameDialog.ejDialog({width:n+"px",height:o+"px",position:{X:_.left+"px",Y:_.top+"px"},minHeight:"50px",minWidth:"50px",showOnInit:!1,allowDraggable:!1,enableResize:!1,enableModal:!1,isResponsive:!1,cssClass:this.model.cssClass}),e("#"+s._id+"ColumnRenameDialog_wrapper").removeClass("e-shadow").addClass("e-treegrid-dialog"),e("#"+s._id+"ColumnRenameDialog").removeClass("e-shadow")}}else s._columnRenameDialog.ejDialog({width:"auto",height:"auto",minHeight:0,minWidth:240,showOnInit:!1,enableResize:!1,allowDraggable:!0,enableModal:!0,isResponsive:!0,cssClass:this.model.cssClass}),e("#"+s._id+"ColumnRenameDialog_wrapper").addClass("e-treegrid-dialog");f.focus().select()},_triggerRenameColumn:function(e){var i,s,a=this;void 0!==e&&e.model.text==a._okButtonText&&(i=a._columnRenameDialog.find("#"+a._id+"RenameHeaderText"),s=i.val(),a.renameColumn(a._targetColumnIndex,s),this.model.editSettings.allowEditing&&"dialogEditing"==this.model.editSettings.editMode&&(t.isNullOrUndefined(a.model.editSettings.dialogEditorTemplateID)||""==a.model.editSettings.dialogEditorTemplateID)?a._treeGridAddEditDialog():this.model.editSettings.allowEditing&&"dialogEditing"==this.model.editSettings.editMode&&!t.isNullOrUndefined(a.model.editSettings.dialogEditorTemplateID)&&""!=a.model.editSettings.dialogEditorTemplateID&&a._treeGridAddEditDialogTemplate()),a._columnRenameDialog.ejDialog("close")},renderColumnAddDialog:function(){var t=this,i=t.model,s=i.columnDialogFields,a={},r=t.getOffsetRect(e("#"+t._id)[0]);if(a.requestType="openColumnAddDialog",s.length){a.data={};for(var n=0;n<s.length;n++){var o=s[n];a.data[o]=""}}else a.data={field:"",headerText:"",editType:""};if(!t._trigger("actionBegin",a)){a.requestType="columnAdd";var l=document.createElement("div");e(l).addClass("e-addedColumn"),l.innerHTML=e.render[t._id+"_ColumnAddTemplate"](a.data),e("#"+t._id+"_dialogColumnAdd").html(e(l));var d={};d.cssClass=this.model.cssClass,d.enableResize=!1,d.width="auto",d.height="auto",d.contentSelector="#"+t._id,d.rtl=t.model.rtl,d.allowKeyboardNavigation=!1;var h=t._columnDialogTitle.insertColumn;d.title=h,(e(window).width()>t._responsiveMinWidth||!t.model.isResponsive||t.model.isFromGantt)&&(d.enableModal=!0,d.allowDraggable=!0,d.isResponsive=!0,e("#"+t._id+"_dialogColumnAdd").ejDialog(d),e("#"+t._id+"_dialogColumnAdd").addClass("e-treegridadaptivedialog"),e("#"+t._id+"_dialogColumnAdd_wrapper").addClass("e-treegridadaptivedialog e-treegrid-dialog"),e("#"+t._id+"_dialogColumnAdd_wrapper").find("div.e-dialog-scroller").addClass("e-treegridadaptivedialog"),e("#"+t._id+"_dialogColumnAdd").ejDialog("open"),e("#"+t._id+"_dialogColumnAdd").find(".e-dropdowntreegrid").css("width","438px")),e(window).width()<=t._responsiveMinWidth&&t.model.isResponsive&&!t.model.isFromGantt&&(d.isResponsive=!1,d.enableResize=!1,d.enableModal=!1,d.allowDraggable=!1,d.width=e("#"+t._id).width()+"px",d.height=e("#"+t._id).height()+"px",d.minHeight="150px",d.minWidth="150px",e("#"+t._id+"_dialogColumnAdd").removeClass("e-treegridadaptivedialog"),e("#"+t._id+"_dialogColumnAdd").find(".e-dropdowntreegrid").css({width:e("#"+t._id).width()-80+"px",height:"150px"}),e("#"+t._id+"_dialogColumnAdd").ejDialog(d),e("#"+t._id+"_dialogColumnAdd").ejDialog("open"),e("#"+t._id+"_dialogColumnAdd_wrapper").removeClass("e-treegridadaptivedialog").addClass("e-treegrid-dialog"),e("#"+t._id+"_dialogColumnAdd_wrapper").find("div.e-dialog-scroller").removeClass("e-treegridadaptivedialog"),e("#"+t._id+"_dialogColumnAdd_wrapper").css({left:r.left+"px",top:r.top+"px"}),e("#"+t._id+"_dialogColumnAdd_wrapper").removeClass("e-shadow"),e("#"+t._id+"_dialogColumnAdd").removeClass("e-shadow"),e("#"+t._id+"_dialogColumnAdd_wrapper").find("div.e-dialog-scroller").css({height:e("#"+t._id).height()-50+"px"})),t._clearColumnMenu(),t._refreshColumnAddForm(),e("#"+t._id+"_dialogColumnAdd").ejDialog("refresh")}},setAddColumnFields:function(){var t=this,i=t.model;if(i.columnDialogFields.length){t._addColumnFields=i.columnDialogFields;for(var s=["field","headerText","editType"],a=0;a<s.length;a++)if(-1==e.inArray(s[a],t._addColumnFields))switch(s[a]){case"field":t._addColumnFields.splice(0,0,s[a]);break;case"headerText":t._addColumnFields.splice(1,0,s[a]);break;case"editType":t._addColumnFields.splice(2,0,s[a])}i.isFromGantt?(i.allowSorting||-1==t._addColumnFields.indexOf("allowSorting")||t._addColumnFields.splice(t._addColumnFields.indexOf("allowSorting"),1),"row"==i.selectionSettings.selectionMode&&-1!=t._addColumnFields.indexOf("allowCellSelection")&&t._addColumnFields.splice(t._addColumnFields.indexOf("allowCellSelection"),1)):(i.allowSorting||-1==t._addColumnFields.indexOf("allowSorting")||t._addColumnFields.splice(t._addColumnFields.indexOf("allowSorting"),1),i.allowFiltering||-1==t._addColumnFields.indexOf("allowFiltering")||t._addColumnFields.splice(t._addColumnFields.indexOf("allowFiltering"),1),"row"==i.selectionSettings.selectionMode&&-1!=t._addColumnFields.indexOf("allowCellSelection")&&t._addColumnFields.splice(t._addColumnFields.indexOf("allowCellSelection"),1)),-1!=t._addColumnFields.indexOf("displayAsCheckbox")&&t._addColumnFields.push(t._addColumnFields.splice(t._addColumnFields.indexOf("displayAsCheckbox"),1)[0]),t._addColumnFieldsTxt=[];for(var a=0;a<t._addColumnFields.length;a++)switch(t._addColumnFields[a]){case"field":t._addColumnFieldsTxt.push(t._columnDialogTexts.field);break;case"headerText":t._addColumnFieldsTxt.push(t._columnDialogTexts.headerText);break;case"editType":t._addColumnFieldsTxt.push(t._columnDialogTexts.editType);break;case"filterEditType":t._addColumnFieldsTxt.push(t._columnDialogTexts.filterEditType);break;case"allowFiltering":t._addColumnFieldsTxt.push(t._columnDialogTexts.allowFiltering);break;case"allowFilteringBlankContent":t._addColumnFieldsTxt.push(t._columnDialogTexts.allowFilteringBlankContent);break;case"allowSorting":t._addColumnFieldsTxt.push(t._columnDialogTexts.allowSorting);break;case"visible":t._addColumnFieldsTxt.push(t._columnDialogTexts.visible);break;case"width":t._addColumnFieldsTxt.push(t._columnDialogTexts.width);break;case"textAlign":t._addColumnFieldsTxt.push(t._columnDialogTexts.textAlign);break;case"headerTextAlign":t._addColumnFieldsTxt.push(t._columnDialogTexts.headerTextAlign);break;case"isFrozen":t._addColumnFieldsTxt.push(t._columnDialogTexts.isFrozen);break;case"allowFreezing":t._addColumnFieldsTxt.push(t._columnDialogTexts.allowFreezing);break;case"allowCellSelection":t._addColumnFieldsTxt.push(t._columnDialogTexts.allowCellSelection);break;case"showInColumnChooser":t._addColumnFieldsTxt.push(t._columnDialogTexts.showInColumnChooser);break;case"clipMode":t._addColumnFieldsTxt.push(t._columnDialogTexts.clipMode);break;case"tooltip":t._addColumnFieldsTxt.push(t._columnDialogTexts.tooltip);break;case"headerTooltip":t._addColumnFieldsTxt.push(t._columnDialogTexts.headerTooltip);break;case"displayAsCheckbox":t._addColumnFieldsTxt.push(t._columnDialogTexts.displayAsCheckbox);break;case"priority":t._addColumnFieldsTxt.push(t._columnDialogTexts.priority)}}else t._addColumnFields=["field","headerText","editType"],t._addColumnFieldsTxt=[t._columnDialogTexts.field,t._columnDialogTexts.headerText,t._columnDialogTexts.editType]},setColumnCelEditType:function(e){var i,s=this,a=s.model;a.columns;return"field"==e||"filterEditType"==e||"editType"==e||"textAlign"==e||"headerTextAlign"==e||"clipMode"==e?i=t.buildTag("input.e-field e-dropdownlist","",{},{value:"{{:#data['"+e+"']}}",id:s._id+e+"ColumnAdd",name:e,"data-dialog":"ColumnAdd"}):"headerText"==e||"tooltip"==e||"headerTooltip"==e?(i=t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:#data['"+e+"']}}",id:s._id+e+"ColumnAdd",name:e,"data-dialog":"ColumnAdd"}),i.css({margin:"0px",padding:"1px 4px 1px 0px"})):"allowFiltering"==e||"allowSorting"==e||"isFrozen"==e||"allowFreezing"==e?i=' <input type ="checkbox" id="'+s._id+e+'ColumnAdd" data-dialog ="ColumnAdd" name="'+e+'" data-edittype="booleanedit">':"allowFilteringBlankContent"==e||"visible"==e?i=' <input type ="checkbox" id="'+s._id+e+'ColumnAdd" data-dialog = "ColumnAdd" checked = "checked" name="'+e+'" data-edittype="booleanedit">':"allowCellSelection"==e?i=' <input type ="checkbox" id="'+s._id+e+'ColumnAdd" data-dialog = "ColumnAdd" checked = "checked" name="'+e+'" data-edittype="booleanedit">':"showInColumnChooser"==e||"displayAsCheckbox"==e?i=' <input type ="checkbox" id="'+s._id+e+'ColumnAdd" data-dialog = "ColumnAdd" checked = "checked" name="'+e+'" data-edittype="booleanedit">':"width"!=e&&"priority"!=e||(i=t.buildTag("input.e-numerictextbox e-field","",{},{type:"text",value:"{{:#data['"+e+"']}}",id:s._id+e+"ColumnAdd",name:e,"data-dialog":"ColumnAdd"}),i.attr("data-edittype","numericedit"),i.css({margin:"0px",padding:"1px 4px 1px 0px"})),i},columnAddDialogTemplate:function(){var i,s=this,a=s.model,r=a.columns,n=r.length;if(0!=n){s.setAddColumnFields();for(var o,l,d,h,c,u,p=t.buildTag("div","",{},{"data-unselectable":"on"}),m=t.buildTag("form","",{height:"100%",width:"100%","font-size":"14px"},{id:s._id+"ColumnAddForm"}),g=t.buildTag("table","",{width:"100%","margin-top":"0px"},{"data-unselectable":"on"}),f=t.buildTag("tr","",{width:"100%"}),_=0;_<s._addColumnFields.length;_++)f.children("td").length<2?(o=t.buildTag("td.e-add-property-container","",{},{"data-unselectable":"on"}),l=t.buildTag("table","",{width:"100%",outline:"none","margin-top":"0px"},{"data-unselectable":"on"}),d=t.buildTag("tr"),h=t.buildTag("td.e-editLabel","",{outline:"none"},{"data-unselectable":"on"}),h.append("<label style='font-weight:normal;'>"+s._addColumnFieldsTxt[_]+"</label>"),d.append(h),l.append(d),c=t.buildTag("tr"),u=t.buildTag("td.e-editValue"),i=s.setColumnCelEditType(s._addColumnFields[_]),u.html(i),c.append(u),l.append(c),"displayAsCheckbox"==s._addColumnFields[_]&&l.addClass("e-display-checkbox-conatiner").css("display","none"),o.append(l),f.append(o)):(g.append(f),f=t.buildTag("tr"),_--);g.append(f);var v,b,x=t.buildTag("tr");if(a.showColumnChooser){if(o=t.buildTag("td.e-add-property-container","",{},{colspan:2,"data-unselectable":"on"}),l=t.buildTag("table#"+s._id+"dropdownDataTable","",{width:"100%",outline:"none"},{"data-unselectable":"on"}),v=t.buildTag("tr"),b=t.buildTag("td.e-editLabel","",{outline:"none"},{"data-unselectable":"on"}),b.append("<label for='dropdownData' style='font-weight:normal;'>"+s._columnDialogTexts.columnsDropdownData+"</label>"),v.append(b),l.append(v),d=t.buildTag("tr"),h=t.buildTag("td.e-editLabel","",{outline:"none"},{"data-unselectable":"on"}),h.append("<span class='e-addpre e-icon e-enable e-add-dialog' style='cursor:pointer; width: auto;'>"+s._columnDialogTexts.addData+"</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='e-deletepre e-icon e-disable e-add-dialog' style='cursor:pointer; width: auto;'>&nbsp;&nbsp;"+s._columnDialogTexts.deleteData+"</span>"),d.append(h),l.append(d),c=t.buildTag("tr"),u=t.buildTag("td.e-editValue"),e("#"+s._id).width()<=s._responsiveMinWidth){var y=e("#"+s._id).width()-80+"px";b=t.buildTag("div.e-dropdowntreegrid","",{width:y,overflow:"hidden"})}else b=t.buildTag("div.e-dropdowntreegrid","",{width:"438px",overflow:"hidden"});var w=t.buildTag("div#treegrid"+s._id+"dropdownData","",{width:"100%",height:"150px"},{});b.append(w),u.append(b),c.append(u),l.append(c),o.append(l),x.append(o),g.append(x)}m.append(g),p=s.renderColumnAddDialogButton(m,p),e.templates(s._id+"_ColumnAddTemplate",p.html())}},renderColumnAddDialogButton:function(e,i){var s="ColumnAddDialog_",a=this,r=a.model,n=t.buildTag("div.e-add-dialog-btn-ok","",{},{}),o=t.buildTag("div","",{},{}),l=t.buildTag("input","",{"border-radius":"3px"},{type:"button",id:s+a._id+"_Ok"}),d=a._okButtonText;l.ejButton({cssClass:r.cssClass,text:d,width:"100%"});var h=t.buildTag("div.e-add-dialog-btn-cancel","",{},{}),c=t.buildTag("div","",{},{}),u=a._cancelButtonText,p=t.buildTag("input","",{"border-radius":"3px"},{type:"button",id:s+a._id+"_Cancel"});p.ejButton({cssClass:r.cssClass,text:u,width:"100%"});var m=t.buildTag("div","",{},{class:"e-treegrid-add-btn"});return o.append(l),n.append(o),m.append(n),c.append(p),h.append(c),m.append(h),e.appendTo(i),m.appendTo(i),i},_buttonClick:function(i){if(0!=i.keyCode&&void 0!==i.keyCode&&13!=i.keyCode)return!0;var s,a,r,n=this,o=n.model,l=o.treeColumnIndex,d=!1,h={},c=n._addColumnFields,u=o.columns,p={};if(i.target.id=="ColumnAddDialog_"+n._id+"_Ok"){for(var m,g=document.getElementById(n._id+"ColumnAddForm"),f=0;f<c.length;f++){var _=c[f];if(s=e(g).find("#"+n._id+_+"ColumnAdd"),"editType"==_||"filterEditType"==_||"textAlign"==_||"headerTextAlign"==_||"clipMode"==_){if(m=s.data("ejDropDownList"),h[_]=m._selectedValue,"editType"==_&&"dropdownedit"==h[_]){var v=e(g).find("#treegrid"+n._id+"dropdownData"),b=v.data("ejTreeGrid"),x=b.model.dataSource;x.length>0&&(h.dropdownData=x)}}else if("showInColumnChooser"==_||"allowCellSelection"==_||"allowSorting"==_||"allowFiltering"==_||"allowFilteringBlankContent"==_||"visible"==_||"isFrozen"==_||"allowFreezing"==_||"displayAsCheckbox"==_){var y=s.data("ejCheckBox");h[_]=y._isChecked}else""!=s.val()||"headerText"!=_&&"field"!=_?h[_]="priority"==_?s.ejNumericTextbox("getValue"):s.val():"field"==_?h[_]="Column"+(o.columns.length+1):"headerText"==_&&(h[_]="Column "+(o.columns.length+1))}"left"==n._insertPosition?a=n._targetColumnIndex:"right"==n._insertPosition&&(a=n._targetColumnIndex+1),a<=l&&(o.treeColumnIndex=l+1),o.isFromGantt||a<=n._frozenColumnsLength-1&&(d=!0);var w={};if(w=o.isFromGantt?{field:h.field,headerText:h.headerText,editType:h.editType,allowSorting:t.isNullOrUndefined(h.allowSorting)?null:h.allowSorting,visible:0!=h.visible,width:h.width?h.width:150,textAlign:h.textAlign?h.textAlign:"left",headerTextAlign:h.headerTextAlign?h.headerTextAlign:"left",dropdownData:h.dropdownData?h.dropdownData:null,allowCellSelection:t.isNullOrUndefined(h.allowCellSelection)?null:h.allowCellSelection,mappingName:h.field,displayAsCheckbox:0!=h.displayAsCheckbox,clipMode:h.clipMode?h.clipMode:"clip",tooltip:h.tooltip,headerTooltip:h.headerTooltip}:{field:h.field,headerText:h.headerText,editType:h.editType,filterEditType:h.filterEditType?h.filterEditType:"stringedit",allowFiltering:t.isNullOrUndefined(h.allowFiltering)?null:h.allowFiltering,allowFilteringBlankContent:t.isNullOrUndefined(h.allowFilteringBlankContent)?null:h.allowFilteringBlankContent,allowSorting:t.isNullOrUndefined(h.allowSorting)?null:h.allowSorting,visible:0!=h.visible,width:h.width?h.width:150,textAlign:h.textAlign?h.textAlign:"left",headerTextAlign:h.headerTextAlign?h.headerTextAlign:"left",clipMode:h.clipMode?h.clipMode:"clip",tooltip:h.tooltip,headerTooltip:h.headerTooltip,isFrozen:1==h.isFrozen||1==d,allowFreezing:t.isNullOrUndefined(h.allowFreezing)?null:h.allowFreezing,dropdownData:h.dropdownData?h.dropdownData:null,allowCellSelection:t.isNullOrUndefined(h.allowCellSelection)?null:h.allowCellSelection,showInColumnChooser:0!=h.showInColumnChooser,displayAsCheckbox:0!=h.displayAsCheckbox,priority:h.priority?h.priority:""},p.requestType="insertColumn",p.columnObject=w,p.insertIndex=a,n._trigger("actionComplete",p)||(u.splice(p.insertIndex,0,p.columnObject),n._refreshFrozenColumns(),n._updateWrapRowHeights(null,"virtualRefresh"),o.isFromGantt&&n._updateAddEditDialogTemplate()),e("#"+n._id+"_dialogColumnAdd").ejDialog("close"),o.allowFiltering&&"menu"==o.filterSettings.filterType){r=p.columnObject.filterEditType?p.columnObject.filterEditType:p.columnObject.editType;-1==n._renderedFilterMenuDialog.indexOf(r)&&n._renderFilterMenu(r)}this.model.editSettings.allowEditing&&"dialogEditing"==this.model.editSettings.editMode&&(t.isNullOrUndefined(o.editSettings.dialogEditorTemplateID)||""==o.editSettings.dialogEditorTemplateID)?n._treeGridAddEditDialog():this.model.editSettings.allowEditing&&"dialogEditing"==this.model.editSettings.editMode&&!t.isNullOrUndefined(o.editSettings.dialogEditorTemplateID)&&""!=o.editSettings.dialogEditorTemplateID&&n._treeGridAddEditDialogTemplate()}else i.target.id=="ColumnAddDialog_"+n._id+"_Cancel"&&e("#"+n._id+"_dialogColumnAdd").ejDialog("close");if("dialogEditing"==this.model.editSettings.editMode||"batchediting"==o.editSettings.editMode.toLowerCase()&&"dialog"==o.editSettings.batchEditSettings.editMode)if(i.target.id=="EditFormDialog_"+this._id+"_Save"){if(!n.editFormValidate())return!0;this.element.find(".e-dialogaddrow .e-treegridform").length>0?(n.model.allowSelection&&"multiple"==n.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&n._clearMultiSelectPopup(),n._treegridDialogAddRow()&&(n._isTreeAddEditDialogSave=!0,e("#"+this._id+"_dialogEdit").ejDialog("close"))):this.element.find(".e-dialogeditedrow .e-treegridform").length>0&&(n.endEdit()||(n._isTreeAddEditDialogSave=!0,e("#"+this._id+"_dialogEdit").ejDialog("close")))}else i.target.id=="EditFormDialog_"+this._id+"_Cancel"&&e("#"+this._id+"_dialogEdit").ejDialog("close");return!1},_treegridDialogAddRow:function(){for(var e,i=this,s=i.model.columns,a={},r=0;r<s.length;r++){var n=s[r],o=n.field;if(!t.isNullOrUndefined(n)&&""!=o&&!i._isCommandColumn(n)){if(i._checkboxSelection&&n.nonColumn)continue;e=i.getCurrentEditCellDataForRowEdit(o,n.editType,r),e=t.isNullOrUndefined(e)||n.editType==t.TreeGrid.EditingType.Numeric&&isNaN(e)?null:e,-1!=o.indexOf(".")?t.createObject(o,e,a):a[o]=e}}return!!i._addRecord(a,i.model.editSettings.rowPosition,null,"dialog")},_refreshColumnAddForm:function(){var i,s,a,r,n,o,l=this,d=e("#"+l._id+"ColumnAddForm"),h=d.find("input,select"),c=0,u=!1,p=h.length,m=l.model,g={},f=[],_=(l.model.rowHeight,l._editTypeText),v=l._textAlignTypeText,b=l._clipModeText
;for(c;c<p;c++){if(i=h.eq(c),s="100%",r=i.prop("name"),i.hasClass("e-dropdownlist")){if("field"==r){var x=[],y=[];m.columns.length&&(f=e.map(m.columns,function(e){return m.isFromGantt&&e.mappingName?e.mappingName:e.field})),l._dataSourcefields.length||(l._dataSourcefields=e.extend(!0,[],f),l.getAllDataSourceFields());for(var w=0;w<l._dataSourcefields.length;w++)-1==e.inArray(l._dataSourcefields[w],f)&&l._dataSourcefields[w]!=m.notesMapping&&(m.isFromGantt&&"serialNumber"!=l._dataSourcefields[w]||!m.isFromGantt)&&y.push(l._dataSourcefields[w]);for(var C=0;C<y.length;C++)x.push({text:y[C]});i.ejDropDownList({width:s,cssClass:m.cssClass,dataSource:x,fields:{text:"text",value:"text"}})}else if("editType"==r||"filterEditType"==r){var x=[{text:_.string,value:"stringedit"},{text:_.numeric,value:"numericedit"},{text:_.datePicker,value:"datepicker"},{text:_.dateTimePicker,value:"datetimepicker"},{text:_.dropdown,value:"dropdownedit"},{text:_.boolean,value:"booleanedit"}];i.ejDropDownList({width:s,dataSource:x,cssClass:m.cssClass,fields:{text:"text",value:"value"},selectedIndex:0,change:function(t){var i=!1;1==e(o).is(":hidden")&&"dropdownedit"==t.value?(e(o).attr("hidden",!1),i=!0):0==e(o).is(":hidden")&&"dropdownedit"!=t.value&&(e(o).attr("hidden",!0),i=!0);var s=e("#"+l._id+"_dialogColumnAdd").find(".e-display-checkbox-conatiner");"booleanedit"==t.value&&s.length>0&&"none"==s.css("display")?(s.css("display","block"),i=!0):"booleanedit"!=t.value&&s.length>0&&"block"==s.css("display")&&(s.css("display","none"),i=!0),i&&e("#"+l._id+"_dialogColumnAdd").ejDialog("refresh")}})}else if("textAlign"==r||"headerTextAlign"==r){var S=[{text:v.left,value:"left"},{text:v.right,value:"right"},{text:v.center,value:"center"}];i.ejDropDownList({width:s,dataSource:S,cssClass:m.cssClass,fields:{text:"text",value:"value"},selectedIndex:0})}else if("clipMode"==r){var T=[{text:b.clip,value:"clip"},{text:b.ellipsis,value:"ellipsis"}];i.ejDropDownList({width:s,dataSource:T,cssClass:m.cssClass,fields:{text:"text",value:"value"},selectedIndex:0})}}else if(i.hasClass("e-numerictextbox"))a=i.val(),g.width=s,g.showSpinButton=!0,g.cssClass=m.cssClass,"width"==r?(g.maxValue=250,g.minValue=30,a.length?g.value=parseFloat(a):g.value=150):"priority"==r&&(g.maxValue=6,g.minValue=1,a.length?g.value=parseFloat(a):g.value=null),i.ejNumericTextbox(g);else if("showInColumnChooser"==r||"allowCellSelection"==r||"allowFiltering"==r||"allowFilteringBlankContent"==r||"allowSorting"==r||"visible"==r||"isFrozen"==r||"allowFreezing"==r||"displayAsCheckbox"==r){var R={};R.cssClass=m.cssClass,R.size="small",i.ejCheckBox(R)}i.is(":disabled")||u||i.is(":hidden")&&"object"!=typeof i.data("ejDropDownList")||l._isEnterKeyPressed||(l._focusElements(i.closest("td")),u=!0)}if(n="#treegrid"+l._id+"dropdownData",e(n).length){var k=[];e(n).ejTreeGrid({dataSource:k,allowSorting:!1,allowAdding:!0,columns:[{headerText:l._columnDialogTexts.dropdownTableText,field:"text",editType:t.TreeGrid.EditingType.String,width:"150px"},{headerText:l._columnDialogTexts.dropdownTableValue,field:"value",editType:t.TreeGrid.EditingType.String,width:"150px"}],enableAltRow:!0,allowColumnResize:!0,cssClass:m.cssClass,enableResize:!0,editSettings:{allowAdding:!0,allowDeleting:!0,allowEditing:!0,editMode:"cellEditing"},locale:m.locale,treeColumnIndex:5,emptyRecordText:"Add values for dropdown",rowSelected:function(t){t.data&&(e(".e-deletepre").addClass("e-enable").removeClass("e-disable"),e(".e-deletepre").bind("click",e.proxy(l._deleteDropDownRow,l,e(n))))}}),o=d.find("#"+l._id+"dropdownDataTable").parent()[0],e(o).attr("hidden",!0),e(".e-addpre").bind("click",e.proxy(l._addDropDownRow,l,e(n)))}},_addDropDownRow:function(e,t){var i=e.data("ejTreeGrid"),s=i.model.dataSource,a=s.length,r={text:"Text "+(a+1),value:"Value"+(a+1)};i.addRow(r,"bottom")},_deleteDropDownRow:function(t,i){var s=this,a=t.data("ejTreeGrid"),r=a.model.updatedRecords,n=r.length,o=a.model.selectedItem;0!=n&&o&&(a.deleteRow(),e(".e-deletepre").addClass("e-disable").removeClass("e-enable"),e(".e-deletepre").unbind("click",e.proxy(s._deleteDropDownRow,s,t)))},getAllDataSourceFields:function(){for(var t=this,i=t.model,s=i.dataSource,a=0;a<s.length;a++){var r=s[a];for(var n in r)n==i.childMapping?t.getChildKeys(r[n]):-1==e.inArray(n,t._dataSourcefields)&&(i.isFromGantt?"undefined"!=n&&n!=i.notesMapping&&t._dataSourcefields.push(n):"object"!=typeof r[n]&&"ejvalue"!=n&&t._dataSourcefields.push(n))}},getChildKeys:function(t){var i=this,s=i.model;if(t)for(var a=0;a<t.length;a++){var r=t[a];for(var n in r)n==s.childMapping?i.getChildKeys(r[n]):-1==e.inArray(n,i._dataSourcefields)&&"object"!=typeof r[n]&&"ejvalue"!=n&&i._dataSourcefields.push(n)}},_renderUpdateConfirmDialog:function(){var i=this,s=i._confirmDeleteText,a=t.buildTag("div.e-content",i._deleteColumnText),r=t.buildTag("span.e-buttons","<input class='e-confirm-dialog-btn-ok' type='button' id="+i._id+"ConfirmDialogOK value="+i._okButtonText+" /> <input class='e-confirm-dialog-btn-cancel' type='button' id="+i._id+"ConfirmDialogCancel value='"+i._cancelButtonText+"' />"),n=t.buildTag("div","",{},{class:"e-confirm-dialog-btn"});n.append(r),i._updateConfirmDialog=t.buildTag("div","","",{title:s,id:i._id+"ConfirmDialog"}),i._updateConfirmDialog.append(a).append(n),i.element.append(i._updateConfirmDialog),r.find("input").ejButton({cssClass:i.model.cssClass,showRoundedCorner:!0,size:"normal",click:e.proxy(i._triggerUpdateConfirm,i)}),i._updateConfirmDialog.ejDialog({width:"auto",minHeight:0,minWidth:0,showOnInit:!1,isResponsive:!0,enableResize:!1,enableModal:!0,cssClass:i.model.cssClass}),e("#"+i._id+"ConfirmDialog_wrapper").addClass("e-treegrid-dialog")},_triggerUpdateConfirm:function(e){var t=this;void 0!==e&&e.model.text==t._okButtonText&&t._updateConfirmDialog.find(".e-content").text()==t._deleteColumnText&&t.deleteColumn(t._targetColumnIndex),t._updateConfirmDialog.ejDialog("close")},deleteColumn:function(t){var i,s=this,a=s.model,r=a.columns,n=a.sortSettings&&a.sortSettings.sortedColumns.length?a.sortSettings.sortedColumns:null,o=r[t],l={};if(t!=a.treeColumnIndex&&!r[t].nonColumn&&(l.requestType="deleteColumn",l.columnObject=o,l.deleteIndex=t,!s._trigger("actionComplete",l))){if(!a.isFromGantt&&a.allowSorting&&a.filterSettings.filteredColumns.length>0&&s.clearFilter(o.field),i=r.splice(t,1),n){var d=e.grep(n,function(e){return a.isFromGantt?e.field==i[0].mappingName:e.field==i[0].field});d.length&&(n.splice(n.indexOf(d[0]),1),s.processBindings(),a.isFromGantt&&(l.requestType="sorting",s._trigger("actionComplete",l)))}t<=a.treeColumnIndex&&(a.treeColumnIndex=a.treeColumnIndex-1),a.showTotalSummary&&a.collapsibleTotalSummary&&t==s._summaryColumnIndex&&(s._summaryColumnIndex=0),s._refreshFrozenColumns(),s._updateWrapRowHeights(null,"virtualRefresh"),a.isFromGantt&&s._updateAddEditDialogTemplate()}},getOffsetRect:function(e){var t=e.getBoundingClientRect(),i=document.body,s=document.documentElement,a=window.pageYOffset||s.scrollTop||i.scrollTop,r=window.pageXOffset||s.scrollLeft||i.scrollLeft,n=s.clientTop||i.clientTop||0,o=s.clientLeft||i.clientLeft||0,l=t.top+a-n,d=t.left+r-o;return{top:Math.round(l),left:Math.round(d)}},_moveToNextMenuItem:function(t){var i,s,a,r,n,o,l,d=this.model,h={};switch(this._isContextMenuItems||d.isFromGantt?(d.isFromGantt?(i=e("#"+this._id.replace("ejTreeGrid","")).data("ejGantt"),a=e("#"+this._id.replace("ejTreeGrid","")+"_ContextMenu")):(i=this,a=e("#"+this._id+"_ContextMenu")),r=i._contextMenuItems):(i=this,a=e("#"+this._id+"_headerContextMenu"),r=i._headerContextMenuItems),s=e("#"+i._activeMenuItemId),t){case"next":0==s.length?h=a.find("div.e-menuitem:not(.e-disable)").first():(h=s.closest("li").next("li").find("div.e-menuitem"),h.length>0&&h.hasClass("e-disable")&&(h=this._findContextMenuItem(h,"next"))),o=e("#"+i._id+"_SubContextMenu"+i._activeMenuItemId),o.remove();break;case"prev":h=this._findContextMenuItem(s,"prev"),o=e("#"+i._id+"_SubContextMenu"+i._activeMenuItemId),o.remove();break;case"expand":s.length>0&&(i._showSubContextMenu(s[0],r),l=e("#"+i._id+"_SubContextMenu"+i._activeMenuItemId),l.length>0&&(h=l.find("div.e-menuitem:not(.e-disable)").first()));break;case"collapse":if(l=e(s).closest(".e-tginnerContextmenu"),l.length>0){n=l.attr("id").replace(i._id+"_SubContextMenu","");var h=e("#"+n);o=e("#"+i._id+"_SubContextMenu"+i._activeMenuItemId),o.remove(),l.remove()}break;case"save":s.length>0&&(0==e("#"+i._activeMenuItemId).find(".e-expander").length?(d.isFromGantt?i._contextMenuClickHandler(e("#"+i._activeMenuItemId)):i.contextMenuOperations(i._activeMenuItemId),i._clearContextMenu()):(i._showSubContextMenu(s[0],r),l=e("#"+i._id+"_SubContextMenu"+i._activeMenuItemId),l.length>0&&(h=l.find("div.e-menuitem:not(.e-disable)").first())))}if(h.length>0){var c=this._isContextMenuItems||d.isFromGantt?"e-tgcontextmenu-mouseover":"e-columnmenuselection";"next"!=t&&"prev"!=t||s.removeClass(c),h.addClass(c),i._activeMenuItemId=e(h).attr("id")}},_findNextColumnMenuItem:function(e,t,i){var s,a,r=this;return s=i?e.closest("li").next("li").find("div.e-columnmenuitem"):e.closest("li").next("li").find("div.e-menuitem "),a=i?e.closest("li").prev("li").find("div.e-columnmenuitem"):e.closest("li").prev("li").find("div.e-menuitem"),"next"===t?s.length>0&&s.hasClass("e-disable")?i?r._findNextColumnMenuItem(s,"next",!0):r._findNextColumnMenuItem(s,"next",!1):s:a.length>0&&a.hasClass("e-disable")?i?r._findNextColumnMenuItem(a,"prev",!0):r._findNextColumnMenuItem(a,"prev",!1):a},_getFieldValue:function(e,t){return""!=e?e.split(".").join(""):"TGcolumn"+t},_findContextMenuItem:function(e,t){var i,s,a=this;return"next"===t?(i=e.closest("li").next("li").find("div.e-menuitem"),i.length>0&&i.hasClass("e-disable")?a._findContextMenuItem(i,"next"):i):(s=e.closest("li").prev("li").find("div.e-menuitem"),s.length>0&&s.hasClass("e-disable")?a._findContextMenuItem(s,"prev"):s)},updateRecordByIndex:function(i,s){var a=this,r=a.model,n=r.updatedRecords,o={},l=i,d=l>-1&&n.length>0?n[l]:null;if(a._isRowEdit?a.cancelRowEditCell():a.model.isEdit&&a.cancelEditCell(),t.isNullOrUndefined(d)||d.isSummaryRow)return!1;var h=d.item,c=e.extend(!0,{},h),u=e.extend(!0,{},r.columns);e.each(s,function(i,s){var n=i,o=s;if(!t.isNullOrUndefined(n)){var l=!1;if(e.each(u,function(e,t){if(t.field==n)return l=!0,delete u[parseInt(e)],!1}),l){if("batchEditing"==r.editSettings.editMode){var h={},c=t.copyObject({},d.item);r.columns.filter(function(e){e.field==n&&(h=e)});h.editType!=t.TreeGrid.EditingType.DatePicker&&h.editType!=t.TreeGrid.EditingType.DateTimePicker||(o=t.parseDate(o,r.dateFormat,r.locale)),a._checkModfiedCellValue(t.getObject(n,c),o,h)&&(a._createBatchEditedFields(d,n,o,h),a._batchEditStarts=!0,a._updateBatchChanges(d.item))}d=a._restoreCustomData(d,o,n),d.item=a._restoreCustomData(d.item,o,n)}}});var p=r.currentViewData.indexOf(d);r.enableVirtualization?p>-1&&t.TreeGrid.refreshRow(a,p):t.TreeGrid.refreshRow(a,p),r.idMapping&&r.parentIdMapping&&a._updateLastInsertedId(d[r.idMapping]),o.editType="rowedit",o.previousValue=c,o.currentValue=d.item,o.rowIndex=l,r.showSummaryRow&&a._updateSummaryRow(o),r.showTotalSummary&&a._updateTotalSummaryRow(o),"batchEditing"==r.editSettings.editMode&&a._cancelSaveTools()},_saveEditedElements:function(){var e=this;e.model.isEdit?e.saveCell():e._isRowEdit&&e.saveRow()}}),t.TreeGrid.Actions={Sorting:"sorting",BeginEdit:"beginedit",Save:"save",Add:"add",Delete:"delete",Cancel:"cancel",Refresh:"refresh",Searching:"searching",ExpandCollapse:"expandcollapse",Selection:"selection",rowHover:"rowHover",Scroll:"scroll",ContextMenuAdd:"contextMenuAdd",RefreshDataSource:"refreshDataSource",DragAndDrop:"dragAndDrop",Paging:"paging",Filter:"filtering",RowIndexUpdate:"rowIndexUpdate"},t.TreeGrid.SelectionType={Single:"single",Multiple:"multiple",Checkbox:"checkbox"},t.TreeGrid.FilterType={FilterBar:"filterbar",Menu:"menu",Excel:"excel"},t.TreeGrid.FilterHierarchyMode={Parent:"parent",Child:"child",Both:"both",None:"none"},t.TreeGrid.SearchHierarchyMode={Parent:"parent",Child:"child",Both:"both",None:"none"},t.TreeGrid.HeaderTextOverflow={None:"none",Wrap:"wrap"},t.TreeGrid.EditMode={CellEditing:"cellEditing",RowEditing:"rowEditing",DialogEditing:"dialogEditing",BatchEditing:"batchEditing"},t.TreeGrid.BatchEditMode={Cell:"cell",Row:"row",Dialog:"dialog"},t.TreeGrid.ClipMode={Clip:"clip",Ellipsis:"ellipsis"},t.TreeGrid.PageSizeMode={All:"all",Root:"root"},t.TreeGrid.PrintMode={AllPages:"allPages",CurrentPage:"currentPage"},t.TreeGrid.RowPosition={Top:"top",Bottom:"bottom",Above:"aboveSelectedRow",Below:"belowSelectedRow",Child:"child"},t.TreeGrid.BeginEditAction={DblClick:"dblClick",Click:"click"},t.TreeGrid.EditingType={String:"stringedit",Boolean:"booleanedit",Numeric:"numericedit",Dropdown:"dropdownedit",DatePicker:"datepicker",DateTimePicker:"datetimepicker",Maskedit:"maskedit"},t.TreeGrid.ContextMenuItems={Add:"add",Edit:"edit",Delete:"delete"},t.TreeGrid.ColumnResizeMode={Normal:"normal",FixedColumns:"fixedcolumns",NextColumn:"nextcolumn"},t.TreeGrid.UnboundType={Edit:"edit",Save:"save",Delete:"delete",Cancel:"cancel"},t.TreeGrid=t.TreeGrid||{},t.TreeGrid._initCellEditType=function(i,s,a,r,n,o,l){var d,h=i,c=h.model,u=o?l:c.columns,p=u[r],n=n||"";(u[r].field||"").split(".");switch(u[r].editTemplate?u[r].editType="edittemplate":t.isNullOrUndefined(u[r].editType)&&(p.editType="stringedit"),d="dialogEditing"==h.model.editSettings.editMode?u[r].field:h._getFieldValue(u[r].field,r),p.editType){case"stringedit":if(c.isFromGantt){var m={};if("predecessor"===p.field&&(m["_"+a+"predecessorCell"]=e.proxy(h._getPredecessorsValue,h)),e.views.helpers(m),"predecessor"===p.field)var g=t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:~_"+a+"predecessorCell(#data)}}",id:a+p.field+n,name:p.field,"data-dialog":n});else if("duration"===p.field){var m={};m["_"+a+"getDurationStringValue"]=e.proxy(t.Gantt._getDurationStringValue,h),e.views.helpers(m);var g=t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:~_"+a+"getDurationStringValue(#data)}}",id:a+p.field+n,name:p.field,"data-dialog":n})}else g=t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:~_"+h._id+"cellValue(#data,'"+d+"')}}",id:a+u[r].field+n,name:u[r].field,"data-dialog":n})}else g=t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:~_"+h._id+"cellValue(#data,'"+d+"')}}",id:a+h._getFieldValue(p.field,r)+n,name:p.field,autocomplete:"off","data-dialog":n});g.attr("data-edittype",u[r].editType),s.html(g);break;case"maskedit":g=t.buildTag("input.e-field e-maskedit","",{},{value:"{{:~_"+h._id+"cellValue(#data,'"+d+"')}}",id:a+h._getFieldValue(p.field,r)+n,name:p.field,"data-dialog":n}),g.attr("data-edittype",u[r].editType),s.html(g);break;case"booleanedit":s.html("{{if true===~_"+h._id+'cellValue(#data,"'+d+'")}}<input type ="checkbox" id="'+a+h._getFieldValue(u[r].field,r)+n+'" data-dialog ="'+n+'" name="'+u[r].field+'" checked="checked" data-edittype="'+u[r].editType+'"></input> {{else}}<input type ="checkbox" id="'+a+h._getFieldValue(u[r].field,r)+n+'" data-dialog ="'+n+'" name="'+u[r].field+'" data-edittype="'+u[r].editType+'">{{/if}}');break;case"numericedit":var f=t.buildTag("input.e-numerictextbox e-field","",{},{type:"text",value:"{{:~_"+h._id+"cellValue(#data,'"+d+"')}}",id:a+h._getFieldValue(u[r].field,r)+n,name:u[r].field,"data-dialog":n});f.attr("data-edittype",u[r].editType),s.append(f);break;case"datepicker":var _=t.buildTag("input.e-datepicker e-field","",{},{type:"text",value:"{{:~_"+h._id+"cellValue(#data,'"+d+"')}}",id:a+h._getFieldValue(u[r].field,r)+n,name:u[r].field,"data-dialog":n});_.attr("data-edittype",u[r].editType),s.append(_);break;case"datetimepicker":var _=t.buildTag("input.e-datetimepicker e-field","",{},{type:"text",value:"{{:~_"+h._id+"cellValue(#data,'"+d+"')}}",id:a+h._getFieldValue(u[r].field,r)+n,name:u[r].field,"data-dialog":n});_.attr("data-edittype",u[r].editType),s.append(_);break;case"dropdownedit":var v=t.buildTag("input.e-field e-dropdownlist","",{},{type:"text",id:a+h._getFieldValue(u[r].field,r)+n,name:u[r].field,"data-dialog":n});v.attr("data-edittype",u[r].editType).attr("data-cellvalue","{{:~_"+h._id+"cellValue(#data,'"+d+"')}}"),s.append(v);break;case"edittemplate":var b=u[r].editTemplate.create;if("string"==typeof b){var x=t.util.getObject(b,window);if(e.isFunction(x))var y=e(x()).attr({id:a+h._getFieldValue(p.field,r),name:p.field});else if(1==e(b).length&&"SCRIPT"==e(b).get(0).tagName)var y=e(e(b).html()).attr({id:a+h._getFieldValue(p.field,r),name:p.field});else var y=e(b).attr({id:a+h._getFieldValue(p.field,r),name:p.field})}else var y=e(b()).attr({id:a+h._getFieldValue(p.field,r),name:p.field});y.attr("data-edittype",u[r].editType),s.append(y)}},t.TreeGrid.ToolbarItems={Add:"add",Edit:"edit",Delete:"delete",Update:"update",Cancel:"cancel",ExpandAll:"expandAll",CollapseAll:"collapseAll",PdfExport:"pdfExport",ExcelExport:"excelExport",Print:"print",Search:"search"},t.TreeGrid.SummaryType={Sum:"sum",Average:"average",Maximum:"maximum",Minimum:"minimum",Count:"count",MinimumDate:"minimumDate",MaximumDate:"maximumDate",TrueCount:"trueCount",FalseCount:"falseCount",Custom:"custom"},t.TreeGrid.SelectionMode={Row:"row",Cell:"cell"},t.TreeGrid.Locale=t.TreeGrid.Locale||{},t.TreeGrid.Locale.default=t.TreeGrid.Locale["en-US"]={toolboxTooltipTexts:{addTool:"Add",editTool:"Edit",updateTool:"Update",deleteTool:"Delete",cancelTool:"Cancel",expandAllTool:"Expand All",collapseAllTool:"Collapse All",pdfExportTool:"PDF Export",excelExportTool:"Excel Export",printTool:"Print",searchTool:"Search"},contextMenuTexts:{addRowText:"Add Row",editText:"Edit",deleteText:"Delete",saveText:"Save",cancelText:"Cancel",aboveText:"Above",belowText:"Below"},filterMenuTexts:{stringMenuOptions:[{text:"Starts With",value:"startswith"},{text:"Ends With",value:"endswith"},{text:"Contains",value:"contains"},{text:"Equals",value:"equal"},{text:"Does Not Equal",value:"notequal"}],numberMenuOptions:[{text:"Less Than",value:"lessthan"},{text:"Greater Than",value:"greaterthan"},{text:"Less Than Or Equal To",value:"lessthanorequal"},{text:"Greater Than Or Equal To",value:"greaterthanorequal"},{text:"Equals",value:"equal"},{text:"Does Not Equal",value:"notequal"}],filterValue:"Filter Value",filterButton:"Filter",clearButton:"Clear",enterValueText:"enter value"},columnMenuTexts:{sortAscendingText:"Sort Ascending",sortDescendingText:"Sort Descending",columnsText:"Columns",freezeText:"Freeze",unfreezeText:"Unfreeze",freezePrecedingColumnsText:"Freeze Preceding Columns",insertColumnLeft:"Insert Column Left",insertColumnRight:"Insert Column Right",deleteColumn:"Delete Column",renameColumn:"Rename Column",menuFilter:"Filter"},columnDialogTexts:{field:"Field",headerText:"Header Text",editType:"Edit Type",filterEditType:"Filter Edit Type",allowFiltering:"Allow Filtering",allowFilteringBlankContent:"Allow Filtering Blank Content",allowSorting:"Allow Sorting",visible:"Visible",width:"Width",textAlign:"Text Alignment",headerTextAlign:"Header Text Alignment",isFrozen:"Is Frozen",allowFreezing:"Allow Freezing",columnsDropdownData:"Column Dropdown Data",dropdownTableText:"Text",dropdownTableValue:"Value",addData:"Add",deleteData:"Remove",allowCellSelection:"Allow Cell Selection",showInColumnChooser:"Show In Column Chooser",clipMode:"Clip Mode",tooltip:"Tooltip",headerTooltip:"Header Tooltip",displayAsCheckbox:"Display As Checkbox",priority:"Priority"},columnDialogTitle:{insertColumn:"Insert Column",deleteColumn:"Delete Column",renameColumn:"Rename Column"},editTypeTexts:{string:"String",numeric:"Numeric",datePicker:"Date Picker",dateTimePicker:"Date Time Picker",dropdown:"Dropdown",boolean:"Boolean"},textAlignTypes:{right:"Right",left:"Left",center:"Center"},clipModeTexts:{clip:"Clip",ellipsis:"Ellipsis"},deleteColumnText:"Are you sure you want to delete this column?",deleteRecordText:"Are you sure you want to delete record?",okButtonText:"OK",cancelButtonText:"Cancel",confirmDeleteText:"Confirm Delete",batchSaveConfirmText:"Are you sure you want to save changes?",batchSaveLostChangesText:"Unsaved changes will be lost. Are you sure you want to continue?",cancelEditText:"Are you sure you want to cancel the changes?",dropDownListBlanksText:"(Blanks)",dropDownListClearText:"(Clear Filter)",trueText:"True",falseText:"False",emptyRecord:"No records to display"},t.TreeGrid._getrowClassName=function(){var e="gridrowIndex",t=this;return t.data.parentItem&&(e+=t.data.parentItem.index.toString()),e+="level",e+=t.data.level.toString(),t.data.isSummaryRow&&(e+=" ",e+="e-summaryrow"),t.data.footerSummaryRowRecord&&(e+=" ",e+="e-footersummaryrow"),t.data.isFirstFooterSummary&&(e+=" ",e+="e-firstfootersummaryrow"),e},t.TreeGrid._getSummaryRowtdClassName=function(){var e=this,t="";return e.data.isSummaryRow&&(t+=" ",t+="e-summaryrowcell"),e.data.footerSummaryRowRecord&&(t+=" ",t+="e-footersummaryrowcell"),t},t.TreeGrid.getColumnByField=function(e,t){var i=0;for(i;i<e.length&&e[i].field.split(".").join("")!=t.split(".").join("");i++);return i==e.length?null:e[i]},t.TreeGrid.getColumnByMappingName=function(e,t){var i=0;for(i;i<e.length&&e[i].mappingName!=t;i++);return i==e.length?null:e[i]},t.TreeGrid.sendExpandCollapseRequest=function(i,s){var a,r=i,n=r.model;n.toolbarSettings.toolbarItems;if(s.requestType=t.TreeGrid.Actions.ExpandCollapse,r._isRowEdit?r.cancelRowEditCell():r.model.isEdit&&r.cancelEditCell(),n.enableVirtualization){if(r._isFromGantt){if(r._isLoadonDemand&&!s.data.isChildRetrieved&&1==s.expanded)return void t.TreeGrid.expandRowsonDemand(r,s.data,s);r._$treegridHelper.ejTreeGrid("processBindings",s)}else{if(r._isLoadonDemand&&!s.data.isChildRetrieved&&1==s.expanded)return void t.TreeGrid.expandRowsonDemand(r,s.data,s);r.processBindings(s)}r._isFromGantt?!1===r._isInExpandCollapseAll&&(n.enableAltRow&&r._$treegridHelper.ejTreeGrid("updateAltRow"),r._$treegridHelper.ejTreeGrid("sendDataRenderingRequest",s),r._$treegridHelper.ejTreeGrid("updateHeight"),r.model.updatedGanttRecords=r.getUpdatedRecords(),r.model.currentViewData=r.getCurrentViewData(),r._$ganttchartHelper.ejGanttChart("clearConnectorLines"),r._$ganttchartHelper.ejGanttChart("refreshHelper",r.model.currentViewData,r.model.updatedGanttRecords)):!1===r._isInExpandCollapseAll&&(n.enableAltRow&&r.updateAltRow(),r.sendDataRenderingRequest(s),r._updateWrapRowHeights("total,header"),r._setScrollTop(),r.updateHeight())}else{var o,l,d=s.data,h=0;d.expanded,s.expanded;if(o=r.model.currentViewData.indexOf(d),r._frozenColumnsLength&&r.getRows()?l=e(r.getRows()[0][o]).add(r.getRows()[1][o]):r.getRows()&&(l=r.getRows()&&e(r.getRows()[o])),s.expanded){if(d.expanded=s.expanded,r._isLoadonDemand&&!d.isChildRetrieved)return void t.TreeGrid.expandRowsonDemand(r,d,s);l&&t.TreeGrid.expandRecord(r,d,s.expanded,s),d.hasFilteredChildRecords&&(l&&l.find(".e-treegridcollapse").removeClass("e-treegridcollapse").addClass("e-treegridexpand"),l&&l.removeClass("e-treegridrowcollapse").addClass("e-treegridrowexpand")),n.enableAltRow&&!1===r._isInExpandCollapseAll&&!n.allowPaging&&t.TreeGrid.updateAltRow(r,d,o,1)}else r._collapsedRecordCount=0,l&&t.TreeGrid.collapseRecord(r,d,s.expanded),d.expanded=s.expanded,d.hasFilteredChildRecords&&(l&&l.find(".e-treegridexpand").removeClass("e-treegridexpand").addClass("e-treegridcollapse"),l&&l.removeClass("e-treegridrowexpand").addClass("e-treegridrowcollapse")),n.enableAltRow&&!1===r._isInExpandCollapseAll&&0!=r._collapsedRecordCount&&!n.allowPaging&&t.TreeGrid.updateAltRow(r,d,o,r._collapsedRecordCount);var c=0;r._isFromGantt?(r._$treegridHelper.ejTreeGrid("updateExpandStatus",d,s.expanded),r._$treegridHelper.ejTreeGrid("updateCollapsedRecordCount"),c=r._$treegridHelper.ejTreeGrid("getCollapsedRecordCount")):(r.updateExpandStatus(d,s.expanded),r.updateCollapsedRecordCount(),c=r.getCollapsedRecordCount()),!n.allowPaging||!1!==r._isInExpandCollapseAll||"ejTreeGridcollapsing"!=s.type&&"ejTreeGridexpanding"!=s.type||(t.isNullOrUndefined(r.getPager())||r.gotoPage(),n.enableAltRow&&t.TreeGrid.updateAltRow(r,d,o,1)),r._isFromGantt?!1===r._isInExpandCollapseAll&&(r._totalCollapseRecordCount=c,r._$ganttchartHelper.ejGanttChart("clearConnectorLines"),r._$treegridHelper.ejTreeGrid("updateHeight"),h=r._$treegridHelper.ejTreeGrid("getRecordsHeight"),r._$ganttchartHelper.ejGanttChart("updateHeight",h),r._$ganttchartHelper.ejGanttChart("setCollapsedRecordCount",c),r._$ganttchartHelper.ejGanttChart("refreshGridLinesTable",r.model.updatedRecords.length-c)):!1===r._isInExpandCollapseAll&&(n.allowTextWrap&&r._$frozenTableContent.length>0?(r._updateWrapRowHeights("total,header"),r._updateScrollCss()):r.updateHeight())}if(r._isFromGantt&&r.model.predecessorMapping&&!1===r._isInExpandCollapseAll&&r._refreshConnectorLines(!1,!1,!0),r._isFromGantt){var u=r._$treegridHelper.ejTreeGrid("instance"),p=r._$ganttchartHelper.ejGanttChart("instance"),m=u._$gridContent.ejScroller("option","scrollTop");p._$bodyContainer.ejScroller("option","scrollTop",m);u.getScrollElement().ejScroller("isHScroll")||u.getScrollElement().scrollTop(m)}var g={};g.recordIndex=s.recordIndex,g.data=s.data,g.requestType=s.requestType,g.expanded=s.expanded,t.isNullOrUndefined(g.data.item[n.expandStateMapping])||(g.data[n.expandStateMapping]=s.expanded,g.data.item[n.expandStateMapping]=s.expanded),s.expanded?r._trigger("expanded",g):r._trigger("collapsed",g);var f=r.selectedItem();if(!r._isFromGantt&&f&&(1==n.selectedItems.length||r._checkboxSelection)){r.getExpandStatus(f)||s.expanded||(r.selectRows(-1),r.selectedRowIndex(-1),f.isSelected=!1,n.selectedItem=null,f=null),a=n.allowPaging?r._updatedPageData:r.model.updatedRecords,n.enableVirtualization&&f&&a.indexOf(f)!==r.selectedRowIndex()&&r.selectRows(a.indexOf(f)),r._cancelSaveTools()}},t.TreeGrid.expandRowsonDemand=function(e,i,s){var a=e,r=a.model,n=t.Query().select(a._fieldNamesToQuery),o=r.flatRecords;r.updatedRecords;if(a._isFromGantt){var l=t.Predicate(r.parentTaskIdMapping,t.FilterOperators.equal,i.item[r.taskIdMapping]),d=r.taskIdMapping;r.parentTaskIdMapping}else{var l=t.Predicate(r.parentIdMapping,t.FilterOperators.equal,i.item[r.idMapping]),d=r.idMapping;r.parentIdMapping}return i.isChildRetrieved?(i.expanded=!0,t.TreeGrid.sendExpandCollapseRequest(a,s),!0):!!a._trigger("actionBegin",s)||(n.where(l),a._waitingPopupObj.show(),n.requiresCount(),void a.dataSource().executeQuery(n).done(t.proxy(function(e){for(var n=e.result,l=n.length,h=[],c=[],u=[],p=o.indexOf(i),m=(i.childRecords&&i.childRecords.length,0);m<l;m++){if(a._isFromGantt){var g=a._createGanttRecord(n[m],i.level+1,i);if(r.enableWBS){var f=i.WBS;g.WBS=f+"."+(m+1)}}else var g=a._createRecord(n[m],i.level+1,i);g.index=o.length+h.length,i.childRecords.push(g),(g.item[r.hasChildMapping]||-1!=a._assignedParendIDs.indexOf(g.item[d]))&&(g.hasChildRecords=!0,g.childRecords=[],g.isChildRetrieved=!1,a._allParentItems.push(g),a._isFromGantt&&(g.manualStartDate=g.startDate,g.manualEndDate=g.endDate,g.manualDuration=g.duration,g.isAutoSchedule||a._updateManualParentItem(g,null,!0))),g.item[d]&&c.push(g.item[d]),h.push(g),u.push(n[m])}a._taskIds.splice.apply(a._taskIds,[p+1,0].concat(c)),a._isFromGantt&&r.ids.splice.apply(r.ids,[p+1,0].concat(c.toString().split(","))),o.splice.apply(o,[p+1,0].concat(h)),a._isDataManagerUpdate&&a._jsonData.splice.apply(a._jsonData,[p+1,0].concat(u)),i.isChildRetrieved=!0,i.expanded=!0;var _={recordIndex:p,data:i,requestType:"expandcollapse",expanded:!0};s&&(s.isExpandingParticularLevelParent||a._isInExpandCollapseAll)?t.TreeGrid.expandMultipleRecordsonDemand(a,i,s,_):(a._renderExpandedChildRecords(s),a._trigger("expanded",_))})).fail(t.proxy(function(e){a._triggerFailureEvent(e,a)})))},t.TreeGrid.expandMultipleRecordsonDemand=function(e,i,s,a){var r=e;if(s.isExpandingParticularLevelParent)for(var n=r._allParentItems.filter(function(e){if(e.level==s.recordLevel&&!e.expanded&&e.hasChildRecords)return e}),o=i.parentItem,l=0;l<s.recordLevel;l++)o&&o.isChildRetrieved&&(o.expanded=!0),o=o&&o.parentItem;if(r._isInExpandCollapseAll)var n=r._allParentItems.filter(function(e){if(!e.expanded&&e.hasChildRecords)return e});for(var d=0;d<n.length;d++){var h={};h.data=n[d],h.recordIndex=r.model.updatedRecords.indexOf(n[d]),h.expanded=!0,s.isExpandingParticularLevelParent&&(h.recordLevel=s.recordLevel,h.isExpandingParticularLevelParent=!0),h.requestType=t.TreeGrid.Actions.ExpandCollapse;if(!t.TreeGrid.expandRowsonDemand(r,n[d],h))break;r._allParentItems.splice(r._allParentItems.indexOf(n[d]),1),n.splice(n.indexOf(n[d]),1),n.length>0&&(d=-1)}0==n.length&&(r._isInExpandCollapseAll=!1,r._renderExpandedChildRecords(s),r._trigger("expanded",a))},t.TreeGrid.expandRecord=function(i,s,a,r){var n,o,l,o,d=i,h=".gridrowIndex"+s.index.toString()+"level"+(s.level+1).toString(),c=".detailsrowgridrowIndex"+s.index.toString()+"level"+(s.level+1).toString(),u=e(d.element).find(h),p=0,m=u.length,g=d.model,f=e(d.element).find(c),_=e(d.element).find(h),v=d.getRows(),b=e(v[o]);for(o=g.currentViewData.indexOf(s),s.hasChildRecords&&s.childRecords.length>0&&(b.find(".e-treegridcollapse").removeClass("e-treegridcollapse").addClass("e-treegridexpand"),b.removeClass("e-treegridrowcollapse").addClass("e-treegridrowexpand")),d._expandedRecordsCount+=d._isFromGantt||d._frozenColumnsLength>0?_.length/2:_.length,_.css({display:"table-row"}),f.filter("tr.e-detailsrowexpanded").css("display","table-row"),(d._isFromGantt||d._frozenColumnsLength>0)&&(m/=2),p;p<m;p++)n=u[p],o=-1,-1!==(o=d._frozenColumnsLength>0?e(d.getRows()[0]).index(n):d.getRows().index(n))&&(d._isFromGantt,l=d.model.updatedRecords[o],l.isExpanded=!0,l.expanded&&t.TreeGrid.expandRecord(d,l,a))},t.TreeGrid.collapseRecord=function(i,s,a){var r,n,o,l=i,d=(l.model,".gridrowIndex"+s.index.toString()+"level"+(s.level+1).toString()),h=".detailsrowgridrowIndex"+s.index.toString()+"level"+(s.level+1).toString(),c=e(l.element).find(d),u=0,p=c.length,m=e(l.element).find(h),g=e(l.element).find(d);l.getRows();for(l._collapsedRecordCount+=l._isFromGantt||l._frozenColumnsLength>0?g.length/2:g.length,g.css({display:"none"}),m.css({display:"none"}),(l._isFromGantt||l._frozenColumnsLength>0)&&(p/=2),u;u<p;u++)r=c[u],n=-1,-1!==(n=l._frozenColumnsLength>0?e(l.getRows()[0]).index(r):l.getRows().index(r))&&(o=l.getUpdatedRecords()[n],o.expanded&&t.TreeGrid.collapseRecord(l,o,a))},t.TreeGrid.updateAltRow=function(t,i,s,a){var r,n,o=t,l=0,d=o.model,h=o.getUpdatedRecords(),c=h.length,u=i.isAltRow,p=o.getRows();if(n=o._frozenColumnsLength?o.getRows()[0]:o.getRows(),!d.rowTemplateID&&!d.altRowTemplateID)for(l=s+a;l<c;l++)if(!e(n[l]).hasClass("e-summaryrow")&&"none"!==e(n[l]).css("display")){r=h[l],0!=l&&(r.isAltRow=!u),u=r.isAltRow;var m={};m=o._frozenColumnsLength?e(p[0][l]).add(p[1][l]):e(p[l]),u?e(m).addClass("e-alt-row"):e(m).removeClass("e-alt-row")}},t.TreeGrid.refreshRow=function(i,s){var a,r,n=i,o=n.model,l=n.model.currentViewData[s];if(l){if(n._frozenColumnsLength>0){if(r=e(n.getRows()[0][s]),a=e(n.getRows()[1][s]),o.showDetailsRow&&o.detailsTemplate&&l.isDetailsExpanded){var d=r.next("tr");d.hasClass("e-detailsrow")&&(d.remove(),a.next("tr").remove())}r.replaceWith(e(e.render[n._id+"_JSONFrozenTemplate"](l))),a.replaceWith(e(e.render[n._id+"_Template"](l)))}else{if(a=e(n.getRows()[s]),o.showDetailsRow&&o.detailsTemplate&&l.isDetailsExpanded){var d=a.next("tr");d.hasClass("e-detailsrow")&&d.remove()}o.allowSelection||(l.isSelected=!1),a.replaceWith(e(e.render[n._id+"_Template"](l)))}n.setGridRows(e(n.getContentTable().get(0).rows)),n._gridRows=n.getContentTable().get(0).rows,n._frozenColumnsLength>0&&(n._gridRows=[n._gridRows,n.getContentTable().get(1).rows]);var h=t.TreeGrid.getRowByIndex(n,n.getUpdatedRecords().indexOf(o.currentViewData[s]));n._trigger("refresh"),n._rowEventTrigger(h,l)}},t.TreeGrid.getRowByIndex=function(i,s,a){try{var r;r="ejTreeGrid"==i.pluginName?i:i._$treegridHelper.data("ejTreeGrid");var n=r.getRows(),o=(r.model,r.getUpdatedRecords()),l=e();if(r.model.enableVirtualization){var d=o[s]
;s=r.model.currentViewData.indexOf(d)}if(t.isNullOrUndefined(a))return r._frozenColumnsLength>0?(n[0][s]&&(l.push(n[0][s]),l.push(n[1][s])),l):e(n[s]);if(r.model.enableVirtualization){var h=o[a];a=r.model.currentViewData.indexOf(h)}return r._frozenColumnsLength>0?(l.push(e(n[0]).slice(s,a)),l.push(e(n[1]).slice(s,a)),l):e(n.slice(s,a))}catch(t){return e()}}}(jQuery,Syncfusion),function(e,t,i){t.widget("ejAutocomplete","ej.Autocomplete",{element:null,model:null,validTags:["input"],_ignoreOnPersist:["fields","dataSource","query","focusIn","focusOut","change","select","create","destroy","open","close","actionComplete","actionSuccess","actionFailure"],_setFirst:!1,_rootCSS:"e-autocomplete",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},_requiresID:!0,defaults:{dataSource:null,query:null,fields:{text:null,key:null,category:null,groupBy:null,htmlAttributes:null},locale:"en-US",name:null,template:null,allowGrouping:!1,enableDistinct:!1,ignoreAccent:!1,allowSorting:!0,sortOrder:"ascending",htmlAttributes:{},multiSelectMode:"none",delimiterChar:",",allowAddNew:!1,addNewText:"Add New",showRoundedCorner:!1,readOnly:!1,cssClass:"",watermarkText:null,value:"",selectValueByKey:null,filterType:"startswith",caseSensitiveSearch:!1,showLoadingIcon:!0,showResetIcon:!1,itemsCount:0,minCharacter:1,delaySuggestionTimeout:200,showPopupButton:!1,highlightSearch:!1,enableAutoFill:!1,enableRTL:!1,enabled:!0,visible:!0,height:"",width:"",emptyResultText:"No suggestions",animateType:"slide",showEmptyResultText:!0,enablePersistence:!1,popupHeight:"152px",popupWidth:"auto",autoFocus:!1,isChangeOnBlur:!1,multiColumnSettings:{enable:!1,showHeader:!0,stringFormat:"{0}",searchColumnIndices:[],columns:[{field:null,headerText:null,textAlign:"left",headerTextAlign:"left",cssClass:"",type:"string",filterType:"startswith",visible:!0}]},validationRules:null,validationMessage:null,focusIn:null,focusOut:null,change:null,select:null,create:null,open:null,close:null,destroy:null,actionBegin:null,actionComplete:null,actionSuccess:null,actionFailure:null},dataTypes:{autoFocus:"boolean",watermarkText:"string",locale:"string",cssClass:"string",filterType:"enum",caseSensitiveSearch:"boolean",showLoadingIcon:"boolean",template:"string",allowGrouping:"boolean",enableDistinct:"boolean",allowSorting:"boolean",sortOrder:"enum",allowAddNew:"boolean",addNewText:"string",showRoundedCorner:"boolean",showResetIcon:"boolean",readOnly:"boolean",itemsCount:"number",animateType:"enum",minCharacter:"number",showPopupButton:"boolean",highlightSearch:"boolean",enableAutoFill:"boolean",enableRTL:"boolean",multiSelectMode:"enum",delimiterChar:"string",emptyResultText:"string",showEmptyResultText:"boolean",enabled:"boolean",visible:"boolean",enablePersistence:"boolean",isChangeOnBlur:"boolean",dataSource:"data",query:"data",fields:"data",validationRules:"data",validationMessage:"data",htmlAttributes:"data",multiColumnSettings:"data",columns:"data",searchColumnIndices:"array"},observables:["value","selectValueByKey"],value:t.util.valueFunction("value"),_selectValueByKey:t.util.valueFunction("selectValueByKey"),enable:function(){this.model.enabled||(this.model.enabled=!0,this.target.disabled=!1,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.removeAttr("disabled"),this.model.showPopupButton&&this.dropdownbutton.removeClass("e-disable").attr({"aria-disabled":!1}),"visualmode"==this.model.multiSelectMode&&this._ulBox.removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.removeClass("e-disable-wrap"))},disable:function(){this.model.enabled&&(this._hideResult(),this.model.enabled=!1,this.target.disabled=!0,this.element.attr("disabled","disabled"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.model.showPopupButton&&this.dropdownbutton.addClass("e-disable").attr({"aria-disabled":!0}),"visualmode"==this.model.multiSelectMode&&this._ulBox&&this._ulBox.addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.addClass("e-disable-wrap"))},clearText:function(){"visualmode"==this.model.multiSelectMode&&this._deleteBox(this._ulBox.children("li")),this.element.val(""),this._preVal="",this._valueChange(),this._isFocused||this._focusOutAction(),this._hideResult()},getValue:function(){var e=this.value();return null==e?"":e},getSelectedItems:function(){return this._isFocused&&"visualmode"!=this.model.multiSelectMode&&this._updateSelectedItemArray(this.getValue()),this._selectedItems},_setValue:function(i){if(this._isWatermark||this._hiddenSpan.css("display","none"),("object"==typeof i||"number"==typeof i&&isNaN(i)||""==e.trim(i))&&(i=""),"visualmode"==this.model.multiSelectMode&&this._hiddenInput.val(""),this.element.val(""),this._hiddenInput||(this._hiddenInput=t.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden",name:this.element.attr("name")}).insertBefore(this.element)),i)if("visualmode"==this.model.multiSelectMode){this._selectedItems=[],this._modelValue=i,this._deleteBox(this._ulBox.children("li"));var s=i.split(this.model.delimiterChar);if(this.element.width(1).val("").removeAttr("placeholder"),t.DataManager&&this.model.dataSource instanceof t.DataManager)this._createBoxForObjectType(s);else if(this.suggestionListItems=this.model.dataSource,this.suggestionListItems&&"object"!=typeof this.suggestionListItems[0]){this._hiddenInput.val(i);for(var a=0,r=s.length;a<r;a++)s[a]&&(this._ulBox.append(this._createBox(s[a])),this._selectedItems.push(s[a]))}else this._createBoxForObjectType(s)}else this.element.val(i),this._updateSelectedItemArray(i);return"visualmode"!=this.model.multiSelectMode&&this.value(this.element.val()),this._preVal=this.element.val(),!this._isWatermark&&this._setWatermarkTxt(),i},_createBoxForObjectType:function(i){for(var s=this,a=this._declareVariable(),r=0,n=i.length;r<n;r++){var o=e.trim(i[r]);""!=o&&(t.DataManager&&this.model.dataSource instanceof t.DataManager?(this._dataQuery=this._getQuery().where(a[0],"equal",o,!1),this._promise=this.model.dataSource.executeQuery(this._dataQuery),this._promise.done(function(e){var i=e.result;s._strData=i instanceof Array&&i.length?i[0]:o,t.isNullOrUndefined(s._strData[a[1]])||s._selectKeyInit(),s._selectedItems.push(s._strData)}).fail(function(e){s._selectedItems.push(o)})):(this._dataQuery=t.Query().where(a[0],"equal",o,!1),this._promise=t.DataManager(this.suggestionListItems).executeLocal(this._dataQuery),this._strData=this._promise instanceof Array&&this._promise.length?this._promise[0]:o,t.isNullOrUndefined(this._strData[a[1]])||this._selectKeyInit(),this._selectedItems.push(this._strData)),"visualmode"==this.model.multiSelectMode&&this._ulBox.append(this._createBox(o)))}},_selectKeyInit:function(){var e=this._declareVariable(),i=this._delimiterChar();if("visualmode"==this.model.multiSelectMode&&this._hiddenInput.val(this._hiddenInput.val()+(t.isNullOrUndefined(this._strData[e[1]]||this._strData[e[0]])?"":(this._strData[e[1]]||this._strData[e[0]])+this.model.delimiterChar)),!t.isNullOrUndefined(this._strData[e[1]]))if("none"!=this.model.multiSelectMode){var s=null!=this._selectValueByKey()?this._selectValueByKey()+this._strData[e[1]]+i:this._strData[e[1]]+i;s=s.split(i).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),this._selectValueByKey(s.join(i))}else this._selectValueByKey(this._strData[e[1]])},_declareVariable:function(){var e=this.model.fields,i={_key:null,_text:null,_attr:null},s=[];if(!t.isNullOrUndefined(e))return i._text=e&&e.text?e.text:"text",i._key=e&&e.key?e.key:"key",s.push(i._text,i._key),s},selectValueByKey:function(i){if(!t.isNullOrUndefined(i)){var s=this;i=i.toString();var a="none"!=this.model.multiSelectMode?i.split(this.model.delimiterChar):i.split(",");"[object Array]"===Object.prototype.toString.call(a)&&e.each(a,function(t,i){s._setOperation(e.trim(i),"key")})}},selectValueByText:function(e){this._setOperation(e,"text")},_eventTrigger:function(){var e="visualmode"==this.model.multiSelectMode?this._modelValue:""==this.element.val()?null:this.element.val();this._trigger("select",{isInteraction:!0,value:this.value(),text:e,key:this._selectValueKey,item:this._selectedItems})},setValue:function(e){this._setText(e)},_setOperation:function(e,i){var s,a,r="",n=this,o=this.model.dataSource;if(t.isNullOrUndefined(o))return!1;if("object"==typeof o[0]||o instanceof t.DataManager){var l=this.model.fields;r=l&&l[i]?l[i]:i}else if("key"==i)return!1;if(e)if(t.DataManager&&o instanceof t.DataManager)a=this._getQuery().where(r,"equal",e,!this.model.caseSensitiveSearch),s=o.executeQuery(a),s.done(function(e){n._setText(e.result[0]),n._eventTrigger()});else{if(!o||!o.length||o.length<1)return!1;a=t.Query().where(r,"equal",e,!this.model.caseSensitiveSearch),s=t.DataManager(o).executeLocal(a),this._setText(s[0]),this._eventTrigger()}},_setText:function(e){if(!e)return!1;var i,s,a=this.model.fields;if("object"==typeof this.model.dataSource[0]||"object"==typeof e?(i="string"==typeof e?e:a&&a.text?e[a.text]:e.text,s="string"==typeof e?e:a&&a.key?e[a.key]:e.key):i=e,i){if("visualmode"==this.model.multiSelectMode&&this._removeDuplicates(e))return!1;this._valueToTextBox(i,e,!0);var r="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val();this.value(r),this.model.showResetIcon&&this._showReset()}this._selectValueKey=s,this._selectkey.push(s),t.isNullOrUndefined(s)||this._selectValueByKey(this._selectkey+this.model.delimiterChar)},_textFormateString:function(e,i){var s=this.model.multiColumnSettings.stringFormat;if(this._columnsIndex(),t.isNullOrUndefined(e)||"object"!=typeof e)s=t.isNullOrUndefined(e)||"object"==typeof e?this._currList[this._activeItem-1]:s.replace("{"+this._columnIndex[0]+"}",e);else for(var a=0,r=this._columnIndex.length;a<r;a++)s=s.replace("{"+this._columnIndex[a]+"}",e[this.model.multiColumnSettings.columns[parseInt(this._columnIndex[a])].field]);return s},_columnsIndex:function(){var t=this;this._columnIndex=[],e.each(this.model.multiColumnSettings.stringFormat.match(/\{.+?\}/g),function(e,i){t._columnIndex[e]=i.slice(1,-1)}),this._searchColumnIndex=[],e.each(this.model.multiColumnSettings.searchColumnIndices,function(e,i){t._searchColumnIndex.push(i)})},_valueToTextBox:function(i,s,a){var r;!this._addNewTemplate&&this.model.multiColumnSettings.enable&&"string"!=typeof s&&(i=this._textFormateString(s)),r=this.model.delimiterChar;var n=this._getUniqueKey();if(n=n||(this.model.fields&&this.model.fields.key?s[this.model.fields.key]:t.isNullOrUndefined(s.key)?n:s.key),this._hiddenInput||(this._hiddenInput=t.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden",name:this.element.attr("name")}).insertBefore(this.element)),(this._hiddenInput.val()!=n&&null!=n||o>-1)&&("none"==this.model.multiSelectMode?this._hiddenInput.val(n||i):this._hiddenInput.val(this._hiddenInput.val()+(n||i)+r)),"visualmode"==this.model.multiSelectMode){s="string"==typeof s&&this._addNewTemplate&&s.substr(s.length-this._addNewTemplate.length)==this._addNewTemplate?s.replace(this._addNewTemplate,""):s,"number"==typeof i&&(i=this._textFormateString(i));var o=i.indexOf(this._addNewTemplate);this._addNewTemplate&&(i=i.substr(0,i.length-this._addNewTemplate.length)),(this._selectValueByKey()!=n&&null!=n||o>-1)&&this._selectValueByKey(null!=this._selectValueByKey()?this._selectValueByKey()+(o>-1?i:n)+r:(o>-1?i:n)+r),this._modelValue=t.isNullOrUndefined(this.value())?i+r:this.value()+i+r,this.element.val("").removeAttr("placeholder").width(1),this._ulBox.append(this._createBox(i)),""!=this.model.height&&(e(this._ulBox).parent().css("overflow","auto"),this.model.showPopupButton&&0!=this._ulBox.parent()[0].scrollHeight&&this.dropdownbutton.css("height",this._ulBox.parent()[0].scrollHeight)),this._addNewTemplate=null}else if("delimiter"==this.model.multiSelectMode){var r=this.target.value.lastIndexOf(this.model.delimiterChar);this._typed||""==this.element.val()||a||!this.model.showPopupButton?a?this.element.val(""==this.element.val()?i+this.model.delimiterChar:this.element.val()+i+this.model.delimiterChar):-1==r?this.element.val(this._queryString.substr(0,r+1)+i+this.model.delimiterChar):this.element.val(this._queryString.substr(0,r+this.model.delimiterChar.length)+i+this.model.delimiterChar):!this.model.enableAutoFill||this.showSuggestionBox?this._checkDeli()?this.element.val(this._queryString.substr(0,r)+this.model.delimiterChar+i+this.model.delimiterChar):this.element.val(this.element.val()+this.model.delimiterChar):this._checkDeli()||this.element.val(this.element.val()+this.model.delimiterChar),this._typed=!1}else this.element.val(i),this._selectedItems=[];this._selectedItems.push(s),this._originalval.push(i),this._moveCaretToEnd(this.element[0])},_removeDuplicates:function(e){return 0!=this._selectedItems.length&&(-1!=this._selectedItems.indexOf(e)||void 0)},search:function(){this.model.enabled&&this._checkDelimiter()&&(this._hideResult(),this._autoFill=!1,this._queryString=e.trim(this._queryString),this._queryString.length>0&&this._OnTextEnter())},setVisible:function(e){e?this.wrapper.show():this.wrapper.hide()},hide:function(){this._hideResult()},open:function(){this._showFullList()},_changeWatermark:function(e){this._isWatermark?this.element.attr("placeholder",e):this._hiddenSpan.text(e)},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.suggestionList.removeClass(this.model.cssClass).addClass(e)},_setDropdown:function(e){this.model.showPopupButton=e,e?this._renderDropdown():this._destroyDropdown()},_changeHeight:function(e){this.wrapper.height(e)},_changeWidth:function(e){this.wrapper.width(e),this._setListWidth()},_setCulture:function(){this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.addNewText)||(this._localizedLabels.addNewText=this._options.addNewText),t.isNullOrUndefined(this._options.emptyResultText)||(this._localizedLabels.emptyResultText=this._options.emptyResultText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this.model.addNewText=this._localizedLabels.addNewText,this.model.emptyResultText=this._localizedLabels.emptyResultText,this.model.watermarkText=this._localizedLabels.watermarkText},_init:function(e){if(this._options=e,this._selectkey=[],this._hiddenColumns=[],this._setCulture(),!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this.model.fields.groupBy=this.model.fields.groupBy?this.model.fields.groupBy:this.model.fields.category,this._initialize(),this._render(),this._wireEvents(),this.initialRender=!1,null!=this.model.validationRules&&(this._initValidator(),this._setValidation())},_initValidator:function(){!this.element.closest("form").data("validator")&&this.element.closest("form").validate()},_setValidation:function(){if(this.model.validationRules){var i="visualmode"==this.model.multiSelectMode?this._hiddenInput:this.element;i.rules("add",this.model.validationRules);var s=this.element.closest("form").data("validator");s=s||this.element.closest("form").validate();var a=i.attr("name");s.settings.messages[a]={};for(var r in this.model.validationRules){var n=null;if(!t.isNullOrUndefined(this.model.validationRules[r])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[r])){s.settings.messages[a][r]=e.validator.messages[r];for(var o in this.model.validationMessage)r==o&&(n=this.model.validationMessage[r])}else n=this.model.validationRules.messages[r];s.settings.messages[a][r]=null!=n?n:e.validator.messages[r]}}}},_removeDuplicateValue:function(e){return e.split(this.model.delimiterChar).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]).join(this.model.delimiterChar)},_delimiterChar:function(){return"none"!=this.model.multiSelectMode?this.model.delimiterChar:""},_setModel:function(e){var i;for(i in e){switch(i){case"dataSource":this.model.dataSource=null;break;case"watermarkText":this._changeWatermark(e[i]);break;case"delaySuggestionTimeout":this.model.delaySuggestionTimeout=parseInt(e[i]);break;case"value":var s=t.util.getVal(e[i]),a=this._delimiterChar();"none"!=this.model.multiSelectMode&&(c=s.substr(s.length-a.length)==a?s:s+a,s=""==s?this.value():(this.value()?this.value():"")+c,"visualmode"==this.model.multiSelectMode&&(s=s.split(a).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),s=s.join(a))),this.value(this._setValue(s));var r=this.model.dataSource;t.DataManager&&r instanceof t.DataManager?this._loadInitData():this._setHiddenkeyByValue(r),this._modelValue=this.value();var n="visualmode"==this.model.multiSelectMode?this._hiddenInput.val():this.element.val();this._changeEvtTrigger(n),this.model.showResetIcon&&this._showReset();break;case"showPopupButton":this._setDropdown(e[i]);break;case"enableRTL":this._RightToLeft(e[i]);break;case"showRoundedCorner":this._setRoundedCorner(e[i]);break;case"readOnly":this._checkReadOnly(e[i]);break;case"delimiterChar":var o=this.model.delimiterChar;e[i]=this._validateDelimiter(e[i]),this.model.delimiterChar=e[i],this.element.val(this.value().replace(new RegExp(o,"g"),this.model.delimiterChar)),this.value(this.element.val());break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[i],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[i],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"locale":t.Autocomplete.Locale[e[i]]?(this.model.locale=e[i],this._setCulture(),this._setWatermark()):this.model.locale=e[i];break;case"filterType":var l=[];for(var d in t.filterType)t.filterType.hasOwnProperty(d)&&l.push(t.filterType[d]);l.indexOf(e[i])>-1?this.model.filterType=e[i]:e[i]=this.model.filterType;break;case"multiSelectMode":this.model.multiSelectMode=e[i];var h=this._delimiterChar();if("none"!=this.model.multiSelectMode){var d=this._selectValueByKey(),c=this.value();c&&(c=c.substr(c.length-h.length)==h?c:c+h,this.value(c),"visualmode"==this.model.multiSelectMode&&this.value(this._removeDuplicateValue(this.value()))),d&&(this._selectValueByKey(d.substr(d.length-h.length)==h?d:d+h),"visualmode"==this.model.multiSelectMode&&this._selectValueByKey(this._removeDuplicateValue(this._selectValueByKey())))}"visualmode"==e[i]?(null!=this.model.validationRules&&this.element.rules("remove"),""!=this.element.val()&&this._isWatermark&&this.element.removeAttr("placeholder")):this.element.hasClass("e-visual-mode")&&this._destroyBoxModel(),this._destroy(),this._init(),this._setValue(this.value()),this._setValidation(),t.isNullOrUndefined(this.element.attr("placeholder"))&&this._isWatermark&&this._setWatermark();break;case"enabled":this._disabled(!e[i]);break;case"visible":this.setVisible(e[i]);break;case"height":this._changeHeight(e[i]);break;case"width":this._changeWidth(e[i]);break;case"cssClass":this._changeSkin(e[i]);break;case"itemsCount ":(e[i]<=0||isNaN(e[i]))&&(e[i]=0);break;case"popupHeight":this.suggestionList.css({"max-height":isNaN(e[i])?e[i]:e[i]+"px"});break;case"popupWidth":this.model.popupWidth=e[i],this._setListWidth();break;case"selectValueByKey":a=this._delimiterChar(),d=t.util.getVal(e[i]),this.selectValueByKey(d);var u="none"!=this.model.multiSelectMode?this._selectValueByKey()+e[i]:e[i];u=u.split(a).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),u=u.join(a),e[i]=u.substr(u.length-a.length)==a?u:u+a;break;case"htmlAttributes":this._addAttr(e[i]);break;case"emptyResultText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.emptyResultText=this.model.emptyResultText=e[i],this._setCulture();break;case"addNewText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.addNewText=this.model.emptyResultText=e[i],this._setCulture();break;case"multiColumnSettings":t.isNullOrUndefined(e[i].enable)||(this.model.multiColumnSettings.enable=e[i].enable),t.isNullOrUndefined(e[i].showHeader)||(this.model.multiColumnSettings.showHeader=e[i].showHeader),t.isNullOrUndefined(e[i].stringFormat)||(this.model.multiColumnSettings.stringFormat=e[i].stringFormat),t.isNullOrUndefined(e[i].searchColumnIndices)||(this.model.multiColumnSettings.searchColumnIndices=e[i].searchColumnIndices),t.isNullOrUndefined(e[i].columns)||(this.model.multiColumnSettings.columns=e[i].columns),this.suggestionList.remove(),this._renderSuggestionList();break;case"showResetIcon":this.model.showResetIcon=e[i],e[i]&&!t.isNullOrUndefined(this.value())&&""!=this.value()?this._showReset():this._removeReset()}this._hideResult()}},_destroy:function(){this.element.width("").removeAttr("role aria-label aria-expanded aria-haspopup aria-autocomplete autocomplete placeholder aria-owns aria-disabled disabled"),this.element.insertAfter(this.wrapper),"visualmode"==this.model.multiSelectMode&&this.element.removeClass("e-visual-mode").attr("name",this._hiddenInput.attr("name")),this.model.enabled||this.element.removeClass("e-disable"),this.wrapper.remove(),this.element.removeClass("e-input").val(""),this._isWatermark&&this.element.removeAttr("placeholder"),this._hideResult(),this.suggestionList.remove()},_initialize:function(){this.value(""===this.value()?this.element[0].value:this.value()),this.element.attr("role","combobox").attr("aria-label","Autocomplete textbox").attr("aria-expanded",!1).attr("aria-autocomplete","list"),t.isNullOrUndefined(this.element.attr("tabindex"))&&this.element.attr("tabindex",0),/Edge\/12./i.test(navigator.userAgent)&&this.element.addClass("edge-browser"),this.target=this.element[0],this.dropdownbutton=null,this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this.showSuggestionBox=!1,this.noresult=!0,this._queryString=null,this.suggLen=0,this._selectedItems=[],this._modelValue="",this._activeItem=0,this._originalval=[],this.ctrlKeyPressed=!1,this._isFocused=!1,this._isOpened=!1,this._typed=!1,this._cancelEvent=!1,this._isWatermark=this._checkWatermarkSupport(),this._selectedObj=[],this.eleClick=!1},_render:function(){this._renderWrapper(),this._addAttr(this.model.htmlAttributes),this._setDimentions(),this._renderDropdown(),this._checkProperties(),this._isWatermark?this._setWatermark():this._setWatermarkTxt(),this._renderSuggestionList(),this._RightToLeft(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner),this.setVisible(this.model.visible),this._setListPosition()},_renderWrapper:function(){if(this.element.addClass("e-input").attr("autocomplete","off"),"visualmode"==this.model.multiSelectMode?(this.wrapper=t.buildTag("div.e-atc e-widget "+this.model.cssClass+"#"+this.target.id+"_wrapper").insertAfter(this.element),this.container=t.buildTag("div.e-in-wrap e-box").append(this.element)):(this.wrapper=t.buildTag("span.e-atc e-widget "+this.model.cssClass+"#"+this.target.id+"_wrapper").insertAfter(this.element),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element)),document.activeElement==this.element[0])var e=!0;if(this.wrapper.append(this.container),!this._isWatermark){this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this.model.watermarkText),this._hiddenSpan.css("display","none");var i=this;this._hiddenSpan.click(function(e){this._isFocused||i.element.focus()})}e&&this.element.focus()},_renderDropdown:function(){if(this.model.showPopupButton){var i=t.buildTag("span.e-icon e-search").attr(this._isIE8?{unselectable:"on"}:{});this.dropdownbutton=t.buildTag("span.e-select#"+this.target.id+"_dropdown").attr(this._isIE8?{unselectable:"on"}:{}).append(i),this.container.append(this.dropdownbutton).addClass("e-padding"),this.model.enabled||this.dropdownbutton.addClass("e-disable").attr({"aria-disabled":!0}),this.dropdownbutton.on("mousedown",e.proxy(this._OnDropdownClick,this))}},_addAttr:function(t){var i=this;e.map(t,function(e,t){"required"==t&&i.element.attr(t,e),"class"==t?i.wrapper.addClass(e):"name"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._disabled(!0):"readOnly"==t&&!0===e?i._checkReadOnly(!0):"id"==t?(i.wrapper.attr(t,e+"_wrapper"),i.element.attr(t,e)):i.wrapper.attr(t,e)})},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_renderBoxModel:function(){this._ulBox=t.buildTag("ul.e-ul e-boxes");var i=this.model.enabled?"":"e-disable";this._ulBox.addClass(i),this._hiddenInput=t.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden"}).insertBefore(this.element),this._hiddenInput.attr("name",this.element.attr("name")),this.element.val("").removeAttr("name").addClass("e-visual-mode"),this._isWatermark||this.element.width(1),this.container.prepend(this._hiddenInput,this._ulBox),""!=this.model.height?this.wrapper.height(this.model.height):this.wrapper.height("auto"),this._on(this.container,"mousedown",function(t){if(!this.model.enabled)return!1;var i=e(t.target);i.is(this.element)||(t.preventDefault(),this._isFocused||this.element.focus(),i.hasClass("e-options")?(!t.ctrlKey&&i.siblings().hasClass("e-active")&&this._removeActive(),i.hasClass("e-active")?i.removeClass("e-active"):i.addClass("e-active")):this._moveCaretToEnd(this.element[0])),t.ctrlKey||!i.hasClass("e-boxes")&&!i.hasClass("e-input")||this._removeActive()})},_destroyBoxModel:function(){this.container.prepend(this.element),this.element.attr({name:this._hiddenInput.attr("name")}).removeAttr("style").removeClass("e-visual-mode"),this.wrapper.height(this.model.height),this._hiddenInput.remove(),this._hiddenInput=null,this._ulBox.remove(),this._off(this.container,"mousedown")},_deleteLastBox:function(){var e=this._ulBox.children(),t=e.last(),i=t.hasClass("e-active");this._removeActive(),i?this._deleteBox(t):t.addClass("e-active")},_deleteBox:function(t){for(var i=0,s=t.length;i<s;i++){var a=this._ulBox.children(),r=a.index(t[i]);this._selectedItems.splice(r,1);var n=this.model.delimiterChar,o=this._hiddenInput.val().split(n);o.splice(r,1),this._hiddenInput.val(o.join(n)),this._selectValueByKey(o.join(n));var l=this._modelValue.split(n);l.splice(r,1),this._modelValue=l.join(n),e(t[i]).remove(),this.deletedItem=e(t)[0].innerText}this.showSuggestionBox&&this._refreshPopup(),this._valueChange(),""==this.value()&&""!=this.model.height&&(e(this._ulBox).parent().css("overflow","hidden"),this.dropdownbutton.css("height",this.model.height)),""==this._hiddenInput.val()&&this._setWatermark()},_removeActive:function(){this._ulBox.children("li.e-active").removeClass("e-active")},_adjustWidth:function(){var e,i,s=t.buildTag("span",this.element.val());this.container.append(s),i=30,e=s.width()+i,this.element.width()!=e&&this.element.width(e),""==this._hiddenInput.val()&&this._setWatermark(),s.remove()},_checkProperties:function(){if(this._checkReadOnly(this.model.readOnly),this.model.delimiterChar=this._validateDelimiter(this.model.delimiterChar),this.model.enabled?this.model.enabled&&e(this.element).hasClass("e-disable")&&(this.model.enabled=!1,this._disabled(!1)):(this.model.enabled=!0,this._disabled(!0)),this._checkNameAttr(),"visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),t.isNullOrUndefined(this._selectValueByKey())){var i=t.isNullOrUndefined(this.value())?this.value():this.value().toString();if("none"==this.model.multiSelectMode||t.isNullOrUndefined(i)||""==i||(i=i.substr(i.length-this.model.delimiterChar.length)==this.model.delimiterChar?i:i+this.model.delimiterChar),this.value(this._setValue(i)),i){var s=this.model.dataSource;t.DataManager&&s instanceof t.DataManager?this._loadInitData(i):this._setHiddenkeyByValue(s)}this.model.showResetIcon&&""!=this.value()&&this._showReset()}else{var a=this._selectValueByKey().toString();"none"!=this.model.multiSelectMode&&(a=a.substr(a.length-this.model.delimiterChar.length)==this.model.delimiterChar?a:a+this.model.delimiterChar,"visualmode"==this.model.multiSelectMode?this._selectValueByKey(null):this._selectValueByKey(a)),this.selectValueByKey(a),this.model.showResetIcon&&this._showReset()}},_loadInitData:function(e){var i=this.model.dataSource,s=this,a=this.model.fields,r=a&&a.text?a.text:"text";if("none"!=this.model.multiSelectMode&&(e=e.split(this.model.delimiterChar)),t.DataManager&&i instanceof t.DataManager&&!s._trigger("actionBegin",{requestFrom:"default"})){var n,o=this._getQuery();if("object"==typeof e){for(var l=0;l<e.length-1;l++)o.queries.push(t.Predicate(r,"equal",e[l].trim(),!this.model.caseSensitiveSearch));n=i.executeQuery(o)}else n=i.executeQuery(this._getQuery().where(r,"equal",e,!this.model.caseSensitiveSearch));n.done(function(e){s._trigger("actionSuccess",{e:e,requestFrom:"default"}),(!e.result||e.result.length>0)&&s._setHiddenkeyByValue(e.result)})}},_setHiddenkeyByValue:function(e){t.isNullOrUndefined(this.value())&&this.value("");var i=this.value(),s=e,a=[],r=[];if(i="none"==this.model.multiSelectMode?i:i.split(this.model.delimiterChar),!t.isNullOrUndefined(s)){for(var n=0;n<s.length;n++){var o=this._getField(s[n],this.model.fields.text);if("number"==typeof o&&(o=o.toString()),t.isNullOrUndefined(this.model.fields.key)){if(t.isNullOrUndefined(this.model.fields.key))if("object"==typeof i){for(var l=0;l<i.length-1;l++)o==i[l].trim()&&r.push(o);r=this._removeDuplicateVal(r),this._hiddenInput.val(r)}else o==i&&this._hiddenInput.val(o)}else{var d=this._getField(s[n],this.model.fields.key);if("string"==typeof i)o==i&&this._hiddenInput.val(d);else for(var h=0;h<i.length-1;h++)o==i[h]&&(""==this._hiddenInput.val()?this._hiddenInput.val(d):this._hiddenInput.val(this._hiddenInput.val()+this.model.delimiterChar+d+this.model.delimiterChar))}a.push(o)}"object"!=typeof i&&-1==a.indexOf(i)&&this._hiddenInput.val(i)}},_checkNameAttr:function(){this.model.name=null!=this.element.attr("name")?this.element.attr("name"):null!=this.model.name?this.model.name:this.element[0].id,this.element.attr("name",this.model.name)},_disabled:function(e){e?this.disable():this.enable()},_destroyDropdown:function(){this.dropdownbutton.off("mousedown",e.proxy(this._OnDropdownClick,this)),this.dropdownbutton.remove(),this.dropdownbutton=null,this.container.removeClass("e-padding")},_validateDelimiter:function(t){if(e.trim(t).length==t.length||null!=t.length){if(!/^[a-zA-Z0-9]+$/.test(t))return t}return","},_checkWatermarkSupport:function(){return"placeholder"in document.createElement("input")},_setWatermark:function(){(this.model.watermarkText&&(""==this.value()||t.isNullOrUndefined(this.value()))||"visualmode"!=this.model.multiSelectMode)&&this.element.attr("placeholder",this.model.watermarkText).width("")},_setWatermarkTxt:function(){if(null!=this.model.watermarkText&&""==e.trim(this.element.val())&&("visualmode"!=this.model.multiSelectMode||""==e.trim(this._hiddenInput.val()))){var t=null!=this.model.watermarkText?this.model.watermarkText:this._localizedLabels.watermarkText;this._hiddenSpan.css("display","block").text(t)}},_renderSuggestionList:function(){var i=e("#"+this.element[0].id+"_suggestion").get(0);i&&e(i).remove(),this.suggestionList=t.buildTag("div.e-atc-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_suggestion","",{display:"none"}).attr("role","listbox"),this.element.attr("aria-owns",this.target.id+"_suggestion"),this.popup=this.suggestionList;var s=t.buildTag("div");if(this.model.multiColumnSettings.enable){if(this._tableColumn=t.buildTag("table","",{border:0,padding:0,"border-spacing":0},{role:"listbox",class:"e-atc-tableContent"}),this._listEventBind(this._tableColumn,"tr"),this._headerColGroup=document.createElement("colgroup"),this.model.multiColumnSettings.showHeader){this._tableHeaderDiv=t.buildTag("div",{},{},{class:"e-atc-tableHeader "+(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll")});var a=t.buildTag("div",{},{},{class:"e-atc-tableHeaderContent e-atc-tableHeaderBorder"
}),r=document.createElement("tr");this._tableHeader=t.buildTag("table","",{"border-spacing":"0.25px"},{});for(var n=0,o=this.model.multiColumnSettings.columns.length;n<o;n++)if(0!=this.model.multiColumnSettings.columns[n].visible){var l=t.buildTag("th",this.model.multiColumnSettings.columns[n].headerText?this.model.multiColumnSettings.columns[n].headerText:"column"+n,{"text-align":this.model.multiColumnSettings.columns[n].headerTextAlign?this.model.multiColumnSettings.columns[n].headerTextAlign:"left"},{class:n==this.model.multiColumnSettings.columns.length-1?"":this.model.enableRTL?"e-atc-thleft":"e-atc-thright"});e(r).append(l);var d=document.createElement("col");e(this._headerColGroup).append(d)}else this._hiddenColumns.push(this.model.multiColumnSettings.columns[n]);e(this._tableHeaderDiv).append(e(a).append(e(this._tableHeader).append(r).append(this._headerColGroup))),this.suggestionList.append(this._tableHeaderDiv)}else{for(var n=0,o=this.model.multiColumnSettings.columns.length;n<o;n++)e(this._headerColGroup).append(document.createElement("col"));this._tableColumn.append(this._headerColGroup)}var h=t.buildTag("div");h.append(this._tableColumn),s.append(h)}else this.ul=t.buildTag("ul.e-ul").attr("role","listbox"),this._listEventBind(this.ul,"li:not('.e-category')"),s.append(this.ul);this.suggestionList.append(s),e("body").append(this.suggestionList),this._setListWidth(),this._setListHeight(),this.model.multiColumnSettings.enable?(s.ejScroller({height:0,width:0,scrollerSize:20}),this.scrollerObj=s.ejScroller("instance")):(this.suggestionList.ejScroller({height:0,width:0,scrollerSize:20}),this.scrollerObj=this.suggestionList.ejScroller("instance"))},_listEventBind:function(t,i){t.on({mouseenter:e.proxy(this._OnMouseEnter,this),mouseleave:e.proxy(this._OnMouseLeave,this),click:e.proxy(this._OnMouseClick,this)},i)},_checkEmptyList:function(){"visualmode"==this.model.multiSelectMode&&this._removeRepeated(),0==this.suggestionListItems.length?(this.suggestionListItems.push(this.model.emptyResultText),this.noresult=!0):this.noresult=!1},_showSuggestionList:function(e){this.suggestionListItems=this.model.enableDistinct?t.dataUtil.distinct(this.suggestionListItems,"object"!=typeof this.suggestionListItems[0]?"":this.model.fields&&this.model.fields.text?this.model.fields.text:"text",!0):this.suggestionListItems,this.model.itemsCount>0&&(this.suggestionListItems=t.DataManager(this.suggestionListItems).executeLocal(t.Query().take(this.model.itemsCount))),this._checkEmptyList(),this._addNewTemplate=null,this.noresult&&"visualmode"==this.model.multiSelectMode&&this.model.allowAddNew&&""!=this.element.val()&&!this._repeatRemove&&(this.noresult=!1,this.suggestionListItems.pop(),this._addNewTemplate="   ("+this.model.addNewText+")",this.suggestionListItems.push(this.element.val()+this._addNewTemplate),this._checkEmptyList()),this.noresult&&!this.model.showEmptyResultText||this._generateSuggestionList(e)},_generateSuggestionList:function(i){var s,a=this.suggestionListItems;this.model.multiColumnSettings.enable?this._tableColumn.empty()&&this.model.multiColumnSettings.showHeader&&this._tableHeaderDiv.css("display",""):this.ul.empty();var r=this,n=document.createDocumentFragment();if("object"!=typeof a[0]){if(r.model.multiColumnSettings.enable){for(var o=t.buildTag("tbody"),l=t.buildTag("tr").attr("role","option").attr(r._isIE8?{unselectable:"on"}:{}),d=t.buildTag("td",{},{},{role:"option"}),s=0,h=a.length;h>s;s++){var c=r.model.highlightSearch&&!r.noresult?r._highlightSuggestion(a[s]):a[s],u=l.clone(),p=d.clone();e(p).attr(r._isIE8?{unselectable:"on"}:{}).attr(a[s]!=a.length-1?{class:"e-atc-tdbottom"}:{}).html(c),u[0].appendChild(p[0]),o[0].appendChild(u[0]),n.appendChild(o[0]),r.model.showEmptyResultText&&r.model.emptyResultText==c&&r.model.multiColumnSettings.showHeader&&r._tableHeaderDiv.css("display","none")&&e(p).removeClass("e-atc-tdbottom"),r._addNewTemplate&&!t.isNullOrUndefined(r._tableHeaderDiv)&&r._tableHeaderDiv.css("display","none")}r._tableColumn[0].appendChild(n)}else{for(var m=t.buildTag("li",{},{},{role:"option"}).attr(r._isIE8?{unselectable:"on"}:{}),s=0,h=a.length;h>s;s++){var c=r.model.highlightSearch&&!r.noresult?r._highlightSuggestion(a[s]):a[s],g=m.clone();g[0].innerHTML=c,n.appendChild(g[0])}r.ul[0].appendChild(n)}this._currList=a,this._mapper={txt:null,key:null}}else{var f=this.model.fields,_={_key:null,_text:null,_attr:null};if(_._key=f&&f.key?f.key:"key",_._text=f&&f.text?f.text:"text",_._attr=f&&f.htmlAttributes?f.htmlAttributes:"htmlAttributes",this._mapper={txt:_._text,key:_._key},this._currList=[],this.model.fields.groupBy){var v,b,x=f&&f.groupBy?f.groupBy:"groupBy";b=t.Query().group(x),this._addSortingQuery(b,"key"),v=t.DataManager(a).executeLocal(b),this._swapUnCategorized(v),v.forEach(function(e,i){if(e.key)if(r.model.multiColumnSettings.enable){var s=t.buildTag("tr.e-category").attr("role","option").attr(r._isIE8?{unselectable:"on"}:{});s.append(t.buildTag("td",e.key).attr("role","option").attr(r._isIE8?{unselectable:"on"}:{}).attr(i!=a.length-1?{class:"e-atc-tdbottom"}:{})),r._tableColumn.append(s)}else r.ul.append(t.buildTag("li.e-category",e.key).attr("role","option").attr(r._isIE8?{unselectable:"on"}:{}));r._generateLi(e.items,_)})}else this._generateLi(a,_)}for(var s=0,h=a.length;h>s;s++)if(this.model.multiColumnSettings.enable){var y=this._textFormateString(this._currList[s]);if(y==this.value()){var w=this._getLiTags()[s];e(w).addClass("e-activeli")}}else for(var C=this.value().split(this.model.delimiterChar),S=0;S<=C.length;S++)if(this._currList[s]==C[S]){var w=this._getLiTags()[s];e(w).addClass("e-activeli")}this._getLiTags().length>0&&this._showResult(i)},_swapUnCategorized:function(e){for(var t=e.length,i=0;i<t;i++)if(!e[i].key){for(var s=i;s>0;s--)e[s]=e[s-1];return e[s]=e[i],!1}},_generateLi:function(i,s){var a=this,r=document.createDocumentFragment(),n=document.createDocumentFragment();if(a.model.multiColumnSettings.enable){var o=a.model.multiColumnSettings.columns.length;this._tableColumn.append(t.buildTag("tbody"));for(var l=t.buildTag("tr"),d=t.buildTag("td"),h=0,c=i.length;c>h;h++){var u=this._getField(i[h],s._text),p=this._getField(i[h],s._key);if(!t.isNullOrUndefined(u)||a.model.multiColumnSettings.enable){var m=(a._getField(i[h]),l.clone());m[0].className=h%2?"e-atc-trbgcolor":"";for(var g=0;g<o;g++)if(0!=this.model.multiColumnSettings.columns[g].visible){var f=d.clone();0!=this.model.multiColumnSettings.searchColumnIndices.length?f[0].innerHTML=a.model.highlightSearch&&e.inArray(g,a._searchColumnIndex)>-1?a._highlightSuggestion(a._getField(i[h],a.model.multiColumnSettings.columns[g].field).toString()):a._getField(i[h],a.model.multiColumnSettings.columns[g].field):f[0].innerHTML=a.model.highlightSearch&&e.inArray(g.toString(),a._columnIndex)>-1?t.isNullOrUndefined(a._getField(i[h],a.model.multiColumnSettings.columns[g].field))?a._highlightSuggestion(""):a._highlightSuggestion(a._getField(i[h],a.model.multiColumnSettings.columns[g].field).toString()):a._getField(i[h],a.model.multiColumnSettings.columns[g].field),f[0].className=(h!=i.length-1?"e-atc-tdbottom ":"")+(g!=a.model.multiColumnSettings.columns.length-1?a.model.enableRTL?"e-atc-tdleft ":"e-atc-tdright ":"")+(a.model.multiColumnSettings.columns[g].cssClass?a.model.multiColumnSettings.columns[g].cssClass:""),f[0].style.textAlign=a.model.multiColumnSettings.columns[g].textAlign?a.model.multiColumnSettings.columns[g].textAlign:"left",n.appendChild(f[0])}m[0].appendChild(n),p&&m.attr("id",p),a._setAttributes(a._getField(i[h],s._attr),m[0]),r.appendChild(m[0]),a._currList=a._currList.concat([i[h]])}}e(a._tableColumn).find("tbody")[0].appendChild(r)}else{for(var _=e("<li></li>"),h=0,c=i.length;c>h;h++){var u=this._getField(i[h],s._text),p=this._getField(i[h],s._key);if(!t.isNullOrUndefined(u)){a.model.highlightSearch&&(u=a._highlightSuggestion(u)),a.model.template&&(u=a._getTemplatedString(i[h],s._text,u));var v=_.clone();v[0].innerHTML+=u,p&&v[0].setAttribute("id",p),a._setAttributes(a._getField(i[h],s._attr),v[0]),r.appendChild(v[0]),a._currList=a._currList.concat([i[h]])}}a.ul[0].appendChild(r)}},_getLiTags:function(){return this.model.multiColumnSettings.enable?this._tableColumn.find("tbody tr:not('.e-category')"):this.ul.children("li:not('.e-category')")},_getTemplatedString:function(e,t,i){for(var s=this.model.template,a=s.indexOf("${"),r=s.indexOf("}");-1!=a&&-1!=r;){var n=s.substring(a,r+1),o=n.replace("${","").replace("}",""),l=this._getField(e,o);t==o&&(l=i),l||(l=""),s=s.split(n).join(l),a=s.indexOf("${"),r=s.indexOf("}")}return s},_getField:function(e,i){return t.pvt.getObject(i,e)},_setAttributes:function(t,i){if(t){"string"==typeof t&&(t=e.parseJSON(t));for(var s in t)i.setAttribute(s,t[s])}},_setListWidth:function(){var e=this.model.popupWidth;e&&"auto"!=e?this.suggestionList.css({width:e}):this.suggestionList.css({width:this.wrapper.width()})},_setListHeight:function(){this.suggestionList.css({"max-height":this.model.popupHeight})},_refreshPopup:function(){"auto"==this.model.popupWidth&&Math.floor(this.wrapper.outerWidth())!=Math.floor(this.suggestionList.outerWidth())&&(this.suggestionList.css({width:this.wrapper.width()}),this._refreshScroller()),this._setListPosition()},_showResult:function(i){if(this._refreshScroller(),this._refreshPopup(),this._isOpened)e(document).on("mousedown",e.proxy(this._OnDocumentClick,this));else{this.suggestionList.css("display","none");var s=this;clearTimeout(this._typing),this._typing=setTimeout(function(){s.suggestionList["slide"==s.model.animateType?"slideDown":"fadeIn"]("none"==s.model.animateType?0:300,function(){e(document).on("mousedown",e.proxy(s._OnDocumentClick,s))})},this.model.delaySuggestionTimeout);var a=void 0!=i?{event:i,isInteraction:!0}:{isInteraction:!1};this._trigger("open",a),this.wrapper.addClass("e-active")}this._isOpened=!0,this.showSuggestionBox=!0;var r=this._getLiTags();this._listSize=r.length,e(window).on("resize",e.proxy(this._OnWindowResize,this));var n=t.getScrollableParents(this.wrapper);n[0]!=window&&this._on(n,"scroll",this._hideResult)},_hideResult:function(i){if(this.showSuggestionBox){this.showSuggestionBox=!1,this._activeItem=0,clearTimeout(this._hiding),this.element.attr("aria-expanded",!1);var s=this;if(this._isOpened){this.suggestionList.css("display","none");var a=void 0!=i?{event:i,isInteraction:!0}:{isInteraction:!1};this._trigger("close",a)}else this._hiding=setTimeout(function(){s.model&&s.suggestionList["slide"==s.model.animateType?"slideUp":"fadeOut"]("none"==s.model.animateType?0:100),s._activeItem=0},this.model.delaySuggestionTimeout);e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this.wrapper.removeClass("e-active")}},_refreshScroller:function(){this.suggestionList.css("height","auto"),this.suggestionList.find(".e-content , .e-scroller").removeAttr("style"),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(e(this._tableColumn).css("width","auto"),e(this._tableHeader).css("width","auto")),this.suggestionList.css("display","block"),this.model.multiColumnSettings.enable&&(this.scrollerObj.option("height","auto"),this._columnBorderAlign());var i=this.suggestionList.height()>parseInt(e.isNumeric(this.model.popupHeight)?this.model.popupHeight:this.model.popupHeight.replace("px",""))-4;i||this.model.multiColumnSettings.enable&&(this.suggestionList.height()<=this._tableColumn.height()||this.suggestionList.width()<=this._tableColumn.width()||this.model.multiColumnSettings.showHeader&&this.suggestionList.width()<=this._tableHeader.width())?(i&&(this.scrollerObj.model.height=this.model.multiColumnSettings.showHeader&&this._tableHeader?parseInt(this.suggestionList.height())-parseInt(this._tableHeader.height()):this.suggestionList.height()),!this.model.multiColumnSettings.enable&&this.suggestionList.width()<this.suggestionList.find(".e-ul").width()&&this.suggestionList.find(".e-ul").width(this.suggestionList.find(".e-ul").width()),this.scrollerObj.model.width=this.suggestionList.width(),this.scrollerObj.refresh(),this.scrollerObj.option({enableRTL:this.model.enableRTL,scrollTop:0,scrollLeft:0}),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._addThBorder(),this.suggestionList.addClass("e-scroller"),!this.scrollerObj._vScroll&&this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._removeThBorder()):(this.scrollerObj.setModel({height:"auto",width:this.suggestionList.width()}),this.scrollerObj.refresh(),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._removeThBorder()),this.suggestionList.css("height","auto"),this._isIE8&&this.suggestionList.find(".e-vscroll div, .e-hscroll div").attr("unselectable","on"),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(this.suggestionList.find(".e-content").scroll(t.proxy(function(t){this._tableHeader.parent(".e-atc-tableHeaderContent").scrollLeft(e(t.currentTarget).scrollLeft())},this)),this.suggestionList.find(".e-content").length>0&&this._tableHeader.parent(".e-atc-tableHeaderContent").scrollLeft(this.model.enableRTL?this.suggestionList.find(".e-content")[0].scrollWidth-this.suggestionList.find(".e-content")[0].clientWidth:0))},_columnBorderAlign:function(){if(this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&"none"!=this._tableHeaderDiv.css("display")){this._tableWid=this._tableHeader.outerWidth()>this._tableColumn.outerWidth()?this._tableHeader.outerWidth():this._tableColumn.outerWidth(),this._tableColumn.find("colgroup").remove(),e(this._headerColGroup.children).removeAttr("style");for(var t=0,i=this._headerColGroup.children.length;t<i;t++)e(this._headerColGroup.children[t]).css({width:parseInt(e(this._tableColumn).find("tr:first td").eq(t).outerWidth())>parseInt(this._tableHeader.find("tr:first th").eq(t).outerWidth())?e(this._tableColumn).find("tr:first td").eq(t).outerWidth():this._tableHeader.find("tr:first th").eq(t).outerWidth()});this._tableColumn.append(e(this._headerColGroup).clone());var s=this._tableWid>this.suggestionList.width()?this._tableWid:"100%";e(this._tableColumn).css("width",s),e(this._tableHeader).css("width",s)}else if(this.model.multiColumnSettings.enable&&!this.model.multiColumnSettings.showHeader){e(this._tableColumn).css("width","auto"),this._tableWid=this._tableColumn.outerWidth(),e(this._headerColGroup.children).removeAttr("style");var s=this._tableWid>this.suggestionList.width()?this._tableWid:"100%";if("100%"!=s){for(var t=0,i=this._headerColGroup.children.length;t<i;t++)e(this._headerColGroup.children[t]).css({width:e(this._tableColumn).find("tr:first td").eq(t).outerWidth()});this._tableColumn.append(this._headerColGroup)}e(this._tableColumn).css("width",s)}else e(this._tableColumn).css("width","100%")},_removeThBorder:function(){this._tableHeader.parents(".e-atc-tableHeader").removeClass(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll"),this._tableHeader.parent(".e-atc-tableHeaderContent").removeClass("e-atc-tableHeaderBorder")},_addThBorder:function(){this._tableHeader.parents(".e-atc-tableHeader").addClass(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll").removeClass(this.model.enableRTL?"e-atc-tableHeaderScroll":"e-atc-tableHeaderRTL"),this._tableHeader.parent(".e-atc-tableHeaderContent").addClass("e-atc-tableHeaderBorder")},_setListPosition:function(){var t,i=this.wrapper,s=this._getOffset(i),a=e(document).scrollTop()+e(window).height()-(s.top+e(i).outerHeight()),r=s.top-e(document).scrollTop(),n=this.suggestionList.outerHeight(),o=this.suggestionList.outerWidth(),l=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),u=(n<a||n>r?s.top+d+3:s.top-n-3)-h;t=e(document).scrollLeft()+e(window).width()-l,(this.model.enableRTL||o>t&&o<l+i.outerWidth())&&(l-=this.suggestionList.outerWidth()-i.outerWidth()),this.suggestionList.css({left:l+"px",top:u+"px","z-index":c})},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.suggestionList)},_targetFocus:function(e){"visualmode"==this.model.multiSelectMode&&this._setWatermarkWidth(30),this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this._focusValue=this.model.value,this._preVal=this.model.value,this._isFocused=!0,this._trigger("focusIn",{event:e,isInteraction:!0,value:this.value()})},_focusOutAction:function(e){var i="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val();if(this._isFocused=!1,this.wrapper.removeClass("e-focus"),t.isNullOrUndefined(this.model.fields.key))if("none"==this.model.multiSelectMode){var s=this.model.dataSource;t.DataManager&&s instanceof t.DataManager?this._loadInitData():this._setHiddenkeyByValue(s)}else this._hiddenInput.val(i);if(this._focusValue==this.model.value||this.model.isChangeOnBlur){if(!this.model.isChangeOnBlur||this._preVal==i)return!1;this.value(i),""==this._hiddenInput.val()&&this._hiddenInput.val(i),this._changeEvtTrigger(i,e)}else""==this._hiddenInput.val()&&this._hiddenInput.val(i),this._changeEvtTrigger(i,e);if(this.model.showPopupButton&&this.dropdownbutton.removeClass("e-active"),!this._isWatermark&&this._setWatermarkTxt(),this._removeSelection(),"visualmode"==this.model.multiSelectMode&&this.model.showResetIcon&&""!=this.element.val()&&this._removeReset(),"visualmode"==this.model.multiSelectMode?(this._removeActive(),this.element.val(""),this._setWatermarkWidth(1),this._preVal="",this._addNewTemplate=null):("delimiter"==this.model.multiSelectMode&&this._valueChange(e),this._updateSelectedItemArray(this.getValue())),!t.isNullOrUndefined(this.value())&&""!=this.value()){var a=this.value().split(this.model.delimiterChar);if("delimiter"==this.model.multiSelectMode||"none"==this.model.multiSelectMode){var r=this._removeDuplicateVal(a);this._keyProcess(r)}}""!=this.element.val()||""!=this.value()&&null!=this.value()||this._selectValueByKey(null)},_targetBlur:function(e){this._focusOutAction(e),this._trigger("focusOut",{event:e,isInteraction:!0,value:this.value()}),this._targetEle()},_setWatermarkWidth:function(e){this.model.watermarkText&&this.element.attr("placeholder")?this.element.width(""):this.element.val("").width(e)},_checkDeli:function(){var e=this.element.val(),t=this.model.delimiterChar;return e.substr(e.length-t.length,e.length)==t&&(this.element.val(e.substr(0,e.length-t.length)),!0)},_removeSelection:function(){if(this.model.enableAutoFill){this.element.attr("aria-autocomplete","both");var e=this._getCaretSelection();e.end-e.start!=0&&e.end-e.start!=this.element.val().length&&(this.target.value=this.target.value.substr(0,e.start))}},_removeListHover:function(){this._getLiTags().removeClass("e-hover")},_addListHover:function(){var t=e(this._getLiTags()[this._activeItem-1]);t.addClass("e-hover"),this.scrollerObj.setModel({scrollTop:this._calcScrollTop()}),t.focus()},_calcScrollTop:function(){var e,t=(this.model.multiColumnSettings.enable?this.model.multiColumnSettings.showHeader?(this._tableColumn.outerHeight(),this._tableHeader.outerHeight()):this._tableColumn.outerHeight():this.ul.outerHeight(),this.model.multiColumnSettings.enable?this._tableColumn.find("tr"):this.ul.find("li")),i=0;return e=this.model.multiColumnSettings.enable?this._tableColumn.find("tr.e-hover").index():this.ul.find("li.e-hover").index(),i=t.eq(1).outerHeight()*e,i-((this.model.multiColumnSettings.enable?this._tableColumn.parent().outerHeight():this.suggestionList.outerHeight())-t.eq(e).outerHeight())/2},getActiveText:function(){if(this._activeItem>0)return this.model.multiColumnSettings.enable?this._textFormateString(this._currList[this._activeItem-1]):!t.isNullOrUndefined(this._mapper)&&this._mapper.txt?this._getField(this._currList[this._activeItem-1],this._mapper.txt):this._currList[this._activeItem-1]},_getUniqueKey:function(){var e=null;return t.isNullOrUndefined(this._mapper)||(this._mapper.key&&(e=this._getField(this._currList[this._activeItem-1],this._mapper.key)),t.isNullOrUndefined(e)&&(e=null)),e},_setTextBoxValue:function(){if(this._activeItem&&!this.noresult){var t,i,s,a;t=this.model.multiColumnSettings.enable?this._textFormateString(this._currList[this._activeItem-1]):this.getActiveText(),i=this._getCaretSelection(),this.suggLen=i.start,s=this.target.value.substr(0,this.suggLen);var r=this.target.value.lastIndexOf(this.model.delimiterChar);if(-1==r)var n=e.trim(s.substr(r+1,this.suggLen));else var n=e.trim(s.substr(r+this.model.delimiterChar.length,this.suggLen));!s||s.toLowerCase()!=t.substr(0,this.suggLen).toLowerCase()&&n.toLowerCase()!=t.substr(0,this.suggLen-(r+this.model.delimiterChar.length)).toLowerCase()?("delimiter"==this.model.multiSelectMode&&t&&n?this.element.val(this.element.val().replace(n,t)):t&&this.element.val(t),this._removeSelection()):(a="delimiter"==this.model.multiSelectMode?s+t.substr(n.length,t.length):s+t.substr(s.length,t.length),this.element.val(a),this._autofilSelection(),"visualmode"==this.model.multiSelectMode&&(this._adjustWidth(),this.model.enableAutoFill&&this._refreshPopup()),this.model.autoFocus&&!this.noresult&&this._addListHover())}},_enterTextBoxValue:function(e){if(this._activeItem&&!this.noresult&&!this.model.readOnly){var t=this.getActiveText(),i=this._currList[this._activeItem-1];this._preVal=t+("delimiter"==this.model.multiSelectMode?this.model.delimiterChar:""),this._valueToTextBox(t,i,!1);var s="visualmode"==this.model.multiSelectMode?this._modelValue:""==this.element.val()?null:this.element.val();this._trigger("select",{event:e,isInteraction:!0,value:s,text:t,key:this._getUniqueKey(),item:i}),this._valueChange(e),this.model.showResetIcon&&this._showReset()}this._isOpened&&this._trigger("close",{event:e,isInteraction:!0})},_createBox:function(i){var s=t.buildTag("span.e-icon e-close"),a=t.buildTag("li.e-options",i).append(s);return this._on(s,"click",function(t){if(!this.model.enabled)return!1;this._deleteBox(e(t.target).parent())}),a},_addLoadingClass:function(){this.model.showLoadingIcon&&this.element.addClass("e-load")},_removeLoadingClass:function(){this.element.removeClass("e-load")},_highlightSuggestion:function(t){if(""!=e.trim(this._queryString)){var i,s,a,r,n,o,l;if(i=this.model.caseSensitiveSearch?"g":"gi",o=e.trim(this._queryString),o=/^[a-zA-Z0-9- ]*$/.test(o)?o:o.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),s="startswith"==this.model.filterType?"^"+o:"endswith"==this.model.filterType?o+"$":o,a=new RegExp(s,i),a.test(t)){r=t.match(a),l=t.replace(a,"~^"),n=l.split("~^"),t="";for(var d=0,h=n.length;h>d;d++)t+=r[d]?n[d]+"<span class='e-hilight-txt'>"+r[d]+"</span>":n[d]}}return t},_RightToLeft:function(e){e?(this.wrapper.addClass("e-rtl"),this.suggestionList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.suggestionList.removeClass("e-rtl")),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(this._tableHeaderDiv.removeClass(e?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll"),this._tableHeader.find("tr :not(th:last)").addClass(e?"e-atc-thleft":"e-atc-thright").removeClass(e?"e-atc-thright":"e-atc-thleft"))},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.suggestionList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.suggestionList.removeClass("e-corner"))},_checkReadOnly:function(e){this.model.readOnly=e,this.model.readOnly?(this.element.attr({readonly:"readonly","aria-readonly":!0}),this._off(this.element,"keydown",this._OnKeyDown),this._off(this.element,"keyup",this._OnKeyUp),this._off(this.element,"paste",this._OnPaste),this._off(this.element,"keypress",this._onkeyPress)):(this.element.removeAttr("readonly aria-readonly"),this._on(this.element,"keydown",this._OnKeyDown),this._on(this.element,"keyup",this._OnKeyUp),this._on(this.element,"paste",this._OnPaste),this._on(this.element,"keypress",this._onkeyPress))},_onkeyPress:function(e){13==e.keyCode&&this._PreventDefaultAction(e)},_OnPaste:function(e){var t=this;setTimeout(function(){t._OnKeyUp(e)},0)},_OnKeyDown:function(t){switch("startswith"!=this.model.filterType&&(this.model.enableAutoFill=!1),t.keyCode){case 37:case 35:case 36:this._removeSelection();case 13:case 39:break;case 38:this.showSuggestionBox&&this.suggestionList&&(this._removeListHover(),this._activeItem>1?this._activeItem-=1:this._activeItem=this._listSize,this._navigationHover()),this._PreventDefaultAction(t);break;case 40:this.showSuggestionBox&&this.suggestionList?(this._removeListHover(),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=1,this._navigationHover()):t.ctrlKey&&""==this.element.val()?this._showFullList(t):t.ctrlKey&&this._showSuggestionList(t),this._PreventDefaultAction(t);break;case 33:case 34:if(this.showSuggestionBox&&this.suggestionList){this._removeListHover();var i=this.model.multiColumnSettings.enable?this._tableColumn.parent().height():this.suggestionList.height(),s=this.model.multiColumnSettings.enable?this._tableColumn.find("tr").outerHeight():this.ul.children("li").outerHeight(),a=0!=Math.round(i/s)?Math.round(i/s):this._listSize;this._activeItem=33==t.keyCode?this._activeItem-a:this._activeItem+a,this._activeItem<1&&(this._activeItem=1),this._activeItem>this._listSize&&(this._activeItem=this._listSize),this._navigationHover()}this._PreventDefaultAction(t);break;case 8:""==e.trim(this.element.val())&&(this._isOpened=!1),"visualmode"==this.model.multiSelectMode&&""==this.element.val()&&this._deleteLastBox();break;case 17:this.ctrlKeyPressed=!0;break;case 9:this.showSuggestionBox&&(this._queryString=this.element.val(),this._enterTextBoxValue(t),this._hideResult(t),this._isOpened=!1,this._PreventDefaultAction(t));break;case 27:this._isOpened=!1;var r=this.showSuggestionBox;this._hideResult(t),this._PreventDefaultAction(t),r&&this._trigger("close",{event:t,isInteraction:!0})}"visualmode"==this.model.multiSelectMode&&(17!=t.keyCode&&8!=t.keyCode&&46!=t.keyCode&&this._removeActive(),this._adjustWidth())},_PreventDefaultAction:function(e){e.preventDefault(),this._cancelEvent||(e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!0)},_bubbleEvent:function(e){return"boolean"==typeof e&&(this._cancelEvent=e),this._cancelEvent},_navigationHover:function(){this._addListHover(),this.model.enableAutoFill&&(this.element.attr("aria-autocomplete","both"),this._queryString=this.target.value,this._setTextBoxValue())},_OnKeyUp:function(t){if(this._keyDownComplete(t),this.ctrlKeyPressed&&"paste"!=t.type)return 17==t.keyCode&&(this.ctrlKeyPressed=!1),!1;if(""==e.trim(this.element.val())&&38==t.keyCode&&40==t.keyCode)return this._hideResult(t),!1;if(!this._checkDelimiter())return!1;switch(this._queryString=e.trim(this._queryString),t.keyCode){case 34:case 33:case 38:case 40:case 37:case 39:case 20:case 16:case 17:case 18:case 35:case 36:case 144:case 9:case 27:break;case 13:t.preventDefault(),this._queryString=this.element.val(),this._enterTextBoxValue(t),this.model.enableAutoFill&&(this.element.attr("aria-autocomplete","both"),this.suggLen=this.element.val().length,this._autofilSelection()),this._isOpened=!1,this._hideResult(t);break;case 46:if("visualmode"==this.model.multiSelectMode&&""==this.element.val()){this._deleteBox(this._ulBox.children("li.e-active"));break}case 8:this._queryString.length>=this.model.minCharacter?(this._autoFill=!1,this._OnTextEnter(t)):(this.noresult=!0,this._hideResult(t),""==e.trim(this.element.val())&&(this._isOpened=!1)),this._typed=!0;break;default:this._queryString.length>=this.model.minCharacter?(this._autoFill=!0,this._OnTextEnter(t)):(this.noresult=!0,this._isOpened=!1),this._typed=!0}},_getFilteredList:function(e,i){if(clearTimeout(this.timeDelay),!t.isNullOrUndefined(e)&&"object"==typeof e[0]){var s=this.model.fields.text?this.model.fields.text:"text";this.model.actionFailure&&t.isNullOrUndefined(t.DataManager(e).executeLocal(t.Query().select(s))[0])&&this._trigger("actionFailure",{error:this._localizedLabels.actionFailure})}if(!e||!e.length||e.length<1)this.suggestionListItems=[],this.model.actionFailure&&this._trigger("actionFailure",{error:this._localizedLabels.actionFailure});else{var a=t.Query();this._addQuery(a,"object"==typeof e[0]),this.suggestionListItems=t.DataManager(e).executeLocal(a),this.model.actionSuccess&&this._trigger("actionSuccess")}this._doneRemaining(i),this.model.actionComplete&&this._trigger("actionComplete")},_performSearch:function(e){this.model.actionBegin&&this._trigger("actionBegin");var i=this.model.dataSource;if(t.DataManager&&i instanceof t.DataManager)if(i.dataSource.offline||i.dataSource.json&&i.dataSource.json.length>0)this._getFilteredList(i.dataSource.json,e),this._selectedObj.push(i.dataSource.json);else{window.clearTimeout(this.timer);var s=this;this.timer=window.setTimeout(function(){s._fetchRemoteDat(i)},700)}else this._getFilteredList(i,e)},_fetchRemoteDat:function(e){var t,i=this,s=this._getQuery();this._addQuery(s,!0),t=e.executeQuery(s),t.fail(function(e){i.suggestionListItems=null,i._removeLoadingClass(),i._trigger("actionFailure",e)}).done(function(e){i.suggestionListItems=e.result,"none"==i.model.multiSelectMode?i._selectedObj=e.result:"delimiter"==i.model.multiSelectMode&&(i._selectedObj=i._selectedObj.concat(e.result)),i._doneRemaining(e),i._trigger("actionSuccess",e)}).always(function(e){i._trigger("actionComplete",e)})},_addSortingQuery:function(e,t){if(this.model.allowSorting){var i="descending"==this.model.sortOrder;e.sortBy(t,i)}},_addQuery:function(e,i){var s,a,r="";if(this._predicates=[],i){var n=this.model.fields;r=n&&n.text?n.text:"text"}if(this._queryString)if(this.model.multiColumnSettings.enable)if(this._columnsIndex(),i){var r=[];if(0!=this.model.multiColumnSettings.searchColumnIndices.length)for(var o=0,l=this._searchColumnIndex.length;o<l;o++)r.push(this.model.multiColumnSettings.columns[this._searchColumnIndex[o]].field),s=this._predicateConvertion(s,this.model.multiColumnSettings.columns[this._searchColumnIndex[o]].field,this.model.multiColumnSettings.columns[this._searchColumnIndex[o]].filterType?this.model.multiColumnSettings.columns[this._searchColumnIndex[o]].filterType:this.model.filterType,this._queryString,!this.model.caseSensitiveSearch,this.model.multiColumnSettings.columns[this._searchColumnIndex[o]].type?this.model.multiColumnSettings.columns[this._searchColumnIndex[o]].type:"string");else for(var o=0,l=this._columnIndex.length;o<l;o++)r.push(this.model.multiColumnSettings.columns[this._columnIndex[o]].field),s=this._predicateConvertion(s,this.model.multiColumnSettings.columns[this._columnIndex[o]].field,this.model.multiColumnSettings.columns[this._columnIndex[o]].filterType?this.model.multiColumnSettings.columns[this._columnIndex[o]].filterType:this.model.filterType,this._queryString,!this.model.caseSensitiveSearch,this.model.multiColumnSettings.columns[this._columnIndex[o]].type?this.model.multiColumnSettings.columns[this._columnIndex[o]].type:"string");for(var o=0;o<e.queries.length;o++)"onWhere"==e.queries[o].fn&&(a=e.queries.slice(o)[0].e);t.isNullOrUndefined(a)&&0!=this.model.multiColumnSettings.searchColumnIndices.length?this._predicates.length>0&&e.where(t.Predicate.or(this._predicates)):0!=this.model.multiColumnSettings.searchColumnIndices.length?e.where(a.and(this._predicates)):t.isNullOrUndefined(a)?e.where(s):e.where(a.and(s))}else e.where(r,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch,this.model.ignoreAccent);else e.where(r,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch,this.model.ignoreAccent);this._addSortingQuery(e,r)},_predicateConvertion:function(e,i,s,a,r,n){var o,l=this.model.ignoreAccent
;return"number"==n?o=Number(a):"boolean"==n?"true"==a||"yes"==a||"1"==a?o=!0:"false"!=a&&"no"!=a&&"0"!=a||(o=!1):o="date"==n?new Date(a):a,"number"==n&&isNaN(o)||"boolean"==n&&void 0==o?e=e:0!=this.model.multiColumnSettings.searchColumnIndices.length?this._predicates.push(new t.Predicate(i,s,o,r,l)):e=void 0!=e?e.or(i,s,o,r,l):t.Predicate(i,s,o,r,l),e},_getQuery:function(){if(t.isNullOrUndefined(this.model.query)){var e=[],i=t.Query(),s=this.model.fields;for(var a in s)"tableName"!==a&&s[a]&&e.push(s[a]);e.length>0&&i.select(e),t.isNullOrUndefined(this.model.dataSource.dataSource.url)||this.model.dataSource.dataSource.url.match(s.tableName+"$")||!t.isNullOrUndefined(s.tableName)&&i.from(s.tableName)}else i=this.model.query.clone();return i},_OnTextEnter:function(e){var i=this;t.isDevice()?(clearTimeout(this.timeDelay),this.timeDelay=setTimeout(function(){i._onTextProcess(e)},i.model.delaySuggestionTimeout)):i._onTextProcess(e)},_onTextProcess:function(e){this._addLoadingClass(),this.element.attr("aria-expanded",!1),this._performSearch(e),this.model.showResetIcon&&this._showReset()},_showReset:function(){t.isNullOrUndefined(this.resetSpan)&&(this.resetSpan=t.buildTag("span.e-icon e-iclose"),this.model.showPopupButton?(this.dropdownbutton.before(this.resetSpan),this.container.addClass("e-popup e-reset")):this.container.append(this.resetSpan).addClass("e-reset"),this._on(this.resetSpan,"mousedown",this._refreshSearch))},_targetEle:function(){this.eleClick&&(this.element[0].focus(),this.eleClick=!1)},_refreshSearch:function(){this.model.enabled&&!this.model.readOnly&&(this.resetSpan=null,this.clearText(),this.eleClick=!0,this._refreshPopup())},_removeReset:function(){this.resetSpan=this.resetSpan&&this.resetSpan[0].remove(),this._refreshPopup()},_doneRemaining:function(e){this._showSuggestionList(e),this.element.attr({"aria-expanded":!0,"aria-haspopup":!0}),(this.model.enableAutoFill&&this._autoFill&&!this.noresult||this.model.autoFocus)&&(this.element.attr("aria-autocomplete","both"),this._activeItem=1,this._queryString=this.target.value),this.model.enableAutoFill&&this._autoFill&&!this.noresult&&this._setTextBoxValue(),this.model.autoFocus&&!this.noresult&&(this._addListHover(),this.wrapper.width()>0&&this.suggestionList.children("div.e-content").css({width:this.wrapper.width()})),this._removeLoadingClass(),this.noresult&&!this.model.showEmptyResultText&&this._hideResult(e)},_removeRepeated:function(){var e=this.suggestionListItems;if(!e||0==e.length||0==this._selectedItems.length||1==this.suggestionListItems.length&&this.suggestionListItems[0]==this.element.val()+this._addNewTemplate)return!1;this._repeatRemove=!1;for(var i=0,s=this._selectedItems.length;i<s;i++){var a;if(t.DataManager&&this.model.dataSource instanceof t.DataManager){var r=this,n=0;e.forEach(function(e){(t.isNullOrUndefined(e[r.model.fields.text])?t.isNullOrUndefined(e[r.model.fields.key])?t.isNullOrUndefined(e[r.model.fields.htmlAttributes])?!t.isNullOrUndefined(e[r.model.fields.groupBy])&&e[r.model.fields.groupBy]!=r._selectedItems[i][r.model.fields.groupBy]:e[r.model.fields.htmlAttributes]!=r._selectedItems[i][r.model.fields.htmlAttributes]:e[r.model.fields.key]!=r._selectedItems[i][r.model.fields.key]:e[r.model.fields.text]!=r._selectedItems[i][r.model.fields.text])||(a=n),n++})}else a=e.indexOf(this._selectedItems[i]),isNaN(parseFloat(this._selectedItems[i]))||(a=e.indexOf(parseFloat(this._selectedItems[i])));-1==a||t.isNullOrUndefined(a)||this.suggestionListItems.splice(a,1),this.element.val()==this._selectedItems[i]&&(this._repeatRemove=!0)}},_checkDelimiter:function(){this._queryString=this.element.val();var e="delimiter"!=this.model.multiSelectMode?-1:this._queryString.lastIndexOf(this.model.delimiterChar);return-1==e||(this._queryString=this._queryString.substr(e+this.model.delimiterChar.length,this._queryString.length),!0)},_autofilSelection:function(){var e=this.element[0],t=this.element.val().length;e.setSelectionRange?e.setSelectionRange(this.suggLen,t):e.createTextRange&&(e=e.createTextRange(),e.collapse(!0),e.moveEnd("character",t),e.moveStart("character",this.suggLen),e.select())},_OnDropdownClick:function(e){this.model.enabled&&!this.model.readOnly&&(e.preventDefault(),this.dropdownbutton.addClass("e-active"),this._iconEventBind(this.dropdownbutton,"span"),(e.which&&1==e.which||e.button&&0==e.button)&&(this._addLoadingClass(),this.showSuggestionBox?(this._hideResult(e),this._isOpened=!1,this._removeLoadingClass()):this._showFullList(e)))},_iconEventBind:function(t,i){t.on({mouseleave:e.proxy(this._OnMouseIconClick,this)},i)},_OnMouseIconClick:function(e){this.dropdownbutton.removeClass("e-active")},_showFullList:function(e){this._isFocused||this.element.focus(),this._queryString=null,this._autoFill=!1,this._performSearch(e)},_OnMouseEnter:function(e){this._getActiveItemIndex(e),this.model.showPopupButton&&this.dropdownbutton.removeClass("e-active")},_getActiveItemIndex:function(t){var i=t.target;this.model.multiColumnSettings.enable&&"tr"!=t.target.tagName.toLowerCase()?i=e(t.target).parents("tr"):"li"!=t.target.tagName.toLowerCase()&&(i=e(t.target).parents("li")),this._getLiTags().removeClass("e-hover"),e(i).addClass("e-hover"),this._queryString=this.element.val(),this._activeItem=this._getLiTags().index(e(i))+1},_OnMouseLeave:function(e){this._getLiTags().removeClass("e-hover"),this.model.showPopupButton&&this.dropdownbutton.removeClass("e-active"),this.model.highlightSearch&&this._getLiTags().find(".e-hilight-txt").removeClass("e-hover")},_OnMouseClick:function(e){this._getActiveItemIndex(e),this.noresult||(this._enterTextBoxValue(e),this._isOpened=!1,this._hideResult(e))},_OnDocumentClick:function(t){e(t.target).is(this.suggestionList)||e(t.target).parents(".e-atc-popup").is(this.suggestionList)||e(t.target).is(this.element)||e(t.target).parents(".e-atc").is(this.wrapper)?(e(t.target).is(this.suggestionList)||e(t.target).parents(".e-atc-popup").is(this.suggestionList))&&t.preventDefault():(this._isOpened=!0,this._hideResult(t))},_OnWindowResize:function(e){this._refreshPopup()},_keyProcess:function(e){var i,s=this._declareVariable(),a=this;if(i=this._delimiterChar(),!t.isNullOrUndefined(e))for(var r=0,n=e.length;r<n;r++){var o=e[r];t.DataManager&&this.model.dataSource instanceof t.DataManager?a._selectValueByKey(null):(this._dataQuery=this.model.multiColumnSettings.enable?t.Query():t.Query().where(s[0],this.model.filterType,o,!1),this._promise=t.DataManager(this.model.dataSource).executeLocal(this._dataQuery),this.model.multiColumnSettings.enable?this._formatStringKey(e,s,i):this._promise instanceof Array&&0==this._promise.length?null!=this._selectValueByKey()&&this._selectValueByKey():this._getFieldKey(this._promise[0],s[1],i))}},_formatStringKey:function(e,t,i){this._selectValueByKey(null);for(var s=0,a=e.length;s<a;s++)if(""!=e[s]){for(var r,n=e[s],o=0,l=this._promise.length;o<l;o++)n==this._textFormateString(this._promise[o])&&(r=o);r?this._getFieldKey(this._promise[r],t[1],i):null!=this._selectValueByKey()&&this._selectValueByKey()}},_getFieldKey:function(i,s,a){if((t.isNullOrUndefined(this.model.template)||!t.isNullOrUndefined(this._getField(i,s)))&&!t.isNullOrUndefined(this._getField(i,s))){if(o=this._getField(i,s).toString(),"none"!=this.model.multiSelectMode){var r,n,o=this._selectValueByKey(),l=this.model.delimiterChar;r=this._getField(i,s).toString(),null!=o?(n=o.toString().split(a).filter(function(e){return""!==e}),-1==e.inArray(r,n)?(n.push(r),o=n.join(l)+l):o=r+l):o=r+l}this._selectValueByKey(o)}},_removeDuplicateVal:function(i){var s=[];return e.each(i,function(t,i){-1==e.inArray(i,s)&&s.push(i)}),1!=i.length||t.isNullOrUndefined(this._originalval)||-1==e.inArray(i[0],this._originalval)&&this._selectValueByKey(null),s},_valueChange:function(e){var i="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val();(this.value()!=i||""==i&&""!=this.element.val())&&(this.value(i),(t.isNullOrUndefined(this.model.fields.key)||""==i)&&this._hiddenInput.val(i),this._changeEvtTrigger(i,e)),this.model.showResetIcon&&!i&&(this.wrapper.find("span.e-iclose").remove(),this.resetSpan=null)},_changeEvtTrigger:function(e,t){var i=void 0!=t?{event:t,isInteraction:!0,value:e}:{isInteraction:!1,value:e,lastremovedItem:this.deletedItem};this.initialRender||(this._trigger("_change",{value:e}),this._trigger("change",i))},_updateSelectedItemArray:function(i){var s=[];if(this._selectedItems=[],this.suggestionListItems=this.model.dataSource,"delimiter"==this.model.multiSelectMode&&i)if(s=i.split(this.model.delimiterChar),t.DataManager&&this.model.dataSource instanceof t.DataManager||!t.isNullOrUndefined(this.suggestionListItems)&&"object"!=typeof this.suggestionListItems[0]){for(var a=0,r=s.length;a<r;a++)if(s[a]){for(var n=this,o=this._selectedObj.length,l={},d=0;d<o;d++)this._selectedObj[d][n.model.fields.text]==s[a]&&(l=this._selectedObj[d],d=o);this._selectedItems.push(e.isEmptyObject(l)?s[a]:l)}}else this._createBoxForObjectType(s);else if("none"==this.model.multiSelectMode&&i)if(s.push(i),t.DataManager&&this.model.dataSource instanceof t.DataManager||!t.isNullOrUndefined(this.suggestionListItems)&&"object"!=typeof this.suggestionListItems[0]){var n=this,l=e.grep(this._selectedObj,function(e){if(e[n.model.fields.text]==i)return e});this._selectedItems.push(l.length>0?l:i)}else this._createBoxForObjectType(s)},_keyDownComplete:function(e){var i=this.element.val(),s=this.value();if(!t.isNullOrUndefined(this.model.fields.key)&&(46==e.keyCode||8==e.keyCode||65==e.keyCode)&&"delimiter"==this.model.multiSelectMode){var a=this.value(),r=a.split(","),n=this.model.delimiterChar,o=r.indexOf(s.replace(/,/g,"")),l=this._hiddenInput.val().split(n);this._hiddenInput.val(l.join(n)),l.splice(o,1)}this._preVal==i||this.model.isChangeOnBlur&&(13!=e.keyCode||this._activeItem&&!this.noresult&&!this.model.readOnly)||(this._preVal=i,"visualmode"==this.model.multiSelectMode&&this._adjustWidth(),this._valueChange(e))},_moveCaretToEnd:function(e){if(e.scrollLeft=e.scrollWidth,e.createTextRange){var t=e.createTextRange();t.moveEnd("textedit"),t.moveStart("textedit"),t.select()}if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if(void 0!==e.createTextRange){var i=e.createTextRange();i.collapse(!1),i.select()}},_getCaretSelection:function(){var e=this.element[0],t=0,i=0;if(!isNaN(e.selectionStart))return t=e.selectionStart,i=e.selectionEnd,{start:Math.abs(t),end:Math.abs(i)};var s=document.selection.createRange().getBookmark(),a=e.createTextRange();a.moveToBookmark(s);var r=e.createTextRange();r.collapse(!0),r.setEndPoint("EndToStart",a);var n=r.text.length;return{start:n,end:n+a.text.length}},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur)}}),t.Autocomplete.Locale=t.Autocomplete.Locale||{},t.Autocomplete.Locale.default=t.Autocomplete.Locale["en-US"]={addNewText:"Add New",emptyResultText:"No suggestions",actionFailure:"The specified field doesn't exist in given data source",watermarkText:""},t.filterType={StartsWith:"startswith",Contains:"contains",EndsWith:"endswith",LessThan:"lessthan",GreaterThan:"greaterthan",LessThanOrEqual:"lessthanorequal",GreaterThanOrEqual:"greaterthanorequal",Equal:"equal",NotEqual:"notequal"},t.SortOrder={Ascending:"ascending",Descending:"descending"},t.MultiSelectMode={None:"none",Delimiter:"delimiter",VisualMode:"visualmode"},t.Animation={None:"none",Slide:"slide",Fade:"fade"},t.Type={Number:"number",String:"string",Boolean:"boolean",Date:"date"}}(jQuery,Syncfusion),function(e,t,i){t.widget("ejDraggable","ej.Draggable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,dragArea:null,clone:!1,distance:1,dragOnTaphold:!1,cursorAt:{top:-1,left:-2},dragStart:null,drag:null,dragStop:null,create:null,destroy:null,autoScroll:!1,scrollSensitivity:20,scrollSpeed:20,helper:function(){return e('<div class="e-drag-helper" />').html("draggable").appendTo(document.body)}},_init:function(){this.handler=function(){},this.resizables={},this._wireEvents(),this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,"msie"==this._browser.name&&this.element.addClass("e-pinch"),"edge"==this._browser.name&&this.element.css("touch-action","none")},_setModel:function(e){for(var t in e)switch(t){case"dragArea":this.model.dragArea=e[t];break;case"dragOnTaphold":this.model.dragOnTaphold=e[t];break;case"autoScroll":this.model.autoScroll=e[t]}},_destroy:function(){e(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._dragStopHandler).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseMove,this._dragHandler).off("mouseleave",this._dragMouseOutHandler).off("selectstart",!1),t.widgetBase.droppables[this.scope]=null},_initialize:function(i){if(i.target&&i.target.nodeName&&e(i.target).closest("input[type='text'], input[type='checkbox'], textarea, select, option").length)return!0;var s=i;if(i.preventDefault(),i=this._getCoordinate(i),this.target=e(s.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},e(document).on(t.eventType.mouseMove,this._dragStartHandler).on(t.eventType.mouseUp,this._destroyHandler),!this.model.clone){var a=this.element.offset();this._relXposition=i.pageX-a.left,this._relYposition=i.pageY-a.top}e(document.documentElement).trigger(t.eventType.mouseDown,s)},_setDragArea:function(){var i=e(this.model.dragArea)[0];if(i){var s,a,r,s,n,o,l=["left","right","bottom","top"];if(t.isNullOrUndefined(i.getBoundingClientRect)){a=e(this.model.dragArea).outerWidth(),r=e(this.model.dragArea).outerHeight();for(var d=0;d<l.length;d++)this["border-"+l[d]+"-width"]=0,this["padding-"+l[d]]=0;n=o=0}else{s=i.getBoundingClientRect(),a=s.width?s.width:s.right-s.left,r=s.height?s.height:s.bottom-s.top;for(var d=0;d<l.length;d++)this["border-"+l[d]+"-width"]=isNaN(parseFloat(e(e(this.model.dragArea)[0]).css("border-"+l[d]+"-width")))?0:parseFloat(e(e(this.model.dragArea)[0]).css("border-"+l[d]+"-width")),this["padding-"+l[d]]=isNaN(parseFloat(e(e(this.model.dragArea)[0]).css("padding-"+l[d])))?0:parseFloat(e(e(this.model.dragArea)[0]).css("padding-"+l[d]));n=e(this.model.dragArea).offset().top,o=e(this.model.dragArea).offset().left}this._left=t.isNullOrUndefined(e(this.model.dragArea).offset())?0+this["border-left-width"]+this["padding-left"]:o+this["border-left-width"]+this["padding-left"],this._top=t.isNullOrUndefined(e(this.model.dragArea).offset())?0+this["border-top-width"]+this["padding-top"]:n+this["border-top-width"]+this["padding-top"],this._right=o+a-[this["border-right-width"]+this["padding-right"]],this._bottom=n+r-[this["border-bottom-width"]+this["padding-bottom"]]}},_dragStart:function(i){if("touchmove"==i.type||"mousemove"==i.type&&1==(void 0!==i.buttons?i.buttons:i.which)||this._isIE8||this._isIE9){var s=i;i=this._getCoordinate(i),this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0},this.offset=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.position=this._getMousePosition(s);var a=this._initPosition.x-i.pageX,r=this._initPosition.y-i.pageY;if(Math.sqrt(a*a+r*r)>=this.model.distance){var n=this.model.helper({sender:s,element:this.target});if(!n||t.isNullOrUndefined(n))return;var o=this.model.handle=this.helper=n;if(this.model.dragStart){var l=null;if("touchmove"==s.type){var d=s.originalEvent.changedTouches[0];l=document.elementFromPoint(d.clientX,d.clientY)}else l=s.originalEvent.target||s.target;if(0==this.model.cursorAt.top&&0==this.model.cursorAt.left&&(l=this._checkTargetElement(i)||l),this._trigger("dragStart",{event:s,element:this.element,target:l,currentTarget:this._getCurrTarget(i)}))return this._destroy(),!1}if(this.model.dragArea?this._setDragArea():(this._left=this._top=this._right=this._bottom=0,this["border-top-width"]=this["border-left-width"]=0),!t.isNullOrUndefined(o)&&o.length>0){var h=o.offsetParent().offset();e(document).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._dragHandler).on(t.eventType.mouseUp,this._dragStopHandler).on("mouseleave",this._dragMouseOutHandler).on("selectstart",!1),t.widgetBase.droppables[this.model.scope]={draggable:this.element,helper:o.css({position:"absolute",left:this.position.left-h.left,top:this.position.top-h.top}),destroy:this._destroyHandler}}}}(this.model.autoScroll&&"touchmove"==i.type||"mousemove"==i.type&&1==(void 0!==i.buttons?i.buttons:i.which)||this._isIE8||this._isIE9)&&this._getScrollParent(s.target)},_drag:function(i){var s,a,r,n,o;i.preventDefault(),this.position=this._getMousePosition(i),this.position.top<0&&(this.position.top=0),e(document).height()<this.position.top&&(this.position.top=e(document).height()),e(document).width()<this.position.left&&(this.position.left=e(document).width());var l=t.widgetBase.droppables[this.model.scope].helper;if(this.model.drag){var d=null;if("touchmove"==i.type){var h=i.originalEvent.changedTouches[0];d=document.elementFromPoint(h.clientX,h.clientY)}else d=i.originalEvent.target||i.target;0==this.model.cursorAt.top&&0==this.model.cursorAt.left&&(d=this._checkTargetElement(i)||d);var c={event:i,element:this.target,target:d,currentTarget:this._getCurrTarget(i),position:{left:null,top:null}};this._trigger("drag",c)}var u=this._checkTargetElement(i);t.isNullOrUndefined(u)?this._hoverTarget&&(i.target=i.toElement=this._hoverTarget,this._hoverTarget.object._out(i),this._hoverTarget=null):(i.target=i.toElement=u,u.object._over(i),this._hoverTarget=u);var l=t.widgetBase.droppables[this.model.scope].helper,p=l.offsetParent().offset();r=t.isNullOrUndefined(i.pageX)||0===i.pageX&&"touchmove"==i.type?i.originalEvent.changedTouches[0].pageX:i.pageX,n=t.isNullOrUndefined(i.pageY)||0===i.pageY&&"touchmove"==i.type?i.originalEvent.changedTouches[0].pageY:i.pageY,this.model.dragArea?(this._pageX!=r&&(s=this._left>this.position.left?this._left:this._right<this.position.left+l.outerWidth(!0)?this._right-l.outerWidth(!0):this.position.left),this._pageY!=n&&(a=this._top>this.position.top?this._top:this._bottom<this.position.top+l.outerHeight(!0)?this._bottom-l.outerHeight(!0):this.position.top)):(s=this.position.left,a=this.position.top),(a<0||a-[p.top+this["border-top-width"]]<0)&&(a=[p.top+this["border-top-width"]]),(s<0||s-[p.left+this["border-left-width"]]<0)&&(s=[p.left+this["border-left-width"]]),s=c&&c.position&&c.position.left?c.position.left:s,a=c&&c.position&&c.position.top?c.position.top:a,l.css({left:c&&c.position&&c.position.left?s:s-[p.left+this["border-left-width"]],top:c&&c.position&&c.position.top?a:a-[p.top+this["border-top-width"]]}),this.position.left=s,this.position.top=a,this._pageX=r,this._pageY=n,this.model.autoScroll&&(o&&o!=document&&"HTML"!=o.tagName?(e(o).offset().top+o.clientHeight-n<this.model.scrollSensitivity?o.scrollTop=o.scrollTop+this.model.scrollSpeed:n-e(o).offset().top<this.model.scrollSensitivity&&(o.scrollTop=o.scrollTop-this.model.scrollSpeed),e(o).offset().left+o.clientWidth-r<this.model.scrollSensitivity?o.scrollLeft=o.scrollLeft+this.model.scrollSpeed:r-e(o).offset().left<this.model.scrollSensitivity&&(o.scrollLeft=o.scrollLeft+this.model.scrollSpeed)):(n-e(document).scrollTop()<this.model.scrollSensitivity?e(document).scrollTop(e(document).scrollTop()-this.model.scrollSpeed):e(window).height()-(n-e(document).scrollTop())<this.model.scrollSensitivity&&e(document).scrollTop(e(document).scrollTop()+this.model.scrollSpeed),r-e(document).scrollLeft()<this.model.scrollSensitivity?e(document).scrollLeft(e(document).scrollLeft()-this.model.scrollSpeed):e(window).width()-(r-e(document).scrollLeft())<this.model.scrollSensitivity&&e(document).scrollLeft(e(document).scrollLeft()+this.model.scrollSpeed)))},_dragStop:function(e){if("mouseup"!=e.type&&"touchend"!=e.type||this._destroy(e),this.model.dragStop){var t=null;if("touchend"==e.type)if(0==this.model.cursorAt.top&&0==this.model.cursorAt.left)t=e.originalEvent.target||e.target;else{var i=e.originalEvent.changedTouches[0];t=document.elementFromPoint(i.clientX,i.clientY)}else t=e.originalEvent.target||e.target;0==this.model.cursorAt.top&&0==this.model.cursorAt.left&&(t=this._checkTargetElement(e)||t),this._trigger("dragStop",{event:e,element:this.target,target:t,currentTarget:this._getCurrTarget(e)})}this._dragEnd(e)},_dragEnd:function(e){var i=this._checkTargetElement(e);t.isNullOrUndefined(i)||(e.target=e.toElement=i,i.object._drop(e,this.element))},_dragMouseEnter:function(t){e(document).off("mouseenter",this._dragMouseEnterHandler),this._isIE9?this._dragManualStop(t):this._isIE8?0==t.button&&this._dragManualStop(t):0==t.buttons&&this._dragManualStop(t)},_dragManualStop:function(e){null!=this.model.dragStop&&this._trigger("dragStop",{event:e,element:this.target,target:e.originalEvent.target||e.target,currentTarget:this._getCurrTarget(e)}),this._destroy(e)},_dragMouseOut:function(t){e(document).on("mouseenter",this._dragMouseEnterHandler)},_checkTargetElement:function(e){var t;if("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type){var i=e.originalEvent.changedTouches[0];t=document.elementFromPoint(i.clientX,i.clientY)}else t=e.target;return this.helper&&this._contains(this.helper[0],t)?(this.helper.hide(),t=this._elementUnderCursor(e),this.helper.show(),this._withDropElement(t)):this._withDropElement(t)},_getCurrTarget:function(e){var i=e.originalEvent&&e.originalEvent.target||e.target;if(!t.isNullOrUndefined(i.style)){var s=i.style.display;this.element.is(i)&&(i.style.display="none");var a=null;return t.isNullOrUndefined(e.pageX)||t.isNullOrUndefined(e.pageY)||(a=document.elementFromPoint(e.pageX,e.pageY)),i.style.display=s,a}},_withDropElement:function(i){if(i){var s=e(i).data("ejDroppable");if(t.isNullOrUndefined(s)&&(s=this._checkParentElement(e(i))),!t.isNullOrUndefined(s))return e.extend(i,{object:s})}},_checkParentElement:function(i){var s=e(i).closest(".e-droppable");if(s.length>0){var a=e(s).data("ejDroppable");if(!t.isNullOrUndefined(a))return a}},_elementUnderCursor:function(e){return"touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type?document.elementFromPoint(e.originalEvent.changedTouches[0].clientX,e.originalEvent.changedTouches[0].clientY):document.elementFromPoint(e.clientX,e.clientY)},_contains:function(t,i){try{return e.contains(t,i)||t==i}catch(e){return!1}},_wireEvents:function(){1==t.isDevice()&&1==this.model.dragOnTaphold?this._on(this.element,"taphold",this._initialize):this._on(this.element,t.eventType.mouseDown,this._initialize),this._dragStartHandler=e.proxy(this._dragStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._dragStopHandler=e.proxy(this._dragStop,this),this._dragHandler=e.proxy(this._drag,this),this._dragMouseEnterHandler=e.proxy(this._dragMouseEnter,this),this._dragMouseOutHandler=e.proxy(this._dragMouseOut,this)},_getMousePosition:function(e){e=this._getCoordinate(e);var t=this.model.clone?e.pageX:e.pageX-this._relXposition,i=this.model.clone?e.pageY:e.pageY-this._relYposition;return{left:t-[this.margins.left+this.model.cursorAt.left],top:i-[this.margins.top+this.model.cursorAt.top]}},_getCoordinate:function(e){var i=e;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type&&"msie"!=t.browserInfo().name)&&(i=e.originalEvent.changedTouches[0]),i},_getScrollParent:function(e){return e&&e.scrollHeight>e.clientHeight?e:e&&e.parentNode?this._getScrollParent(e.parentNode):void 0}})}(jQuery,Syncfusion),function(e,t,i){t.widget("ejDroppable","ej.Droppable",{element:null,model:null,validTags:["div","span","a"],dropElements:[],defaults:{accept:null,scope:"default",drop:null,over:null,out:null,create:null,destroy:null},_init:function(){this._mouseOver=!1,this.dropElements.push(this)},_setModel:function(e){},_destroy:function(){e(this.element).off("mouseup",e.proxy(this._drop,this))},_over:function(e){this._mouseOver||(this._trigger("over",e),this._mouseOver=!0)},_out:function(e){this._mouseOver&&(this._trigger("out",e),this._mouseOver=!1)},_drop:function(t,i){var s=t.target,a=e(s).parents(".e-droppable");e(s).hasClass("e-droppable")&&a.push(s);for(var r=0;r<this.dropElements.length;r++)e(a).is(e(this.dropElements[r].element))&&this.dropElements[r]._dropEvent.call(this.dropElements[r],t,i)},_dropEvent:function(i,s){var a=t.widgetBase.droppables[this.model.scope],r=!t.isNullOrUndefined(a.helper)&&a.helper.is(":visible");r&&"touchend"==i.type&&e(a.helper).hide();var n=this._isDropArea(i);r&&"touchend"==i.type&&e(a.helper).show(),a&&!t.isNullOrUndefined(this.model.drop)&&r&&n.canDrop&&this.model.drop(e.extend(i,{dropTarget:n.target,dragElement:s},!0),a)},_isDropArea:function(t){var i={canDrop:!0,target:e(t.target)};if("touchend"==t.type){var s,a=t.originalEvent.changedTouches[0];s=document.elementFromPoint(a.clientX,a.clientY),i.canDrop=!1;for(var r=e(s).parents(),n=0;n<this.element.length;n++){if(e(s).is(e(this.element[n])))i={canDrop:!0,target:e(s)};else for(var o=0;o<r.length;o++)if(e(this.element[n]).is(e(r[o]))){i={canDrop:!0,target:e(s)};break}if(i.canDrop)break}}return i}})}(jQuery,Syncfusion),function(e,t,i){t.widget("ejResizable","ej.resizable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,distance:1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,cursorAt:{top:1,left:1},resizeStart:null,resize:null,resizeStop:null,create:null,destroy:null,helper:function(){return e('<div class="e-resize-helper" />').html("resizable").appendTo(document.body)}},_init:function(){this.target=this.element,this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,null!=this.handle?e(this.target).delegate(this.handle,t.eventType.mouseDown,e.proxy(this._mousedown,this)).delegate(this.handle,"resizestart",this._blockDefaultActions):e(this.target).on(t.eventType.mouseDown,e.proxy(this._mousedown,this)),this._resizeStartHandler=e.proxy(this._resizeStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._resizeStopHandler=e.proxy(this._resizeStop,this),this._resizeHandler=e.proxy(this._resize,this),this._resizeMouseEnterHandler=e.proxy(this._resizeMouseEnter,this)},_mouseover:function(i){e(i.target).hasClass("e-resizable")?(e(i.target).css({cursor:"se-resize"}),e(this.target).on(t.eventType.mouseDown,e.proxy(this._mousedown,this))):(e(this.target).off(t.eventType.mouseDown),e(this.target).css({cursor:""}))},_blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},_setModel:function(e){},_mousedown:function(i){var s=i;return i=this._getCoordinate(i),this.target=e(s.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},this._pageX=i.pageX,this._pageY=i.pageY,e(document).on(t.eventType.mouseMove,this._resizeStartHandler).on(t.eventType.mouseUp,this._destroyHandler),e(document.documentElement).trigger(t.eventType.mouseDown,s),!1},_resizeStart:function(i){if(e(i.target).hasClass("e-resizable")){i=this._getCoordinate(i);var s,a,r=this._initPosition.x-i.pageX,n=this._initPosition.y-i.pageY;if(Math.sqrt(r*r+n*n)>=this.model.distance){if(null!=this.model.resizeStart&&this._trigger("resizeStart",{event:i,element:this.target}))return;var o=this.model.helper({element:this.target});s=i.pageX-this._pageX+o.outerWidth(),a=i.pageY-this._pageY+o.outerHeight(),this._pageX=i.pageX,this._pageY=i.pageY;this.getElementPosition(o);e(document).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._resizeHandler).on(t.eventType.mouseUp,this._resizeStopHandler).on("mouseenter",this._resizeMouseEnterHandler).on("selectstart",!1),t.widgetBase.resizables[this.scope]={resizable:this.target,helper:o.css({width:s,height:a}),destroy:this._destroyHandler}}}},_resize:function(e){var i,s,a;e=this._getCoordinate(e);var r=(this.getElementPosition(t.widgetBase.resizables[this.scope].helper),this.model.helper({element:this.target}));i=e.pageX-this._pageX+r.outerWidth(),s=e.pageY-this._pageY+r.outerHeight(),this._pageX=e.pageX,this._pageY=e.pageY,i<this.model.minWidth&&(a=this.model.minWidth-i,i=this.model.minWidth,this._pageX=e.pageX+a),s<this.model.minHeight&&(a=this.model.minHeight-s,s=this.model.minHeight,this._pageY=e.pageY+a),null!=this.model.maxHeight&&s>this.model.maxHeight&&(a=s-this.model.maxHeight,s=this.model.maxHeight,this._pageY=e.pageY-a),null!=this.model.maxWidth&&i>this.model.maxWidth&&(a=i-this.model.maxWidth,i=this.model.maxWidth,this._pageX=e.pageX-a),t.widgetBase.resizables[this.scope].helper.css({width:i,height:s}),this._trigger("resize",{element:this.target})},_resizeStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),"mouseup"!=e.type&&"touchend"!=e.type||this._destroy(e)},_resizeMouseEnter:function(e){this._isIE9?this._resizeManualStop(e):this._isIE8?0==e.button&&this._resizeManualStop(e):0==e.buttons&&this._resizeManualStop(e)},_resizeManualStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),this._destroy(e)},_destroy:function(i){e(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._resizeStopHandler).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseMove,this._resizeHandler).off("mouseenter",this._resizeMouseEnterHandler).off("selectstart",!1),t.widgetBase.resizables[this.scope]=null},getElementPosition:function(e){return null!=e&&e.length>0?{left:e[0].offsetLeft,top:e[0].offsetTop}:null},_getCoordinate:function(e){var t=e;return"touchmove"!=e.type&&"touchstart"!=e.type&&"touchend"!=e.type||(t=e.originalEvent.changedTouches[0]),t}})}(jQuery,Syncfusion),function(e,t,i){t.widget("ejWaitingPopup","ej.WaitingPopup",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_requiresID:!0,_rootCSS:"e-waitingpopup",defaults:{showOnInit:!1,target:null,appendTo:null,showImage:!0,htmlAttributes:{},cssClass:"",text:null,template:null,create:null,destroy:null},dataTypes:{showOnInit:"boolean",showImage:"boolean",cssClass:"string"},_isTargetVisible:function(){return"none"!=this.element.css("display")},show:function(){this._isTargetVisible()&&(this._refreshPanel(),this.maindiv.css("display","block"),this.model.showOnInit=!0)},hide:function(){this.maindiv.css("display","none"),this.model.showOnInit=!1},refresh:function(){this._isTargetVisible()&&this._refreshPanel()},_setText:function(e){e?this.popupText?this.popupText.html(e):(this._generateTextTag(e),this._setContentPosition()):this.popupText&&(this.popupText.remove(),this.popupText=null)},_showImage:function(e){e?(this.popupImage=t.buildTag("span.e-image"),this.popupText?this.popupImage.insertBefore(this.popupText):this.maindiv.append(this.popupImage)):this.popupImage&&(this.popupImage.remove(),this.popupImage=null)},_setTemplate:function(){var i=this.model.template;"string"==typeof i&&(i=e(i)),"object"==typeof i&&"function"==typeof i.css?this.templateObj=i:this.templateObj=t.buildTag("div","",{"text-align":"center"}).append(i),this.templateObj.css({visibility:"visible",display:"block"}),this.maindiv.append(this.templateObj)},_setTheme:function(e){this.maindiv.removeClass(this.model.cssClass).addClass(e)},_init:function(){this._initialize(),this._render(),this._wireEvents()},_wireEvents:function(){e(window).on("resize",e.proxy(this._resizeHandler,this))},_unwireEvents:function(){
e(window).off("resize",e.proxy(this._resizeHandler,this))},_resizeHandler:function(){this.refresh()},_setModel:function(i){var s;for(s in i)switch(s){case"text":this._setText(i[s]);break;case"cssClass":this._setTheme(i[s]);break;case"htmlAttributes ":this._addAttr(i[s]);break;case"showOnInit":this._setVisibility(i[s]);break;case"showImage":this._showImage(i[s]),this._setContentPosition();break;case"target":this.model.target=i[s],this._setTarget(),this.refresh();break;case"appendTo":this.model.appendTo=i[s],this._setTarget(),t.isNullOrUndefined(this.model.appendTo)||"document"==this.model.appendTo||"window"==this.model.appendTo?e("body").append(this.maindiv):this.maindiv.appendTo(e(this.model.appendTo)),this.refresh();break;case"template":this.maindiv.empty(),i[s]?(this.model.template=i[s],this._setTemplate()):(this.model.template=i[s]=null,this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),this._setContentPosition()}},_setTarget:function(){"document"==this.model.target?this.targetElement=e(document):"window"==this.model.target?this.targetElement=e(window):this.targetElement=this.model.target?e(this.model.target):this.element},_destroy:function(){this.maindiv.remove(),this._unwireEvents()},_initialize:function(){this.maindiv=null,this.popupText=null,this.popupImage=null,this.templateObj=null,this.targetElement=null},_render:function(){this._setTarget();var i=e("#"+this.element[0].id+"_WaitingPopup").get(0);i&&e(i).remove(),this.maindiv=t.buildTag("div.e-waitpopup-pane e-widget "+this.model.cssClass+"#"+this.element[0].id+"_WaitingPopup"),this.model.template?this._setTemplate():(this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),t.isNullOrUndefined(this.model.appendTo)||"document"==this.model.appendTo||"window"==this.model.appendTo?e("body").append(this.maindiv):this.maindiv.appendTo(e(this.model.appendTo)),this._setVisibility(this.model.showOnInit),this._addAttr(this.model.htmlAttributes)},_refreshPanel:function(){this.maindiv.width(this.targetElement.outerWidth()),this.maindiv.height(this.targetElement.outerHeight()),this._setPanelPosition(),this._setContentPosition()},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.maindiv.addClass(e):i.maindiv.attr(t,e)})},_setPanelPosition:function(){var i=t.util.getOffset(this.targetElement);null!=this.model.appendTo&&e(this.model.appendTo).length>0&&("relative"!=this.targetElement.css("position")&&"absolute"!=this.targetElement.css("position")||this.targetElement[0]!==e(this.model.appendTo)[0]?(i.left-=this.targetElement.offsetParent().offset().left,i.top-=this.targetElement.offsetParent().offset().top):i={left:0,top:0}),this.maindiv.css({position:"absolute",left:Math.ceil(i.left)+"px",top:Math.ceil(i.top)+"px","z-index":this._maxZindex()+1})},_setContentPosition:function(){if(null==this.model.template){var e,t=0,i=0,s=null;e=this.targetElement.outerHeight(),this.popupText&&(t=this.popupText.outerHeight()),this.popupImage&&(i=this.popupImage.outerHeight()),this.popupImage&&(s=Math.ceil((e-(i+t))/2),this.popupImage.css("top",s+"px")),this.popupText&&(s||(s=Math.ceil((e-t)/2)),this.popupText.css("top",s+"px"))}else this.templateObj.css({position:"relative",left:Math.ceil((this.targetElement.outerWidth()-this.templateObj.outerWidth())/2),top:Math.ceil((this.targetElement.outerHeight()-this.templateObj.outerHeight())/2)})},_generateTextTag:function(e){this.popupText=t.buildTag("div.e-text",e),this.maindiv.append(this.popupText)},_setVisibility:function(e){e&&this._isTargetVisible()?this.show():this.hide()},_maxZindex:function(){return t.util.getZindexPartial(this.element)}})}(jQuery,Syncfusion),function(e,t,i){t.ExcelFilter=t.ExcelFilter||{},t.excelFilter=function(e){return t.loadLocale("ejExcelFilter"),this._ctrlInstance=e.instance,this.id=this._ctrlInstance._id,this._dialogContainer=null,this._showSort=e.showSortOptions||!1,this._interDeterminateState=e.interDeterminateState||!1,this._maxCount=t.isNullOrUndefined(e.maxFilterLimit)?1e3:e.maxFilterLimit,this._formatFiltering=!0,this._locale=this._ctrlInstance.model.locale||"en-US",this.localizedLabels=this._getLocalizedLabel(),this._filterHandler=e.filterHandler||null,this._searchHandler=this._ctrlInstance.model.searchSettings||null,this._cancelHandler=e.cancelHandler||null,this._customFilterHandler=e.customFilterHandler||null,this._cssClass=e.cssClass||null,this._matchCase=e.allowCaseSensitive||!1,this._accent=e.allowAccent||!1,this._title=e.title||this.localizedLabels.title,this._complexBlankCriteria=e.enableComplexBlankFilter,this._blankValue=e.blankValue,this.fName=e.initFilterCol||null,this._spliter=e.valueDelimiter||t.ExcelFilter.valueDelimiter,this._initialFName=this.fName,this._displayName=null,this._dataSource=null,this._isUrlAdaptor=!1,this._$tableID=null,this._$blankVal=null,this._$selectedColors=[],this._$enableColor=!1,this._$filteredByColor="",this._$colType=null,this._$key=0,this.filteredColumn=null,this.sortedColumns=null,this._chkList=null,this._listsWrap=null,this._menuWrap=null,this._localJSON=null,this._actualCount=0,this._totalRcrd=0,this._enableResponsiveRow=!1,this._searchCount=0,this._currentData=null,this._openedFltr=null,this._predicates=[],this.cFilteredCols=null!=this.fName?[this.fName]:[],this._columnsFiltered=[],this.guid=t.getGuid("excelfilter"),this._noDlg=[],this._sepAftr=["sortDesc","notequal","between","top10","endswith","contains"],this._posType=["number","date","datetime","string","boolean","guid"],this._empties=this._complexBlankCriteria?["null","undefined",""]:[this.guid],this._reqInProgess=!1,this._isFiltered=!1,this._onActionBegin=e.actionBegin||null,this._onActionComplete=e.actionComplete||null,this.maxItemOnQuery=0,this.enableNormalize=!0,this.enableSelect=!1,this._onDemandSearch=!1,this._maxFilterCount=!1,this._clearSearchValue=!1,this._islargeData=!1,this._checkedValue=[],this._searchRequest=!1,this._isIndeterminate=!1,this._selectAll="<div class='e-ftrchk'><input type='checkbox' class='e-selectall' value='selectall' class='e-ftrchk' /><label class='e-ftrchk'>("+this.localizedLabels.SelectAll+")</label></div>",this._blanks="<div class='e-ftrchk'><input type='checkbox' id='blanks' class='e-ftrchk' value='"+this._empties.join(this._spliter)+"' @@/><label class='e-ftrchk' for='blanks' value=''>("+this.localizedLabels.Blanks+")</label></div>",this._blank=void 0,this._addAtLast=!1,this._addToFilter="<div class='e-ftrchk'><input type='checkbox' class='e-addtofilter'/><label class='e-ftrchk'>"+this.localizedLabels.AddToFilter+"</label></div>",this._preChkList=[],this._checked=null,this._add=null,this.guidMenuOpt=[{id:1,text:this.localizedLabels.SortNoSmaller,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortNoLarger,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.GuidFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.GuidMenuOptions}],this.numberMenuOpt=this.booleanMenuOpt=[{id:1,text:this.localizedLabels.SortNoSmaller,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortNoLarger,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.NumberFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.NumberMenuOptions}],this.stringMenuOpt=[{id:1,text:this.localizedLabels.SortTextAscending,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortTextDescending,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.TextFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.StringMenuOptions}],this.dateMenuOpt=[{id:1,text:this.localizedLabels.SortDateOldest,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortDateNewest,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.DateFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.DateMenuOptions}],this.datetimeMenuOpt=[{id:1,text:this.localizedLabels.SortDateOldest,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortDateNewest,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.DateTimeFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.DatetimeMenuOptions}],this},t.excelFilter.prototype={isNotBlank:function(e,i){var s=t.isNullOrUndefined(e)||""===e||null===e;return i||""!==e&&null!==e||(this._addAtLast=!0),!s},_checkBlank:function(e){if(this.isNotBlank(e))return!0;var t=void 0==this._blank&&!this._addAtLast;return t&&(this._blank=!0),t},_getValueData:function(e,i){var s=this._empties;if(this.isNotBlank(e,!0)&&(s=t.distinct(i,this._$foreignKey||this.fName,!1),"msie"!=t.browserInfo().name||"8.0"!=t.browserInfo().version))for(var a=0;a<s.length;a++)if(s[a]instanceof Date){var r={dateString:s[a]};s[a]=JSON.parse(JSON.stringify(r)).dateString}return s.join(this._spliter)},getPredicate:function(e,i,s){this._isUrlAdaptor=this._ctrlInstance._dataSource()instanceof t.DataManager&&(this._ctrlInstance._dataSource().adaptor instanceof t.UrlAdaptor||this._ctrlInstance._dataSource().adaptor instanceof t.WebMethodAdaptor);for(var a,r=void 0!=i?[i]:t.distinct(e,"field",!1),n={},o=0,l=r.length;o<l;o++)a=new t.DataManager(e).executeLocal((new t.Query).where("field","equal",r[o])),n[r[o]]=this.generatePredicate(a),s&&(this._predicates[this._$key]=this._predicates[this._$key]||{},this._predicates[this._$key][r[o]]=n[r[o]]);return n},generatePredicate:function(e){var i,s,a=e?e.length:0;if(a){s=this._updateDateFilter(e[0]),i=!this._isUrlAdaptor||"date"!=s.type&&"datetime"!=s.type?s.ejpredicate?s.ejpredicate:t.Predicate(s.field,s.operator,s.value,s.ignoreCase||!s.matchcase,s.ignoreAccent||!s.accent):this._getDatePredicate(s);for(var r=1;r<a;r++)e[r]=this._updateDateFilter(e[r]),this._isUrlAdaptor&&a>2&&r>1&&"or"==e[r].predicate?"date"==e[r].type||"datetime"==e[r].type?i.predicates.push(this._getDatePredicate(e[r])):i.predicates.push(t.Predicate(e[r].field,e[r].operator,e[r].value,e[r].ignoreCase||!e[r].matchcase,e[r].ignoreAccent||!e[r].accent)):i=!this._isUrlAdaptor||"date"!=e[r].type&&"datetime"!=e[r].type?e[r].ejpredicate?i[e[r].predicate](e[r].ejpredicate):i[e[r].predicate](e[r].field,e[r].operator,e[r].value,e[r].ignoreCase||!e[r].matchcase,e[r].ignoreAccent||!e[r].accent):i[e[r].predicate](this._getDatePredicate(e[r]));return i||null}},_getDatePredicate:function(e){return t.Predicate(e.field,e.operator,e.value,e.ignoreCase||!e.matchcase,e.ignoreAccent||!e.accent)},getFilterFrom:function(e,i){var i=t.distinct(i,this.fName,!1);return this.maxItemOnQuery>0&&(i=i.slice(0,this.maxItemOnQuery)),t.UrlAdaptor.prototype.getFiltersFrom(i,(new t.Query).foreignKey(this._$foreignKey))},renderDialog:function(e){this._$colType=e;var i=this.id+e+"_excelDlg",s=t.buildTag("div#"+i+".e-excelfilter e-dlgcontainer e-shadow"),a=t.buildTag("ul#"+this.id+e+"_MenuItem"),r=this._getMenuData(e);a=this._createLiTag(a,r,!1);var n=t.buildTag("span.e-searchbox e-fields").append(t.buildTag("input#"+this.id+"_SearchBox.e-ejinputtext e-searchinput",{},{},{type:"text",placeholder:this.localizedLabels.Search})).append(t.buildTag("span.e-search e-icon")),o=t.buildTag("div#"+this.id+e+"_CheckBoxList.e-checkboxlist e-fields").append(t.buildTag("div")),l=this._createBtn(),d=t.buildTag("div.e-searchcontainer"),h=t.buildTag("div.e-status e-fields e-hide",this.localizedLabels.CheckBoxStatusMsg);s.append(a),d.append(n),d.append(h),d.append(o),d.append(l),s.append(d),s.appendTo(this._ctrlInstance.element),s.css("display","none"),this._renderCustomFDlg(e),this._dialogContainer=s,null!=this._cssClass&&s.addClass(this._cssClass),this._showSort||(a.find(".e-fnsort").closest("li").css("display","none"),a.find("li.e-separator:first").css("display","none")),this._lsitBoxTemplate(),this._renderSubCtrls(e),"msie"==t.browserInfo().name&&t.browserInfo().version<10&&t.ieClearRemover(n.find("input")[0]),this._wireEvents()},_getDeprecatedLocalizedLabel:function(e){if(-1!=["Ok","OK"].indexOf(e))return this.localizedLabels.Ok||this.localizedLabels.OK},_renderSubCtrls:function(i){e("#"+this.id+i+"_MenuItem").ejMenu({orientation:"vertical",width:266,container:"#"+this.id,click:t.proxy(this._menuHandler,this),enableRTL:this._ctrlInstance.model.enableRTL,enableSeparator:!1}),e("#"+this.id+i+"_OkBtn").ejButton({text:this._getDeprecatedLocalizedLabel("OK"),showRoundedCorner:!0,width:60,click:t.proxy(this._fltrBtnHandler,this),enabled:!0}),e("#"+this.id+i+"_CancelBtn").ejButton({text:this.localizedLabels.Cancel,showRoundedCorner:!0,width:60,click:t.proxy(this.closeXFDialog,this)}),e("#"+this.id+i+"_CheckBoxList").ejScroller({height:130,width:234,scroll:t.proxy(this._virtualize,this)}),e("#"+this.id+i+"_CheckBoxList").ejWaitingPopup({showOnInit:!1})},openXFDialog:function(i){this.fName=i.field,this._dataSource=i.dataSource,this._$colType=i.type||"string",this._$format=i.format||"",this._enableResponsiveRow=i.enableResponsiveRow,this.filteredColumn=i.filteredColumns||this._ctrlInstance.model.filterSettings.filteredColumns,this.sortedColumns=i.sortedColumns||this._ctrlInstance.model.sortSettings.sortedColumns,this._displayName=i.displayName,this.query=i.query||new t.Query,this._$key=i.key||0,this._$tableID=i.tableID,this._$blankVal=t.isNullOrUndefined(this._$tableID)?this._$blankVal:i.blank,this._$selectedColors=i.selectedColors||[],this._$enableColor=i.enableColor||!1,this._$filteredByColor=i.filteredByColor||this._$filteredByColor,this._$foreignField=i.foreignKeyValue,this._$foreignData=i.foreignDataSource,this._$foreignKey=i.foreignKey,this._$foreignKeyType=i.foreignKeyType,this._$foreignData instanceof t.DataManager&&(this._$foreignData.adaptor instanceof t.ODataAdaptor||this._$foreignData.adaptor instanceof t.ODataV4Adaptor||this._$foreignData.adaptor instanceof t.WebApiAdaptor)&&(this.maxItemOnQuery=50),e.extend(this.localizedLabels,i.localizedStrings||{});var s={requestType:"filterbeforeopen",filterModel:this,columnName:this.fName,columnType:this._$colType};if(!this._ctrlInstance._trigger(this._onActionBegin,s)){null!=this._openedFltr&&this._openedFltr.is(e("#"+this.id+this._$colType+"_excelDlg"))||(this.closeXFDialog(),this._openedFltr=e("#"+this.id+this._$colType+"_excelDlg")),this._listsWrap=e("#"+this.id+this._$colType+"_CheckBoxList"),this._menuWrap=e("#"+this.id+this._$colType+"_MenuItem"),this._searchBox=this._openedFltr.find(".e-searchbox input"),this._setPosition(this._openedFltr,i.position),this._openedFltr.addClass(i.cssClass),this._openedFltr.fadeIn(300,function(){});var a=e("#"+this.id+this._$colType+"_MenuItem").find("li[ejfnrole='popup']");this._$enableColor?(this._createDivTag(a.eq(0).find(".e-shadow"),this._$selectedColors,!1,"sort"),-1==this._$filteredByColor||this._$filteredByColor.length<1||this._$filteredByColor===this.fName?this._createDivTag(a.eq(1).find(".e-shadow"),this._$selectedColors,!1,"filter"):a.eq(1).addClass("e-disable-item")):a.hide(),this._isFiltered=void 0!=this._predicates[this._$key]&&void 0!=this._predicates[this._$key][this.fName],this._isFiltered=i.isFiltered||this._isFiltered,"date"!=this._$colType&&"datetime"!=this._$colType||""!=this._$format||(this._$format="date"==this._$colType?"{0:MM/dd/yyyy}":"{0:MM/dd/yyyy hh:mm:ss}"),this._processListData(),this._listsWrap.data("ejScroller"),this._setDisable();var s={requestType:"filterafteropen",filterModel:this,columnName:this.fName,columnType:this._$colType};this._ctrlInstance._trigger(this._onActionComplete,s)}},closeXFDialog:function(i){if(null!=i){var s=e(i.target);if(!(s.closest("#"+this.id+this._$colType+"_CustomFDlg").length>0||s.closest("#"+this.id+this._$colType+"_excelDlg").length>0))return}this._openedFltr&&(this._openedFltr.hasClass("e-dlgcustom")?this._openedFltr.ejDialog("close"):(this._openedFltr.fadeOut(300,function(){}),this._listsWrap.ejWaitingPopup("hide")),!t.isNullOrUndefined(this._cancelHandler)&&this._cancelHandler(),this.resetFilterModel(),this._ctrlInstance._$fDlgIsOpen=!1)},_setPosition:function(e,t){e.css("position","absolute"),e.css("left",t.X).css("top",t.Y)},_setDisable:function(){var i=this._menuWrap.find("li[ejfnrole='clearfilter']"),s=this._menuWrap.find("li[ejfnrole='filterpopup']"),a=this._menuWrap.find("li[ejfnrole *= 'sort']");this._listsWrap.find("input").filter(":checked:not(.e-selectall)").length;if(this._isFiltered?i.removeClass("e-disable-item"):i.addClass("e-disable-item"),this._showSort){var r=t.DataManager(this.sortedColumns).executeLocal((new t.Query).where("field","equal",this.fName));r.length&&"ascending"==r[0].direction?a.filter("[ejfnrole='sortAsc']").addClass("e-disable-item"):a.filter("[ejfnrole='sortAsc']").removeClass("e-disable-item"),r.length&&"descending"==r[0].direction?a.filter("[ejfnrole='sortDesc']").addClass("e-disable-item"):a.filter("[ejfnrole ='sortDesc']").removeClass("e-disable-item")}var n=s.find(".aschild");if(0!=this.cFilteredCols.length&&-1!=e.inArray(this.fName,this.cFilteredCols)){for(var o=0;o<this.filteredColumn.length;o++)if(this.filteredColumn[o].field==this.fName){0==n.find("#ejFiltercheck").length&&(n.append("<input type='checkbox' id='ejFiltercheck' />"),n.find("#ejFiltercheck").ejCheckBox({checked:!0}),n.find("#ejFiltercheck").ejCheckBox("disable")),s.find(".e-shadow .e-exceltick").length>0&&s.find(".e-shadow .e-exceltick").remove(),this.filteredColumn[o].field==this.fName&&!t.isNullOrUndefined(this.filteredColumn[o+1])&&this.filteredColumn[o+1].field==this.fName&&(this._$foreignField&&this.filteredColumn[o+1].customFilter||!this._$foreignField)?"greaterthanorequal"==this.filteredColumn[o].operator&&"lessthanorequal"==this.filteredColumn[o+1].operator?s.find(".e-shadow .e-list[ejvalue=between]").find("a").append("<span class='e-exceltick e-icon' />"):s.find(".e-shadow .e-list[ejvalue=customfilter]").find("a").append("<span class='e-exceltick e-icon' />"):this._$foreignField?s.find(".e-shadow .e-list[ejvalue="+this.filteredColumn[o].actualFilterOperator+"]").find("a").append("<span class='e-exceltick e-icon' />"):s.find(".e-shadow .e-list[ejvalue="+this.filteredColumn[o].operator+"]").find("a").append("<span class='e-exceltick e-icon' />");break}}else for(var o=0;o<this.filteredColumn.length;o++)if(this.filteredColumn[o].field==this.fName){this._removeTick(s,n);break}this._isFiltered||0==n.find("#ejFiltercheck").length||this._removeTick(s,n),"boolean"==this._$colType&&this._menuWrap.find("li[aria-haspopup=true]").addClass("e-hide"),this._searchBox.val(""),this._searchBox.siblings().addClass("e-search").removeClass("e-cancel")},_removeTick:function(e,t){t.find("#ejFiltercheck").ejCheckBox("destroy"),e.find(".aschild #ejFiltercheck").remove(),e.find(".e-shadow .e-exceltick.e-icon").remove()},_createBtn:function(e){var i=e?this.id+this._$colType+"Custom":this.id+this._$colType,s=t.buildTag("div.e-btncontainer e-fields"),a=t.buildTag("div");return a.append(t.buildTag("input#"+i+"_OkBtn.e-fltrbtn e-btnsub e-flat",{},{},{type:"button"})).append(t.buildTag("input#"+i+"_CancelBtn.e-fltrbtn e-btncan e-flat",{},{},{type:"button"})),s.append(a)},_menuHandler:function(t){var i=e(t.element),s=i.attr("ejfnrole"),a={};if("filterbgcolor"===s||"filterfgcolor"===s){var r={field:this.fName,operation:s,color:e(t.element).css("background-color")};a={originalEvent:t.event,action:"filterbycolor",filterDetails:r,tableID:this._$tableID},this._isFiltered=!1}else if("clearfilter"==s){var n={field:this.fName,operator:"",value:"",predicate:"or"};a={originalEvent:t.event,fieldName:this.fName,action:"clearfiltering",filterDetails:n,tableID:this._$tableID};var o=e.inArray(this.fName,this.cFilteredCols);-1!=o&&this.cFilteredCols.splice(o,1);var l=e.inArray(this.fName,this._columnsFiltered);-1!=l&&this._columnsFiltered.splice(l,1),this._initialFName==this.fName&&(this._initialFName=null)}else{if("popup"==s||"filterpopup"==s)return;if("operator"==s)this._openCustomFilter(i.attr("ejvalue"));else{var d,h;"sortAsc"==s||"sortDesc"==s?(d="sortAsc"==s?"ascending":"descending",h={field:this.fName,direction:d},a={originalEvent:t.event,action:"sorting",sortDetails:h,tableID:this._$tableID}):(h={field:this.fName,direction:d,operation:s,color:e(t.element).css("background-color")},a={originalEvent:t.event,action:"sortbycolor",sortDetails:h,tableID:this._$tableID})}}"operator"!=s&&(this._filterHandler(a),this.closeXFDialog())},_searchBoxFocus:function(t){var i=e(t.target);i.hasClass("e-cancel")&&(i.prev().val(""),i.next().addClass("e-cancel"),i.addClass("e-search"),i.prev().trigger("keyup")),"focusin"==t.type&&(i.next().addClass("e-cancel"),i.next().removeClass("e-search"))},_search:function(i){var s,a,r=i.target.value,n=e(i.target);s="string"!=this.getType()&&parseFloat(r)?parseFloat(r):r,a="contains",s=""==s||void 0==s?void 0:s,"boolean"==this._$colType&&(void 0!=s&&-1!=this.localizedLabels.True.toLocaleLowerCase().indexOf(s.toLowerCase())?s="true":void 0!=s&&-1!=this.localizedLabels.False.toLocaleLowerCase().indexOf(s.toLowerCase())&&(s="false")),("date"!=this._$colType&&"datetime"!=this._$colType||(s=t.parseDate(r,this.replacer(this._$format,/{0:|}/g,"")),a="equal",null!=this._previousValue||null!=s))&&(this._previousValue=s,delay=this._dataSource instanceof t.DataManager&&this._ctrlInstance._gridRecordsCount>this._ctrlInstance.model.filterSettings.maxFilterChoices?1500:0,sender={type:"filterchoicesearch",value:s,operator:a,matchcase:-1==["date","datetime"].indexOf(this._$colType)&&this._matchCase,accent:this._accent},this._processSearch(sender,delay),""==n.val()?(n.next().addClass("e-search"),n.next().removeClass("e-cancel")):(n.next().addClass("e-cancel"),n.next().removeClass("e-search")))},_processSearch:function(e,t){this._alreadySearchProcessed?(this._stopTimer(),this._startTimer(e,t)):(this._alreadySearchProcessed=!0,this._startTimer(e,t))},_startTimer:function(e,t){proxy=this,this._timer=window.setTimeout(function(){proxy._processListData(e)},t)},_stopTimer:function(){null!=this._timer&&window.clearTimeout(this._timer)},_getLocalizedLabel:function(e){return t.getLocalizedConstants("ej.ExcelFilter",this._locale)},_getMenuData:function(e){return void 0!=e?this[e+"MenuOpt"]:[]},_checkHtmlEncode:function(e){var i=!t.isNullOrUndefined(this._ctrlInstance.getColumnByField)&&this._ctrlInstance.getColumnByField(this.fName).disableHtmlEncode;return!(t.isNullOrUndefined(i)||!i)},_lsitBoxTemplate:function(){var i={},s={};i[this.id+"isNotBlank"]=t.proxy(this.isNotBlank,this),i[this.id+"checkBlank"]=t.proxy(this._checkBlank,this),i[this.id+"_getValueData"]=t.proxy(this._getValueData,this),i[this.id+"_checkBoxState"]=t.proxy(this._setCheckState,this),i[this.id+"_htmlEncode"]=t.proxy(this._checkHtmlEncode,this),i[this.id+"_genId"]=this._genCheckID,e.views.helpers(i);var a=this.id+this._$colType+"{{:~"+this.id+"_genId()}}";s[this.id+this._$colType+"_listBox_Template"]="{{if ~"+this.id+"checkBlank(key)}}<div class='e-ftrchk'><input type='checkbox' id='"+a+"' value='{{html:~"+this.id+"_getValueData(key, items)}}' class='e-ftrchk' {{:~"+this.id+"_checkBoxState(~"+this.id+"_getValueData(key, items))}}/><label class='e-ftrchk' for='"+a+"'>{{if ~"+this.id+"isNotBlank(key,'true')}} {{if ~"+this.id+"_htmlEncode(key)}} {{>key}} {{else}} {{:key}} {{/if}} {{else}} (Blanks) {{/if}}</label></div>{{/if}}",e.templates(s)},_processListData:function(i){var s,a,r={},n=new t.Query,o=(new t.Query).requiresCount(),l={};this._searchCount=0;var d,h=this._predicates[this._$key];proxy.query._expands.length&&(n._expands=proxy.query._expands);var c=null,u=null,s=null;t.isNullOrUndefined(this._$foreignField&&this._$foreignData)?(c=this._dataSource,u=this.fName,this._localJSON):(c=this._$foreignData,this._dataSource instanceof t.DataManager&&!(c instanceof t.DataManager)&&(c=t.DataManager(c)),u=this._$foreignField);for(var p in h)if(p!=this.fName){var m=h[p],g=m.from;g?n.skip("top"==g?0:c.length-(c.length-m.take)).take(m.take):d=void 0!=d?d.and(m):m}if(r.columnName=u,n.requiresCount(),this._dataSource instanceof t.DataManager&&!this._dataSource.dataSource.offline&&this._ctrlInstance._gridRecordsCount>this._ctrlInstance.model.filterSettings.maxFilterChoices&&(n.take(this.maxFilterChoices),this._onDemandSearch=!0),d&&n.where(d),t.merge(n.queries,this.query.queries)||t.merge(n._params,this.query._params),l.requestType=i?i.type:"filterchoicerequest",l.filterModel=this,l.query=n,l.dataSource=c,"filterchoicesearch"==l.requestType&&(l.queryParams=i),!this._ctrlInstance._trigger(this._onActionBegin,l)){if(!t.isNullOrUndefined(this._searchHandler)&&this._searchHandler.key.length){var f=this._searchHandler;n.search(f.key,f.fields,f.operator||"contains",f.ignoreCase||!0,f.ignoreAccent||!0)}if(this.enableSelect&&n.select(this.fName),i&&"filterchoicesearch"==i.type)if(this._clearSearchValue=!!t.isNullOrUndefined(i.value),r.type=i.type,r.value=i.value,this._$foreignField&&(n=o),i.value&&n.where(u,i.operator,i.value,!i.matchcase,i.accent),this._dataSource instanceof t.DataManager&&this._ctrlInstance._gridRecordsCount>this._ctrlInstance.model.filterSettings.maxFilterChoices){this._searchRequest=!0;var _=this._$colType,v=this.id+_+"_excelDlg";if(e("#"+v).is(":visible")&&this._listsWrap.ejWaitingPopup("show"),this._$foreignField){var b=this._$foreignData instanceof t.DataManager?this._$foreignData:t.DataManager(this._$foreignData);this._dataProcessing(b,n,r)}else this._dataProcessing(this._dataSource,n,r)}else this._dataProcessing(t.DataManager(this._localJSON),n,r);else if(this._dataSource instanceof t.DataManager)proxy=this,r.type="filterchoicerequest",this._listsWrap.ejWaitingPopup("show"),this._reqInProgess||(this._reqInProgess=!0,this._$foreignField&&(c=this._dataSource),a=c.executeQuery(n),a.done(function(e){proxy._$foreignField?proxy._filterForeignData(e,r):(s=e.result,r.data=proxy._localJSON=proxy._currentData=s,proxy._totalRcrd=e.count,proxy._listsWrap.ejWaitingPopup("hide"),proxy._setCheckBoxList(r),proxy._reqInProgess=!1)}));else{var s=[];a=t.DataManager(this._dataSource).executeLocal(n),r.type="filterchoicerequest",this._$foreignField?this._filterForeignData(a,r):(s=a.result,r.data=this._localJSON=this._currentData=s,this._totalRcrd=a.count,this._setCheckBoxList(r))}}},_dataProcessing:function(e,t,i){var s;s=e.executeQuery(t),s.done(function(e){i.data=proxy._currentData=e.result,proxy._totalRcrd=proxy._searchCount=e.result.length,proxy._setCheckBoxList(i)})},_filterForeignData:function(i,s){var a,r,n,o,l,d="boolean"==typeof s,h=this._$foreignKey,c=this._$foreignField,u=this._$foreignKeyType,p=this,m={},g=new t.Query,f=this._$foreignData instanceof t.DataManager?this._$foreignData:t.DataManager(this._$foreignData);if(d){o=i[0],m=i[0],l=i.slice(),o&&this.closeXFDialog(),n=new t.Predicate(c,o.operator,o.value,!o.matchcase,!o.accent);for(var o,_=1,v=i.length;_<v;_++)o=i[_],n=n[o.predicate](c,o.operator,o.value,!o.matchcase,!o.accent);g.where(n)}else a=i.result,r=i.count,r&&g.where(this.getFilterFrom(this._$foreignData,a)),this._listsWrap.ejWaitingPopup("model.showOnInit")||this._listsWrap.ejWaitingPopup("show");g.select([h,c]),f.executeQuery(g).done(function(i){if(d){var a=t.distinct(i.result,h,!0),a=0 in a?a:[{}],n=a.map(function(t,i){return e.extend({},m,{value:t[h],operator:"equal",actuals:l,type:u})});p.initiateFilter(n)}else s.data=p._localJSON=p._currentData=i.result,p._totalRcrd=r,p._listsWrap.ejWaitingPopup("hide"),p._setCheckBoxList(s),p._reqInProgess=!1})},_setCheckBoxList:function(i){var s,a,r={},n=this._blanks;r.requestType=i.type,r.dataSource=this._dataSource,r.filterModel=this,0!=this._currentData.length?(s=this.getDistinct(i.data,i.columnName,!0,!!this._$foreignKey),this._isFiltered,this._actualCount=s.length,s.length=this._maxCount>this._actualCount?this._actualCount:this._maxCount,this._onDemandSearch&&1e3==this._actualCount||this._actualCount>=this._maxCount?this._openedFltr.find("div.e-status").removeClass("e-hide"):this._openedFltr.find("div.e-status").addClass("e-hide"),this._islargeData=this._maxCount<this._actualCount,this._filterdCol=t.DataManager(this.filteredColumn).executeLocal(t.Query().where("field","equal",this.fName)),"filterchoicesearch"!=i.type||t.isNullOrUndefined(i.value)?this._listsWrap.find("div:first").html([this._selectAll,e.render[this.id+this._$colType+"_listBox_Template"](s),t.isNullOrUndefined(i.value)&&this._addAtLast?this.replacer(n,/@@/g,this._setCheckState,this._empties.join(this._spliter)):""].join("")):this._listsWrap.find("div:first").html([this._selectAll,this._addToFilter,e.render[this.id+this._$colType+"_listBox_Template"](s),t.isNullOrUndefined(i.value)&&this._addAtLast?this.replacer(n,/@@/g,this._setCheckState,this._empties.join(this._spliter)):""].join("")),this._chkList=this._listsWrap.find("input:checkbox").not(".e-selectall,.e-addtofilter"),$inView=this._chkList.slice(0,20),$inView.ejCheckBox({change:t.proxy(this._checkHandler,this)}),$inView.siblings().height(14).width(14),this._listsWrap.find(".e-addtofilter").ejCheckBox({change:t.proxy(this._addToFilterHandler,this)}),this._listsWrap.find(".e-addtofilter").attr("id",this.id+this._$colType+"AddToFilter"),this._listsWrap.find(".e-selectall").ejCheckBox({change:t.proxy(this._selectAllHandler,this),enableTriState:this._interDeterminateState,beforeChange:this._selectAllBeforeHandler}),this._listsWrap.find(".e-selectall").attr("id",this.id+this._$colType+"SelectAll"),this._listsWrap.find(".e-selectall,.e-addtofilter").siblings().height(14).width(14),this._listsWrap.find(".e-selectall").closest("span").siblings("label").attr("for",this.id+this._$colType+"SelectAll")):(this._listsWrap.find("div").first().html(t.buildTag("div.e-ftrchk",this.localizedLabels.NoResult,{},{})),this._chkList=this._listsWrap.find("input:checkbox").not(".e-selectall")),t.isNullOrUndefined(this._chkList)||(a=this._chkList.filter(":checked").length),this._isFiltered&&this._searchRequest&&0==a&&this._checkIsIndeterminate(i.columnName,this.filteredColumn),this._isFiltered&&this._actualCount!=a?(a>0||this._isIndeterminate&&this._interDeterminateState)&&this._listsWrap.find(".e-selectall").ejCheckBox("model.checkState","indeterminate"):this._listsWrap.find(".e-selectall").ejCheckBox({checked:!0}),e("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:0!=a}),this._listsWrap.ejScroller({scrollTop:0
}).ejScroller("refresh"),this._listsWrap.hasClass("e-waitingpopup")&&this._listsWrap.ejWaitingPopup("hide"),this._ctrlInstance._trigger(this._onActionComplete,r)||(this._isIndeterminate=!1,this._checkedValue=[],"filterchoicerequest"==i.type&&(this._preChkList=this._chkList,this._checked=this._preChkList.filter(":checked")),this._listsWrap.find(".e-addtofilter").length?this._add=this._listsWrap.find(".e-addtofilter"):this._add=null)},_addToFilterHandler:function(t){e("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:t.isChecked||!!this._chkList.filter(":checked").length})},_checkIsIndeterminate:function(e,t){for(var i=0;i<t.length;i++)e==t[i].field&&(this._isIndeterminate=!0)},_createLiTag:function(i,s,a){return proxy=this,e.each(s,function(s,r){var n,o=t.buildTag("li",{},{},r.htmlAttribute||a&&{ejfnrole:"operator",ejvalue:r.value}||{}),l=a&&-1==e.inArray(r.value,proxy._noDlg)?"...":"",d=t.buildTag("a",r.text+l,{},{});void 0!=r.sprite&&d.append(t.buildTag("span",{},{},{class:r.sprite})),void 0!=r.child&&(n=3!=r.id&&5!=r.id?proxy._createLiTag(t.buildTag("ul.e-shadow"),r.child,!0):3===r.id?proxy._createDivTag(t.buildTag("ul.e-shadow"),r.child,!0,"sort"):proxy._createDivTag(t.buildTag("ul.e-shadow"),r.child,!0,"filter")),void 0==r.child?i.append(o.append(d)):i.append(o.append(d).append(n)),-1!=e.inArray(r.value||r.htmlAttribute&&r.htmlAttribute.ejfnrole,proxy._sepAftr)&&i.append(t.buildTag("li.e-separator"))}),i},_createDivTag:function(e,i,s,a){var r,n,o=[],l=[],d=!1,h="",c="",u="",p="",m="",g="";if("sort"==a?(h=this.localizedLabels.SortByCellColor,c=this.localizedLabels.SortByFontColor):(h=this.localizedLabels.FilterByCellColor,c=this.localizedLabels.FilterByFontColor),u=a+"colorhdr",m=a+"fonthdr",p=a+"bgcolor",g=a+"fgcolor",e.length>0&&e.children().remove(),i.length>0){for(var f=0;f<i.length;f++){for(var _=0;_<o.length;_++)if(o[_]==i[f].background){d=!0;break}d||t.isNullOrUndefined(i[f].background)||i[f].background.startsWith("#6n")||o.push(i[f].background),d=!1;for(var _=0;_<l.length;_++)if(l[_]==i[f].foreground){d=!0;break}d||t.isNullOrUndefined(i[f].foreground)||i[f].foreground.startsWith("#6n")||l.push(i[f].foreground),d=!1}if(o.length>0){r=t.buildTag("li.e-list e-bghdrcolor","","",{ejfnrole:u}),n=t.buildTag("a.e-menulink",h,{}),r.append(n),e.append(r);for(var f=0;f<o.length;f++)r=t.buildTag("li.e-list e-valcolor",{},{"background-color":o[f]},{ejfnrole:p}),e.append(r)}if(l.length>0){r=t.buildTag("li.e-list e-fghdrcolor","","",{ejfnrole:m}),n=t.buildTag("a.e-menulink",c,{}),r.append(n),e.append(r);for(var f=0;f<l.length;f++)r=t.buildTag("li.e-list e-valcolor",{},{"background-color":l[f]},{ejfnrole:g}),e.append(r)}o.length<1&&l.length<1?e.parent().addClass("e-disable-item"):e.parent().removeClass("e-disable-item")}else e.parent().addClass("e-disable-item");return e},_setCheckState:function(e){var i=e,s=e.split(this._spliter),a=s.length;if(!this._isFiltered||this._searchCount)return"checked";for(;a--;)if(i=this.processValue(s[a]),"date"==this._$colType||"datetime"==this._$colType||"boolean"==this._$colType){for(var r=0,n=this._filterdCol.length;r<n;r++)if("boolean"!=this._$colType||i===this._filterdCol[r].value){if("date"==this._$colType||"datetime"==this._$colType){var o=this._filterdCol[r].value,l="date"==this._$colType&&i instanceof Date?this._formatting(this._$format,new Date(i.getFullYear(),i.getMonth(),i.getDate()),this._locale):this._formatting(this._$format,i,this._locale),d="date"==this._$colType&&o instanceof Date?this._formatting(this._$format,new Date(o.getFullYear(),o.getMonth(),o.getDate()),this._locale):this._formatting(this._$format,o,this._locale);if(!(l===d&&"equal"==this._filterdCol[r].operator||this._maxFilterCount))continue;if(this._maxFilterCount&&(this._onDemandSearch||this._islargeData)){if(l==d)return this._checkedValue.push(l),"";if(-1==this._checkedValue.indexOf(d)||this._checkedValue.length==this._filterdCol.length)return"checked";continue}}return"checked"}}else{"string"!=this._$colType||t.isNullOrUndefined(i)||"string"!=typeof i||this._filterdCol[0].value==i.toLowerCase()&&(i=i.toLowerCase());var h=t.DataManager(this._filterdCol).executeLocal(t.Query().where("value","equal",i,this._filterdCol[0].matchcase).where("operator","equal","equal"));if(0!=h.length)return"equal"==h[0].operator&&!t.isNullOrUndefined(h[0].actualFilterOperator)&&"equal"==h[0].actualFilterOperator&&1==h[0].isCustom&&this._ctrlInstance.model.currentViewData.length>0?"checked":!0===h[0].isCustom?"":"checked";if((this._onDemandSearch||this._islargeData)&&this._maxFilterCount){var c=t.DataManager(this._filterdCol).executeLocal(t.Query().where("value","equal",i).where("operator","notequal","equal"));if(0==c.length)return"checked"}}},_genCheckID:function(){return"CheckBox"+this.getIndex()},_formatting:function(e,t,i){if("date"==this._$colType&&""==e&&(e="{0:MM/dd/yyyy hh:mm:ss}"),"boolean"==this._$colType)return""===t?"":this.localizedLabels[1==t?"True":0==t?"False":""];if(this._formatFiltering||"date"==this._$colType){var s=this._ctrlInstance.formatting;return""!=e?s(e,t,i):t}},_updateDateFilter:function(e){return"date"==e.type||e.value instanceof Date?(e.value=e.value instanceof Date?e.value:t.parseJSON({val:e.value}).val,-1==["equal","notequal"].indexOf(e.operator)?e:this._setDateObject(e)):e},_checkHandler:function(i){e("#"+i.model.id).prop("checked",i.isChecked);var s,a=this._listsWrap.find("input.e-ftrchk").filter(":checked:not(.e-selectall,.e-addtofilter)"),r=a.length,n=this._listsWrap.find(".e-selectall");r==this._chkList.length?(n.prop("checked",!0),s=!0):0==r?(n.prop("checked",!1),s=!1):i.isInteraction&&n.ejCheckBox("model.checkState","indeterminate"),n.ejCheckBox({checked:s}),e("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:0!=r||!t.isNullOrUndefined(this._add)&&this._add.prop("checked")})},_selectAllBeforeHandler:function(e){e.isChecked&&("indeterminate"==this.model.checkState?(e.cancel=!0,this.model.checkState="uncheck",this.option({checkState:"check"})):this.checkState("uncheck"))},_selectAllHandler:function(i){"check"==i.checkState?(this._chkList.filter(":not(:checked)").ejCheckBox({checked:i.isChecked,change:t.proxy(this._checkHandler,this)}),this._chkList.prop("checked",!0)):"uncheck"==i.checkState&&(this._chkList.filter(function(){if(e(this).hasClass("e-checkbox")&&e(this).prop("checked"))return this}).ejCheckBox({checked:i.isChecked}),this._chkList.prop("checked",!1),this._chkList.removeAttr("checked")),e("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:i.isChecked||!t.isNullOrUndefined(this._add)&&this._add.prop("checked")})},_renderCustomFDlg:function(i){var s=this.id+i+"_CustomFDlg";if(!e("#"+s).length){var a=t.buildTag("div#"+s+".e-excelfilter e-dlgcustom");a.addClass(this._cssClass),this._renderCDlgContent(a,i),a.ejDialog({showOnInit:!1,enableResize:!1,enableModal:!0,allowKeyboardNavigation:!1,title:this._title,width:370,content:"#"+this.id,enableRTL:this._ctrlInstance.model.enableRTL,closeIconTooltip:"Close",cssClass:"e-excelfilter e-customDlg"}),a.ejDialog("refresh")}},_renderCDlgContent:function(i,s){var a=t.buildTag("div.e-dlgfields",this.localizedLabels.Showrowswhere,{},{}),r=this.id+this._$colType,n=t.buildTag("fieldset.e-fieldset"),o=t.buildTag("tr.e-fields"),l=t.buildTag("tr.e-fields"),d=t.buildTag("tr.e-fields e-top"),h=t.buildTag("input#"+r+"_CustomDrop1"),c=t.buildTag("input#"+r+"_CustomDrop2"),u=t.buildTag("input#"+r+"_CustomDrop3"),p=t.buildTag("input#"+r+"_CustomValue1.e-ejinputtext e-excustmfltr",{},{},{type:"text"}),m=t.buildTag("input#"+r+"_CustomValue2.e-ejinputtext e-excustmfltr",{},{},{type:"text"}),g=t.buildTag("input#"+r+"_CustomValue3.e-ejinputtext e-excustmfltr",{},{},{type:"text"}),f=t.buildTag("tr.e-predicate"),_=t.buildTag("input#"+r+"_CustomAndPredicate",{},{},{type:"radio",name:"predicate",value:"and"}),v=t.buildTag("input#"+r+"_CustomOrPredicate",{},{},{type:"radio",name:"predicate",value:"or"}),b=t.buildTag("input#"+r+"_CustomMatchPredicate",{},{},{type:"checkbox"});i.append(a);var x=t.buildTag("table.e-optable");o.append(t.buildTag("td.e-operator").append(h)).append(t.buildTag("td.e-value").append(p)),f.append(t.buildTag("td",{},{},{}).append(_).append(t.buildTag("label.e-caption",this.localizedLabels.PredicateAnd,{},{for:r+"_CustomAndPredicate"})).append(v).append(t.buildTag("label.e-caption",this.localizedLabels.PredicateOr,{},{for:r+"_CustomOrPredicate"}))),l.append(t.buildTag("td.e-operator").append(c)).append(t.buildTag("td.e-value").append(m)),x.append(o).append(f).append(l),"string"==s&&f.append(t.buildTag("td",{},{},{}).append(b).append(t.buildTag("label.e-caption",this.localizedLabels.MatchCase,{},{for:r+"_CustomMatchPredicate"}))),"number"!=s&&"guid"!=s||(d.append(t.buildTag("td.e-operator").append(u)).append(t.buildTag("td.e-value").append(g)),x.append(d)),n.append(t.buildTag("legend")).append(x),i.append(t.buildTag("div.e-dlgfields").append(n)),i.append(t.buildTag("div.e-dlgfields").append(this._createBtn(!0))),i.appendTo("body");s.replace(s.charAt(0),s.charAt(0).toUpperCase());e([h,c]).ejDropDownList({fields:{text:"text",value:"value"},height:27,width:120,enableRTL:this._ctrlInstance.model.enableRTL}),"number"==s?(e([h,c]).ejDropDownList({popupWidth:"170px"}),e([p,m]).ejNumericTextbox({showSpinButton:!1,height:"27px",decimalPlaces:2,width:"177px",enableRTL:this._ctrlInstance.model.enableRTL,watermarkText:this.localizedLabels.NumericTextboxWaterMark,focusOut:function(e){0==this.model.decimalPlaces&&this.element.prev(".e-input").val(this.model.value)}})):"guid"==s?(e([h,c]).ejDropDownList({popupWidth:"170px"}),e(p).css({height:"22px",width:"175px"}),e(m).css({height:"22px",width:"177px"})):"date"==s?(e([h,c]).ejDropDownList({popupWidth:"170px"}),e([p,m]).ejDatePicker({cssClass:this._ctrlInstance.model.cssClass,height:"27px",width:"177px",enableRTL:this._ctrlInstance.model.enableRTL,watermarkText:this.localizedLabels.DatePickerWaterMark,locale:this._locale})):"datetime"==s?(e([h,c]).ejDropDownList({popupWidth:"170px"}),e([p,m]).ejDateTimePicker({cssClass:this._ctrlInstance.model.cssClass,height:"27px",width:"177px",enableRTL:this._ctrlInstance.model.enableRTL,watermarkText:this.localizedLabels.DateTimePickerWaterMark,locale:this._locale})):"string"==s&&e([p,m]).ejAutocomplete({cssClass:this._ctrlInstance.model.cssClass,enableRTL:this._ctrlInstance.model.enableRTL,enableDistinct:!0,width:"177px",height:"27px",locale:this._locale}),e([_,v]).ejRadioButton({cssClass:this._ctrlInstance.model.cssClass,enableRTL:this._ctrlInstance.model.enableRTL}),b.ejCheckBox({}),e("#"+r+"Custom_OkBtn").ejButton({text:this._getDeprecatedLocalizedLabel("OK"),showRoundedCorner:!0,width:"23.6%",click:t.proxy(this._fltrBtnHandler,this),enabled:!0}),e("#"+r+"Custom_CancelBtn").ejButton({text:this.localizedLabels.Cancel,showRoundedCorner:!0,width:"23.6%",click:t.proxy(this.closeXFDialog,this)})},_openCustomFilter:function(i){var s="top10"!=i?this._$colType:i,a={text:"",value:""},r=this.query,n=s.replace(s.charAt(0),s.charAt(0).toUpperCase()),o=this.id+this._$colType;this.closeXFDialog(),this._openedFltr=e("#"+o+"_CustomFDlg");var l={requestType:"filterbeforeopen",filterModel:this,columnName:this.fName,columnType:this._$colType,isCustomFilter:!0};if(!this._ctrlInstance._trigger(this._onActionBegin,l)){this._openedFltr.ejDialog("open"),this._openedFltr.ejDialog({open:function(t){e("#"+o+"_CustomValue1").hasClass("e-autocomplete")||e("#"+o+"_CustomValue1").hasClass("e-datepicker")||e("#"+o+"_CustomValue1").hasClass("e-datetimepicker")?e("#"+o+"_CustomValue1").focus():e("#"+o+"_CustomValue1").prev().focus()}}),this._openedFltr.find("legend").html(this._displayName);var d=-1!=["Number","Date"].indexOf(n)?6:5,h=this.localizedLabels[n+"MenuOptions"].slice(0,d);if(h.unshift(a),e("#"+o+"_CustomDrop1").ejDropDownList({dataSource:h}),e("#"+o+"_CustomDrop2").ejDropDownList({dataSource:h}),"number"==this._$colType&&"top10"==i?(this._openedFltr.find(".e-optable tr").not(".e-top").addClass("e-hide"),this._openedFltr.find(".e-optable tr.e-top").removeClass("e-hide"),e("#"+o+"_CustomDrop3").ejDropDownList({dataSource:this.localizedLabels[n+"MenuOptions"]})):(this._openedFltr.find(".e-optable tr.e-top").addClass("e-hide"),this._openedFltr.find(".e-optable tr").not(".e-top").removeClass("e-hide")),"string"==this._$colType){var c=this._$foreignField?this._$foreignField:this.fName,u=this._$foreignData&&this._$foreignField?this._$foreignData:this._dataSource;this._openedFltr.find(".e-autocomplete").ejAutocomplete({fields:{text:c},dataSource:u,query:r,focusIn:function(e){var t=this.element.closest("td").siblings().find(".e-dropdownlist").ejDropDownList("getSelectedValue"),i=this.element.closest(".e-dialog-scroller").find(".e-checkbox").prop("checked");this.model.caseSensitiveSearch=i,this.model.filterType=""==t?this.model.filterType:t}})}"date"==this._$colType&&""!=this._$format?this._openedFltr.find(".e-datepicker").ejDatePicker({dateFormat:this._$format.replace(/{0:|}/g,function(){return""}),enableStrictMode:!0}):"datetime"==this._$colType&&""!=this._$format&&this._openedFltr.find(".e-datetimepicker").ejDateTimePicker({dateTimeFormat:this._$format.replace(/{0:|}/g,function(){return""}),enableStrictMode:!0}),this._setFilteredData(o,i),t.isNullOrUndefined(this._customFilterHandler)||this._customFilterHandler();var l={requestType:"filterafteropen",filterModel:this,columnName:this.fName,columnType:this._$colType,isCustomFilter:!0};this._ctrlInstance._trigger(this._onActionComplete,l)}},_setFilteredData:function(i,s){var a,r=e.inArray(this.fName,this.cFilteredCols),n=[],o=[],l=["greaterthanorequal","lessthanorequal"];if("top10"!=s){-1!=r&&(n=t.DataManager(this.filteredColumn).executeLocal(t.Query().where("field","equal",this.fName))),-1!=r&&this._$foreignField&&(n=n[0].actuals),null!=this._initialFName&&this._initialFName==this.fName&&(n[0].isCustom=!0),a=n.length;var d=this._openedFltr.find(".e-dropdownlist"),h=this._openedFltr.find(".e-value input.e-ejinputtext.e-input"),c=this._openedFltr.find(".e-predicate");o=-1!=r&&a&&void 0!=n[0].from?[s,""]:"between"==s&&-1!=r&&a?[n[0].operator,t.isNullOrUndefined(n[1])?"":n[1].operator]:-1!=r&&a&&n[0].isCustom?["customfilter"!=s&&-1!=r?s:n[0].operator,"customfilter"==s&&n[1]?n[1].operator:""]:-1==r&&"customfilter"==s?["equal",""]:"between"==s||"customfilter"==s?"customfilter"!=s?l:["",""]:[s,""];for(var u=0;u<(-1!=r?a:2);u++){var p=/\D*/.exec(o[u])[0];e(d[u]).prop("value",p),e(d[u]).ejDropDownList("setSelectedValue",p),e(d[u]).ejDropDownList({change:function(e){this.element.closest(".e-fields").find(".e-autocomplete").val("")}});var m=-1!=r&&a&&n[u].isCustom&&(p==(this._$foreignField?n[u].actualFilterOperator:n[u].operator)||"customfilter"==p||"between"==p)?this._$foreignField?""!=p?n[u].actualFilterValue:"":n[u].value:"";e(h[u]).hasClass("e-datepicker")?e("#"+h[u].id).ejDatePicker("model.value",-1!=r&&a&&n[u].isCustom?n[u].value:null):e(h[u]).hasClass("e-numerictextbox")?e("#"+h[u].id).ejNumericTextbox("model.value",m):e(h[u]).hasClass("e-datetimepicker")?e(h[u]).ejDateTimePicker("model.value",m):e(h[u]).val(m);var g=-1!=r&&a&&n[u].isCustom&&void 0!=n[u].predicate?this._$foreignField?n[u].actualPredicate:n[u].predicate:"and";if(c.find("input[value="+g+"]").ejRadioButton({checked:!0}),"string"==this._$colType){var f=-1!=r&&a&&n[u].isCustom?n[u].matchcase:this._matchCase;c.find("input.e-js[type='checkbox']").ejCheckBox({checked:f})}this._openedFltr.find(".e-value input:visible:eq(0)").select()}}},_setDateObject:function(i){if(null!=i.value){var s=(i.value,e.extend(!0,{},i)),a=e.extend(!0,{},i),r=new Date(s.value.setSeconds(s.value.getSeconds()-1)),n=new Date(a.value.setSeconds(a.value.getSeconds()+2));i.value=new Date(i.value.setSeconds(a.value.getSeconds()-1)),s.value=r,a.value=n,"equal"==i.operator?(s.operator="greaterthan",s.predicate="and",a.operator="lessthan",a.predicate="and"):"notequal"==i.operator&&(s.operator="lessthanorequal",s.predicate="or",a.operator="greaterthanorequal",a.predicate="or");var o=t.Predicate(s.field,s.operator,s.value,!1);return o=o[a.predicate](a.field,a.operator,a.value,!1),i.ejpredicate=o,i.type="date",i}return i},_getCDlgFields:function(){var t,i=this._openedFltr.find(".e-dropdownlist"),s=this._openedFltr.find(".e-checkbox"),a=!0,r=[],n=this._openedFltr.find(".e-value input.e-ejinputtext.e-input"),o=this._openedFltr.find(".e-value input"),l=this._openedFltr.find(".e-predicate  div[aria-checked = true]").find("input[type ='radio']").val();-1==e.inArray(this.fName,this.cFilteredCols)&&this.cFilteredCols.push(this.fName);for(var d=0,h=i.length;d<h;d++){var c,u=e(i[d]).ejDropDownList("getSelectedValue");if("number"==this._$colType&&(c=parseFloat(n.eq(d).ejNumericTextbox("model.value"))),"guid"==this._$colType&&(c=o.eq(d).val()),"string"==this._$colType&&(c=n.eq(d).val(),a=s.is(":checked")),"date"==this._$colType&&(c=n.eq(d).ejDatePicker("model.value")),"datetime"==this._$colType&&(c=n.eq(d).ejDateTimePicker("model.value")),t={field:this.fName,predicate:1==d?l:"or",matchcase:a,isCustom:!0},"top"==u||"bottom"==u)r.push(e.extend(!0,{value:"",operator:"notequal",take:c,from:u},t));else{if(""==u)break;if(this._empties.indexOf(c+"")>-1||"number"==this._$colType&&isNaN(c)){var p=this.iterateAndGetCollection(this._empties.join(this._spliter),e.extend({},t,{predicate:"notequal"===u.toLowerCase()?"and":"or",operator:u.toLowerCase()})),m=this.generatePredicate(p);r.push(e.extend({},t,{ejpredicate:m,operator:u.toLowerCase()}))}else{var g={};e.extend(!0,g,{value:c,operator:u.toLowerCase(),isCustom:!0,actualFilterOperator:u.toLowerCase(),actualFilterValue:c,actualPredicate:t.predicate},t),"date"==this._$colType&&(g.type="date"),r.push("date"==this._$colType&&-1!=["equal","notequal"].indexOf(u.toLowerCase())?this._setDateObject(g):g)}}}void 0==this._$foreignField?this.initiateFilter(r):this._filterForeignData(r,!0)},_fltrBtnHandler:function(i){var s,a=[],r={},n="",o=[];if(this._maxFilterCount=!1,this._clearSearchValue&&(this._searchCount=0),this._openedFltr.hasClass("e-dlgcustom"))a=this._getCDlgFields(),-1==e.inArray(this.fName,this.cFilteredCols)&&a[0]&&this.cFilteredCols.push(this.fName);else{if(!this._isFiltered&&this._listsWrap.find(".e-selectall").ejCheckBox("model.checked")&&(0==this._searchCount||this._add&&this._add.prop("checked")))return this.closeXFDialog();if(this._onDemandSearch||this._islargeData)this._listsWrap.find("input.e-ftrchk").filter(":checked:not(.e-selectall)").length<=this._listsWrap.find("input.e-ftrchk").filter(":not(:checked):not(.e-selectall)").length||this._listsWrap.find(".e-selectall").ejCheckBox("model.checked")?(o=this._listsWrap.find("input.e-ftrchk").filter(":checked:not(.e-selectall)"),n="equal"):(o=this._listsWrap.find("input.e-ftrchk").filter(":not(:checked):not(.e-selectall)"),n="notequal",this._maxFilterCount=!0);else{var l=this._chkList.filter(":checked"),d=this._chkList.filter(":not(':checked')");this._add&&this._add.prop("checked")?(d.length&&(s=d),o=0==this._checked.length?this._preChkList:this._checked,l.length&&0!=this._checked.length&&t.merge(o,l)):o=this._listsWrap.find("input.e-ftrchk").filter(":checked:not(.e-selectall,.e-addtofilter)"),n="string"==this._colType?"startswith":"equal"}for(var h,c=o.length,u=this.getType(),p="string"!=this._colType||this._matchCase,m="string"!=this._colType||this._accent,g=this._maxFilterCount?{field:this.fName,predicate:"and",operator:n,matchcase:p,accent:m}:{field:this.fName,predicate:"or",operator:n,matchcase:p,accent:m},f=0;f<c;f++){if(!t.isNullOrUndefined(s))for(var _=0;_<s.length;_++){var v=0;if(o[f].value==s[_].value){v=1;break}}if(!v)if(h=o[f].value,this.enableNormalize&&-1!=h.indexOf(this._spliter))t.merge(a,this.iterateAndGetCollection(h,g));else{h=this.processValue(h,u),e.extend(!0,r,{value:h},g);for(var _=0;_<a.length;_++){var b=0;if(a[_].value==h){b=1;break}}b||(a.push("date"==u?this._setDateObject(r):r),r={})}}var x=e.inArray(this.fName,this.cFilteredCols);-1!=x&&this.cFilteredCols.splice(x,1),this._isFiltered&&this._searchRequest&&(this._checkIsIndeterminate(this.fName,this.filteredColumn),this._isIndeterminate&&(t.merge(a,this.filteredColumn),a=t.distinct(a,"value",!0),this._searchRequest=!1)),this.initiateFilter(a)}},initiateFilter:function(i){var s,a=i[0];if(!t.isNullOrUndefined(a)){isTake=a.from,s=a.ejpredicate?a.ejpredicate:t.Predicate(a.field,a.operator,a.value,!a.matchcase,!a.accent);for(var r=1,n=i.length;r<n;r++)s=void 0!=i[r].ejpredicate?s[i[r].predicate](i[r].ejpredicate):s[i[r].predicate](i[r].field,i[r].operator,i[r].value,!i[r].matchcase,!i[r].accent);arg={action:"filtering",filterCollection:i,fieldName:this.fName,ejpredicate:s,tableID:this._$tableID},void 0==this._predicates[this._$key]&&(this._predicates[this._$key]={}),this._predicates[this._$key][this.fName]=isTake?{from:a.from,take:a.take}:s,this._openedFltr.hasClass("e-dlgcustom")||!this._listsWrap.find(".e-selectall").ejCheckBox("model.checked")||this._searchCount&&(!this._add||!this._add.prop("checked")||0!=this._preChkList.filter(":not(':checked')").length&&0!=this._checked.length)&&i.length!=this._preChkList.length||-1==e.inArray(this.fName,this._columnsFiltered)||(arg={action:"clearfiltering",filterDetails:{field:this.fName,operator:"",predicate:"or",value:""},fieldName:this.fName,tableID:this._$tableID}),-1==e.inArray(this.fName,this._columnsFiltered)&&this._columnsFiltered.push(this.fName),this._filterHandler(arg)}this.closeXFDialog()},getDistinct:function(e,i,s,a){for(var r,n,o,l={},d=e.length,h=[];d--;)r=e[d],n=t.getObject(i,r),o=n,t.isNullOrUndefined(r)||(this.enableNormalize&&(o=this._formatting(this._$format,n,this._locale)),r.ejvalue=o,!a&&n in l||h.push(s?r:n),l[n]=!0);return h=t.group(t.mergeSort(h,i),"ejvalue")},iterateAndGetCollection:function(t,i){var s,a=t.split(this._spliter),r=a.length,n=[],o=this._ctrlInstance._$colType;if("number"==o||"date"==o||"datetime"==o){var l=a.indexOf("");l>-1&&a.splice(l,1)}for(;r--;)s=this.processValue(a[r]),n.push(e.extend(!0,{value:s},i));return n},processValue:function(e,i){switch(i=i||this.getType(),i=-1!=this._empties.indexOf(e)?"empty":i,e=e===this.guid?this._blankValue+"":e,i){case"empty":e="null"==e?null:"undefined"==e?void 0:"";break;case"date":case"datetime":e=new Date(e);break;case"number":e=+e;break;case"boolean":e=isNaN(e)||"string"!=typeof e?"true"===e:0!=t.parseInt(e)}return e},getType:function(){return t.isNullOrUndefined(this._$foreignField)?this._$colType:this._$foreignKeyType},replacer:function(e,t,i,s){return"function"==typeof i&&(i=i.call(this,s)),e.replace(t,i)},_virtualize:function(i){var s=e("#"+this.id+this._$colType+"_CheckBoxList").height(),a=this._chkList.not(".e-checkbox").filter(function(){if(this.offsetTop>i.scrollTop-this.offsetHeight&&i.scrollTop+s+70>this.offsetTop+this.offsetHeight)return this});if(0!=a.length){a.filter(":checked").ejCheckBox({checked:!0}),a.filter(":not(:checked)").ejCheckBox({checked:!1}),a.ejCheckBox({change:t.proxy(this._checkHandler,this)});this._listsWrap.ejScroller("instance").refresh()}},resetFilterModel:function(e){this._blank=void 0,this._addAtLast=!1,this._isFiltered=!1,this._searchCount=0},resetExcelFilter:function(t){var i,s,a,r,n=this.id;for(this._predicates=[],this.cFilteredCols=[],this.resetFilterModel(),i=0,a=this._posType.length;i<a;i++){s=this._posType[i],r=n+s;var o=e("#"+r+"_CustomFDlg");e("#"+r+"_CheckBoxList").ejWaitingPopup("destroy"),e("#"+r+"_excelDlg").remove(),o.find(".e-dropdownlist").ejDropDownList("destroy"),o.find(".e-button").ejButton("destroy"),"string"!=s&&"boolean"!=s||o.find(".e-autocomplete").ejAutocomplete("destroy"),"number"==s&&o.find(".e-numerictextbox").ejNumericTextbox("destroy"),"date"==s&&o.find(".e-datepicker").ejDatePicker("destroy"),o.ejDialog("destroy"),e("#"+r+"_CustomFDlg").remove()}},_wireEvents:function(){this._ctrlInstance._on(this._dialogContainer,"focus click",".e-searchbox",t.proxy(this._searchBoxFocus,this)),this._ctrlInstance._on(this._dialogContainer,"keyup",".e-searchbox input",t.proxy(this._search,this))}},t.ExcelFilter.valueDelimiter="@|@",t.ExcelFilter.Locale=t.ExcelFilter.Locale||{},t.ExcelFilter.Locale.default=t.ExcelFilter.Locale["en-US"]={SortNoSmaller:"Sort Smallest to Largest",SortNoLarger:"Sort Largest to Smallest",SortTextAscending:"Sort A to Z",SortTextDescending:"Sort Z to A",SortDateOldest:"Sort by Oldest",SortDateNewest:"Sort by Newest",SortByColor:"Sort By Color",SortByCellColor:"Sort by Cell Color",SortByFontColor:"Sort by Font Color",FilterByColor:"Filter By Color",CustomSort:"Custom Sort",FilterByCellColor:"Filter by Cell Color",FilterByFontColor:"Filter by Font Color",ClearFilter:"Clear Filter",NumberFilter:"Number Filters",GuidFilter:"Guid Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"Date Time Filters",SelectAll:"Select All",Blanks:"Blanks",Search:"Search",Showrowswhere:"Show rows where",NumericTextboxWaterMark:"Enter value",StringMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Starts With",value:"startswith"},{text:"Ends With",value:"endswith"},{text:"Contains",value:"contains"},{text:"Custom Filter",value:"customfilter"}],NumberMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Less Than",value:"lessthan"},{text:"Less Than Or Equal",value:"lessthanorequal"},{text:"Greater Than",value:"greaterthan"},{text:"Greater Than Or Equal",value:"greaterthanorequal"},{text:"Between",value:"between"},{text:"Custom Filter",value:"customfilter"}],GuidMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Custom Filter",value:"customfilter"}],DateMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Less Than",value:"lessthan"},{text:"Less Than Or Equal",value:"lessthanorequal"},{text:"Greater Than",value:"greaterthan"},{text:"Greater Than Or Equal",value:"greaterthanorequal"},{text:"Between",value:"between"},{text:"Custom Filter",value:"customfilter"}],DatetimeMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Less Than",value:"lessthan"},{text:"Less Than Or Equal",value:"lessthanorequal"},{text:"Greater Than",value:"greaterthan"},{text:"Greater Than Or Equal",value:"greaterthanorequal"},{text:"Between",value:"between"},{text:"Custom Filter",value:"customfilter"}],Top10MenuOptions:[{text:"Top",value:"top"},{text:"Bottom",value:"bottom"}],title:"Custom Filter",PredicateAnd:"AND",PredicateOr:"OR",OK:"OK",MatchCase:"Match Case",Cancel:"Cancel",NoResult:"No Matches Found",CheckBoxStatusMsg:"Not all items showing",DatePickerWaterMark:"Select date",DateTimePickerWaterMark:"Select date time",True:"true",False:"false",AddToFilter:"Add current selection to filter"}}(jQuery,Syncfusion);